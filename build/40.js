webpackJsonp([40],{2065:function(n,l,t){"use strict";function e(n){return o._57(0,[(n()(),o._31(0,0,null,null,2,"p",[["text-end",""]],null,null,null,null,null)),(n()(),o._55(1,null,["",""])),o._49(2,1)],null,function(n,l){n(l,1,0,o._56(l,1,0,n(l,2,0,o._44(l.parent.parent,0),l.parent.context.$implicit.spaceUsage)))})}function a(n){return o._57(0,[(n()(),o._31(0,0,null,null,3,"p",[["text-end",""]],null,null,null,null,null)),(n()(),o._55(1,null,["",""])),o._48(2,{$a:0}),o._47(131072,N.a,[F.a,o.j])],null,function(n,l){n(l,1,0,o._56(l,1,0,o._44(l,3).transform("core.settings.entriesincache",n(l,2,0,l.parent.context.$implicit.cacheEntries))))})}function u(n){return o._57(0,[(n()(),o._31(0,0,null,null,30,"ion-item",[["class","item item-block"]],[[2,"core-primary-selected-item",null]],null,null,H.b,H.a)),o._30(1,1097728,null,3,L.a,[T.a,G.a,o.t,o.V,[2,A.a]],null,null),o._52(335544320,3,{contentLabel:0}),o._52(603979776,4,{_buttons:1}),o._52(603979776,5,{_icons:1}),o._30(5,16384,null,0,J.a,[],null,null),(n()(),o._55(-1,2,["\n            "])),(n()(),o._31(7,0,null,2,2,"h2",[["text-wrap",""]],null,null,null,null,null)),(n()(),o._31(8,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._30(9,540672,null,0,K.a,[o.t,_.a,f.a,q.a,F.a,z.a,B.a,Q.a,W.a,X.a,Y.a,Z.a,[2,nn.a],[2,ln.a],[2,tn.a],en.a,an.a,un.a,rn.a,on.a,o._11],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(n()(),o._55(-1,2,["\n            "])),(n()(),o._31(11,0,null,2,1,"p",[["text-wrap",""]],null,null,null,null,null)),(n()(),o._55(12,null,["",""])),(n()(),o._55(-1,2,["\n            "])),(n()(),o._31(14,0,null,4,7,"div",[["item-end",""]],null,null,null,null,null)),(n()(),o._55(-1,null,["\n                "])),(n()(),o._26(16777216,null,null,1,null,e)),o._30(17,16384,null,0,cn.k,[o._11,o._6],{ngIf:[0,"ngIf"]},null),(n()(),o._55(-1,null,["\n                "])),(n()(),o._26(16777216,null,null,1,null,a)),o._30(20,16384,null,0,cn.k,[o._11,o._6],{ngIf:[0,"ngIf"]},null),(n()(),o._55(-1,null,["\n            "])),(n()(),o._55(-1,2,["\n            "])),(n()(),o._31(23,0,null,4,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.deleteSiteStorage(n.context.$implicit)&&e}return e},sn.b,sn.a)),o._30(24,1097728,[[4,4]],0,_n.a,[[8,""],G.a,o.t,o.V],{color:[0,"color"],clear:[1,"clear"]},null),o._47(131072,N.a,[F.a,o.j]),(n()(),o._55(-1,0,["\n                "])),(n()(),o._31(27,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._30(28,147456,null,0,fn.a,[G.a,o.t,o.V],{name:[0,"name"]},null),(n()(),o._55(-1,0,["\n            "])),(n()(),o._55(-1,2,["\n        "]))],function(n,l){n(l,9,0,l.context.$implicit.siteName,l.context.$implicit.id,"true");n(l,17,0,null!=l.context.$implicit.spaceUsage);n(l,20,0,null!=l.context.$implicit.cacheEntries);n(l,24,0,"danger","");n(l,28,0,"trash")},function(n,l){n(l,0,0,l.context.$implicit.id==l.component.currentSiteId);n(l,12,0,l.context.$implicit.fullName);n(l,23,0,!l.context.$implicit.spaceUsage>"0"&&!l.context.$implicit.cacheEntries>"0",o._56(l,23,1,o._44(l,25).transform("core.settings.deletesitefilestitle")));n(l,27,0,o._44(l,28)._hidden)})}function i(n){return o._57(0,[(n()(),o._31(0,0,null,null,22,"ion-item-divider",[["class","item item-divider"]],null,null,null,H.b,H.a)),o._30(1,1097728,null,3,L.a,[T.a,G.a,o.t,o.V,[2,A.a]],null,null),o._52(335544320,6,{contentLabel:0}),o._52(603979776,7,{_buttons:1}),o._52(603979776,8,{_icons:1}),o._30(5,16384,null,0,pn.a,[G.a,o.t,o.V],null,null),(n()(),o._55(-1,2,["\n            "])),(n()(),o._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),o._55(8,null,["",""])),o._47(131072,N.a,[F.a,o.j]),(n()(),o._55(-1,2,["\n            "])),(n()(),o._31(11,0,null,4,10,"div",[["item-end",""]],null,null,null,null,null)),(n()(),o._55(-1,null,["\n                "])),(n()(),o._31(13,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),o._55(14,null,["",""])),o._49(15,1),(n()(),o._55(-1,null,["\n                "])),(n()(),o._31(17,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),o._55(18,null,["",""])),o._48(19,{$a:0}),o._47(131072,N.a,[F.a,o.j]),(n()(),o._55(-1,null,["\n            "])),(n()(),o._55(-1,2,["\n        "]))],null,function(n,l){var t=l.component;n(l,8,0,o._56(l,8,0,o._44(l,9).transform("core.settings.total")));n(l,14,0,o._56(l,14,0,n(l,15,0,o._44(l.parent,0),t.totals.spaceUsage)));n(l,18,0,o._56(l,18,0,o._44(l,20).transform("core.settings.entriesincache",n(l,19,0,t.totals.cacheEntries))))})}function r(n){return o._57(0,[o._47(0,hn.a,[W.a,q.a]),(n()(),o._31(1,0,null,null,17,"ion-header",[],null,null,null,null,null)),o._30(2,16384,null,0,dn.a,[G.a,o.t,o.V,[2,bn.a]],null,null),(n()(),o._55(-1,null,["\n    "])),(n()(),o._31(4,0,null,null,13,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,gn.b,gn.a)),o._30(5,49152,null,0,mn.a,[vn.a,[2,bn.a],[2,nn.a],G.a,o.t,o.V],null,null),o._30(6,212992,null,0,yn.a,[mn.a,z.a,F.a,an.a],null,null),(n()(),o._55(-1,3,["\n        "])),(n()(),o._31(8,0,null,3,3,"ion-title",[],null,null,null,xn.b,xn.a)),o._30(9,49152,null,0,wn.a,[G.a,o.t,o.V,[2,Un.a],[2,mn.a]],null,null),(n()(),o._55(10,0,["",""])),o._47(131072,N.a,[F.a,o.j]),(n()(),o._55(-1,3,["\n        "])),(n()(),o._31(13,0,null,2,3,"ion-buttons",[["end",""]],null,null,null,null,null)),o._30(14,16384,null,1,Sn.a,[G.a,o.t,o.V,[2,Un.a],[2,mn.a]],null,null),o._52(603979776,1,{_buttons:1}),(n()(),o._55(-1,null,["\n        "])),(n()(),o._55(-1,3,["\n    "])),(n()(),o._55(-1,null,["\n"])),(n()(),o._55(-1,null,["\n"])),(n()(),o._31(20,0,null,null,11,"core-navbar-buttons",[],null,null,null,jn.b,jn.a)),o._30(21,245760,null,1,In.a,[o.t,W.a,f.a],null,null),o._52(603979776,2,{buttons:1}),(n()(),o._55(-1,0,["\n    "])),(n()(),o._31(24,0,null,0,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.showInfo()&&e}return e},sn.b,sn.a)),o._30(25,1097728,[[2,4]],0,_n.a,[[8,""],G.a,o.t,o.V],null,null),o._47(131072,N.a,[F.a,o.j]),(n()(),o._55(-1,0,["\n        "])),(n()(),o._31(28,0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._30(29,147456,null,0,fn.a,[G.a,o.t,o.V],{name:[0,"name"]},null),(n()(),o._55(-1,0,["\n    "])),(n()(),o._55(-1,0,["\n"])),(n()(),o._55(-1,null,["\n"])),(n()(),o._31(33,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,En.b,En.a)),o._30(34,4374528,null,0,ln.a,[G.a,z.a,kn.a,o.t,o.V,vn.a,Rn.a,o.M,[2,bn.a],[2,nn.a]],null,null),(n()(),o._55(-1,1,["\n    "])),(n()(),o._31(36,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var e=!0;if("ionRefresh"===l){e=!1!==n.component.refreshData(t)&&e}return e},null,null)),o._30(37,212992,null,0,Pn.a,[z.a,ln.a,o.M,Vn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),o._55(-1,null,["\n        "])),(n()(),o._31(39,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,$n.b,$n.a)),o._30(40,114688,null,0,On.a,[Pn.a,G.a],{pullingText:[0,"pullingText"]},null),o._47(131072,N.a,[F.a,o.j]),(n()(),o._55(-1,null,["\n    "])),(n()(),o._55(-1,1,["\n    "])),(n()(),o._31(44,0,null,1,8,"core-loading",[],null,null,null,Dn.b,Dn.a)),o._30(45,638976,null,0,Cn.a,[F.a,o.t,an.a,B.a],{hideUntil:[0,"hideUntil"]},null),(n()(),o._55(-1,0,["\n        "])),(n()(),o._26(16777216,null,0,1,null,u)),o._30(48,802816,null,0,cn.j,[o._11,o._6,o.E],{ngForOf:[0,"ngForOf"]},null),(n()(),o._55(-1,0,["\n        "])),(n()(),o._26(16777216,null,0,1,null,i)),o._30(51,16384,null,0,cn.k,[o._11,o._6],{ngIf:[0,"ngIf"]},null),(n()(),o._55(-1,0,["\n    "])),(n()(),o._55(-1,1,["\n"])),(n()(),o._55(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,6,0),n(l,21,0);n(l,29,0,"information-circle");n(l,37,0,t.loaded);n(l,40,0,o._34(1,"",o._56(l,40,0,o._44(l,41).transform("core.pulltorefresh")),""));n(l,45,0,t.loaded);n(l,48,0,t.sites);n(l,51,0,t.totals)},function(n,l){n(l,4,0,o._44(l,5)._hidden,o._44(l,5)._sbPadding);n(l,10,0,o._56(l,10,0,o._44(l,11).transform("core.settings.spaceusage")));n(l,24,0,o._56(l,24,0,o._44(l,26).transform("core.info")));n(l,28,0,o._44(l,29)._hidden);n(l,33,0,o._44(l,34).statusbarPadding,o._44(l,34)._hasRefresher);n(l,36,0,"inactive"!==o._44(l,37).state,o._44(l,37)._top);n(l,39,0,o._44(l,40).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var o=t(0),c=t(5),s=t(3),_=t(1),f=t(4),p=t(727),h=this&&this.__decorate||function(n,l,t,e){var a,u=arguments.length,i=u<3?l:null===e?e=Object.getOwnPropertyDescriptor(l,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,l,t,e);else for(var r=n.length-1;r>=0;r--)(a=n[r])&&(i=(u<3?a(i):u>3?a(l,t,i):a(l,t))||i);return u>3&&i&&Object.defineProperty(l,t,i),i},d=this&&this.__metadata||function(n,l){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,l)},b=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{o(e.next(n))}catch(n){u(n)}}function r(n){try{o(e.throw(n))}catch(n){u(n)}}function o(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,r)}o((e=e.apply(n,l||[])).next())})},g=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return r.label++,{value:t[1],done:!1};case 5:r.label++,a=t[1],t=[0];continue;case 7:t=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){r=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){r.label=t[1];break}if(6===t[0]&&r.label<u[1]){r.label=u[1],u=t;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(t);break}u[2]&&r.ops.pop(),r.trys.pop();continue}t=l.call(n,r)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,r={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},m=function(){function n(n,l,t,e){this.sitesProvider=n,this.settingsHelper=l,this.domUtils=t,this.translate=e,this.loaded=!1,this.sites=[],this.currentSiteId="",this.totals={cacheEntries:0,spaceUsage:0},this.currentSiteId=this.sitesProvider.getCurrentSiteId()}return n.prototype.ionViewDidLoad=function(){var n=this;this.loadSiteData().finally(function(){n.loaded=!0})},n.prototype.loadSiteData=function(){return b(this,void 0,void 0,function(){var n,l,t,e=this;return g(this,function(a){switch(a.label){case 0:return n=0,l=0,t=this,[4,this.sitesProvider.getSortedSites()];case 1:return t.sites=a.sent(),[4,Promise.all(this.sites.map(function(t){return b(e,void 0,void 0,function(){var e;return g(this,function(a){switch(a.label){case 0:return[4,this.settingsHelper.getSiteSpaceUsage(t.id)];case 1:return e=a.sent(),t.cacheEntries=e.cacheEntries,t.spaceUsage=e.spaceUsage,n+=t.spaceUsage?parseInt(t.spaceUsage,10):0,l+=t.cacheEntries?parseInt(t.cacheEntries,10):0,[2]}})})}))];case 2:return a.sent(),this.totals.spaceUsage=n,this.totals.cacheEntries=l,[2]}})})},n.prototype.refreshData=function(n){this.loadSiteData().finally(function(){n.complete()})},n.prototype.deleteSiteStorage=function(n){var l=this;this.settingsHelper.deleteSiteStorage(n.siteName,n.id).then(function(t){l.totals.spaceUsage-=n.spaceUsage-t.spaceUsage,l.totals.spaceUsage-=n.cacheEntries-t.cacheEntries,n.spaceUsage=t.spaceUsage,n.cacheEntries=t.cacheEntries}).catch(function(){})},n.prototype.showInfo=function(){this.domUtils.showAlert(this.translate.instant("core.help"),this.translate.instant("core.settings.spaceusagehelp"))},n=h([Object(o.m)({selector:"page-core-settings-space-usage",templateUrl:"space-usage.html"}),d("design:paramtypes",[_.a,p.a,f.a,s.c])],n)}(),v=t(26),y=t(32),x=t(106),w=this&&this.__decorate||function(n,l,t,e){var a,u=arguments.length,i=u<3?l:null===e?e=Object.getOwnPropertyDescriptor(l,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,l,t,e);else for(var r=n.length-1;r>=0;r--)(a=n[r])&&(i=(u<3?a(i):u>3?a(l,t,i):a(l,t))||i);return u>3&&i&&Object.defineProperty(l,t,i),i},U=function(){function n(){}return n=w([Object(o.I)({declarations:[m],imports:[v.a,y.a,x.a,c.l.forChild(m),s.b.forChild()]})],n)}(),S=t(1522),j=t(1523),I=t(1524),E=t(1525),k=t(1526),R=t(1527),P=t(1528),V=t(1529),$=t(1530),O=t(1531),D=t(1532),C=t(1533),M=t(1534),N=t(25),F=t(18),H=t(31),L=t(21),T=t(19),G=t(8),A=t(27),J=t(33),K=t(47),q=t(11),z=t(16),B=t(2),Q=t(22),W=t(6),X=t(17),Y=t(10),Z=t(15),nn=t(20),ln=t(29),tn=t(28),en=t(42),an=t(9),un=t(40),rn=t(30),on=t(36),cn=t(7),sn=t(46),_n=t(43),fn=t(48),pn=t(100),hn=t(1570),dn=t(370),bn=t(39),gn=t(721),mn=t(211),vn=t(35),yn=t(473),xn=t(722),wn=t(314),Un=t(247),Sn=t(371),jn=t(96),In=t(87),En=t(181),kn=t(34),Rn=t(107),Pn=t(159),Vn=t(44),$n=t(212),On=t(173),Dn=t(54),Cn=t(51),Mn=o._29({encapsulation:2,styles:[],data:{}}),Nn=o._27("page-core-settings-space-usage",m,function(n){return o._57(0,[(n()(),o._31(0,0,null,null,1,"page-core-settings-space-usage",[],null,null,null,r,Mn)),o._30(1,49152,null,0,m,[_.a,p.a,f.a,F.a],null,null)],null,null)},{},{},[]),Fn=t(23),Hn=t(366),Ln=t(367),Tn=t(369),Gn=t(368),An=t(472),Jn=t(720),Kn=t(270);t.d(l,"CoreSettingsSpaceUsagePageModuleNgFactory",function(){return qn});var qn=o._28(U,[],function(n){return o._40([o._41(512,o.o,o._21,[[8,[S.a,j.a,I.a,E.a,k.a,R.a,P.a,V.a,$.a,O.a,D.a,C.a,M.a,Nn]],[3,o.o],o.K]),o._41(4608,cn.m,cn.l,[o.G,[2,cn.w]]),o._41(4608,Fn.x,Fn.x,[]),o._41(4608,Fn.d,Fn.d,[]),o._41(4608,Hn.b,Hn.a,[]),o._41(4608,Ln.a,Ln.b,[]),o._41(4608,Tn.b,Tn.a,[]),o._41(4608,Gn.b,Gn.a,[]),o._41(4608,F.a,F.a,[An.a,Hn.b,Ln.a,Tn.b,Gn.b,F.b,F.c]),o._41(512,cn.b,cn.b,[]),o._41(512,Fn.v,Fn.v,[]),o._41(512,Fn.i,Fn.i,[]),o._41(512,Fn.s,Fn.s,[]),o._41(512,Jn.a,Jn.a,[]),o._41(512,s.b,s.b,[]),o._41(512,y.a,y.a,[]),o._41(512,x.a,x.a,[]),o._41(512,v.a,v.a,[]),o._41(512,Jn.b,Jn.b,[]),o._41(512,U,U,[]),o._41(256,F.c,void 0,[]),o._41(256,F.b,void 0,[]),o._41(256,Kn.a,m,[])])})}});