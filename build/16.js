webpackJsonp([16],{2119:function(n,e,t){"use strict";function l(n){return P._57(0,[(n()(),P._31(0,0,null,null,1,"img",[["class","core-bar-button-image"],["core-external-content",""],["onError","this.src='assets/img/group-avatar.png'"],["role","presentation"]],[[8,"alt",0]],null,null,null,null)),P._30(1,4734976,null,0,hn.a,[P.t,V.a,gn.a,_n.a,S.a,j.a,pn.a,q.a,O.a],{siteId:[0,"siteId"],src:[1,"src"]},null)],function(n,e){var t=e.component;n(e,1,0,t.siteId||null,t.conversationImage)},function(n,e){n(e,0,0,e.component.title)})}function o(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"ion-avatar",[["class","core-bar-button-image"],["core-user-avatar",""],["item-start",""]],null,[[null,"click"]],function(n,e,t){var l=!0,o=n.component;if("click"===e){l=!1!==(o.showInfo&&o.viewInfo())&&l}return l},vn.b,vn.a)),P._30(1,770048,null,0,bn.a,[yn.a,S.a,O.a,q.a,U.a,[2,F.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"],checkOnline:[2,"checkOnline"]},null),P._30(2,16384,null,0,Mn.a,[],null,null)],function(n,e){var t=e.component;n(e,1,0,t.otherMember,!1,t.otherMember.showonlinestatus)},null)}function s(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"core-icon",[["name","fa-star"]],null,null,null,In.b,In.a)),P._30(1,704512,null,0,kn.a,[P.t,Cn.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),P._47(131072,wn.a,[Pn.a,P.j])],function(n,e){n(e,1,0,"fa-star",P._56(e,1,1,P._44(e,2).transform("core.favourites")))},null)}function i(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"core-icon",[["name","volume-off"]],null,null,null,In.b,In.a)),P._30(1,704512,null,0,kn.a,[P.t,Cn.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),P._47(131072,wn.a,[Pn.a,P.j])],function(n,e){n(e,1,0,"volume-off",P._56(e,1,1,P._44(e,2).transform("addon.messages.mutedconversation")))},null)}function a(n){return P._57(0,[(n()(),P._31(0,0,null,null,10,null,null,null,null,null,null,null)),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(2,0,null,null,2,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._55(3,null,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(6,0,null,null,3,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._31(7,0,null,null,2,"i",[],null,null,null,null,null)),(n()(),P._55(8,null,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n        "]))],null,function(n,e){n(e,3,0,P._56(e,3,0,P._44(e,4).transform("addon.messages.selfconversation")));n(e,8,0,P._56(e,8,0,P._44(e,9).transform("addon.messages.selfconversationdefaultmessage")))})}function r(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"h6",[["class","addon-messages-date"],["text-center",""]],null,null,null,null,null)),(n()(),P._55(1,null,["\n                    ","\n                "])),P._49(2,2)],null,function(n,e){n(e,1,0,P._56(e,1,0,n(e,2,0,P._44(e.parent.parent,0),e.parent.context.$implicit.timecreated,"strftimedayshort")))})}function u(n){return P._57(0,[(n()(),P._31(0,0,null,null,11,"ion-chip",[["class","addon-messages-unreadfrom"],["color","light"]],null,null,null,null,null)),P._30(1,16384,null,0,En.a,[Cn.a,P.t,P.V],{color:[0,"color"]},null),(n()(),P._55(-1,null,["\n                    "])),(n()(),P._31(3,0,null,null,4,"ion-label",[],null,null,null,null,null)),P._30(4,16384,null,0,xn.a,[Cn.a,P.t,P.V,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),P._55(5,null,["",""])),P._48(6,{$a:0}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n                    "])),(n()(),P._31(9,0,null,null,1,"ion-icon",[["name","arrow-round-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),P._30(10,147456,null,0,Un.a,[Cn.a,P.t,P.V],{name:[0,"name"]},null),(n()(),P._55(-1,null,["\n                "]))],function(n,e){n(e,1,0,"light");n(e,10,0,"arrow-round-down")},function(n,e){var t=e.component;n(e,5,0,P._56(e,5,0,P._44(e,7).transform("addon.messages.newmessages",n(e,6,0,t.title))));n(e,9,0,P._44(e,10)._hidden)})}function c(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,vn.b,vn.a)),P._30(1,770048,null,0,bn.a,[yn.a,S.a,O.a,q.a,U.a,[2,F.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"]},null),P._30(2,16384,null,0,Mn.a,[],null,null)],function(n,e){n(e,1,0,e.component.members[e.parent.context.$implicit.useridfrom],!1)},null)}function d(n){return P._57(0,[(n()(),P._31(0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),P._55(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.members[e.parent.context.$implicit.useridfrom].fullname)})}function m(n){return P._57(0,[(n()(),P._31(0,0,null,null,3,"ion-note",[],null,null,null,null,null)),P._30(1,16384,null,0,Sn.a,[Cn.a,P.t,P.V],null,null),(n()(),P._55(2,null,["",""])),P._49(3,2)],null,function(n,e){n(e,2,0,P._56(e,2,0,n(e,3,0,P._44(e.parent.parent,0),e.parent.context.$implicit.timecreated,"strftimetime")))})}function f(n){return P._57(0,[(n()(),P._31(0,0,null,null,3,"ion-note",[],null,null,null,null,null)),P._30(1,16384,null,0,Sn.a,[Cn.a,P.t,P.V],null,null),(n()(),P._31(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),P._30(3,147456,null,0,Un.a,[Cn.a,P.t,P.V],{name:[0,"name"]},null)],function(n,e){n(e,3,0,"time")},function(n,e){n(e,2,0,P._44(e,3)._hidden)})}function h(n){return P._57(0,[(n()(),P._31(0,0,null,null,6,"button",[["class","addon-messages-delete-button"],["clear","true"],["icon-only",""],["ion-button",""]],[[24,"@coreSlideInOut",0],[1,"aria-label",0]],[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.deleteMessage(n.parent.context.$implicit,n.parent.context.index)&&l}return l},Dn.b,Dn.a)),P._30(1,1097728,[[6,4]],0,Rn.a,[[8,""],Cn.a,P.t,P.V],{clear:[0,"clear"]},null),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n                        "])),(n()(),P._31(4,0,null,0,1,"ion-icon",[["color","danger"],["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),P._30(5,147456,null,0,Un.a,[Cn.a,P.t,P.V],{color:[0,"color"],name:[1,"name"]},null),(n()(),P._55(-1,0,["\n                    "]))],function(n,e){n(e,1,0,"true");n(e,5,0,"danger","trash")},function(n,e){n(e,0,0,"fromRight",P._56(e,0,1,P._44(e,2).transform("addon.messages.deletemessage")));n(e,4,0,P._44(e,5)._hidden)})}function g(n){return P._57(0,[(n()(),P._31(0,0,null,null,0,"div",[["class","tail"]],null,null,null,null,null))],null,null)}function _(n){return P._57(0,[(n()(),P._31(0,0,null,null,45,null,null,null,null,null,null,null)),(n()(),P._55(-1,null,["\n                "])),(n()(),P._26(16777216,null,null,1,null,r)),P._30(3,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n\n                "])),(n()(),P._26(16777216,null,null,1,null,u)),P._30(6,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n\n                "])),(n()(),P._31(8,0,null,null,36,"ion-item",[["class","addon-message item item-block"],["text-wrap",""]],[[2,"addon-message-mine",null],[2,"addon-message-not-mine",null],[2,"addon-message-no-user",null],[24,"@coreSlideInOut",0]],[[null,"longPress"]],function(n,e,t){var l=!0;if("longPress"===e){l=!1!==n.component.copyMessage(n.context.$implicit)&&l}return l},Tn.b,Tn.a)),P._30(9,212992,null,0,jn.a,[P.t],null,{longPress:"longPress"}),P._30(10,1097728,null,3,On.a,[An.a,Cn.a,P.t,P.V,[2,Vn.a]],null,null),P._52(335544320,5,{contentLabel:0}),P._52(603979776,6,{_buttons:1}),P._52(603979776,7,{_icons:1}),P._30(14,16384,null,0,qn.a,[],null,null),(n()(),P._55(-1,2,["\n                    "])),(n()(),P._55(-1,2,["\n                    "])),(n()(),P._31(17,0,null,2,13,"h2",[["class","addon-message-user"]],null,null,null,null,null)),(n()(),P._55(-1,null,["\n                        "])),(n()(),P._26(16777216,null,null,1,null,c)),P._30(20,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n\n                        "])),(n()(),P._26(16777216,null,null,1,null,d)),P._30(23,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n\n                        "])),(n()(),P._26(16777216,null,null,1,null,m)),P._30(26,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n                        "])),(n()(),P._26(16777216,null,null,1,null,f)),P._30(29,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n                    "])),(n()(),P._55(-1,2,["\n\n                    "])),(n()(),P._55(-1,2,["\n                    "])),(n()(),P._31(33,0,null,2,4,"p",[["class","addon-message-text"]],null,null,null,null,null)),(n()(),P._55(-1,null,["\n                        "])),(n()(),P._31(35,16777216,null,null,1,"core-format-text",[["contextLevel","system"]],null,[[null,"afterRender"]],function(n,e,t){var l=!0;if("afterRender"===e){l=!1!==(n.context.last&&n.component.scrollToBottom())&&l}return l},null,null)),P._30(36,540672,null,0,Nn.a,[P.t,S.a,j.a,A.a,Pn.a,_n.a,O.a,pn.a,V.a,gn.a,q.a,Fn.a,[2,yn.a],[2,$n.a],[2,F.a],zn.a,U.a,Gn.a,Hn.a,Bn.a,P._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},{afterRender:"afterRender"}),(n()(),P._55(-1,null,["\n                    "])),(n()(),P._55(-1,2,["\n\n                    "])),(n()(),P._26(16777216,null,2,1,null,h)),P._30(40,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,2,["\n                    "])),(n()(),P._26(16777216,null,2,1,null,g)),P._30(43,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,2,["\n                "])),(n()(),P._55(-1,null,["\n            "]))],function(n,e){var t=e.component;n(e,3,0,e.context.$implicit.showDate);n(e,6,0,t.unreadMessageFrom&&e.context.$implicit.id==t.unreadMessageFrom),n(e,9,0);n(e,20,0,e.context.$implicit.showUserData);n(e,23,0,e.context.$implicit.showUserData);n(e,26,0,!e.context.$implicit.pending);n(e,29,0,e.context.$implicit.pending);n(e,36,0,e.context.$implicit.text,"system",0);n(e,40,0,!e.context.$implicit.sending&&t.showDelete);n(e,43,0,e.context.$implicit.showTail)},function(n,e){var t=e.component;n(e,8,0,e.context.$implicit.useridfrom==t.currentUserId,e.context.$implicit.useridfrom!=t.currentUserId,!e.context.$implicit.showUserData,e.context.$implicit.useridfrom==t.currentUserId?"":"fromLeft")})}function p(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"core-empty-box",[["icon","chatbubbles"]],null,null,null,Xn.b,Xn.a)),P._30(1,49152,null,0,Kn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),P._47(131072,wn.a,[Pn.a,P.j])],function(n,e){n(e,1,0,P._56(e,1,0,P._44(e,2).transform("addon.messages.nomessagesfound")),"chatbubbles")},null)}function v(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"p",[["margin-horizontal",""],["text-center",""]],null,null,null,null,null)),(n()(),P._55(1,null,["",""])),P._47(131072,wn.a,[Pn.a,P.j])],null,function(n,e){n(e,1,0,P._56(e,1,0,P._44(e,2).transform("addon.messages.unabletomessage")))})}function b(n){return P._57(0,[(n()(),P._31(0,0,null,null,10,"div",[["padding-horizontal",""]],null,null,null,null,null)),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(2,0,null,null,2,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._55(3,null,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(6,0,null,null,3,"button",[["block",""],["ion-button",""],["margin-bottom",""],["text-wrap",""]],null,[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.unblockUser()&&l}return l},Dn.b,Dn.a)),P._30(7,1097728,null,0,Rn.a,[[8,""],Cn.a,P.t,P.V],{block:[0,"block"]},null),(n()(),P._55(8,0,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n        "]))],function(n,e){n(e,7,0,"")},function(n,e){n(e,3,0,P._56(e,3,0,P._44(e,4).transform("addon.messages.youhaveblockeduser")));n(e,8,0,P._56(e,8,0,P._44(e,9).transform("addon.messages.unblockuser")))})}function y(n){return P._57(0,[(n()(),P._31(0,0,null,null,17,"div",[["padding-horizontal",""]],null,null,null,null,null)),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(2,0,null,null,4,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._31(3,0,null,null,3,"strong",[],null,null,null,null,null)),(n()(),P._55(4,null,["",""])),P._48(5,{$a:0}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(8,0,null,null,3,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._55(9,null,["",""])),P._48(10,{$a:0}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(13,0,null,null,3,"button",[["block",""],["ion-button",""],["margin-bottom",""],["text-wrap",""]],null,[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.createContactRequest()&&l}return l},Dn.b,Dn.a)),P._30(14,1097728,null,0,Rn.a,[[8,""],Cn.a,P.t,P.V],{block:[0,"block"]},null),(n()(),P._55(15,0,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n        "]))],function(n,e){n(e,14,0,"")},function(n,e){var t=e.component;n(e,4,0,P._56(e,4,0,P._44(e,6).transform("addon.messages.isnotinyourcontacts",n(e,5,0,t.otherMember.fullname))));n(e,9,0,P._56(e,9,0,P._44(e,11).transform("addon.messages.requirecontacttomessage",n(e,10,0,t.otherMember.fullname))));n(e,15,0,P._56(e,15,0,P._44(e,16).transform("addon.messages.sendcontactrequest")))})}function M(n){return P._57(0,[(n()(),P._31(0,0,null,null,16,"div",[["padding-horizontal",""]],null,null,null,null,null)),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(2,0,null,null,3,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._55(3,null,["",""])),P._48(4,{$a:0}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(7,0,null,null,3,"button",[["block",""],["ion-button",""],["margin-bottom",""],["text-wrap",""]],null,[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.confirmContactRequest()&&l}return l},Dn.b,Dn.a)),P._30(8,1097728,null,0,Rn.a,[[8,""],Cn.a,P.t,P.V],{block:[0,"block"]},null),(n()(),P._55(9,0,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(12,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""],["margin-bottom",""],["text-wrap",""]],null,[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.declineContactRequest()&&l}return l},Dn.b,Dn.a)),P._30(13,1097728,null,0,Rn.a,[[8,""],Cn.a,P.t,P.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),P._55(14,0,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n        "]))],function(n,e){n(e,8,0,"");n(e,13,0,"light","")},function(n,e){var t=e.component;n(e,3,0,P._56(e,3,0,P._44(e,5).transform("addon.messages.userwouldliketocontactyou",n(e,4,0,t.otherMember.fullname))));n(e,9,0,P._56(e,9,0,P._44(e,10).transform("addon.messages.acceptandaddcontact")));n(e,14,0,P._56(e,14,0,P._44(e,15).transform("addon.messages.decline")))})}function I(n){return P._57(0,[(n()(),P._31(0,0,null,null,11,"div",[["padding-horizontal",""]],null,null,null,null,null)),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(2,0,null,null,3,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._31(3,0,null,null,2,"strong",[],null,null,null,null,null)),(n()(),P._55(4,null,["",""])),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n            "])),(n()(),P._31(7,0,null,null,3,"p",[["text-center",""]],null,null,null,null,null)),(n()(),P._55(8,null,["",""])),P._48(9,{$a:0}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,null,["\n        "]))],null,function(n,e){var t=e.component;n(e,4,0,P._56(e,4,0,P._44(e,5).transform("addon.messages.contactrequestsent")));n(e,8,0,P._56(e,8,0,P._44(e,10).transform("addon.messages.yourcontactrequestpending",n(e,9,0,t.otherMember.fullname))))})}function k(n){return P._57(0,[(n()(),P._31(0,0,null,null,2,"core-send-message-form",[],null,[[null,"onSubmit"],[null,"onResize"]],function(n,e,t){var l=!0,o=n.component;if("onSubmit"===e){l=!1!==o.sendMessage(t)&&l}if("onResize"===e){l=!1!==o.resizeContent()&&l}return l},Wn.b,Wn.a)),P._30(1,114688,null,0,Yn.a,[O.a,A.a,Jn.a,U.a,S.a,q.a,j.a],{placeholder:[0,"placeholder"],showKeyboard:[1,"showKeyboard"]},{onSubmit:"onSubmit",onResize:"onResize"}),P._47(131072,wn.a,[Pn.a,P.j])],function(n,e){var t=e.component;n(e,1,0,P._56(e,1,0,P._44(e,2).transform("addon.messages.newmessage")),t.showKeyboard)},null)}function C(n){return P._57(0,[(n()(),P._31(0,0,null,null,24,"ion-footer",[["class","footer-adjustable"],["color","light"]],null,null,null,null,null)),P._30(1,16384,null,0,Qn.a,[Cn.a,P.t,P.V,[2,Zn.a]],{color:[0,"color"]},null),(n()(),P._55(-1,null,["\n    "])),(n()(),P._31(3,0,null,null,20,"ion-toolbar",[["class","toolbar"],["color","light"],["position","bottom"]],[[2,"statusbar-padding",null]],null,null,ne.b,ne.a)),P._30(4,49152,null,0,ee.a,[Cn.a,P.t,P.V],{color:[0,"color"]},null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._26(16777216,null,3,1,null,v)),P._30(7,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._26(16777216,null,3,1,null,b)),P._30(10,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._26(16777216,null,3,1,null,y)),P._30(13,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._26(16777216,null,3,1,null,M)),P._30(16,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._26(16777216,null,3,1,null,I)),P._30(19,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._26(16777216,null,3,1,null,k)),P._30(22,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,3,["\n    "])),(n()(),P._55(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,1,0,"light");n(e,4,0,"light");n(e,7,0,"unable"==t.footerType);n(e,10,0,"blocked"==t.footerType);n(e,13,0,"requiresContact"==t.footerType);n(e,16,0,"requestReceived"==t.footerType);n(e,19,0,"requestSent"==t.footerType||"message"==t.footerType&&t.requestContactSent);n(e,22,0,"message"==t.footerType)},function(n,e){n(e,3,0,P._44(e,4)._sbPadding)})}function w(n){return P._57(0,[P._47(0,te.a,[V.a,le.a]),P._52(402653184,1,{content:0}),P._52(402653184,2,{infinite:0}),(n()(),P._31(3,0,null,null,80,"ion-header",[],null,null,null,null,null)),P._30(4,16384,null,0,oe.a,[Cn.a,P.t,P.V,[2,Zn.a]],null,null),(n()(),P._55(-1,null,["\n    "])),(n()(),P._31(6,0,null,null,26,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,se.b,se.a)),P._30(7,49152,null,0,ie.a,[ae.a,[2,Zn.a],[2,yn.a],Cn.a,P.t,P.V],null,null),P._30(8,212992,null,0,re.a,[ie.a,_n.a,Pn.a,U.a],null,null),(n()(),P._55(-1,3,["\n        "])),(n()(),P._31(10,0,null,3,17,"ion-title",[],null,null,null,ue.b,ue.a)),P._30(11,49152,null,0,ce.a,[Cn.a,P.t,P.V,[2,ee.a],[2,ie.a]],null,null),(n()(),P._55(-1,0,["\n            "])),(n()(),P._26(16777216,null,0,1,null,l)),P._30(14,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,0,["\n            "])),(n()(),P._26(16777216,null,0,1,null,o)),P._30(17,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(19,16777216,null,0,1,"core-format-text",[["contextLevel","system"]],null,[[null,"click"]],function(n,e,t){var l=!0,o=n.component;if("click"===e){l=!1!==(o.showInfo&&!o.isGroup&&o.viewInfo())&&l}return l},null,null)),P._30(20,540672,null,0,Nn.a,[P.t,S.a,j.a,A.a,Pn.a,_n.a,O.a,pn.a,V.a,gn.a,q.a,Fn.a,[2,yn.a],[2,$n.a],[2,F.a],zn.a,U.a,Gn.a,Hn.a,Bn.a,P._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(n()(),P._55(-1,0,["\n            "])),(n()(),P._26(16777216,null,0,1,null,s)),P._30(23,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,0,["\n            "])),(n()(),P._26(16777216,null,0,1,null,i)),P._30(26,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,0,["\n        "])),(n()(),P._55(-1,3,["\n        "])),(n()(),P._31(29,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),P._30(30,16384,null,1,de.a,[Cn.a,P.t,P.V,[2,ee.a],[2,ie.a]],null,null),P._52(603979776,3,{_buttons:1}),(n()(),P._55(-1,3,["\n    "])),(n()(),P._55(-1,null,["\n    "])),(n()(),P._31(34,0,null,null,48,"core-navbar-buttons",[["end",""]],null,null,null,me.b,me.a)),P._30(35,245760,null,1,fe.a,[P.t,V.a,j.a],null,null),P._52(603979776,4,{buttons:1}),(n()(),P._55(-1,0,["\n        "])),(n()(),P._31(38,0,null,0,43,"core-context-menu",[],null,null,null,he.b,he.a)),P._30(39,245760,null,0,ge.a,[Pn.a,_e.a,P.t,j.a,[2,pe.a],O.a],{ariaLabel:[0,"ariaLabel"]},null),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(42,0,null,0,2,"core-context-menu-item",[["iconAction","information-circle"]],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.viewInfo()&&l}return l},ve.b,ve.a)),P._30(43,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(46,0,null,0,2,"core-context-menu-item",[["iconAction","information-circle"]],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.viewInfo()&&l}return l},ve.b,ve.a)),P._30(47,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(50,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.changeFavourite(t)&&l}return l},ve.b,ve.a)),P._30(51,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],iconSlash:[2,"iconSlash"],closeOnClick:[3,"closeOnClick"],priority:[4,"priority"],hidden:[5,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(54,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.blockUser()&&l}return l},ve.b,ve.a)),P._30(55,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(58,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.unblockUser()&&l}return l},ve.b,ve.a)),P._30(59,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(62,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.changeMute(t)&&l}return l},ve.b,ve.a)),P._30(63,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(66,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.toggleDelete()&&l}return l},ve.b,ve.a)),P._30(67,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(70,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.deleteConversation(t)&&l}return l},ve.b,ve.a)),P._30(71,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(74,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.createContactRequest()&&l}return l},ve.b,ve.a)),P._30(75,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n            "])),(n()(),P._31(78,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.removeContact()&&l}return l},ve.b,ve.a)),P._30(79,770048,null,0,be.a,[ge.a],{content:[0,"content"],iconAction:[1,"iconAction"],iconSlash:[2,"iconSlash"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),P._47(131072,wn.a,[Pn.a,P.j]),(n()(),P._55(-1,0,["\n        "])),(n()(),P._55(-1,0,["\n    "])),(n()(),P._55(-1,null,["\n"])),(n()(),P._55(-1,null,["\n"])),(n()(),P._31(85,0,null,null,23,"ion-content",[["class","has-footer"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ye.b,ye.a)),P._30(86,4374528,[[1,4]],0,$n.a,[Cn.a,_n.a,Me.a,P.t,P.V,ae.a,Ie.a,P.M,[2,Zn.a],[2,yn.a]],null,null),(n()(),P._55(-1,1,["\n    "])),(n()(),P._31(88,0,null,1,19,"core-loading",[["class","safe-area-page"]],null,null,null,ke.b,ke.a)),P._30(89,638976,null,0,Ce.a,[Pn.a,P.t,U.a,O.a],{hideUntil:[0,"hideUntil"]},null),(n()(),P._55(-1,0,["\n        "])),(n()(),P._55(-1,0,["\n        "])),(n()(),P._31(92,0,null,0,1,"core-infinite-loading",[["position","top"]],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.loadPrevious(t)&&l}return l},we.b,we.a)),P._30(93,573440,[[2,4]],0,$.a,[[2,$n.a],j.a],{enabled:[0,"enabled"],error:[1,"error"],position:[2,"position"]},{action:"action"}),(n()(),P._55(-1,0,["\n\n        "])),(n()(),P._26(16777216,null,0,1,null,a)),P._30(96,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,0,["\n\n        "])),(n()(),P._31(98,0,null,0,5,"ion-list",[["class","addon-messages-discussion-container"]],[[2,"addon-messages-discussion-group",null],[1,"aria-live",0]],null,null,null,null)),P._30(99,16384,null,0,Pe.a,[Cn.a,P.t,P.V,_n.a,Ee.l,Me.a],null,null),(n()(),P._55(-1,null,["\n            "])),(n()(),P._26(16777216,null,null,1,null,_)),P._30(102,802816,null,0,Ln.j,[P._11,P._6,P.E],{ngForOf:[0,"ngForOf"]},null),(n()(),P._55(-1,null,["\n        "])),(n()(),P._55(-1,0,["\n        "])),(n()(),P._26(16777216,null,0,1,null,p)),P._30(106,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,0,["\n    "])),(n()(),P._55(-1,1,["\n"])),(n()(),P._55(-1,null,["\n"])),(n()(),P._26(16777216,null,null,1,null,C)),P._30(111,16384,null,0,Ln.k,[P._11,P._6],{ngIf:[0,"ngIf"]},null),(n()(),P._55(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,8,0);n(e,14,0,t.loaded&&!t.otherMember&&t.conversationImage);n(e,17,0,t.loaded&&t.otherMember);n(e,20,0,t.title,"system",0);n(e,23,0,t.conversation&&t.conversation.isfavourite);n(e,26,0,t.conversation&&t.conversation.ismuted),n(e,35,0);n(e,39,0,P._56(e,39,0,P._44(e,40).transform("addon.messages.conversationactions")));n(e,43,0,P._56(e,43,0,P._44(e,44).transform("addon.messages.info")),"information-circle",1e3,t.isSelf||!t.showInfo||t.isGroup);n(e,47,0,P._56(e,47,0,P._44(e,48).transform("addon.messages.groupinfo")),"information-circle",1e3,t.isSelf||!t.showInfo||!t.isGroup);n(e,51,0,P._56(e,51,0,P._44(e,52).transform(t.conversation&&t.conversation.isfavourite?"addon.messages.removefromfavourites":"addon.messages.addtofavourites")),t.favouriteIcon,t.favouriteIconSlash,!1,800,!t.groupMessagingEnabled||!t.conversation);n(e,55,0,P._56(e,55,0,P._44(e,56).transform("addon.messages.blockuser")),t.blockIcon,700,t.isSelf||!t.otherMember||t.otherMember.isblocked);n(e,59,0,P._56(e,59,0,P._44(e,60).transform("addon.messages.unblockuser")),t.blockIcon,700,t.isSelf||!t.otherMember||!t.otherMember.isblocked);n(e,63,0,P._56(e,63,0,P._44(e,64).transform(t.conversation&&t.conversation.ismuted?"addon.messages.unmuteconversation":"addon.messages.muteconversation")),t.muteIcon,!1,600,t.isSelf||!t.muteEnabled||!t.conversation);n(e,67,0,P._56(e,67,0,P._44(e,68).transform("addon.messages.showdeletemessages")),t.showDelete?"checkbox-outline":"square-outline",400,!t.canDelete||!t.messages||!t.messages.length);n(e,71,0,P._56(e,71,0,P._44(e,72).transform("addon.messages.deleteconversation")),t.deleteIcon,!1,200,!t.groupMessagingEnabled||!t.conversationId||t.isGroup||!t.messages||!t.messages.length);n(e,75,0,P._56(e,75,0,P._44(e,76).transform("addon.messages.addtoyourcontacts")),t.addRemoveIcon,100,t.isSelf||!t.otherMember||t.otherMember.iscontact||t.requestContactSent||t.requestContactReceived);n(e,79,0,P._56(e,79,0,P._44(e,80).transform("addon.messages.removefromyourcontacts")),t.addRemoveIcon,!0,100,t.isSelf||!t.otherMember||!t.otherMember.iscontact);n(e,89,0,t.loaded);n(e,93,0,t.canLoadMore,t.loadMoreError,"top");n(e,96,0,t.isSelf&&!t.canLoadMore);n(e,102,0,t.messages);n(e,106,0,!t.messages||t.messages.length<=0);n(e,111,0,t.loaded&&(!t.conversationId||t.conversation))},function(n,e){var t=e.component;n(e,6,0,P._44(e,7)._hidden,P._44(e,7)._sbPadding);n(e,85,0,P._44(e,86).statusbarPadding,P._44(e,86)._hasRefresher);n(e,98,0,t.isGroup,"polite")})}Object.defineProperty(e,"__esModule",{value:!0});var P=t(0),E=t(5),x=t(3),U=t(9),S=t(1),D=t(161),R=t(380),L=t(503),T=t(46),j=t(4),O=t(2),A=t(11),V=t(6),q=t(10),N=t(742),F=t(28),$=t(273),z=t(194),G=t(14),H=this&&this.__decorate||function(n,e,t,l){var o,s=arguments.length,i=s<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,t,l);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i},B=this&&this.__metadata||function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},X=this&&this.__param||function(n,e){return function(t,l){e(t,l,n)}},K=function(){function n(n,e,t,l,o,s,i,a,r,u,c,d,m,f,h,g){var _=this;this.eventsProvider=n,this.userProvider=l,this.navCtrl=o,this.messagesSync=s,this.domUtils=i,this.messagesProvider=a,this.utils=u,this.appProvider=c,this.translate=d,this.svComponent=m,this.messagesOffline=f,this.modalCtrl=h,this.textUtils=g,this.unreadMessageFrom=0,this.messagesBeingSent=0,this.pagesLoaded=1,this.lastMessage={text:"",timecreated:0},this.keepMessageMap={},this.oldContentHeight=0,this.scrollBottom=!0,this.viewDestroyed=!1,this.showLoadingModal=!1,this.loaded=!1,this.showKeyboard=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.messages=[],this.showDelete=!1,this.canDelete=!1,this.isGroup=!1,this.members={},this.favouriteIcon="fa-star",this.favouriteIconSlash=!1,this.deleteIcon="trash",this.blockIcon="close-circle",this.addRemoveIcon="person",this.requestContactSent=!1,this.requestContactReceived=!1,this.isSelf=!1,this.muteEnabled=!1,this.muteIcon="volume-off",this.siteId=e.getCurrentSiteId(),this.currentUserId=e.getCurrentSiteUserId(),this.groupMessagingEnabled=this.messagesProvider.isGroupMessagingEnabled(),this.muteEnabled=this.messagesProvider.isMuteConversationEnabled(),this.logger=r.getInstance("AddonMessagesDiscussionPage"),this.conversationId=t.get("conversationId"),this.userId=t.get("userId"),this.showKeyboard=t.get("showKeyboard"),this.syncObserver=n.on(L.a.AUTO_SYNCED,function(n){(n.userId&&n.userId==_.userId||n.conversationId&&n.conversationId==_.conversationId)&&(_.fetchMessages(),n.warnings&&n.warnings[0]&&_.domUtils.showErrorModal(n.warnings[0]))},this.siteId),this.memberInfoObserver=n.on(D.a.MEMBER_INFO_CHANGED_EVENT,function(n){n.userId&&(_.members[n.userId]||_.otherMember&&n.userId==_.otherMember.id)&&_.fetchData()},this.siteId)}return n.prototype.addMessage=function(n,e){void 0===e&&(e=!0),n.hash=z.Md5.hashAsciiStr(String(n.id||n.text||""))+"#"+n.timecreated+"#"+n.useridfrom,void 0===this.keepMessageMap[n.hash]&&this.messages.push(n),this.keepMessageMap[n.hash]=e},n.prototype.removeMessage=function(n){if(this.keepMessageMap[n])this.keepMessageMap[n]=!1;else{delete this.keepMessageMap[n];var e=this.messages.findIndex(function(e){return e.hash==n});e>=0&&this.messages.splice(e,1)}},n.prototype.ionViewDidLoad=function(){var n=this,e=this.navCtrl.getPrevious()&&this.navCtrl.getPrevious().component.name;this.showInfo=!e||"CoreUserProfilePage"!==e,this.keyboardObserver=this.eventsProvider.on(U.a.KEYBOARD_CHANGE,function(e){n.content.resize()}),this.fetchData()},n.prototype.fetchData=function(){var n,e=this;return this.showLoadingModal&&(n=this.domUtils.showModalLoading()),!this.groupMessagingEnabled&&this.userId&&this.userProvider.getProfile(this.userId,void 0,!0).then(function(n){e.title||(e.title=n.fullname),e.conversationImage=n.profileimageurl}),this.messagesSync.syncDiscussion(this.conversationId,this.userId).catch(function(){}).then(function(n){return n&&n[0]&&e.domUtils.showErrorModal(n[0]),e.groupMessagingEnabled?e.getConversation(e.conversationId,e.userId).then(function(n){var t=[];return n&&t.push(e.fetchMessages()),e.userId?t.push(e.messagesProvider.invalidateMemberInfo(e.userId).catch(function(){}).then(function(){return e.messagesProvider.getMemberInfo(e.userId)}).then(function(t){e.otherMember=t,!n&&t&&(e.conversationImage=t.profileimageurl,e.title=t.fullname),e.blockIcon=e.otherMember&&e.otherMember.isblocked?"checkmark-circle":"close-circle"})):e.otherMember=null,Promise.all(t)}):(e.otherMember=null,e.fetchMessages().then(function(){if(!e.title&&e.messages.length){var n=e.messages[0];e.title=n.useridto!=e.currentUserId?n.usertofullname||"":n.userfromfullname||""}}))}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingmessages",!0)}).finally(function(){e.checkCanDelete(),e.resizeContent(),e.loaded=!0,e.setPolling(),e.setContactRequestInfo(),e.setFooterType(),n&&n.dismiss()})},n.prototype.ionViewDidEnter=function(){this.setPolling()},n.prototype.ionViewWillLeave=function(){this.unsetPolling()},n.prototype.fetchMessages=function(){var n=this;return this.loadMoreError=!1,this.messagesBeingSent>0?Promise.reject(null):this.fetching?Promise.reject(null):this.groupMessagingEnabled&&!this.conversationId?Promise.reject(null):(this.logger.debug(this.conversationId?"Polling new messages for conversation '"+this.conversationId+"'":"Polling new messages for discussion with user '"+this.userId+"'"),this.fetching=!0,this.messagesSync.waitForSyncConversation(this.conversationId,this.userId).then(function(){return n.groupMessagingEnabled?n.messagesProvider.invalidateConversationMessages(n.conversationId).catch(function(){}).then(function(){return n.getConversationMessages(n.pagesLoaded)}):n.messagesProvider.invalidateDiscussionCache(n.userId).catch(function(){}).then(function(){return n.getDiscussionMessages(n.pagesLoaded)})}).then(function(e){n.loadMessages(e)}).finally(function(){n.fetching=!1}))},n.prototype.loadMessages=function(n){var e=this;if(!(this.viewDestroyed||(this.scrollBottom=Math.abs(this.domUtils.getScrollHeight(this.content)-this.domUtils.getScrollTop(this.content)-this.domUtils.getContentHeight(this.content))<5,this.messagesBeingSent>0))){n.forEach(function(n){e.addMessage(n)});for(var t in this.keepMessageMap)this.removeMessage(t);this.messagesProvider.sortMessages(this.messages),this.messages.forEach(function(n,t){n.showDate=e.showDate(n,e.messages[t-1]),n.showUserData=e.showUserData(n,e.messages[t-1]),n.showTail=e.showTail(n,e.messages[t+1])}),this.content&&this.content.resize();var l=this.messages[this.messages.length-1],o=this.groupMessagingEnabled&&l&&l.useridfrom!=this.currentUserId&&""!=this.lastMessage.text&&(l.text!==this.lastMessage.text||l.timecreated!==this.lastMessage.timecreated);this.notifyNewMessage(),this.markMessagesAsRead(o)}},n.prototype.getConversation=function(n,e){var t,l,o=this;if(n)t=Promise.resolve(n);else{t=(e==this.currentUserId&&this.messagesProvider.isSelfConversationEnabled()?this.messagesProvider.getSelfConversation():this.messagesProvider.getConversationBetweenUsers(e,void 0,!0)).then(function(n){return l=n,n.id})}return t.then(function(n){return o.messagesProvider.invalidateConversation(n).catch(function(){}).then(function(){return o.messagesProvider.getConversation(n,void 0,!0)}).catch(function(n){return l||Promise.reject(n)}).then(function(n){return o.conversation=n,!!n&&(o.conversationId=n.id,o.title=n.name,o.conversationImage=n.imageurl,o.isGroup=n.type==D.a.MESSAGE_CONVERSATION_TYPE_GROUP,o.favouriteIcon="fa-star",o.favouriteIconSlash=n.isfavourite,o.muteIcon=n.ismuted?"volume-up":"volume-off",o.isGroup||(o.userId=n.userid),o.isSelf=n.type==D.a.MESSAGE_CONVERSATION_TYPE_SELF,!0)})},function(n){return o.isSelf=e==o.currentUserId,o.messagesOffline.getMessages(e).then(function(e){if(e&&e.length)e.forEach(function(n){n.pending=!0,n.text=n.smallmessage}),o.loadMessages(e);else if("errorconversationdoesnotexist"!=n.errorcode)return Promise.reject(n);return!1})})},n.prototype.getConversationMessages=function(n,e){var t=this;void 0===e&&(e=0);return this.messagesProvider.getConversationMessages(this.conversationId,e>0,e).then(function(l){return n--,l.members&&l.members.forEach(function(n){t.members[n.id]=n}),n>0&&l.canLoadMore?(e+=D.a.LIMIT_MESSAGES,t.getConversationMessages(n,e).then(function(n){return l.messages.concat(n)})):(t.canLoadMore=l.canLoadMore,l.messages)})},n.prototype.getDiscussionMessages=function(n,e,t,l,o){var s=this;void 0===e&&(e=0),void 0===t&&(t=0),void 0===l&&(l=0),void 0===o&&(o=0);return this.messagesProvider.getDiscussion(this.userId,e>0||t>0||l>0||o>0,e,t,l,o).then(function(i){return--n>0&&i.canLoadMore?(i.messages.forEach(function(n){n.pending||(n.useridfrom==s.userId?n.read?t++:e++:n.read?o++:l++)}),s.getDiscussionMessages(n,e,t,l,o).then(function(n){return i.messages.concat(n)})):(s.canLoadMore=i.canLoadMore,i.messages)})},n.prototype.markMessagesAsRead=function(n){var e=this,t=!1,l=[];if(this.messagesProvider.isMarkAllMessagesReadEnabled()){var o=!1;if(n)o=!0;else if(this.groupMessagingEnabled)o=this.conversation&&this.conversation.unreadcount>0&&this.conversationId>0;else for(var s in this.messages){var i=this.messages[s];if(i.useridfrom!=this.currentUserId&&0==i.read){o=!0;break}}if(o){this.setUnreadLabelPosition();var a=void 0;a=this.groupMessagingEnabled?this.messagesProvider.markAllConversationMessagesRead(this.conversationId):this.messagesProvider.markAllMessagesRead(this.userId).then(function(){e.messages.forEach(function(n){n.read=1})}),l.push(a.then(function(){t=!0}))}}else this.setUnreadLabelPosition(),this.messages.forEach(function(n){n.useridfrom!=e.currentUserId&&0==n.read&&l.push(e.messagesProvider.markMessageRead(n.id).then(function(){t=!0,n.read=1}))});Promise.all(l).finally(function(){t&&e.eventsProvider.trigger(D.a.READ_CHANGED_EVENT,{conversationId:e.conversationId,userId:e.userId},e.siteId)})},n.prototype.notifyNewMessage=function(){var n=this.messages[this.messages.length-1],e=!1;if(n?n.text===this.lastMessage.text&&n.timecreated===this.lastMessage.timecreated||(this.lastMessage={text:n.text,timecreated:n.timecreated},e=!0):(this.lastMessage={text:"",timecreated:0},e=!0),e){this.eventsProvider.trigger(D.a.NEW_MESSAGE_EVENT,{conversationId:this.conversationId,userId:this.userId,message:this.lastMessage.text,timecreated:this.lastMessage.timecreated,isfavourite:this.conversation&&this.conversation.isfavourite,type:this.conversation&&this.conversation.type},this.siteId);this.canDelete!=(n&&n.id&&1==this.messages.length||this.messages.length>1)&&this.checkCanDelete()}},n.prototype.setUnreadLabelPosition=function(){if(0==this.unreadMessageFrom){if(this.groupMessagingEnabled){if(this.conversation&&this.conversation.unreadcount>0&&this.messages)for(var n=0,e=this.messages.length-1;e>=0;e--){if(!(o=this.messages[e]).pending&&o.useridfrom!=this.currentUserId&&++n==this.conversation.unreadcount){this.unreadMessageFrom=Number(o.id);break}}}else{var t=!1;for(var l in this.messages){var o;if((o=this.messages[l]).useridfrom!=this.currentUserId){if(0==o.read&&t){this.unreadMessageFrom=Number(o.id);break}t=0!=o.read}}}0==this.unreadMessageFrom&&(this.unreadMessageFrom=-1)}},n.prototype.checkCanDelete=function(){var n=this.messages[0];this.canDelete=n&&!n.sending},n.prototype.hideUnreadLabel=function(){this.unreadMessageFrom>0&&(this.unreadMessageFrom=-1)},n.prototype.waitForFetch=function(){var n=this;if(!this.fetching)return Promise.resolve();var e=this.utils.promiseDefer();return setTimeout(function(){return n.waitForFetch().finally(function(){e.resolve()})},400),e.promise},n.prototype.setPolling=function(){var n=this;this.groupMessagingEnabled&&!this.conversationId||this.polling||(this.polling=setInterval(function(){n.fetchMessages().catch(function(){})},D.a.POLL_INTERVAL))},n.prototype.unsetPolling=function(){this.polling&&(this.logger.debug("Cancelling polling for conversation with user '"+this.userId+"'"),clearInterval(this.polling),this.polling=void 0)},n.prototype.copyMessage=function(n){var e=this.textUtils.decodeHTMLEntities(n.smallmessage||n.text||"");this.utils.copyToClipboard(e)},n.prototype.deleteMessage=function(n,e){var t=this,l=this.conversation&&this.conversation.candeletemessagesforallusers,o=n.pending||l||this.isSelf?"core.areyousure":"addon.messages.deletemessageconfirmation",s={};l&&!n.pending&&(s.inputs=[{type:"checkbox",name:"deleteforall",checked:!1,value:!0,label:this.translate.instant("addon.messages.deleteforeveryone")}]),this.domUtils.showConfirm(this.translate.instant(o),void 0,void 0,void 0,s).then(function(l){var o=t.domUtils.showModalLoading("core.deleting",!0);return t.messagesProvider.deleteMessage(n,l&&l[0]).then(function(){t.messages.splice(e,1),t.removeMessage(n.hash),t.notifyNewMessage(),t.fetchMessages()}).finally(function(){o.dismiss()})}).catch(function(n){t.domUtils.showErrorModalDefault(n,"addon.messages.errordeletemessage",!0)})},n.prototype.loadPrevious=function(n){var e=this,t=this.infinite?this.infinite.getHeight():0,l=this.domUtils.getScrollHeight(this.content);return this.waitForFetch().finally(function(){e.pagesLoaded++,e.fetchMessages().then(function(){var n=l-e.domUtils.getScrollTop(e.content);e.canLoadMore&&t&&e.infinite?t-=e.infinite.getHeight():e.canLoadMore||(t=t||(e.infinite?e.infinite.getHeight():0)),e.keepScroll(l,n,t)}).catch(function(n){e.loadMoreError=!0,e.pagesLoaded--,e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingmessages",!0)}).finally(function(){n&&n()})})},n.prototype.keepScroll=function(n,e,t,l){var o=this;l=l||0,setTimeout(function(){var s=o.domUtils.getScrollHeight(o.content);if(s!=n){o.domUtils.scrollTo(o.content,0,s-e+t,0)}else l<=10&&o.keepScroll(n,e,t,l+1)},30)},n.prototype.resizeContent=function(){var n=this,e=this.content.getContentDimensions().scrollTop;this.content.resize(),setTimeout(function(){!n.viewDestroyed&&n.content&&n.domUtils.getContentHeight(n.content)!=n.oldContentHeight&&(e||(e=n.content.getContentDimensions().scrollTop),e+=n.oldContentHeight-n.domUtils.getContentHeight(n.content),n.oldContentHeight=n.domUtils.getContentHeight(n.content),n.domUtils.scrollTo(n.content,0,e,0))})},n.prototype.scrollToBottom=function(){var n=this;this.scrollBottom&&(setTimeout(function(){n.viewDestroyed||n.domUtils.scrollToBottom(n.content,0)}),this.scrollBottom=!1)},n.prototype.sendMessage=function(n){var e,t=this;this.hideUnreadLabel(),this.showDelete=!1,this.scrollBottom=!0,(e={id:null,pending:!0,sending:!0,useridfrom:this.currentUserId,smallmessage:n,text:n,timecreated:(new Date).getTime()}).showDate=this.showDate(e,this.messages[this.messages.length-1]),this.addMessage(e,!1),this.messagesBeingSent++,this.waitForFetch().finally(function(){(t.conversationId?t.messagesProvider.sendMessageToConversation(t.conversation,n):t.messagesProvider.sendMessage(t.userId,n)).then(function(n){t.messagesBeingSent--,(n.sent?!t.conversationId&&n.message&&n.message.conversationid?t.getConversation(n.message.conversationid,t.userId).then(function(){return t.fetchMessages()}).finally(function(){t.setPolling()}):t.fetchMessages():Promise.reject(null)).catch(function(){e.sending=!1,n.sent?e.pending=!1:n.message&&(e.timecreated=n.message.timecreated),t.notifyNewMessage()})}).catch(function(n){t.messagesBeingSent--,t.appProvider.closeKeyboard(),t.domUtils.showErrorModalDefault(n,"addon.messages.messagenotsent",!0),t.removeMessage(e.hash)})})},n.prototype.showDate=function(n,e){return!e||!G(n.timecreated).isSame(e.timecreated,"day")},n.prototype.showUserData=function(n,e){return this.isGroup&&n.useridfrom!=this.currentUserId&&this.members[n.useridfrom]&&(!e||e.useridfrom!=n.useridfrom||n.showDate)},n.prototype.showTail=function(n,e){return!e||e.useridfrom!=n.useridfrom||e.showDate},n.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},n.prototype.viewInfo=function(){var n=this;if(this.isGroup){var e=this.modalCtrl.create("AddonMessagesConversationInfoPage",{conversationId:this.conversationId});e.present(),e.onDidDismiss(function(e){void 0!==e&&(n.svComponent?n.eventsProvider.trigger(D.a.OPEN_CONVERSATION_EVENT,{userId:e},n.siteId):n.navCtrl.push("AddonMessagesDiscussionPage",{userId:e}))})}else{(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreUserProfilePage",{userId:this.userId})}},n.prototype.changeFavourite=function(n){var e=this;this.favouriteIcon="spinner",this.messagesProvider.setFavouriteConversation(this.conversation.id,!this.conversation.isfavourite).then(function(){e.conversation.isfavourite=!e.conversation.isfavourite,e.messagesProvider.getConversation(e.conversation.id,void 0,!0),e.eventsProvider.trigger(D.a.UPDATE_CONVERSATION_LIST_EVENT,{conversationId:e.conversation.id,action:"favourite",value:e.conversation.isfavourite},e.siteId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error changing favourite state.")}).finally(function(){e.favouriteIcon="fa-star",e.favouriteIconSlash=e.conversation.isfavourite,n&&n()})},n.prototype.changeMute=function(n){var e=this;this.muteIcon="spinner",this.messagesProvider.muteConversation(this.conversation.id,!this.conversation.ismuted).then(function(){e.conversation.ismuted=!e.conversation.ismuted,e.messagesProvider.getConversation(e.conversation.id,void 0,!0),e.eventsProvider.trigger(D.a.UPDATE_CONVERSATION_LIST_EVENT,{conversationId:e.conversation.id,action:"mute",value:e.conversation.ismuted},e.siteId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error changing muted state.")}).finally(function(){e.muteIcon=e.conversation.ismuted?"volume-up":"volume-off",n&&n()})},n.prototype.setContactRequestInfo=function(){var n=this;this.requestContactSent=!1,this.requestContactReceived=!1,this.otherMember&&!this.otherMember.iscontact&&(this.requestContactSent=this.otherMember.contactrequests.some(function(e){return e.userid==n.currentUserId&&e.requesteduserid==n.otherMember.id}),this.requestContactReceived=this.otherMember.contactrequests.some(function(e){return e.userid==n.otherMember.id&&e.requesteduserid==n.currentUserId}))},n.prototype.setFooterType=function(){this.footerType=this.otherMember?this.otherMember.isblocked?"blocked":this.requestContactReceived?"requestReceived":this.otherMember.canmessage?"message":this.requestContactSent?"requestSent":this.otherMember.requirescontact?"requiresContact":"unable":"message"},n.prototype.blockUser=function(){var n=this;if(!this.otherMember)return Promise.reject(null);var e=this.translate.instant("addon.messages.blockuserconfirm",{$a:this.otherMember.fullname}),t=this.translate.instant("addon.messages.blockuser");return this.domUtils.showConfirm(e,void 0,t).then(function(){n.blockIcon="spinner";var e=n.domUtils.showModalLoading("core.sending",!0);return n.showLoadingModal=!0,n.messagesProvider.blockContact(n.otherMember.id).finally(function(){e.dismiss(),n.showLoadingModal=!1})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){n.blockIcon=n.otherMember.isblocked?"close-circle":"checkmark-circle"})},n.prototype.deleteConversation=function(n){var e=this;this.domUtils.showDeleteConfirm("addon.messages."+(this.isSelf?"deleteallselfconfirm":"deleteallconfirm")).then(function(){return e.deleteIcon="spinner",e.messagesProvider.deleteConversation(e.conversation.id).then(function(){e.eventsProvider.trigger(D.a.UPDATE_CONVERSATION_LIST_EVENT,{conversationId:e.conversation.id,action:"delete"},e.siteId),e.messages=[]}).finally(function(){e.deleteIcon="trash",n&&n()})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error deleting conversation.")})},n.prototype.unblockUser=function(){var n=this;if(!this.otherMember)return Promise.reject(null);var e=this.translate.instant("addon.messages.unblockuserconfirm",{$a:this.otherMember.fullname}),t=this.translate.instant("addon.messages.unblockuser");return this.domUtils.showConfirm(e,void 0,t).then(function(){n.blockIcon="spinner";var e=n.domUtils.showModalLoading("core.sending",!0);return n.showLoadingModal=!0,n.messagesProvider.unblockContact(n.otherMember.id).finally(function(){e.dismiss(),n.showLoadingModal=!1})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){n.blockIcon=n.otherMember.isblocked?"close-circle":"checkmark-circle"})},n.prototype.createContactRequest=function(){var n=this;if(!this.otherMember)return Promise.reject(null);var e=this.translate.instant("addon.messages.addcontactconfirm",{$a:this.otherMember.fullname}),t=this.translate.instant("core.add");return this.domUtils.showConfirm(e,void 0,t).then(function(){n.addRemoveIcon="spinner";var e=n.domUtils.showModalLoading("core.sending",!0);return n.showLoadingModal=!0,n.messagesProvider.createContactRequest(n.otherMember.id).finally(function(){e.dismiss(),n.showLoadingModal=!1})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){n.addRemoveIcon="person"})},n.prototype.confirmContactRequest=function(){var n=this;if(!this.otherMember)return Promise.reject(null);var e=this.domUtils.showModalLoading("core.sending",!0);return this.showLoadingModal=!0,this.messagesProvider.confirmContactRequest(this.otherMember.id).finally(function(){e.dismiss(),n.showLoadingModal=!1}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)})},n.prototype.declineContactRequest=function(){var n=this;if(!this.otherMember)return Promise.reject(null);var e=this.domUtils.showModalLoading("core.sending",!0);return this.showLoadingModal=!0,this.messagesProvider.declineContactRequest(this.otherMember.id).finally(function(){e.dismiss(),n.showLoadingModal=!1}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)})},n.prototype.removeContact=function(){var n=this;if(!this.otherMember)return Promise.reject(null);var e=this.translate.instant("addon.messages.removecontactconfirm",{$a:this.otherMember.fullname}),t=this.translate.instant("core.remove");return this.domUtils.showConfirm(e,void 0,t).then(function(){n.addRemoveIcon="spinner";var e=n.domUtils.showModalLoading("core.sending",!0);return n.showLoadingModal=!0,n.messagesProvider.removeContact(n.otherMember.id).finally(function(){e.dismiss(),n.showLoadingModal=!1})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){n.addRemoveIcon="person"})},n.prototype.ngOnDestroy=function(){this.unsetPolling(),this.syncObserver&&this.syncObserver.off(),this.keyboardObserver&&this.keyboardObserver.off(),this.memberInfoObserver&&this.memberInfoObserver.off(),this.viewDestroyed=!0},H([Object(P._9)(E.f),B("design:type",E.f)],n.prototype,"content",void 0),H([Object(P._9)($.a),B("design:type",$.a)],n.prototype,"infinite",void 0),n=H([Object(P.m)({selector:"page-addon-messages-discussion",templateUrl:"discussion.html",animations:[N.b]}),X(12,Object(P.N)()),B("design:paramtypes",[U.a,S.a,E.t,T.a,E.s,L.a,j.a,D.a,V.a,O.a,q.a,x.c,F.a,R.a,E.q,A.a])],n)}(),W=t(26),Y=t(31),J=t(106),Q=this&&this.__decorate||function(n,e,t,l){var o,s=arguments.length,i=s<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,t,l);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i},Z=function(){function n(){}return n=Q([Object(P.I)({declarations:[K],imports:[W.a,Y.a,J.a,E.l.forChild(K),x.b.forChild()]})],n)}(),nn=t(1522),en=t(1523),tn=t(1524),ln=t(1525),on=t(1526),sn=t(1527),an=t(1528),rn=t(1529),un=t(1530),cn=t(1531),dn=t(1532),mn=t(1533),fn=t(1534),hn=t(229),gn=t(18),_n=t(16),pn=t(22),vn=t(213),bn=t(182),yn=t(21),Mn=t(160),In=t(80),kn=t(75),Cn=t(8),wn=t(25),Pn=t(17),En=t(770),xn=t(67),Un=t(47),Sn=t(248),Dn=t(45),Rn=t(42),Ln=t(7),Tn=t(30),jn=t(1580),On=t(20),An=t(19),Vn=t(27),qn=t(33),Nn=t(48),Fn=t(15),$n=t(29),zn=t(44),Gn=t(41),Hn=t(32),Bn=t(36),Xn=t(124),Kn=t(114),Wn=t(2136),Yn=t(1550),Jn=t(126),Qn=t(743),Zn=t(39),ne=t(2132),ee=t(247),te=t(228),le=t(24),oe=t(370),se=t(721),ie=t(211),ae=t(35),re=t(473),ue=t(722),ce=t(314),de=t(371),me=t(96),fe=t(87),he=t(91),ge=t(78),_e=t(70),pe=t(76),ve=t(92),be=t(83),ye=t(181),Me=t(34),Ie=t(107),ke=t(54),Ce=t(51),we=t(373),Pe=t(86),Ee=t(43),xe=t(69),Ue=t(162),Se=P._29({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreSlideInOut",definitions:[{type:1,expr:"void => fromLeft",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromLeft => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"void => fromRight",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromRight => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:1},offset:null}]},timings:300}],options:null}],options:{}}]}}),De=P._27("page-addon-messages-discussion",K,function(n){return P._57(0,[(n()(),P._31(0,0,null,null,1,"page-addon-messages-discussion",[],null,null,null,w,Se)),P._30(1,180224,null,0,K,[U.a,S.a,xe.a,T.a,yn.a,L.a,j.a,D.a,V.a,O.a,q.a,Pn.a,[2,F.a],R.a,Ue.a,A.a],null,null)],null,null)},{},{},[]),Re=t(23),Le=t(366),Te=t(367),je=t(369),Oe=t(368),Ae=t(472),Ve=t(720),qe=t(270);t.d(e,"AddonMessagesDiscussionPageModuleNgFactory",function(){return Ne});var Ne=P._28(Z,[],function(n){return P._40([P._41(512,P.o,P._21,[[8,[nn.a,en.a,tn.a,ln.a,on.a,sn.a,an.a,rn.a,un.a,cn.a,dn.a,mn.a,fn.a,De]],[3,P.o],P.K]),P._41(4608,Ln.m,Ln.l,[P.G,[2,Ln.w]]),P._41(4608,Re.x,Re.x,[]),P._41(4608,Re.d,Re.d,[]),P._41(4608,Le.b,Le.a,[]),P._41(4608,Te.a,Te.b,[]),P._41(4608,je.b,je.a,[]),P._41(4608,Oe.b,Oe.a,[]),P._41(4608,Pn.a,Pn.a,[Ae.a,Le.b,Te.a,je.b,Oe.b,Pn.b,Pn.c]),P._41(512,Ln.b,Ln.b,[]),P._41(512,Re.v,Re.v,[]),P._41(512,Re.i,Re.i,[]),P._41(512,Re.s,Re.s,[]),P._41(512,Ve.a,Ve.a,[]),P._41(512,x.b,x.b,[]),P._41(512,Y.a,Y.a,[]),P._41(512,J.a,J.a,[]),P._41(512,W.a,W.a,[]),P._41(512,Ve.b,Ve.b,[]),P._41(512,Z,Z,[]),P._41(256,Pn.c,void 0,[]),P._41(256,Pn.b,void 0,[]),P._41(256,qe.a,K,[])])})},2132:function(n,e,t){"use strict";function l(n){return o._57(2,[(n()(),o._31(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),o._30(1,278528,null,0,s.i,[o.E,o.F,o.t,o.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._43(null,0),o._43(null,1),o._43(null,2),(n()(),o._31(5,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),o._30(6,278528,null,0,s.i,[o.E,o.F,o.t,o.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._43(null,3)],function(n,e){var t=e.component;n(e,1,0,"toolbar-background","toolbar-background-"+t._mode);n(e,6,0,"toolbar-content","toolbar-content-"+t._mode)},null)}t.d(e,"a",function(){return r}),e.b=l;var o=t(0),s=t(7),i=t(247),a=t(8),r=o._29({encapsulation:2,styles:[],data:{}});o._27("ion-toolbar",i.a,function(n){return o._57(0,[(n()(),o._31(0,0,null,null,1,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,l,r)),o._30(1,49152,null,0,i.a,[a.a,o.t,o.V],null,null)],null,function(n,e){n(e,0,0,o._44(e,1)._sbPadding)})},{color:"color",mode:"mode"},{},["[menuToggle],ion-buttons[left]","ion-buttons[start]","ion-buttons[end],ion-buttons[right]","*"])},2136:function(n,e,t){"use strict";function l(n){return o._57(0,[o._52(402653184,1,{formElement:0}),(n()(),o._31(1,0,[[1,0],["messageForm",1]],null,28,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,t){var l=!0;if("submit"===e){l=!1!==o._44(n,3).onSubmit(t)&&l}if("reset"===e){l=!1!==o._44(n,3).onReset()&&l}return l},null,null)),o._30(2,16384,null,0,s.w,[],null,null),o._30(3,4210688,null,0,s.p,[[8,null],[8,null]],null,null),o._50(2048,null,s.b,null,[s.p]),o._30(5,16384,null,0,s.o,[s.b],null,null),(n()(),o._55(-1,null,["\n    "])),(n()(),o._31(7,0,null,null,7,"textarea",[["aria-multiline","true"],["class","core-send-message-input"],["core-auto-rows",""],["name","message"],["rows","1"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"onResize"],[null,"keydown.enter"],[null,"keydown.control.enter"],[null,"keydown.meta.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,t){var l=!0,s=n.component;if("input"===e){l=!1!==o._44(n,8)._handleInput(t.target.value)&&l}if("blur"===e){l=!1!==o._44(n,8).onTouched()&&l}if("compositionstart"===e){l=!1!==o._44(n,8)._compositionStart()&&l}if("compositionend"===e){l=!1!==o._44(n,8)._compositionEnd(t.target.value)&&l}if("input"===e){l=!1!==o._44(n,14).onInput()&&l}if("change"===e){l=!1!==o._44(n,14).onChange()&&l}if("ngModelChange"===e){l=!1!==(s.message=t)&&l}if("onResize"===e){l=!1!==s.textareaResized()&&l}if("keydown.enter"===e){l=!1!==s.enterClicked(t)&&l}if("keydown.control.enter"===e){l=!1!==s.enterClicked(t,"control")&&l}if("keydown.meta.enter"===e){l=!1!==s.enterClicked(t,"meta")&&l}return l},null,null)),o._30(8,16384,null,0,s.c,[o.W,o.t,[2,s.a]],null,null),o._50(1024,null,s.l,function(n){return[n]},[s.c]),o._30(10,671744,null,0,s.q,[[2,s.b],[8,null],[8,null],[2,s.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o._50(2048,null,s.m,null,[s.q]),o._30(12,16384,null,0,s.n,[s.m],null,null),o._30(13,81920,null,0,i.a,[o.t,a.a,r.a,[2,u.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),o._30(14,4210688,null,0,c.a,[o.t],null,{onResize:"onResize"}),(n()(),o._55(-1,null,["\n    "])),(n()(),o._31(16,0,null,null,12,"ion-buttons",[["end",""]],null,null,null,null,null)),o._30(17,16384,null,1,d.a,[m.a,o.t,o.V,[2,f.a],[2,h.a]],null,null),o._52(603979776,2,{_buttons:1}),(n()(),o._55(-1,null,["\n        "])),(n()(),o._31(20,0,null,null,7,"button",[["clear","true"],["icon-only",""],["ion-button",""],["type","submit"]],[[8,"disabled",0],[1,"aria-label",0]],[[null,"onClick"]],function(n,e,t){var l=!0;if("onClick"===e){l=!1!==n.component.submitForm(t)&&l}return l},g.b,g.a)),o._30(21,1097728,[[2,4]],0,_.a,[[8,""],m.a,o.t,o.V],{clear:[0,"clear"]},null),o._30(22,81920,null,0,p.a,[o.t],null,{onClick:"onClick"}),o._47(131072,v.a,[b.a,o.j]),(n()(),o._55(-1,0,["\n            "])),(n()(),o._31(25,0,null,0,1,"ion-icon",[["color","dark"],["name","send"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._30(26,147456,null,0,y.a,[m.a,o.t,o.V],{color:[0,"color"],name:[1,"name"]},null),(n()(),o._55(-1,0,["\n        "])),(n()(),o._55(-1,null,["\n    "])),(n()(),o._55(-1,null,["\n"])),(n()(),o._55(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,10,0,"message",t.message);n(e,13,0,t.showKeyboard);n(e,21,0,"true"),n(e,22,0);n(e,26,0,"dark","send")},function(n,e){var t=e.component;n(e,1,0,o._44(e,5).ngClassUntouched,o._44(e,5).ngClassTouched,o._44(e,5).ngClassPristine,o._44(e,5).ngClassDirty,o._44(e,5).ngClassValid,o._44(e,5).ngClassInvalid,o._44(e,5).ngClassPending);n(e,7,0,t.placeholder,o._44(e,12).ngClassUntouched,o._44(e,12).ngClassTouched,o._44(e,12).ngClassPristine,o._44(e,12).ngClassDirty,o._44(e,12).ngClassValid,o._44(e,12).ngClassInvalid,o._44(e,12).ngClassPending);n(e,20,0,!t.message||t.sendDisabled,o._56(e,20,1,o._44(e,23).transform("core.send")));n(e,25,0,o._44(e,26)._hidden)})}t.d(e,"a",function(){return E}),e.b=l;var o=t(0),s=t(23),i=t(376),a=t(4),r=t(2),u=t(21),c=t(381),d=t(371),m=t(8),f=t(247),h=t(211),g=t(45),_=t(42),p=t(491),v=t(25),b=t(17),y=t(47),M=t(1550),I=t(11),k=t(126),C=t(9),w=t(1),P=t(10),E=o._29({encapsulation:2,styles:[],data:{}});o._27("core-send-message-form",M.a,function(n){return o._57(0,[(n()(),o._31(0,0,null,null,1,"core-send-message-form",[],null,null,null,l,E)),o._30(1,114688,null,0,M.a,[r.a,I.a,k.a,C.a,w.a,P.a,a.a],null,null)],function(n,e){n(e,1,0)},null)},{message:"message",placeholder:"placeholder",showKeyboard:"showKeyboard",sendDisabled:"sendDisabled"},{onSubmit:"onSubmit",onResize:"onResize"},[])}});