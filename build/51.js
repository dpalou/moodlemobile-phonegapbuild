webpackJsonp([51],{2055:function(l,n,e){"use strict";function t(l){return g._57(0,[(l()(),g._31(0,0,null,null,21,null,null,null,null,null,null,null)),(l()(),g._55(-1,null,["\n                "])),(l()(),g._31(2,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(l()(),g._55(3,null,["",""])),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,null,["\n                "])),(l()(),g._31(6,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,Q.b,Q.a)),g._30(7,1097728,null,3,W.a,[X.a,Y.a,g.t,g.V,[2,Z.a]],null,null),g._52(335544320,3,{contentLabel:0}),g._52(603979776,4,{_buttons:1}),g._52(603979776,5,{_icons:1}),g._30(11,16384,null,0,ll.a,[],null,null),(l()(),g._55(-1,2,["\n                    "])),(l()(),g._31(13,0,null,3,6,"ion-input",[["formControlName","siteUrl"],["name","url"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,nl.b,nl.a)),g._30(14,81920,null,0,el.a,[g.t,v.a,tl.a,[2,ul.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),g._30(15,671744,null,0,x.f,[[3,x.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),g._50(2048,null,x.m,null,[x.f]),g._30(17,16384,null,0,x.n,[x.m],null,null),g._30(18,5423104,null,0,il.a,[Y.a,ol.a,X.a,al.a,g.t,g.V,[2,rl.a],[2,W.a],[2,x.m],sl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,2,["\n                "])),(l()(),g._55(-1,null,["\n            "]))],function(l,n){l(n,14,0,n.component.showKeyboard);l(n,15,0,"siteUrl");l(n,18,0,"url",g._34(1,"",g._56(n,18,1,g._44(n,19).transform("core.login.siteaddress")),""))},function(l,n){l(n,3,0,g._56(n,3,0,g._44(n,4).transform("core.login.newsitedescription")));l(n,13,0,g._44(n,17).ngClassUntouched,g._44(n,17).ngClassTouched,g._44(n,17).ngClassPristine,g._44(n,17).ngClassDirty,g._44(n,17).ngClassValid,g._44(n,17).ngClassInvalid,g._44(n,17).ngClassPending)})}function u(l){return g._57(0,[(l()(),g._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),g._30(1,16384,[[9,4]],0,cl.a,[g.t],{value:[0,"value"]},null),(l()(),g._55(2,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.url)},function(l,n){l(n,2,0,n.context.$implicit.name)})}function i(l){return g._57(0,[(l()(),g._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["margin-vertical",""],["text-wrap",""]],null,null,null,Q.b,Q.a)),g._30(1,1097728,null,3,W.a,[X.a,Y.a,g.t,g.V,[2,Z.a]],null,null),g._52(335544320,6,{contentLabel:0}),g._52(603979776,7,{_buttons:1}),g._52(603979776,8,{_icons:1}),g._30(5,16384,null,0,ll.a,[],null,null),(l()(),g._55(-1,2,["\n                "])),(l()(),g._31(7,0,null,1,3,"ion-label",[["for","siteSelect"],["stacked",""]],null,null,null,null,null)),g._30(8,16384,[[6,4]],0,_l.a,[Y.a,g.t,g.V,[8,null],[8,""],[8,null],[8,null]],null,null),(l()(),g._55(9,null,["",""])),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,2,["\n                "])),(l()(),g._31(12,0,null,3,11,"ion-select",[["formControlName","siteUrl"],["interface","action-sheet"],["name","url"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==g._44(l,13)._click(e)&&t}if("keyup.space"===n){t=!1!==g._44(l,13)._keyup()&&t}return t},fl.b,fl.a)),g._30(13,1228800,null,1,dl.a,[al.a,X.a,Y.a,g.t,g.V,[2,W.a],gl.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),g._52(603979776,9,{options:1}),g._47(131072,J.a,[z.a,g.j]),g._50(1024,null,x.l,function(l){return[l]},[dl.a]),g._30(17,671744,null,0,x.f,[[3,x.b],[8,null],[8,null],[2,x.l]],{name:[0,"name"]},null),g._50(2048,null,x.m,null,[x.f]),g._30(19,16384,null,0,x.n,[x.m],null,null),(l()(),g._55(-1,null,["\n                    "])),(l()(),g._26(16777216,null,null,1,null,u)),g._30(22,802816,null,0,pl.j,[g._11,g._6,g.E],{ngForOf:[0,"ngForOf"]},null),(l()(),g._55(-1,null,["\n                "])),(l()(),g._55(-1,2,["\n            "]))],function(l,n){var e=n.component;l(n,13,0,g._34(1,"",g._56(n,13,0,g._44(n,15).transform("core.login.siteaddress")),""),"action-sheet");l(n,17,0,"siteUrl");l(n,22,0,e.fixedSites)},function(l,n){l(n,9,0,g._56(n,9,0,g._44(n,10).transform("core.login.selectsite")));l(n,12,0,g._44(n,13)._disabled,g._44(n,19).ngClassUntouched,g._44(n,19).ngClassTouched,g._44(n,19).ngClassPristine,g._44(n,19).ngClassDirty,g._44(n,19).ngClassValid,g._44(n,19).ngClassInvalid,g._44(n,19).ngClassPending)})}function o(l){return g._57(0,[(l()(),g._31(0,0,[[1,0],["siteFormEl",1]],null,17,"form",[["ion-list",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var t=!0,u=l.component;if("submit"===n){t=!1!==g._44(l,2).onSubmit(e)&&t}if("reset"===n){t=!1!==g._44(l,2).onReset()&&t}if("ngSubmit"===n){t=!1!==u.connect(e,u.siteForm.value.siteUrl)&&t}return t},null,null)),g._30(1,16384,null,0,x.w,[],null,null),g._30(2,540672,null,0,x.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),g._50(2048,null,x.b,null,[x.h]),g._30(4,16384,null,0,x.o,[x.b],null,null),(l()(),g._55(-1,null,["\n            "])),(l()(),g._55(-1,null,["\n            "])),(l()(),g._26(16777216,null,null,1,null,t)),g._30(8,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,null,["\n\n            "])),(l()(),g._26(16777216,null,null,1,null,i)),g._30(11,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,null,["\n\n            "])),(l()(),g._31(13,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],null,null,hl.b,hl.a)),g._30(14,1097728,null,0,ml.a,[[8,""],Y.a,g.t,g.V],{block:[0,"block"]},null),(l()(),g._55(15,0,["",""])),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,null,["\n        "]))],function(l,n){var e=n.component;l(n,2,0,e.siteForm);l(n,8,0,!e.fixedSites);l(n,11,0,e.fixedSites&&"select"==e.fixedDisplay);l(n,14,0,"")},function(l,n){var e=n.component;l(n,0,0,g._44(n,4).ngClassUntouched,g._44(n,4).ngClassTouched,g._44(n,4).ngClassPristine,g._44(n,4).ngClassDirty,g._44(n,4).ngClassValid,g._44(n,4).ngClassInvalid,g._44(n,4).ngClassPending);l(n,13,0,!e.siteForm.valid);l(n,15,0,g._56(n,15,0,g._44(n,16).transform("core.login.connect")))})}function a(l){return g._57(0,[(l()(),g._31(0,0,null,null,5,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(l,n,e){var t=!0,u=l.component;if("ngModelChange"===n){t=!1!==(u.filter=e)&&t}if("ionInput"===n){t=!1!==u.filterChanged(e)&&t}if("ionCancel"===n){t=!1!==u.filterChanged()&&t}return t},bl.b,bl.a)),g._30(1,671744,null,0,x.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),g._50(2048,null,x.m,null,[x.q]),g._30(3,16384,null,0,x.n,[x.m],null,null),g._30(4,1294336,null,0,vl.a,[Y.a,ol.a,g.t,g.V,[2,x.m]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput",ionCancel:"ionCancel"}),g._47(131072,J.a,[z.a,g.j])],function(l,n){l(n,1,0,n.component.filter);l(n,4,0,g._56(n,4,0,g._44(n,5).transform("core.login.findyoursite")))},function(l,n){l(n,0,1,[g._44(n,3).ngClassUntouched,g._44(n,3).ngClassTouched,g._44(n,3).ngClassPristine,g._44(n,3).ngClassDirty,g._44(n,3).ngClassValid,g._44(n,3).ngClassInvalid,g._44(n,3).ngClassPending,g._44(n,4)._animated,g._44(n,4)._value,g._44(n,4)._isActive,g._44(n,4)._showCancelButton,g._44(n,4)._shouldAlignLeft,g._44(n,4)._isFocus])})}function r(l){return g._57(0,[(l()(),g._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),g._55(1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.url)})}function s(l){return g._57(0,[(l()(),g._31(0,0,null,null,12,"ion-item",[["class","item item-block"],["detail-push",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.connect(e,l.context.$implicit.url)&&t}return t},Q.b,Q.a)),g._30(1,1097728,null,3,W.a,[X.a,Y.a,g.t,g.V,[2,Z.a]],null,null),g._52(335544320,13,{contentLabel:0}),g._52(603979776,14,{_buttons:1}),g._52(603979776,15,{_icons:1}),g._30(5,16384,null,0,ll.a,[],null,null),(l()(),g._55(-1,2,["\n                "])),(l()(),g._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(l()(),g._55(8,null,["",""])),(l()(),g._55(-1,2,["\n                "])),(l()(),g._26(16777216,null,2,1,null,r)),g._30(11,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,2,["\n            "]))],function(l,n){l(n,11,0,"list"==n.component.fixedDisplay)},function(l,n){l(n,0,0,n.context.$implicit.name);l(n,8,0,n.context.$implicit.name)})}function c(l){return g._57(0,[(l()(),g._31(0,0,null,null,18,"ion-list",[],null,null,null,null,null)),g._30(1,16384,null,0,yl.a,[Y.a,g.t,g.V,ol.a,Cl.l,sl.a],null,null),(l()(),g._55(-1,null,["\n            "])),(l()(),g._31(3,0,null,null,8,"ion-item",[["class","item item-block"],["no-lines",""]],null,null,null,Q.b,Q.a)),g._30(4,1097728,null,3,W.a,[X.a,Y.a,g.t,g.V,[2,Z.a]],null,null),g._52(335544320,10,{contentLabel:0}),g._52(603979776,11,{_buttons:1}),g._52(603979776,12,{_icons:1}),g._30(8,16384,null,0,ll.a,[],null,null),(l()(),g._31(9,0,null,2,2,"h2",[["class","item-heading"]],null,null,null,null,null)),(l()(),g._55(10,null,["",""])),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,null,["\n            "])),(l()(),g._26(16777216,null,null,1,null,a)),g._30(14,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,null,["\n            "])),(l()(),g._26(16777216,null,null,1,null,s)),g._30(17,802816,null,0,pl.j,[g._11,g._6,g.E],{ngForOf:[0,"ngForOf"]},null),(l()(),g._55(-1,null,["\n        "]))],function(l,n){var e=n.component;l(n,14,0,e.fixedSites.length>4);l(n,17,0,e.filteredSites)},function(l,n){l(n,10,0,g._56(n,10,0,g._44(n,11).transform("core.login.selectsite")))})}function _(l){return g._57(0,[(l()(),g._31(0,0,null,null,2,"a",[["block",""],["ion-button",""],["margin-bottom",""]],[[8,"title",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.connect(e,l.context.$implicit.url)&&t}return t},hl.b,hl.a)),g._30(1,1097728,null,0,ml.a,[[8,""],Y.a,g.t,g.V],{block:[0,"block"]},null),(l()(),g._55(2,0,["",""]))],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,n.context.$implicit.name);l(n,2,0,n.context.$implicit.name)})}function f(l){return g._57(0,[(l()(),g._31(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),g._55(-1,null,["\n            "])),(l()(),g._31(2,0,null,null,2,"p",[["class","padding no-padding-bottom"]],null,null,null,null,null)),(l()(),g._55(3,null,["",""])),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,null,["\n            "])),(l()(),g._26(16777216,null,null,1,null,_)),g._30(7,802816,null,0,pl.j,[g._11,g._6,g.E],{ngForOf:[0,"ngForOf"]},null),(l()(),g._55(-1,null,["\n        "]))],function(l,n){l(n,7,0,n.component.fixedSites)},function(l,n){l(n,3,0,g._56(n,3,0,g._44(n,4).transform("core.login.selectsite")))})}function d(l){return g._57(0,[g._52(671088640,1,{formElement:0}),(l()(),g._31(1,0,null,null,34,"ion-header",[],null,null,null,null,null)),g._30(2,16384,null,0,xl.a,[Y.a,g.t,g.V,[2,kl.a]],null,null),(l()(),g._55(-1,null,["\n    "])),(l()(),g._31(4,0,null,null,30,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Sl.b,Sl.a)),g._30(5,49152,null,0,wl.a,[al.a,[2,kl.a],[2,ul.a],Y.a,g.t,g.V],null,null),g._30(6,212992,null,0,Pl.a,[wl.a,ol.a,z.a,m.a],null,null),(l()(),g._55(-1,3,["\n        "])),(l()(),g._31(8,0,null,3,3,"ion-title",[],null,null,null,Ul.b,Ul.a)),g._30(9,49152,null,0,jl.a,[Y.a,g.t,g.V,[2,Il.a],[2,wl.a]],null,null),(l()(),g._55(10,0,["",""])),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,3,["\n\n        "])),(l()(),g._31(13,0,null,2,20,"ion-buttons",[["end",""]],null,null,null,null,null)),g._30(14,16384,null,1,Vl.a,[Y.a,g.t,g.V,[2,Il.a],[2,wl.a]],null,null),g._52(603979776,2,{_buttons:1}),(l()(),g._55(-1,null,["\n            "])),(l()(),g._31(17,0,null,null,7,"button",[["icon-only",""],["ion-button",""],["navPush","CoreAppSettingsPage"]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==g._44(l,19).onClick()&&t}return t},hl.b,hl.a)),g._30(18,1097728,[[2,4]],0,ml.a,[[8,""],Y.a,g.t,g.V],null,null),g._30(19,16384,null,0,Ol.a,[[2,ul.a]],{navPush:[0,"navPush"]},null),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,0,["\n                "])),(l()(),g._31(22,0,null,0,1,"core-icon",[["name","fa-cogs"]],null,null,null,El.b,El.a)),g._30(23,704512,null,0,Fl.a,[g.t,Y.a],{name:[0,"name"]},null),(l()(),g._55(-1,0,["\n            "])),(l()(),g._55(-1,null,["\n            "])),(l()(),g._31(26,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.showHelp()&&t}return t},hl.b,hl.a)),g._30(27,1097728,[[2,4]],0,ml.a,[[8,""],Y.a,g.t,g.V],null,null),g._47(131072,J.a,[z.a,g.j]),(l()(),g._55(-1,0,["\n                "])),(l()(),g._31(30,0,null,0,1,"ion-icon",[["name","help-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(31,147456,null,0,Dl.a,[Y.a,g.t,g.V],{name:[0,"name"]},null),(l()(),g._55(-1,0,["\n            "])),(l()(),g._55(-1,null,["\n        "])),(l()(),g._55(-1,3,["\n    "])),(l()(),g._55(-1,null,["\n"])),(l()(),g._55(-1,null,["\n"])),(l()(),g._31(37,0,null,null,21,"ion-content",[["class","core-center-view"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Ll.b,Ll.a)),g._30(38,4374528,null,0,rl.a,[Y.a,ol.a,sl.a,g.t,g.V,al.a,Rl.a,g.M,[2,kl.a],[2,ul.a]],null,null),(l()(),g._55(-1,1,["\n    "])),(l()(),g._31(40,0,null,1,17,"div",[["class","box"]],null,null,null,null,null)),(l()(),g._55(-1,null,["\n        "])),(l()(),g._31(42,0,null,null,3,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(l()(),g._55(-1,null,["\n            "])),(l()(),g._31(44,0,null,null,0,"img",[["class","avatar-full login-logo"],["role","presentation"],["src","assets/img/login_logo.png"]],null,null,null,null,null)),(l()(),g._55(-1,null,["\n        "])),(l()(),g._55(-1,null,["\n        "])),(l()(),g._26(16777216,null,null,1,null,o)),g._30(48,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,null,["\n        "])),(l()(),g._55(-1,null,["\n        "])),(l()(),g._26(16777216,null,null,1,null,c)),g._30(52,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,null,["\n\n        "])),(l()(),g._55(-1,null,["\n        "])),(l()(),g._26(16777216,null,null,1,null,f)),g._30(56,16384,null,0,pl.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(l()(),g._55(-1,null,["\n    "])),(l()(),g._55(-1,1,["\n"])),(l()(),g._55(-1,null,["\n"]))],function(l,n){var e=n.component;l(n,6,0);l(n,19,0,"CoreAppSettingsPage");l(n,23,0,"fa-cogs");l(n,31,0,"help-circle");l(n,48,0,!e.fixedSites||"select"==e.fixedDisplay);l(n,52,0,e.fixedSites&&("list"==e.fixedDisplay||"listnourl"==e.fixedDisplay));l(n,56,0,e.fixedSites&&"buttons"==e.fixedDisplay)},function(l,n){l(n,4,0,g._44(n,5)._hidden,g._44(n,5)._sbPadding);l(n,10,0,g._56(n,10,0,g._44(n,11).transform("core.login.connecttomoodle")));l(n,17,0,g._56(n,17,0,g._44(n,20).transform("core.settings.appsettings")));l(n,26,0,g._56(n,26,0,g._44(n,28).transform("core.help")));l(n,30,0,g._44(n,31)._hidden);l(n,37,0,g._44(n,38).statusbarPadding,g._44(n,38)._hasRefresher)})}Object.defineProperty(n,"__esModule",{value:!0});var g=e(0),p=e(5),h=e(10),m=e(9),b=e(1),v=e(4),y=e(116),C=e(125),x=e(23),k=e(1619),S=this&&this.__decorate||function(l,n,e,t){var u,i=arguments.length,o=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(l,n,e,t);else for(var a=l.length-1;a>=0;a--)(u=l[a])&&(o=(i<3?u(o):i>3?u(n,e,o):u(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},w=this&&this.__metadata||function(l,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,n)},P=this&&this.__awaiter||function(l,n,e,t){return new(e||(e=Promise))(function(u,i){function o(l){try{r(t.next(l))}catch(l){i(l)}}function a(l){try{r(t.throw(l))}catch(l){i(l)}}function r(l){l.done?u(l.value):new e(function(n){n(l.value)}).then(o,a)}r((t=t.apply(l,n||[])).next())})},U=this&&this.__generator||function(l,n){function e(e){return function(o){return function(e){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,u&&(i=u[2&e[0]?"return":e[0]?"throw":"next"])&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[0,i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,u=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(l,a)}catch(l){e=[6,l],u=0}finally{t=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var t,u,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},j=function(){function l(l,n,e,t,u,i,o,a,r){this.navCtrl=n,this.appProvider=t,this.sitesProvider=u,this.loginHelper=i,this.modalCtrl=o,this.domUtils=a,this.eventsProvider=r,this.fixedDisplay="buttons",this.showKeyboard=!1,this.filter="",this.showKeyboard=!!l.get("showKeyboard");var s="";this.loginHelper.hasSeveralFixedSites()&&(this.fixedSites=this.loginHelper.getFixedSites(),this.fixedDisplay=y.a.multisitesdisplay,["list","listnourl","select","buttons"].indexOf(this.fixedDisplay)<0&&(this.fixedDisplay=this.fixedSites.length>8?"list":this.fixedSites.length>3?"select":"buttons"),this.filteredSites=this.fixedSites,s=this.fixedSites[0].url),this.siteForm=e.group({siteUrl:[s,x.u.required]})}return l.prototype.connect=function(l,n){var e=this;if(l.preventDefault(),l.stopPropagation(),this.appProvider.closeKeyboard(),n)if(this.appProvider.isOnline()){n=n.trim();var t=this.domUtils.showModalLoading(),u=this.sitesProvider.getDemoSiteData(n);u?this.sitesProvider.getUserToken(u.url,u.username,u.password).then(function(l){return e.sitesProvider.newSite(l.siteUrl,l.token,l.privateToken).then(function(){return e.domUtils.triggerFormSubmittedEvent(e.formElement.nativeElement,!0),e.loginHelper.goToSiteInitialPage()},function(l){e.loginHelper.treatUserTokenError(u.url,l,u.username,u.password),l.loggedout&&e.navCtrl.setRoot("CoreLoginSitesPage")})},function(l){e.loginHelper.treatUserTokenError(u.url,l,u.username,u.password),l.loggedout&&e.navCtrl.setRoot("CoreLoginSitesPage")}).finally(function(){t.dismiss()}):this.sitesProvider.checkSite(n).catch(function(l){var t=k.a.guessMoodleDomain(n);return t?e.sitesProvider.checkSite(t):Promise.reject(l)}).then(function(l){return e.login(l)}).catch(function(l){return e.showLoginIssue(n,l)}).finally(function(){return t.dismiss()})}else this.domUtils.showErrorModal("core.networkerrormsg",!0);else this.domUtils.showErrorModal("core.login.siteurlrequired",!0)},l.prototype.filterChanged=function(l){var n=l.target.value&&l.target.value.trim().toLowerCase();this.filteredSites=n&&this.fixedSites?this.fixedSites.filter(function(l){return l.name.toLowerCase().indexOf(n)>-1||l.url.toLowerCase().indexOf(n)>-1}):this.fixedSites},l.prototype.showHelp=function(){this.modalCtrl.create("CoreLoginSiteHelpPage").present()},l.prototype.showLoginIssue=function(l,n){this.modalCtrl.create("CoreLoginSiteErrorPage",{siteUrl:l,issue:this.domUtils.getErrorMessage(n)}).present()},l.prototype.login=function(l){return P(this,void 0,void 0,function(){var n=this;return U(this,function(e){return[2,this.sitesProvider.checkRequiredMinimumVersion(l.config).then(function(){n.domUtils.triggerFormSubmittedEvent(n.formElement.nativeElement,!0),l.warning&&n.domUtils.showErrorModal(l.warning,!0,4e3),n.loginHelper.isSSOLoginNeeded(l.code)?n.loginHelper.confirmAndOpenBrowserForSSOLogin(l.siteUrl,l.code,l.service,l.config&&l.config.launchurl):n.navCtrl.push("CoreLoginCredentialsPage",{siteUrl:l.siteUrl,siteConfig:l.config})}).catch(function(){})]})})},S([Object(g._9)("siteFormEl"),w("design:type",g.t)],l.prototype,"formElement",void 0),l=S([Object(g.m)({selector:"page-core-login-site",templateUrl:"site.html"}),w("design:paramtypes",[p.t,p.s,x.d,h.a,b.a,C.a,p.q,v.a,m.a])],l)}(),I=e(3),V=e(32),O=e(26),E=this&&this.__decorate||function(l,n,e,t){var u,i=arguments.length,o=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(l,n,e,t);else for(var a=l.length-1;a>=0;a--)(u=l[a])&&(o=(i<3?u(o):i>3?u(n,e,o):u(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},F=function(){function l(){}return l=E([Object(g.I)({declarations:[j],imports:[V.a,O.a,p.l.forChild(j),I.b.forChild()]})],l)}(),D=e(1522),L=e(1523),R=e(1524),M=e(1525),H=e(1526),T=e(1527),$=e(1528),A=e(1529),q=e(1530),K=e(1531),N=e(1532),B=e(1533),G=e(1534),J=e(25),z=e(18),Q=e(31),W=e(21),X=e(19),Y=e(8),Z=e(27),ll=e(33),nl=e(110),el=e(376),tl=e(2),ul=e(20),il=e(90),ol=e(16),al=e(35),rl=e(29),sl=e(34),cl=e(108),_l=e(67),fl=e(123),dl=e(109),gl=e(59),pl=e(7),hl=e(46),ml=e(43),bl=e(1577),vl=e(383),yl=e(86),Cl=e(44),xl=e(370),kl=e(39),Sl=e(721),wl=e(211),Pl=e(473),Ul=e(722),jl=e(314),Il=e(247),Vl=e(371),Ol=e(230),El=e(80),Fl=e(75),Dl=e(48),Ll=e(181),Rl=e(107),Ml=e(69),Hl=e(162),Tl=g._29({encapsulation:2,styles:[],data:{}}),$l=g._27("page-core-login-site",j,function(l){return g._57(0,[(l()(),g._31(0,0,null,null,1,"page-core-login-site",[],null,null,null,d,Tl)),g._30(1,49152,null,0,j,[Ml.a,ul.a,x.d,h.a,b.a,C.a,Hl.a,v.a,m.a],null,null)],null,null)},{},{},[]),Al=e(366),ql=e(367),Kl=e(369),Nl=e(368),Bl=e(472),Gl=e(720),Jl=e(106),zl=e(270);e.d(n,"CoreLoginSitePageModuleNgFactory",function(){return Ql});var Ql=g._28(F,[],function(l){return g._40([g._41(512,g.o,g._21,[[8,[D.a,L.a,R.a,M.a,H.a,T.a,$.a,A.a,q.a,K.a,N.a,B.a,G.a,$l]],[3,g.o],g.K]),g._41(4608,pl.m,pl.l,[g.G,[2,pl.w]]),g._41(4608,x.x,x.x,[]),g._41(4608,x.d,x.d,[]),g._41(4608,Al.b,Al.a,[]),g._41(4608,ql.a,ql.b,[]),g._41(4608,Kl.b,Kl.a,[]),g._41(4608,Nl.b,Nl.a,[]),g._41(4608,z.a,z.a,[Bl.a,Al.b,ql.a,Kl.b,Nl.b,z.b,z.c]),g._41(512,V.a,V.a,[]),g._41(512,pl.b,pl.b,[]),g._41(512,x.v,x.v,[]),g._41(512,x.i,x.i,[]),g._41(512,x.s,x.s,[]),g._41(512,Gl.a,Gl.a,[]),g._41(512,I.b,I.b,[]),g._41(512,Jl.a,Jl.a,[]),g._41(512,O.a,O.a,[]),g._41(512,Gl.b,Gl.b,[]),g._41(512,F,F,[]),g._41(256,z.c,void 0,[]),g._41(256,z.b,void 0,[]),g._41(256,zl.a,j,[])])})}});