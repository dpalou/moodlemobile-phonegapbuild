webpackJsonp([146],[,function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),r=n(262),i=n(3),l=n(10),a=n(9),s=n(6),u=n(441),c=n(4),d=n(11),f=n(22),p=n(2),h=n(171),m=n(40),_=n(116),g=n(53),v=n(194),y=(n.n(v),n(535)),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},C=function(){function e(e,n,o,r,i,l,a,s,u,c,d,f){this.http=n,this.sitesFactory=o,this.appProvider=r,this.translate=i,this.urlUtils=l,this.eventsProvider=a,this.textUtils=s,this.utils=u,this.injector=c,this.wsProvider=d,this.domUtils=f,this.appTablesSchema={name:"CoreSitesProvider",version:2,tables:[{name:t.SITES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"siteUrl",type:"TEXT",notNull:!0},{name:"token",type:"TEXT"},{name:"info",type:"TEXT"},{name:"privateToken",type:"TEXT"},{name:"config",type:"TEXT"},{name:"loggedOut",type:"INTEGER"},{name:"oauthId",type:"INTEGER"}]},{name:t.CURRENT_SITE_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"siteId",type:"TEXT",notNull:!0,unique:!0}]}],migrate:function(e,n){return O(this,void 0,void 0,function(){var o,r,i,l;return E(this,function(a){switch(a.label){case 0:if(!(n<2))return[3,7];o=t.SITES_TABLE,r="sites",a.label=1;case 1:return a.trys.push([1,6,,7]),[4,e.tableExists(r)];case 2:return a.sent(),[4,e.getAllRecords(r)];case 3:return i=a.sent(),l=[],i.forEach(function(t){l.push(e.insertRecord(o,t))}),[4,Promise.all(l)];case 4:return a.sent(),[4,e.dropTable(r)];case 5:return a.sent(),[3,7];case 6:return a.sent(),[3,7];case 7:return[2]}})})}},this.WORKPLACE_APP=3,this.MOODLE_APP=2,this.VALID_VERSION=1,this.INVALID_VERSION=-1,this.services={},this.sessionRestored=!1,this.sites={},this.siteSchemasMigration={},this.siteSchemas={},this.siteTablesSchemas=[{name:t.SCHEMA_VERSIONS_TABLE,columns:[{name:"name",type:"TEXT",primaryKey:!0},{name:"version",type:"INTEGER"}]}],this.siteSchema={name:"CoreSitesProvider",version:1,canBeCleared:[g.a.WS_CACHE_TABLE],tables:[{name:g.a.WS_CACHE_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"data",type:"TEXT"},{name:"key",type:"TEXT"},{name:"expirationTime",type:"INTEGER"}]},{name:g.a.CONFIG_TABLE,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value"}]}]},this.logger=e.getInstance("CoreSitesProvider"),this.appDB=r.getDB(),this.dbReady=r.createTablesFromSchema(this.appTablesSchema).catch(function(){}),this.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getDemoSiteData=function(e){var t=_.a.demo_sites;if(void 0!==t&&void 0!==t[e])return t[e]},e.prototype.checkSite=function(e,t){var n=this;return void 0===t&&(t="https://"),e=this.urlUtils.formatURL(e),this.urlUtils.isHttpURL(e)?this.appProvider.isOnline()?this.checkSiteWithProtocol(e,t).catch(function(o){return o.critical?Promise.reject(o):(t="https://"==t?"http://":"https://",n.checkSiteWithProtocol(e,t).catch(function(e){return e.critical?Promise.reject(e):n.textUtils.getErrorMessageFromError(o)?Promise.reject(o):n.textUtils.getErrorMessageFromError(e)?Promise.reject(e):n.translate.instant("core.cannotconnect",{$a:g.a.MINIMUM_MOODLE_VERSION})}))}):Promise.reject(this.translate.instant("core.networkerrormsg")):Promise.reject(this.translate.instant("core.login.invalidsite"))},e.prototype.checkSiteWithProtocol=function(e,t){function n(e,t){return Promise.reject({error:e,errorcode:t,critical:!0})}var o,r=this;return e=e.replace(/^http(s)?\:\/\//i,t),this.siteExists(e).catch(function(t){if("enablewsdescription"==t.errorcode)return n(t.error,t.errorcode);var o=r.urlUtils.addOrRemoveWWW(e);return r.siteExists(o).then(function(){e=o}).catch(function(e){return"enablewsdescription"==e.errorcode?n(e.error,e.errorcode):r.textUtils.getErrorMessageFromError(t)?Promise.reject(t):Promise.reject(e)})}).then(function(){var t=r.sitesFactory.makeSite(void 0,e);return t.checkLocalMobilePlugin().then(function(i){return i.service=i.service||_.a.wsservice,r.services[e]=i.service,i.coreSupported||i.code!=m.a.LOGIN_SSO_CODE&&i.code!=m.a.LOGIN_SSO_INAPP_CODE?t.getPublicConfig().then(function(e){if(o=e,!e.enablewebservices)return n(r.translate.instant("core.login.webservicesnotenabled"));if(!e.enablemobilewebservice)return n(r.translate.instant("core.login.mobileservicesnotenabled"));if(e.maintenanceenabled){var t=r.translate.instant("core.sitemaintenance");return e.maintenancemessage&&(t+=e.maintenancemessage),n(t)}return 0===i.code&&(i.code=e.typeoflogin),i},function(t){return 1===t.available?(t.critical=!0,"codingerror"==t.errorcode?r.utils.checkRedirect(e).then(function(e){return t.error=e?r.translate.instant("core.login.sitehasredirect"):r.translate.instant("core.cannotconnect",{$a:g.a.MINIMUM_MOODLE_VERSION}),Promise.reject(t)}):Promise.reject(t)):i}):i},function(e){return n(e)}).then(function(n){return e=t.getURL(),{siteUrl:e,code:n.code,warning:n.warning,service:n.service,config:o}})})},e.prototype.siteExists=function(e){var t=this;return this.http.post(e+"/login/token.php",{}).timeout(this.wsProvider.getRequestTimeout()).toPromise().catch(function(){return Promise.reject({error:t.translate.instant("core.cannotconnect",{$a:g.a.MINIMUM_MOODLE_VERSION})})}).then(function(e){return!e.errorcode||"enablewsdescription"!=e.errorcode&&"requirecorrectaccess"!=e.errorcode?e.error&&"Web services must be enabled in Advanced features."==e.error?Promise.reject({errorcode:"enablewsdescription",error:e.error}):void 0:Promise.reject({errorcode:e.errorcode,error:e.error})})},e.prototype.getUserToken=function(e,t,n,o,r){var i=this;if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));o||(o=this.determineService(e));var l=e+"/login/token.php";return this.http.post(l,{username:t,password:n,service:o}).timeout(this.wsProvider.getRequestTimeout()).toPromise().then(function(a){return void 0===a?Promise.reject(i.translate.instant("core.cannotconnect",{$a:g.a.MINIMUM_MOODLE_VERSION})):void 0!==a.token?{token:a.token,siteUrl:e,privateToken:a.privatetoken}:void 0!==a.error?r||"requirecorrectaccess"!=a.errorcode?"missingparam"==a.errorcode?i.utils.checkRedirect(l).then(function(e){return e?Promise.reject({error:i.translate.instant("core.login.sitehasredirect")}):Promise.reject({error:a.error,errorcode:a.errorcode})}):void 0!==a.errorcode?Promise.reject({error:a.error,errorcode:a.errorcode}):Promise.reject(a.error):(e=i.urlUtils.addOrRemoveWWW(e),i.getUserToken(e,t,n,o,!0)):Promise.reject(i.translate.instant("core.login.invalidaccount"))},function(){return Promise.reject(i.translate.instant("core.cannotconnect",{$a:g.a.MINIMUM_MOODLE_VERSION}))})},e.prototype.newSite=function(e,t,n,o,r){var i=this;void 0===n&&(n=""),void 0===o&&(o=!0),"boolean"!=typeof o&&(o=!0);var l=this.sitesFactory.makeSite(void 0,e,t,void 0,n,void 0,void 0),s=!0;return l.fetchSiteInfo().then(function(u){var c=i.isValidMoodleVersion(u);if(c==i.VALID_VERSION){var d=i.createSiteID(u.siteurl,u.username);return i.getSite(d).catch(function(){}).then(function(e){if(!e)return s=!0,l.setId(d),l.setInfo(u),l.setOAuthId(r),i.migrateSiteSchemas(l);s=!1,(l=e).setToken(t),l.setPrivateToken(n),l.setInfo(u),l.setOAuthId(r)}).then(function(){return i.getSiteConfig(l).catch(function(e){if(s)return Promise.reject(e)}).then(function(s){return void 0!==s&&l.setConfig(s),i.addSite(d,e,t,u,n,s,r),i.sites[d]=l,o&&(i.currentSite=l,i.login(d)),i.eventsProvider.trigger(a.a.SITE_ADDED,u,d),d})})}return i.treatInvalidAppVersion(c,e)}).catch(function(t){return t&&"invaliddevice"==t.errorcode?i.treatInvalidAppVersion(i.WORKPLACE_APP,e):Promise.reject(t)})},e.prototype.treatInvalidAppVersion=function(e,t,n){var o,r,i,l=this;switch(e){case this.MOODLE_APP:r="core.login.connecttomoodleapp",o="connecttomoodleapp";break;case this.WORKPLACE_APP:r="core.login.connecttoworkplaceapp",o="connecttoworkplaceapp";break;default:o="invalidmoodleversion",r="core.login.invalidmoodleversion",i={$a:g.a.MINIMUM_MOODLE_VERSION}}return(n?this.setSiteLoggedOut(n,!0):Promise.resolve()).then(function(){return Promise.reject({error:l.translate.instant(r,i),errorcode:o,loggedout:!0})})},e.prototype.createSiteID=function(e,t){return v.Md5.hashAsciiStr(e+t)},e.prototype.determineService=function(e){return e=e.replace("https://","http://"),this.services[e]?this.services[e]:(e=e.replace("http://","https://"),this.services[e]?this.services[e]:_.a.wsservice)},e.prototype.isValidMoodleVersion=function(e){if(!e)return this.INVALID_VERSION;var t=g.a.MINIMUM_MOODLE_VERSION;if(e.version){var n=parseInt(e.version,10);if(!isNaN(n)&&n>=2016052300)return this.validateWorkplaceVersion(e)}var o=this.getReleaseNumber(e.release||"");return o&&o>=t?this.validateWorkplaceVersion(e):this.INVALID_VERSION},e.prototype.validateWorkplaceVersion=function(e){var t=!!e.functions&&e.functions.some(function(e){return"tool_program_get_user_programs"==e.name});return void 0===this.isWPApp&&(this.isWPApp=!!y.c&&"AddonBlockProgramsOverviewModule"==y.c.name&&!!this.injector.get(y.c,!1)),!this.isWPApp&&t?this.WORKPLACE_APP:this.isWPApp&&!t?this.MOODLE_APP:this.VALID_VERSION},e.prototype.getReleaseNumber=function(e){var t=e.match(/^\d(\.\d(\.\d+)?)?/);return t?t[0]:""},e.prototype.validateSiteInfo=function(e){if(!e.firstname||!e.lastname){return{error:"core.requireduserdatamissing",params:{$a:'<a core-link href="'+e.siteurl+'">'+e.siteurl+"</a>"}}}return!0},e.prototype.addSite=function(e,n,o,r,i,l,a){return void 0===i&&(i=""),O(this,void 0,void 0,function(){var s;return E(this,function(u){switch(u.label){case 0:return[4,this.dbReady];case 1:return u.sent(),s={id:e,siteUrl:n,token:o,info:r?JSON.stringify(r):r,privateToken:i,config:l?JSON.stringify(l):l,loggedOut:0,oauthId:a},[2,this.appDB.insertRecord(t.SITES_TABLE,s)]}})})},e.prototype.checkRequiredMinimumVersion=function(e,t){var n=this;if(e&&e.tool_mobile_minimumversion){if(this.convertVersionName(e.tool_mobile_minimumversion)>this.convertVersionName(_.a.versionname)){var o="";if(o=this.appProvider.isAndroid()&&e.tool_mobile_androidappid?"market://details?id="+e.tool_mobile_androidappid:this.appProvider.isIOS()&&e.tool_mobile_iosappid?"itms-apps://itunes.apple.com/app/id"+e.tool_mobile_iosappid:e.tool_mobile_setuplink?e.tool_mobile_setuplink:this.appProvider.isMobile()?"https://download.moodle.org/mobile/":"https://download.moodle.org/desktop/",t=t||this.getCurrentSiteId(),this.domUtils.showConfirm(this.translate.instant("core.updaterequireddesc",{$a:e.tool_mobile_minimumversion}),this.translate.instant("core.updaterequired"),this.translate.instant("core.download"),this.translate.instant(t?"core.mainmenu.logout":"core.cancel")).then(function(){n.utils.openInBrowser(o)}).catch(function(){}),t){return(t==this.getCurrentSiteId()?this.logout():Promise.resolve()).then(function(){return n.setSiteLoggedOut(t,!0)}).then(function(){return Promise.reject(null)})}return Promise.reject(null)}}return Promise.resolve()},e.prototype.convertVersionName=function(e){var t=0,n=e.split("-")[0].split(".",3);return n.forEach(function(e){t=100*t+Number(e)}),n.length<3&&(t*=Math.pow(100,3-n.length)),t},e.prototype.loadSite=function(e,t,n){var o=this;return this.logger.debug("Load site "+e),this.getSite(e).then(function(r){return o.currentSite=r,r.isLoggedOut()?(o.eventsProvider.trigger(a.a.SESSION_EXPIRED,{pageName:t,params:n},r.getId()),!1):r.checkIfLocalMobileInstalledAndNotUsed().then(function(){return o.eventsProvider.trigger(a.a.SESSION_EXPIRED,{pageName:t,params:n},e),!1},function(){return r.getPublicConfig().catch(function(){return{}}).then(function(t){return o.checkRequiredMinimumVersion(t).then(function(){return o.login(e),o.updateSiteInfo(e),!0}).catch(function(){return!1})})})})},e.prototype.getCurrentSite=function(){return this.currentSite},e.prototype.getCurrentSiteHomeId=function(){return this.currentSite?this.currentSite.getSiteHomeId():1},e.prototype.getCurrentSiteId=function(){return this.currentSite?this.currentSite.getId():""},e.prototype.getCurrentSiteUserId=function(){return this.currentSite?this.currentSite.getUserId():0},e.prototype.isLoggedIn=function(){return void 0!==this.currentSite&&void 0!==this.currentSite.token&&""!=this.currentSite.token},e.prototype.deleteSite=function(e){return O(this,void 0,void 0,function(){var n;return E(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:return o.sent(),this.logger.debug("Delete site "+e),void 0!==this.currentSite&&this.currentSite.id==e&&this.logout(),[4,this.getSite(e)];case 2:return n=o.sent(),[4,n.deleteDB()];case 3:o.sent(),delete this.sites[e],o.label=4;case 4:return o.trys.push([4,6,,7]),[4,this.appDB.deleteRecords(t.SITES_TABLE,{id:e})];case 5:return o.sent(),[3,7];case 6:return o.sent(),[3,7];case 7:return[4,n.deleteFolder()];case 8:return o.sent(),this.eventsProvider.trigger(a.a.SITE_DELETED,n,e),[2]}})})},e.prototype.hasSites=function(){return O(this,void 0,void 0,function(){var e;return E(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[4,this.appDB.countRecords(t.SITES_TABLE)];case 2:return e=n.sent(),[2,e>0]}})})},e.prototype.getSite=function(e){return O(this,void 0,void 0,function(){var n;return E(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:if(o.sent(),e)return[3,2];if(this.currentSite)return[2,this.currentSite];throw null;case 2:return this.currentSite&&this.currentSite.getId()==e?[2,this.currentSite]:[3,3];case 3:return void 0===this.sites[e]?[3,4]:[2,this.sites[e]];case 4:return[4,this.appDB.getRecord(t.SITES_TABLE,{id:e})];case 5:return n=o.sent(),[2,this.makeSiteFromSiteListEntry(n)]}})})},e.prototype.makeSiteFromSiteListEntry=function(e){var t,n=this,o=e.info,r=e.config;return o=o?this.textUtils.parseJSON(o):o,r=r?this.textUtils.parseJSON(r):r,(t=this.sitesFactory.makeSite(e.id,e.siteUrl,e.token,o,e.privateToken,r,1==e.loggedOut)).setOAuthId(e.oauthId),this.migrateSiteSchemas(t).then(function(){return n.sites[e.id]=t,t})},e.prototype.isCurrentSite=function(e){if(!e||!this.currentSite)return!!this.currentSite;var t="object"==typeof e?e.getId():e;return this.currentSite.getId()===t},e.prototype.getSiteDb=function(e){return this.getSite(e).then(function(e){return e.getDb()})},e.prototype.getSiteHomeId=function(e){return this.getSite(e).then(function(e){return e.getSiteHomeId()})},e.prototype.getSites=function(e){return O(this,void 0,void 0,function(){var n,o,r=this;return E(this,function(i){switch(i.label){case 0:return[4,this.dbReady];case 1:return i.sent(),[4,this.appDB.getAllRecords(t.SITES_TABLE)];case 2:return n=i.sent(),o=[],n.forEach(function(t){if(!e||e.indexOf(t.id)>-1){var n=t.info?r.textUtils.parseJSON(t.info):t.info;o.push({id:t.id,siteUrl:t.siteUrl,fullName:n&&n.fullname,siteName:_.a.sitename?_.a.sitename:n&&n.sitename,avatar:n&&n.userpictureurl,siteHomeId:n&&n.siteid||1})}}),[2,o]}})})},e.prototype.getSortedSites=function(e){return this.getSites(e).then(function(e){return e.sort(function(e,t){var n=e.siteUrl.replace(/^https?:\/\//,"").toLowerCase(),o=t.siteUrl.replace(/^https?:\/\//,"").toLowerCase(),r=n.localeCompare(o);return 0!==r?r:(n=e.fullName.toLowerCase().trim(),o=t.fullName.toLowerCase().trim(),n.localeCompare(o))}),e})},e.prototype.getLoggedInSitesIds=function(){return O(this,void 0,void 0,function(){var e;return E(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[4,this.appDB.getRecords(t.SITES_TABLE,{loggedOut:0})];case 2:return e=n.sent(),[2,e.map(function(e){return e.id})]}})})},e.prototype.getSitesIds=function(){return O(this,void 0,void 0,function(){var e;return E(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[4,this.appDB.getAllRecords(t.SITES_TABLE)];case 2:return e=n.sent(),[2,e.map(function(e){return e.id})]}})})},e.prototype.login=function(e){return O(this,void 0,void 0,function(){var n;return E(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:return o.sent(),n={id:1,siteId:e},[4,this.appDB.insertRecord(t.CURRENT_SITE_TABLE,n)];case 2:return o.sent(),this.eventsProvider.trigger(a.a.LOGIN,{},e),[2]}})})},e.prototype.logout=function(){return O(this,void 0,void 0,function(){var e,n,o;return E(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),n=[],this.currentSite&&(o=this.currentSite.getStoredConfig(),e=this.currentSite.getId(),this.currentSite=void 0,o&&"1"==o.tool_mobile_forcelogout&&n.push(this.setSiteLoggedOut(e,!0)),n.push(this.appDB.deleteRecords(t.CURRENT_SITE_TABLE,{id:1}))),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,Promise.all(n)];case 3:return r.sent(),[3,5];case 4:return this.eventsProvider.trigger(a.a.LOGOUT,{},e),[7];case 5:return[2]}})})},e.prototype.restoreSession=function(){return O(this,void 0,void 0,function(){var e,n;return E(this,function(o){switch(o.label){case 0:return this.sessionRestored?[2,Promise.reject(null)]:[4,this.dbReady];case 1:o.sent(),this.sessionRestored=!0,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.appDB.getRecord(t.CURRENT_SITE_TABLE,{id:1})];case 3:return e=o.sent(),n=e.siteId,this.logger.debug("Restore session in site "+n),[2,this.loadSite(n)];case 4:return o.sent(),[3,5];case 5:return[2]}})})},e.prototype.setSiteLoggedOut=function(e,n){return O(this,void 0,void 0,function(){var o,r;return E(this,function(i){switch(i.label){case 0:return[4,this.dbReady];case 1:return i.sent(),[4,this.getSite(e)];case 2:return o=i.sent(),r={token:"",loggedOut:n?1:0},o.setLoggedOut(n),[2,this.appDB.updateRecords(t.SITES_TABLE,r,{id:e})]}})})},e.prototype.unsetCurrentSite=function(){this.currentSite=void 0},e.prototype.updateSiteToken=function(e,t,n,o){var r=this;void 0===o&&(o="");var i=this.createSiteID(e,t);return this.updateSiteTokenBySiteId(i,n,o).then(function(){return r.login(i)})},e.prototype.updateSiteTokenBySiteId=function(e,n,o){return void 0===o&&(o=""),O(this,void 0,void 0,function(){var r,i;return E(this,function(l){switch(l.label){case 0:return[4,this.dbReady];case 1:return l.sent(),[4,this.getSite(e)];case 2:return r=l.sent(),i={token:n,privateToken:o,loggedOut:0},r.token=n,r.privateToken=o,r.setLoggedOut(!1),[2,this.appDB.updateRecords(t.SITES_TABLE,i,{id:e})]}})})},e.prototype.updateSiteInfo=function(e){return O(this,void 0,void 0,function(){var n,o,r,i,l;return E(this,function(s){switch(s.label){case 0:return[4,this.dbReady];case 1:return s.sent(),[4,this.getSite(e)];case 2:n=s.sent(),s.label=3;case 3:return s.trys.push([3,13,,14]),[4,n.fetchSiteInfo()];case 4:if(o=s.sent(),n.setInfo(o),(r=this.isValidMoodleVersion(o))!=this.VALID_VERSION)return[2,this.treatInvalidAppVersion(r,n.getURL(),n.getId())];i=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.getSiteConfig(n)];case 6:return i=s.sent(),[3,8];case 7:return s.sent(),[3,8];case 8:l={info:JSON.stringify(o),loggedOut:n.isLoggedOut()?1:0},void 0!==i&&(n.setConfig(i),l.config=JSON.stringify(i)),s.label=9;case 9:return s.trys.push([9,,11,12]),[4,this.appDB.updateRecords(t.SITES_TABLE,l,{id:e})];case 10:return s.sent(),[3,12];case 11:return this.eventsProvider.trigger(a.a.SITE_UPDATED,o,e),[7];case 12:return[3,14];case 13:return s.sent(),[3,14];case 14:return[2]}})})},e.prototype.updateSiteInfoByUrl=function(e,t){var n=this.createSiteID(e,t);return this.updateSiteInfo(n)},e.prototype.getSiteIdsFromUrl=function(e,n,o){return O(this,void 0,void 0,function(){var r,i,l,a=this;return E(this,function(s){switch(s.label){case 0:return[4,this.dbReady];case 1:if(s.sent(),n&&this.currentSite&&this.currentSite.containsUrl(e)&&(!o||this.currentSite.getInfo().username==o))return[2,[this.currentSite.getId()]];if(!e.match(/^https?:\/\//i))return this.urlUtils.isAbsoluteURL(e)?[2,[]]:this.currentSite?[2,[this.currentSite.getId()]]:[2,[]];s.label=2;case 2:return s.trys.push([2,5,,6]),[4,this.appDB.getAllRecords(t.SITES_TABLE)];case 3:return r=s.sent(),i=[],l=[],r.forEach(function(t){a.sites[t.id]||l.push(a.makeSiteFromSiteListEntry(t)),a.sites[t.id].containsUrl(e)&&(o&&a.sites[t.id].getInfo().username!=o||i.push(t.id))}),[4,Promise.all(l)];case 4:return s.sent(),[2,i];case 5:return s.sent(),[2,[]];case 6:return[2]}})})},e.prototype.getStoredCurrentSiteId=function(){return O(this,void 0,void 0,function(){var e;return E(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[4,this.appDB.getRecord(t.CURRENT_SITE_TABLE,{id:1})];case 2:return e=n.sent(),[2,e.siteId]}})})},e.prototype.getSitePublicConfig=function(e){return this.sitesFactory.makeSite(void 0,e).getPublicConfig()},e.prototype.getSiteConfig=function(e){return e.wsAvailable("tool_mobile_get_config")?e.getConfig(void 0,!0):Promise.resolve()},e.prototype.isFeatureDisabled=function(e,t){return this.getSite(t).then(function(t){return t.isFeatureDisabled(e)})},e.prototype.createTableFromSchema=function(e){this.createTablesFromSchema([e])},e.prototype.createTablesFromSchema=function(e){this.siteTablesSchemas=this.siteTablesSchemas.concat(e);for(var t in this.sites)this.sites[t].getDb().createTablesFromSchema(e)},e.prototype.wsAvailableInCurrentSite=function(e,t){void 0===t&&(t=!0);var n=this.getCurrentSite();return n&&n.wsAvailable(e,t)},e.prototype.isLegacyMoodleByInfo=function(e){return!1},e.prototype.registerSiteSchema=function(e){return O(this,void 0,void 0,function(){var t,n,o=this;return E(this,function(r){switch(r.label){case 0:if(!this.currentSite)return[3,9];r.label=1;case 1:return r.trys.push([1,,7,8]),t={},t[e.name]=e,e.onlyCurrentSite?[3,4]:[4,this.getSitesIds()];case 2:return n=r.sent(),[4,Promise.all(n.map(function(e){return O(o,void 0,void 0,function(){var n;return E(this,function(o){switch(o.label){case 0:return[4,this.getSite(e)];case 1:return n=o.sent(),[2,this.applySiteSchemas(n,t)]}})})}))];case 3:return r.sent(),[3,6];case 4:return e.siteId=this.currentSite.getId(),[4,this.applySiteSchemas(this.currentSite,t)];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:return this.siteSchemas[e.name]=e,[7];case 8:return[3,10];case 9:e.onlyCurrentSite||(this.siteSchemas[e.name]=e),r.label=10;case 10:return[2]}})})},e.prototype.migrateSiteSchemas=function(e){var t=this;if(this.siteSchemasMigration[e.id])return this.siteSchemasMigration[e.id];this.logger.debug("Migrating all schemas of "+e.id);var n=e.getDb().createTablesFromSchema(this.siteTablesSchemas).then(function(){return t.applySiteSchemas(e,t.siteSchemas)});return this.siteSchemasMigration[e.id]=n,n.finally(function(){delete t.siteSchemasMigration[e.id]})},e.prototype.applySiteSchemas=function(e,n){var o=this,r=e.getDb();return r.getAllRecords(t.SCHEMA_VERSIONS_TABLE).then(function(i){var l={};i.forEach(function(e){l[e.name]=e.version});var a=[],s=function(i){var s=n[i],u=l[i]||0;if(u>=s.version||s.siteId&&e.getId()!=s.siteId)return"continue";o.logger.debug("Migrating schema '"+i+"' of "+e.id+" from version "+u+" to "+s.version);var c=Promise.resolve();s.tables&&(c=c.then(function(){return r.createTablesFromSchema(s.tables)})),s.migrate&&(c=c.then(function(){return s.migrate(r,u,e.id)})),c=c.then(function(){return r.insertRecord(t.SCHEMA_VERSIONS_TABLE,{name:i,version:s.version})}),a.push(c)};for(var u in n)s(u);return Promise.all(a)})},e.prototype.isStoredRootURL=function(e,t){var n=this;return this.getSiteIdsFromUrl(e,!0,t).then(function(t){var o={siteIds:t,site:void 0};return t.length>0?n.getSite(t[0]).then(function(t){return n.textUtils.removeEndingSlash(n.urlUtils.removeProtocolAndWWW(t.getURL()))==n.textUtils.removeEndingSlash(n.urlUtils.removeProtocolAndWWW(e))&&(o.site=t),o}):o})},e.prototype.getSiteTableSchemasToClear=function(e){var t=[];for(var n in this.siteSchemas){var o=this.siteSchemas[n];!o.canBeCleared||o.siteId&&e.getId()!=o.siteId||(t=t.concat(this.siteSchemas[n].canBeCleared))}return t},e.prototype.getReadingStrategyPreSets=function(e){switch(e){case 1:return{omitExpires:!0};case 0:return{omitExpires:!0,forceOffline:!0};case 2:default:return{}}},e.SITES_TABLE="sites_2",e.CURRENT_SITE_TABLE="current_site",e.SCHEMA_VERSIONS_TABLE="schema_versions",e=t=b([Object(o.A)(),P("design:paramtypes",[s.a,r.c,u.a,l.a,i.c,f.a,a.a,d.a,p.a,o.C,h.a,c.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(5),i=n(436),l=n(437),a=n(438),s=n(566),u=n(10),c=n(4),d=n(66),f=n(11),p=n(9),h=n(6),m=n(3),_=n(150),g=n(171),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h){this.iab=e,this.appProvider=t,this.clipboard=n,this.domUtils=o,this.translate=i,this.platform=l,this.langProvider=a,this.eventsProvider=s,this.fileOpener=u,this.mimetypeUtils=c,this.webIntent=d,this.wsProvider=f,this.zone=p,this.textUtils=h,this.DONT_CLONE=["[object FileEntry]","[object DirectoryEntry]","[object DOMFileSystem]"],this.uniqueIds={},this.logger=r.getInstance("CoreUtilsProvider")}return e.prototype.addDataNotDownloadedError=function(e,t){var n=e;return e&&"string"!=typeof e&&(n=this.textUtils.getErrorMessageFromError(e)),"string"!=typeof n&&(n=t||""),this.isWebServiceError(e)||(n+="<br><br>"+this.translate.instant("core.errorsomedatanotdownloaded")),n},e.prototype.allPromises=function(e){return e&&e.length?new Promise(function(t,n){var o,r=e.length,i=0,l=!1;e.forEach(function(e){e.catch(function(e){l=!0,o=e}).finally(function(){++i===r&&(l?n(o):t())})})}):Promise.resolve()},e.prototype.arrayToObject=function(e,t,n){return n=n||{},e.forEach(function(e){n[t?e[t]:e]=e}),n},e.prototype.basicLeftCompare=function(e,t,n,o,r){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),"function"==typeof e||"function"==typeof t)return!0;if("object"==typeof e&&"object"==typeof t){if(o>=n)return!0;var i=!0;for(var l in e){var a=e[l];if("$$hashKey"==l)return;this.basicLeftCompare(a,t[l],n,o+1)||(i=!1)}return i}if(r&&(void 0===e&&null===t||null===e&&void 0===t))return!0;var s=parseFloat(e),u=parseFloat(t);return isNaN(s)||isNaN(u)?e===t:s==u},e.prototype.blockLeaveView=function(){},e.prototype.checkRedirect=function(e){if(window.fetch){var t,n=window,o={redirect:"follow"};return n.AbortController&&(t=new n.AbortController,o.signal=t.signal),this.timeoutPromise(window.fetch(e,o),this.wsProvider.getRequestTimeout()).then(function(e){return e.redirected}).catch(function(e){return e.timeout&&t&&t.abort(),!1})}return Promise.resolve(!1)},e.prototype.closeInAppBrowser=function(e){this.iabInstance&&(this.iabInstance.close(),e&&this.appProvider.isDesktop()&&n(131).ipcRenderer.send("closeSecondaryWindows"))},e.prototype.clone=function(e,t){if(void 0===t&&(t=0),t>=20)return this.logger.error("Max depth reached when cloning object.",e),e;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n[o]=this.clone(e[o],t+1);return n}if("object"==typeof e&&null!==e){if(e&&e.toString&&-1!=this.DONT_CLONE.indexOf(e.toString()))return e;var r={};for(var i in e)r[i]=this.clone(e[i],t+1);return r}return e},e.prototype.copyProperties=function(e,t,n){void 0===n&&(n=!0);for(var o in e)t[o]=n?this.clone(e[o]):e[o]},e.prototype.copyToClipboard=function(e){var t=this;return this.clipboard.copy(e).then(function(){return t.domUtils.showToast("core.copiedtoclipboard",!0)}).catch(function(){})},e.prototype.createFakeWSError=function(e,t){return this.wsProvider.createFakeWSError(e,t)},e.prototype.emptyArray=function(e){e.length=0},e.prototype.emptyObject=function(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t]},e.prototype.executeOrderedPromises=function(e){var t=this,n=[],o=Promise.resolve(),r=function(r){var i=e[r],l=void 0;l=o.finally(function(){var e;try{e=i.func.apply(i.context,i.params||[])}catch(e){return void t.logger.error(e.message)}return e}),n.push(l),i.blocking&&(o=l)};for(var i in e)r(i);return this.allPromises(n)},e.prototype.flattenObject=function(e,t){var n={};for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];if("object"!=typeof r||Array.isArray(r))n[o]=r;else{var i=this.flattenObject(r);for(var l in i)if(i.hasOwnProperty(l)){n[t?o+"."+l:o+"["+l+"]"]=i[l]}}}return n},e.prototype.filterByRegexp=function(e,t){return e&&e.length?e.filter(function(e){var n=e.match(t);return n&&n.length}):[]},e.prototype.filterEnabledSites=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var i=[],l=[],a=function(r){var a=e[r];!n&&i.length||i.push(Promise.resolve(t.apply(t,[a].concat(o))).then(function(e){e&&l.push(a)}))};for(var s in e)a(s);return this.allPromises(i).catch(function(){}).then(function(){return n?l:l.length?e:[]})},e.prototype.formatFloat=function(e){if(void 0===e||null===e||"boolean"==typeof e)return"";var t=this.translate.instant("core.decsep");return(e+="").replace(".",t)},e.prototype.formatTree=function(e,t,n,o,r){void 0===t&&(t="parent"),void 0===n&&(n="id"),void 0===o&&(o=0),void 0===r&&(r=5);var i,l,a={},s={},u=[];return e.forEach(function(c,d){if(l=c[n],i=c[t],c.children=[],a[l]=d,i!=o){var f=e[a[i]];if(f)if(s[i]==r){var p=f[t];p&&(e[a[p]].children.push(c),s[l]=s[i],c.parent=p)}else f.children.push(c),s[l]=s[i]+1}else u.push(c),s[l]=1}),u},e.prototype.getCountryName=function(e){var t="assets.countries."+e,n=this.translate.instant(t);return n!==t?n:e},e.prototype.getCountryList=function(){var e=this;return this.getCountryKeysList().then(function(t){var n={};return t.forEach(function(t){if(0===t.indexOf("assets.countries.")){var o=t.replace("assets.countries.","");n[o]=e.translate.instant(t)}}),n})},e.prototype.getCountryListSorted=function(){return this.getCountryList().then(function(e){var t=[];return Object.keys(e).sort(function(t,n){return e[t].localeCompare(e[n])}).forEach(function(n){t.push({code:n,name:e[n]})}),t})},e.prototype.getCountryKeysList=function(){var e=this,t=this.langProvider.getDefaultLanguage();return this.getCountryKeysListForLanguage(t).catch(function(){var n=e.langProvider.getFallbackLanguage();return n===t?Promise.reject("Countries not found."):e.getCountryKeysListForLanguage(n)})},e.prototype.getCountryKeysListForLanguage=function(e){return this.langProvider.getTranslationTable(e).then(function(e){var t=[];for(var n in e)0===n.indexOf("assets.countries.")&&t.push(n);return 0===t.length?Promise.reject("Countries not found."):t})},e.prototype.getMimeTypeFromUrl=function(e){var t=this.mimetypeUtils.guessExtensionFromUrl(e),n=this.mimetypeUtils.getMimeType(t);return n?Promise.resolve(n):this.wsProvider.getRemoteFileMimeType(e).then(function(e){return e||""})},e.prototype.getUniqueId=function(e){return this.uniqueIds[e]||(this.uniqueIds[e]=0),++this.uniqueIds[e]},e.prototype.hasRepeatedFilenames=function(e){if(!e||!e.length)return!1;for(var t=[],n=0;n<e.length;n++){var o=e[n].filename||e[n].name;if(t.indexOf(o)>-1)return this.translate.instant("core.filenameexist",{$a:o});t.push(o)}return!1},e.prototype.indexOfRegexp=function(e,t){if(!e||!e.length)return-1;for(var n=0;n<e.length;n++){var o=e[n].match(t);if(o&&o.length)return n}return-1},e.prototype.isFalseOrZero=function(e){return void 0!==e&&(!1===e||"false"===e||0===parseInt(e,10))},e.prototype.isTrueOrOne=function(e){return void 0!==e&&(!0===e||"true"===e||1===parseInt(e,10))},e.prototype.isWebServiceError=function(e){return e&&(void 0!==e.warningcode||void 0!==e.errorcode&&"invalidtoken"!=e.errorcode&&"userdeleted"!=e.errorcode&&"upgraderunning"!=e.errorcode&&"forcepasswordchangenotice"!=e.errorcode&&"usernotfullysetup"!=e.errorcode&&"sitepolicynotagreed"!=e.errorcode&&"sitemaintenance"!=e.errorcode&&("accessexception"!=e.errorcode||-1==e.message.indexOf("Invalid token - token expired")))},e.prototype.makeMenuFromList=function(e,t,n,o){void 0===n&&(n=",");var r=e.split(n).map(function(e,t){return{label:e.trim(),value:t+1}});return t&&r.unshift({label:t,value:o||0}),r},e.prototype.mergeArraysWithoutDuplicates=function(e,t,n){return this.uniqueArray(e.concat(t),n)},e.prototype.openFile=function(e){var t=this,n=this.mimetypeUtils.getFileExtension(e),o=this.mimetypeUtils.getMimeType(n);try{e=decodeURIComponent(e)}catch(e){}return this.fileOpener.open(e,o).catch(function(r){return t.logger.error("Error opening file "+e+" with mimetype "+o),t.logger.error("Error: ",JSON.stringify(r)),r=!n||n.indexOf("/")>-1||n.indexOf("\\")>-1?t.translate.instant("core.erroropenfilenoextension"):t.translate.instant("core.erroropenfilenoapp"),Promise.reject(r)})},e.prototype.openInApp=function(e,t){var n=this;if(e){if((t=t||{}).enableViewPortScale||(t.enableViewPortScale="yes"),t.allowInlineMediaPlayback||(t.allowInlineMediaPlayback="yes"),!t.location&&this.platform.is("ios")&&0===e.indexOf("file://")&&(t.location="no"),this.iabInstance=this.iab.create(e,"_blank",t),this.appProvider.isDesktop()||this.appProvider.isMobile()){var o,r=[],i=this.iabInstance.on("loadstart").subscribe(function(e){n.zone.run(function(){r.push(e.url),r.length>10&&r.shift(),n.eventsProvider.trigger(p.a.IAB_LOAD_START,e)})});this.platform.is("android")&&(o=this.iabInstance.on("loadstop").subscribe(function(e){n.zone.run(function(){-1==r.indexOf(e.url)&&n.eventsProvider.trigger(p.a.IAB_LOAD_START,e)})}));var l=this.iabInstance.on("exit").subscribe(function(e){n.zone.run(function(){i.unsubscribe(),o&&o.unsubscribe(),l.unsubscribe(),n.eventsProvider.trigger(p.a.IAB_EXIT,e)})})}return this.iabInstance}},e.prototype.openInBrowser=function(e){if(this.appProvider.isDesktop()){n(131).shell.openExternal(e)||window.open(e,"_system")}else window.open(e,"_system")},e.prototype.openOnlineFile=function(e){var t=this;return this.platform.is("android")?this.getMimeTypeFromUrl(e).catch(function(){}).then(function(n){if(!n)return Promise.reject(t.translate.instant("core.erroropenfilenoextension"));return t.webIntent.startActivity({action:t.webIntent.ACTION_VIEW,url:e,type:n}).catch(function(o){return t.logger.error("Error opening online file "+e+" with mimetype "+n),t.logger.error("Error: ",JSON.stringify(o)),Promise.reject(t.translate.instant("core.erroropenfilenoapp"))})}):(this.openInApp(e),Promise.resolve())},e.prototype.objectToArray=function(e){return Object.keys(e).map(function(t){return e[t]})},e.prototype.objectToArrayOfObjects=function(e,t,n,o,r){var i=function(e,o){if(void 0!==o&&null!=o){if("object"==typeof o){var r=[];return Object.keys(o).forEach(function(t){var n=i(e?e+"["+t+"]":t,o[t]);n&&(r=r.concat(n))}),r}var l={};return l[t]=e,l[n]=o,l}};if(!e)return[];var l=i("",e);return o||r?l.sort(function(e,r){return o?e[t]>=r[t]?1:-1:e[n]>=r[n]?1:-1}):l},e.prototype.objectToKeyValueMap=function(e,t,n,o){if(e){var r=o?o.length:0,i={};return e.forEach(function(e){var o=r>0?e[t].substr(r):e[t];i[o]=e[n]}),i}},e.prototype.objectToGetParams=function(e,t){void 0===t&&(t=!0);var n=this.flattenObject(e),o="",r="";for(var i in n){var l=n[i];(!t||null!==l&&void 0!==l)&&("boolean"==typeof l&&(l=l?1:0),o+=r+i+"="+l,r="&")}return o},e.prototype.prefixKeys=function(e,t){var n={};return Object.keys(e).forEach(function(o){n[t+o]=e[o]}),n},e.prototype.promiseDefer=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},e.prototype.promiseFails=function(e){return e.then(function(){return!1}).catch(function(){return!0})},e.prototype.promiseWorks=function(e){return e.then(function(){return!0}).catch(function(){return!1})},e.prototype.sameAtKeyMissingIsBlank=function(e,t,n){var o=void 0!==e[n]?e[n]:"",r=void 0!==t[n]?t[n]:"";return"number"!=typeof o&&"boolean"!=typeof o||(o=""+o),"number"!=typeof r&&"boolean"!=typeof r||(r=""+r),o===r},e.prototype.sortAndStringify=function(e){return JSON.stringify(this.sortProperties(e))},e.prototype.sortProperties=function(e){var t=this;return null==e||"object"!=typeof e||Array.isArray(e)?e:Object.keys(e).sort().reduce(function(n,o){return n[o]=t.sortProperties(e[o]),n},{})},e.prototype.sortValues=function(e){if("object"!=typeof e||Array.isArray(e))return e;var t=this.objectToArrayOfObjects(e,"name","value",!1,!0);return this.objectToKeyValueMap(t,"name","value")},e.prototype.sumFileSizes=function(e){var t={size:0,total:!0};return e.forEach(function(e){void 0===e.filesize?t.total=!1:t.size+=e.filesize}),t},e.prototype.timeoutPromise=function(e,t){return new Promise(function(n,o){var r=setTimeout(function(){o({timeout:!0})},t);e.then(n).catch(o).finally(function(){clearTimeout(r)})})},e.prototype.unformatFloat=function(e,t){if(void 0===e)return!1;if(null==e)return"";if(e+="",""==(e=e.trim()))return"";e=(e=e.replace(" ","")).replace(this.translate.instant("core.decsep"),".");var n=parseFloat(e);return!(t&&(!isFinite(e)||isNaN(n)))&&n},e.prototype.uniqueArray=function(e,t){var n=[],o={};return e.forEach(function(e){var r=t?e[t]:e;o[r]||(o[r]=!0,n.push(e))}),n},e=v([Object(o.A)(),y("design:paramtypes",[i.a,u.a,l.a,c.a,h.a,m.c,r.v,_.a,p.a,a.a,d.a,s.a,g.a,o.M,f.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(5),i=n(79),l=n(3),a=n(11),s=n(10),u=n(126),c=n(9),d=n(6),f=n(22),p=n(57),h=n(40),m=n(565),_=n(194),g=(n.n(_),n(146)),v=(n.n(g),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,m){var _=this;this.translate=e,this.loadingCtrl=t,this.toastCtrl=n,this.alertCtrl=o,this.textUtils=r,this.appProvider=i,this.platform=l,this.configProvider=a,this.urlUtils=s,this.modalCtrl=u,this.sanitizer=c,this.popoverCtrl=d,this.fileProvider=f,this.eventsProvider=m,this.INPUT_SUPPORT_KEYBOARD=["date","datetime","datetime-local","email","month","number","password","search","tel","text","time","url","week"],this.INSTANCE_ID_ATTR_NAME="core-instance-id",this.template=document.createElement("template"),this.instances={},this.lastInstanceId=0,this.debugDisplay=!1,this.displayedAlerts={},this.logger=p.getInstance("CoreDomUtilsProvider"),a.get(h.a.SETTINGS_DEBUG_DISPLAY,!1).then(function(e){_.debugDisplay=!!e})}return e.prototype.closest=function(e,t){var n=this;if("function"==typeof e.closest)return e.closest(t);if(this.matchesFn||(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n.matchesFn=e,!0)}),this.matchesFn))for(;e;){if(e[this.matchesFn](t))return e;e=e.parentElement}},e.prototype.confirmDownloadSize=function(e,t,n,o,r,i){var l=this,a=this.textUtils.bytesToSize(e.size,2);return new Promise(function(t){l.appProvider.isDesktop()?t(null):l.fileProvider.calculateFreeSpace().then(function(t){return l.platform.is("android")?t:t<h.a.IOS_FREE_SPACE_THRESHOLD||e.size>t/2?t:null}).then(function(e){t(e)})}).then(function(t){if(null===t)return"";var n=l.textUtils.bytesToSize(t,2);return l.platform.is("android")&&e.size>t-h.a.MINIMUM_FREE_SPACE?Promise.reject(l.translate.instant("core.course.insufficientavailablespace",{size:a})):l.translate.instant("core.course.availablespace",{available:n})}).then(function(s){o=void 0===o?h.a.WIFI_DOWNLOAD_THRESHOLD:o,r=void 0===r?h.a.DOWNLOAD_THRESHOLD:r;var u="";return l.appProvider.isNetworkAccessLimited()&&(u=l.translate.instant("core.course.confirmlimiteddownload")),e.size<0||0==e.size&&!e.total?(n=n||"core.course.confirmdownloadunknownsize",l.showConfirm(u+l.translate.instant(n,{availableSpace:s}))):e.total?i||e.size>=o||l.appProvider.isNetworkAccessLimited()&&e.size>=r?(t=t||(0===e.size?"core.course.confirmdownloadzerosize":"core.course.confirmdownload"),l.showConfirm(u+l.translate.instant(t,{size:a,availableSpace:s}))):Promise.resolve():l.showConfirm(u+l.translate.instant("core.course.confirmpartialdownloadsize",{size:a,availableSpace:s}))})},e.prototype.convertToElement=function(e){return this.template.innerHTML="<div>"+e+"</div>",this.template.content.children[0]},e.prototype.createCanceledError=function(){return{coreCanceled:!0}},e.prototype.createChangesFromKeyValueDiff=function(e){var t={};return e.forEachAddedItem(function(e){t[e.key]=new o._2(e.previousValue,e.currentValue,!0)}),e.forEachChangedItem(function(e){t[e.key]=new o._2(e.previousValue,e.currentValue,!1)}),e.forEachRemovedItem(function(e){t[e.key]=new o._2(e.previousValue,e.currentValue,!0)}),t},e.prototype.extractDownloadableFilesFromHtml=function(e){this.logger.error("The function extractDownloadableFilesFromHtml has been moved to CoreFilepoolProvider. Please use that function instead of this one.");var t,n=[];t=this.convertToElement(e).querySelectorAll("a, img, audio, video, source, track");for(var o=0;o<t.length;o++){var r=t[o],i="A"===r.tagName?r.href:r.src;i&&this.urlUtils.isDownloadableUrl(i)&&-1==n.indexOf(i)&&n.push(i),"VIDEO"==r.tagName&&r.getAttribute("poster")&&(i=r.getAttribute("poster"))&&this.urlUtils.isDownloadableUrl(i)&&-1==n.indexOf(i)&&n.push(i)}return n},e.prototype.extractDownloadableFilesFromHtmlAsFakeFileObjects=function(e){return this.extractDownloadableFilesFromHtml(e).map(function(e){return{fileurl:e}})},e.prototype.extractUrlsFromCSS=function(e){var t=[],n=e.match(/url\(\s*["']?(?!data:)([^)]+)\)/gim);return n?(n.forEach(function(e){var n=e.match(/url\(\s*['"]?([^'"]*)['"]?\s*\)/im);n&&n[1]&&t.push(n[1])}),t):t},e.prototype.fixHtml=function(e){this.template.innerHTML=e;var t=/[^\x00-\x20\x7F-\x9F"'>\/=]+/,n=function(e){Array.from(e.attributes).forEach(function(n){t.test(n.name)||e.removeAttributeNode(n)}),Array.from(e.children).forEach(n)};return Array.from(this.template.content.children).forEach(n),this.template.innerHTML},e.prototype.focusElement=function(e){e&&e.focus&&(e.focus(),this.platform.is("android")&&this.supportsInputKeyboard(e)&&this.appProvider.openKeyboard())},e.prototype.formatPixelsSize=function(e){return"string"==typeof e&&(e.indexOf("px")>-1||e.indexOf("%")>-1||"auto"==e||"initial"==e)?e:(e=parseInt(e,10),isNaN(e)?"":e+"px")},e.prototype.getContentsOfElement=function(e,t){if(e){var n=e.querySelector(t);if(n)return n.innerHTML}},e.prototype.getDataFromForm=function(e){if(!e||!e.elements)return{};for(var t={},n=0;n<e.elements.length;n++){var o=e.elements[n],r=o.name||"";r&&"submit"!=o.type&&"BUTTON"!=o.tagName&&("checkbox"==o.type?t[r]=!!o.checked:"radio"==o.type?o.checked&&(t[r]=o.value):t[r]=o.value)}return t},e.prototype.getHTMLElementAttribute=function(e,t){return this.convertToElement(e).children[0].getAttribute("src")},e.prototype.getElementHeight=function(e,t,n,o,r){return this.getElementMeasure(e,!1,t,n,o,r)},e.prototype.getElementMeasure=function(e,t,n,o,r,i){var l=t?"offsetWidth":"offsetHeight",a=t?"width":"height",s=t?"clientWidth":"clientHeight",u=t?"Left":"Top",c=t?"Right":"Bottom",d=e[l]||e[a]||e[s]||0;if(d<=0){var f=getComputedStyle(e);f&&""==f.display&&(e.style.display="inline-block",d=e[l]||e[a]||e[s]||0,e.style.display="")}if(n||o||r){var p=getComputedStyle(e),h=0;n&&(h+=this.getComputedStyleMeasure(p,"padding"+u)+this.getComputedStyleMeasure(p,"padding"+c)),o&&(h+=this.getComputedStyleMeasure(p,"margin"+u)+this.getComputedStyleMeasure(p,"margin"+c)),r&&(h+=this.getComputedStyleMeasure(p,"border"+u+"Width")+this.getComputedStyleMeasure(p,"border"+c+"Width")),i?d=d>h?d-h:0:d+=h}return d},e.prototype.getComputedStyleMeasure=function(e,t){return parseInt(e[t],10)||0},e.prototype.getConnectionWarningIconHtml=function(){return'<div text-center><span class="core-icon-with-badge"><ion-icon role="img" class="icon fa fa-wifi" aria-label="wifi"></ion-icon><ion-icon class="icon fa fa-exclamation-triangle core-icon-badge"></ion-icon></span></div>'},e.prototype.getElementWidth=function(e,t,n,o,r){return this.getElementMeasure(e,!0,t,n,o,r)},e.prototype.getElementXY=function(e,t,n){var o,r=t?e.querySelector(t):e,i=0,l=0;if(n||(n="scroll-content"),!r)return null;for(;r;){for(l+=r.offsetLeft-r.scrollLeft+r.clientLeft,i+=r.offsetTop-r.scrollTop+r.clientTop,o=r.offsetParent,r=r.parentElement;o!=r&&r;)r=-1!=r.className.indexOf(n)?null:r.parentElement;r&&-1!=r.className.indexOf(n)&&(r=null)}return[l,i]},e.prototype.getErrorTitle=function(e){return e==this.translate.instant("core.networkerrormsg")||e==this.translate.instant("core.fileuploader.errormustbeonlinetoupload")?this.sanitizer.bypassSecurityTrustHtml(this.getConnectionWarningIconHtml()):this.textUtils.decodeHTML(this.translate.instant("core.error"))},e.prototype.getErrorMessage=function(e,t){var n="";if("object"==typeof e){if(this.debugDisplay&&(e.debuginfo&&(n="<br><br>"+this.textUtils.escapeHTML(e.debuginfo)),e.backtrace&&(n+="<br><br>"+this.textUtils.replaceNewLines(this.textUtils.escapeHTML(e.backtrace),"<br>")),console.error(e)),e.coreCanceled)return null;(e=this.textUtils.getErrorMessageFromError(e))||(e=JSON.stringify(e),n="");var o=e.match(/token"?[=|:]"?(\w*)/,"");o&&o[1]&&(e=e.replace(new RegExp(o[1],"g"),"secret"))}if(e==h.a.DONT_SHOW_ERROR)return null;var r=this.textUtils.decodeHTML(t?this.translate.instant(e):e);return n&&(r+=n),r},e.prototype.getInstanceByElement=function(e){var t=e.getAttribute(this.INSTANCE_ID_ATTR_NAME);return this.instances[t]},e.prototype.waitElementToExist=function(e){var t={promise:null,resolve:null,reject:null},n=100;t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n});var o=setInterval(function(){var r=e();r?(clearInterval(o),t.resolve(r)):--n<=0&&(clearInterval(o),t.reject())},100);return t.promise},e.prototype.handleBootstrapTooltips=function(e){var t=this;Array.from(e.querySelectorAll('[data-toggle="tooltip"]')).forEach(function(e){var n=e.getAttribute("title")||e.getAttribute("data-original-title"),o=e.getAttribute("data-trigger")||"hover focus",r=e.getAttribute("data-bstooltip-treated");!n||"true"===r||-1==o.indexOf("hover")&&-1==o.indexOf("focus")&&-1==o.indexOf("click")||(e.setAttribute("data-bstooltip-treated","true"),e.setAttribute("data-original-title",n),e.setAttribute("title",""),e.addEventListener("click",function(o){var r=e.getAttribute("data-html");t.popoverCtrl.create(m.a,{content:n,html:"true"===r}).present({ev:o})}))})},e.prototype.isElementOutsideOfScreen=function(e,t){var n,o,r=t.getBoundingClientRect(),i=0;return!!r&&(n=Math.round((r.bottom+r.top)/2),o=e.getBoundingClientRect(),i=o&&o.top||0,n>window.innerHeight||n<i)},e.prototype.isRichTextEditorEnabled=function(){return this.isRichTextEditorSupported()?this.configProvider.get(h.a.SETTINGS_RICH_TEXT_EDITOR,!0).then(function(e){return!!e}):Promise.resolve(!1)},e.prototype.isRichTextEditorSupported=function(){return!0},e.prototype.moveChildren=function(e,t,n){for(var o=[],r=n?t.firstChild:null;e.childNodes.length>0;){var i=e.childNodes[0];o.push(i),t.insertBefore(i,r)}return o},e.prototype.removeElement=function(e,t){if(e){var n=e.querySelector(t);n&&n.remove()}},e.prototype.removeElementFromHtml=function(e,t,n){var o,r=this.convertToElement(e);if(n){o=r.querySelectorAll(t);for(var i=0;i<o.length;i++)o[i].remove()}else(o=r.querySelector(t))&&o.remove();return r.innerHTML},e.prototype.removeInstanceByElement=function(e){var t=e.getAttribute(this.INSTANCE_ID_ATTR_NAME);delete this.instances[t]},e.prototype.removeInstanceById=function(e){delete this.instances[e]},e.prototype.replaceClassesInElement=function(e,t){for(var n in t)for(var o=e.querySelectorAll("."+n),r=0;r<o.length;r++){var i=o[r];i.className=i.className.replace(n,t[n])}},e.prototype.restoreSourcesInHtml=function(e,t,n){var o=this,r=this.convertToElement(e);return Array.from(r.querySelectorAll("img, video, audio, source, track")).forEach(function(e){var n=t[o.textUtils.decodeURIComponent(e.getAttribute("src"))];void 0!==n&&e.setAttribute("src",n),"VIDEO"==e.tagName&&e.getAttribute("poster")&&void 0!==(n=t[o.textUtils.decodeURIComponent(e.getAttribute("poster"))])&&e.setAttribute("poster",n)}),Array.from(r.querySelectorAll("a")).forEach(function(e){var r=o.textUtils.decodeURIComponent(e.getAttribute("href")),i=t[r];void 0!==i&&(e.setAttribute("href",i),"function"==typeof n&&n(e,r))}),r.innerHTML},e.prototype.scrollTo=function(e,t,n,o,r){return e&&e._scroll&&e.scrollTo(t,n,o,r)},e.prototype.scrollToBottom=function(e,t){return e&&e._scroll&&e.scrollToBottom(t)},e.prototype.scrollToTop=function(e,t){return e&&e._scroll&&e.scrollToTop(t)},e.prototype.getContentHeight=function(e){return e&&e._scroll&&e.contentHeight||0},e.prototype.getScrollHeight=function(e){return e&&e._scroll&&e.scrollHeight||0},e.prototype.getScrollTop=function(e){return e&&e._scroll&&e.scrollTop||0},e.prototype.scrollToElement=function(e,t,n){var o=this.getElementXY(t,void 0,n);return!!o&&(this.scrollTo(e,o[0],o[1]),!0)},e.prototype.scrollToElementBySelector=function(e,t,n){var o=this.getElementXY(e.getScrollElement(),t,n);return!!o&&(this.scrollTo(e,o[0],o[1]),!0)},e.prototype.scrollToInputError=function(e,t){return!!e&&this.scrollToElementBySelector(e,".core-input-error",t)},e.prototype.setDebugDisplay=function(e){this.debugDisplay=e},e.prototype.showAlert=function(e,t,n,o){var r=this,i=this.textUtils.hasHTMLTags(t);return(i?this.textUtils.formatText(t):Promise.resolve(t)).then(function(t){var l=_.Md5.hashAsciiStr((e||"")+"#"+(t||""));if(r.displayedAlerts[l])return r.displayedAlerts[l];var a=r.alertCtrl.create({title:e,message:t,buttons:[n||r.translate.instant("core.ok")]});return a.present().then(function(){if(i){var e=a.pageRef().nativeElement.querySelector(".alert-message");r.treatAnchors(e)}}),r.displayedAlerts[l]=a,a.didDismiss=new g.Subject,a.willDismiss=new g.Subject,a.onDidDismiss(function(e,t){delete r.displayedAlerts[l],a.didDismiss.next({data:e,role:t})}),a.onWillDismiss(function(e,t){a.willDismiss.next({data:e,role:t})}),o>0&&setTimeout(function(){a.dismiss()},o),a})},e.prototype.showAlertTranslated=function(e,t,n,o){return e=e?this.translate.instant(e):e,t=t?this.translate.instant(t):t,n=n?this.translate.instant(n):n,this.showAlert(e,t,n,o)},e.prototype.showDeleteConfirm=function(e,t,n){return void 0===e&&(e="core.areyousure"),void 0===t&&(t={}),this.showConfirm(this.translate.instant(e,t),void 0,this.translate.instant("core.delete"),void 0,n)},e.prototype.showConfirm=function(e,t,n,o,r){var i=this;return new Promise(function(l,a){var s=i.textUtils.hasHTMLTags(e);(s?i.textUtils.formatText(e):Promise.resolve(e)).then(function(e){(r=r||{}).message=e,r.title=t,t||(r.cssClass="core-nohead"),r.buttons=[{text:o||i.translate.instant("core.cancel"),role:"cancel",handler:function(){a(i.createCanceledError())}},{text:n||i.translate.instant("core.ok"),handler:function(e){l(e)}}];var u=i.alertCtrl.create(r);u.present().then(function(){if(s){var e=u.pageRef().nativeElement.querySelector(".alert-message");i.treatAnchors(e)}})})})},e.prototype.showErrorModal=function(e,t,n){var o=this.getErrorMessage(e,t);return null===o?Promise.resolve(null):this.showAlert(this.getErrorTitle(o),o,void 0,n)},e.prototype.showErrorModalDefault=function(e,t,n,o){if(!e||!e.coreCanceled){var r=e;return e&&"string"!=typeof e&&(r=this.textUtils.getErrorMessageFromError(e)),this.showErrorModal("string"==typeof r?e:t,n,o)}},e.prototype.showErrorModalFirstWarning=function(e,t,n,o){return this.showErrorModalDefault(e&&e.length&&e[0].message,t,n,o)},e.prototype.showModalLoading=function(e,t){e?t&&(e=this.translate.instant(e)):e=this.translate.instant("core.loading");var n=this.loadingCtrl.create({content:e}),o=n.dismiss.bind(n),r=!1,i=!1;return n.dismiss=function(e,t,n){return!r||i?(i=!0,Promise.resolve()):(i=!0,o(e,t,n))},setTimeout(function(){i||(r=!0,n.present())},40),n},e.prototype.showPrompt=function(e,t,n,o){var r=this;return void 0===o&&(o="password"),new Promise(function(i,l){var a=r.textUtils.hasHTMLTags(e);(a?r.textUtils.formatText(e):Promise.resolve(e)).then(function(e){var s=r.alertCtrl.create({message:e,title:t,inputs:[{name:"promptinput",placeholder:n||r.translate.instant("core.login.password"),type:o}],buttons:[{text:r.translate.instant("core.cancel"),role:"cancel",handler:function(){l()}},{text:r.translate.instant("core.ok"),handler:function(e){i(e.promptinput)}}]});s.present().then(function(){if(a){var e=s.pageRef().nativeElement.querySelector(".alert-message");r.treatAnchors(e)}})})})},e.prototype.showToast=function(e,t,n,o,r){void 0===n&&(n=2e3),void 0===o&&(o=""),void 0===r&&(r=!0),t&&(e=this.translate.instant(e));var i=this.toastCtrl.create({message:e,duration:n,position:"bottom",cssClass:o,dismissOnPageChange:r});return i.present(),i},e.prototype.storeInstanceByElement=function(e,t){var n=String(this.lastInstanceId++);return e.setAttribute(this.INSTANCE_ID_ATTR_NAME,n),this.instances[n]=t,n},e.prototype.supportsInputKeyboard=function(e){return e&&!e.disabled&&("textarea"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&-1!=this.INPUT_SUPPORT_KEYBOARD.indexOf(e.type))},e.prototype.toDom=function(e){return this.convertToElement(e).children},e.prototype.treatAnchors=function(e){var t=this;Array.from(e.querySelectorAll("a")).forEach(function(e){e.addEventListener("click",function(o){if(!o.defaultPrevented){var r=e.getAttribute("href");if(r)if(o.preventDefault(),o.stopPropagation(),t.appProvider.isDesktop()){n(131).shell.openExternal(r)||window.open(r,"_system")}else window.open(r,"_system")}})})},e.prototype.viewImage=function(e,t,n,o){if(e){this.modalCtrl.create("CoreViewerImagePage",{title:t,image:e,component:n,componentId:o}).present()}},e.prototype.waitForImages=function(e){var t=[],n=!1;return Array.from(e.querySelectorAll("img")).forEach(function(e){e&&!e.complete&&(n=!0,t.push(new Promise(function(t,n){var o=function(){t(),e.removeEventListener("load",o),e.removeEventListener("error",o)};e.addEventListener("load",o),e.addEventListener("error",o)})))}),Promise.all(t).then(function(){return n})},e.prototype.wrapElement=function(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)},e.prototype.triggerFormCancelledEvent=function(e,t){this.eventsProvider.trigger(c.a.FORM_ACTION,{action:"cancel",form:e},t)},e.prototype.triggerFormSubmittedEvent=function(e,t,n){this.eventsProvider.trigger(c.a.FORM_ACTION,{action:"submit",form:e,online:!!t},n)},e=v([Object(o.A)(),y("design:paramtypes",[l.c,r.n,r.F,r.b,a.a,s.a,r.v,u.a,f.a,r.q,i.c,r.w,p.a,d.a,c.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(14),i=(n.n(r),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.enabled=!0}return e.prototype.getInstance=function(e){return e=e||"",{log:this.prepareLogFn(console.log.bind(console),e),info:this.prepareLogFn(console.info.bind(console),e),warn:this.prepareLogFn(console.warn.bind(console),e),debug:this.prepareLogFn(console.debug.bind(console),e),error:this.prepareLogFn(console.error.bind(console),e)}},e.prototype.prepareLogFn=function(e,t){var n=this;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(n.enabled){var l=r().format("l LTS");o[0]=l+" "+t+": "+o[0],e.apply(null,o)}}},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(146),i=(n.n(r),n(6)),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.observables={},this.uniqueEvents={},this.logger=e.getInstance("CoreEventsProvider")}return e.prototype.on=function(e,t,n){var o=this;if(this.uniqueEvents[e])return t(this.uniqueEvents[e].data),{off:function(){}};this.logger.debug("New observer listening to event '"+e+"'"),void 0===this.observables[e]&&(this.observables[e]=new r.Subject);var i=this.observables[e].subscribe(function(e){n&&e.siteId!=n||t(e)});return{off:function(){o.logger.debug("Stop listening to event '"+e+"'"),i.unsubscribe()}}},e.prototype.trigger=function(e,t,n){this.logger.debug("Event '"+e+"' triggered."),this.observables[e]&&(n&&(t||(t={}),t.siteId=n),this.observables[e].next(t))},e.prototype.triggerUnique=function(e,t,n){this.uniqueEvents[e]?this.logger.debug("Unique event '"+e+"' ignored because it was already triggered."):(this.logger.debug("Unique event '"+e+"' triggered."),n&&(t||(t={}),t.siteId=n),this.uniqueEvents[e]={data:t},this.observables[e]&&this.observables[e].next(t))},e.SESSION_EXPIRED="session_expired",e.PASSWORD_CHANGE_FORCED="password_change_forced",e.USER_NOT_FULLY_SETUP="user_not_fully_setup",e.SITE_POLICY_NOT_AGREED="site_policy_not_agreed",e.LOGIN="login",e.LOGOUT="logout",e.LANGUAGE_CHANGED="language_changed",e.NOTIFICATION_SOUND_CHANGED="notification_sound_changed",e.SITE_ADDED="site_added",e.SITE_UPDATED="site_updated",e.SITE_DELETED="site_deleted",e.COMPLETION_MODULE_VIEWED="completion_module_viewed",e.USER_DELETED="user_deleted",e.PACKAGE_STATUS_CHANGED="package_status_changed",e.COURSE_STATUS_CHANGED="course_status_changed",e.SECTION_STATUS_CHANGED="section_status_changed",e.SITE_PLUGINS_LOADED="site_plugins_loaded",e.SITE_PLUGINS_COURSE_RESTRICT_UPDATED="site_plugins_course_restrict_updated",e.LOGIN_SITE_CHECKED="login_site_checked",e.LOGIN_SITE_UNCHECKED="login_site_unchecked",e.IAB_LOAD_START="inappbrowser_load_start",e.IAB_EXIT="inappbrowser_exit",e.APP_LAUNCHED_URL="app_launched_url",e.FILE_SHARED="file_shared",e.KEYBOARD_CHANGE="keyboard_change",e.CORE_LOADING_CHANGED="core_loading_changed",e.ORIENTATION_CHANGE="orientation_change",e.LOAD_PAGE_MAIN_MENU="load_page_main_menu",e.SEND_ON_ENTER_CHANGED="send_on_enter_changed",e.MAIN_MENU_OPEN="main_menu_open",e.SELECT_COURSE_TAB="select_course_tab",e.WS_CACHE_INVALIDATED="ws_cache_invalidated",e.SITE_STORAGE_DELETED="site_storage_deleted",e.FORM_ACTION="form_action",e=l([Object(o.A)(),a("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(348),l=n(185),a=n(554),s=n(427),u=n(6),c=n(9),d=n(116),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},_=function(){function e(e,n,o,r,i,l,a,s,u,d){var f=this;this.platform=n,this.keyboard=o,this.appCtrl=r,this.network=i,this.events=a,this.menuCtrl=u,this.statusBar=d,this.DBNAME="MoodleMobile",this.isKeyboardShown=!1,this.backActions=[],this.mainMenuId=0,this.forceOffline=!1,this.SCHEMA_VERSIONS_TABLE="schema_versions",this.versionsTableSchema={name:this.SCHEMA_VERSIONS_TABLE,columns:[{name:"name",type:"TEXT",primaryKey:!0},{name:"version",type:"INTEGER"}]},this.logger=l.getInstance("CoreAppProvider"),this.db=e.getDB(this.DBNAME),this.createVersionsTableReady=this.db.createTableFromSchema(this.versionsTableSchema),this.keyboard.onKeyboardShow().subscribe(function(e){s.run(function(){document.body.classList.add("keyboard-is-open"),f.isKeyboardShown=!0,a.trigger(c.a.KEYBOARD_CHANGE,e.keyboardHeight)})}),this.keyboard.onKeyboardHide().subscribe(function(e){s.run(function(){document.body.classList.remove("keyboard-is-open"),f.isKeyboardShown=!1,a.trigger(c.a.KEYBOARD_CHANGE,0)})}),this.platform.registerBackButtonAction(function(){f.backButtonAction()},100),t.isAutomated()&&(window.appProvider=this)}return t=e,e.prototype.canGetUserMedia=function(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)},e.prototype.canRecordMedia=function(){return!!window.MediaRecorder},e.prototype.closeKeyboard=function(){this.isMobile()&&this.keyboard.hide()},e.prototype.createTablesFromSchema=function(e){return h(this,void 0,void 0,function(){var t,n;return m(this,function(o){switch(o.label){case 0:this.logger.debug("Apply schema to app DB: "+e.name),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.createVersionsTableReady];case 2:return o.sent(),[4,this.db.getRecord(this.SCHEMA_VERSIONS_TABLE,{name:e.name})];case 3:return n=o.sent(),t=n.version,[3,5];case 4:return o.sent(),t=0,[3,5];case 5:return t>=e.version?[2]:(this.logger.debug("Migrating schema '"+e.name+"' of app DB from version "+t+" to "+e.version),e.tables?[4,this.db.createTablesFromSchema(e.tables)]:[3,7]);case 6:o.sent(),o.label=7;case 7:return e.migrate?[4,e.migrate(this.db,t)]:[3,9];case 8:o.sent(),o.label=9;case 9:return[4,this.db.insertRecord(this.SCHEMA_VERSIONS_TABLE,{name:e.name,version:e.version})];case 10:return o.sent(),[2]}})})},e.prototype.getDB=function(){return this.db},e.prototype.getMainMenuId=function(){return this.mainMenuId++},e.prototype.getRootNavController=function(){return this.appCtrl.getRootNavs()[0]},e.isAutomated=function(){return!!navigator.webdriver},e.prototype.is64Bits=function(){var e=window.process;return this.isDesktop()&&"x64"==e.arch},e.prototype.isAndroid=function(){return this.platform.is("android")},e.prototype.isDesktop=function(){var e=window.process;return!(!e||!e.versions||void 0===e.versions.electron)},e.prototype.isIOS=function(){return this.platform.is("ios")},e.prototype.isKeyboardVisible=function(){return this.isKeyboardShown},e.prototype.isLinux=function(){if(!this.isDesktop())return!1;try{return 0===n(564).platform().indexOf("linux")}catch(e){return!1}},e.prototype.isMac=function(){if(!this.isDesktop())return!1;try{return 0===n(564).platform().indexOf("darwin")}catch(e){return!1}},e.prototype.isMainMenuOpen=function(){return void 0!==this.mainMenuOpen},e.prototype.isMobile=function(){return this.platform.is("cordova")},e.prototype.isWide=function(){return this.platform.width()>768},e.prototype.isOnline=function(){if(this.forceOffline)return!1;var e=null!==this.network.type&&this.network.type!=Connection.NONE&&this.network.type!=Connection.UNKNOWN;return!e&&navigator.onLine&&(e=!0),e},e.prototype.isNetworkAccessLimited=function(){var e=this.network.type;if(null===e)return!1;return[Connection.CELL_2G,Connection.CELL_3G,Connection.CELL_4G,Connection.CELL].indexOf(e)>-1},e.prototype.isWifi=function(){return this.isOnline()&&!this.isNetworkAccessLimited()},e.prototype.isWindows=function(){if(!this.isDesktop())return!1;try{return 0===n(564).platform().indexOf("win")}catch(e){return!1}},e.prototype.openKeyboard=function(){this.isMobile()&&!this.platform.is("ios")&&this.keyboard.show()},e.prototype.setMainMenuOpen=function(e,t){t?(this.mainMenuOpen=e,this.events.trigger(c.a.MAIN_MENU_OPEN)):this.mainMenuOpen==e&&delete this.mainMenuOpen},e.prototype.startSSOAuthentication=function(){var e,t,n=this;this.ssoAuthenticationPromise=new Promise(function(o,r){t=o,e=setTimeout(function(){n.finishSSOAuthentication()},1e4)}),this.ssoAuthenticationPromise.resolve=t,this.ssoAuthenticationPromise.then(function(){clearTimeout(e)})},e.prototype.finishSSOAuthentication=function(){this.ssoAuthenticationPromise&&(this.ssoAuthenticationPromise.resolve&&this.ssoAuthenticationPromise.resolve(),this.ssoAuthenticationPromise=void 0)},e.prototype.isSSOAuthenticationOngoing=function(){return!!this.ssoAuthenticationPromise},e.prototype.waitForSSOAuthentication=function(){return this.ssoAuthenticationPromise||Promise.resolve()},e.prototype.getRedirect=function(){if(localStorage&&localStorage.getItem)try{var e={siteId:localStorage.getItem("CoreRedirectSiteId"),page:localStorage.getItem("CoreRedirectState"),params:localStorage.getItem("CoreRedirectParams"),timemodified:parseInt(localStorage.getItem("CoreRedirectTime"),10)};return e.params&&(e.params=JSON.parse(e.params)),e}catch(e){this.logger.error("Error loading redirect data:",e)}return{}},e.prototype.storeRedirect=function(e,t,n){if(localStorage&&localStorage.setItem)try{localStorage.setItem("CoreRedirectSiteId",e),localStorage.setItem("CoreRedirectState",t),localStorage.setItem("CoreRedirectParams",JSON.stringify(n)),localStorage.setItem("CoreRedirectTime",String(Date.now()))}catch(e){}},e.prototype.backButtonAction=function(){for(var e=0;e<this.backActions.length&&!(this.backActions[e].priority<1e3);e++)if(this.backActions[e].fn())return;if(this.menuCtrl&&this.menuCtrl.isOpen())this.menuCtrl.close();else{for(;e<this.backActions.length&&!(this.backActions[e].priority<500);e++)if(this.backActions[e].fn())return;if(!this.appCtrl.navPop()){for(;e<this.backActions.length;e++)if(this.backActions[e].fn())return;this.appCtrl.goBack()}}},e.prototype.registerBackButtonAction=function(e,t){var n=this;void 0===t&&(t=0);var o={fn:e,priority:t};return this.backActions.push(o),this.backActions.sort(function(e,t){return t.priority-e.priority}),function(){var e=n.backActions.indexOf(o);return e>=0&&!!n.backActions.splice(e,1)}},e.prototype.setStatusBarColor=function(){"string"==typeof d.a.statusbarbgios&&this.platform.is("ios")?(this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString(d.a.statusbarbgios),d.a.statusbarlighttextios?this.statusBar.styleLightContent():this.statusBar.styleDefault()):"string"==typeof d.a.statusbarbgandroid&&this.platform.is("android")?(this.statusBar.backgroundColorByHexString(d.a.statusbarbgandroid),d.a.statusbarlighttextandroid?this.statusBar.styleLightContent():this.statusBar.styleDefault()):"string"==typeof d.a.statusbarbg?(this.platform.is("ios")&&this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString(d.a.statusbarbg),d.a.statusbarlighttext?this.statusBar.styleLightContent():this.statusBar.styleDefault()):this.platform.is("android")?this.statusBar.styleLightContent():this.statusBar.styleDefault()},e.prototype.resetStatusBarColor=function(){"string"==typeof d.a.statusbarbgremotetheme&&("string"==typeof d.a.statusbarbgios&&this.platform.is("ios")||"string"==typeof d.a.statusbarbgandroid&&this.platform.is("android")||"string"==typeof d.a.statusbarbg)&&(this.platform.is("ios")&&this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString(d.a.statusbarbgremotetheme),d.a.statusbarlighttextremotetheme?this.statusBar.styleLightContent():this.statusBar.styleDefault())},e.prototype.setForceOffline=function(e){this.forceOffline=!!e},e=t=f([Object(o.A)(),p("design:paramtypes",[s.a,r.v,i.a,r.c,l.a,u.a,c.a,o.M,r.p,a.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(79),i=n(5),l=n(3),a=n(150),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o,r){this.translate=e,this.langProvider=t,this.modalCtrl=n,this.sanitizer=o,this.platform=r,this.DISABLED_FEATURES_COMPAT_REGEXPS=[{old:/\$mmLoginEmailSignup/g,new:"CoreLoginEmailSignup"},{old:/\$mmSideMenuDelegate/g,new:"CoreMainMenuDelegate"},{old:/\$mmCoursesDelegate/g,new:"CoreCourseOptionsDelegate"},{old:/\$mmUserDelegate/g,new:"CoreUserDelegate"},{old:/\$mmCourseDelegate/g,new:"CoreCourseModuleDelegate"},{old:/_mmCourses/g,new:"_CoreCourses"},{old:/_mmaFrontpage/g,new:"_CoreSiteHome"},{old:/_mmaGrades/g,new:"_CoreGrades"},{old:/_mmaCompetency/g,new:"_AddonCompetency"},{old:/_mmaNotifications/g,new:"_AddonNotifications"},{old:/_mmaMessages/g,new:"_AddonMessages"},{old:/_mmaCalendar/g,new:"_AddonCalendar"},{old:/_mmaFiles/g,new:"_AddonFiles"},{old:/_mmaParticipants/g,new:"_CoreUserParticipants"},{old:/_mmaCourseCompletion/g,new:"_AddonCourseCompletion"},{old:/_mmaNotes/g,new:"_AddonNotes"},{old:/_mmaBadges/g,new:"_AddonBadges"},{old:/files_privatefiles/g,new:"AddonFilesPrivateFiles"},{old:/files_sitefiles/g,new:"AddonFilesSiteFiles"},{old:/files_upload/g,new:"AddonFilesUpload"},{old:/_mmaModAssign/g,new:"_AddonModAssign"},{old:/_mmaModBook/g,new:"_AddonModBook"},{old:/_mmaModChat/g,new:"_AddonModChat"},{old:/_mmaModChoice/g,new:"_AddonModChoice"},{old:/_mmaModData/g,new:"_AddonModData"},{old:/_mmaModFeedback/g,new:"_AddonModFeedback"},{old:/_mmaModFolder/g,new:"_AddonModFolder"},{old:/_mmaModForum/g,new:"_AddonModForum"},{old:/_mmaModGlossary/g,new:"_AddonModGlossary"},{old:/_mmaModImscp/g,new:"_AddonModImscp"},{old:/_mmaModLabel/g,new:"_AddonModLabel"},{old:/_mmaModLesson/g,new:"_AddonModLesson"},{old:/_mmaModLti/g,new:"_AddonModLti"},{old:/_mmaModPage/g,new:"_AddonModPage"},{old:/_mmaModQuiz/g,new:"_AddonModQuiz"},{old:/_mmaModResource/g,new:"_AddonModResource"},{old:/_mmaModScorm/g,new:"_AddonModScorm"},{old:/_mmaModSurvey/g,new:"_AddonModSurvey"},{old:/_mmaModUrl/g,new:"_AddonModUrl"},{old:/_mmaModWiki/g,new:"_AddonModWiki"},{old:/_mmaModWorkshop/g,new:"_AddonModWorkshop"},{old:/remoteAddOn_/g,new:"sitePlugin_"}],this.template=document.createElement("template")}return e.prototype.addEndingSlash=function(e){return e?"/"!=e.slice(-1)?e+"/":e:""},e.prototype.buildAddressURL=function(e){return this.sanitizer.bypassSecurityTrustUrl((this.platform.is("android")?"geo:0,0?q=":"http://maps.google.com?q=")+encodeURIComponent(e))},e.prototype.buildMessage=function(e){var t="";return e.forEach(function(e){e&&(t+="<p>"+e+"</p>")}),t},e.prototype.buildSeveralParagraphsMessage=function(e){var t=this,n=[];if(e.forEach(function(e){var o=t.getErrorMessageFromError(e);e&&n.push(o)}),n.length<2)return n[0]||"";for(var o=n[0],r=1;r<n.length;r++)o=this.translate.instant("core.twoparagraphs",{p1:o,p2:n[r]});return o},e.prototype.bytesToSize=function(e,t){if(void 0===t&&(t=2),void 0===e||null===e||e<0)return this.translate.instant("core.notapplicable");t<0&&(t=2);var n=["core.sizeb","core.sizekb","core.sizemb","core.sizegb","core.sizetb"],o=this.translate.instant(n),r=0;if(e>=1024){for(;e>=1024;)r++,e/=1024;e=Number(Math.round(parseFloat(e+"e+"+t))+"e-"+t)}return this.translate.instant("core.humanreadablesize",{size:e,unit:o[n[r]]})},e.prototype.cleanTags=function(e,t){if("string"!=typeof e)return e;if(!e)return"";e=e.replace(/(<([^>]+)>)/gi,"");return e=this.convertToElement(e).textContent,e=this.replaceNewLines(e,t?" ":"<br>")},e.prototype.concatenatePaths=function(e,t){if(!e)return t;if(!t)return e;var n=e.slice(-1),o=t.charAt(0);return"/"===n&&"/"===o?e+t.substr(1):"/"!==n&&"/"!==o?e+"/"+t:e+t},e.prototype.convertToElement=function(e){return this.template.innerHTML="<div>"+e+"</div>",this.template.content.children[0]},e.prototype.countWords=function(e){if(!e||"string"!=typeof e)return 0;var t=["address","article","aside","blockquote","br"," details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","ul"];return e=e.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,""),e=e.replace(/<(\/[ ]*)?([a-zA-Z0-9]+)[^>]*>/gi,function(e,n,o){return t.indexOf(o)>=0?" ":""}),e=this.decodeHTMLEntities(e),(e=e.replace(/_/gi," ")).match(/\S+/gi).length},e.prototype.decodeHTML=function(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"":"string"!=typeof e?""+e:e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&nbsp;/g," ")},e.prototype.decodeHTMLEntities=function(e){if(e){e=this.convertToElement(e).textContent}return e},e.prototype.decodeURI=function(e){try{return decodeURI(e)}catch(e){}return e},e.prototype.decodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(e){}return e},e.prototype.escapeForRegex=function(e){return e&&"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},e.prototype.escapeHTML=function(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"":"string"!=typeof e?""+e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},e.prototype.expandText=function(e,t,n,o,r,i,l,a,s){if(t.length>0){var u={title:e,content:t,component:n,componentId:o,files:r,filter:i,contextLevel:l,instanceId:a,courseId:s};u.isModal=!0;this.modalCtrl.create("CoreViewerTextPage",u).present()}},e.prototype.formatHtmlLines=function(e){var t=this.hasHTMLTags(e);return-1==e.indexOf("<p>")&&(e="<p>"+e+"</p>"),t?e:this.replaceNewLines(e,"<br>")},e.prototype.formatText=function(e,t,n,o,r){var i=this;return this.treatMultilangTags(e).then(function(e){return t&&(e=i.cleanTags(e,n)),o>0&&(e=i.shortenText(e,o)),r&&(e=i.highlightText(e,r)),e})},e.prototype.getErrorMessageFromError=function(e){return"string"==typeof e?e:e&&(e.message||e.error||e.content||e.body)},e.prototype.getTextPluginfileUrl=function(e){if(e&&e.length){var t=e[0].url||e[0].fileurl;return t.substr(0,Math.max(t.lastIndexOf("/"),t.lastIndexOf("%2F")))}},e.prototype.hasHTMLTags=function(e){return/<[a-z][\s\S]*>/i.test(e)},e.prototype.highlightText=function(e,t){if(!e||"string"!=typeof e)return"";if(!t)return e;var n=new RegExp("("+t+")","gi");return e.replace(n,'<span class="matchtext">$1</span>')},e.prototype.htmlIsBlank=function(e){return!e||(this.template.innerHTML=e,""==this.template.content.textContent&&null===this.template.content.querySelector("img, object, hr"))},e.prototype.hasUnicode=function(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>55295)return!0;return!1},e.prototype.hasUnicodeData=function(e){for(var t in e)if("object"==typeof e[t]){if(this.hasUnicodeData(e[t]))return!0}else if("string"==typeof e[t]&&this.hasUnicode(e[t]))return!0;return!1},e.prototype.parseJSON=function(e,t,n){try{return JSON.parse(e)}catch(e){n&&n(e)}return void 0!==t?t:e},e.prototype.removeEndingSlash=function(e){return e?"/"==e.slice(-1)?e.substr(0,e.length-1):e:""},e.prototype.removeSpecialCharactersForFiles=function(e){return e&&"string"==typeof e?e.replace(/[#:\/\?\\]+/g,"_"):""},e.prototype.replaceNewLines=function(e,t){return e&&"string"==typeof e?e.replace(/(?:\r\n|\r|\n)/g,t):""},e.prototype.replacePluginfileUrls=function(e,t){if(e&&"string"==typeof e){var n=this.getTextPluginfileUrl(t);if(n)return e.replace(/@@PLUGINFILE@@/g,n)}return e},e.prototype.restorePluginfileUrls=function(e,t){if(e&&"string"==typeof e){var n=this.getTextPluginfileUrl(t);if(n)return e.replace(new RegExp(this.escapeForRegex(n),"g"),"@@PLUGINFILE@@")}return e},e.prototype.roundToDecimals=function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.round(e*n)/n},e.prototype.s=function(e){return e?this.escapeHTML(e).replace(/&amp;#(\d+|x[0-9a-f]+);/i,"&#$1;"):""},e.prototype.shortenText=function(e,t){if(e.length>t){var n=(e=e.substr(0,t)).lastIndexOf(" ");n>0&&(e=e.substr(0,n)),e+="&hellip;"}return e},e.prototype.stripUnicode=function(e){for(var t="",n=0;n<e.length;n++)e.charCodeAt(n)<=55295&&(t+=e.charAt(n));return t},e.prototype.substrReplace=function(e,t,n,o){return o=void 0!==o?o:e.length,n<0&&(n+=e.length),o<0&&(o=o+e.length-n),[e.slice(0,n),t.substr(0,o),t.slice(o),e.slice(n+o)].join("")},e.prototype.treatDisabledFeatures=function(e){if(!e)return"";for(var t=0;t<this.DISABLED_FEATURES_COMPAT_REGEXPS.length;t++){var n=this.DISABLED_FEATURES_COMPAT_REGEXPS[t];e=e.replace(n.old,n.new)}return e},e.prototype.treatMultilangTags=function(e){return e&&"string"==typeof e?this.langProvider.getCurrentLanguage().then(function(t){var n=/<(?:lang|span)[^>]+lang="[a-zA-Z0-9_-]+"[^>]*>(.*?)<\/(?:lang|span)>/g,o=new RegExp('<(?:lang|span)[^>]+lang="'+t+'"[^>]*>(.*?)</(?:lang|span)>',"g");if(!e.match(o)){var r=e.match(n);if(!r||!r[0])return e;t=r[0].match(/lang="([a-zA-Z0-9_-]+)"/)[1],o=new RegExp('<(?:lang|span)[^>]+lang="'+t+'"[^>]*>(.*?)</(?:lang|span)>',"g")}return e=e.replace(o,"$1"),e=e.replace(n,"")}):Promise.resolve("")},e.prototype.twoDigits=function(e){return e<10?"0"+e:""+e},e.prototype.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.unserialize=function(e,t){var n=function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var o=e.charCodeAt(n);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&n--}return t-1},o=function(e,n){t&&t(e+n)},r=function(e,t,n){for(var r=2,i=[],l=e.slice(t,t+1);l!==n;)r+t>e.length&&o("Error","Invalid"),i.push(l),l=e.slice(t+(r-1),t+r),r+=1;return[i.length,i.join("")]},i=function(e,t){var l,a,s,u,c,d,f,p,h,m,_,g,v,y,b,P,O=0,E=function(e){return e};switch(t||(t=0),l=e.slice(t,t+1).toLowerCase(),a=t+2,l){case"i":E=function(e){return parseInt(e,10)},p=(h=r(e,a,";"))[1],a+=(O=h[0])+1;break;case"b":E=function(e){return 0!==parseInt(e,10)},p=(h=r(e,a,";"))[1],a+=(O=h[0])+1;break;case"d":E=function(e){return parseFloat(e)},p=(h=r(e,a,";"))[1],a+=(O=h[0])+1;break;case"n":p=null;break;case"s":_=(m=r(e,a,":"))[1],p=(h=function(e,t,o){for(var r,i=[],l=0;l<o;l++)r=e.slice(t+(l-1),t+l),i.push(r),o-=n(r);return[i.length,i.join("")]}(e,(a+=(O=m[0])+2)+1,parseInt(_,10)))[1],a+=(O=h[0])+2,O!==parseInt(_,10)&&O!==p.length&&o("SyntaxError","String length mismatch");break;case"a":p={},u=(s=r(e,a,":"))[1],a+=(O=s[0])+2,d=parseInt(u,10),c=!0;for(var C=0;C<d;C++)v=(y=i(e,a))[2],P=(b=i(e,a+=y[1]))[2],a+=b[1],v!==C&&(c=!1),p[v]=P;if(c){for(f=new Array(d),g=0;g<d;g++)f[g]=p[g];p=f}a+=1;break;default:o("SyntaxError","Unknown / Unhandled data type(s): "+l)}return[l,a-t,E(p)]};return i(e+"",0)[2]},e=s([Object(o.A)(),u("design:paramtypes",[l.c,a.a,i.q,r.c,i.v])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(6),s=n(1),u=n(4),c=n(24),d=n(2),f=n(53),p=n(40),h=n(352),m=n(58),_=n(178),g=n(136),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d){this.sitesProvider=t,this.eventsProvider=n,this.utils=o,this.timeUtils=r,this.translate=i,this.courseOffline=l,this.appProvider=a,this.courseFormatDelegate=s,this.sitePluginsProvider=u,this.domUtils=c,this.pushNotificationsProvider=d,this.ROOT_CACHE_KEY="mmCourse:",this.COURSE_STATUS_TABLE="course_status",this.siteSchema={name:"CoreCourseProvider",version:1,tables:[{name:this.COURSE_STATUS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"status",type:"TEXT",notNull:!0},{name:"previous",type:"TEXT"},{name:"updated",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"previousDownloadTime",type:"INTEGER"}]}]},this.CORE_MODULES=["assign","assignment","book","chat","choice","data","database","date","external-tool","feedback","file","folder","forum","glossary","ims","imscp","label","lesson","lti","page","quiz","resource","scorm","survey","url","wiki","workshop"],this.logger=e.getInstance("CoreCourseProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.canGetCourseBlocks=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan("3.7")&&e.wsAvailable("core_block_get_course_blocks")},e.prototype.canRequestStealthModules=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan(["3.4.6","3.5.3"])},e.prototype.checkModuleCompletion=function(e,t){var n=this;t&&2===t.tracking&&0===t.state&&this.invalidateSections(e).finally(function(){n.eventsProvider.trigger(l.a.COMPLETION_MODULE_VIEWED,{courseId:e})})},e.prototype.clearAllCoursesStatus=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.logger.debug("Clear all course status for site "+e.id),e.getDb().deleteRecords(n.COURSE_STATUS_TABLE).then(function(){n.triggerCourseStatusChanged(t.ALL_COURSES_CLEARED,p.a.NOT_DOWNLOADED,e.id)})})},e.prototype.currentViewIsCourse=function(e,t){if(e){var n=e.getActive();return n&&"CoreCourseSectionPage"==n.id&&n.data&&n.data.course&&n.data.course.id==t}return!1},e.prototype.getActivitiesCompletionStatus=function(e,t,n,o,r,i){var l=this;return void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===i&&(i=!0),this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId(),l.logger.debug("Getting completion status for user "+n+" in course "+e);var a={courseid:e,userid:n},s={cacheKey:l.getActivitiesCompletionCacheKey(e,n)};return o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),t.read("core_completion_get_activities_completion_status",a,s).then(function(e){return e&&e.statuses?l.utils.arrayToObject(e.statuses,"cmid"):Promise.reject(null)}).then(function(n){return i?l.courseOffline.getCourseManualCompletions(e,t.id).then(function(e){return e.forEach(function(e){if(e&&void 0!==n[e.cmid]){var t=n[e.cmid];1===t.tracking&&(t.state=e.completed,t.offline=!0)}}),n}).catch(function(){return n}):n})})},e.prototype.getActivitiesCompletionCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"activitiescompletion:"+e+":"+t},e.prototype.getCourseBlocks=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={courseid:e,returncontents:1},r={cacheKey:n.getCourseBlocksCacheKey(e),updateFrequency:f.a.FREQUENCY_RARELY};return t.read("core_block_get_course_blocks",o,r).then(function(e){return e.blocks||[]})})},e.prototype.getCourseBlocksCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseblocks:"+e},e.prototype.getCourseStatusData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.COURSE_STATUS_TABLE,{id:e}).then(function(e){return e||Promise.reject(null)})})},e.prototype.getCourseStatus=function(e,t){return this.getCourseStatusData(e,t).then(function(e){return e.status||p.a.NOT_DOWNLOADED}).catch(function(){return p.a.NOT_DOWNLOADED})},e.prototype.getModule=function(e,n,o,r,i,l,a){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var u=function(e,t,o,r,l){var a={courseid:n,options:[]},c={omitExpires:l,updateFrequency:f.a.FREQUENCY_RARELY};return r&&a.options.push({name:"includestealthmodules",value:1}),o?(a.options.push({name:"modname",value:o}),c.cacheKey=s.getModuleByModNameCacheKey(o)):(a.options.push({name:"cmid",value:t}),c.cacheKey=s.getModuleCacheKey(t)),!l&&i&&(c.getFromCache=!1,c.emergencyCache=!1),e.read("core_course_get_contents",a,c).catch(function(){if(!i&&!s.appProvider.isOnline()){if(r)return u(e,t,o,!1,!0);if(o)return u(e,t,void 0,s.canRequestStealthModules(e),!0)}return Promise.reject(null)})};return(n?Promise.resolve():this.getModuleBasicInfo(e,l).then(function(e){n=e.course})).then(function(){return s.sitesProvider.getSite(l)}).then(function(t){return s.logger.debug("Getting module "+e+" in course "+n),u(t,e,a,s.canRequestStealthModules(t),r)}).catch(function(){var e={omitExpires:r};return!r&&i&&(e.getFromCache=!1,e.emergencyCache=!1),s.getSections(n,!1,!1,e,l)}).then(function(r){for(var i=0;i<r.length;i++){var l=r[i];if(null==o||isNaN(o)||l.id==t.STEALTH_MODULES_SECTION_ID||o==l.id)for(var a=0;a<l.modules.length;a++){var s=l.modules[a];if(s.id==e)return s.course=n,s}}return Promise.reject(null)})},e.prototype.getModuleBasicInfo=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={cmid:e},r={cacheKey:n.getModuleCacheKey(e),updateFrequency:f.a.FREQUENCY_RARELY};return t.read("core_course_get_course_module",o,r).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.cm?e.cm:Promise.reject(null)})})},e.prototype.getModuleBasicGradeInfo=function(e,t){return this.getModuleBasicInfo(e,t).then(function(e){var t={advancedgrading:e.advancedgrading||!1,grade:e.grade||!1,gradecat:e.gradecat||!1,gradepass:e.gradepass||!1,outcomes:e.outcomes||!1,scale:e.scale||!1};return(!1!==t.grade||!1!==t.advancedgrading||!1!==t.outcomes)&&t})},e.prototype.getModuleBasicInfoByInstance=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={instance:e,module:t},i={cacheKey:o.getModuleBasicInfoByInstanceCacheKey(e,t),updateFrequency:f.a.FREQUENCY_RARELY};return n.read("core_course_get_course_module_by_instance",r,i).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.cm?e.cm:Promise.reject(null)})})},e.prototype.getModuleBasicInfoByInstanceCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"moduleByInstance:"+t+":"+e},e.prototype.getModuleCacheKey=function(e){return this.ROOT_CACHE_KEY+"module:"+e},e.prototype.getModuleByModNameCacheKey=function(e){return this.ROOT_CACHE_KEY+"module:modName:"+e},e.prototype.getModuleIconSrc=function(e,t){if(this.CORE_MODULES.indexOf(e)<0){if(t)return t;e="external-tool"}return"assets/img/mod/"+e+".svg"},e.prototype.getModuleSectionId=function(e,t){return this.getModuleBasicInfo(e,t).then(function(e){return e.section})},e.prototype.getSection=function(e,t,n,o,r){return t<0?Promise.reject("Invalid section ID"):this.getSections(e,n,o,void 0,r).then(function(e){for(var n=0;n<e.length;n++)if(e[n].id==t)return e[n];return Promise.reject("Unkown section")})},e.prototype.getSections=function(e,t,n,o,r,i){var l=this;return void 0===i&&(i=!0),this.sitesProvider.getSite(r).then(function(r){(o=o||{}).cacheKey=l.getSectionsCacheKey(e),o.updateFrequency=o.updateFrequency||f.a.FREQUENCY_RARELY;var a={courseid:e,options:[{name:"excludemodules",value:t?1:0},{name:"excludecontents",value:n?1:0}]};return l.canRequestStealthModules(r)&&a.options.push({name:"includestealthmodules",value:i?1:0}),r.read("core_course_get_contents",a,o).catch(function(){return o.omitExpires=!0,a.options.splice(-1,1),r.read("core_course_get_contents",a,o)}).then(function(t){var n=r.getSiteHomeId(),o=!0;return e==n&&(o=r.getStoredConfig("numsections")),void 0!==o&&!o&&t.length>0&&t.pop(),t})})},e.prototype.getSectionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"sections:"+e},e.prototype.getSectionsModules=function(e){if(!e||!e.length)return[];var t=[];return e.forEach(function(e){e.modules&&(t=t.concat(e.modules))}),t},e.prototype.invalidateCourseBlocks=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCourseBlocksCacheKey(e))})},e.prototype.invalidateModule=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=[];return n&&r.push(t.invalidateWsCacheForKey(o.getModuleByModNameCacheKey(n))),r.push(t.invalidateWsCacheForKey(o.getModuleCacheKey(e))),Promise.all(r)})},e.prototype.invalidateModuleByInstance=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getModuleBasicInfoByInstanceCacheKey(e,t))})},e.prototype.invalidateSections=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=[],i=t.getSiteHomeId();return n=n||t.getUserId(),r.push(t.invalidateWsCacheForKey(o.getSectionsCacheKey(e))),r.push(t.invalidateWsCacheForKey(o.getActivitiesCompletionCacheKey(e,n))),e==i&&r.push(t.invalidateConfig()),Promise.all(r)})},e.prototype.loadModuleContents=function(e,t,n,o,r,i,l){return!r&&e.contents&&e.contents.length?Promise.resolve():this.getModule(e.id,t,n,o,r,i,l).then(function(t){e.contents=t.contents})},e.prototype.logView=function(e,t,n,o){var r=this,i={courseid:e};return void 0!==t&&(i.sectionnumber=t),this.sitesProvider.getSite(n).then(function(l){return r.pushNotificationsProvider.logViewEvent(e,o,"course","core_course_view_course",{sectionnumber:t},n),l.write("core_course_view_course",i).then(function(e){if(!e.status)return Promise.reject(null)})})},e.prototype.markCompletedManually=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.courseOffline.markCompletedManually(e,t,n,o,r)};return!this.appProvider.isOnline()&&n?l():this.markCompletedManuallyOnline(e,t,r).then(function(t){return i.courseOffline.deleteManualCompletion(e,r).catch(function(){}).then(function(){return t})}).catch(function(e){return i.utils.isWebServiceError(e)||!n?Promise.reject(e):l()})},e.prototype.markCompletedManuallyOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("core_completion_update_activity_completion_status_manually",{cmid:e,completed:t})})},e.prototype.moduleHasView=function(e){return!!e.url},e.prototype.openCourse=function(e,t,n){var o=this,r=this.domUtils.showModalLoading();return this.sitePluginsProvider.waitFetchPlugins().then(function(){return o.sitePluginsProvider.sitePluginPromiseExists("format_"+t.format)?o.sitePluginsProvider.sitePluginLoaded("format_"+t.format).then(function(){if(o.sitePluginsProvider.sitePluginsFinishedLoading)return o.courseFormatDelegate.openCourse(e,t,n);var r=o.utils.promiseDefer(),i=o.eventsProvider.on(l.a.SITE_PLUGINS_LOADED,function(){i&&i.off(),o.courseFormatDelegate.openCourse(e,t,n).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)})});return r.promise}).catch(function(){var e=o.translate.instant("core.courses.errorloadplugins"),t=o.translate.instant("core.courses.reload"),n=o.translate.instant("core.courses.ignore");o.domUtils.showConfirm(e,"",t,n).then(function(){window.location.reload()})}):o.courseFormatDelegate.openCourse(e,t,n)}).finally(function(){r.dismiss()})},e.prototype.selectCourseTab=function(e,t){(t=t||{}).name=e||"",this.eventsProvider.trigger(l.a.SELECT_COURSE_TAB,t)},e.prototype.setCoursePreviousStatus=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Set previous status for course "+e+" in site "+t),this.sitesProvider.getSite(t).then(function(o){var r=o.getDb(),i={};return n.getCourseStatusData(e,t).then(function(o){return n.logger.debug("Set previous status '"+o.status+"' for course "+e),i.status=o.previous||p.a.NOT_DOWNLOADED,i.updated=Date.now(),o.status==p.a.DOWNLOADING&&(i.downloadTime=o.previousDownloadTime),r.updateRecords(n.COURSE_STATUS_TABLE,i,{id:e}).then(function(){return n.triggerCourseStatusChanged(e,i.status,t),i.status})})})},e.prototype.setCourseStatus=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Set status '"+t+"' for course "+e+" in site "+n),this.sitesProvider.getSite(n).then(function(r){var i,l;return t==p.a.DOWNLOADING&&(i=o.timeUtils.timestamp()),o.getCourseStatusData(e,n).then(function(e){return void 0===i?(i=e.downloadTime,l=e.previousDownloadTime):l=e.downloadTime,e.status}).catch(function(){}).then(function(n){if(n!=t){var a={id:e,status:t,previous:n,updated:(new Date).getTime(),downloadTime:i,previousDownloadTime:l};return r.getDb().insertRecord(o.COURSE_STATUS_TABLE,a)}}).then(function(){o.triggerCourseStatusChanged(e,t,n)})})},e.prototype.translateModuleName=function(e){this.CORE_MODULES.indexOf(e)<0&&(e="external-tool");var t="core.mod_"+e,n=this.translate.instant(t);return n!==t?n:e},e.prototype.triggerCourseStatusChanged=function(e,t,n){this.eventsProvider.trigger(l.a.COURSE_STATUS_CHANGED,{courseId:e,status:t},n)},e.ALL_SECTIONS_ID=-2,e.STEALTH_MODULES_SECTION_ID=-1,e.ACCESS_GUEST="courses_access_guest",e.ACCESS_DEFAULT="courses_access_default",e.ALL_COURSES_CLEARED=-1,e.COMPLETION_TRACKING_NONE=0,e.COMPLETION_TRACKING_MANUAL=1,e.COMPLETION_TRACKING_AUTOMATIC=2,e.COMPLETION_INCOMPLETE=0,e.COMPLETION_COMPLETE=1,e.COMPLETION_COMPLETE_PASS=2,e.COMPLETION_COMPLETE_FAIL=3,e.COMPONENT="CoreCourse",e=t=v([Object(o.A)(),y("design:paramtypes",[a.a,s.a,l.a,d.a,c.a,r.c,h.a,i.a,_.a,m.a,u.a,g.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(154),s=n(6),u=n(1),c=n(4),d=n(11),f=n(22),p=n(2),h=n(125),m=n(62),_=n(40),g=n(116),v=n(58),y=n(487),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h){this.sitesProvider=t,this.loginHelper=n,this.contentLinksDelegate=o,this.appProvider=r,this.domUtils=i,this.urlUtils=l,this.translate=a,this.initDelegate=s,this.textUtils=c,this.sitePluginsProvider=d,this.zone=f,this.utils=p,this.mainMenuProvider=h,this.logger=e.getInstance("CoreContentLinksHelperProvider")}return e.prototype.canHandleLink=function(e,t,n,o){var r=this;return(o?this.sitesProvider.isStoredRootURL(e,n):Promise.resolve({})).then(function(t){return!!t.site||r.contentLinksDelegate.getActionsFor(e,void 0,n).then(function(e){return!!r.getFirstValidAction(e)})}).catch(function(){return!1})},e.prototype.getFirstValidAction=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&n.sites&&n.sites.length)return n}},e.prototype.goInSite=function(e,t,n,o,r){var i=this;o=o||this.sitesProvider.getCurrentSiteId();var l=this.utils.promiseDefer();return this.zone.run(function(){e&&o==i.sitesProvider.getCurrentSiteId()?r?i.mainMenuProvider.isCurrentMainMenuHandler(t,n).catch(function(){return!1}).then(function(o){o?(i.loginHelper.loadPageInMainMenu(t,n),l.resolve()):e.push(t,n).then(l.resolve,l.reject)}):e.push(t,n).then(l.resolve,l.reject):i.loginHelper.redirect(t,n,o).then(l.resolve,l.reject)}),l.promise},e.prototype.goToChooseSite=function(e){this.appProvider.getRootNavController().setRoot("CoreContentLinksChooseSitePage",{url:e})},e.prototype.handleCustomUrl=function(e){var t=this,n=g.a.customurlscheme+"://link";if(-1==e.indexOf(n))return!1;var o,r=this.domUtils.showModalLoading();return e=this.textUtils.decodeURIComponent(e),this.logger.debug("Treating custom URL scheme: "+e),e=e.replace(n+"=",""),(o=this.urlUtils.getUsernameFromUrl(e))&&(e=e.replace(o+"@","")),this.initDelegate.ready().then(function(){return t.sitesProvider.isStoredRootURL(e,o)}).then(function(n){if(n.site)return r.dismiss(),t.handleRootURL(n.site,!1);if(n.siteIds.length>0)return r.dismiss(),t.handleLink(e,o).then(function(e){e||t.domUtils.showErrorModal("core.contentlinks.errornoactions",!0)});var i=t.contentLinksDelegate.getSiteUrl(e),l=e;return i||(i=e,l=void 0),t.sitesProvider.checkSite(i).then(function(e){var n,i=t.loginHelper.isSSOLoginNeeded(e.code),a="CoreLoginCredentialsPage",s={siteUrl:e.siteUrl,username:o,urlToOpen:l,siteConfig:e.config},u=!1;if(r.dismiss(),t.sitesProvider.isLoggedIn()){var c=t.translate.instant("core.contentlinks.confirmurlothersite");n=t.domUtils.showConfirm(c).then(function(){if(!i)return(u=t.sitePluginsProvider.hasSitePluginsLoaded)&&t.appProvider.storeRedirect(_.a.NO_SITE_ID,a,s),t.sitesProvider.logout().catch(function(){})})}else n=Promise.resolve();return n.then(function(){if(i)t.loginHelper.confirmAndOpenBrowserForSSOLogin(e.siteUrl,e.code,e.service,e.config&&e.config.launchurl);else if(!u)return t.loginHelper.goToNoSitePage(void 0,a,s)})}).catch(function(e){t.domUtils.showErrorModalDefault(e,t.translate.instant("core.login.invalidsite"))})}).finally(function(){r.dismiss()}),!0},e.prototype.handleLink=function(e,t,n,o,r){var i=this;return(o?this.sitesProvider.isStoredRootURL(e,t):Promise.resolve({})).then(function(o){return o.site?(i.handleRootURL(o.site,r),!0):i.contentLinksDelegate.getActionsFor(e,void 0,t).then(function(t){var o=i.getFirstValidAction(t);return!!o&&(i.sitesProvider.isLoggedIn()?1==o.sites.length&&o.sites[0]==i.sitesProvider.getCurrentSiteId()?o.action(o.sites[0],n):i.domUtils.showConfirm(i.translate.instant("core.contentlinks.confirmurlothersite")).then(function(){1==o.sites.length?o.action(o.sites[0],n):i.goToChooseSite(e)}).catch(function(){}):1==o.sites.length?o.action(o.sites[0],n):i.goToChooseSite(e),!0)}).catch(function(){return!1})})},e.prototype.handleRootURL=function(e,t,n){var o=this.sitesProvider.getCurrentSite();return!o||o.getURL()!=e.getURL()||n&&o.getToken()!=e.getToken()?this.loginHelper.redirect("",{},e.getId()):t?e.openInBrowserWithAutoLogin(e.getURL()):Promise.resolve()},e=b([Object(o.A)(),P("design:paramtypes",[s.a,u.a,h.a,m.a,i.a,c.a,f.a,r.c,a.a,l.a,d.a,v.a,o.M,p.a,y.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return I});var o=n(0),r=n(185),i=n(10),l=n(9),a=n(57),s=n(154),u=n(6),c=n(56),d=n(1),f=n(171),p=n(4),h=n(66),m=n(11),_=n(24),g=n(22),v=n(2),y=n(40),b=n(194),P=(n.n(b),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},C=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},I=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var _=this;this.appProvider=t,this.fileProvider=n,this.sitesProvider=o,this.wsProvider=r,this.textUtils=i,this.utils=l,this.mimeUtils=a,this.urlUtils=s,this.timeUtils=u,this.eventsProvider=c,this.pluginFileDelegate=p,this.domUtils=h,this.QUEUE_PROCESS_INTERVAL=0,this.FOLDER="filepool",this.WIFI_DOWNLOAD_THRESHOLD=20971520,this.DOWNLOAD_THRESHOLD=2097152,this.QUEUE_RUNNING="CoreFilepool:QUEUE_RUNNING",this.QUEUE_PAUSED="CoreFilepool:QUEUE_PAUSED",this.ERR_QUEUE_IS_EMPTY="CoreFilepoolError:ERR_QUEUE_IS_EMPTY",this.ERR_FS_OR_NETWORK_UNAVAILABLE="CoreFilepoolError:ERR_FS_OR_NETWORK_UNAVAILABLE",this.ERR_QUEUE_ON_PAUSE="CoreFilepoolError:ERR_QUEUE_ON_PAUSE",this.QUEUE_TABLE="filepool_files_queue",this.FILES_TABLE="filepool_files",this.LINKS_TABLE="filepool_files_links",this.PACKAGES_TABLE="filepool_packages",this.appTablesSchema={name:"CoreFilepoolProvider",version:1,tables:[{name:this.QUEUE_TABLE,columns:[{name:"siteId",type:"TEXT"},{name:"fileId",type:"TEXT"},{name:"added",type:"INTEGER"},{name:"priority",type:"INTEGER"},{name:"url",type:"TEXT"},{name:"revision",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"isexternalfile",type:"INTEGER"},{name:"repositorytype",type:"TEXT"},{name:"path",type:"TEXT"},{name:"links",type:"TEXT"}],primaryKeys:["siteId","fileId"]}]},this.siteSchema={name:"CoreFilepoolProvider",version:1,tables:[{name:this.FILES_TABLE,columns:[{name:"fileId",type:"TEXT",primaryKey:!0},{name:"url",type:"TEXT",notNull:!0},{name:"revision",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"stale",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"isexternalfile",type:"INTEGER"},{name:"repositorytype",type:"TEXT"},{name:"path",type:"TEXT"},{name:"extension",type:"TEXT"}]},{name:this.LINKS_TABLE,columns:[{name:"fileId",type:"TEXT"},{name:"component",type:"TEXT"},{name:"componentId",type:"TEXT"}],primaryKeys:["fileId","component","componentId"]},{name:this.PACKAGES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"component",type:"TEXT"},{name:"componentId",type:"TEXT"},{name:"status",type:"TEXT"},{name:"previous",type:"TEXT"},{name:"updated",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"previousDownloadTime",type:"INTEGER"},{name:"extra",type:"TEXT"}]}]},this.tokenRegex=new RegExp("(\\?|&)token=([A-Za-z0-9]*)"),this.urlAttributes=[this.tokenRegex,new RegExp("(\\?|&)forcedownload=[0-1]"),new RegExp("(\\?|&)preview=[A-Za-z0-9]+"),new RegExp("(\\?|&)offline=[0-1]","g")],this.queueDeferreds={},this.sizeCache={},this.packagesPromises={},this.filePromises={},this.logger=e.getInstance("CoreFilepoolProvider"),this.appDB=this.appProvider.getDB(),this.dbReady=t.createTablesFromSchema(this.appTablesSchema).catch(function(){}),this.sitesProvider.registerSiteSchema(this.siteSchema),d.ready().then(function(){_.checkQueueProcessing(),f.onConnect().subscribe(function(){m.run(function(){_.checkQueueProcessing()})})})}return e.prototype.addFileLink=function(e,t,n,o){var r=this;return n?(o=this.fixComponentId(o),this.sitesProvider.getSiteDb(e).then(function(e){return e.insertRecord(r.LINKS_TABLE,{fileId:t,component:n,componentId:o||""})})):Promise.reject(null)},e.prototype.addFileLinkByUrl=function(e,t,n,o){var r=this;return this.fixPluginfileURL(e,t).then(function(t){var i=r.getFileIdByUrl(t.fileurl);return r.addFileLink(e,i,n,o)})},e.prototype.addFileLinks=function(e,t,n){var o=this,r=[];return n.forEach(function(n){r.push(o.addFileLink(e,t,n.component,n.componentId))}),Promise.all(r)},e.prototype.addFilesToQueue=function(e,t,n,o){return this.downloadOrPrefetchFiles(e,t,!0,!1,n,o)},e.prototype.addFileToPool=function(e,t,n){var o=this,r=Object.assign({},n);return r.fileId=t,this.sitesProvider.getSiteDb(e).then(function(e){return e.insertRecord(o.FILES_TABLE,r)})},e.prototype.addHashToFilename=function(e,t){var n=t.match(/_[a-f0-9]{32}/g);if(n&&n.length){var o=n[n.length-1],r=e.replace(o,"");if("_"+b.Md5.hashAsciiStr("url:"+r)==o)return t}return t+"_"+b.Md5.hashAsciiStr("url:"+e)},e.prototype.addToQueue=function(e,t,n,o,r,i,l,a,s,u){return void 0===s&&(s={}),E(this,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return[4,this.dbReady];case 1:return c.sent(),this.logger.debug("Adding "+t+" to the queue"),[4,this.appDB.insertRecord(this.QUEUE_TABLE,{siteId:e,fileId:t,url:n,priority:o,revision:r,timemodified:i,path:l,isexternalfile:s.isexternalfile?1:0,repositorytype:s.repositorytype,links:JSON.stringify(u?[u]:[]),added:Date.now()})];case 2:return c.sent(),this.checkQueueProcessing(),this.notifyFileDownloading(e,t),[2,this.getQueuePromise(e,t,!0,a)]}})})},e.prototype.addToQueueByUrl=function(e,t,n,o,r,i,l,a,s,u,c){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s={}),E(this,void 0,void 0,function(){var d,f,p,h=this;return C(this,function(m){switch(m.label){case 0:return[4,this.dbReady];case 1:return m.sent(),this.fileProvider.isAvailable()?[2,this.sitesProvider.getSite(e).then(function(n){return n.canDownloadFiles()?c?{fileurl:t}:h.fixPluginfileURL(e,t):Promise.reject(null)}).then(function(c){t=c.fileurl,r=c.timemodified||r,u=u||h.getRevisionFromUrl(t),d=h.getFileIdByUrl(t);var m={siteId:e,fileId:d};return void 0!==n&&(f={component:n,componentId:h.fixComponentId(o)}),p=h.getQueueDeferred(e,d,!1,l),h.hasFileInQueue(e,d).then(function(n){var o={},c=!1;if(n){if(n.priority<a&&(o.priority=a),u&&n.revision!==u&&(o.revision=u),r&&n.timemodified!==r&&(o.timemodified=r),i&&n.path!==i&&(o.path=i),n.isexternalfile!==s.isexternalfile&&(n.isexternalfile||s.isexternalfile)&&(o.isexternalfile=s.isexternalfile),n.repositorytype!==s.repositorytype&&(n.repositorytype||s.repositorytype)&&(o.repositorytype=s.repositorytype),f){if(n.links&&n.links.length)for(var _ in n.links){var g=n.links[_];if(g.component==f.component&&g.componentId==f.componentId){c=!0;break}}c||(o.links=n.links||[],o.links.push(f),o.links=JSON.stringify(n.links))}return Object.keys(o).length?(h.logger.debug("Updating file "+d+" which is already in queue"),h.appDB.updateRecords(h.QUEUE_TABLE,o,m).then(function(){return h.getQueuePromise(e,d,!0,l)})):(h.logger.debug("File "+d+" already in queue and does not require update"),p?p.promise:h.getQueuePromise(e,d,!0,l))}return h.addToQueue(e,d,t,a,u,r,i,l,s,f)},function(){return h.addToQueue(e,d,t,a,u,r,i,l,s,f)})})]:[2,Promise.reject(null)]}})})},e.prototype.addToQueueIfNeeded=function(e,t,n,o,r,i,l,a,s){var u=this;void 0===r&&(r=0),void 0===i&&(i=!0),void 0===a&&(a={});var c;if(i){if(void 0!==this.sizeCache[t])c=Promise.resolve(this.sizeCache[t]);else{if(!this.appProvider.isOnline())return Promise.reject(null);c=this.wsProvider.getRemoteFileSize(t)}return c.then(function(i){var c=u.appProvider.isWifi(),d=i<=0;if(d||(u.sizeCache[t]=i),d){if(l&&c)return u.addToQueueByUrl(e,t,n,o,r,void 0,void 0,0,a,s,!0)}else if(u.shouldDownload(i))return u.addToQueueByUrl(e,t,n,o,r,void 0,void 0,0,a,s,!0)})}return this.addToQueueByUrl(e,t,n,o,r,void 0,void 0,0,a,s,!0)},e.prototype.checkQueueProcessing=function(){this.fileProvider.isAvailable()&&this.appProvider.isOnline()?this.queueState!==this.QUEUE_RUNNING&&(this.queueState=this.QUEUE_RUNNING,this.processQueue()):this.queueState=this.QUEUE_PAUSED},e.prototype.clearAllPackagesStatus=function(e){var t=this;return this.logger.debug("Clear all packages status for site "+e),this.sitesProvider.getSite(e).then(function(n){return n.getDb().getAllRecords(t.PACKAGES_TABLE).then(function(o){return n.getDb().deleteRecords(t.PACKAGES_TABLE).then(function(){o.forEach(function(n){t.triggerPackageStatusChanged(e,y.a.NOT_DOWNLOADED,n.component,n.componentId)})})})})},e.prototype.clearFilepool=function(e){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return Promise.all([e.deleteRecords(t.FILES_TABLE),e.deleteRecords(t.LINKS_TABLE)])})},e.prototype.componentHasFiles=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.countRecords(o.LINKS_TABLE,{component:t,componentId:n||""}).then(function(e){if(e<=0)return Promise.reject(null)})})},e.prototype.determinePackagesStatus=function(e,t){return e||(e=y.a.NOT_DOWNLOADABLE),t===y.a.NOT_DOWNLOADED?y.a.NOT_DOWNLOADED:t===y.a.DOWNLOADED&&e===y.a.NOT_DOWNLOADABLE?y.a.DOWNLOADED:t!==y.a.DOWNLOADING||e!==y.a.NOT_DOWNLOADABLE&&e!==y.a.DOWNLOADED?t===y.a.OUTDATED&&e!==y.a.NOT_DOWNLOADED?y.a.OUTDATED:e:y.a.DOWNLOADING},e.prototype.downloadForPoolByUrl=function(e,t,n,o,r,i){var l=this;void 0===n&&(n={});var a=this.getFileIdByUrl(t),s=this.mimeUtils.guessExtensionFromUrl(t),u=void 0===o,c=o||this.getFilePath(e,a,s);return Promise.resolve(c).then(function(o){if(i&&i.fileId!==a)return l.logger.error("Invalid object to update passed"),Promise.reject(null);var s=l.getFileDownloadId(t,o);return l.filePromises[e]&&l.filePromises[e][s]?l.filePromises[e][s]:(l.filePromises[e]||(l.filePromises[e]={}),l.filePromises[e][s]=l.sitesProvider.getSite(e).then(function(s){if(!s.canDownloadFiles())return Promise.reject(null);var c;return l.wsProvider.downloadFile(t,o,u,r).then(function(n){return c=n,l.pluginFileDelegate.treatDownloadedFile(t,c,e)}).then(function(){var o=i||{};return o.downloadTime=Date.now(),o.stale=0,o.url=t,o.revision=n.revision,o.timemodified=n.timemodified,o.isexternalfile=n.isexternalfile?1:0,o.repositorytype=n.repositorytype,o.path=c.path,o.extension=c.extension,l.addFileToPool(e,a,o).then(function(){return c.toURL()})})}).finally(function(){delete l.filePromises[e][s]}),l.filePromises[e][s])})},e.prototype.downloadOrPrefetchFiles=function(e,t,n,o,r,i,l){var a=this,s=[];return t.forEach(function(t){var u,c=t.url||t.fileurl,d=t.timemodified,f={isexternalfile:t.isexternalfile,repositorytype:t.repositorytype};l&&(u=t.filename,"/"!==t.filepath&&(u=t.filepath.substr(1)+u),u=a.textUtils.concatenatePaths(l,u)),s.push(n?a.addToQueueByUrl(e,c,r,i,d,u,void 0,0,f):a.downloadUrl(e,c,o,r,i,d,u,void 0,f))}),this.utils.allPromises(s)},e.prototype.downloadOrPrefetchPackage=function(e,t,n,o,r,i,l,a){var s,u=this,c=this.getPackageId(o,r);return this.packagesPromises[e]&&this.packagesPromises[e][c]?this.packagesPromises[e][c]:(this.packagesPromises[e]||(this.packagesPromises[e]={}),s=this.storePackageStatus(e,y.a.DOWNLOADING,o,r).then(function(){var s=[],c=0;return t.forEach(function(t){var i,d,f,p=t.url||t.fileurl,h={isexternalfile:t.isexternalfile,repositorytype:t.repositorytype},m=0;a&&(f=function(e){e&&e.loaded&&(c+=e.loaded-m,m=e.loaded,a({packageDownload:!0,loaded:c,fileProgress:e}))}),l&&(i=t.filename,"/"!==t.filepath&&(i=t.filepath.substr(1)+i),i=u.textUtils.concatenatePaths(l,i)),d=n?u.addToQueueByUrl(e,p,o,r,t.timemodified,i,void 0,0,h):u.downloadUrl(e,p,!1,o,r,t.timemodified,f,i,h),s.push(d)}),Promise.all(s).then(function(){return u.storePackageStatus(e,y.a.DOWNLOADED,o,r,i)}).catch(function(t){return u.setPackagePreviousStatus(e,o,r).then(function(){return Promise.reject(t)})})}).finally(function(){delete u.packagesPromises[e][c]}),this.packagesPromises[e][c]=s,s)},e.prototype.downloadPackage=function(e,t,n,o,r,i,l){return this.downloadOrPrefetchPackage(e,t,!1,n,o,r,i,l)},e.prototype.downloadUrl=function(e,t,n,o,r,i,l,a,s,u){var c=this;void 0===i&&(i=0),void 0===s&&(s={});var d;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,t).then(function(f){return t=f.fileurl,i=f.timemodified||i,s=Object.assign({},s),s.timemodified=i||0,s.revision=u||c.getRevisionFromUrl(t),d=c.getFileIdByUrl(t),c.hasFileInPool(e,d).then(function(o){return void 0===o?(c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,t,s,a,l)):c.isFileOutdated(o,s.revision,s.timemodified)&&c.appProvider.isOnline()&&!n?(c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,t,s,a,l,o)):(a?c.getInternalUrlByPath(a):c.getInternalUrlById(e,d)).then(function(e){return e},function(){return c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,t,s,a,l,o)})},function(){return c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,t,s,a,l)}).then(function(t){return void 0!==o&&c.addFileLink(e,d,o,r).catch(function(){}),c.notifyFileDownloaded(e,d),t},function(t){return c.notifyFileDownloadError(e,d),Promise.reject(t)})}):Promise.reject(null)},e.prototype.extractDownloadableFilesFromHtml=function(e){var t,n=[],o=this.domUtils.convertToElement(e);t=o.querySelectorAll("a, img, audio, video, source, track");for(var r=0;r<t.length;r++){var i=t[r],l="A"===i.tagName?i.href:i.src;l&&this.urlUtils.isDownloadableUrl(l)&&-1==n.indexOf(l)&&n.push(l),"VIDEO"==i.tagName&&i.getAttribute("poster")&&(l=i.getAttribute("poster"))&&this.urlUtils.isDownloadableUrl(l)&&-1==n.indexOf(l)&&n.push(l)}return n=n.concat(this.pluginFileDelegate.getDownloadableFilesFromHTML(o))},e.prototype.extractDownloadableFilesFromHtmlAsFakeFileObjects=function(e){return this.extractDownloadableFilesFromHtml(e).map(function(e){return{fileurl:e}})},e.prototype.fillExtensionInFile=function(e,t){var n=this;return void 0!==e.extension?Promise.resolve():this.sitesProvider.getSiteDb(t).then(function(t){var o=n.mimeUtils.getFileExtension(e.path);if(!o)return n.logger.debug("Staled file with no extension "+e.fileId),t.updateRecords(n.FILES_TABLE,{stale:1},{fileId:e.fileId});var r=e.fileId;return e.fileId=n.mimeUtils.removeExtension(r),e.extension=o,t.updateRecords(n.FILES_TABLE,e,{fileId:r}).then(function(){if(e.fileId!=r)return t.updateRecords(n.LINKS_TABLE,{fileId:e.fileId},{fileId:r});n.logger.debug("Removed extesion "+o+" from file "+e.fileId)})})},e.prototype.fixComponentId=function(e){if("number"==typeof e)return e;var t=parseInt(e,10);return isNaN(t)?void 0===e||null===e?-1:e:t},e.prototype.fixPluginfileURL=function(e,t,n){var o=this;return void 0===n&&(n=0),this.pluginFileDelegate.getDownloadableFile({fileurl:t,timemodified:n}).then(function(t){return o.sitesProvider.getSite(e).then(function(e){return e.checkAndFixPluginfileURL(t.fileurl)}).then(function(e){return t.fileurl=e,t})})},e.prototype.getComponentFiles=function(e,t,n){return e.getRecords(this.LINKS_TABLE,{component:t,componentId:n||""})},e.prototype.getDirectoryUrlByUrl=function(e,t){var n=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl),r=n.getFilePath(e,o,"");return n.fileProvider.getDir(r).then(function(e){return e.toURL()})}):Promise.reject(null)},e.prototype.getFileDownloadId=function(e,t){return b.Md5.hashAsciiStr(e+"###"+t)},e.prototype.getFileEventName=function(e,t){return"CoreFilepoolFile:"+e+":"+t},e.prototype.getFileEventNameByUrl=function(e,t){var n=this;return this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl);return n.getFileEventName(e,o)})},e.prototype.getFileIdByUrl=function(e){var t,n=e;return n=n.replace(/\/tokenpluginfile\.php\/[^\/]+\//,"/webservice/pluginfile.php/"),n=this.removeRevisionFromUrl(n),-1!==(n=this.textUtils.decodeHTML(this.textUtils.decodeURIComponent(n))).indexOf("/webservice/pluginfile")&&this.urlAttributes.forEach(function(e){n=n.replace(e,"")}),t=this.guessFilenameFromUrl(n),this.addHashToFilename(n,t)},e.prototype.getFileLinks=function(e,t){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getRecords(n.LINKS_TABLE,{fileId:t})})},e.prototype.getFilePath=function(e,t,n){var o=this.getFilepoolFolderPath(e)+"/"+t;return void 0===n?this.hasFileInPool(e,t).then(function(e){return e.extension&&(o+="."+e.extension),o}).catch(function(){return o}):(n&&(o+="."+n),o)},e.prototype.getFilePathByUrl=function(e,t){var n=this;return this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl);return n.getFilePath(e,o)})},e.prototype.getFilepoolFolderPath=function(e){return this.fileProvider.getSiteFolder(e)+"/"+this.FOLDER},e.prototype.getFilesByComponent=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(e).then(function(e){return o.getComponentFiles(e,t,n).then(function(t){var n=[],r=[];return t.forEach(function(t){n.push(e.getRecord(o.FILES_TABLE,{fileId:t.fileId}).then(function(e){e&&r.push({url:e.url,path:e.path,extension:e.extension,revision:e.revision,timemodified:e.timemodified})}).catch(function(){}))}),Promise.all(n).then(function(){return r})})})},e.prototype.getFilesSizeByComponent=function(e,t,n){var o=this;return this.getFilesByComponent(e,t,n).then(function(e){var t=[],n=0;return e.forEach(function(e){t.push(o.fileProvider.getFileSize(e.path).then(function(e){n+=e}).catch(function(){}))}),Promise.all(t).then(function(){return n})})},e.prototype.getFileStateByUrl=function(e,t,n,o,r){var i=this;void 0===n&&(n=0);var l;return this.fixPluginfileURL(e,t,n).then(function(a){return t=a.fileurl,n=a.timemodified||n,r=r||i.getRevisionFromUrl(t),l=i.getFileIdByUrl(t),i.hasFileInQueue(e,l).then(function(){return y.a.DOWNLOADING}).catch(function(){var a=i.mimeUtils.guessExtensionFromUrl(t),s=o||i.getFilePath(e,l,a);return Promise.resolve(s).then(function(o){var a=i.getFileDownloadId(t,o);return i.filePromises[e]&&i.filePromises[e][a]?y.a.DOWNLOADING:i.hasFileInPool(e,l).then(function(e){return i.isFileOutdated(e,r,n)?y.a.OUTDATED:y.a.DOWNLOADED}).catch(function(){return y.a.NOT_DOWNLOADED})})})},function(){return y.a.NOT_DOWNLOADABLE})},e.prototype.getFileUrlByUrl=function(e,t,n,o,r,i,l,a,s,u){var c=this;void 0===r&&(r="url"),void 0===i&&(i=0),void 0===l&&(l=!0),void 0===s&&(s={});var d,f=function(t){c.addToQueueIfNeeded(e,t,n,o,i,l,a,s,u).catch(function(){})};return this.fixPluginfileURL(e,t,i).then(function(n){return t=n.fileurl,i=n.timemodified||i,u=u||c.getRevisionFromUrl(t),d=c.getFileIdByUrl(t),c.hasFileInPool(e,d).then(function(n){var o;return void 0===n?(f(t),o=t):c.isFileOutdated(n,u,i)&&c.appProvider.isOnline()?(f(t),o=t):o=(o="src"===r?c.getInternalSrcById(e,d):c.getInternalUrlById(e,d)).then(function(e){return e}).catch(function(){return c.logger.debug("File "+d+" not found on disk"),c.removeFileById(e,d),f(t),c.appProvider.isOnline()?t:Promise.reject(null)}),o},function(){return f(t),t})})},e.prototype.getInternalSrcById=function(e,t){var n=this;return this.fileProvider.isAvailable()?Promise.resolve(this.getFilePath(e,t)).then(function(e){return n.fileProvider.getFile(e).then(function(e){return n.fileProvider.getInternalURL(e)})}):Promise.reject(null)},e.prototype.getInternalUrlById=function(e,t){var n=this;return this.fileProvider.isAvailable()?Promise.resolve(this.getFilePath(e,t)).then(function(e){return n.fileProvider.getFile(e).then(function(e){return n.appProvider.isDesktop()?e.toInternalURL():e.toURL()})}):Promise.reject(null)},e.prototype.getInternalUrlByPath=function(e){return this.fileProvider.isAvailable()?this.fileProvider.getFile(e).then(function(e){return e.toURL()}):Promise.reject(null)},e.prototype.getInternalUrlByUrl=function(e,t){var n=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl);return n.getInternalUrlById(e,o)}):Promise.reject(null)},e.prototype.getPackageData=function(e,t,n){var o=this;return n=this.fixComponentId(n),this.sitesProvider.getSite(e).then(function(e){var r=o.getPackageId(t,n);return e.getDb().getRecord(o.PACKAGES_TABLE,{id:r})})},e.prototype.getPackageDirNameByUrl=function(e){var t,n="";return-1!==(e=this.removeRevisionFromUrl(e)).indexOf("/webservice/pluginfile")&&(this.urlAttributes.forEach(function(t){e=e.replace(t,"")}),(t=this.mimeUtils.guessExtensionFromUrl(e))&&"php"!==t&&(n="."+t)),b.Md5.hashAsciiStr("url:"+e)+n},e.prototype.getPackageDirPathByUrl=function(e,t){var n=this;return this.fixPluginfileURL(e,t).then(function(t){var o=n.getPackageDirNameByUrl(t.fileurl);return n.getFilePath(e,o,"")})},e.prototype.getPackageDirUrlByUrl=function(e,t){var n=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,t).then(function(t){var o=n.getPackageDirNameByUrl(t.fileurl),r=n.getFilePath(e,o,"");return n.fileProvider.getDir(r).then(function(e){return e.toURL()})}):Promise.reject(null)},e.prototype.getPackageDownloadPromise=function(e,t,n){var o=this.getPackageId(t,n);if(this.packagesPromises[e]&&this.packagesPromises[e][o])return this.packagesPromises[e][o]},e.prototype.getPackageExtra=function(e,t,n){return this.getPackageData(e,t,n).then(function(e){return e.extra})},e.prototype.getPackageId=function(e,t){return b.Md5.hashAsciiStr(e+"#"+this.fixComponentId(t))},e.prototype.getPackagePreviousStatus=function(e,t,n){return this.getPackageData(e,t,n).then(function(e){return e.previous||y.a.NOT_DOWNLOADED}).catch(function(){return y.a.NOT_DOWNLOADED})},e.prototype.getPackageStatus=function(e,t,n){return this.getPackageData(e,t,n).then(function(e){return e.status||y.a.NOT_DOWNLOADED}).catch(function(){return y.a.NOT_DOWNLOADED})},e.prototype.getPluginFileArgs=function(e){if(this.urlUtils.isPluginFileUrl(e)){var t=e.substr(e.indexOf("/pluginfile.php")+16).split("/");if(!(t.length<3))return t}},e.prototype.getQueueDeferred=function(e,t,n,o){if(void 0===n&&(n=!0),!this.queueDeferreds[e]){if(!n)return;this.queueDeferreds[e]={}}if(!this.queueDeferreds[e][t]){if(!n)return;this.queueDeferreds[e][t]=this.utils.promiseDefer()}return o&&(this.queueDeferreds[e][t].onProgress=o),this.queueDeferreds[e][t]},e.prototype.getQueueOnProgress=function(e,t){var n=this.getQueueDeferred(e,t,!1);if(n)return n.onProgress},e.prototype.getQueuePromise=function(e,t,n,o){return void 0===n&&(n=!0),this.getQueueDeferred(e,t,n,o).promise},e.prototype.getRevisionFromFileList=function(e){var t=this,n=0;return e.forEach(function(e){if(e.url||e.fileurl){var o=t.getRevisionFromUrl(e.url||e.fileurl);o>n&&(n=o)}}),n},e.prototype.getRevisionFromUrl=function(e){var t=this.getPluginFileArgs(e);if(!t)return 0;var n=this.pluginFileDelegate.getComponentRevisionRegExp(t);if(!n)return 0;var o=e.match(n);return o&&void 0!==o[1]?parseInt(o[1],10):0},e.prototype.getSrcByUrl=function(e,t,n,o,r,i,l,a,s){return void 0===r&&(r=0),void 0===i&&(i=!0),void 0===a&&(a={}),this.getFileUrlByUrl(e,t,n,o,"src",r,i,l,a,s)},e.prototype.getTimemodifiedFromFileList=function(e){var t=0;return e.forEach(function(e){e.timemodified>t&&(t=e.timemodified)}),t},e.prototype.getUrlByUrl=function(e,t,n,o,r,i,l,a,s){return void 0===r&&(r=0),void 0===i&&(i=!0),void 0===a&&(a={}),this.getFileUrlByUrl(e,t,n,o,"url",r,i,l,a,s)},e.prototype.guessFilenameFromUrl=function(e){var t="";if(-1!==e.indexOf("/webservice/pluginfile")){var n=this.urlUtils.extractUrlParams(e);t=n.file?n.file.substr(n.file.lastIndexOf("/")+1):this.urlUtils.getLastFileWithoutParams(e)}else if(this.urlUtils.isGravatarUrl(e))t="gravatar_"+this.urlUtils.getLastFileWithoutParams(e);else if(this.urlUtils.isThemeImageUrl(e)){var o=e.match(/\/core\/([^\/]*)\//);o&&o[1]&&(t=o[1]),t="default_"+t+"_"+this.urlUtils.getLastFileWithoutParams(e)}else t=this.urlUtils.getLastFileWithoutParams(e);var r,i=t.indexOf("#");return-1!=i&&((r=t.split("#")).shift(),t=t.substr(0,i)),t=this.mimeUtils.removeExtension(t),r&&(t+="_"+r.join("_")),this.textUtils.removeSpecialCharactersForFiles(t)},e.prototype.hasFileInPool=function(e,t){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getRecord(n.FILES_TABLE,{fileId:t}).then(function(e){return void 0===e?Promise.reject(null):e})})},e.prototype.hasFileInQueue=function(e,t){return E(this,void 0,void 0,function(){var n;return C(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:return o.sent(),[4,this.appDB.getRecord(this.QUEUE_TABLE,{siteId:e,fileId:t})];case 2:if(void 0===(n=o.sent()))throw null;return n.links=this.textUtils.parseJSON(n.links,[]),[2,n]}})})},e.prototype.invalidateAllFiles=function(e,t){var n=this;return void 0===t&&(t=!0),this.sitesProvider.getSiteDb(e).then(function(e){var o,r;return t&&(o="isexternalfile = ? OR (revision < ? AND timemodified = ?)",r=[0,1,0]),e.updateRecordsWhere(n.FILES_TABLE,{stale:1},o,r)})},e.prototype.invalidateFileByUrl=function(e,t){var n=this;return this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl);return n.sitesProvider.getSiteDb(e).then(function(e){return e.updateRecords(n.FILES_TABLE,{stale:1},{fileId:o})})})},e.prototype.invalidateFilesByComponent=function(e,t,n,o){var r=this;return void 0===o&&(o=!0),this.sitesProvider.getSiteDb(e).then(function(e){return r.getComponentFiles(e,t,n).then(function(t){var n=t.map(function(e){return e.fileId}),i=e.getInOrEqual(n);return i[0]="fileId "+i[0],o&&(i[0]+=" AND (isexternalfile = ? OR (revision < ? AND timemodified = ?))",i[1]=i[1].concat([0,1,0])),e.updateRecordsWhere(r.FILES_TABLE,{stale:1},i[0],i[1])})})},e.prototype.isFileDownloadable=function(e,t,n,o,r){return void 0===n&&(n=0),E(this,void 0,void 0,function(){var i;return C(this,function(l){switch(l.label){case 0:return[4,this.getFileStateByUrl(e,t,n,o,r)];case 1:return i=l.sent(),[2,i!=y.a.NOT_DOWNLOADABLE]}})})},e.prototype.isFileDownloadingByUrl=function(e,t){var n=this;return this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl);return n.hasFileInQueue(e,o)})},e.prototype.isFileOutdated=function(e,t,n){return!!e.stale||t>e.revision||n>e.timemodified},e.prototype.isFileUpdateUnknown=function(e){return!!e.isexternalfile||e.revision<1&&!e.timemodified},e.prototype.notifyFileDeleted=function(e,t){this.eventsProvider.trigger(this.getFileEventName(e,t),{action:"deleted"})},e.prototype.notifyFileDownloaded=function(e,t){this.eventsProvider.trigger(this.getFileEventName(e,t),{action:"download",success:!0})},e.prototype.notifyFileDownloadError=function(e,t){this.eventsProvider.trigger(this.getFileEventName(e,t),{action:"download",success:!1})},e.prototype.notifyFileDownloading=function(e,t){this.eventsProvider.trigger(this.getFileEventName(e,t),{action:"downloading"})},e.prototype.notifyFileOutdated=function(e,t){this.eventsProvider.trigger(this.getFileEventName(e,t),{action:"outdated"})},e.prototype.prefetchPackage=function(e,t,n,o,r,i,l){return this.downloadOrPrefetchPackage(e,t,!0,n,o,r,i,l)},e.prototype.processQueue=function(){var e=this;(this.queueState!==this.QUEUE_RUNNING?Promise.reject(this.ERR_QUEUE_ON_PAUSE):this.fileProvider.isAvailable()&&this.appProvider.isOnline()?this.processImportantQueueItem():Promise.reject(this.ERR_FS_OR_NETWORK_UNAVAILABLE)).then(function(){setTimeout(function(){e.processQueue()},e.QUEUE_PROCESS_INTERVAL)},function(t){t===e.ERR_FS_OR_NETWORK_UNAVAILABLE?e.logger.debug("Filesysem or network unavailable, pausing queue processing."):t===e.ERR_QUEUE_IS_EMPTY&&e.logger.debug("Queue is empty, pausing queue processing."),e.queueState=e.QUEUE_PAUSED})},e.prototype.processImportantQueueItem=function(){return E(this,void 0,void 0,function(){var e,t;return C(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.appDB.getRecords(this.QUEUE_TABLE,void 0,"priority DESC, added ASC",void 0,0,1)];case 3:return e=n.sent(),[3,5];case 4:throw n.sent(),this.ERR_QUEUE_IS_EMPTY;case 5:if(!(t=e.pop()))throw this.ERR_QUEUE_IS_EMPTY;return t.links=this.textUtils.parseJSON(t.links,[]),[2,this.processQueueItem(t)]}})})},e.prototype.processQueueItem=function(e){var t=this,n=e.siteId,o=e.fileId,r=e.url,i={revision:e.revision||void 0,timemodified:e.timemodified||void 0,isexternalfile:e.isexternalfile||void 0,repositorytype:e.repositorytype||void 0},l=e.path||void 0,a=e.links||[];return this.logger.debug("Processing queue item: "+n+", "+o),this.hasFileInPool(n,o).catch(function(){}).then(function(e){if(e&&!i.isexternalfile&&!t.isFileOutdated(e,i.revision,i.timemodified))return t.logger.debug("Queued file already in store, ignoring..."),t.addFileLinks(n,o,a).catch(function(){}),t.removeFromQueue(n,o).catch(function(){}).finally(function(){t.treatQueueDeferred(n,o,!0)}),void t.notifyFileDownloaded(n,o);var s=t.getQueueOnProgress(n,o);return t.downloadForPoolByUrl(n,r,i,l,s,e).then(function(){return t.addFileLinks(n,o,a).catch(function(){}),t.treatQueueDeferred(n,o,!0),t.notifyFileDownloaded(n,o),t.removeFromQueue(n,o).catch(function(){})},function(e){var i=!1;e&&e.source===r?1===e.code?i=!0:2===e.code?i=!0:3===e.code?i=!0:4===e.code||(i=!0):i=!0;var l=null;return e instanceof FileTransferError&&e.exception&&e.exception.includes("EDQUOT")&&(l="core.course.insufficientavailablequota"),i?(t.logger.debug("Item dropped from queue due to error: "+r,e),t.removeFromQueue(n,o).catch(function(){}).then(function(){t.treatQueueDeferred(n,o,!1,l),t.notifyFileDownloadError(n,o)})):(t.treatQueueDeferred(n,o,!1,l),t.notifyFileDownloadError(n,o),Promise.reject(e))})})},e.prototype.removeFromQueue=function(e,t){return E(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.deleteRecords(this.QUEUE_TABLE,{siteId:e,fileId:t})]}})})},e.prototype.removeFileById=function(e,t){var n=this;return this.sitesProvider.getSiteDb(e).then(function(o){var r,i=n.getFilepoolFolderPath(e)+"/"+t;return n.hasFileInPool(e,t).then(function(e){return r=e.url,e.extension&&(i+="."+e.extension),i}).catch(function(){return i}).then(function(i){var l=[];return l.push(o.deleteRecords(n.FILES_TABLE,{fileId:t})),l.push(o.deleteRecords(n.LINKS_TABLE,{fileId:t})),n.fileProvider.isAvailable()&&l.push(n.fileProvider.removeFile(i).catch(function(e){if(!e||1!=e.code)return Promise.reject(e)})),Promise.all(l).then(function(){return n.notifyFileDeleted(e,t),n.pluginFileDelegate.fileDeleted(r,i,e).catch(function(e){})})})})},e.prototype.removeFilesByComponent=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(e).then(function(e){return o.getComponentFiles(e,t,n)}).then(function(t){return Promise.all(t.map(function(t){return o.removeFileById(e,t.fileId)}))})},e.prototype.removeFileByUrl=function(e,t){var n=this;return this.fixPluginfileURL(e,t).then(function(t){var o=n.getFileIdByUrl(t.fileurl);return n.removeFileById(e,o)})},e.prototype.removeRevisionFromUrl=function(e){var t=this.getPluginFileArgs(e);return t?this.pluginFileDelegate.removeRevisionFromUrl(e,t):e},e.prototype.setPackagePreviousStatus=function(e,t,n){var o=this;return n=this.fixComponentId(n),this.logger.debug("Set previous status for package "+t+" "+n),this.sitesProvider.getSite(e).then(function(e){var r=o.getPackageId(t,n);return e.getDb().getRecord(o.PACKAGES_TABLE,{id:r}).then(function(i){var l={};return i.status==y.a.DOWNLOADING&&(l.downloadTime=i.previousDownloadTime),l.status=i.previous||y.a.NOT_DOWNLOADED,l.updated=Date.now(),o.logger.debug("Set previous status '"+i.status+"' for package "+t+" "+n),e.getDb().updateRecords(o.PACKAGES_TABLE,l,{id:r}).then(function(){return o.triggerPackageStatusChanged(e.id,l.status,t,n),l.status})})})},e.prototype.shouldDownload=function(e){return e<=this.DOWNLOAD_THRESHOLD||this.appProvider.isWifi()&&e<=this.WIFI_DOWNLOAD_THRESHOLD},e.prototype.shouldDownloadBeforeOpen=function(e,t){return t>=0&&t<=this.DOWNLOAD_THRESHOLD?Promise.resolve():this.appProvider.isDesktop()?Promise.resolve():this.utils.getMimeTypeFromUrl(e).then(function(e){if(-1!=e.indexOf("video")||-1!=e.indexOf("audio"))return Promise.reject(null)})},e.prototype.storePackageStatus=function(e,t,n,o,r){var i=this;return this.logger.debug("Set status '"+t+"' for package "+n+" "+o),o=this.fixComponentId(o),this.sitesProvider.getSite(e).then(function(l){var a,s,u=i.getPackageId(n,o);return t==y.a.DOWNLOADING&&(a=i.timeUtils.timestamp()),l.getDb().getRecord(i.PACKAGES_TABLE,{id:u}).then(function(e){return void 0!==r&&null!==r||(r=e.extra),void 0===a?(a=e.downloadTime,s=e.previousDownloadTime):s=e.downloadTime,e.status}).catch(function(){}).then(function(c){var d={id:u,component:n,componentId:o,status:t,previous:c,updated:Date.now(),downloadTime:a,previousDownloadTime:s,extra:r};return(c===t?Promise.resolve():l.getDb().insertRecord(i.PACKAGES_TABLE,d)).then(function(){i.triggerPackageStatusChanged(e,t,n,o)})})})},e.prototype.treatCSSCode=function(e,t,n,o,r,i){var l,a=this,s=this.domUtils.extractUrlsFromCSS(n),u=[],c=!1;return u.push(this.getFilePathByUrl(e,t).then(function(e){l=e})),s.forEach(function(t){0==t.indexOf("http")&&u.push(a.downloadUrl(e,t,!1,o,r,0,void 0,void 0,void 0,i).then(function(e){e!=t&&(n=n.replace(new RegExp(a.textUtils.escapeForRegex(t),"g"),e),c=!0)}).catch(function(e){a.logger.warn("Error treating file ",t,e)}))}),Promise.all(u).then(function(){if(c)return a.fileProvider.writeFile(l,n)}).then(function(){return n})},e.prototype.treatQueueDeferred=function(e,t,n,o){this.queueDeferreds[e]&&this.queueDeferreds[e][t]&&(n?this.queueDeferreds[e][t].resolve():this.queueDeferreds[e][t].reject(o),delete this.queueDeferreds[e][t])},e.prototype.triggerPackageStatusChanged=function(e,t,n,o){var r={component:n,componentId:this.fixComponentId(o),status:t};this.eventsProvider.trigger(l.a.PACKAGE_STATUS_CHANGED,r,e)},e.prototype.updatePackageDownloadTime=function(e,t,n){var o=this;return n=this.fixComponentId(n),this.sitesProvider.getSite(e).then(function(e){var r=o.getPackageId(t,n);return e.getDb().updateRecords(o.PACKAGES_TABLE,{downloadTime:o.timeUtils.timestamp()},{id:r})})},e=P([Object(o.A)(),O("design:paramtypes",[u.a,i.a,a.a,d.a,f.a,m.a,v.a,h.a,g.a,_.a,l.a,s.a,r.a,c.a,p.a,o.M])],e)}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(150),i=n(11),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.langProvider=e,this.textUtils=t}return e.prototype.addOrRemoveWWW=function(e){return e&&(e=e.match(/http(s)?:\/\/www\./)?e.replace("www.",""):(e=e.replace("https://","https://www.")).replace("http://","http://www.")),e},e.prototype.addParamsToUrl=function(e,t,n,o){var r=-1!=e.indexOf("?")?"&":"?";for(var i in t){var l=t[i];o&&"boolean"==typeof l&&(l=l?1:0),"object"!=typeof l&&(e+=r+i+"="+l,r="&")}return n&&(e+="#"+n),e},e.prototype.buildLink=function(e,t){return'<a href="'+e+'">'+t+"</a>"},e.prototype.canUseTokenPluginFile=function(e,t,n){return n&&!e.match(/[\&?]file=/)&&(0===e.indexOf(this.textUtils.concatenatePaths(t,"pluginfile.php"))||0===e.indexOf(this.textUtils.concatenatePaths(t,"webservice/pluginfile.php")))},e.prototype.extractUrlParams=function(e){var t,n=this,o={},r=e.split("#"),i=r[0].split("?");return i.length>2&&(i.splice(0,2),t="?"+i.join("?"),r[0]=r[0].replace(t,"@@@SUBPARAMS@@@")),r[0].replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,r,i){return o[r]=void 0!==i?n.textUtils.decodeURIComponent(i):"",t&&(o[r]=o[r].replace("@@@SUBPARAMS@@@",t)),e}),r.length>1&&(r.shift(),o.urlHash=r.join("#")),o},e.prototype.fixPluginfileURL=function(e,t,n,o){if(!e)return"";e=e.replace(/&amp;/g,"&");var r=o&&this.canUseTokenPluginFile(e,n,o);return(r||-1==e.indexOf("token="))&&this.isPluginFileUrl(e)&&0===e.indexOf(this.textUtils.addEndingSlash(n))&&this.isPluginFileUrl(e)&&0===e.indexOf(this.textUtils.addEndingSlash(n))?r?e=e.replace(/(\/webservice)?\/pluginfile\.php/,"/tokenpluginfile.php/"+o):(e.match(/\?[^=]+=/)?e+="&":e+="?",0===(e+="token="+t+"&offline=1").indexOf(this.textUtils.concatenatePaths(n,"pluginfile.php"))&&(e=e.replace("/pluginfile","/webservice/pluginfile")),e):e},e.prototype.formatURL=function(e){return e=e.trim(),/^http(s)?\:\/\/.*/i.test(e)||(e="https://"+e),e=e.replace(/^http/i,"http"),e=e.replace(/^https/i,"https"),e=e.replace(/\/$/,"")},e.prototype.getDocsUrl=function(e,t){void 0===t&&(t="Mobile_app");var n="https://docs.moodle.org/en/"+t;if(void 0!==e){var o=e.substr(0,3).replace(".","");parseInt(o)>=24&&(n=n.replace("https://docs.moodle.org/","https://docs.moodle.org/"+o+"/"))}return this.langProvider.getCurrentLanguage().then(function(e){return n.replace("/en/","/"+e+"/")}).catch(function(){return n})},e.prototype.getYoutubeEmbedUrl=function(e){if(e){var t,n={},o=(e=this.textUtils.decodeHTML(e)).match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(o&&11===o[2].length&&(t=o[2]),t)return(o=e.match(/[?&]list=([^#\&\?]+)/))&&o[1]&&(n.list=o[1]),(o=e.match(/[?&]start=(\d+)/))&&o[1]?n.start=parseInt(o[1],10):(o=e.match(/[?&]t=(\d+h)?(\d+m)?(\d+s)?/))&&(n.start=(o[1]?3600*parseInt(o[1],10):0)+(o[2]?60*parseInt(o[2],10):0)+(o[3]?parseInt(o[3],10):0)),this.addParamsToUrl("https://www.youtube.com/embed/"+t,n)}},e.prototype.getLastFileWithoutParams=function(e){var t=e.substr(e.lastIndexOf("/")+1);return-1!=t.indexOf("?")&&(t=t.substr(0,t.indexOf("?"))),t},e.prototype.getUrlProtocol=function(e){if(e){var t=e.match(/^([^\/:\.\?]*):\/\//);return t&&t[1]?t[1]:void 0}},e.prototype.getUrlScheme=function(e){if(e){var t=e.match(/^([a-z][a-z0-9+\-.]*):/);return t&&t[1]?t[1]:void 0}},e.prototype.getUsernameFromUrl=function(e){if(e.indexOf("@")>-1){var t=e.replace(/^[^?@\/]*:\/\//,"").match(/[^@]*/);if(t&&t.length&&!t[0].match(/[\/|?]/))return t[0]}},e.prototype.isAbsoluteURL=function(e){return/^[^:]{2,}:\/\//i.test(e)||/^(tel:|mailto:|geo:)/.test(e)},e.prototype.isDownloadableUrl=function(e){return this.isPluginFileUrl(e)||this.isThemeImageUrl(e)||this.isGravatarUrl(e)},e.prototype.isGravatarUrl=function(e){return e&&-1!==e.indexOf("gravatar.com/avatar")},e.prototype.isHttpURL=function(e){return/^https?\:\/\/.+/i.test(e)},e.prototype.isPluginFileUrl=function(e){return e&&-1!==e.indexOf("/pluginfile.php")},e.prototype.isThemeImageUrl=function(e){return e&&-1!==e.indexOf("/theme/image.php")},e.prototype.removeProtocolAndWWW=function(e){return e=e.replace(/.*?:\/\//g,""),e=e.replace(/^www./,"")},e.prototype.removeUrlParams=function(e){var t=e.match(/^[^\?]+/);return t&&t[0]},e.prototype.unfixPluginfileURL=function(e,t){return e?(e=e.replace(/&amp;/g,"&"),t&&0!==e.indexOf(this.textUtils.addEndingSlash(t))?e:((e=e.replace(/\/webservice\/pluginfile\.php\//,"/pluginfile.php/")).replace(/([?&])token=[^&]*&?/,"$1"),e)):""},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(14),l=(n.n(i),n(40)),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.translate=e,this.FORMAT_REPLACEMENTS={"%a":"ddd","%A":"dddd","%d":"DD","%e":"D","%j":"DDDD","%u":"E","%w":"e","%U":"ww","%V":"WW","%W":"ww","%b":"MMM","%B":"MMMM","%h":"MMM","%m":"MM","%C":"","%g":"GG","%G":"GGGG","%y":"YY","%Y":"YYYY","%H":"HH","%k":"H","%I":"hh","%l":"h","%M":"mm","%p":"A","%P":"a","%r":"hh:mm:ss A","%R":"HH:mm","%S":"ss","%T":"HH:mm:ss","%X":"LTS","%z":"ZZ","%Z":"ZZ","%c":"LLLL","%D":"MM/DD/YY","%F":"YYYY-MM-DD","%s":"X","%x":"L","%n":"\n","%t":"\t","%%":"%"}}return e.prototype.convertPHPToMoment=function(e){if("string"!=typeof e)return"";for(var t="",n=!1,o=0;o<e.length;o++){var r=e[o];"%"==r?(r+=e[++o]||"",n&&(n=!1,t+="]"),t+=void 0!==this.FORMAT_REPLACEMENTS[r]?this.FORMAT_REPLACEMENTS[r]:r):(n||(n=!0,t+="["),t+=r)}return n&&(t+="]"),t},e.prototype.fixFormatForDatetime=function(e){if(!e)return"";var t=e.replace(/[\[\]]/g,"");return-1!=t.indexOf("A")&&(t=(t=t.replace(/ ?A/g,"")).replace(/h/g,"H")),t},e.prototype.formatTime=function(e){var t,n,o,r,i,a,s;s=(t=Math.abs(e))-(n=Math.floor(t/l.a.SECONDS_YEAR))*l.a.SECONDS_YEAR,s=t-(o=Math.floor(s/l.a.SECONDS_DAY))*l.a.SECONDS_DAY,s-=(r=Math.floor(s/l.a.SECONDS_HOUR))*l.a.SECONDS_HOUR,i=Math.floor(s/l.a.SECONDS_MINUTE);var u=this.translate.instant("core."+(1==(a=s-i*l.a.SECONDS_MINUTE)?"sec":"secs")),c=this.translate.instant("core."+(1==i?"min":"mins")),d=this.translate.instant("core."+(1==r?"hour":"hours")),f=this.translate.instant("core."+(1==o?"day":"days")),p=this.translate.instant("core."+(1==n?"year":"years")),h="",m="",_="",g="",v="";return n&&(h=n+" "+p),o&&(m=o+" "+f),r&&(_=r+" "+d),i&&(g=i+" "+c),a&&(v=a+" "+u),n?h+" "+m:o?m+" "+_:r?_+" "+g:i?g+" "+v:a?v:this.translate.instant("core.now")},e.prototype.formatDuration=function(e,t){t=t||5;var n=i.duration(e,"seconds"),o="";return t&&n.years()>0&&(o+=" "+i.duration(n.years(),"years").humanize(),t--),t&&n.months()>0&&(o+=" "+i.duration(n.months(),"months").humanize(),t--),t&&n.days()>0&&(o+=" "+i.duration(n.days(),"days").humanize(),t--),t&&n.hours()>0&&(o+=" "+i.duration(n.hours(),"hours").humanize(),t--),t&&n.minutes()>0&&(o+=" "+i.duration(n.minutes(),"minutes").humanize(),t--),o.trim()},e.prototype.readableTimestamp=function(){return i(Date.now()).format("YYYYMMDDHHmmSS")},e.prototype.timestamp=function(){return Math.round(Date.now()/1e3)},e.prototype.userDate=function(e,t,n,o,r){return void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!0),t=this.translate.instant(t||"core.strftimedaydatetime"),o&&(t=t.replace(/%d/g,"%e")),r&&(t=t.replace("%I","%l")),n&&(t=this.convertPHPToMoment(t)),i(e).format(t)},e.prototype.toDatetimeFormat=function(e){return e=e||Date.now(),this.userDate(e,"YYYY-MM-DDTHH:mm:ss.SSS",!1)+"Z"},e.prototype.convertToTimestamp=function(e){return"string"==typeof e&&"Z"==e.slice(-1)?i(e).unix()-60*i().utcOffset():i(e).unix()},e.prototype.getLocalizedDateFormat=function(e){return i.localeData().longDateFormat(e)},e.prototype.getMidnightForTimestamp=function(e){return e?i(1e3*e).startOf("day").unix():i().startOf("day").unix()},e=a([Object(o.A)(),s("design:paramtypes",[r.c])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return K});var o=n(0),r=n(5),i=n(3),l=n(31),a=n(106),s=n(51),u=n(84),c=n(94),d=n(378),f=n(28),p=n(257),h=n(319),m=n(114),_=n(215),g=n(326),v=n(75),y=n(78),b=n(83),P=n(569),O=n(570),E=n(444),C=n(1582),I=n(327),R=n(382),S=n(1583),w=n(200),A=n(76),D=n(87),j=n(198),k=n(1550),T=n(1555),x=n(1556),M=n(571),N=n(395),U=n(316),F=n(732),L=n(1584),H=n(273),B=n(182),q=n(492),G=n(565),V=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},K=function(){function e(){}return e=V([Object(o.I)({declarations:[s.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a,I.a,R.a,S.a,w.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,N.a,U.a,F.a,L.a,H.a,B.a,q.a,G.a],entryComponents:[P.a,O.a,M.a,G.a],imports:[r.k,i.b.forChild(),l.a,a.a],exports:[s.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,E.a,C.a,I.a,R.a,S.a,w.a,A.a,D.a,j.a,k.a,T.a,x.a,N.a,U.a,F.a,L.a,H.a,B.a,q.a,G.a]})],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(72),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},c=function(){function e(e,t,n,o,r){var i=this;this.masterNav=e,this.when="md",this.masterPageName="",this.masterPageIndex=0,this.loadDetailPage=!1,this.masterCanLeaveOverridden=!1,this.ignoreSplitChanged=!1,this.detailPage=null,this.element=t.nativeElement,this.audioCaptureSubscription=n.onAudioCapture.subscribe(function(e){i.ignoreSplitChanged=e}),this.languageChangedSubscription=r.onLangChange.subscribe(function(e){setTimeout(function(){i.side=o.isRTL?"right":"left",i.menu.setElementAttribute("side",i.side)})})}return e.prototype.ngOnInit=function(){this.masterPageName=this.masterNav.getActive().component.name,this.masterPageIndex=this.masterNav.indexOf(this.masterNav.getActive()),this.emptyDetails(),this.handleCanLeave()},e.prototype.getDetailsNav=function(){return this.isEnabled?this.detailNav:this.masterNav},e.prototype.getMasterNav=function(){return this.masterNav},e.prototype.handleCanLeave=function(){var e=this;this.detailsDidEnterSubscription=this.detailNav.viewDidEnter.subscribe(function(t){if(e.isOn()){var n=e.masterNav.getActive();e.masterCanLeaveOverridden&&(n.instance.ionViewCanLeave=e.originalMasterCanLeave,e.originalMasterCanLeave=void 0,e.masterCanLeaveOverridden=!1),t&&t.instance&&t.instance.ionViewCanLeave&&(n.instance.ionViewCanLeave&&(e.originalMasterCanLeave=n.instance.ionViewCanLeave),e.masterCanLeaveOverridden=!0,n.instance.ionViewCanLeave=function(){return Promise.resolve().then(function(){if(e.originalMasterCanLeave){var t=e.originalMasterCanLeave.apply(n.instance);return"boolean"!=typeof t||t?t:Promise.reject(null)}}).then(function(){return t.instance.ionViewCanLeave()})})}})},e.prototype.isOn=function(){return!!this.isEnabled},e.prototype.push=function(e,t,n){var o=this;if(!this.pushOngoing)if(void 0!==this.isEnabled||n){this.pushOngoing=!0;var r=void 0;this.isEnabled?r=this.detailNav.setRoot(e,t):(this.loadDetailPage={component:e,data:t},r=this.masterNav.push(e,t)),r.finally(function(){o.pushOngoing=!1})}else setTimeout(function(){o.push(e,t,!0)},200)},e.prototype.emptyDetails=function(){this.loadDetailPage=!1,this.detailNav.setRoot("CoreSplitViewPlaceholderPage")},e.prototype.onSplitPaneChanged=function(e){this.ignoreSplitChanged||(this.isEnabled=e,this.masterNav&&this.detailNav&&(e?this.activateSplitView():this.deactivateSplitView()))},e.prototype.activateSplitView=function(){var e=this.masterNav.getActive(),t=e.component.name;this.masterNav.getPrevious()&&this.masterNav.getPrevious().component.name==this.masterPageName&&(t!=this.masterPageName?(this.masterNav.pop(),this.detailNav.setRoot(e.component,e.data)):this.loadDetailPage&&this.detailNav.setRoot(this.loadDetailPage.component,this.loadDetailPage.data),this.loadDetailPage=!1)},e.prototype.deactivateSplitView=function(){var e=this.detailNav.getActive();"CoreSplitViewPlaceholderPage"!=e.component.name&&this.masterNav.insert(this.masterPageIndex+1,e.component,e.data)},e.prototype.ngOnDestroy=function(){this.detailsDidEnterSubscription&&this.detailsDidEnterSubscription.unsubscribe(),this.audioCaptureSubscription.unsubscribe(),this.languageChangedSubscription.unsubscribe()},a([Object(o._9)("detailNav"),s("design:type",r.r)],e.prototype,"detailNav",void 0),a([Object(o._9)("menu"),s("design:type",r.o)],e.prototype,"menu",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"when",void 0),e=a([Object(o.m)({selector:"core-split-view",templateUrl:"core-split-view.html"}),u(0,Object(o.N)()),s("design:paramtypes",[r.s,o.t,l.a,r.v,i.c])],e)}()},,,function(e,t,n){"use strict";var o=n(0),r=n(376),i=n(115),l=n(4),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.domUtils=t,this.fileHelper=n,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.element.addEventListener("click",function(t){if(e.file){t.preventDefault(),t.stopPropagation();var n=e.domUtils.showModalLoading();e.fileHelper.downloadAndOpenFile(e.file,e.component,e.componentId).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)}).finally(function(){n.dismiss()})}})},a([Object(o.D)("core-download-file"),s("design:type",Object)],e.prototype,"file",void 0),a([Object(o.D)(),s("design:type",String)],e.prototype,"component",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"componentId",void 0),e=a([Object(o.s)({selector:"[core-download-file]"}),s("design:paramtypes",[o.t,l.a,i.a])],e)}(),c=n(229),d=n(255),f=n(48),p=n(174),h=n(2),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n){this.domUtils=t,this.utils=n,this.lastFocusOut=0,this.element=e.nativeElement}return e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){var t,n,o=e.utils.isTrueOrOne(e.inButton);if("string"==typeof e.selector&&e.selector&&(t=document.querySelectorAll(e.selector),n=t[t.length-1])){if(o)e.button=e.element,e.input=n;else if(e.button=n,e.input="ION-INPUT"==e.element.tagName?e.element.querySelector("input"):"ION-TEXTAREA"==e.element.tagName?e.element.querySelector("textarea"):e.element,!e.input)return;e.focusOutListener=e.focusOut.bind(e),e.input.addEventListener("focusout",e.focusOutListener),e.clickListener=e.buttonClicked.bind(e),e.button.addEventListener("click",e.clickListener)}})},e.prototype.ngOnDestroy=function(){this.button&&this.clickListener&&this.button.removeEventListener("click",this.clickListener),this.input&&this.focusOutListener&&this.input.removeEventListener("focusout",this.focusOutListener)},e.prototype.buttonClicked=function(){document.activeElement==this.input?(this.focusAgainListener=this.focusElementAgain.bind(this),this.input.addEventListener("focusout",this.focusAgainListener)):document.activeElement==this.button&&Date.now()-this.lastFocusOut<200&&setTimeout(this.focusElementAgain.bind(this),0)},e.prototype.focusElementAgain=function(){var e=this;if(this.domUtils.focusElement(this.input),this.focusAgainListener){var t=this.focusAgainListener;clearTimeout(this.stopFocusAgainTimeout),this.stopFocusAgainTimeout=setTimeout(function(){e.input.removeEventListener("focusout",t),t==e.focusAgainListener&&delete e.focusAgainListener},1e3)}},e.prototype.focusOut=function(){this.lastFocusOut=Date.now()},m([Object(o.D)("core-keep-keyboard"),_("design:type",String)],e.prototype,"selector",void 0),m([Object(o.D)(),_("design:type",Object)],e.prototype,"inButton",void 0),e=m([Object(o.s)({selector:"[core-keep-keyboard]"}),_("design:paramtypes",[o.t,l.a,h.a])],e)}(),v=n(479),y=n(381),b=n(1580),P=n(473),O=n(491);n.d(t,"a",function(){return C});var E=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},C=function(){function e(){}return e=E([Object(o.I)({declarations:[r.a,u,c.a,d.a,f.a,g,p.a,v.a,y.a,b.a,P.a,O.a],imports:[],exports:[r.a,u,c.a,d.a,f.a,g,p.a,v.a,y.a,b.a,P.a,O.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(10),i=n(9),l=n(6),a=n(1),s=n(36),u=n(41),c=n(13),d=n(52),f=n(53),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,l,a,s){var u=this;this.appProvider=n,this.sitesProvider=o,this.filterDelegate=r,this.courseProvider=l,this.filterProvider=a,this.coursesProvider=s,this.moduleContextsCache={},this.logger=e.getInstance("CoreFilterHelperProvider"),t.on(i.a.WS_CACHE_INVALIDATED,function(e){delete u.moduleContextsCache[e.siteId]}),t.on(i.a.SITE_STORAGE_DELETED,function(e){delete u.moduleContextsCache[e.siteId]})}return e.prototype.getBlocksContexts=function(e,t){return this.courseProvider.getCourseBlocks(e,t).then(function(e){var t=[];return e.forEach(function(e){t.push({contextlevel:"block",instanceid:e.instanceid})}),t})},e.prototype.getCacheableFilters=function(e,t,n,o,r){var i=this,l=this.getFromMemoryCache(o.courseId,e,t,r);if(l)return Promise.resolve(l);var a=r.getId();return n().then(function(n){return i.filterProvider.getAvailableInContexts(n,a).then(function(n){return i.storeInMemoryCache(o.courseId,n,a),n[e][t]||[]})})},e.prototype.getCourseContexts=function(e,t){return this.coursesProvider.getCourseIdsIfEnrolled(e,t).then(function(e){var t=[];return e.forEach(function(e){t.push({contextlevel:"course",instanceid:e})}),t})},e.prototype.getCourseModulesContexts=function(e,t){return this.courseProvider.getSections(e,!1,!0,void 0,t).then(function(e){var t=[];return e.forEach(function(e){e.modules&&e.modules.forEach(function(e){e.uservisible&&t.push({contextlevel:"module",instanceid:e.id})})}),t})},e.prototype.getFilters=function(e,t,n,o){var r=this;return n=n||{},n.contextLevel=e,n.instanceId=t,n.filter=!1,this.sitesProvider.getSite(o).then(function(i){return o=i.getId(),r.filterProvider.canGetAvailableInContext(o).then(function(l){if(!l)return n.filter=!0,r.filterDelegate.getEnabledFilters(e,t);return("system"==e||"course"==e&&t==i.getSiteHomeId()?Promise.resolve(!0):r.siteHasFiltersToTreat(n,o)).then(function(l){if(l){if(n.filter=!0,"module"==e&&n.courseId){var a=r.getCourseModulesContexts.bind(r,n.courseId,o);return r.getCacheableFilters(e,t,a,n,i)}if("course"==e){a=r.getCourseContexts.bind(r,t,o);return r.getCacheableFilters(e,t,a,n,i)}if("block"==e&&n.courseId&&r.courseProvider.canGetCourseBlocks(i)){a=r.getBlocksContexts.bind(r,n.courseId,o);return r.getCacheableFilters(e,t,a,n,i)}return r.filterProvider.getAvailableInContext(e,t,o)}return[]})})}).catch(function(n){return r.logger.error("Error getting filters, return an empty array",n,e,t),[]})},e.prototype.getFiltersAndFormatText=function(e,t,n,o,r){var i=this;return this.getFilters(t,n,o,r).then(function(t){return i.filterProvider.formatText(e,o,t,r).then(function(e){return{text:e,filters:t}})})},e.prototype.getFromMemoryCache=function(e,t,n,o){var r=o.getId();if(this.moduleContextsCache[r]&&this.moduleContextsCache[r][e]){var i=this.moduleContextsCache[r][e];if(!this.appProvider.isOnline()||Date.now()<=i.time+o.getExpirationDelay(f.a.FREQUENCY_RARELY))return i.contexts[t]&&i.contexts[t][n]}},e.prototype.siteHasFiltersToTreat=function(e,t){var n=this;return e=e||{},this.sitesProvider.getSite(t).then(function(t){return n.filterProvider.getAvailableInContext("system",0,t.getId()).then(function(o){return n.filterDelegate.shouldBeApplied(o,e,t)})})},e.prototype.storeInMemoryCache=function(e,t,n){this.moduleContextsCache[n]=this.moduleContextsCache[n]||{},this.moduleContextsCache[n][e]={contexts:t,time:Date.now()}},e=p([Object(o.A)(),h("design:paramtypes",[l.a,i.a,r.a,a.a,s.a,c.a,u.a,d.a])],e)}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(132),s=n(98),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,"CoreFilterDelegate",t,n,o)||this;return i.sitesProvider=n,i.defaultHandler=r,i.featurePrefix="CoreFilterDelegate_",i.handlerNameProperty="filterName",i}return u(t,e),t.prototype.filterText=function(e,t,n,o,r){var i=this;return this.handlersInitPromise.then(function(){return i.sitesProvider.getSite(r)}).then(function(l){var a=Promise.resolve(e);return t=t||[],n=n||{},t.forEach(function(e){i.isEnabledAndShouldApply(e,n,l,o)&&(a=a.then(function(t){return Promise.resolve(i.executeFunctionOnEnabled(e.filter,"filter",[t,e,n,r])).catch(function(n){return i.logger.error("Error applying filter"+e.filter,n),t})}))}),a.then(function(e){return e=e.replace(/<\/?nolink>/gi,"")})})},t.prototype.getEnabledFilters=function(e,t){var n=[];for(var o in this.enabledHandlers){n.push({contextid:-1,contextlevel:e,filter:this.enabledHandlers[o].filterName,inheritedstate:1,instanceid:t,localstate:1})}return n},t.prototype.handleHtml=function(e,t,n,o,r,i,l,a){var s=this;return this.handlersInitPromise.then(function(){return s.sitesProvider.getSite(a)}).then(function(u){var c=Promise.resolve();return t=t||[],o=o||{},t.forEach(function(t){s.isEnabledAndShouldApply(t,o,u,r)&&(c=c.then(function(){return Promise.resolve(s.executeFunctionOnEnabled(t.filter,"handleHtml",[e,t,o,n,i,l,a])).catch(function(e){s.logger.error("Error handling HTML"+t.filter,e)})}))}),c})},t.prototype.isEnabledAndShouldApply=function(e,t,n,o){return-1!=e.localstate&&(0!=e.localstate||-1!=e.inheritedstate)&&(!!this.shouldFilterBeApplied(e,t,n)&&(!o||-1==o.indexOf(e.filter)))},t.prototype.shouldBeApplied=function(e,t,n){var o=this;return this.handlersInitPromise.then(function(){for(var r=0;r<e.length;r++)if(o.shouldFilterBeApplied(e[r],t,n))return!0})},t.prototype.shouldFilterBeApplied=function(e,t,n){return!!this.hasHandler(e.filter,!0)&&this.executeFunctionOnEnabled(e.filter,"shouldBeApplied",[t,n])},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,r.a,a.a])],t)}(s.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return A});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(57),s=n(18),u=n(115),c=n(1),d=n(4),f=n(11),p=n(24),h=n(2),m=n(102),_=n(232),g=n(52),v=n(13),y=n(352),b=n(61),P=n(50),O=n(125),E=n(40),C=n(6),I=n(14),R=(n.n(I),n(32)),S=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_,g,v,y,b,P){this.courseProvider=e,this.domUtils=t,this.moduleDelegate=n,this.prefetchDelegate=o,this.filepoolProvider=r,this.sitesProvider=i,this.textUtils=l,this.timeUtils=a,this.utils=s,this.translate=u,this.loginHelper=c,this.courseOptionsDelegate=d,this.siteHomeProvider=f,this.eventsProvider=p,this.fileHelper=h,this.appProvider=m,this.fileProvider=_,this.injector=g,this.coursesProvider=v,this.courseOffline=y,this.filterHelper=P,this.courseDwnPromises={},this.logger=b.getInstance("CoreCourseHelperProvider")}return e.prototype.addHandlerDataForModules=function(e,t,n,o,r){var i=this,l=!1;return e.forEach(function(e){e&&i.sectionHasContent(e)&&e.modules&&(l=!0,e.modules.forEach(function(l){l.handlerData=i.moduleDelegate.getModuleDataFor(l.modname,l,t,e.id,r),l.completiondata&&l.completion>0?(l.completiondata.courseId=t,l.completiondata.courseName=o,l.completiondata.tracking=l.completion,l.completiondata.cmid=l.id,l.completionstatus=l.completiondata):n&&void 0!==n[l.id]&&(l.completiondata=n[l.id],l.completiondata.courseId=t,l.completiondata.courseName=o,l.completionstatus=l.completiondata),l.isStealth=0===l.visibleoncoursepage||l.visible&&!e.visible}))}),l},e.prototype.calculateSectionStatus=function(e,t,n,o){var r=this;return void 0===o&&(o=!0),e.id==v.a.ALL_SECTIONS_ID?Promise.reject(null):this.prefetchDelegate.getModulesStatus(e.modules,t,e.id,n,!0,o).then(function(t){var n=r.getSectionDownloadId(e);return r.prefetchDelegate.isBeingDownloaded(n)&&(t.status=E.a.DOWNLOADING),e.downloadStatus=t.status,e.canCheckUpdates=r.prefetchDelegate.canCheckUpdates(),t.status===E.a.DOWNLOADING&&r.prefetchDelegate.isBeingDownloaded(e.id)?(e.isDownloading=!0,r.prefetchDelegate.setOnProgress(n,function(t){e.count=t.count,e.total=t.total})):(e.isDownloading=!1,e.total=0),t})},e.prototype.calculateSectionsStatus=function(e,t,n,o){var r=this;void 0===o&&(o=!0);var i,l,a=[];return e.forEach(function(e){e.id===v.a.ALL_SECTIONS_ID?(i=e,e.isCalculating=!0):(e.isCalculating=!0,a.push(r.calculateSectionStatus(e,t,n,o).then(function(e){l=r.filepoolProvider.determinePackagesStatus(l,e.status)}).finally(function(){e.isCalculating=!1})))}),Promise.all(a).then(function(){i&&(i.downloadStatus=l,i.canCheckUpdates=r.prefetchDelegate.canCheckUpdates(),i.isDownloading=l===E.a.DOWNLOADING)}).finally(function(){i&&(i.isCalculating=!1)})},e.prototype.confirmAndPrefetchCourse=function(e,t,n,o,r){var i=this,l=e.prefetchCourseIcon,a=e.title,s=this.sitesProvider.getCurrentSiteId();return e.downloadSucceeded=!1,e.prefetchCourseIcon="spinner",e.title="core.downloading",(n?Promise.resolve(n):this.courseProvider.getSections(t.id,!1,!0)).then(function(n){return i.confirmDownloadSizeSection(t.id,void 0,n,!0).then(function(){var l=[];return o||l.push(i.courseOptionsDelegate.getHandlersToDisplay(i.injector,t).then(function(e){o=e})),r||l.push(i.courseOptionsDelegate.getMenuHandlersToDisplay(i.injector,t).then(function(e){r=e})),Promise.all(l).then(function(){return i.prefetchCourse(t,n,o,r,s)}).then(function(){return e.downloadSucceeded=!0,!0})},function(t){return e.prefetchCourseIcon=l,e.title=a,Promise.reject(t)})})},e.prototype.confirmAndPrefetchCourses=function(e,t){var n=this,o=this.sitesProvider.getCurrentSiteId();return this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var r=[],i=e.length,l=0;return e.forEach(function(e){var a,s,u,c=[],d=!0;c.push(n.courseProvider.getSections(e.id,!1,!0).then(function(e){a=e})),c.push(n.courseOptionsDelegate.getHandlersToDisplay(n.injector,e).then(function(e){s=e})),c.push(n.courseOptionsDelegate.getMenuHandlersToDisplay(n.injector,e).then(function(e){u=e})),r.push(Promise.all(c).then(function(){return n.prefetchCourse(e,a,s,u,o)}).catch(function(e){return d=!1,Promise.reject(e)}).finally(function(){l++,t&&t({count:l,total:i,courseId:e.id,success:d})}))}),t&&t({count:0,total:i,success:!0}),n.utils.allPromises(r)})},e.prototype.confirmAndRemoveFiles=function(e,t){var n=this;return this.domUtils.showDeleteConfirm("core.course.confirmdeletemodulefiles").then(function(){return n.prefetchDelegate.removeModuleFiles(e,t)}).catch(function(e){e&&n.domUtils.showErrorModal(e)})},e.prototype.confirmDownloadSizeSection=function(e,t,n,o){var r,i=this,l=!1;if(t&&t.id!=v.a.ALL_SECTIONS_ID)r=this.prefetchDelegate.getDownloadSize(t.modules,e),l=this.filepoolProvider.extractDownloadableFilesFromHtml(t.summary).length>0;else{var a=[],s={size:0,total:!0};n.forEach(function(t){t.id!=v.a.ALL_SECTIONS_ID&&(a.push(i.prefetchDelegate.getDownloadSize(t.modules,e).then(function(e){s.total=s.total&&e.total,s.size+=e.size})),!l&&i.filepoolProvider.extractDownloadableFilesFromHtml(t.summary).length>0&&(l=!0))}),r=Promise.all(a).then(function(){return s})}return r.then(function(e){return l&&(e.total=!1),i.domUtils.confirmDownloadSize(e,void 0,void 0,void 0,void 0,o)})},e.prototype.contextMenuPrefetch=function(e,t,n,o){var r=this,i=e.prefetchStatusIcon;return e.prefetchStatusIcon="spinner",this.prefetchDelegate.getModuleDownloadSize(t,n,!0).then(function(e){return r.domUtils.confirmDownloadSize(e).then(function(){return r.prefetchDelegate.prefetchModule(t,n,!0)})}).then(function(){o&&o()}).catch(function(t){e.prefetchStatusIcon=i,e.isDestroyed||r.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)})},e.prototype.determineCoursesStatus=function(e){var t=this,n=[],o=this.sitesProvider.getCurrentSiteId();return e.forEach(function(e){n.push(t.courseProvider.getCourseStatus(e.id,o))}),Promise.all(n).then(function(e){for(var n=e[0],o=1;o<e.length;o++)n=t.filepoolProvider.determinePackagesStatus(n,e[o]);return n})},e.prototype.downloadModuleAndOpenFile=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();return(r?Promise.resolve(r):this.courseProvider.loadModuleContents(e,t).then(function(){r=e.contents})).then(function(){return r&&r.length?l.sitesProvider.getSite(i):Promise.reject(l.utils.createFakeWSError("core.filenotfound",!0))}).then(function(a){var s=r[0],u=l.fileHelper.getFileUrl(s);return l.fileHelper.shouldOpenInBrowser(s)?l.appProvider.isOnline()?a.checkAndFixPluginfileURL(u).then(function(a){a=(a=(a=a.replace("&offline=1","")).replace(/forcedownload=\d+&/,"")).replace(/[\?|\&]forcedownload=\d+/,""),l.utils.openInBrowser(a),l.fileProvider.isAvailable()&&l.downloadModule(e,t,n,o,r,i)}):l.filepoolProvider.getInternalUrlByUrl(i,u).then(function(e){return l.utils.openFile(e)}).catch(function(e){return Promise.reject(l.translate.instant("core.networkerrormsg"))}):l.downloadModuleWithMainFileIfNeeded(e,t,n,o,r,i).then(function(a){return 0===a.path.indexOf("http")?(a.path=a.path+"#moodlemobile-embedded",l.utils.openOnlineFile(a.path).catch(function(s){if(!l.fileProvider.isAvailable())return Promise.reject(s);if(a.status===E.a.DOWNLOADING)return Promise.reject(l.translate.instant("core.erroropenfiledownloading"));return(a.status===E.a.NOT_DOWNLOADED?l.downloadModule(e,t,n,o,r,i).then(function(){return l.filepoolProvider.getInternalUrlByUrl(i,u)}):l.filepoolProvider.getInternalUrlByUrl(i,u)).then(function(e){return l.utils.openFile(e)})})):l.utils.openFile(a.path)})})},e.prototype.downloadModuleWithMainFileIfNeeded=function(e,t,n,o,r,i){var l=this;if(i=i||this.sitesProvider.getCurrentSiteId(),!r||!r.length)return Promise.reject(null);var a=this.fileHelper.getFileUrl(r[0]),s={fixedUrl:void 0,path:void 0,status:void 0};return this.sitesProvider.getSite(i).then(function(e){return e.checkAndFixPluginfileURL(a)}).then(function(u){return s.fixedUrl=u,l.fileProvider.isAvailable()?l.filepoolProvider.getPackageStatus(i,n,o).then(function(c){return s.status=c,c===E.a.DOWNLOADED?l.filepoolProvider.getInternalUrlByUrl(i,a).catch(function(a){return l.filepoolProvider.storePackageStatus(i,E.a.NOT_DOWNLOADED,n,o).then(function(){return l.downloadModuleWithMainFile(e,t,u,r,c,n,o,i)})}):c!==E.a.DOWNLOADING||l.appProvider.isDesktop()?l.downloadModuleWithMainFile(e,t,u,r,c,n,o,i):u}).then(function(e){return s.path=e,s}):(s.path=u,s)})},e.prototype.downloadModuleWithMainFile=function(e,t,n,o,r,i,l,a){var s=this,u=this.appProvider.isOnline(),c=o[0],d=this.fileHelper.getFileUrl(c),f=this.fileHelper.getFileTimemodified(c);return u||r!==E.a.NOT_DOWNLOADED?this.filepoolProvider.shouldDownloadBeforeOpen(n,c.filesize).then(function(){return s.downloadModule(e,t,i,l,o,a).then(function(){return s.filepoolProvider.getInternalUrlByUrl(a,d)})},function(){return s.appProvider.isWifi()&&s.downloadModule(e,t,i,l,o,a),!s.fileHelper.isStateDownloaded(r)||u?n:s.filepoolProvider.getUrlByUrl(a,d,i,l,f,!1,!1,c)}):Promise.reject(this.translate.instant("core.networkerrormsg"))},e.prototype.downloadModule=function(e,t,n,o,r,i){var l=this.prefetchDelegate.getPrefetchHandlerFor(e);return l?l.download?l.download(e,t):l.prefetch(e,t,!0):(r=r||e.contents,this.filepoolProvider.downloadOrPrefetchFiles(i,r,!1,!1,n,o))},e.prototype.fillContextMenu=function(e,t,n,o,r){var i=this;return this.getModulePrefetchInfo(t,n,o,r).then(function(o){e.size=o.size>0?o.sizeReadable:0,e.prefetchStatusIcon=o.statusIcon,e.prefetchStatus=o.status,o.status!=E.a.NOT_DOWNLOADABLE&&(e.prefetchText=o.downloadTime>0?i.translate.instant("core.lastdownloaded")+": "+o.downloadTimeReadable:i.translate.instant("core.download")),o.status==E.a.DOWNLOADING&&(e.size=0),void 0===e.contextMenuStatusObserver&&r&&(e.contextMenuStatusObserver=i.eventsProvider.on(l.a.PACKAGE_STATUS_CHANGED,function(o){o.componentId==t.id&&o.component==r&&i.fillContextMenu(e,t,n,!1,r)},i.sitesProvider.getCurrentSiteId()))})},e.prototype.getCourse=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.coursesProvider.getUserCourse(e,!1,t).then(function(e){return{enrolled:!0,course:e}}).catch(function(){return n.coursesProvider.isGetCoursesByFieldAvailableInSite(t).then(function(o){return o?n.coursesProvider.getCourseByField("id",e,t):n.coursesProvider.getCourse(e,t)}).then(function(e){return{enrolled:!1,course:e}})})},e.prototype.getAndOpenCourse=function(e,t,n,o){var r=this,i=this.domUtils.showModalLoading();return this.getCourse(t,o).then(function(e){return e.course}).catch(function(){return{id:t}}).then(function(t){return i.dismiss(),r.openCourse(e,t,n,o)})},e.prototype.hasABlockNamed=function(e,t,n){return this.courseProvider.getCourseBlocks(e,n).then(function(e){return e.some(function(e){return e.name==t})}).catch(function(){return!1})},e.prototype.initPrefetchCoursesIcons=function(e,t,n){var o=this;return void 0===n&&(n=2),!e||e.length<n?(t.icon="",Promise.resolve(t)):this.determineCoursesStatus(e).then(function(e){var n=o.getCourseStatusIconAndTitleFromStatus(e).icon;return"spinner"==n&&(n="cloud-download"),t.icon=n,t})},e.prototype.loadOfflineCompletion=function(e,t,n){var o=this;return this.courseOffline.getCourseManualCompletions(e,n).then(function(e){if(e&&e.length)for(var n=e.length,r=0,i=o.utils.arrayToObject(e,"cmid"),l=0;l<t.length;l++){var a=t[l];if(a.modules&&a.modules.length)for(var s=0;s<a.modules.length;s++){var u=a.modules[s],c=i[u.id];if(c&&void 0!==u.completiondata&&c.timecompleted>=1e3*u.completiondata.timecompleted&&(u.completiondata.state=c.completed,u.completiondata.offline=!0,++r==n))break}}})},e.prototype.prefetchCourses=function(e,t){return t.icon="spinner",t.badge="",this.confirmAndPrefetchCourses(e,function(e){t.badge=e.count+" / "+e.total}).then(function(){t.icon="refresh"}).finally(function(){t.badge=""})},e.prototype.getCourseDownloadPromise=function(e,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.courseDwnPromises[t]&&this.courseDwnPromises[t][e]},e.prototype.getCourseStatusIconAndTitle=function(e,t){var n=this;return this.courseProvider.getCourseStatus(e,t).then(function(e){return n.getCourseStatusIconAndTitleFromStatus(e)})},e.prototype.getCourseStatusIconAndTitleFromStatus=function(e){return e==E.a.DOWNLOADED?{icon:"refresh",title:"core.course.refreshcourse"}:e==E.a.DOWNLOADING?{icon:"spinner",title:"core.downloading"}:{icon:"cloud-download",title:"core.course.downloadcourse"}},e.prototype.getModuleCourseIdByInstance=function(e,t,n){var o=this;return this.courseProvider.getModuleBasicInfoByInstance(e,t,n).then(function(e){return e.course}).catch(function(e){return o.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})},e.prototype.getModulePrefetchInfo=function(e,t,n,o){var r=this,i={},l=this.sitesProvider.getCurrentSiteId(),a=[];return n&&this.prefetchDelegate.invalidateModuleStatusCache(e),a.push(this.prefetchDelegate.getModuleDownloadedSize(e,t).then(function(e){i.size=e,i.sizeReadable=r.textUtils.bytesToSize(e,2)})),a.push(this.prefetchDelegate.getModuleStatus(e,t).then(function(e){switch(i.status=e,e){case E.a.NOT_DOWNLOADED:i.statusIcon="cloud-download";break;case E.a.DOWNLOADING:i.statusIcon="spinner";break;case E.a.OUTDATED:i.statusIcon="refresh";break;case E.a.DOWNLOADED:if(!r.prefetchDelegate.canCheckUpdates()){i.statusIcon="refresh";break}default:i.statusIcon=""}})),a.push(this.filepoolProvider.getPackageData(l,o,e.id).then(function(e){if(e&&e.downloadTime&&r.fileHelper.isStateDownloaded(e.status)){var t=r.timeUtils.timestamp();i.downloadTime=e.downloadTime,i.downloadTimeReadable=t-e.downloadTime<604800?I(1e3*e.downloadTime).fromNow():I(1e3*e.downloadTime).calendar()}}).catch(function(){i.downloadTime=0})),Promise.all(a).then(function(){return i})},e.prototype.getSectionDownloadId=function(e){return"Section-"+e.id},e.prototype.navigateToModuleByInstance=function(e,t,n,o,r,i,l,a){var s=this;void 0===i&&(i=!1);var u=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfoByInstance(e,t,n).then(function(e){s.navigateToModule(parseInt(e.id,10),n,e.course,r,i?t:void 0,l,a)}).catch(function(e){s.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){u.dismiss()})},e.prototype.navigateToModule=function(e,t,n,o,r,i,l){var a=this;t=t||this.sitesProvider.getCurrentSiteId();var s,u=this.domUtils.showModalLoading();return(n&&o?Promise.resolve():n?this.courseProvider.getModuleSectionId(e,t).then(function(e){o=e}):this.courseProvider.getModuleBasicInfo(e,t).then(function(e){n=e.course,o=e.section})).then(function(){return n=Number(n),o=Number(o),a.sitesProvider.getSite(t)}).then(function(i){return s=i,a.courseProvider.getModule(e,n,o,!1,!1,t,r)}).then(function(e){if(e.handlerData=a.moduleDelegate.getModuleDataFor(e.modname,e,n,o,!1),l&&e.handlerData&&e.handlerData.action)return u.dismiss(),e.handlerData.action(new Event("click"),l,e,n,void 0,i);a.logger.warn("navCtrl was not passed to navigateToModule by the link handler for "+e.modname);var r={course:{id:n},module:e,sectionId:o,modParams:i};return n==s.getSiteHomeId()?a.siteHomeProvider.isAvailable().then(function(){a.loginHelper.redirect("CoreSiteHomeIndexPage",r,t)}).finally(function(){u.dismiss()}):(u.dismiss(),a.getAndOpenCourse(void 0,n,r,t))}).catch(function(e){u.dismiss(),a.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)})},e.prototype.openModule=function(e,t,n,o,r){return t.handlerData||(t.handlerData=this.moduleDelegate.getModuleDataFor(t.modname,t,n,o,!1)),!(!t.handlerData||!t.handlerData.action)&&(t.handlerData.action(new Event("click"),e,t,n,{animate:!1},r),!0)},e.prototype.prefetchCourse=function(e,t,n,o,r){var i=this;return r=r||this.sitesProvider.getCurrentSiteId(),this.courseDwnPromises[r]&&this.courseDwnPromises[r][e.id]?this.courseDwnPromises[r][e.id]:(this.courseDwnPromises[r]||(this.courseDwnPromises[r]={}),this.courseDwnPromises[r][e.id]=this.courseProvider.setCourseStatus(e.id,E.a.DOWNLOADING,r).then(function(){var r=[],l=t[0];t[0].id!=v.a.ALL_SECTIONS_ID&&(l={id:v.a.ALL_SECTIONS_ID}),r.push(i.prefetchSection(l,e.id,t)),n.forEach(function(t){t.prefetch&&r.push(t.prefetch(e))}),o.forEach(function(t){t.prefetch&&r.push(t.prefetch(e))}),i.coursesProvider.isGetCoursesByFieldAvailable()&&r.push(i.coursesProvider.getCoursesByField("id",e.id));var a=t.find(function(e){return e.modules&&e.modules.length>0});return a&&void 0!==a.modules[0].completion||r.push(i.courseProvider.getActivitiesCompletionStatus(e.id)),r.push(i.filterHelper.getFilters("course",e.id)),i.utils.allPromises(r)}).then(function(){return i.courseProvider.setCourseStatus(e.id,E.a.DOWNLOADED,r)}).catch(function(t){return i.courseProvider.setCoursePreviousStatus(e.id,r).then(function(){return Promise.reject(t)})}).finally(function(){delete i.courseDwnPromises[r][e.id]}),this.courseDwnPromises[r][e.id])},e.prototype.prefetchModule=function(e,t,n,o,r){var i=this;return this.domUtils.confirmDownloadSize(n).then(function(){return(r?e.invalidateContent(t.id,o):Promise.resolve()).catch(function(){}).then(function(){return i.prefetchDelegate.prefetchModule(t,o,!0)})})},e.prototype.prefetchSection=function(e,t,n){var o=this;if(e.id!=v.a.ALL_SECTIONS_ID)return this.prefetchSingleSectionIfNeeded(e,t).finally(function(){return o.calculateSectionStatus(e,t,!1,!1)});var r,i=[];return e.isDownloading=!0,n.forEach(function(e){e.id!=v.a.ALL_SECTIONS_ID&&i.push(o.prefetchSingleSectionIfNeeded(e,t).finally(function(){return o.calculateSectionStatus(e,t,!1,!1).then(function(e){r=o.filepoolProvider.determinePackagesStatus(r,e.status)})}))}),this.utils.allPromises(i).then(function(){e.downloadStatus=r,e.canCheckUpdates=o.prefetchDelegate.canCheckUpdates(),e.isDownloading=r===E.a.DOWNLOADING}).finally(function(){e.isDownloading=!1})},e.prototype.prefetchSingleSectionIfNeeded=function(e,t){var n=this;if(e.id==v.a.ALL_SECTIONS_ID)return Promise.resolve();if(e.hiddenbynumsections)return Promise.resolve();var o=[];e.isDownloading=!0,o.push(this.prefetchDelegate.syncModules(e.modules,t).then(function(){return n.prefetchDelegate.getModulesStatus(e.modules,t,e.id).then(function(o){if(o.status!=E.a.DOWNLOADED&&o.status!=E.a.NOT_DOWNLOADABLE)return n.prefetchSingleSection(e,o,t)},function(t){return e.isDownloading=!1,Promise.reject(t)})}));var r=this.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.summary),i=this.sitesProvider.getCurrentSiteId();return o.push(this.filepoolProvider.addFilesToQueue(i,r,v.a.COMPONENT,t).catch(function(){})),Promise.all(o)},e.prototype.prefetchSingleSection=function(e,t,n){if(e.id==v.a.ALL_SECTIONS_ID)return Promise.resolve();if(e.total>0)return Promise.resolve();var o=t[E.a.OUTDATED].concat(t[E.a.NOT_DOWNLOADED]).concat(t[E.a.DOWNLOADING]),r=this.getSectionDownloadId(e);return e.isDownloading=!0,this.prefetchDelegate.prefetchModules(r,o,n,function(t){e.count=t.count,e.total=t.total})},e.prototype.sectionHasContent=function(e){return!e.hiddenbynumsections&&(void 0!==e.availabilityinfo&&""!=e.availabilityinfo||""!=e.summary||e.modules&&e.modules.length>0)},e.prototype.openCourse=function(e,t,n,o){return o&&o!=this.sitesProvider.getCurrentSiteId()?(n=n||{},Object.assign(n,{course:t}),this.loginHelper.redirect(O.a.OPEN_COURSE,n,o)):this.courseProvider.openCourse(e,t,n)},e=S([Object(o.A)(),w("design:paramtypes",[v.a,d.a,b.a,P.a,s.a,c.a,f.a,p.a,h.a,r.c,O.a,m.a,_.a,l.a,u.a,i.a,a.a,o.C,g.a,y.a,C.a,R.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){}return e.SECONDS_YEAR=31536e3,e.SECONDS_WEEK=604800,e.SECONDS_DAY=86400,e.SECONDS_HOUR=3600,e.SECONDS_MINUTE=60,e.WIFI_DOWNLOAD_THRESHOLD=104857600,e.DOWNLOAD_THRESHOLD=10485760,e.MINIMUM_FREE_SPACE=10485760,e.IOS_FREE_SPACE_THRESHOLD=524288e3,e.DONT_SHOW_ERROR="CoreDontShowError",e.NO_SITE_ID="NoSite",e.SETTINGS_RICH_TEXT_EDITOR="CoreSettingsRichTextEditor",e.SETTINGS_NOTIFICATION_SOUND="CoreSettingsNotificationSound",e.SETTINGS_SYNC_ONLY_ON_WIFI="CoreSettingsSyncOnlyOnWifi",e.SETTINGS_DEBUG_DISPLAY="CoreSettingsDebugDisplay",e.SETTINGS_REPORT_IN_BACKGROUND="CoreSettingsReportInBackground",e.SETTINGS_SEND_ON_ENTER="CoreSettingsSendOnEnter",e.SETTINGS_FONT_SIZE="CoreSettingsFontSize",e.SETTINGS_COLOR_SCHEME="CoreSettingsColorScheme",e.SETTINGS_ANALYTICS_ENABLED="CoreSettingsAnalyticsEnabled",e.WS_TIMEOUT=3e4,e.WS_TIMEOUT_WIFI=3e4,e.WS_PREFIX="local_mobile_",e.LOGIN_SSO_CODE=2,e.LOGIN_SSO_INAPP_CODE=3,e.LOGIN_LAUNCH_DATA="CoreLoginLaunchData",e.DOWNLOADED="downloaded",e.DOWNLOADING="downloading",e.NOT_DOWNLOADED="notdownloaded",e.OUTDATED="outdated",e.NOT_DOWNLOADABLE="notdownloadable",e.RESOURCELIB_DISPLAY_AUTO=0,e.RESOURCELIB_DISPLAY_EMBED=1,e.RESOURCELIB_DISPLAY_FRAME=2,e.RESOURCELIB_DISPLAY_NEW=3,e.RESOURCELIB_DISPLAY_DOWNLOAD=4,e.RESOURCELIB_DISPLAY_OPEN=5,e.RESOURCELIB_DISPLAY_POPUP=6,e.FEATURE_GRADE_HAS_GRADE="grade_has_grade",e.FEATURE_GRADE_OUTCOMES="outcomes",e.FEATURE_ADVANCED_GRADING="grade_advanced_grading",e.FEATURE_CONTROLS_GRADE_VISIBILITY="controlsgradevisbility",e.FEATURE_PLAGIARISM="plagiarism",e.FEATURE_COMPLETION_TRACKS_VIEWS="completion_tracks_views",e.FEATURE_COMPLETION_HAS_RULES="completion_has_rules",e.FEATURE_NO_VIEW_LINK="viewlink",e.FEATURE_IDNUMBER="idnumber",e.FEATURE_GROUPS="groups",e.FEATURE_GROUPINGS="groupings",e.FEATURE_MOD_ARCHETYPE="mod_archetype",e.FEATURE_MOD_INTRO="mod_intro",e.FEATURE_MODEDIT_DEFAULT_COMPLETION="modedit_default_completion",e.FEATURE_COMMENT="comment",e.FEATURE_RATE="rate",e.FEATURE_BACKUP_MOODLE2="backup_moodle2",e.FEATURE_SHOW_DESCRIPTION="showdescription",e.FEATURE_USES_QUESTIONS="usesquestions",e.MOD_ARCHETYPE_OTHER=0,e.MOD_ARCHETYPE_RESOURCE=1,e.MOD_ARCHETYPE_ASSIGNMENT=2,e.MOD_ARCHETYPE_SYSTEM=3,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(10),i=n(9),l=n(6),a=n(1),s=n(53),u=n(11),c=n(36),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,l){var a=this;this.sitesProvider=n,this.textUtils=o,this.filterDelegate=r,this.appProvider=l,this.ROOT_CACHE_KEY="mmFilter:",this.contextsCache={},this.logger=e.getInstance("CoreFilterProvider"),t.on(i.a.WS_CACHE_INVALIDATED,function(e){delete a.contextsCache[e.siteId]}),t.on(i.a.SITE_STORAGE_DELETED,function(e){delete a.contextsCache[e.siteId]})}return e.prototype.canGetAvailableInContext=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.canGetAvailableInContextInSite(e)})},e.prototype.canGetAvailableInContextInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_filters_get_available_in_context")},e.prototype.formatText=function(e,t,n,o){var r=this;if(!e||"string"!=typeof e)return Promise.resolve("");void 0===(t=t?Object.assign({},t):{}).clean&&(t.clean=!1),void 0===t.filter&&(t.filter=!0),t.contextLevel||(t.filter=!1);return(t.filter?this.filterDelegate.filterText(e,n,t,[],o):Promise.resolve(e)).then(function(e){return t.clean&&(e=r.textUtils.cleanTags(e,t.singleLine)),t.shortenLength>0&&(e=r.textUtils.shortenText(e,t.shortenLength)),t.highlight&&(e=r.textUtils.highlightText(e,t.highlight)),e})},e.prototype.getAvailableInContextsCacheKey=function(e){return this.getAvailableInContextsPrefixCacheKey()+JSON.stringify(e)},e.prototype.getAvailableInContextsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"availableInContexts:"},e.prototype.getAvailableInContexts=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(o){t=o.getId();var r=n.getFromMemoryCache(e,o);if(r)return r;n.contextsCache[t]=n.contextsCache[t]||{};for(var i=!1,l=!1,a=e.slice(),u=0;u<a.length;u++){if("system"==a[u].contextlevel){i=!0,(l=a.some(function(e){return"course"==e.contextlevel&&e.instanceid==o.getSiteHomeId()}))?a.splice(u,1):a[u]={contextlevel:"course",instanceid:o.getSiteHomeId()};break}}var c={contexts:a},d={cacheKey:n.getAvailableInContextsCacheKey(a),updateFrequency:s.a.FREQUENCY_RARELY};return o.read("core_filters_get_available_in_context",c,d).then(function(r){var a={};return e.forEach(function(e){a[e.contextlevel]=a[e.contextlevel]||{},a[e.contextlevel][e.instanceid]=[]}),1!=e.length||i?(r.filters.forEach(function(e){i&&"course"==e.contextlevel&&e.instanceid==o.getSiteHomeId()&&(l&&(a[e.contextlevel][e.instanceid].push(e),e=Object.assign({},e)),e.contextlevel="system",e.instanceid=0,e.contextid=-1,e.localstate=e.inheritedstate),a[e.contextlevel][e.instanceid].push(e)}),n.storeInMemoryCache(a,t),a):(a[e[0].contextlevel][e[0].instanceid]=r.filters,n.storeInMemoryCache(a,t),a)})})},e.prototype.getAvailableInContext=function(e,t,n){return this.getAvailableInContexts([{contextlevel:e,instanceid:t}],n).then(function(n){return n[e][t]})},e.prototype.getFromMemoryCache=function(e,t){if(this.contextsCache[t.getId()]){for(var n=this.contextsCache[t.getId()],o=this.appProvider.isOnline(),r={},i=!0,l=0;l<e.length;l++){var a=e[l],u=n[a.contextlevel]&&n[a.contextlevel][a.instanceid];if(!u||o&&!(Date.now()<=u.time+t.getExpirationDelay(s.a.FREQUENCY_RARELY))){i=!1;break}r[a.contextlevel]=r[a.contextlevel]||{},r[a.contextlevel][a.instanceid]=u.filters}if(i)return r}},e.prototype.invalidateAllAvailableInContext=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getAvailableInContextsPrefixCacheKey())})},e.prototype.invalidateAvailableInContexts=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAvailableInContextsCacheKey(e))})},e.prototype.invalidateAvailableInContext=function(e,t,n){return this.invalidateAvailableInContexts([{contextlevel:e,instanceid:t}],n)},e.prototype.storeInMemoryCache=function(e,t){for(var n in e){this.contextsCache[t][n]=this.contextsCache[t][n]||{};for(var o in e[n])this.contextsCache[t][n][o]={filters:e[n][o],time:Date.now()}}},e=d([Object(o.A)(),f("design:paramtypes",[l.a,i.a,a.a,u.a,c.a,r.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(5),i=n(3),l=n(185),a=n(10),s=n(57),u=n(6),c=n(1),d=n(4),f=n(11),p=n(22),h=n(2),m=n(15),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p){this.fileProvider=t,this.sitesProvider=n,this.urlUtils=o,this.textUtils=r,this.utils=i,this.domUtils=l,this.platform=a,this.appProvider=s,this.translate=u,this.network=c,this.zone=d,this.config=f,this.contentLinksHelper=p,this.logger=e.getInstance("CoreUtilsProvider")}return t=e,e.prototype.checkOnlineFrameInOffline=function(e,t){var n=this,o=e.src||e.data;if(o&&o.match(/^https?:\/\//i)&&!this.appProvider.isOnline()){if(e.classList.contains("core-iframe-offline-disabled"))return!0;var r=document.createElement("div");r.setAttribute("text-center",""),r.setAttribute("padding",""),r.classList.add("core-iframe-offline-warning");var i=this.sitesProvider.getCurrentSite(),l=i?i.getInfo().username:void 0;this.contentLinksHelper.canHandleLink(o,void 0,l).then(function(i){if(i){var a=document.createElement("a");if(t)a.style.display="block",a.style.padding="1em",a.style.fontWeight="500",a.style.textAlign="center",a.style.textTransform="uppercase",a.style.cursor="pointer";else{var s=n.config.get("mode");a.setAttribute("ion-button",""),a.classList.add("button","button-"+s,"button-default","button-default-"+s,"button-block","button-block-"+s)}var u=n.translate.instant("core.viewembeddedcontent");a.innerHTML=t?u:'<span class="button-inner">'+u+"</span>",a.onclick=function(e){n.contentLinksHelper.handleLink(o,l),e.preventDefault()},r.appendChild(a)}else r.innerHTML=(t?"":n.domUtils.getConnectionWarningIconHtml())+"<p>"+n.translate.instant("core.networkerroriframemsg")+"</p>";e.parentElement.insertBefore(r,e)}),e.classList.add("core-iframe-offline-disabled"),t&&(e.style.display="none");var a=this.network.onConnect().subscribe(function(){n.zone.run(function(){n.checkOnlineFrameInOffline(e,t)||a.unsubscribe()})});return!0}return e.classList.contains("core-iframe-offline-disabled")&&(e.src=e.src,e.data=e.data,this.domUtils.removeElement(e.parentElement,"div.core-iframe-offline-warning"),e.classList.remove("core-iframe-offline-disabled"),t&&(e.style.display="")),!1},e.prototype.getContentWindowAndDocument=function(e){var t,n=e.contentWindow;try{t=e.contentDocument||n&&n.document}catch(e){}if(!n&&t&&(n=t.defaultView),!n&&e.getSVGDocument){try{t=e.getSVGDocument()}catch(e){}t&&t.defaultView?n=t.defaultView:e.window?n=e.window:e.getWindow&&(n=e.getWindow())}return{window:n,document:t}},e.prototype.redefineWindowOpen=function(e,n,o,r){var i=this;n&&(n.open=function(t,n){if(!i.urlUtils.getUrlScheme(t)){var o=e.src||e.data;if(!o)return i.logger.warn("Cannot get iframe src to open relative url",t,e),null;var l=i.fileProvider.getFileAndDirectoryFromPath(o);if(!l.directory)return i.logger.warn("Cannot get iframe dir path to open relative url",t,e),null;t=i.textUtils.concatenatePaths(l.directory,t)}return"_self"==n?"object"==e.tagName.toLowerCase()?e.setAttribute("data",t):e.setAttribute("src",t):0===t.indexOf("cdvfile://")||0===t.indexOf("file://")?i.utils.openFile(t).catch(function(e){i.domUtils.showErrorModal(e)}):i.contentLinksHelper.handleLink(t,void 0,r,!0,!0).then(function(e){e||(i.sitesProvider.isLoggedIn()?i.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(t):i.utils.openInBrowser(t))}),null}),o&&t.FRAME_TAGS.forEach(function(e){Array.from(o.querySelectorAll(e)).forEach(function(e){i.treatFrame(e,!0,r)})})},e.prototype.treatFrame=function(e,t,n){var o=this;if(e){this.checkOnlineFrameInOffline(e,t);var r=this.getContentWindowAndDocument(e);this.redefineWindowOpen(e,r.window,r.document,n),this.treatFrameLinks(e,r.document),e.addEventListener("load",function(){o.checkOnlineFrameInOffline(e,t),r=o.getContentWindowAndDocument(e),o.redefineWindowOpen(e,r.window,r.document,n),o.treatFrameLinks(e,r.document),r.window&&setTimeout(function(){r.window.dispatchEvent(new Event("resize"))},1e3)})}},e.prototype.treatFrameLinks=function(e,t){var n=this;t&&t.addEventListener("click",function(t){if(!t.defaultPrevented){for(var o=t.target;o&&"A"!==o.tagName;)o=o.parentElement;var r=o;r&&!r.treated&&(r.treated=!0,r.addEventListener("click",n.linkClicked.bind(n,e,r)))}},{capture:!0})},e.prototype.linkClicked=function(e,t,n){var o=this;if(!n.defaultPrevented){var r=this.urlUtils.getUrlScheme(t.href);if(t.href&&(!r||"javascript"!=r))if(r&&"file"!=r&&"filesystem"!=r){n.preventDefault();var i=this.urlUtils.getUrlScheme(e.src||e.data);if(i&&"file"!=i&&"filesystem"!=i&&(!t.target||"_self"==t.target))return void("object"==e.tagName.toLowerCase()?e.setAttribute("data",t.href):e.setAttribute("src",t.href));this.sitesProvider.isLoggedIn()?this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(t.href):this.utils.openInBrowser(t.href)}else"_parent"==t.target||"_top"==t.target||"_blank"==t.target?(n.preventDefault(),this.utils.openFile(t.href).catch(function(e){o.domUtils.showErrorModal(e)})):!this.platform.is("ios")||t.target&&"_self"!=t.target||(n.preventDefault(),"object"==e.tagName.toLowerCase()?e.setAttribute("data",t.href):e.setAttribute("src",t.href))}},e.FRAME_TAGS=["iframe","frame","object","embed"],e=t=_([Object(o.A)(),g("design:paramtypes",[u.a,s.a,c.a,p.a,f.a,h.a,d.a,r.v,a.a,i.c,l.a,o.M,r.e,m.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(18),i=n(6),l=n(53),a=n(1),s=n(2),u=n(10),c=n(446),d=n(136),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.sitesProvider=t,this.utils=n,this.filepoolProvider=o,this.appProvider=r,this.userOffline=i,this.pushNotificationsProvider=l,this.ROOT_CACHE_KEY="mmUser:",this.USERS_TABLE="users",this.siteSchema={name:"CoreUserProvider",version:1,canBeCleared:[this.USERS_TABLE],tables:[{name:this.USERS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"fullname",type:"TEXT"},{name:"profileimageurl",type:"TEXT"}]}]},this.logger=e.getInstance("CoreUserProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.canSearchParticipants=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.canSearchParticipantsInSite(e)})},e.prototype.canSearchParticipantsInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_enrol_search_users")},e.prototype.changeProfilePicture=function(e,t){var n={draftitemid:e,delete:0,userid:t};return this.sitesProvider.getCurrentSite().write("core_user_update_picture",n).then(function(e){return e.success?e.profileimageurl:Promise.reject(null)})},e.prototype.deleteStoredUser=function(e,t){var n=this;if(isNaN(e))return Promise.reject(null);var o=[];return t=t||this.sitesProvider.getCurrentSiteId(),o.push(this.invalidateUserCache(e,t)),o.push(this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.USERS_TABLE,{id:e})})),Promise.all(o)},e.prototype.getParticipants=function(e,n,o,r,i){var a=this;return void 0===n&&(n=0),void 0===o&&(o=t.PARTICIPANTS_LIST_LIMIT),this.sitesProvider.getSite(r).then(function(t){a.logger.debug("Get participants for course '"+e+"' starting at '"+n+"'");var s={courseid:e,options:[{name:"limitfrom",value:n},{name:"limitnumber",value:o},{name:"sortby",value:"siteorder"}]},u={cacheKey:a.getParticipantsListCacheKey(e),updateFrequency:l.a.FREQUENCY_RARELY};return i&&(u.getFromCache=!1,u.emergencyCache=!1),t.read("core_enrol_get_enrolled_users",s,u).then(function(e){var t=e.length>=o;return a.storeUsers(e,r),{participants:e,canLoadMore:t}})})},e.prototype.getParticipantsListCacheKey=function(e){return this.ROOT_CACHE_KEY+"list:"+e},e.prototype.getProfile=function(e,t,n,o){var r=this;return void 0===n&&(n=!1),o=o||this.sitesProvider.getCurrentSiteId(),n?this.getUserFromLocalDb(e,o).catch(function(){return r.getUserFromWS(e,t,o)}):this.getUserFromWS(e,t,o).catch(function(){return r.getUserFromLocalDb(e,o)})},e.prototype.getUserCacheKey=function(e){return this.ROOT_CACHE_KEY+"data:"+e},e.prototype.getUserFromLocalDb=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.USERS_TABLE,{id:e})})},e.prototype.getUserFromWS=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r,i,a={cacheKey:o.getUserCacheKey(e),updateFrequency:l.a.FREQUENCY_RARELY};return t&&t!=n.getSiteHomeId()?(o.logger.debug("Get participant with ID '"+e+"' in course '"+t),r="core_user_get_course_user_profiles",i={userlist:[{userid:e,courseid:t}]}):(o.logger.debug("Get user with ID '"+e+"'"),r="core_user_get_users_by_field",i={field:"id",values:[e]}),n.read(r,i,a).then(function(e){if(0==e.length)return Promise.reject("Cannot retrieve user info.");var t=e.shift();return t.country&&(t.country=o.utils.getCountryName(t.country)),o.storeUser(t.id,t.fullname,t.profileimageurl),t})})},e.prototype.getUserPreference=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.userOffline.getPreference(e,t).catch(function(){return null}).then(function(o){return o&&!n.appProvider.isOnline()?o.value:n.getUserPreferenceOnline(e,t).then(function(t){return o&&o.value!=o.onlinevalue&&o.onlinevalue==t?o.value:n.userOffline.setPreference(e,t,t).then(function(){return t})})})},e.prototype.getUserPreferenceCacheKey=function(e){return this.ROOT_CACHE_KEY+"preference:"+e},e.prototype.getUserPreferenceOnline=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={name:e},r={cacheKey:n.getUserPreferenceCacheKey(o.name),updateFrequency:l.a.FREQUENCY_SOMETIMES};return t.read("core_user_get_user_preferences",o,r).then(function(e){return e.preferences[0]?e.preferences[0].value:null})})},e.prototype.invalidateUserCache=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getUserCacheKey(e))})},e.prototype.invalidateParticipantsList=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getParticipantsListCacheKey(e))})},e.prototype.invalidateUserPreference=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getUserPreferenceCacheKey(e))})},e.prototype.isParticipantsDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isParticipantsDisabledInSite(e)})},e.prototype.isParticipantsDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreCourseOptionsDelegate_CoreUserParticipants")},e.prototype.isPluginEnabledForCourse=function(e,t){return e?this.utils.promiseWorks(this.getParticipants(e,0,1,t)):Promise.reject(null)},e.prototype.isUpdatePictureDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreUserDelegate_picture")},e.prototype.logView=function(e,t,n){var o={userid:e},r="core_user_view_user_profile";return t&&(o.courseid=t),this.pushNotificationsProvider.logViewEvent(e,n,"user",r,{courseid:t}),this.sitesProvider.getCurrentSite().write(r,o)},e.prototype.logParticipantsView=function(e){var t={courseid:e};return this.pushNotificationsProvider.logViewListEvent("user","core_user_view_user_list",t),this.sitesProvider.getCurrentSite().write("core_user_view_user_list",t)},e.prototype.prefetchProfiles=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r={},i=[];return e.forEach(function(e){null!==e&&(e=Number(e),!isNaN(e)&&!r[e]&&e>0&&(r[e]=!0,i.push(o.getProfile(e,t,!1,n).then(function(e){e.profileimageurl&&o.filepoolProvider.addToQueueByUrl(n,e.profileimageurl)}))))}),Promise.all(i)},e.prototype.searchParticipants=function(e,n,o,r,i,l){var a=this;return void 0===o&&(o=!0),void 0===r&&(r=0),void 0===i&&(i=t.PARTICIPANTS_LIST_LIMIT),this.sitesProvider.getSite(l).then(function(t){return t.read("core_enrol_search_users",{courseid:e,search:n,searchanywhere:o?1:0,page:r,perpage:i},{getFromCache:!1}).then(function(e){var t=e.length>=i;return a.storeUsers(e,l),{participants:e,canLoadMore:t}})})},e.prototype.storeUser=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={id:e,fullname:t,profileimageurl:n};return o.getDb().insertRecord(r.USERS_TABLE,i)})},e.prototype.storeUsers=function(e,t){var n=this,o=[];return e.forEach(function(e){void 0===e.id||isNaN(parseInt(e.id,10))||o.push(n.storeUser(parseInt(e.id,10),e.fullname,e.profileimageurl,t))}),Promise.all(o)},e.prototype.setUserPreference=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r,i=this.appProvider.isOnline();if(i){r=this.updateUserPreferences([{type:e,value:t}],void 0,void 0,n).catch(function(e){return i=!1,Promise.reject(e)})}else r=Promise.resolve();return r.finally(function(){var n=i?t:void 0;return Promise.all([o.userOffline.setPreference(e,t,n),o.invalidateUserPreference(e).catch(function(){})])})},e.prototype.updateUserPreference=function(e,t,n,o){return this.updateUserPreferences([{type:e,value:t}],void 0,n,o)},e.prototype.updateUserPreferences=function(e,t,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={userid:n=n||o.getUserId(),preferences:e};return void 0!==t&&(r.emailstop=t?1:0),o.write("core_user_update_user_preferences",r,{responseExpected:!1})})},e.PARTICIPANTS_LIST_LIMIT=50,e.PROFILE_REFRESHED="CoreUserProfileRefreshed",e.PROFILE_PICTURE_UPDATED="CoreUserProfilePictureUpdated",e=t=f([Object(o.A)(),p("design:paramtypes",[i.a,a.a,s.a,r.a,u.a,c.a,d.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return R});var o=n(0),r=n(5),i=n(3),l=n(10),a=n(9),s=n(18),u=n(6),c=n(1),d=n(4),f=n(44),p=n(11),h=n(22),m=n(2),_=n(174),g=n(229),v=n(15),y=n(28),b=n(41),P=n(32),O=n(36),E=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},R=function(){function e(e,t,n,r,i,l,a,s,u,c,d,f,p,h,m,_,g,v,y,b,P){this.sitesProvider=t,this.domUtils=n,this.textUtils=r,this.translate=i,this.platform=l,this.utils=a,this.urlUtils=s,this.loggerProvider=u,this.filepoolProvider=c,this.appProvider=d,this.contentLinksHelper=f,this.navCtrl=p,this.content=h,this.svComponent=m,this.iframeUtils=_,this.eventsProvider=g,this.filterProvider=v,this.filterHelper=y,this.filterDelegate=b,this.viewContainerRef=P,this.adaptImg=!0,this.element=e.nativeElement,this.element.classList.add("opacity-hide"),this.afterRender=new o.v,this.element.addEventListener("click",this.elementClicked.bind(this))}return e.prototype.ngOnChanges=function(e){(e.text||e.filter||e.contextLevel||e.contextInstanceId)&&(this.hideShowMore(),this.formatAndRenderContents())},e.prototype.addExternalContent=function(e){var t=new g.a(e,this.loggerProvider,this.filepoolProvider,this.platform,this.sitesProvider,this.domUtils,this.urlUtils,this.appProvider,this.utils);return t.component=this.component,t.componentId=this.componentId,t.siteId=this.siteId,t.src=e.getAttribute("src"),t.href=e.getAttribute("href"),t.targetSrc=e.getAttribute("target-src"),t.poster=e.getAttribute("poster"),t.ngAfterViewInit(),t},e.prototype.addMediaAdaptClass=function(e){e.classList.add("core-media-adapt-width")},e.prototype.adaptImage=function(e){var t=document.createElement("span"),n=e.attributes.getNamedItem("width"),o=parseInt(n&&n.value);isNaN(o)||(e.style.width=n.value.indexOf("%")<0?o+"px":o+"%"),t.classList.add("core-adapted-img-container"),t.style.cssFloat=e.style.cssFloat,e.classList.contains("atto_image_button_right")?t.classList.add("atto_image_button_right"):e.classList.contains("atto_image_button_left")?t.classList.add("atto_image_button_left"):e.classList.contains("atto_image_button_text-top")?t.classList.add("atto_image_button_text-top"):e.classList.contains("atto_image_button_middle")?t.classList.add("atto_image_button_middle"):e.classList.contains("atto_image_button_text-bottom")&&t.classList.add("atto_image_button_text-bottom"),this.domUtils.wrapElement(e,t)},e.prototype.addMagnifyingGlasses=function(){var e=this,t=Array.from(this.element.querySelectorAll(".core-adapted-img-container > img"));if(t.length){var n=this.getElementWidth(this.element)||window.innerWidth;t.forEach(function(t){if(!t.closest("a")){var o=parseInt(t.getAttribute("width"));if(o||(o=t.naturalWidth),!(o<=n)){var r=e.textUtils.escapeHTML(t.getAttribute("data-original-src")||t.getAttribute("src")),i=e.textUtils.escapeHTML(e.translate.instant("core.openfullimage")),l=document.createElement("a");l.classList.add("core-image-viewer-icon"),l.setAttribute("aria-label",i),l.innerHTML='<ion-icon name="search" class="icon icon-md ion-md-search"></ion-icon>',l.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.domUtils.viewImage(r,t.getAttribute("alt"),e.component,e.componentId)}),t.parentNode.appendChild(l)}}})}},e.prototype.calculateHeight=function(){var e=this.element.style.maxHeight;this.element.style.maxHeight=null;var t=this.getElementHeight(this.element);this.element.style.maxHeight=e,!t||t>this.maxHeight?this.showMoreDisplayed||this.displayShowMore():this.showMoreDisplayed&&this.hideShowMore()},e.prototype.displayShowMore=function(){var e=this.utils.isTrueOrOne(this.fullOnClick)||!1,t=document.createElement("div");t.classList.add("core-show-more"),t.innerHTML=this.translate.instant("core.showmore"),this.element.appendChild(t),e&&this.element.classList.add("core-expand-in-fullview"),this.element.classList.add("core-text-formatted"),this.element.classList.add("core-shortened"),this.element.style.maxHeight=this.maxHeight+"px",this.showMoreDisplayed=!0},e.prototype.elementClicked=function(e){if(!e.defaultPrevented){var t=this.utils.isTrueOrOne(this.fullOnClick)||!1;if(t||this.showMoreDisplayed)if(e.preventDefault(),e.stopPropagation(),t){var n=void 0!==this.filter?this.utils.isTrueOrOne(this.filter):void 0;this.textUtils.expandText(this.fullTitle||this.translate.instant("core.description"),this.text,this.component,this.componentId,void 0,n,this.contextLevel,this.contextInstanceId,this.courseId)}else this.element.classList.toggle("core-shortened")}},e.prototype.finishRender=function(){this.element.classList.remove("opacity-hide"),this.afterRender.emit()},e.prototype.formatAndRenderContents=function(){var e=this;if(!this.text)return this.element.innerHTML="",void this.finishRender();this.maxHeight&&!this.element.getAttribute("maxHeight")&&this.element.setAttribute("maxHeight",String(this.maxHeight)),this.element.getAttribute("singleLine")||this.element.setAttribute("singleLine",String(this.utils.isTrueOrOne(this.singleLine))),this.text=this.text?this.text.trim():"",this.formatContents().then(function(t){e.element.classList.add("core-disable-media-adapt"),e.element.innerHTML="",e.maxHeight&&""!=t.div.innerHTML?(e.domUtils.moveChildren(t.div,e.element),e.calculateHeight(),e.addMagnifyingGlasses(),e.loadingChangedListener||(e.loadingChangedListener=e.eventsProvider.on(a.a.CORE_LOADING_CHANGED,function(t){t.loaded&&e.domUtils.closest(e.element.parentElement,"#"+t.uniqueId)&&e.calculateHeight()}))):(e.domUtils.moveChildren(t.div,e.element),e.addMagnifyingGlasses()),t.options.filter&&e.filterDelegate.handleHtml(e.element,t.filters,e.viewContainerRef,t.options,[],e.component,e.componentId,t.siteId),e.element.classList.remove("core-disable-media-adapt"),e.finishRender()})},e.prototype.formatContents=function(){var e,t=this,n={div:null,filters:[],options:{},siteId:this.siteId};return this.sitesProvider.getSite(this.siteId).catch(function(){}).then(function(o){(e=o)&&(n.siteId=e.getId()),"course"==t.contextLevel&&t.contextInstanceId<=0&&(t.contextInstanceId=e.getSiteHomeId());var r=void 0===t.filter?!(!t.contextLevel||void 0===t.contextInstanceId):t.utils.isTrueOrOne(t.filter);return n.options={clean:t.utils.isTrueOrOne(t.clean),singleLine:t.utils.isTrueOrOne(t.singleLine),highlight:t.highlight,courseId:t.courseId,wsNotFiltered:t.utils.isTrueOrOne(t.wsNotFiltered)},r?t.filterHelper.getFiltersAndFormatText(t.text,t.contextLevel,t.contextInstanceId,n.options,n.siteId).then(function(e){return n.filters=e.filters,e.text}):t.filterProvider.formatText(t.text,n.options,[],n.siteId)}).then(function(o){var r,i,l,a,s,u,c,d,p,h=document.createElement("div"),m=e&&e.isVersionGreaterEqualThan(["3.3.4","3.4"]),g=t.svComponent?t.svComponent.getMasterNav():t.navCtrl;h.innerHTML=o,r=Array.from(h.querySelectorAll("img")),i=Array.from(h.querySelectorAll("a")),l=Array.from(h.querySelectorAll("audio")),a=Array.from(h.querySelectorAll("video")),s=Array.from(h.querySelectorAll("iframe")),u=Array.from(h.querySelectorAll(".button")),c=Array.from(h.querySelectorAll("*[style]")),d=Array.from(h.querySelectorAll("button,input,select,textarea")),p=Array.from(h.querySelectorAll(f.a.FRAME_TAGS.join(",").replace(/iframe,?/,""))),i.forEach(function(e){var n=new _.a(e,t.domUtils,t.utils,t.sitesProvider,t.urlUtils,t.contentLinksHelper,t.navCtrl,t.content,t.svComponent,t.textUtils);n.capture=!0,n.ngOnInit(),t.addExternalContent(e)});var v=[];r&&r.length>0&&r.forEach(function(e){t.addMediaAdaptClass(e);var n=t.addExternalContent(e);n.invalid||v.push(n),t.utils.isTrueOrOne(t.adaptImg)&&!e.classList.contains("icon")&&t.adaptImage(e)}),l.forEach(function(e){t.treatMedia(e)}),a.forEach(function(e){t.treatMedia(e)}),s.forEach(function(n){t.treatIframe(n,e,m,g)}),u.forEach(function(e){e.querySelector("a")&&e.classList.add("core-button-with-inner-link")}),c.forEach(function(e){"A"!=e.tagName&&"IMG"!=e.tagName&&"AUDIO"!=e.tagName&&"VIDEO"!=e.tagName&&"SOURCE"!=e.tagName&&"TRACK"!=e.tagName&&t.addExternalContent(e)}),d.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation()})}),p.forEach(function(e){t.iframeUtils.treatFrame(e,!1,g)}),t.domUtils.handleBootstrapTooltips(h);return(v.length?t.utils.timeoutPromise(t.utils.allPromises(v.map(function(e){return e.loaded?Promise.resolve():new Promise(function(t){var n=e.onLoad.subscribe(function(){n.unsubscribe(),t()})})})),5e3):Promise.resolve()).catch(function(){}).then(function(){return n.div=h,n})})},e.prototype.getElementWidth=function(e){var t=this.domUtils.getElementWidth(e);if(!t){var n=this.domUtils.getElementWidth(e.parentNode,!0,!1,!1,!0),o=getComputedStyle(e,null).display;e.style.display="inline-block",t=this.domUtils.getElementWidth(e),n>0&&(!t||t>n)&&(t=n),e.style.display=o}return t},e.prototype.getElementHeight=function(e){return this.domUtils.getElementHeight(e)||0},e.prototype.hideShowMore=function(){var e=this.element.querySelector("div.core-show-more");e&&e.remove(),this.element.classList.remove("core-expand-in-fullview"),this.element.classList.remove("core-text-formatted"),this.element.classList.remove("core-shortened"),this.element.style.maxHeight=null,this.showMoreDisplayed=!1},e.prototype.treatMedia=function(e){var t=this;this.addMediaAdaptClass(e),this.addExternalContent(e);var n=Array.from(e.querySelectorAll("source")),o=Array.from(e.querySelectorAll("track"));n.forEach(function(e){e.setAttribute("target-src",e.getAttribute("src")),e.removeAttribute("src"),t.addExternalContent(e)}),o.forEach(function(e){t.addExternalContent(e)}),e.addEventListener("click",function(e){e.stopPropagation()})},e.prototype.treatIframe=function(e,t,n,o){var r=this,i=e.src,l=this.sitesProvider.getCurrentSite();if(this.addMediaAdaptClass(e),l&&l.containsUrl(i))l.getAutoLoginUrl(i,!1).then(function(t){e.src=t,r.iframeUtils.treatFrame(e,!1,o)});else{if(i&&n){var a=e.src.match(/https?:\/\/player\.vimeo\.com\/video\/([0-9]+)/);if(a&&a[1]){var s=this.textUtils.concatenatePaths(t.getURL(),"/media/player/vimeo/wsplayer.php?video=")+a[1]+"&token="+t.getToken(),u=void 0,c=void 0;e.width?u=e.width:(u=this.getElementWidth(e))||(u=window.innerWidth),e.height?c=e.height:(c=this.getElementHeight(e))||(c=u),t.isVersionGreaterEqualThan("3.7")||(s+="&width="+u+"&height="+c),e.src=s,e.width||(e.width=u),e.height||(e.height=c),e.parentElement.classList.contains("embed-responsive")&&e.addEventListener("load",function(){if(e.contentDocument){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="iframe {width: 100%;height: 100%;}",e.contentDocument.head.appendChild(t)}})}}this.iframeUtils.treatFrame(e,!1,o)}},E([Object(o.D)(),C("design:type",String)],e.prototype,"text",void 0),E([Object(o.D)(),C("design:type",String)],e.prototype,"siteId",void 0),E([Object(o.D)(),C("design:type",String)],e.prototype,"component",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"componentId",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"adaptImg",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"clean",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"singleLine",void 0),E([Object(o.D)(),C("design:type",Number)],e.prototype,"maxHeight",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"fullOnClick",void 0),E([Object(o.D)(),C("design:type",String)],e.prototype,"fullTitle",void 0),E([Object(o.D)(),C("design:type",String)],e.prototype,"highlight",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"filter",void 0),E([Object(o.D)(),C("design:type",String)],e.prototype,"contextLevel",void 0),E([Object(o.D)(),C("design:type",Number)],e.prototype,"contextInstanceId",void 0),E([Object(o.D)(),C("design:type",Number)],e.prototype,"courseId",void 0),E([Object(o.D)(),C("design:type",Object)],e.prototype,"wsNotFiltered",void 0),E([Object(o.O)(),C("design:type",o.v)],e.prototype,"afterRender",void 0),e=E([Object(o.s)({selector:"core-format-text"}),I(12,Object(o.N)()),I(13,Object(o.N)()),I(14,Object(o.N)()),C("design:paramtypes",[o.t,c.a,d.a,p.a,i.c,r.v,m.a,h.a,u.a,s.a,l.a,v.a,r.s,r.f,y.a,f.a,a.a,b.a,P.a,O.a,o._11])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(9),i=n(57),l=n(18),a=n(6),s=n(1),u=n(24),c=n(2),d=n(13),f=n(1055),p=n(40),h=n(194),m=(n.n(h),n(146)),_=(n.n(m),n(98)),g=n(115),v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(e){function t(t,n,o,i,l,a,s,u,c){var d=e.call(this,"CoreCourseModulePrefetchDelegate",t,n,u)||this;return d.sitesProvider=n,d.utils=o,d.courseProvider=i,d.filepoolProvider=l,d.timeUtils=a,d.fileProvider=s,d.eventsProvider=u,d.fileHelper=c,d.CHECK_UPDATES_TIMES_TABLE="check_updates_times",d.siteSchema={name:"CoreCourseModulePrefetchDelegate",version:1,tables:[{name:d.CHECK_UPDATES_TIMES_TABLE,columns:[{name:"courseId",type:"INTEGER",primaryKey:!0},{name:"time",type:"INTEGER",notNull:!0}]}]},d.ROOT_CACHE_KEY="mmCourse:",d.statusCache=new f.a,d.handlerNameProperty="modName",d.courseUpdatesPromises={},d.prefetchData={},d.sitesProvider.registerSiteSchema(d.siteSchema),u.on(r.a.LOGOUT,d.clearStatusCache.bind(d)),u.on(r.a.PACKAGE_STATUS_CHANGED,function(e){d.updateStatusCache(e.status,e.component,e.componentId)},d.sitesProvider.getCurrentSiteId()),d}return v(t,e),t.prototype.canCheckUpdates=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_check_updates")},t.prototype.canModuleUseCheckUpdates=function(e,t){var n=this.getPrefetchHandlerFor(e);return n?n.canUseCheckUpdates?Promise.resolve(n.canUseCheckUpdates(e,t)):Promise.resolve(!0):Promise.resolve(!1)},t.prototype.clearStatusCache=function(){this.statusCache.clear()},t.prototype.createToCheckList=function(e,t){var n=this,o={toCheck:[],cannotUse:[]},r=[];return e.forEach(function(e){r.push(n.getModuleStatusAndDownloadTime(e,t).then(function(r){if(r.status==p.a.DOWNLOADED)return n.canModuleUseCheckUpdates(e,t).then(function(t){t?o.toCheck.push({contextlevel:"module",id:e.id,since:r.downloadTime||0}):o.cannotUse.push(e)})}).catch(function(){}))}),Promise.all(r).then(function(){return o.toCheck.sort(function(e,t){return e.id>=t.id?1:-1}),o})},t.prototype.determineModuleStatus=function(e,t,n){var o=this.getPrefetchHandlerFor(e),r=this.sitesProvider.getCurrentSiteId();if(o)if(t==p.a.DOWNLOADING)this.filepoolProvider.getPackageDownloadPromise(r,o.component,e.id)||o.prefetch(e);else if(o.determineStatus)return n=n||this.canCheckUpdates(),o.determineStatus(e,t,n);return t},t.prototype.getCourseUpdates=function(e,t){var n=this;if(!this.canCheckUpdates())return Promise.reject(null);var o=h.Md5.hashAsciiStr(t+"#"+JSON.stringify(e)),r=this.sitesProvider.getCurrentSiteId();return this.courseUpdatesPromises[r]&&this.courseUpdatesPromises[r][o]?this.courseUpdatesPromises[r][o]:(this.courseUpdatesPromises[r]||(this.courseUpdatesPromises[r]={}),this.courseUpdatesPromises[r][o]=this.createToCheckList(e,t).then(function(e){var o={};return e.cannotUse.forEach(function(e){o[e.id]=!1}),e.toCheck.length?n.sitesProvider.getSite(r).then(function(r){var i={courseid:t,tocheck:e.toCheck},l={cacheKey:n.getCourseUpdatesCacheKey(t),emergencyCache:!1,uniqueCacheKey:!0};return r.read("core_course_check_updates",i,l).then(function(i){if(!i||void 0===i.instances)return Promise.reject(null);var l={courseId:t,time:n.timeUtils.timestamp()};return r.getDb().insertRecord(n.CHECK_UPDATES_TIMES_TABLE,l).catch(function(){}),n.treatCheckUpdatesResult(e.toCheck,i,o)}).catch(function(a){return r.getDb().getRecord(n.CHECK_UPDATES_TIMES_TABLE,{courseId:t}).then(function(t){return l.getCacheUsingCacheKey=!0,l.omitExpires=!0,r.read("core_course_check_updates",i,l).then(function(r){return r&&void 0!==r.instances?n.treatCheckUpdatesResult(e.toCheck,r,o,t.time):Promise.reject(a)})},function(){return o})})}):o}).finally(function(){delete n.courseUpdatesPromises[r][o]}),this.courseUpdatesPromises[r][o])},t.prototype.getCourseUpdatesByCourseId=function(e){var t=this;return this.canCheckUpdates()?this.courseProvider.getSections(e,!1,!0,{omitExpires:!0}).then(function(n){return t.getCourseUpdates(t.courseProvider.getSectionsModules(n),e)}):Promise.reject(null)},t.prototype.getCourseUpdatesCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseUpdates:"+e},t.prototype.getDownloadSize=function(e,t){var n=this;return this.getModulesStatus(e,t).then(function(e){var o=[],r={size:0,total:!0};return e[p.a.NOT_DOWNLOADED].concat(e[p.a.OUTDATED]).forEach(function(e){o.push(n.getModuleDownloadSize(e,t).then(function(e){r.total=r.total&&e.total,r.size+=e.size}))}),Promise.all(o).then(function(){return r})})},t.prototype.getModuleDownloadSize=function(e,t,n){var o,r,i=this,l=this.getPrefetchHandlerFor(e);return l?this.isModuleDownloadable(e,t).then(function(a){return a?(r=i.filepoolProvider.getPackageId(l.component,e.id),void 0!==(o=i.statusCache.getValue(r,"downloadSize"))?o:Promise.resolve(l.getDownloadSize(e,t,n)).then(function(e){return i.statusCache.setValue(r,"downloadSize",e)}).catch(function(e){var t=i.statusCache.getValue(r,"downloadSize",!0);return t||Promise.reject(e)})):{size:0,total:!0}}):Promise.resolve({size:0,total:!1})},t.prototype.getModuleDownloadedSize=function(e,t){var n,o,r=this,i=this.getPrefetchHandlerFor(e);return i?this.isModuleDownloadable(e,t).then(function(l){return l?(o=r.filepoolProvider.getPackageId(i.component,e.id),void 0!==(n=r.statusCache.getValue(o,"downloadedSize"))?n:(i.getDownloadedSize?Promise.resolve(i.getDownloadedSize(e,t)):r.getModuleFiles(e,t).then(function(e){var t=r.sitesProvider.getCurrentSiteId(),n=[],o=0;return e.forEach(function(e){var i=e.url||e.fileurl;n.push(r.filepoolProvider.getFilePathByUrl(t,i).then(function(n){return r.fileProvider.getFileSize(n).catch(function(){return r.filepoolProvider.isFileDownloadingByUrl(t,i).then(function(){return e.filesize}).catch(function(){return 0})}).then(function(e){o+=e})}))}),Promise.all(n).then(function(){return o})})).then(function(e){return r.statusCache.setValue(o,"downloadedSize",e)}).catch(function(){return r.statusCache.getValue(o,"downloadedSize",!0)})):0}):Promise.resolve(0)},t.prototype.getModuleFiles=function(e,t){var n=this.getPrefetchHandlerFor(e);return n.getFiles?Promise.resolve(n.getFiles(e,t)):n.loadContents?n.loadContents(e,t).then(function(){return e.contents}):Promise.resolve(e.contents||[])},t.prototype.getModuleStatus=function(e,t,n,o,r){var i=this,l=this.getPrefetchHandlerFor(e),a=this.sitesProvider.getCurrentSiteId(),s=this.canCheckUpdates();if(l){var u,c=l.component,d=this.filepoolProvider.getPackageId(c,e.id),f=this.statusCache.getValue(d,"status"),h=!0;return o||void 0===f?this.isModuleDownloadable(e,t).then(function(o){return o?i.filepoolProvider.getPackageStatus(a,c,e.id).then(function(o){if((f=l.determineStatus?l.determineStatus(e,o,s):o)!=p.a.DOWNLOADED)return f;if(void 0===n)u=i.getCourseUpdatesByCourseId(t);else{if(!1===n)return f;u=Promise.resolve(n)}return u.then(function(n){return n&&!1!==n[e.id]?i.moduleHasUpdates(e,t,n).then(function(t){return t?(f=p.a.OUTDATED,i.filepoolProvider.storePackageStatus(a,f,c,e.id).catch(function(){}).then(function(){return f})):f}).catch(function(){var t=i.statusCache.getValue(d,"status",!0);return i.determineModuleStatus(e,t,s)}):p.a.OUTDATED},function(){return h=!1,i.storeCourseAndSection(d,t,r),o})}):p.a.NOT_DOWNLOADABLE}).then(function(n){return h&&i.updateStatusCache(n,c,e.id,t,r),i.determineModuleStatus(e,n,s)}):(this.storeCourseAndSection(d,t,r),Promise.resolve(this.determineModuleStatus(e,f,s)))}return Promise.resolve(p.a.NOT_DOWNLOADABLE)},t.prototype.getModulesStatus=function(e,t,n,o,r,i){var l=this;void 0===i&&(i=!0);var a=[],s={total:0},u=p.a.NOT_DOWNLOADABLE;return s[p.a.NOT_DOWNLOADED]=[],s[p.a.DOWNLOADED]=[],s[p.a.DOWNLOADING]=[],s[p.a.OUTDATED]=[],(i?this.getCourseUpdatesByCourseId(t).catch(function(){return!1}):Promise.resolve(!1)).then(function(n){return e.forEach(function(e){var i=l.getPrefetchHandlerFor(e);if(i){if(r&&i.skipListStatus)return;var c=l.filepoolProvider.getPackageId(i.component,e.id);a.push(l.getModuleStatus(e,t,n,o).then(function(t){s[t]&&(u=l.filepoolProvider.determinePackagesStatus(u,t),s[t].push(e),s.total++)}).catch(function(t){var n=l.statusCache.getValue(c,"status",!0);if(void 0===n)return Promise.reject(t);s[n]&&(u=l.filepoolProvider.determinePackagesStatus(u,n),s[n].push(e),s.total++)}))}}),Promise.all(a).then(function(){return s.status=u,s})})},t.prototype.getModuleStatusAndDownloadTime=function(e,t){var n=this,o=this.getPrefetchHandlerFor(e),r=this.sitesProvider.getCurrentSiteId();if(o){var i=this.filepoolProvider.getPackageId(o.component,e.id),l=this.statusCache.getValue(i,"status");return void 0===l||this.fileHelper.isStateDownloaded(l)?this.isModuleDownloadable(e,t).then(function(t){return t?n.filepoolProvider.getPackageData(r,o.component,e.id).then(function(e){return{status:e.status,downloadTime:e.downloadTime||0}}):{status:p.a.NOT_DOWNLOADABLE}}):Promise.resolve({status:l})}return Promise.resolve({status:p.a.NOT_DOWNLOADABLE})},t.prototype.getModuleUpdates=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return r.getModuleStatusAndDownloadTime(e,t).then(function(i){return r.fileHelper.isStateDownloaded(i.status)?r.canModuleUseCheckUpdates(e,t).then(function(l){if(!l)return{};var a={courseid:t,tocheck:[{contextlevel:"module",id:e.id,since:i.downloadTime||0}]},s={cacheKey:r.getModuleUpdatesCacheKey(t,e.id)};return n&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("core_course_check_updates",a,s).then(function(e){return e&&e.instances&&e.instances[0]?e.instances[0]:Promise.reject(null)})}):{}})})},t.prototype.getModuleUpdatesCacheKey=function(e,t){return this.getCourseUpdatesCacheKey(e)+":"+t},t.prototype.getPrefetchHandlerFor=function(e){return this.getHandler(e.modname,!0)},t.prototype.invalidateCourseUpdates=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getCourseUpdatesCacheKey(e))},t.prototype.invalidateModules=function(e,t){var n=this,o=[];return e.forEach(function(e){var r=n.getPrefetchHandlerFor(e);r&&(r.invalidateModule&&o.push(r.invalidateModule(e,t).catch(function(){})),n.invalidateModuleStatusCache(e))}),o.push(this.invalidateCourseUpdates(t)),Promise.all(o)},t.prototype.invalidateModuleStatusCache=function(e){var t=this.getPrefetchHandlerFor(e);t&&this.statusCache.invalidate(this.filepoolProvider.getPackageId(t.component,e.id))},t.prototype.invalidateModuleUpdates=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getModuleUpdatesCacheKey(e,t))})},t.prototype.isBeingDownloaded=function(e){var t=this.sitesProvider.getCurrentSiteId();return!(!this.prefetchData[t]||!this.prefetchData[t][e])},t.prototype.isModuleDownloadable=function(e,t){var n=this;if(!1===e.uservisible)return Promise.resolve(!1);var o=this.getPrefetchHandlerFor(e);if(o){if("function"==typeof o.isDownloadable){var r=this.filepoolProvider.getPackageId(o.component,e.id),i=this.statusCache.getValue(r,"downloadable");return void 0!==i?Promise.resolve(i):Promise.resolve(o.isDownloadable(e,t)).then(function(e){return n.statusCache.setValue(r,"downloadable",e)}).catch(function(){return!1})}return Promise.resolve(!0)}return Promise.resolve(!1)},t.prototype.moduleHasUpdates=function(e,t,n){var o=this.getPrefetchHandlerFor(e),r=n[e.id];if(o&&o.hasUpdates)return Promise.resolve(o.hasUpdates(e,t,r));if(!(r&&r.updates&&r.updates.length))return Promise.resolve(!1);if(o&&o.updatesNames&&o.updatesNames.test){for(var i=0,l=r.updates.length;i<l;i++)if(o.updatesNames.test(r.updates[i].name))return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.resolve(!0)},t.prototype.prefetchModule=function(e,t,n){var o=this.getPrefetchHandlerFor(e);return o?this.syncModule(e,t).then(function(){return o.prefetch(e,t,n)}):Promise.resolve()},t.prototype.syncModules=function(e,t){var n=this;return Promise.all(e.map(function(e){return n.syncModule(e,t).then(function(){return n.invalidateCourseUpdates(t).catch(function(){})})}))},t.prototype.syncModule=function(e,t){var n=this,o=this.getPrefetchHandlerFor(e);return o&&o.sync?o.sync(e,t).then(function(t){return n.invalidateModuleStatusCache(e),t}).catch(function(){}):Promise.resolve()},t.prototype.prefetchModules=function(e,t,n,o){var r=this,i=this.sitesProvider.getCurrentSiteId(),l=this.prefetchData[i]&&this.prefetchData[i][e];if(l)return o&&l.subscriptions.push(l.observable.subscribe(o)),l.promise;var a=0,s=[],u=t.length,c=t.map(function(e){return e.id}),d={observable:new m.BehaviorSubject({count:a,total:u}),promise:void 0,subscriptions:[]};return o&&d.observable.subscribe(o),t.forEach(function(e){var t=r.getPrefetchHandlerFor(e);t&&s.push(r.isModuleDownloadable(e,n).then(function(o){if(o)return t.prefetch(e,n).then(function(){var t=c.indexOf(e.id);t>-1&&(c.splice(t,1),d.observable.next({count:++a,total:u}))})}))}),d.promise=this.utils.allPromises(s).finally(function(){d.subscriptions.forEach(function(e){e.unsubscribe()}),delete r.prefetchData[i][e]}),this.prefetchData[i]||(this.prefetchData[i]={}),this.prefetchData[i][e]=d,d.promise},t.prototype.removeModuleFiles=function(e,t){var n=this,o=this.getPrefetchHandlerFor(e),r=this.sitesProvider.getCurrentSiteId();return(o&&o.removeFiles?o.removeFiles(e,t):this.getModuleFiles(e,t).then(function(e){var t=[];return e.forEach(function(e){t.push(n.filepoolProvider.removeFileByUrl(r,e.url||e.fileurl).catch(function(){}))}),Promise.all(t)})).then(function(){if(o){var t=n.filepoolProvider.getPackageId(o.component,e.id);return n.statusCache.setValue(t,"downloadedSize",0),n.filepoolProvider.storePackageStatus(r,p.a.NOT_DOWNLOADED,o.component,e.id)}})},t.prototype.setOnProgress=function(e,t){var n=this.sitesProvider.getCurrentSiteId(),o=this.prefetchData[n]&&this.prefetchData[n][e];o&&o.subscriptions.push(o.observable.subscribe(t))},t.prototype.storeCourseAndSection=function(e,t,n){t&&this.statusCache.setValue(e,"courseId",t),n&&n>0&&this.statusCache.setValue(e,"sectionId",n)},t.prototype.treatCheckUpdatesResult=function(e,t,n,o){return this.utils.arrayToObject(t.instances,"id",n),t.warnings.forEach(function(e){"missingcallback"==e.warningcode&&(n[e.itemid]=!1)}),o&&e.forEach(function(e){n[e.id]&&e.since>o&&delete n[e.id]}),n},t.prototype.updateStatusCache=function(e,t,n,o,i){var l,a=this.filepoolProvider.getPackageId(t,n),s=this.statusCache.getValue(a,"status",!0);l=void 0!==s&&s!==e,this.storeCourseAndSection(a,o,i),l?(o||(o=this.statusCache.getValue(a,"courseId",!0)),i||(i=this.statusCache.getValue(a,"sectionId",!0)),this.statusCache.invalidate(a),this.statusCache.setValue(a,"status",e),i&&this.eventsProvider.trigger(r.a.SECTION_STATUS_CHANGED,{sectionId:i,courseId:o},this.sitesProvider.getCurrentSiteId())):this.statusCache.setValue(a,"status",e)},t=y([Object(o.A)(),b("design:paramtypes",[a.a,s.a,c.a,d.a,l.a,u.a,i.a,r.a,g.a])],t)}(_.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(3),i=n(742),l=n(9),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.translate=e,this.eventsProvider=n,this.element=t.nativeElement,this.uniqueId="core-loading-content-"+o.getUniqueId("CoreLoadingComponent")}return e.prototype.ngOnInit=function(){this.message||(this.message=this.translate.instant("core.loading")),this.hideUntil&&(this.element.classList.add("core-loading-loaded"),this.content.nativeElement.classList.add("core-loading-content"))},e.prototype.ngOnChanges=function(e){var t=this;e.hideUntil&&(!0===e.hideUntil.currentValue?setTimeout(function(){t.element.classList.add("core-loading-loaded"),setTimeout(function(){t.content.nativeElement.classList.add("core-loading-content"),t.content.nativeElement.classList.remove("core-loading-content-loading")},500)}):(this.element.classList.remove("core-loading-loaded"),this.content.nativeElement.classList.remove("core-loading-content"),this.content.nativeElement.classList.add("core-loading-content-loading")),setTimeout(function(){t.eventsProvider.trigger(l.a.CORE_LOADING_CHANGED,{loaded:e.hideUntil.currentValue,uniqueId:t.uniqueId})}))},s([Object(o.D)(),u("design:type",Boolean)],e.prototype,"hideUntil",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"message",void 0),s([Object(o._9)("content"),u("design:type",o.t)],e.prototype,"content",void 0),e=s([Object(o.m)({selector:"core-loading",templateUrl:"core-loading.html",animations:[i.a]}),u("design:paramtypes",[r.c,o.t,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(53),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.sitesProvider=t,this.eventsProvider=n,this.ROOT_CACHE_KEY="mmCourses:",this.logger=e.getInstance("CoreCoursesProvider")}return t=e,e.prototype.canGetAdminAndNavOptions=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_get_user_navigation_options")&&this.sitesProvider.wsAvailableInCurrentSite("core_course_get_user_administration_options")},e.prototype.getCategories=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={criteria:[{key:0==e?"parent":"id",value:e}],addsubcategories:t?1:0},i={cacheKey:o.getCategoriesCacheKey(e,t),updateFrequency:a.a.FREQUENCY_RARELY};return n.read("core_course_get_categories",r,i)})},e.prototype.getCategoriesCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"categories:"+e+":"+!!t},e.prototype.getCourseIdsForAdminAndNavOptions=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(o){var r=o.getSiteHomeId();return 1==e.length?n.getCourseIdsIfEnrolled(e[0],t):(e.length>1&&-1==e.indexOf(r)&&e.push(r),e.sort(function(e,t){return t-e}),e)})},e.prototype.getCourseIdsIfEnrolled=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(o){var r=o.getSiteHomeId();return n.getUserCourses(!0,t).then(function(t){if(e==r||!!t.find(function(t){return t.id==e})){var n=t.map(function(e){return e.id});return n.push(r),n.sort(function(e,t){return t-e}),n}return[e]}).catch(function(){return[e]})})},e.prototype.isDownloadCourseDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isDownloadCoursesDisabledInSite(e)})},e.prototype.isDownloadCourseDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isOfflineDisabled()||e.isFeatureDisabled("NoDelegate_CoreCourseDownload")},e.prototype.isDownloadCoursesDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isDownloadCoursesDisabledInSite(e)})},e.prototype.isDownloadCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isOfflineDisabled()||e.isFeatureDisabled("NoDelegate_CoreCoursesDownload")},e.prototype.isMyCoursesDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isMyCoursesDisabledInSite(e)})},e.prototype.isMyCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreCourses")},e.prototype.isSearchCoursesDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isSearchCoursesDisabledInSite(e)})},e.prototype.isSearchCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreCourseOptionsDelegate_search")},e.prototype.getCourse=function(e,t){return this.getCourses([e],t).then(function(e){return e&&e.length>0?e[0]:Promise.reject(null)})},e.prototype.getCourseEnrolmentMethods=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={courseid:e},r={cacheKey:n.getCourseEnrolmentMethodsCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("core_enrol_get_course_enrolment_methods",o,r)})},e.prototype.getCourseEnrolmentMethodsCacheKey=function(e){return this.ROOT_CACHE_KEY+"enrolmentmethods:"+e},e.prototype.getCourseGuestEnrolmentInfo=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={instanceid:e},r={cacheKey:n.getCourseGuestEnrolmentInfoCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("enrol_guest_get_instance_info",o,r).then(function(e){return e.instanceinfo})})},e.prototype.getCourseGuestEnrolmentInfoCacheKey=function(e){return this.ROOT_CACHE_KEY+"guestinfo:"+e},e.prototype.getCourses=function(e,t){var n=this;return Array.isArray(e)?0===e.length?Promise.resolve([]):this.sitesProvider.getSite(t).then(function(t){var o={options:{ids:e}},r={cacheKey:n.getCoursesCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("core_course_get_courses",o,r)}):Promise.reject(null)},e.prototype.getCoursesCacheKey=function(e){return this.ROOT_CACHE_KEY+"course:"+JSON.stringify(e)},e.prototype.fixCoursesByFieldParams=function(e,t,n){if("id"==e||"ids"==e){var o=String(t).split(",");return this.getCourseIdsForAdminAndNavOptions(o,n).then(function(e){return e.length>1?{field:"ids",value:e.join(",")}:{field:"id",value:Number(e[0])}})}return Promise.resolve({field:e,value:t})},e.prototype.getCourseByField=function(e,t,n){return this.getCoursesByField(e,t,n).then(function(e){return e&&e.length>0?e[0]:Promise.reject(null)})},e.prototype.getCoursesByField=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=t,i=!1;return this.fixCoursesByFieldParams(e,t,n).then(function(r){return i=r.field!=e||r.value!=t,e=r.field,t=r.value,o.sitesProvider.getSite(n)}).then(function(n){var l={field:e||"",value:e?t:""},s={cacheKey:o.getCoursesByFieldCacheKey(e,t),updateFrequency:a.a.FREQUENCY_RARELY};return n.read("core_course_get_courses_by_field",l,s).then(function(t){if(t.courses){if("ids"==e&&i){var n=String(r).split(","),o=[];t.courses.forEach(function(e){var t=n.indexOf(String(e.id));-1!=t&&(o.push(e),n.splice(t,1))}),t.courses=o}return t.courses.sort(function(e,t){return void 0===e.sortorder&&void 0===t.sortorder?t.id-e.id:void 0===e.sortorder?1:void 0===t.sortorder?-1:e.sortorder-t.sortorder})}return Promise.reject(null)})})},e.prototype.getCoursesByFieldCacheKey=function(e,t){return e=e||"",t=e?t:"",this.ROOT_CACHE_KEY+"coursesbyfield:"+e+":"+t},e.prototype.getEnrolledCoursesByCustomField=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.read("core_course_get_enrolled_courses_by_timeline_classification",{classification:"customfield",customfieldname:e,customfieldvalue:t},{getFromCache:!1}).then(function(e){return e.courses?e.courses:Promise.reject(null)})})},e.prototype.isGetCoursesByFieldAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_course_get_courses_by_field")},e.prototype.isGetCoursesByFieldAvailableInSite=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isGetCoursesByFieldAvailable(e)})},e.prototype.getCoursesAdminAndNavOptions=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getCourseIdsForAdminAndNavOptions(e,t).then(function(e){var o,r,i=[];return i.push(n.getUserNavigationOptions(e,t).catch(function(){return{}}).then(function(e){o=e})),i.push(n.getUserAdministrationOptions(e,t).catch(function(){return{}}).then(function(e){r=e})),Promise.all(i).then(function(){return{navOptions:o,admOptions:r}})})},e.prototype.getUserAdministrationOptionsCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"administrationOptions:"},e.prototype.getUserAdministrationOptionsCacheKey=function(e){return this.getUserAdministrationOptionsCommonCacheKey()+e.join(",")},e.prototype.getUserAdministrationOptions=function(e,t){var n=this;return e&&0!=e.length?this.sitesProvider.getSite(t).then(function(t){var o={courseids:e},r={cacheKey:n.getUserAdministrationOptionsCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("core_course_get_user_administration_options",o,r).then(function(e){return n.formatUserAdminOrNavOptions(e.courses)})}):Promise.resolve({})},e.prototype.getUserNavigationOptionsCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"navigationOptions:"},e.prototype.getUserNavigationOptionsCacheKey=function(e){return this.getUserNavigationOptionsCommonCacheKey()+e.join(",")},e.prototype.getUserNavigationOptions=function(e,t){var n=this;return e&&0!=e.length?this.sitesProvider.getSite(t).then(function(t){var o={courseids:e},r={cacheKey:n.getUserNavigationOptionsCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("core_course_get_user_navigation_options",o,r).then(function(e){return n.formatUserAdminOrNavOptions(e.courses)})}):Promise.resolve({})},e.prototype.formatUserAdminOrNavOptions=function(e){var t={};return e.forEach(function(e){var n={};e.options&&e.options.forEach(function(e){n[e.name]=e.available}),t[e.id]=n}),t},e.prototype.getUserCourse=function(e,t,n){return e?this.getUserCourses(t,n).then(function(t){var n;for(var o in t)if(t[o].id==e){n=t[o];break}return n||Promise.reject(null)}):Promise.reject(null)},e.prototype.getUserCourses=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={userid:n.getUserId()},l=o?r.sitesProvider.getReadingStrategyPreSets(o):{omitExpires:!!e},u=s({cacheKey:r.getUserCoursesCacheKey(),getCacheUsingCacheKey:!0,updateFrequency:a.a.FREQUENCY_RARELY},l);return n.isVersionGreaterEqualThan("3.7")&&(i.returnusercount=0),n.read("core_enrol_get_users_courses",i,u).then(function(e){if(r.userCoursesIds){var o=[],i=[],l=Object.keys(r.userCoursesIds),a={};e.forEach(function(e){a[e.id]=!0,r.userCoursesIds[e.id]||o.push(e.id)}),e.length-o.length!=l.length&&l.forEach(function(e){a[e]||i.push(Number(e))}),(o.length||i.length)&&r.eventsProvider.trigger(t.EVENT_MY_COURSES_CHANGED,{added:o,removed:i},n.getId()),r.userCoursesIds=a}else r.userCoursesIds={},e.forEach(function(e){r.userCoursesIds[e.id]=!0});return e})})},e.prototype.getUserCoursesCacheKey=function(){return this.ROOT_CACHE_KEY+"usercourses"},e.prototype.invalidateCategories=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getCategoriesCacheKey(e,t))})},e.prototype.invalidateCourse=function(e,t){return this.invalidateCourses([e],t)},e.prototype.invalidateCourseEnrolmentMethods=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCourseEnrolmentMethodsCacheKey(e))})},e.prototype.invalidateCourseGuestEnrolmentInfo=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCourseGuestEnrolmentInfoCacheKey(e))})},e.prototype.invalidateCoursesAdminAndNavOptions=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getCourseIdsForAdminAndNavOptions(e,t).then(function(e){var o=[];return o.push(n.invalidateUserAdministrationOptionsForCourses(e,t)),o.push(n.invalidateUserNavigationOptionsForCourses(e,t)),Promise.all(o)})},e.prototype.invalidateCourses=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCoursesCacheKey(e))})},e.prototype.invalidateCoursesByField=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.fixCoursesByFieldParams(e,t,n).then(function(r){return e=r.field,t=r.value,o.sitesProvider.getSite(n)}).then(function(n){return n.invalidateWsCacheForKey(o.getCoursesByFieldCacheKey(e,t))})},e.prototype.invalidateUserAdministrationOptions=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getUserAdministrationOptionsCommonCacheKey())})},e.prototype.invalidateUserAdministrationOptionsForCourses=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getUserAdministrationOptionsCacheKey(e))})},e.prototype.invalidateUserCourses=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getUserCoursesCacheKey())})},e.prototype.invalidateUserNavigationOptions=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getUserNavigationOptionsCommonCacheKey())})},e.prototype.invalidateUserNavigationOptionsForCourses=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getUserNavigationOptionsCacheKey(e))})},e.prototype.isGuestWSAvailable=function(){var e=this.sitesProvider.getCurrentSite();return e&&e.wsAvailable("enrol_guest_get_instance_info")},e.prototype.search=function(e,n,o,r){return void 0===n&&(n=0),o=o||t.SEARCH_PER_PAGE,this.sitesProvider.getSite(r).then(function(t){return t.read("core_course_search_courses",{criterianame:"search",criteriavalue:e,page:n,perpage:o},{getFromCache:!1}).then(function(e){return{total:e.total,courses:e.courses}})})},e.prototype.selfEnrol=function(e,n,o,r){return void 0===n&&(n=""),this.sitesProvider.getSite(r).then(function(r){var i={courseid:e,password:n};return o&&(i.instanceid=o),r.write("enrol_self_enrol_user",i).then(function(e){if(e){if(e.status)return!0;if(e.warnings&&e.warnings.length){var n;return e.warnings.forEach(function(e){"2"!=e.warningcode&&"3"!=e.warningcode&&"4"!=e.warningcode||(n=e.message)}),n?Promise.reject({code:t.ENROL_INVALID_KEY,message:n}):Promise.reject(e.warnings[0])}}return Promise.reject(null)})})},e.prototype.setFavouriteCourse=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("core_course_set_favourite_courses",{courses:[{id:e,favourite:t?1:0}]})})},e.SEARCH_PER_PAGE=20,e.ENROL_INVALID_KEY="CoreCoursesEnrolInvalidKey",e.EVENT_MY_COURSES_CHANGED="courses_my_courses_changed",e.EVENT_MY_COURSES_UPDATED="courses_my_courses_updated",e.EVENT_MY_COURSES_REFRESHED="courses_my_courses_refreshed",e.EVENT_DASHBOARD_DOWNLOAD_ENABLED_CHANGED="dashboard_download_enabled_changed",e=t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,r.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(3),r=n(262),i=n(10),l=n(427),a=n(9),s=n(57),u=n(6),c=n(171),d=n(4),f=n(11),p=n(24),h=n(22),m=n(2),_=n(40),g=n(116),v=n(194),y=(n.n(v),this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}),b=function(){function e(e,t,n,_,v,y,b,P){this.id=t,this.siteUrl=n,this.token=_,this.infos=v,this.privateToken=y,this.config=b,this.loggedOut=P,this.MOODLE_RELEASES={3.1:2016052300,3.2:2016120500,3.3:2017051503,3.4:2017111300,3.5:2018051700,3.6:2018120300,3.7:2019052e3},this.UPDATE_FREQUENCIES=[g.a.cache_update_frequency_usually||42e4,g.a.cache_update_frequency_often||12e5,g.a.cache_update_frequency_sometimes||36e5,g.a.cache_update_frequency_rarely||432e5],this.cleanUnicode=!1,this.lastAutoLogin=0,this.offlineDisabled=!1,this.ongoingRequests={},this.requestQueue=[],this.requestQueueTimeout=null;var O=e.get(u.a);this.appProvider=e.get(i.a),this.dbProvider=e.get(l.a),this.domUtils=e.get(d.a),this.eventsProvider=e.get(a.a),this.fileProvider=e.get(s.a),this.http=e.get(r.c),this.textUtils=e.get(f.a),this.timeUtils=e.get(p.a),this.translate=e.get(o.c),this.utils=e.get(m.a),this.urlUtils=e.get(h.a),this.wsProvider=e.get(c.a),this.logger=O.getInstance("CoreWSProvider"),this.setInfo(v),this.calculateOfflineDisabled(),this.id&&this.initDB()}return e.prototype.initDB=function(){this.db=this.dbProvider.getDB("Site-"+this.id)},e.prototype.getId=function(){return this.id},e.prototype.getURL=function(){return this.siteUrl},e.prototype.getToken=function(){return this.token},e.prototype.getInfo=function(){return this.infos},e.prototype.getPrivateToken=function(){return this.privateToken},e.prototype.getDb=function(){return this.db},e.prototype.getUserId=function(){if(void 0!==this.infos&&void 0!==this.infos.userid)return this.infos.userid},e.prototype.getSiteHomeId=function(){return this.infos&&this.infos.siteid||1},e.prototype.getSiteName=function(){return g.a.sitename?g.a.sitename:this.infos&&this.infos.sitename||""},e.prototype.setId=function(e){this.id=e,this.initDB()},e.prototype.setToken=function(e){this.token=e},e.prototype.setPrivateToken=function(e){this.privateToken=e},e.prototype.isLoggedOut=function(){return!!this.loggedOut},e.prototype.getOAuthId=function(){return this.oauthId},e.prototype.setInfo=function(e){this.infos=e,e&&e.functions&&(e.functionsByName={},e.functions.forEach(function(t){e.functionsByName[t.name]=t}))},e.prototype.setConfig=function(e){e&&(e.tool_mobile_disabledfeatures=this.textUtils.treatDisabledFeatures(e.tool_mobile_disabledfeatures)),this.config=e,this.calculateOfflineDisabled()},e.prototype.setLoggedOut=function(e){this.loggedOut=!!e},e.prototype.setOAuthId=function(e){this.oauthId=e},e.prototype.isOAuth=function(){return null!=this.oauthId&&void 0!==this.oauthId},e.prototype.canAccessMyFiles=function(){var e=this.getInfo();return e&&(void 0===e.usercanmanageownfiles||e.usercanmanageownfiles)},e.prototype.canDownloadFiles=function(){var e=this.getInfo();return e&&e.downloadfiles},e.prototype.canUseAdvancedFeature=function(e,t){void 0===t&&(t=!0);var n=this.getInfo(),o=!0;if(void 0===n.advancedfeatures)o=t;else for(var r in n.advancedfeatures){var i=n.advancedfeatures[r];i.name===e&&0===parseInt(i.value,10)&&(o=!1)}return o},e.prototype.canUploadFiles=function(){var e=this.getInfo();return e&&e.uploadfiles},e.prototype.fetchSiteInfo=function(){return this.cleanUnicode=!1,this.read("core_webservice_get_site_info",{},{getFromCache:!1,saveToCache:!1,skipQueue:!0})},e.prototype.read=function(e,t,n){return void 0===(n=n||{}).getFromCache&&(n.getFromCache=!0),void 0===n.saveToCache&&(n.saveToCache=!0),void 0===n.reusePending&&(n.reusePending=!0),this.request(e,t,n)},e.prototype.write=function(e,t,n){return void 0===(n=n||{}).getFromCache&&(n.getFromCache=!1),void 0===n.saveToCache&&(n.saveToCache=!1),void 0===n.emergencyCache&&(n.emergencyCache=!1),this.request(e,t,n)},e.prototype.request=function(t,n,o,r){var i=this,l=this.token;if(n=n||{},!this.appProvider.isOnline()&&this.offlineDisabled)return Promise.reject(this.wsProvider.createFakeWSError("core.errorofflinedisabled",!0));if(this.getInfo()&&!this.wsAvailable(t,!1)){var s=_.a.WS_PREFIX+t;if(!this.wsAvailable(s,!1))return this.logger.error("WS function '"+t+"' is not available, even in compatibility mode."),Promise.reject(this.utils.createFakeWSError("core.wsfunctionnotavailable",!0));this.logger.info("Using compatibility WS method '"+s+"'"),t=s}var u={wsToken:this.token,siteUrl:this.siteUrl,cleanUnicode:this.cleanUnicode,typeExpected:o.typeExpected,responseExpected:o.responseExpected};u.cleanUnicode&&this.textUtils.hasUnicodeData(n)?this.domUtils.showToast("core.unicodenotsupported",!0,3e3):u.cleanUnicode=!1,this.offlineDisabled&&(o.getFromCache=!1,o.saveToCache=!1,o.emergencyCache=!1),n.moodlewssettingfilter=!1!==o.filter,n.moodlewssettingfileurl=!1!==o.rewriteurls;var c=n;if(null==(n=this.wsProvider.convertValuesToString(n,u.cleanUnicode)))return Promise.reject(this.utils.createFakeWSError("core.unicodenotsupportedcleanerror",!0));var d=this.getCacheId(t,n);if(o.getFromCache&&this.ongoingRequests[d])return this.ongoingRequests[d].then(function(e){return i.utils.clone(e)});var f=this.getFromCache(t,n,o,!1,c).catch(function(){return o.forceOffline?Promise.reject(i.wsProvider.createFakeWSError("core.cannotconnect",!0,{$a:e.MINIMUM_MOODLE_VERSION})):i.callOrEnqueueRequest(t,n,o,u).then(function(e){return o.saveToCache&&i.saveToCache(t,n,e,o),e}).catch(function(e){if("invalidtoken"==e.errorcode||"accessexception"==e.errorcode&&e.message.indexOf("Invalid token - token expired")>-1){if(l!==i.token&&!r)return o.getFromCache=!1,i.request(t,n,o,!0);if(i.appProvider.isSSOAuthenticationOngoing())return i.appProvider.waitForSSOAuthentication().then(function(){return i.request(t,n,o,!0)});i.eventsProvider.trigger(a.a.SESSION_EXPIRED,{},i.id),e.message=i.translate.instant("core.lostconnection")}else{if("userdeleted"===e.errorcode)return i.eventsProvider.trigger(a.a.USER_DELETED,{params:n},i.id),e.message=i.translate.instant("core.userdeleted"),Promise.reject(e);if("forcepasswordchangenotice"===e.errorcode)i.eventsProvider.trigger(a.a.PASSWORD_CHANGE_FORCED,{},i.id),e.message=i.translate.instant("core.forcepasswordchangenotice");else if("usernotfullysetup"===e.errorcode)i.eventsProvider.trigger(a.a.USER_NOT_FULLY_SETUP,{},i.id),e.message=i.translate.instant("core.usernotfullysetup");else{if("sitepolicynotagreed"===e.errorcode)return i.eventsProvider.trigger(a.a.SITE_POLICY_NOT_AGREED,{},i.id),e.message=i.translate.instant("core.login.sitepolicynotagreederror"),Promise.reject(e);if("dmlwriteexception"===e.errorcode&&i.textUtils.hasUnicodeData(n))return i.cleanUnicode?(e.message=i.translate.instant("core.unicodenotsupported"),Promise.reject(e)):(i.cleanUnicode=!0,i.request(t,n,o));if("required_capability_exception"===e.exception||"nopermission"===e.errorcode||"notingroup"===e.errorcode)return"error/nopermission"===e.message?e.message=i.translate.instant("core.nopermissionerror"):"error/notingroup"===e.message&&(e.message=i.translate.instant("core.notingroup")),i.saveToCache(t,n,e,o),Promise.reject(e);if(o.cacheErrors&&-1!=o.cacheErrors.indexOf(e.errorcode))return i.saveToCache(t,n,e,o),Promise.reject(e);if(void 0!==o.emergencyCache&&!o.emergencyCache)return i.logger.debug("WS call '"+t+"' failed. Emergency cache is forbidden, rejecting."),Promise.reject(e)}}return o.deleteCacheIfWSError&&i.utils.isWebServiceError(e)?(i.deleteFromCache(t,n,o).catch(function(){}),Promise.reject(e)):(i.logger.debug("WS call '"+t+"' failed. Trying to use the emergency cache."),o.omitExpires=!0,o.getFromCache=!0,i.getFromCache(t,n,o,!0,c).catch(function(){return Promise.reject(e)}))})}).then(function(e){return!e||void 0===e.exception&&void 0===e.errorcode?e:Promise.reject(e)});return this.ongoingRequests[d]=f,f.finally(function(){i.ongoingRequests[d]===f&&delete i.ongoingRequests[d]}).then(function(e){return i.utils.clone(e)})},e.prototype.callOrEnqueueRequest=function(e,t,n,o){if(n.skipQueue||!this.wsAvailable("tool_mobile_call_external_functions"))return this.wsProvider.call(e,t,o);var r=this.getCacheId(e,t);if(n.reusePending){var i=this.requestQueue.find(function(e){return e.cacheId==r});if(i)return i.deferred.promise}var l={cacheId:r,method:e,data:t,preSets:n,wsPreSets:o,deferred:{}};return l.deferred.promise=new Promise(function(e,t){l.deferred.resolve=e,l.deferred.reject=t}),this.enqueueRequest(l)},e.prototype.enqueueRequest=function(t){return this.requestQueue.push(t),this.requestQueue.length>=e.REQUEST_QUEUE_LIMIT?this.processRequestQueue():this.requestQueueTimeout||(this.requestQueueTimeout=setTimeout(this.processRequestQueue.bind(this),e.REQUEST_QUEUE_DELAY)),t.deferred.promise},e.prototype.processRequestQueue=function(){var t=this;this.logger.debug("Processing request queue ("+this.requestQueue.length+" requests)"),this.requestQueueTimeout&&(clearTimeout(this.requestQueueTimeout),this.requestQueueTimeout=null);var n=this.requestQueue;if(this.requestQueue=[],1!=n.length||e.REQUEST_QUEUE_FORCE_WS){var o={requests:n.map(function(e){var t={},n={};return Object.keys(e.data).forEach(function(o){var r=e.data[o],i=/^moodlews(setting.*)$/.exec(o);i?("settingfilter"!=i[1]&&"settingfileurl"!=i[1]||(r="true"==r?"1":"0"),n[i[1]]=r):t[o]=r}),y({function:e.method,arguments:JSON.stringify(t)},n)})},r={siteUrl:this.siteUrl,wsToken:this.token};this.wsProvider.call("tool_mobile_call_external_functions",o,r).then(function(e){if(!e||!e.responses)return Promise.reject(null);n.forEach(function(n,o){var i=e.responses[o];if(i)if(i.error)n.deferred.reject(t.textUtils.parseJSON(i.exception));else{var l=t.textUtils.parseJSON(i.data);void 0===r.responseExpected||r.responseExpected||null!=l&&""!==l||(l={}),n.deferred.resolve(l)}else t.enqueueRequest(n)})}).catch(function(e){n.forEach(function(t){t.deferred.reject(e)})})}else this.wsProvider.call(n[0].method,n[0].data,n[0].wsPreSets).then(function(e){n[0].deferred.resolve(e)}).catch(function(e){n[0].deferred.reject(e)})},e.prototype.wsAvailable=function(e,t){return void 0===t&&(t=!0),void 0!==this.infos&&(!!this.infos.functionsByName[e]||!!t&&this.wsAvailable(_.a.WS_PREFIX+e,!1))},e.prototype.getCacheId=function(e,t){return v.Md5.hashAsciiStr(e+":"+this.utils.sortAndStringify(t))},e.prototype.getCacheOldId=function(e,t){return v.Md5.hashAsciiStr(e+":"+JSON.stringify(t))},e.prototype.getFromCache=function(t,n,o,r,i){var l=this;if(!this.db||!o.getFromCache)return Promise.reject(null);var a=this.getCacheId(t,n);return(o.getCacheUsingCacheKey||r&&o.getEmergencyCacheUsingCacheKey?this.db.getRecords(e.WS_CACHE_TABLE,{key:o.cacheKey}).then(function(t){if(!t.length)return l.db.getRecord(e.WS_CACHE_TABLE,{id:a});if(t.length>1)for(var n=0,o=t.length;n<o;n++){var r=t[n];if(r.id==a)return r}return t[0]}):this.db.getRecord(e.WS_CACHE_TABLE,{id:a}).catch(function(){var n=l.getCacheOldId(t,i||{});return l.db.getRecord(e.WS_CACHE_TABLE,{id:n}).then(function(t){return l.db.updateRecords(e.WS_CACHE_TABLE,{id:a},{id:n}),t})})).then(function(e){var t,n=Date.now();if(o.omitExpires=o.omitExpires||o.forceOffline||!l.appProvider.isOnline(),!o.omitExpires&&(t=e.expirationTime+l.getExpirationDelay(o.updateFrequency),n>t))return l.logger.debug("Cached element found, but it is expired"),Promise.reject(null);if(void 0!==e&&void 0!==e.data){if(t){l.logger.info("Cached element found, id: "+a+". Expires in expires in "+(t-n)/1e3+" seconds")}else l.logger.info("Cached element found, id: "+a+". Expiration time ignored.");return l.textUtils.parseJSON(e.data,{})}return Promise.reject(null)})},e.prototype.saveToCache=function(t,n,o,r){var i=this;if(!this.db)return Promise.reject(null);return(r.uniqueCacheKey?this.deleteFromCache(t,n,r,!0).catch(function(){}):Promise.resolve()).then(function(){var l={id:i.getCacheId(t,n),data:JSON.stringify(o),expirationTime:Date.now()};return r.cacheKey&&(l.key=r.cacheKey),i.db.insertRecord(e.WS_CACHE_TABLE,l)})},e.prototype.deleteFromCache=function(t,n,o,r){if(!this.db)return Promise.reject(null);var i=this.getCacheId(t,n);return this.db.deleteRecords(e.WS_CACHE_TABLE,r?{key:o.cacheKey}:{id:i})},e.prototype.uploadFile=function(e,t,n){return t.fileArea||(t.fileArea="draft"),this.wsProvider.uploadFile(e,t,{siteUrl:this.siteUrl,wsToken:this.token},n)},e.prototype.invalidateWsCache=function(){var t=this;return this.db?(this.logger.debug("Invalidate all the cache for site: "+this.id),this.db.updateRecords(e.WS_CACHE_TABLE,{expirationTime:0}).finally(function(){t.eventsProvider.trigger(a.a.WS_CACHE_INVALIDATED,{},t.getId())})):Promise.reject(null)},e.prototype.invalidateWsCacheForKey=function(t){return this.db?t?(this.logger.debug("Invalidate cache for key: "+t),this.db.updateRecords(e.WS_CACHE_TABLE,{expirationTime:0},{key:t})):Promise.resolve():Promise.reject(null)},e.prototype.invalidateMultipleWsCacheForKey=function(e){var t=this;if(!this.db)return Promise.reject(null);if(!e||!e.length)return Promise.resolve();var n=[];return this.logger.debug("Invalidating multiple cache keys"),e.forEach(function(e){n.push(t.invalidateWsCacheForKey(e))}),Promise.all(n)},e.prototype.invalidateWsCacheForKeyStartingWith=function(t){if(!this.db)return Promise.reject(null);if(!t)return Promise.resolve();this.logger.debug("Invalidate cache for key starting with: "+t);return this.db.execute("UPDATE "+e.WS_CACHE_TABLE+" SET expirationTime=0 WHERE key LIKE ?",[t+"%"])},e.prototype.checkAndFixPluginfileURL=function(e){var t=this;return this.checkTokenPluginFile(e).then(function(){return t.fixPluginfileURL(e)})},e.prototype.fixPluginfileURL=function(e){return this.urlUtils.fixPluginfileURL(e,this.token,this.siteUrl,this.tokenPluginFileWorks||void 0===this.tokenPluginFileWorks?this.infos&&this.infos.userprivateaccesskey:void 0)},e.prototype.deleteDB=function(){return this.dbProvider.deleteDB("Site-"+this.id)},e.prototype.deleteFolder=function(){if(this.fileProvider.isAvailable()){var e=this.fileProvider.getSiteFolder(this.id);return this.fileProvider.removeDir(e).catch(function(){})}return Promise.resolve()},e.prototype.getSpaceUsage=function(){if(this.fileProvider.isAvailable()){var e=this.fileProvider.getSiteFolder(this.id);return this.fileProvider.getDirectorySize(e).catch(function(){return 0})}return Promise.resolve(0)},e.prototype.getDocsUrl=function(e){return this.urlUtils.getDocsUrl(this.infos.release?this.infos.release:void 0,e)},e.prototype.createSiteUrl=function(e,t,n){return this.urlUtils.addParamsToUrl(this.siteUrl+e,t,n)},e.prototype.checkLocalMobilePlugin=function(e){var t=this,n=this.siteUrl+"/local/mobile/check.php",o=g.a.wsextservice;if(!o)return Promise.resolve({code:0});return this.http.post(n,{service:o}).timeout(this.wsProvider.getRequestTimeout()).toPromise().then(function(n){if(void 0!==n&&"requirecorrectaccess"===n.errorcode)return e?Promise.reject(n.error):(t.siteUrl=t.urlUtils.addOrRemoveWWW(t.siteUrl),t.checkLocalMobilePlugin(!0));if(void 0===n||void 0===n.code)return{code:0,warning:"core.login.localmobileunexpectedresponse"};var r=parseInt(n.code,10);if(!n.error)return{code:r,service:o,coreSupported:!!n.coresupported};switch(r){case 1:return Promise.reject(t.translate.instant("core.login.siteinmaintenance"));case 2:return Promise.reject(t.translate.instant("core.login.webservicesnotenabled"));case 3:return{code:0};case 4:return Promise.reject(t.translate.instant("core.login.mobileservicesnotenabled"));default:return Promise.reject(t.translate.instant("core.unexpectederror"))}},function(){return{code:0}})},e.prototype.checkIfAppUsesLocalMobile=function(){var e=!1;return this.infos&&this.infos.functions?(this.infos.functions.forEach(function(t){-1!=t.name.indexOf(_.a.WS_PREFIX)&&(e=!0)}),e):e},e.prototype.checkIfLocalMobileInstalledAndNotUsed=function(){return this.checkIfAppUsesLocalMobile()?Promise.reject(null):this.checkLocalMobilePlugin().then(function(e){return void 0===e.service?Promise.reject(null):e})},e.prototype.containsUrl=function(e){if(!e)return!1;var t=this.textUtils.addEndingSlash(this.urlUtils.removeProtocolAndWWW(this.siteUrl));return 0==(e=this.textUtils.addEndingSlash(this.urlUtils.removeProtocolAndWWW(e))).indexOf(t)},e.prototype.getPublicConfig=function(){var e=this,t={siteUrl:this.siteUrl};return this.wsProvider.callAjax("tool_mobile_get_public_config",{},t).catch(function(n){return e.getInfo()&&!e.isVersionGreaterEqualThan("3.8")||!n||"codingerror"!=n.errorcode?Promise.reject(n):(t.noLogin=!0,t.useGet=!0,e.wsProvider.callAjax("tool_mobile_get_public_config",{},t).catch(function(t){return e.getInfo()&&e.isVersionGreaterEqualThan("3.8")?Promise.reject(t):Promise.reject(n)}))}).then(function(t){return t.httpswwwroot&&(e.siteUrl=t.httpswwwroot),t})},e.prototype.openInBrowserWithAutoLogin=function(e,t){return this.openWithAutoLogin(!1,e,void 0,t)},e.prototype.openInBrowserWithAutoLoginIfSameSite=function(e,t){return this.openWithAutoLoginIfSameSite(!1,e,void 0,t)},e.prototype.openInAppWithAutoLogin=function(e,t,n){return this.openWithAutoLogin(!0,e,t,n)},e.prototype.openInAppWithAutoLoginIfSameSite=function(e,t,n){return this.openWithAutoLoginIfSameSite(!0,e,t,n)},e.prototype.openWithAutoLogin=function(e,t,n,o){var r=this;return this.getAutoLoginUrl(t).then(function(t){return o?r.domUtils.showAlert(r.translate.instant("core.notice"),o,void 0,3e3).then(function(o){return new Promise(function(i,l){var a=o.didDismiss.subscribe(function(){a&&a.unsubscribe(),i(e?r.utils.openInApp(t,n):r.utils.openInBrowser(t))})})}):e?r.utils.openInApp(t,n):r.utils.openInBrowser(t)})},e.prototype.openWithAutoLoginIfSameSite=function(e,t,n,o){return this.containsUrl(t)?this.openWithAutoLogin(e,t,n,o):(e?this.utils.openInApp(t,n):this.utils.openInBrowser(t),Promise.resolve(null))},e.prototype.getConfig=function(e,t){var n={cacheKey:this.getConfigCacheKey()};return t&&(n.getFromCache=!1,n.emergencyCache=!1),this.read("tool_mobile_get_config",{},n).then(function(t){if(e){for(var n in t.settings)if(t.settings[n].name==e)return t.settings[n].value;return Promise.reject(null)}var o={};return t.settings.forEach(function(e){o[e.name]=e.value}),o})},e.prototype.invalidateConfig=function(){return this.invalidateWsCacheForKey(this.getConfigCacheKey())},e.prototype.getConfigCacheKey=function(){return"tool_mobile_get_config"},e.prototype.getStoredConfig=function(e){if(this.config)return e?this.config[e]:this.config},e.prototype.isFeatureDisabled=function(e){var t=this.getStoredConfig("tool_mobile_disabledfeatures");if(!t)return!1;var n=new RegExp("(,|^)"+this.textUtils.escapeForRegex(e)+"(,|$)","g");return!!t.match(n)},e.prototype.calculateOfflineDisabled=function(){this.offlineDisabled=this.isFeatureDisabled("NoDelegate_CoreOffline")},e.prototype.isOfflineDisabled=function(){return this.offlineDisabled},e.prototype.isVersionGreaterEqualThan=function(e){var t=parseInt(this.getInfo().version,10);if(Array.isArray(e)){if(!e.length)return!1;for(var n=0;n<e.length;n++){var o=this.getVersionNumber(e[n]);if(n==e.length-1)return t>=o;if(t>=o&&t<this.getNextMajorVersionNumber(e[n]))return!0}}else if("string"==typeof e)return t>=this.getVersionNumber(e);return!1},e.prototype.getAutoLoginUrl=function(e,t){var n=this;if(void 0===t&&(t=!0),!this.privateToken||!this.wsAvailable("tool_mobile_get_autologin_key")||this.lastAutoLogin&&this.timeUtils.timestamp()-this.lastAutoLogin<6*_.a.SECONDS_MINUTE)return Promise.resolve(e);var o,r=this.getUserId(),i={privatetoken:this.privateToken};return t&&(o=this.domUtils.showModalLoading()),this.write("tool_mobile_get_autologin_key",i).then(function(t){return t.autologinurl&&t.key?(n.lastAutoLogin=n.timeUtils.timestamp(),t.autologinurl+"?userid="+r+"&key="+t.key+"&urltogo="+e):e}).catch(function(){return e}).finally(function(){o&&o.dismiss()})},e.prototype.getVersionNumber=function(e){var t=this.getMajorAndMinor(e);return t?(void 0===this.MOODLE_RELEASES[t.major]&&(t.major=Object.keys(this.MOODLE_RELEASES).slice(-1)),this.MOODLE_RELEASES[t.major]+t.minor):0},e.prototype.getMajorAndMinor=function(e){var t=e.match(/(\d)+(?:\.(\d)+)?(?:\.(\d)+)?/);return!(!t||!t[1])&&{major:t[1]+"."+(t[2]||"0"),minor:parseInt(t[3],10)||0}},e.prototype.getNextMajorVersionNumber=function(e){var t,n=this.getMajorAndMinor(e),o=Object.keys(this.MOODLE_RELEASES);return n?-1==(t=o.indexOf(n.major))||t==o.length-1?this.MOODLE_RELEASES[o[t]]:this.MOODLE_RELEASES[o[t+1]]:0},e.prototype.deleteSiteConfig=function(t){return this.db.deleteRecords(e.CONFIG_TABLE,{name:t})},e.prototype.getLocalSiteConfig=function(t,n){return this.db.getRecord(e.CONFIG_TABLE,{name:t}).then(function(e){return e.value}).catch(function(e){return void 0!==n?n:Promise.reject(e)})},e.prototype.setLocalSiteConfig=function(t,n){return this.db.insertRecord(e.CONFIG_TABLE,{name:t,value:n})},e.prototype.getExpirationDelay=function(t){var n=this.UPDATE_FREQUENCIES[t]||this.UPDATE_FREQUENCIES[e.FREQUENCY_USUALLY];return this.appProvider.isNetworkAccessLimited()&&(n*=1.5),n},e.prototype.checkTokenPluginFile=function(e){var t=this;return this.urlUtils.canUseTokenPluginFile(e,this.siteUrl,this.infos&&this.infos.userprivateaccesskey)?void 0!==this.tokenPluginFileWorks?Promise.resolve(this.tokenPluginFileWorks):this.tokenPluginFileWorksPromise?this.tokenPluginFileWorksPromise:this.appProvider.isOnline()?(e=this.fixPluginfileURL(e),this.tokenPluginFileWorksPromise=this.wsProvider.performHead(e).then(function(e){return e.ok}).catch(function(e){return!1}).then(function(e){return t.tokenPluginFileWorks=e,e}),this.tokenPluginFileWorksPromise):Promise.resolve(!0):Promise.resolve(!1)},e.REQUEST_QUEUE_DELAY=50,e.REQUEST_QUEUE_LIMIT=10,e.REQUEST_QUEUE_FORCE_WS=!1,e.FREQUENCY_USUALLY=0,e.FREQUENCY_OFTEN=1,e.FREQUENCY_SOMETIMES=2,e.FREQUENCY_RARELY=3,e.WS_CACHE_TABLE="wscache",e.CONFIG_TABLE="core_site_config",e.MINIMUM_MOODLE_VERSION="3.1",e}()},function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"p",[["class","core-loading-message"],["role","status"]],null,null,null,null,null)),(e()(),a._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.message)})}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,10,"div",[["class","core-loading-container"],["role","status"]],[[24,"@coreShowHideAnimation",0]],null,null,null,null)),(e()(),a._55(-1,null,["\n    "])),(e()(),a._31(2,0,null,null,7,"span",[["class","core-loading-spinner"]],null,null,null,null,null)),(e()(),a._55(-1,null,["\n        "])),(e()(),a._31(4,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,s.b,s.a)),a._30(5,114688,null,0,u.a,[c.a,a.t,a.V],null,null),(e()(),a._55(-1,null,["\n        "])),(e()(),a._26(16777216,null,null,1,null,o)),a._30(8,16384,null,0,d.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n    "])),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0);e(t,8,0,n.message)},function(e,t){e(t,0,0,void 0);e(t,4,0,a._44(t,5)._paused)})}function i(e){return a._57(0,[a._43(null,0),(e()(),a._26(0,null,null,0))],null,null)}function l(e){return a._57(0,[a._52(402653184,1,{content:0}),(e()(),a._26(16777216,null,null,1,null,r)),a._30(2,16384,null,0,d.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n"])),(e()(),a._31(4,0,[[1,0],["content",1]],null,4,"div",[["class","core-loading-content"]],[[8,"id",0],[1,"aria-busy",0]],null,null,null,null)),(e()(),a._55(-1,null,["\n    "])),(e()(),a._26(16777216,null,null,1,null,i)),a._30(7,16384,null,0,d.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,!n.hideUntil);e(t,7,0,n.hideUntil)},function(e,t){var n=t.component;e(t,4,0,n.uniqueId,n.hideUntil)})}n.d(t,"a",function(){return _}),t.b=l;var a=n(0),s=n(121),u=n(101),c=n(8),d=n(7),f=n(51),p=n(17),h=n(9),m=n(2),_=a._29({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreShowHideAnimation",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"500ms ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"500ms ease-in-out"}],options:null}],options:{}}]}});a._27("core-loading",f.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-loading",[],null,null,null,l,_)),a._30(1,638976,null,0,f.a,[p.a,a.t,h.a,m.a],null,null)],function(e,t){e(t,1,0)},null)},{hideUntil:"hideUntil",message:"message"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){this.name="CoreContentLinksHandlerBase",this.priority=0,this.checkAllUsers=!1,this.featureName=""}return e.prototype.getActions=function(e,t,n,o){return[]},e.prototype.handles=function(e){return this.pattern&&e.search(this.pattern)>=0},e.prototype.getSiteUrl=function(e){if(this.pattern){var t=e.search(this.pattern);if(t>-1)return e.substr(0,t)}},e.prototype.isEnabled=function(e,t,n,o){return!0},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(98),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},p=function(e){function t(t,n,o){var r=e.call(this,"CorePluginFileDelegate",t,n,o)||this;return r.handlerNameProperty="component",r}return s(t,e),t.prototype.fileDeleted=function(e,t,n){var o=this.getHandlerForFile({fileurl:e});return o&&o.fileDeleted?o.fileDeleted(e,t,n):Promise.resolve()},t.prototype.getDownloadableFile=function(e,t){var n=this.getHandlerForFile(e);return this.getHandlerDownloadableFile(e,n,t)},t.prototype.getHandlerDownloadableFile=function(e,t,n){return d(this,void 0,void 0,function(){var o,r;return f(this,function(i){switch(i.label){case 0:return[4,this.isFileDownloadable(e,n)];case 1:if(!(o=i.sent()).downloadable)throw o.reason;return t&&t.getDownloadableFile?[4,t.getDownloadableFile(e,n)]:[3,3];case 2:return r=i.sent(),[2,r||e];case 3:return[2,e]}})})},t.prototype.getComponentRevisionRegExp=function(e){var t=this.getHandler(e[1],!0);if(t&&t.getComponentRevisionRegExp)return t.getComponentRevisionRegExp(e)},t.prototype.getDownloadableFilesFromHTML=function(e){var t=[];for(var n in this.enabledHandlers){var o=this.enabledHandlers[n];o&&o.getDownloadableFilesFromHTML&&(t=t.concat(o.getDownloadableFilesFromHTML(e)))}return t},t.prototype.getFilesSize=function(e,t){var n=this,o=[],r={size:0,total:!0};return e.forEach(function(e){o.push(n.getFileSize(e,t).then(function(e){void 0===e?r.total=!1:r.size+=e}))}),Promise.all(o).then(function(){return r})},t.prototype.getFileSize=function(e,t){return d(this,void 0,void 0,function(){var n,o,r;return f(this,function(i){switch(i.label){case 0:return[4,this.isFileDownloadable(e,t)];case 1:return i.sent().downloadable?(n=this.getHandlerForFile(e),[4,this.getHandlerDownloadableFile(e,n,t)]):[2,0];case 2:if(!(o=i.sent()))return[2,0];if(n&&n.getFileSize)try{return r=n.getFileSize(o,t),[2,r]}catch(e){}return[2,o.filesize]}})})},t.prototype.getHandlerForFile=function(e){for(var t in this.enabledHandlers){var n=this.enabledHandlers[t];if(n&&n.shouldHandleFile&&n.shouldHandleFile(e))return n}},t.prototype.isFileDownloadable=function(e,t){var n=this.getHandlerForFile(e);return n&&n.isFileDownloadable?n.isFileDownloadable(e,t):Promise.resolve({downloadable:!0})},t.prototype.removeRevisionFromUrl=function(e,t){var n=this.getHandler(t[1],!0);if(n&&n.getComponentRevisionRegExp&&n.getComponentRevisionReplace){var o=n.getComponentRevisionRegExp(t);if(o)return e.replace(o,n.getComponentRevisionReplace(t))}return e},t.prototype.treatDownloadedFile=function(e,t,n){var o=this.getHandlerForFile({fileurl:e});return o&&o.treatDownloadedFile?o.treatDownloadedFile(e,t,n):Promise.resolve()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,r.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(309),l=n(10),a=n(6),s=n(66),u=n(11),c=n(435),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i,l){this.platform=t,this.file=n,this.appProvider=o,this.textUtils=r,this.zip=i,this.mimeUtils=l,this.initialized=!1,this.basePath="",this.isHTMLAPI=!1,this.CHUNK_SIZE=10485760,this.logger=e.getInstance("CoreFileProvider"),t.is("android")&&!Object.getOwnPropertyDescriptor(FileReader.prototype,"onloadend")&&(this.defineGetterSetter(FileReader.prototype,"readyState",function(){return this._localURL?this._readyState:this._realReader.readyState}),this.defineGetterSetter(FileReader.prototype,"error",function(){return this._localURL?this._error:this._realReader.error}),this.defineGetterSetter(FileReader.prototype,"result",function(){return this._localURL?this._result:this._realReader.result}),this.defineEvent("onloadstart"),this.defineEvent("onprogress"),this.defineEvent("onload"),this.defineEvent("onerror"),this.defineEvent("onloadend"),this.defineEvent("onabort"))}return t=e,e.prototype.defineEvent=function(e){this.defineGetterSetter(FileReader.prototype,e,function(){return this._realReader[e]||null},function(t){this._realReader[e]=t})},e.prototype.defineGetterSetter=function(e,t,n,o){if(Object.defineProperty){var r={get:n,configurable:!0};o&&(r.set=o),Object.defineProperty(e,t,r)}else e.__defineGetter__(t,n),o&&e.__defineSetter__(t,o)},e.prototype.setHTMLBasePath=function(e){this.isHTMLAPI=!0,this.basePath=e},e.prototype.usesHTMLAPI=function(){return this.isHTMLAPI},e.prototype.init=function(){var e=this;return this.initialized?Promise.resolve():this.platform.ready().then(function(){if(e.platform.is("android"))e.basePath=e.file.externalApplicationStorageDirectory||e.basePath;else if(e.platform.is("ios"))e.basePath=e.file.documentsDirectory||e.basePath;else if(!e.isAvailable()||""===e.basePath)return e.logger.error("Error getting device OS."),Promise.reject(null);e.initialized=!0,e.logger.debug("FS initialized: "+e.basePath)})},e.prototype.isAvailable=function(){return void 0!==window.resolveLocalFileSystemURL},e.prototype.getFile=function(e){var t=this;return this.init().then(function(){return t.logger.debug("Get file: "+e),t.file.resolveLocalFilesystemUrl(t.addBasePathIfNeeded(e))}).then(function(e){return e})},e.prototype.getDir=function(e){var t=this;return this.init().then(function(){return t.logger.debug("Get directory: "+e),t.file.resolveDirectoryUrl(t.addBasePathIfNeeded(e))})},e.prototype.getSiteFolder=function(e){return t.SITESFOLDER+"/"+e},e.prototype.create=function(e,t,n,o){var r=this;return this.init().then(function(){if(t=r.removeStartingSlash(t.replace(r.basePath,"")),o=o||r.basePath,-1==t.indexOf("/"))return e?(r.logger.debug("Create dir "+t+" in "+o),r.file.createDir(o,t,!n)):(r.logger.debug("Create file "+t+" in "+o),r.file.createFile(o,t,!n));var i=t.substr(0,t.indexOf("/")),l=t.substr(t.indexOf("/")+1);return r.logger.debug("Create dir "+i+" in "+o),r.file.createDir(o,i,!0).then(function(t){return r.create(e,l,n,t.toURL())}).catch(function(e){return r.logger.error("Error creating directory "+i+" in "+o),Promise.reject(e)})})},e.prototype.createDir=function(e,t){return this.create(!0,e,t)},e.prototype.createFile=function(e,t){return this.create(!1,e,t)},e.prototype.removeDir=function(e){var t=this;return this.init().then(function(){return e=t.removeStartingSlash(e.replace(t.basePath,"")),t.logger.debug("Remove directory: "+e),t.file.removeRecursively(t.basePath,e)})},e.prototype.removeFile=function(e){var t=this;return this.init().then(function(){return e=t.removeStartingSlash(e.replace(t.basePath,"")),t.logger.debug("Remove file: "+e),t.file.removeFile(t.basePath,e).catch(function(n){var o=decodeURI(e);return o!=e?t.file.removeFile(t.basePath,o):Promise.reject(n)})})},e.prototype.removeFileByFileEntry=function(e){return new Promise(function(t,n){e.remove(t,n)})},e.prototype.getDirectoryContents=function(e){var t=this;return this.init().then(function(){return e=t.removeStartingSlash(e.replace(t.basePath,"")),t.logger.debug("Get contents of dir: "+e),t.file.listDir(t.basePath,e)})},e.prototype.getSize=function(e){var t=this;return new Promise(function(n,o){if(e.isDirectory){e.createReader().readEntries(function(e){for(var r=[],i=0;i<e.length;i++)r.push(t.getSize(e[i]));Promise.all(r).then(function(e){for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r]);if(isNaN(i))return void o();t+=i}n(t)},o)},o)}else e.isFile&&e.file(function(e){n(e.size)},o)})},e.prototype.getDirectorySize=function(e){var t=this;return e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Get size of dir: "+e),this.getDir(e).then(function(e){return t.getSize(e)})},e.prototype.getFileSize=function(e){var t=this;return e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Get size of file: "+e),this.getFile(e).then(function(e){return t.getSize(e)})},e.prototype.getFileObjectFromFileEntry=function(e){var t=this;return new Promise(function(n,o){t.logger.debug("Get file object of: "+e.fullPath),e.file(n,o)})},e.prototype.calculateFreeSpace=function(){var e=this;return this.file.getFreeDiskSpace().then(function(t){return e.platform.is("ios")?Number(t):1024*Number(t)})},e.prototype.normalizeFileName=function(e){return e=this.textUtils.decodeURIComponent(e)},e.prototype.readFile=function(e,n){var o=this;switch(void 0===n&&(n=t.FORMATTEXT),e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Read file "+e+" with format "+n),n){case t.FORMATDATAURL:return this.file.readAsDataURL(this.basePath,e);case t.FORMATBINARYSTRING:return this.file.readAsBinaryString(this.basePath,e);case t.FORMATARRAYBUFFER:return this.file.readAsArrayBuffer(this.basePath,e);case t.FORMATJSON:return this.file.readAsText(this.basePath,e).then(function(t){var n=o.textUtils.parseJSON(t,null);return null==n&&null!=t?Promise.reject("Error parsing JSON file: "+e):n});default:return this.file.readAsText(this.basePath,e)}},e.prototype.readFileData=function(e,n){var o=this;return void 0===n&&(n=t.FORMATTEXT),n=n||t.FORMATTEXT,this.logger.debug("Read file from file data with format "+n),new Promise(function(r,i){var l=new FileReader;l.onloadend=function(e){var l=e.target;if(void 0!==l.result||null!==l.result)if(n==t.FORMATJSON){var a=o.textUtils.parseJSON(l.result,null);null==a&&i("Error parsing JSON file."),r(a)}else r(l.result);else i(void 0!==l.error||null!==l.error?l.error:{code:null,message:"READER_ONLOADEND_ERR"})};var a=!1;switch(l.onloadstart=function(e){a=!0},setTimeout(function(){a||i("Upload cannot start.")},3e3),n){case t.FORMATDATAURL:l.readAsDataURL(e);break;case t.FORMATBINARYSTRING:l.readAsBinaryString(e);break;case t.FORMATARRAYBUFFER:l.readAsArrayBuffer(e);break;default:l.readAsText(e)}})},e.prototype.writeFile=function(e,t,n){var o=this;return this.init().then(function(){return e=o.removeStartingSlash(e.replace(o.basePath,"")),o.logger.debug("Write file: "+e),o.createFile(e).then(function(r){if(o.isHTMLAPI&&!o.appProvider.isDesktop()&&("string"==typeof t||"[object ArrayBuffer]"==t.toString())){var i=o.mimeUtils.getMimeType(o.mimeUtils.getFileExtension(e));t=new Blob([t],{type:i||"text/plain"})}return o.file.writeFile(o.basePath,e,t,{replace:!n,append:!!n}).then(function(){return r})})})},e.prototype.writeFileDataInFile=function(e,t,n,o,r){var i=this;void 0===o&&(o=0);var l=e.slice(o=o||0,Math.min(o+this.CHUNK_SIZE,e.size));return this.writeFileDataInFileChunk(l,t,r).then(function(r){return o+=i.CHUNK_SIZE,n&&n({lengthComputable:!0,loaded:o,total:e.size}),o>=e.size?r:i.writeFileDataInFile(e,t,n,o,!0)})},e.prototype.writeFileDataInFileChunk=function(e,n,o){var r=this;return this.readFileData(e,t.FORMATARRAYBUFFER).then(function(e){return r.writeFile(n,e,o)})},e.prototype.getExternalFile=function(e){return this.file.resolveLocalFilesystemUrl(e).then(function(e){return e})},e.prototype.removeExternalFile=function(e){var t=e.substring(0,e.lastIndexOf("/")),n=e.substr(e.lastIndexOf("/")+1);return this.file.removeFile(t,n)},e.prototype.getBasePath=function(){var e=this;return this.init().then(function(){return"/"==e.basePath.slice(-1)?e.basePath:e.basePath+"/"})},e.prototype.getBasePathToDownload=function(){var e=this;return this.init().then(function(){return e.platform.is("ios")?e.file.resolveDirectoryUrl(e.basePath).then(function(e){return e.toInternalURL()}):e.basePath})},e.prototype.getBasePathInstant=function(){return this.basePath?"/"==this.basePath.slice(-1)?this.basePath:this.basePath+"/":this.basePath},e.prototype.moveDir=function(e,t,n){return this.moveFileOrDir(e,t,!0,n)},e.prototype.moveFile=function(e,t,n){return this.moveFileOrDir(e,t,!1,n)},e.prototype.moveFileOrDir=function(e,t,n,o){var r=this,i=n?this.file.moveDir.bind(this.file):this.file.moveFile.bind(this.file);return this.init().then(function(){e=r.removeStartingSlash(e.replace(r.basePath,"")),t=r.removeStartingSlash(t.replace(r.basePath,""));var n=r.getFileAndDirectoryFromPath(t);if(n.directory&&!o)return r.createDir(n.directory)}).then(function(){if(r.isHTMLAPI){for(var n=e.split("/"),o=t.split("/"),l=r.basePath,a=0;a<n.length;a++){var s=n[a];if(o[a]!==s)break;l=r.textUtils.concatenatePaths(l,s+="/"),e=e.replace(s,""),t=t.replace(s,"")}return i(l,e,l,t)}return i(r.basePath,e,r.basePath,t).catch(function(n){var o=decodeURI(e),l=decodeURI(t);return o!=e||l!=t?i(r.basePath,o,r.basePath,l):Promise.reject(n)})})},e.prototype.copyDir=function(e,t,n){return this.copyFileOrDir(e,t,!0,n)},e.prototype.copyFile=function(e,t,n){return this.copyFileOrDir(e,t,!1,n)},e.prototype.copyFileOrDir=function(e,t,n,o){var r,i,l=this,a=n?this.file.copyDir.bind(this.file):this.file.copyFile.bind(this.file);return this.init().then(function(){if(e=l.removeStartingSlash(e.replace(l.basePath,"")),t=l.removeStartingSlash(t.replace(l.basePath,"")),r=l.getFileAndDirectoryFromPath(e),(i=l.getFileAndDirectoryFromPath(t)).directory&&!o)return l.createDir(i.directory)}).then(function(){if(l.isHTMLAPI){var n=l.textUtils.concatenatePaths(l.basePath,r.directory),o=l.textUtils.concatenatePaths(l.basePath,i.directory);return a(n,r.name,o,i.name)}return a(l.basePath,e,l.basePath,t).catch(function(n){var o=decodeURI(e),r=decodeURI(t);return e!=o||t!=r?a(l.basePath,o,l.basePath,r):Promise.reject(n)})})},e.prototype.getFileAndDirectoryFromPath=function(e){var t={directory:"",name:""};return t.directory=e.substring(0,e.lastIndexOf("/")),t.name=e.substr(e.lastIndexOf("/")+1),t},e.prototype.getInternalURL=function(e){return e.toInternalURL?e.toInternalURL():e.toURL()},e.prototype.addBasePathIfNeeded=function(e){return e.indexOf(this.basePath)>-1?e:this.textUtils.concatenatePaths(this.basePath,e)},e.prototype.removeBasePath=function(e){if(e.indexOf(this.basePath)>-1)return e.replace(this.basePath,"")},e.prototype.unzipFile=function(e,t,n,o){var r=this;void 0===o&&(o=!0);var i;return this.getFile(e).then(function(e){if(i=e,t&&o)return r.removeDir(t).catch(function(){}).then(function(){return r.createDir(t)})}).then(function(){return t=r.addBasePathIfNeeded(t||r.mimeUtils.removeExtension(e)),r.zip.unzip(i.toURL(),t,n)}).then(function(e){if(-1==e)return Promise.reject("Unzip failed.")})},e.prototype.replaceInFile=function(e,t,n){var o=this;return this.readFile(e).then(function(r){return void 0!==r&&null!==r&&r.replace?r.match(t)?(r=r.replace(t,n),o.writeFile(e,r)):void 0:Promise.reject(null)})},e.prototype.getMetadata=function(e){return e&&e.getMetadata?new Promise(function(t,n){e.getMetadata(t,n)}):Promise.reject(null)},e.prototype.getMetadataFromPath=function(e,t){var n=this;return(t?this.getDir(e):this.getFile(e)).then(function(e){return n.getMetadata(e)})},e.prototype.removeStartingSlash=function(e){return"/"==e[0]?e.substr(1):e},e.prototype.copyOrMoveExternalFile=function(e,t,n){var o=this;return this.getExternalFile(e).then(function(e){var r=o.getFileAndDirectoryFromPath(t);return o.createDir(r.directory).then(function(t){return new Promise(function(o,i){n?e.copyTo(t,r.name,o,i):e.moveTo(t,r.name,o,i)})})})},e.prototype.copyExternalFile=function(e,t){return this.copyOrMoveExternalFile(e,t,!0)},e.prototype.moveExternalFile=function(e,t){return this.copyOrMoveExternalFile(e,t,!1)},e.prototype.getUniqueNameInFolder=function(e,t,n){var o=this;return this.getDirectoryContents(e).then(function(e){var r,i={},l=1,a=o.mimeUtils.removeExtension(t),s=o.mimeUtils.getFileExtension(t)||n;if(a=o.textUtils.removeSpecialCharactersForFiles(o.textUtils.decodeURIComponent(a)),e.forEach(function(e){i[e.name.toLowerCase()]=e}),s=s?"."+s:"",r=a+s,void 0===i[r.toLowerCase()])return r;do{r=a+"("+l+")"+s,l++}while(void 0!==i[r]);return r}).catch(function(){return o.textUtils.removeSpecialCharactersForFiles(o.textUtils.decodeURIComponent(t))})},e.prototype.clearTmpFolder=function(){return this.removeDir(t.TMPFOLDER).catch(function(){})},e.prototype.removeUnusedFiles=function(e,t){var n=this;return this.getDirectoryContents(e).then(function(e){if(e.length){var o={},r=[];return t.forEach(function(e){e.fullPath&&(o[e.fullPath]=e)}),e.forEach(function(e){o[e.fullPath]||r.push(n.removeFileByFileEntry(e))}),Promise.all(r)}}).catch(function(){})},e.prototype.isFileInAppFolder=function(e){return-1!=e.indexOf(this.basePath)},e.prototype.getWWWPath=function(){var e=window.location.href.indexOf("index.html");return-1!=e?window.location.href.substr(0,e):window.location.href},e.FORMATTEXT=0,e.FORMATDATAURL=1,e.FORMATBINARYSTRING=2,e.FORMATARRAYBUFFER=3,e.FORMATJSON=4,e.SITESFOLDER="sites",e.TMPFOLDER="tmp",e=t=d([Object(o.A)(),f("design:paramtypes",[a.a,r.v,i.a,l.a,u.a,c.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(5),i=n(10),l=n(18),a=n(150),s=n(6),u=n(53),c=n(1),d=n(11),f=n(2),p=n(116),h=n(52),m=n(9),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,n,o,r,i,l,a,s,u){var c=this;this.sitesProvider=t,this.utils=n,this.langProvider=o,this.appProvider=r,this.platform=i,this.filepoolProvider=l,this.coursesProvider=a,this.textUtils=s,this.eventsProvider=u,this.ROOT_CACHE_KEY="CoreSitePlugins:",this.sitePlugins={},this.sitePluginPromises={},this.hasSitePluginsLoaded=!1,this.sitePluginsFinishedLoading=!1,this.logger=e.getInstance("CoreUserProvider");var d=this.eventsProvider.on(m.a.SITE_PLUGINS_LOADED,function(){c.sitePluginsFinishedLoading=!0,d&&d.off()});this.fetchPluginsDeferred=this.utils.promiseDefer(),u.on(m.a.LOGOUT,function(){c.fetchPluginsDeferred=c.utils.promiseDefer()})}return e.prototype.addDefaultArgs=function(e,t){var n=this;return e=e||{},t=t||this.sitesProvider.getCurrentSite(),this.langProvider.getCurrentLanguage().then(function(o){var r=n.utils.clone(e);return r.userid=e.userid||t.getUserId(),r.appid=p.a.app_id,r.appversioncode=p.a.versioncode,r.appversionname=p.a.versionname,r.applang=o,r.appcustomurlscheme=p.a.customurlscheme,r.appisdesktop=n.appProvider.isDesktop(),r.appismobile=n.appProvider.isMobile(),r.appiswide=n.appProvider.isWide(),r.appplatform=r.appisdevice?n.platform.is("ios")?"ios":"android":r.appisdesktop?n.appProvider.isMac()?"mac":n.appProvider.isLinux()?"linux":"windows":"browser",r})},e.prototype.callWS=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return n=n||{},n.cacheKey=n.cacheKey||r.getCallWSCacheKey(e,t),o.read(e,t,n)})},e.prototype.createDataForJS=function(e,t){var n;return e&&("boolean"==typeof(n=Object.assign({},e.jsResult||{}))&&(n={}),n.INIT_TEMPLATES=this.utils.objectToKeyValueMap(e.templates,"id","html"),n.INIT_OTHERDATA=e.otherdata),t&&(n.CONTENT_TEMPLATES=this.utils.objectToKeyValueMap(t.templates,"id","html"),n.CONTENT_OTHERDATA=t.otherdata),n},e.prototype.getCallWSCacheKey=function(e,t){return this.getCallWSCommonCacheKey(e)+":"+this.utils.sortAndStringify(t)},e.prototype.getCallWSCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"ws:"+e},e.prototype.getContent=function(e,t,n,o,r){var i=this;return this.logger.debug("Get content for component '"+e+"' and method '"+t+"'"),this.sitesProvider.getSite(r).then(function(r){return i.addDefaultArgs(n,r).then(function(r){var l={component:e,method:t,args:i.utils.objectToArrayOfObjects(r,"name","value",!0)};return o=o||{},o.cacheKey=i.getContentCacheKey(e,t,n),o.updateFrequency=void 0!==o.updateFrequency?o.updateFrequency:u.a.FREQUENCY_OFTEN,i.sitesProvider.getCurrentSite().read("tool_mobile_get_content",l,o)}).then(function(e){if(e.otherdata){e.otherdata=i.utils.objectToKeyValueMap(e.otherdata,"name","value");for(var t in e.otherdata){var n=e.otherdata[t];"string"!=typeof n||"{"!=n[0]&&"["!=n[0]||(e.otherdata[t]=i.textUtils.parseJSON(n))}}else e.otherdata={};return e})})},e.prototype.getContentCacheKey=function(e,t,n){return this.ROOT_CACHE_KEY+"content:"+e+":"+t+":"+this.utils.sortAndStringify(n)},e.prototype.getDownloadParam=function(e,t,n,o){switch(t){case"courseids":return[n];case e+"id":return o&&o.instance}},e.prototype.getHandlerUniqueName=function(e,t){return e.addon+"_"+t},e.prototype.getSitePluginHandler=function(e){return this.sitePlugins[e]},e.prototype.invalidateAllCallWSForMethod=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getCallWSCommonCacheKey(e))})},e.prototype.invalidateCallWS=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return n=n||{},o.invalidateWsCacheForKey(n.cacheKey||r.getCallWSCacheKey(e,t))})},e.prototype.invalidateContent=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getContentCacheKey(e,t,n))})},e.prototype.isGetContentAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("tool_mobile_get_content")},e.prototype.isHandlerEnabledForCourse=function(e,t,n){return(!n||!n.courses||-1!=n.courses.indexOf(e))&&(!t&&void 0!==t||this.coursesProvider.getUserCourse(e,!0).then(function(){return!0}).catch(function(){return!1}))},e.prototype.isHandlerEnabledForUser=function(e,t,n){return(!t||e==this.sitesProvider.getCurrentSite().getUserId())&&(!n||!n.users||-1!=n.users.indexOf(e))},e.prototype.loadOtherDataInArgs=function(e,t,n){if(e=e?this.utils.clone(e):{},t=t||{},void 0===n)return e;if(Array.isArray(n))for(var o in n){var r=n[o];e[r]="object"==typeof t[r]&&null!==t[r]?JSON.stringify(t[r]):t[r]}else for(var i in t)e[i]="object"==typeof t[i]&&null!==t[i]?JSON.stringify(t[i]):t[i];return e},e.prototype.prefetchFunctions=function(e,t,n,o,r,i,l,a){var s=this;a=a||this.sitesProvider.getCurrentSite();var u=[];for(var c in n.offlinefunctions)if(a.wsAvailable(c)){var d=n.offlinefunctions[c],f=this.getCallWSCacheKey(c,t),p={};if(d.length)for(var h in d){var m=d[h];if(void 0!==t[m])p[m]=t[m];else{var _=this.getDownloadParam(e,m,o,r);void 0!==_&&(p[m]=_)}}else p=t;u.push(this.callWS(c,p,{cacheKey:f}))}else u.push(this.getContent(e,c,t).then(function(t){var n=[];return t.files&&t.files.length&&n.push(s.filepoolProvider.downloadOrPrefetchFiles(a.id,t.files,i,!1,e,r.id,l)),Promise.all(n)}));return Promise.all(u)},e.prototype.setSitePluginHandler=function(e,t){this.sitePlugins[e]=t},e.prototype.registerSitePluginPromise=function(e,t){this.sitePluginPromises[e]=t},e.prototype.setPluginsFetched=function(){this.fetchPluginsDeferred.resolve()},e.prototype.sitePluginPromiseExists=function(e){return this.sitePluginPromises.hasOwnProperty(e)},e.prototype.sitePluginLoaded=function(e){return this.sitePluginPromises[e]},e.prototype.waitFetchPlugins=function(){return this.fetchPluginsDeferred.promise},e.COMPONENT="CoreSitePlugins",e=_([Object(o.A)(),g("design:paramtypes",[s.a,c.a,f.a,a.a,i.a,r.v,l.a,h.a,d.a,m.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(98),s=n(586),u=n(58),c=n(146),d=(n.n(c),this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i){var l=e.call(this,"CoreBlockDelegate",t,n,o)||this;return l.defaultHandler=r,l.sitePluginsProvider=i,l.handlerNameProperty="blockName",l.featurePrefix="CoreBlockDelegate_",l.blocksUpdateObservable=new c.Subject,l}return d(t,e),t.prototype.areBlocksDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_SiteBlocks")},t.prototype.areBlocksDisabledInCourses=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CourseBlocks")},t.prototype.areBlocksDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.areBlocksDisabledInSite(e)})},t.prototype.getBlockDisplayData=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(t.name,"getDisplayData",[e,t,n,o]))},t.prototype.hasSupportedBlock=function(e){var t=this;return!!(e=e||[]).find(function(e){return t.isBlockSupported(e.name)})},t.prototype.isBlockSupported=function(e){return this.hasHandler(e,!0)},t.prototype.isFeatureDisabled=function(t,n){return this.areBlocksDisabledInSite(n)||e.prototype.isFeatureDisabled.call(this,t,n)},t.prototype.updateData=function(){this.blocksUpdateObservable.next()},t=f([Object(o.A)(),p("design:paramtypes",[r.a,l.a,i.a,s.a,u.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(13),s=n(587),u=n(98),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this,"CoreCourseModuleDelegate",t,n,o)||this;return l.sitesProvider=n,l.courseProvider=r,l.defaultHandler=i,l.featurePrefix="CoreCourseModuleDelegate_",l.handlerNameProperty="modName",l}return c(t,e),t.prototype.getMainComponent=function(e,t,n){var o=this;return Promise.resolve(this.executeFunctionOnEnabled(n.modname,"getMainComponent",[e,t,n])).catch(function(e){o.logger.error("Error getting main component",e)})},t.prototype.getModuleDataFor=function(e,t,n,o,r){return this.executeFunctionOnEnabled(e,"getData",[t,n,o,r])},t.prototype.isModuleDisabled=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return n.isModuleDisabledInSite(e,t)})},t.prototype.isModuleDisabledInSite=function(e,t){var n=this.getHandler(e,!1);return!!n&&(t=t||this.sitesProvider.getCurrentSite(),this.isFeatureDisabled(n,t))},t.prototype.displayRefresherInSingleActivity=function(e){return this.executeFunctionOnEnabled(e,"displayRefresherInSingleActivity")},t.prototype.getModuleIconSrc=function(e,t){return this.executeFunctionOnEnabled(e,"getIconSrc")||this.courseProvider.getModuleIconSrc(e,t)},t.prototype.supportsFeature=function(e,t,n){var o,r=this.enabledHandlers[e];return r&&(r.supportsFeature?o=r.supportsFeature.apply(r,[t]):r.supportedFeatures&&(o=r.supportedFeatures[t])),null===o||void 0===o?n:o},t=d([Object(o.A)(),f("design:paramtypes",[i.a,l.a,r.a,a.a,s.a])],t)}(u.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(22),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.sitesProvider=t,this.urlUtils=n,this.utils=o,this.handlers={},this.logger=e.getInstance("CoreContentLinksDelegate")}return e.prototype.getActionsFor=function(e,t,n,o){var r=this;return e?this.sitesProvider.getSiteIdsFromUrl(e,!0,n).then(function(n){var i=[],l=[],a=r.urlUtils.extractUrlParams(e),s=function(s){var u=r.handlers[s],c=u.checkAllUsers,d=r.isHandlerEnabled.bind(r,u,e,a,t);if(!u.handles(e))return"continue";l.push(r.utils.filterEnabledSites(n,d,c).then(function(n){if(n.length)return Promise.resolve(u.getActions(n,e,a,t,o)).then(function(e){e&&e.length&&(e.forEach(function(e){e.message=e.message||"core.view",e.icon=e.icon||"eye",e.sites=e.sites||n}),i.push({priority:u.priority,actions:e}))})}))};for(var u in r.handlers)s(u);return r.utils.allPromises(l).catch(function(){}).then(function(){return r.sortActionsByPriority(i)})}):Promise.resolve([])},e.prototype.getSiteUrl=function(e){if(e)for(var t in this.handlers){var n=this.handlers[t].getSiteUrl(e);if(n)return n}},e.prototype.isHandlerEnabled=function(e,t,n,o,r){return(e.featureName?this.sitesProvider.isFeatureDisabled(e.featureName,r):Promise.resolve(!1)).then(function(i){return!i&&(!e.isEnabled||e.isEnabled(r,t,n,o))})},e.prototype.registerHandler=function(e){return void 0!==this.handlers[e.name]?(this.logger.log("Addon '"+e.name+"' already registered"),!1):(this.logger.log("Registered addon '"+e.name+"'"),this.handlers[e.name]=e,!0)},e.prototype.sortActionsByPriority=function(e){var t=[];return(e=e.sort(function(e,t){return e.priority<=t.priority?1:-1})).forEach(function(e){t=t.concat(e.actions)}),t},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(1),i=n(11),l=n(24),a=n(2),s=n(10),u=n(136),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,n,o,r,i,l){this.sitesProvider=e,this.timeUtils=n,this.textUtils=o,this.utils=r,this.appProvider=i,this.pushNotificationsProvider=l,this.siteSchema={name:"CoreCourseLogHelperProvider",version:1,tables:[{name:t.ACTIVITY_LOG_TABLE,columns:[{name:"component",type:"TEXT"},{name:"componentid",type:"INTEGER"},{name:"ws",type:"TEXT"},{name:"data",type:"TEXT"},{name:"time",type:"INTEGER"}],primaryKeys:["component","componentid","ws","time"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteLogs=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(t.ACTIVITY_LOG_TABLE,{component:e,componentid:n})})},e.prototype.deleteWSLogsByComponent=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(t.ACTIVITY_LOG_TABLE,{component:e,componentid:n,ws:o})})},e.prototype.deleteWSLogs=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(t.ACTIVITY_LOG_TABLE,{ws:e,data:r.utils.sortAndStringify(n)})})},e.prototype.getAllLogs=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(t.ACTIVITY_LOG_TABLE)})},e.prototype.getLogs=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(t.ACTIVITY_LOG_TABLE,{component:e,componentid:n})})},e.prototype.log=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return i.appProvider.isOnline()?i.logOnline(e,t,r.getId()).catch(function(l){return i.utils.isWebServiceError(l)?Promise.reject(l):i.storeOffline(e,t,n,o,r.getId())}):i.storeOffline(e,t,n,o,r.getId())})},e.prototype.logOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){var i=Object.assign({},t);return r.write(e,i).then(function(r){return r.status?o.deleteWSLogs(e,t,n):Promise.reject(o.utils.createFakeWSError(""))})})},e.prototype.logSingle=function(e,t,n,o,r,i,l,a){return this.pushNotificationsProvider.logViewEvent(o,r,i,e,l,a),this.log(e,t,n,o,a)},e.prototype.logList=function(e,t,n,o,r,i,l){return this.pushNotificationsProvider.logViewListEvent(r,e,i,l),this.log(e,t,n,o,l)},e.prototype.storeOffline=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={ws:e,data:l.utils.sortAndStringify(n),component:o,componentid:r,time:l.timeUtils.timestamp()};return i.getDb().insertRecord(t.ACTIVITY_LOG_TABLE,a)})},e.prototype.syncSite=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n=e.getId();return t.getAllLogs(n).then(function(e){var o=[];return e.forEach(function(e){o.find(function(t){return e.component==t.component&&e.componentid==t.componentid&&e.ws==t.ws&&e.data==t.data})||o.push(e)}),t.syncLogs(o,n)})})},e.prototype.syncIfNeeded=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=n.getId();return o.getLogs(e,t,r).then(function(e){var t=[];return e.forEach(function(e){t.find(function(t){return e.ws==t.ws&&e.data==t.data})||t.push(e)}),o.syncLogs(t,r)})})},e.prototype.syncLogs=function(e,t){var n=this;return Promise.all(e.map(function(e){var o=n.textUtils.parseJSON(e.data);return n.logOnline(e.ws,o,t).catch(function(r){return(n.utils.isWebServiceError(r)?n.deleteWSLogs(e.ws,o,t):Promise.resolve()).catch(function(){}).then(function(){return Promise.reject(r)})}).then(function(){return n.deleteWSLogsByComponent(e.component,e.componentid,e.ws,t)})}))},e.ACTIVITY_LOG_TABLE="course_activity_log",e=t=c([Object(o.A)(),d("design:paramtypes",[r.a,l.a,i.a,a.a,s.a,u.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(262),i=n(6),l=n(3),a=n(11),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){var r=this;this.translate=n,this.textUtils=o,this.extToMime={},this.mimeToExt={},this.groupsMimeInfo={},this.extensionRegex=/^[a-z0-9]+$/,this.logger=t.getInstance("CoreMimetypeUtilsProvider"),e.get("assets/exttomime.json").subscribe(function(e){r.extToMime=e},function(e){}),e.get("assets/mimetoext.json").subscribe(function(e){r.mimeToExt=e},function(e){})}return e.prototype.canBeEmbedded=function(e){return this.isExtensionInGroup(e,["web_image","web_video","web_audio"])},e.prototype.cleanExtension=function(e){if(!e)return e;var t=e.indexOf("?");return t>-1&&(e=e.substr(0,t)),(t=e.indexOf("#"))>-1&&(e=e.substr(0,t)),(e=e.replace(/_.{32}$/,""))&&"."==e[0]&&(e=e.substr(1)),e},e.prototype.fillGroupMimeInfo=function(e){var t={},n=[];for(var o in this.extToMime){var r=this.extToMime[o];r.type&&r.groups&&-1!=r.groups.indexOf(e)&&(t[r.type]=!0,n.push(o))}this.groupsMimeInfo[e]={mimetypes:Object.keys(t),extensions:n}},e.prototype.getExtension=function(e,t){if(e=e||"","application/x-forcedownload"==(e=e.split(";")[0])||"application/forcedownload"==e)return this.guessExtensionFromUrl(t);var n=this.mimeToExt[e];if(n&&n.length){if(n.length>1&&t){var o=this.guessExtensionFromUrl(t);if(-1!=n.indexOf(o))return o}return n[0]}},e.prototype.getEmbeddedHtml=function(e,t){var n,o=e.filename||e.name;if(e.mimetype?n=this.getExtension(e.mimetype):(n=this.getFileExtension(o),e.mimetype=this.getMimeType(n)),this.canBeEmbedded(n)){if(e.embedType=this.getExtensionType(n),t=t||e.fileurl||e.toURL&&e.toURL(),"image"==e.embedType)return'<img src="'+t+'">';if("audio"==e.embedType||"video"==e.embedType)return"<"+e.embedType+' controls title="'+o+'" src="'+t+'"><source src="'+t+'" type="'+e.mimetype+'"></'+e.embedType+">"}return""},e.prototype.getExtensionIcon=function(e){var t=this.getExtensionIconName(e)||"unknown";return this.getFileIconForType(t)},e.prototype.getExtensionIconName=function(e){if(this.extToMime[e]){if(this.extToMime[e].icon)return this.extToMime[e].icon;var t=this.extToMime[e].type.split("/")[0];if("video"==t||"text"==t||"image"==t||"document"==t||"audio"==t)return t}},e.prototype.getExtensionType=function(e){if(e=this.cleanExtension(e),this.extToMime[e]&&this.extToMime[e].string)return this.extToMime[e].string},e.prototype.getExtensions=function(e){return e=e||"",e=e.split(";")[0],this.mimeToExt[e]||[]},e.prototype.getFileIcon=function(e){var t=this.getFileExtension(e),n=this.getExtensionIconName(t)||"unknown";return this.getFileIconForType(n)},e.prototype.getFolderIcon=function(){return"assets/img/files/folder-64.png"},e.prototype.getFileIconForType=function(e){return"assets/img/files/"+e+"-64.png"},e.prototype.guessExtensionFromUrl=function(e){var t,n,o,r=e.split(".");if(r.length>1&&((o=(t=r.pop().toLowerCase()).indexOf("?"))>-1&&(t=t.substr(0,o)),this.extensionRegex.test(t)&&(n=t)),!n||void 0!==this.getMimeType(n))return n;this.logger.warn("Guess file extension: Not valid extension "+n)},e.prototype.getFileExtension=function(e){var t,n=e.lastIndexOf(".");if(!(n>-1&&(t=e.substr(n+1).toLowerCase(),t=this.cleanExtension(t),void 0===this.getMimeType(t))))return t;this.logger.warn("Get file extension: Not valid extension "+t)},e.prototype.getGroupMimeInfo=function(e,t){return void 0===this.groupsMimeInfo[e]&&this.fillGroupMimeInfo(e),t?this.groupsMimeInfo[e][t]:this.groupsMimeInfo[e]},e.prototype.getMimeType=function(e){if(e=this.cleanExtension(e),this.extToMime[e]&&this.extToMime[e].type)return this.extToMime[e].type},e.prototype.getMimetypeDescription=function(e,t){var n="assets.mimetypes.",o="",r="",i="";if("object"==typeof e&&"function"==typeof e.file?o=e.name:"object"==typeof e?(o=e.filename||"",r=e.mimetype||""):r=e,o&&(i=this.getFileExtension(o),r||(r=this.getMimeType(i))),!r)return"";i||(i=this.getExtension(r));var l=this.getMimetypeType(r)||"",a=r.split("/"),s={mimetype:r,ext:i||"",mimetype1:a[0],mimetype2:a[1]||""},u={};for(var c in s){var d=s[c];u[c]=d,u[c.toUpperCase()]=d.toUpperCase(),u[this.textUtils.ucFirst(c)]=this.textUtils.ucFirst(d)}var f=r.replace(/\+/g,"_"),p=l.replace(/\+/g,"_"),h=this.translate.instant(n+f,{$a:u}),m=this.translate.instant(n+p,{$a:u}),_=this.translate.instant(n+"default",{$a:u}),g=r;return h!=n+f?g=h:m!=n+p?g=m:_!=n+"default"&&(g=_),t&&(g=this.textUtils.ucFirst(g)),g},e.prototype.getMimetypeType=function(e){e=e.split(";")[0];var t=this.mimeToExt[e];if(t)for(var n=0;n<t.length;n++){var o=t[n];if(this.extToMime[o]&&this.extToMime[o].string)return this.extToMime[o].string}},e.prototype.getMimetypeIcon=function(e){e=e.split(";")[0];for(var t=this.mimeToExt[e]||[],n="unknown",o=0;o<t.length;o++){var r=this.getExtensionIconName(t[o]);if(r){n=r;break}}return this.getFileIconForType(n)},e.prototype.getTranslatedGroupName=function(e){var t="assets.mimetypes.group:"+e,n=this.translate.instant(t);return n!=t?n:e},e.prototype.isExtensionInGroup=function(e,t){if(e=this.cleanExtension(e),t&&t.length&&this.extToMime[e]&&this.extToMime[e].groups)for(var n=0;n<this.extToMime[e].groups.length;n++){if(-1!=t.indexOf(this.extToMime[e].groups[n]))return!0}return!1},e.prototype.removeExtension=function(e){var t,n=e.lastIndexOf(".");return n>-1&&(t=e.substr(n+1).toLowerCase(),void 0!==this.getMimeType(t))?e.substr(0,n):e},e=s([Object(o.A)(),u("design:paramtypes",[r.c,i.a,l.c,a.a])],e)}()},,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(3),i=n(1),l=n(52),a=n(53),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.sitesProvider=e,this.translate=t,this.coursesProvider=n,this.ROOT_CACHE_KEY="mmGroups:"}return t=e,e.prototype.activityHasGroups=function(e,n,o){return this.getActivityGroupMode(e,n,o).then(function(e){return e===t.SEPARATEGROUPS||e===t.VISIBLEGROUPS}).catch(function(){return!1})},e.prototype.getActivityAllowedGroups=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();var i={cmid:e,userid:t},l={cacheKey:r.getActivityAllowedGroupsCacheKey(e,t),updateFrequency:a.a.FREQUENCY_RARELY};return o&&(l.getFromCache=!1,l.emergencyCache=!1),n.read("core_group_get_activity_allowed_groups",i,l).then(function(e){return e&&e.groups?e:Promise.reject(null)})})},e.prototype.getActivityAllowedGroupsCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"allowedgroups:"+e+":"+t},e.prototype.getActivityAllowedGroupsIfEnabled=function(e,t,n,o){var r=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.activityHasGroups(e,n,o).then(function(i){return i?r.getActivityAllowedGroups(e,t,n,o):{groups:[]}})},e.prototype.getActivityGroupInfo=function(e,n,o,r,i){var l=this,a={groups:[]};return this.getActivityGroupMode(e,r,i).then(function(n){return a.separateGroups=n===t.SEPARATEGROUPS,a.visibleGroups=n===t.VISIBLEGROUPS,a.separateGroups||a.visibleGroups?l.getActivityAllowedGroups(e,o,r,i):{groups:[],canaccessallgroups:!1}}).then(function(e){return e.groups.length<=0?(a.separateGroups=!1,a.visibleGroups=!1,a.defaultGroupId=0):(e.canaccessallgroups||void 0===e.canaccessallgroups&&a.visibleGroups?(a.groups.push({id:0,name:l.translate.instant("core.allparticipants")}),a.defaultGroupId=0):a.defaultGroupId=e.groups[0].id,a.groups=a.groups.concat(e.groups)),a})},e.prototype.getActivityGroupMode=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={cmid:e},i={cacheKey:o.getActivityGroupModeCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return n&&(i.getFromCache=!1,i.emergencyCache=!1),t.read("core_group_get_activity_groupmode",r,i).then(function(e){return e&&void 0!==e.groupmode?e.groupmode:Promise.reject(null)})})},e.prototype.getActivityGroupModeCacheKey=function(e){return this.ROOT_CACHE_KEY+"groupmode:"+e},e.prototype.getAllUserGroups=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(n){return e=e||n.getId(),n.isVersionGreaterEqualThan("3.6")?t.getUserGroupsInCourse(0,e):t.coursesProvider.getUserCourses(!1,e).then(function(o){return o.push({id:n.getSiteHomeId()}),t.getUserGroups(o,e)})})},e.prototype.getUserGroups=function(e,t,n){var o=this,r=e.map(function(e){return o.getUserGroupsInCourse("object"==typeof e?e.id:e,t,n)});return Promise.all(r).then(function(e){return[].concat.apply([],e)})},e.prototype.getUserGroupsInCourse=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={userid:n=n||t.getUserId(),courseid:e},i={cacheKey:o.getUserGroupsInCourseCacheKey(e,n),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("core_group_get_course_user_groups",r,i).then(function(e){return e&&e.groups?e.groups:Promise.reject(null)})})},e.prototype.getUserGroupsInCoursePrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"courseGroups:"},e.prototype.getUserGroupsInCourseCacheKey=function(e,t){return this.getUserGroupsInCoursePrefixCacheKey()+e+":"+t},e.prototype.invalidateActivityAllowedGroups=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getActivityAllowedGroupsCacheKey(e,t))})},e.prototype.invalidateActivityGroupMode=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getActivityGroupModeCacheKey(e))})},e.prototype.invalidateActivityGroupInfo=function(e,t,n){var o=[];return o.push(this.invalidateActivityAllowedGroups(e,t,n)),o.push(this.invalidateActivityGroupMode(e,n)),Promise.all(o)},e.prototype.invalidateAllUserGroups=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(n){return n.isVersionGreaterEqualThan("3.6")?t.invalidateUserGroupsInCourse(0,e):n.invalidateWsCacheForKeyStartingWith(t.getUserGroupsInCoursePrefixCacheKey())})},e.prototype.invalidateUserGroups=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();var r=e.map(function(e){return o.invalidateUserGroupsInCourse("object"==typeof e?e.id:e,t.id,n)});return Promise.all(r)})},e.prototype.invalidateUserGroupsInCourse=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getUserGroupsInCourseCacheKey(e,n))})},e.prototype.validateGroupId=function(e,t){return e>0&&t&&t.groups&&t.groups.length>0&&t.groups.some(function(t){return e==t.id})?e:t.defaultGroupId},e.NOGROUPS=0,e.SEPARATEGROUPS=1,e.VISIBLEGROUPS=2,e=t=s([Object(o.A)(),u("design:paramtypes",[i.a,r.c,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(5),i=n(355),l=n(442),a=n(3),s=n(57),u=n(18),c=n(6),d=n(1),f=n(66),p=n(11),h=n(24),m=n(2),_=n(146),g=(n.n(_),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d){this.fileProvider=t,this.textUtils=n,this.utils=o,this.sitesProvider=r,this.timeUtils=i,this.mimeUtils=l,this.filepoolProvider=a,this.platform=s,this.translate=u,this.mediaCapture=c,this.camera=d,this.onGetPicture=new _.Subject,this.onAudioCapture=new _.Subject,this.onVideoCapture=new _.Subject,this.logger=e.getInstance("CoreFileUploaderProvider")}return e.prototype.addDot=function(e){return"."+e},e.prototype.areFileListDifferent=function(e,t){if(e=e||[],t=t||[],e.length!=t.length)return!0;for(var n=0;n<e.length;n++)if((e[n].name||e[n].filename)!=(t[n].name||t[n].filename))return!0;return!1},e.prototype.captureAudio=function(e){var t=this;return this.onAudioCapture.next(!0),this.mediaCapture.captureAudio(e).finally(function(){t.onAudioCapture.next(!1)})},e.prototype.captureVideo=function(e){var t=this;return this.onVideoCapture.next(!0),this.mediaCapture.captureVideo(e).finally(function(){t.onVideoCapture.next(!1)})},e.prototype.clearTmpFiles=function(e){e.forEach(function(e){!e.offline&&e.remove&&e.remove(function(){})})},e.prototype.getCameraUploadOptions=function(e,t){var n=this.mimeUtils.guessExtensionFromUrl(e),o=this.mimeUtils.getMimeType(n),r=this.platform.is("ios"),i={deleteAfterUpload:!t,mimeType:o},l=this.fileProvider.getFileAndDirectoryFromPath(e).name;if(!r||"image/jpeg"!=o&&"image/png"!=o)i.fileName=l;else{var a=l.split(".");a[0]+="_"+this.timeUtils.readableTimestamp(),i.fileName=a.join(".")}return t&&(i.deleteAfterUpload=this.fileProvider.isFileInAppFolder(e),this.platform.is("android")&&(i.fileName=i.fileName.replace(/(\.[^\.]*)\?[^\.]*$/,"$1"))),i},e.prototype.getFileUploadOptions=function(e,t,n,o,r,i){var l={};return l.fileName=t,l.mimeType=n||this.mimeUtils.getMimeType(this.mimeUtils.getFileExtension(l.fileName)),l.deleteAfterUpload=!!o,l.itemId=i||0,l.fileArea=r,l},e.prototype.getMediaUploadOptions=function(e){var t,n={},o=e.name;return t=o.split("."),t[0]+="_"+this.timeUtils.readableTimestamp(),o=t.join("."),n.fileName=o,n.deleteAfterUpload=!0,n.mimeType=e.type?e.type:this.mimeUtils.getMimeType(this.mimeUtils.getFileExtension(n.fileName)),n},e.prototype.getPicture=function(e){var t=this;return this.onGetPicture.next(!0),this.camera.getPicture(e).finally(function(){t.onGetPicture.next(!1)})},e.prototype.getStoredFiles=function(e){var t=this;return this.fileProvider.getDirectoryContents(e).then(function(e){return t.markOfflineFiles(e)})},e.prototype.getStoredFilesFromOfflineFilesObject=function(e,t){var n=[];return e&&(e.online&&e.online.length>0&&(n=this.utils.clone(e.online)),e.offline>0)?this.getStoredFiles(t).then(function(e){return n.concat(e)}).catch(function(){return n}):Promise.resolve(n)},e.prototype.isInvalidMimetype=function(e,t,n){var o;if(e&&(n?o=this.mimeUtils.getExtension(n):(o=this.mimeUtils.getFileExtension(t),n=this.mimeUtils.getMimeType(o)),n&&-1==e.indexOf(n)))return o=o||this.translate.instant("core.unknown"),this.translate.instant("core.fileuploader.invalidfiletype",{$a:o})},e.prototype.markOfflineFiles=function(e){return e.forEach(function(e){e.offline=!0,e.filename=e.name}),e},e.prototype.prepareFiletypeList=function(e){var t=this;if((e=e&&e.trim())&&"*"!=e){var n={},o=[];return e.split(/[;, ]+/g).forEach(function(e){if(e=e.trim())if(-1!=e.indexOf("/"))o.push({name:t.mimeUtils.getMimetypeDescription(e),extlist:t.mimeUtils.getExtensions(e).map(t.addDot).join(" ")}),n[e]=!0;else if(0===e.indexOf(".")){var r=t.mimeUtils.getMimeType(e);o.push({name:!!r&&t.mimeUtils.getMimetypeDescription(r),extlist:e}),r&&(n[r]=!0)}else{var i=t.mimeUtils.getGroupMimeInfo(e,"extensions"),l=t.mimeUtils.getGroupMimeInfo(e,"mimetypes");if(i.length>0)o.push({name:t.mimeUtils.getTranslatedGroupName(e),extlist:i?i.map(t.addDot).join(" "):""}),l.forEach(function(e){e&&(n[e]=!0)});else{e=t.addDot(e);r=t.mimeUtils.getMimeType(e);o.push({name:!!r&&t.mimeUtils.getMimetypeDescription(r),extlist:e}),r&&(n[r]=!0)}}}),{info:o,mimetypes:Object.keys(n)}}},e.prototype.storeFilesToUpload=function(e,t){var n=this,o={online:[],offline:0};return t&&t.length?this.fileProvider.removeUnusedFiles(e,t).then(function(){var r=[];return t.forEach(function(t){if(t.filename&&!t.name)o.online.push({filename:t.filename,fileurl:t.fileurl});else if(t.name)if(t.fullPath&&-1!=t.fullPath.indexOf(e))o.offline++;else{var i=n.textUtils.concatenatePaths(e,t.name);r.push(n.fileProvider.copyFile(t.toURL(),i)),o.offline++}else r.push(Promise.reject(null))}),Promise.all(r).then(function(){return o})}):Promise.resolve(o)},e.prototype.uploadFile=function(e,t,n,o){var r=this,i=(t=t||{}).deleteAfterUpload,l=this.utils.clone(t);return delete l.deleteAfterUpload,this.sitesProvider.getSite(o).then(function(t){return t.uploadFile(e,l,n)}).then(function(t){return i&&setTimeout(function(){r.fileProvider.removeExternalFile(e)},500),t})},e.prototype.uploadOrReuploadFile=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l,a,s=e.filename&&!e.name;return s?(a=e.filename,l=this.filepoolProvider.downloadUrl(r,e.url||e.fileurl,!1,n,o,e.timemodified,void 0,void 0,e).then(function(e){return i.fileProvider.getExternalFile(e)})):(a=e.name,l=Promise.resolve(e)),l.then(function(e){var n=i.getFileUploadOptions(e.toURL(),a,e.type,s,"draft",t);return i.uploadFile(e.toURL(),n,void 0,r).then(function(e){return e.itemid})})},e.prototype.uploadOrReuploadFiles=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),e&&e.length?this.uploadOrReuploadFile(e[0],0,t,n,o).then(function(i){for(var l=[],a=1;a<e.length;a++){l.push(r.uploadOrReuploadFile(e[a],i,t,n,o))}return Promise.all(l).then(function(){return i})}):Promise.resolve(1)},e.LIMITED_SIZE_WARNING=1048576,e.WIFI_SIZE_WARNING=10485760,e=g([Object(o.A)(),v("design:paramtypes",[c.a,s.a,p.a,m.a,d.a,h.a,f.a,u.a,r.v,a.c,l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(98),s=n(609),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,"CoreQuestionDelegate",t,n,o)||this;return i.defaultHandler=r,i.handlerNameProperty="type",i}return u(t,e),t.prototype.getBehaviourForQuestion=function(e,t){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"getBehaviour",[e,t])||t},t.prototype.getComponentForQuestion=function(e,t){var n=this.getTypeName(t);return Promise.resolve(this.executeFunctionOnEnabled(n,"getComponent",[e,t]))},t.prototype.getPreventSubmitMessage=function(e){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"getPreventSubmitMessage",[e])},t.prototype.getFullTypeName=function(e){return"qtype_"+e},t.prototype.getTypeName=function(e){return this.getFullTypeName(e.type)},t.prototype.isCompleteResponse=function(e,t){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"isCompleteResponse",[e,t])},t.prototype.isGradableResponse=function(e,t){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"isGradableResponse",[e,t])},t.prototype.isSameResponse=function(e,t,n){var o=this.getTypeName(e);return this.executeFunctionOnEnabled(o,"isSameResponse",[e,t,n])},t.prototype.isQuestionSupported=function(e){return this.hasHandler(this.getFullTypeName(e),!0)},t.prototype.prepareAnswersForQuestion=function(e,t,n,o){var r=this.getTypeName(e);return Promise.resolve(this.executeFunctionOnEnabled(r,"prepareAnswers",[e,t,n,o]))},t.prototype.validateSequenceCheck=function(e,t){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"validateSequenceCheck",[e,t])},t.prototype.getAdditionalDownloadableFiles=function(e,t){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"getAdditionalDownloadableFiles",[e,t])||[]},t=c([Object(o.A)(),d("design:paramtypes",[r.a,l.a,i.a,s.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(271),c=n(496),d=n(482),f=n(588),p=n(112),h=n(589),m=n(396),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=function(){function e(){}return e=_([Object(o.I)({declarations:[c.a,d.a,f.a,p.a,h.a,m.a],imports:[u.a,r.b,i.k,l.b.forChild(),a.a,s.a],providers:[],exports:[c.a,d.a,f.a,p.a,h.a,m.a],entryComponents:[m.a,h.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.config=t,this.element=e.nativeElement}return e.prototype.ngOnChanges=function(e){if(e.name&&this.name){var t=this.newElement?this.newElement:this.element;if(this.newElement=document.createElement("ion-icon"),this.name.startsWith("fa-"))this.newElement.classList.add("icon"),this.newElement.classList.add("fa"),this.newElement.classList.add(this.name),this.isTrueProperty(this.fixedWidth)&&this.newElement.classList.add("fa-fw"),this.color&&this.newElement.classList.add("fa-"+this.color);else{var n=this.config.get("iconMode");this.newElement.classList.add("icon"),this.newElement.classList.add("icon-"+n),this.newElement.classList.add("ion-"+n+"-"+this.name)}!this.ariaLabel&&this.newElement.setAttribute("aria-hidden","true"),!this.ariaLabel&&this.newElement.setAttribute("role","presentation"),this.ariaLabel&&this.newElement.setAttribute("aria-label",this.ariaLabel),this.ariaLabel&&this.newElement.setAttribute("title",this.ariaLabel);for(var o=this.element.attributes,r=o.length-1;r>=0;r--)if("class"==o[r].name){if(o[r].value)for(var i=o[r].value.split(" "),l=0;l<i.length;l++)i[l]&&this.newElement.classList.add(i[l])}else this.newElement.setAttribute(o[r].name,o[r].value);this.slash&&this.newElement.classList.add("icon-slash"),t.parentElement.replaceChild(this.newElement,t)}},e.prototype.isTrueProperty=function(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:!!e},e.prototype.ngOnDestroy=function(){this.newElement&&this.newElement.remove()},i([Object(o.D)(),l("design:type",String)],e.prototype,"name",void 0),i([Object(o.D)("color"),l("design:type",String)],e.prototype,"color",void 0),i([Object(o.D)("slash"),l("design:type",Boolean)],e.prototype,"slash",void 0),i([Object(o.D)("isActive"),l("design:type",Boolean)],e.prototype,"isActive",void 0),i([Object(o.D)("md"),l("design:type",String)],e.prototype,"md",void 0),i([Object(o.D)("ios"),l("design:type",String)],e.prototype,"ios",void 0),i([Object(o.D)("fixed-width"),l("design:type",String)],e.prototype,"fixedWidth",void 0),i([Object(o.D)("label"),l("design:type",String)],e.prototype,"ariaLabel",void 0),e=i([Object(o.m)({selector:"core-icon",templateUrl:"core-icon.html"}),l("design:paramtypes",[o.t,r.e])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(200),i=n(5),l=n(4),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,r){this.tabs=e,this.domUtils=n,this.enabled=!0,this.ionSelect=new o.v,this.loaded=!1,this.initialized=!1,this._show=!0,this.element=t.nativeElement,this.element.setAttribute("role","tabpanel"),this.element.setAttribute("tabindex","0"),this.id=this.id||"core-tab-"+r.getUniqueId("CoreTabComponent")}return Object.defineProperty(e.prototype,"show",{get:function(){return this._show},set:function(e){if(void 0!==e){var t=this._show!=e;this._show=e,this.initialized&&t&&(this.tabs.tabVisibilityChanged(),this.updateAriaHidden())}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.element.setAttribute("aria-labelledby",this.id+"-tab"),this.element.setAttribute("id",this.id),this.tabs.addTab(this),this.initialized=!0,setTimeout(function(){e.updateAriaHidden()},1e3)},e.prototype.ngOnDestroy=function(){this.tabs.removeTab(this)},e.prototype.selectTab=function(){var e=this;this.element.classList.add("selected"),this.tabElement=this.tabElement||document.getElementById(this.id+"-tab"),this.updateAriaHidden(),this.tabElement&&this.tabElement.setAttribute("aria-selected",!0),this.loaded=!0,this.ionSelect.emit(this),this.showHideNavBarButtons(!0),this.domUtils.waitElementToExist(function(){return e.content?e.content.getScrollElement():e.element.querySelector("ion-content > .scroll-content")}).then(function(t){t.addEventListener("scroll",function(t){e.tabs.showHideTabs(t.target)}),e.tabs.showHideTabs(t)}).catch(function(){})},e.prototype.unselectTab=function(){this.updateAriaHidden(),this.tabElement&&this.tabElement.setAttribute("aria-selected",!1),this.element.classList.remove("selected"),this.showHideNavBarButtons(!1)},e.prototype.getChildrenNavBarButtons=function(){for(var e=this.element.querySelectorAll("core-navbar-buttons"),t=[],n=0;n<e.length;n++){var o=this.domUtils.getInstanceByElement(e[n]);o&&t.push(o)}return t},e.prototype.showHideNavBarButtons=function(e){var t=this.getChildrenNavBarButtons();for(var n in t)t[n].forceHide(!e)},e.prototype.updateAriaHidden=function(){this.tabElement||(this.tabElement=document.getElementById(this.id+"-tab")),this.tabElement&&this.tabElement&&this.tabElement.setAttribute("aria-hidden",!this._show)},s([Object(o.D)(),u("design:type",String)],e.prototype,"title",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"icon",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"badge",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"badgeStyle",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"enabled",void 0),s([Object(o.D)(),u("design:type",Boolean),u("design:paramtypes",[Boolean])],e.prototype,"show",null),s([Object(o.D)(),u("design:type",String)],e.prototype,"id",void 0),s([Object(o.O)(),u("design:type",o.v)],e.prototype,"ionSelect",void 0),s([Object(o.q)(o._6),u("design:type",o._6)],e.prototype,"template",void 0),s([Object(o.q)(i.f),u("design:type",i.f)],e.prototype,"content",void 0),e=s([Object(o.m)({selector:"core-tab",template:'<ng-container *ngIf="loaded" [ngTemplateOutlet]="template"></ng-container>'}),u("design:paramtypes",[r.a,o.t,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(10),i=n(18),l=n(6),a=n(1),s=n(11),u=n(24),c=n(2),d=n(153),f=n(168),p=n(65),h=n(166),m=n(133),_=n(53),g=n(440),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d){this.sitesProvider=t,this.textUtils=n,this.timeUtils=o,this.appProvider=r,this.utils=i,this.submissionDelegate=l,this.gradesProvider=a,this.filepoolProvider=s,this.assignOffline=u,this.commentsProvider=c,this.logHelper=d,this.ROOT_CACHE_KEY="mmaModAssign:",this.gradingOfflineEnabled={},this.logger=e.getInstance("AddonModAssignProvider")}return t=e,e.prototype.canSubmitOffline=function(e,n){if(!this.isSubmissionOpen(e,n))return!1;var o=n.lastattempt.submission,r=n.lastattempt.teamsubmission;if(r){if(r.status===t.SUBMISSION_STATUS_SUBMITTED)return!1;if(o&&o.status===t.SUBMISSION_STATUS_SUBMITTED)return!1;if(e.preventsubmissionnotingroup&&!n.lastattempt.submissiongroup)return!1}else{if(!o)return!1;if(o.status===t.SUBMISSION_STATUS_SUBMITTED)return!1}return e.submissiondrafts},e.prototype.fixSubmissionStatusParams=function(e,t,n,o){return{isBlind:!!t&&!!o,groupId:e.isVersionGreaterEqualThan("3.5")?n||0:0,userId:t||e.getUserId()}},e.prototype.getAssignment=function(e,t,n,o){return this.getAssignmentByField(e,"cmid",t,n,o)},e.prototype.getAssignmentByField=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e],includenotenrolledcourses:1},a={cacheKey:i.getAssignmentCacheKey(e),updateFrequency:_.a.FREQUENCY_RARELY};return o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_assign_get_assignments",l,a).catch(function(){return delete l.includenotenrolledcourses,r.read("mod_assign_get_assignments",l,a)}).then(function(e){if(e.courses&&e.courses.length)for(var o=e.courses[0].assignments,r=0;r<o.length;r++)if(o[r][t]==n)return o[r];return Promise.reject(null)})})},e.prototype.getAssignmentById=function(e,t,n,o){return this.getAssignmentByField(e,"id",t,n,o)},e.prototype.getAssignmentCacheKey=function(e){return this.ROOT_CACHE_KEY+"assignment:"+e},e.prototype.getAssignmentUserMappings=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={assignmentids:[e]},l={cacheKey:r.getAssignmentUserMappingsCacheKey(e),updateFrequency:_.a.FREQUENCY_OFTEN};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_assign_get_user_mappings",i,l).then(function(n){if(n.assignments&&n.assignments.length){if(!t||t<0)return-1;var o=n.assignments[0];if(o.assignmentid==e)for(var r=o.mappings,i=0;i<r.length;i++)if(r[i].userid==t)return r[i].id}else if(n.warnings&&n.warnings.length)return Promise.reject(n.warnings[0]);return Promise.reject(null)})})},e.prototype.getAssignmentUserMappingsCacheKey=function(e){return this.ROOT_CACHE_KEY+"usermappings:"+e},e.prototype.getAssignmentGrades=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={assignmentids:[e]},i={cacheKey:o.getAssignmentGradesCacheKey(e)};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_assign_get_grades",r,i).then(function(t){if(t.assignments&&t.assignments.length){var n=t.assignments[0];if(n.assignmentid==e)return n.grades}else if(t.warnings&&t.warnings.length)return"3"==t.warnings[0].warningcode?[]:Promise.reject(t.warnings[0]);return Promise.reject(null)})})},e.prototype.getAssignmentGradesCacheKey=function(e){return this.ROOT_CACHE_KEY+"assigngrades:"+e},e.prototype.getSubmissionGradingStatusColor=function(e){return e?e==t.GRADING_STATUS_GRADED||e==t.MARKING_WORKFLOW_STATE_RELEASED?"success":"danger":""},e.prototype.getSubmissionGradingStatusTranslationId=function(e){if(e)return e==t.GRADING_STATUS_GRADED||e==t.GRADING_STATUS_NOT_GRADED||e==t.GRADED_FOLLOWUP_SUBMIT?"addon.mod_assign."+e:"addon.mod_assign.markingworkflowstate"+e},e.prototype.getSubmissionObjectFromAttempt=function(e,t){return t?e.teamsubmission?t.teamsubmission:t.submission:null},e.prototype.getSubmissionPluginAttachments=function(e){var t=[];return e.fileareas&&e.fileareas.forEach(function(e){e&&e.files&&e.files.forEach(function(e){e.filename||(e.filename="/"==e.filepath[0]?e.filepath.substr(1):e.filepath),t.push(e)})}),t},e.prototype.getSubmissionPluginText=function(e,t){var n="";return e.editorfields&&(e.editorfields.forEach(function(e){n+=e.text}),!t&&e.fileareas&&e.fileareas[0]&&(n=this.textUtils.replacePluginfileUrls(n,e.fileareas[0].files))),n},e.prototype.getSubmissions=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={assignmentids:[e]},i={cacheKey:o.getSubmissionsCacheKey(e),updateFrequency:_.a.FREQUENCY_OFTEN};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_assign_get_submissions",r,i).then(function(e){return e.warnings.length>0&&"1"==e.warnings[0].warningcode?{canviewsubmissions:!1}:e.assignments&&e.assignments.length?{canviewsubmissions:!0,submissions:e.assignments[0].submissions}:Promise.reject(null)})})},e.prototype.getSubmissionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"submissions:"+e},e.prototype.getSubmissionStatus=function(e,t,n,o,r,i,l){var a=this;return void 0===r&&(r=!0),this.sitesProvider.getSite(l).then(function(l){var s=a.fixSubmissionStatusParams(l,t,n,o),u={assignid:e,userid:s.userId},c={cacheKey:a.getSubmissionStatusCacheKey(e,s.userId,s.groupId,s.isBlind),getCacheUsingCacheKey:!0,filter:r,rewriteurls:r};return s.groupId&&(u.groupid=s.groupId),i&&(c.getFromCache=!1,c.emergencyCache=!1),r||(c.saveToCache=!1),l.read("mod_assign_get_submission_status",u,c)})},e.prototype.getSubmissionStatusWithRetry=function(e,t,n,o,r,i,l){var a=this;return void 0===r&&(r=!0),this.getSubmissionStatus(e.id,t,n,o,r,i,l).then(function(i){return a.getSubmissionObjectFromAttempt(e,i.lastattempt)?i:a.getSubmissionStatus(e.id,t,n,o,r,!0,l).catch(function(){return i})})},e.prototype.getSubmissionStatusCacheKey=function(e,t,n,o){return this.getSubmissionsCacheKey(e)+":"+t+":"+(o?1:0)+":"+n},e.prototype.getSubmissionStatusColor=function(e){switch(e){case"submitted":return"success";case"draft":return"info";case"new":case"noattempt":case"noonlinesubmissions":case"nosubmission":case"gradedfollowupsubmit":return"danger";default:return"light"}},e.prototype.getUnsupportedEditPlugins=function(e){var t=this,n=[],o=[];return e.forEach(function(e){o.push(t.submissionDelegate.isPluginSupportedForEdit(e.type).then(function(t){t||n.push(e.name)}))}),Promise.all(o).then(function(){return n})},e.prototype.listParticipants=function(e,t,n,o){var r=this;return t=t||0,this.sitesProvider.getSite(o).then(function(o){if(!o.wsAvailable("mod_assign_list_participants"))return Promise.reject(null);var i={assignid:e,groupid:t,filter:""},l={cacheKey:r.listParticipantsCacheKey(e,t),updateFrequency:_.a.FREQUENCY_OFTEN};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_assign_list_participants",i,l)})},e.prototype.listParticipantsCacheKey=function(e,t){return this.listParticipantsPrefixCacheKey(e)+":"+t},e.prototype.listParticipantsPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"participants:"+e},e.prototype.invalidateAllSubmissionData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getSubmissionsCacheKey(e))})},e.prototype.invalidateAssignmentData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAssignmentCacheKey(e))})},e.prototype.invalidateAssignmentUserMappingsData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAssignmentUserMappingsCacheKey(e))})},e.prototype.invalidateAssignmentGradesData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAssignmentGradesCacheKey(e))})},e.prototype.invalidateContent=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getAssignment(t,e,!1,n).then(function(e){var r=[];return r.push(o.invalidateAllSubmissionData(e.id,n)),r.push(o.invalidateAssignmentUserMappingsData(e.id,n)),r.push(o.invalidateAssignmentGradesData(e.id,n)),r.push(o.invalidateListParticipantsData(e.id,n)),r.push(o.commentsProvider.invalidateCommentsByInstance("module",e.id,n)),r.push(o.invalidateAssignmentData(t,n)),r.push(o.gradesProvider.invalidateAllCourseGradesData(t)),Promise.all(r)})},e.prototype.invalidateFiles=function(e){return this.filepoolProvider.invalidateFilesByComponent(this.sitesProvider.getCurrentSiteId(),t.COMPONENT,e)},e.prototype.invalidateSubmissionData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getSubmissionsCacheKey(e))})},e.prototype.invalidateSubmissionStatusData=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l=i.fixSubmissionStatusParams(r,t,n,o);return r.invalidateWsCacheForKey(i.getSubmissionStatusCacheKey(e,l.userId,l.groupId,l.isBlind))})},e.prototype.invalidateListParticipantsData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.listParticipantsPrefixCacheKey(e))})},e.prototype.isGradingOfflineEnabled=function(e){var t=this;return void 0!==this.gradingOfflineEnabled[e]?Promise.resolve(this.gradingOfflineEnabled[e]):this.gradesProvider.isGradeItemsAvalaible(e).then(function(n){return t.gradingOfflineEnabled[e]=n,n})},e.prototype.isOutcomesEditEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_assign_submit_grading_form")})},e.prototype.isPluginEnabled=function(e){return!0},e.prototype.isSubmissionOpen=function(e,n){if(!e||!n)return!1;var o,r=this.timeUtils.timestamp(),i=n.lastattempt,l=this.getSubmissionObjectFromAttempt(e,i);return e.cutoffdate&&(o=e.cutoffdate),(!i||!i.locked)&&(o&&i&&i.extensionduedate&&i.extensionduedate>o&&(o=i.extensionduedate),!!(o?e.allowsubmissionsfromdate<=r&&r<=o:e.allowsubmissionsfromdate<=r)&&(!l||!e.submissiondrafts||l.status!=t.SUBMISSION_STATUS_SUBMITTED))},e.prototype.logSubmissionView=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(i){return r.logHelper.logSingle("mod_assign_view_submission_status",{assignid:e},t.COMPONENT,e,n,"assign",{},o)})},e.prototype.logGradingView=function(e,n,o){return this.logHelper.logSingle("mod_assign_view_grading_table",{assignid:e},t.COMPONENT,e,n,"assign",{},o)},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_assign_view_assign",{assignid:e},t.COMPONENT,e,n,"assign",{},o)},e.prototype.needsSubmissionToBeGraded=function(e,n){return e.gradingstatus?e.gradingstatus!=t.GRADING_STATUS_GRADED&&e.gradingstatus!=t.MARKING_WORKFLOW_STATE_RELEASED?Promise.resolve(!0):this.getSubmissionStatus(n,e.submitid,void 0,e.blindid).then(function(t){return!t.feedback||!t.feedback.gradeddate||t.feedback.gradeddate<e.timemodified}):Promise.resolve(!0)},e.prototype.saveSubmission=function(e,t,n,o,r,i,l,a){var s=this;a=a||this.sitesProvider.getCurrentSiteId();var u=function(){return s.assignOffline.saveSubmission(e,t,n,r,!i,l,a).then(function(){return!1})};return o&&!this.appProvider.isOnline()?u():this.assignOffline.deleteSubmission(e,l,a).then(function(){return s.saveSubmissionOnline(e,n,a).then(function(){return!0}).catch(function(e){return o&&e&&!s.utils.isWebServiceError(e)?u():Promise.reject(e)})})},e.prototype.saveSubmissionOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_assign_save_submission",{assignmentid:e,plugindata:t}).then(function(e){if(e&&e.length)return Promise.reject(e[0])})})},e.prototype.submitForGrading=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var a=function(){return l.assignOffline.markSubmitted(e,t,!0,n,o,void 0,i).then(function(){return!1})};return r||!this.appProvider.isOnline()?a():this.assignOffline.deleteSubmission(e,void 0,i).then(function(){return l.submitForGradingOnline(e,n,i).then(function(){return!0}).catch(function(e){return e&&!l.utils.isWebServiceError(e)?a():Promise.reject(e)})})},e.prototype.submitForGradingOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_assign_submit_for_grading",{assignmentid:e,acceptsubmissionstatement:t?1:0}).then(function(e){if(e&&e.length)return Promise.reject(e[0])})})},e.prototype.submitGradingForm=function(e,t,n,o,r,i,l,a,s,u,c){var d=this;c=c||this.sitesProvider.getCurrentSiteId();var f=function(){return d.assignOffline.submitGradingForm(e,t,n,o,r,i,l,a,s,u,c).then(function(){return!1})};return this.isGradingOfflineEnabled(c).then(function(n){return n?d.appProvider.isOnline()?d.assignOffline.deleteSubmissionGrade(e,t,c).then(function(){return d.submitGradingFormOnline(e,t,o,r,i,l,a,s,u,c).then(function(){return!0}).catch(function(e){return e&&!d.utils.isWebServiceError(e)?f():Promise.reject(e)})}):f():d.submitGradingFormOnline(e,t,o,r,i,l,a,s,u,c).then(function(){return!0})})},e.prototype.submitGradingFormOnline=function(e,t,n,o,r,i,l,a,s,u){return this.sitesProvider.getSite(u).then(function(u){if(t=t||u.getUserId(),u.wsAvailable("mod_assign_submit_grading_form")){var c={grade:n,attemptnumber:o,addattempt:r?1:0,workflowstate:i,applytoall:l?1:0};for(var d in a)c["outcome_"+d+"["+t+"]"]=a[d];for(var d in s)c[d]=s[d];var f=g.a.serialize(c,!0),p={assignmentid:e,userid:t,jsonformdata:JSON.stringify(f)};return u.write("mod_assign_submit_grading_form",p).then(function(e){if(e&&e.length)return Promise.reject(e[0])})}return u.write("mod_assign_save_grade",p={assignmentid:e,userid:t,grade:n,attemptnumber:o,addattempt:r?1:0,workflowstate:i,applytoall:l?1:0,plugindata:s},{responseExpected:!1})})},e.COMPONENT="mmaModAssign",e.SUBMISSION_COMPONENT="mmaModAssignSubmission",e.UNLIMITED_ATTEMPTS=-1,e.SUBMISSION_STATUS_NEW="new",e.SUBMISSION_STATUS_REOPENED="reopened",e.SUBMISSION_STATUS_DRAFT="draft",e.SUBMISSION_STATUS_SUBMITTED="submitted",e.ATTEMPT_REOPEN_METHOD_NONE="none",e.ATTEMPT_REOPEN_METHOD_MANUAL="manual",e.GRADING_STATUS_GRADED="graded",e.GRADING_STATUS_NOT_GRADED="notgraded",e.MARKING_WORKFLOW_STATE_RELEASED="released",e.NEED_GRADING="needgrading",e.GRADED_FOLLOWUP_SUBMIT="gradedfollowupsubmit",e.WARN_GROUPS_REQUIRED="warnrequired",e.WARN_GROUPS_OPTIONAL="warnoptional",e.SUBMISSION_SAVED_EVENT="addon_mod_assign_submission_saved",e.SUBMITTED_FOR_GRADING_EVENT="addon_mod_assign_submitted_for_grading",e.GRADED_EVENT="addon_mod_assign_graded",e=t=v([Object(o.A)(),y("design:paramtypes",[l.a,a.a,s.a,u.a,r.a,c.a,h.a,f.a,i.a,m.a,d.a,p.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(3),l=n(4),a=n(2),s=n(569),u=n(76),c=n(146),d=(n.n(c),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},h=function(){function e(e,t,n,o,r,i){var l=this;this.translate=e,this.popoverCtrl=t,this.domUtils=o,this.coreTab=r,this.hideMenu=!0,this.expanded=!1,this.items=[],this.itemsMovedToParent=[],this.itemsChangedStream=new c.Subject,this.itemsChangedStream.auditTime(250).subscribe(function(){l.hideMenu=!l.items.some(function(e){return!e.hidden}),l.items.sort(function(e,t){return e.priority<=t.priority?1:-1})}),this.uniqueId="core-context-menu-"+i.getUniqueId("CoreContextMenuComponent"),this.instanceId=this.domUtils.storeInstanceByElement(n.nativeElement,this)}return e.prototype.ngOnInit=function(){this.icon=this.icon||"more",this.ariaLabel=this.ariaLabel||this.title||this.translate.instant("core.displayoptions")},e.prototype.addItem=function(e){this.parentContextMenu?(this.parentContextMenu.addItem(e),-1==this.itemsMovedToParent.indexOf(e)&&this.itemsMovedToParent.push(e)):-1==this.items.indexOf(e)&&(this.items.push(e),this.itemsChanged())},e.prototype.itemsChanged=function(){this.parentContextMenu?this.parentContextMenu.itemsChanged():this.itemsChangedStream.next()},e.prototype.mergeContextMenus=function(e){this.parentContextMenu=e;for(var t=0;t<this.items.length;t++){var n=this.items[t];e.addItem(n),this.itemsMovedToParent.push(n)}this.items=[],this.itemsChanged()},e.prototype.removeItem=function(e){if(this.parentContextMenu){this.parentContextMenu.removeItem(e);(t=this.itemsMovedToParent.indexOf(e))>=0&&this.itemsMovedToParent.splice(t,1)}else{var t;(t=this.items.indexOf(e))>=0&&this.items.splice(t,1),this.itemsChanged()}},e.prototype.removeMergedItems=function(){if(this.parentContextMenu)for(var e=0;e<this.itemsMovedToParent.length;e++)this.parentContextMenu.removeItem(this.itemsMovedToParent[e])},e.prototype.restoreMergedItems=function(){if(this.parentContextMenu)for(var e=0;e<this.itemsMovedToParent.length;e++)this.parentContextMenu.addItem(this.itemsMovedToParent[e])},e.prototype.showContextMenu=function(e){var t=this;if(!this.expanded){var n=this.popoverCtrl.create(s.a,{title:this.title,items:this.items,id:this.uniqueId,showBackdrop:!0});n.onDidDismiss(function(e){t.expanded=!1,e&&e.onClosed.emit()}),n.present({ev:e}),this.expanded=!0}},e.prototype.ngOnDestroy=function(){this.domUtils.removeInstanceById(this.instanceId),this.removeMergedItems()},d([Object(o.D)(),f("design:type",String)],e.prototype,"icon",void 0),d([Object(o.D)(),f("design:type",String)],e.prototype,"title",void 0),d([Object(o.D)("aria-label"),f("design:type",String)],e.prototype,"ariaLabel",void 0),e=d([Object(o.m)({selector:"core-context-menu",templateUrl:"core-context-menu.html"}),p(4,Object(o.N)()),f("design:paramtypes",[i.c,r.w,o.t,l.a,u.a,a.a])],e)}()},,function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,0,"div",[],null,null,null,null,null)),(e()(),r._55(-1,null,["\n"]))],null,null)}n.d(t,"a",function(){return a}),t.b=o;var r=n(0),i=n(75),l=n(8),a=r._29({encapsulation:2,styles:[],data:{}});r._27("core-icon",i.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-icon",[],null,null,null,o,a)),r._30(1,704512,null,0,i.a,[r.t,l.a],null,null)],null,null)},{name:"name",color:"color",slash:"slash",isActive:"isActive",md:"md",ios:"ios",fixedWidth:"fixed-width",ariaLabel:"label"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(9),i=n(1),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){var n=this;this.sitesProvider=t,this.SYNC_TABLE="sync",this.siteSchema={name:"CoreSyncProvider",version:1,tables:[{name:this.SYNC_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"id",type:"TEXT",notNull:!0},{name:"time",type:"INTEGER"},{name:"warnings",type:"TEXT"}],primaryKeys:["component","id"]}]},this.blockedItems={},this.sitesProvider.registerSiteSchema(this.siteSchema),e.on(r.a.LOGOUT,function(e){n.clearAllBlocks(e.siteId)})}return e.prototype.blockOperation=function(e,t,n,o){o=o||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueSyncBlockId(e,t);this.blockedItems[o]||(this.blockedItems[o]={}),this.blockedItems[o][r]||(this.blockedItems[o][r]={}),this.blockedItems[o][r][n=n||"-"]=!0},e.prototype.clearAllBlocks=function(e){e?delete this.blockedItems[e]:this.blockedItems={}},e.prototype.clearBlocks=function(e,t,n){n=n||this.sitesProvider.getCurrentSiteId();var o=this.getUniqueSyncBlockId(e,t);this.blockedItems[n]&&delete this.blockedItems[n][o]},e.prototype.getSyncRecord=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getRecord(o.SYNC_TABLE,{component:e,id:t})})},e.prototype.insertOrUpdateSyncRecord=function(e,t,n,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(o){return n.component=e,n.id=t,o.insertRecord(r.SYNC_TABLE,n)})},e.prototype.getUniqueSyncBlockId=function(e,t){return e+"#"+t},e.prototype.isBlocked=function(e,t,n){if(n=n||this.sitesProvider.getCurrentSiteId(),!this.blockedItems[n])return!1;var o=this.getUniqueSyncBlockId(e,t);return!!this.blockedItems[n][o]&&Object.keys(this.blockedItems[n][o]).length>0},e.prototype.unblockOperation=function(e,t,n,o){n=n||"-",o=o||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueSyncBlockId(e,t);this.blockedItems[o]&&this.blockedItems[o][r]&&delete this.blockedItems[o][r][n]},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){this.name="CoreBlockBase",this.blockName="base"}return e.prototype.isEnabled=function(){return!0},e.prototype.getDisplayData=function(e,t,n,o){},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(78),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.ctxtMenu=e,this.closeOnClick=!0,this.hasAction=!1,this.destroyed=!1,this.action=new o.v,this.onClosed=new o.v}return e.prototype.ngOnInit=function(){this.priority=this.priority||1,this.closeOnClick=this.getBooleanValue(this.closeOnClick,!0),this.hasAction=this.action.observers.length>0,this.ariaAction=this.ariaAction||this.content,this.hasAction&&(this.href=""),this.captureLink=!(!this.href||!this.captureLink)&&this.captureLink,this.autoLogin=this.autoLogin||"check",this.destroyed||this.ctxtMenu.addItem(this)},e.prototype.getBooleanValue=function(e,t){return void 0===e?t:e&&"false"!==e},e.prototype.ngOnDestroy=function(){this.destroyed=!0,this.ctxtMenu.removeItem(this)},e.prototype.ngOnChanges=function(e){e.hidden&&!e.hidden.firstChange&&this.ctxtMenu.itemsChanged()},i([Object(o.D)(),l("design:type",String)],e.prototype,"content",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"iconDescription",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"iconAction",void 0),i([Object(o.D)(),l("design:type",Boolean)],e.prototype,"iconSlash",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"ariaDescription",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"ariaAction",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"href",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"captureLink",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"autoLogin",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"closeOnClick",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"priority",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"badge",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"badgeClass",void 0),i([Object(o.D)(),l("design:type",Boolean)],e.prototype,"hidden",void 0),i([Object(o.O)(),l("design:type",o.v)],e.prototype,"action",void 0),i([Object(o.O)(),l("design:type",o.v)],e.prototype,"onClosed",void 0),e=i([Object(o.m)({selector:"core-context-menu-item",template:""}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(11),l=n(2),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n,o){this.translate=t,this.textUtils=n,this.utils=o,this.coreMarkRequired=!0,this.element=e.nativeElement,this.requiredLabel=this.translate.instant("core.required")}return e.prototype.ngOnInit=function(){this.coreMarkRequired=this.utils.isTrueOrOne(this.coreMarkRequired)},e.prototype.ngAfterViewInit=function(){if(this.coreMarkRequired){(e=this.element.getAttribute("aria-label")||this.textUtils.cleanTags(this.element.innerHTML,!0))&&this.element.setAttribute("aria-label",e+" "+this.requiredLabel)}else{var e;(e=this.element.getAttribute("aria-label"))&&this.element.setAttribute("aria-label",e.replace(" "+this.requiredLabel,""))}},a([Object(o.D)("core-mark-required"),s("design:type",Object)],e.prototype,"coreMarkRequired",void 0),e=a([Object(o.m)({selector:"[core-mark-required]",templateUrl:"core-mark-required.html"}),s("design:paramtypes",[o.t,r.c,i.a,l.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(6),l=n(4),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.domUtils=n,this.BUTTON_HIDDEN_CLASS="core-navbar-button-hidden",this.forceHidden=!1,this.element=e.nativeElement,this.logger=t.getInstance("CoreNavBarButtonsComponent"),this.instanceId=this.domUtils.storeInstanceByElement(this.element,this)}return Object.defineProperty(e.prototype,"hidden",{set:function(e){this._hidden=e,this.showHideAllElements()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{set:function(e){e.forEach(function(e){e.setRole("bar-button")})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.searchHeader().then(function(t){if(t){var n="ion-buttons",o=void 0;if(e.element.hasAttribute("start")?n+="[start]":e.element.hasAttribute("end")&&(n+="[end]"),o=t.querySelector(n)){e.mergeContextMenus(o);var r=e.element.hasAttribute("prepend");e.movedChildren=e.domUtils.moveChildren(e.element,o,r),e.showHideAllElements()}else e.logger.warn("The header was found, but it didn't have the right ion-buttons.",n)}}).catch(function(){e.logger.warn("Header not found.")})},e.prototype.forceHide=function(e){this.forceHidden=e,this.showHideAllElements()},e.prototype.mergeContextMenus=function(e){var t=e.querySelector("core-context-menu");if(t){var n=this.element.querySelector("core-context-menu");if(n){var o=this.domUtils.getInstanceByElement(t),r=this.domUtils.getInstanceByElement(n);o&&r&&o.coreTab===r.coreTab&&(this.mergedContextMenu=r,this.mergedContextMenu.mergeContextMenus(o),n.parentElement.removeChild(n))}}},e.prototype.searchHeader=function(e){var t=this;void 0===e&&(e=0);for(var n=this.element;n&&n.parentElement;)if(n=this.domUtils.closest(n.parentElement,".ion-page")){var o=this.searchHeaderInPage(n);if(o&&"none"!=getComputedStyle(o,null).display)return Promise.resolve(o)}return e<5?new Promise(function(n,o){setTimeout(function(){t.searchHeader(e+1).then(n,o)},200)}):Promise.reject(null)},e.prototype.searchHeaderInPage=function(e){for(var t=0;t<e.children.length;t++){var n=e.children[t];if("ION-HEADER"==n.tagName)return n}},e.prototype.showHideAllElements=function(){var e=this;this.movedChildren&&this.movedChildren.forEach(function(t){e.showHideElement(t)}),this.mergedContextMenu&&(this.forceHidden||this._hidden?this.mergedContextMenu.removeMergedItems():this.mergedContextMenu.restoreMergedItems())},e.prototype.showHideElement=function(e){e instanceof Element&&(this.forceHidden||this._hidden?e.classList.add(this.BUTTON_HIDDEN_CLASS):e.classList.remove(this.BUTTON_HIDDEN_CLASS))},e.prototype.ngOnDestroy=function(){this.domUtils.removeInstanceById(this.instanceId),this.movedChildren&&this.movedChildren.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)}),this.mergedContextMenu&&this.mergedContextMenu.removeMergedItems()},a([Object(o.D)("hidden"),s("design:type",Boolean),s("design:paramtypes",[Boolean])],e.prototype,"hidden",null),a([Object(o.r)(r.d),s("design:type",o.T),s("design:paramtypes",[o.T])],e.prototype,"buttons",null),e=a([Object(o.m)({selector:"core-navbar-buttons",template:"<ng-content></ng-content>"}),s("design:paramtypes",[o.t,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(185),i=n(10),l=n(126),a=n(6),s=n(2),u=n(40),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},h=function(){function e(e,t,n,o,r,i){var l=this;this.appProvider=t,this.configProvider=n,this.utils=o,this.CRON_TABLE="cron",this.tableSchema={name:"CoreCronDelegate",version:1,tables:[{name:this.CRON_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"value",type:"INTEGER"}]}]},this.handlers={},this.queuePromise=Promise.resolve(),this.logger=e.getInstance("CoreCronDelegate"),this.appDB=this.appProvider.getDB(),this.dbReady=t.createTablesFromSchema(this.tableSchema).catch(function(){}),r.onConnect().subscribe(function(){i.run(function(){l.startNetworkHandlers()})})}return t=e,e.prototype.checkAndExecuteHandler=function(e,n,o){var r=this;if(!this.handlers[e]||!this.handlers[e].execute)return this.logger.debug("Cannot execute handler because is invalid: "+e),Promise.reject(null);var i=this.handlerUsesNetwork(e),l=!n&&this.isHandlerSync(e);return i&&!this.appProvider.isOnline()?(this.logger.debug("Cannot execute handler because device is offline: "+e),this.stopHandler(e),Promise.reject(null)):(l?this.configProvider.get(u.a.SETTINGS_SYNC_ONLY_ON_WIFI,!1).then(function(e){return!e||r.appProvider.isWifi()}):Promise.resolve(!0)).then(function(i){return i?(r.queuePromise=r.queuePromise.catch(function(){}).then(function(){return r.executeHandler(e,n,o).then(function(){return r.logger.debug("Execution of handler '"+e+"' was a success."),r.setHandlerLastExecutionTime(e,Date.now()).then(function(){r.scheduleNextExecution(e)})},function(n){return r.logger.error("Execution of handler '"+e+"' failed.",n),r.scheduleNextExecution(e,t.MIN_INTERVAL),Promise.reject(null)})}),r.queuePromise):(r.logger.debug("Cannot execute handler because device is using limited connection: "+e),r.scheduleNextExecution(e,t.MIN_INTERVAL),Promise.reject(null))})},e.prototype.executeHandler=function(e,n,o){var r=this;return new Promise(function(i,l){var a;r.logger.debug("Executing handler: "+e),Promise.resolve(r.handlers[e].execute(o,n)).then(i).catch(l).finally(function(){clearTimeout(a)}),a=setTimeout(function(){r.logger.debug("Resolving execution of handler '"+e+"' because it took too long."),i()},t.MAX_TIME_PROCESS)})},e.prototype.forceSyncExecution=function(e){var t=[];for(var n in this.handlers)this.isHandlerManualSync(n)&&t.push(this.forceCronHandlerExecution(n,e));return this.utils.allPromises(t)},e.prototype.forceCronHandlerExecution=function(e,t){var n=this.handlers[e];return n.running=!0,clearTimeout(n.timeout),delete n.timeout,this.checkAndExecuteHandler(e,!0,t)},e.prototype.getHandlerInterval=function(e){if(!this.handlers[e]||!this.handlers[e].getInterval)return t.DEFAULT_INTERVAL;var n=this.appProvider.isDesktop()?t.DESKTOP_MIN_INTERVAL:t.MIN_INTERVAL,o=this.handlers[e].getInterval();return o?Math.max(n,o):t.DEFAULT_INTERVAL},e.prototype.getHandlerLastExecutionId=function(e){return"last_execution_"+e},e.prototype.getHandlerLastExecutionTime=function(e){return f(this,void 0,void 0,function(){var t,n,o;return p(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),t=this.getHandlerLastExecutionId(e),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.appDB.getRecord(this.CRON_TABLE,{id:t})];case 3:return n=r.sent(),o=parseInt(n.value,10),[2,isNaN(o)?0:o];case 4:return r.sent(),[2,0];case 5:return[2]}})})},e.prototype.handlerUsesNetwork=function(e){return!this.handlers[e]||!this.handlers[e].usesNetwork||this.handlers[e].usesNetwork()},e.prototype.hasManualSyncHandlers=function(){for(var e in this.handlers)if(this.isHandlerManualSync(e))return!0;return!1},e.prototype.hasSyncHandlers=function(){for(var e in this.handlers)if(this.isHandlerSync(e))return!0;return!1},e.prototype.isHandlerManualSync=function(e){return this.handlers[e]&&this.handlers[e].canManualSync?this.handlers[e].canManualSync():this.isHandlerSync(e)},e.prototype.isHandlerSync=function(e){return!this.handlers[e]||!this.handlers[e].isSync||this.handlers[e].isSync()},e.prototype.register=function(e){e&&e.name&&(void 0===this.handlers[e.name]?(this.logger.debug("Register handler '"+e.name+"' in cron."),e.running=!1,this.handlers[e.name]=e,this.startHandler(e.name)):this.logger.debug("The cron handler '"+e.name+"' is already registered."))},e.prototype.scheduleNextExecution=function(e,t){var n=this;if(this.handlers[e]&&!this.handlers[e].timeout){(t?Promise.resolve(t):this.getHandlerLastExecutionTime(e).then(function(t){return t+n.getHandlerInterval(e)-Date.now()})).then(function(t){n.logger.debug("Scheduling next execution of handler '"+e+"' in '"+t+"' ms"),t<0&&(t=0),n.handlers[e].timeout=setTimeout(function(){delete n.handlers[e].timeout,n.checkAndExecuteHandler(e).catch(function(){})},t)})}},e.prototype.setHandlerLastExecutionTime=function(e,t){return f(this,void 0,void 0,function(){var n,o;return p(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),n=this.getHandlerLastExecutionId(e),o={id:n,value:t},[2,this.appDB.insertRecord(this.CRON_TABLE,o)]}})})},e.prototype.startHandler=function(e){this.handlers[e]?this.handlers[e].running?this.logger.debug("Handler '"+e+"', is already running."):(this.handlers[e].running=!0,this.scheduleNextExecution(e)):this.logger.debug("Cannot start handler '"+e+"', is invalid.")},e.prototype.startNetworkHandlers=function(){for(var e in this.handlers)this.handlerUsesNetwork(e)&&this.startHandler(e)},e.prototype.stopHandler=function(e){this.handlers[e]?this.handlers[e].running?(this.handlers[e].running=!1,clearTimeout(this.handlers[e].timeout),delete this.handlers[e].timeout):this.logger.debug("Cannot stop handler '"+e+"', it's not running."):this.logger.debug("Cannot stop handler '"+e+"', is invalid.")},e.DEFAULT_INTERVAL=36e5,e.MIN_INTERVAL=3e5,e.DESKTOP_MIN_INTERVAL=6e4,e.MAX_TIME_PROCESS=12e4,e=t=c([Object(o.A)(),d("design:paramtypes",[a.a,i.a,l.a,s.a,r.a,o.M])],e);var t}()},,,function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,5,"button",[["aria-haspopup","true"],["class","bar-button"],["clear",""],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0],[1,"aria-expanded",0],[1,"aria-controls",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showContextMenu(n)&&o}return o},i.b,i.a)),r._30(1,1097728,null,0,l.a,[[8,""],a.a,r.t,r.V],{clear:[0,"clear"]},null),(e()(),r._55(-1,0,["\n    "])),(e()(),r._31(3,0,null,0,1,"core-icon",[],null,null,null,s.b,s.a)),r._30(4,704512,null,0,u.a,[r.t,a.a],{name:[0,"name"]},null),(e()(),r._55(-1,0,["\n"])),(e()(),r._55(-1,null,["\n"])),r._43(null,0)],function(e,t){var n=t.component;e(t,1,0,"");e(t,4,0,n.icon)},function(e,t){var n=t.component;e(t,0,0,n.hideMenu,n.ariaLabel,n.expanded,n.uniqueId)})}n.d(t,"a",function(){return _}),t.b=o;var r=n(0),i=n(45),l=n(42),a=n(8),s=n(80),u=n(75),c=n(78),d=n(17),f=n(70),p=n(4),h=n(76),m=n(2),_=r._29({encapsulation:2,styles:[],data:{}});r._27("core-context-menu",c.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-context-menu",[],null,null,null,o,_)),r._30(1,245760,null,0,c.a,[d.a,f.a,r.t,p.a,[2,h.a],m.a],null,null)],function(e,t){e(t,1,0)},null)},{icon:"icon",title:"title",ariaLabel:"aria-label"},{},["*"])},function(e,t,n){"use strict";function o(e){return r._57(0,[],null,null)}n.d(t,"a",function(){return a}),t.b=o;var r=n(0),i=n(83),l=n(78),a=r._29({encapsulation:2,styles:[],data:{}});r._27("core-context-menu-item",i.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-context-menu-item",[],null,null,null,o,a)),r._30(1,770048,null,0,i.a,[l.a],null,null)],function(e,t){e(t,1,0)},null)},{content:"content",iconDescription:"iconDescription",iconAction:"iconAction",iconSlash:"iconSlash",ariaDescription:"ariaDescription",ariaAction:"ariaAction",href:"href",captureLink:"captureLink",autoLogin:"autoLogin",closeOnClick:"closeOnClick",priority:"priority",badge:"badge",badgeClass:"badgeClass",hidden:"hidden"},{action:"action",onClosed:"onClosed"},[])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"ion-icon",[["class","core-input-required-asterisk"],["md","ios-medical"],["name","medical"],["role","img"]],[[8,"title",0],[2,"hide",null]],null,null,null,null)),i._30(1,147456,null,0,l.a,[a.a,i.t,i.V],{name:[0,"name"],md:[1,"md"]},null)],function(e,t){e(t,1,0,"medical","ios-medical")},function(e,t){e(t,0,0,t.component.requiredLabel,i._44(t,1)._hidden)})}function r(e){return i._57(0,[i._43(null,0),(e()(),i._55(-1,null,["\n"])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(3,16384,null,0,s.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,[" "])),(e()(),i._55(-1,null,["\n"]))],function(e,t){e(t,3,0,t.component.coreMarkRequired)},null)}n.d(t,"a",function(){return p}),t.b=r;var i=n(0),l=n(47),a=n(8),s=n(7),u=n(84),c=n(17),d=n(11),f=n(2),p=i._29({encapsulation:2,styles:[],data:{}});i._27("[core-mark-required]",u.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"div",[["core-mark-required",""]],null,null,null,r,p)),i._30(1,4308992,null,0,u.a,[i.t,c.a,d.a,f.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,"")},null)},{coreMarkRequired:"core-mark-required"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(23),i=n(3),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e}return e.prototype.ngOnInit=function(){this.formControl&&(this.initErrorMessages(),this.errorKeys=Object.keys(this.errorMessages))},e.prototype.initErrorMessages=function(){this.errorMessages=this.errorMessages||{},this.errorMessages.required=this.errorMessages.required||this.translate.instant("core.required"),this.errorMessages.email=this.errorMessages.email||this.translate.instant("core.login.invalidemail"),this.errorMessages.date=this.errorMessages.date||this.translate.instant("core.login.invaliddate"),this.errorMessages.datetime=this.errorMessages.datetime||this.translate.instant("core.login.invaliddate"),this.errorMessages.datetimelocal=this.errorMessages.datetimelocal||this.translate.instant("core.login.invaliddate"),this.errorMessages.time=this.errorMessages.time||this.translate.instant("core.login.invalidtime"),this.errorMessages.url=this.errorMessages.url||this.translate.instant("core.login.invalidurl"),this.errorMessages.max=this.errorMessages.max||"",this.errorMessages.min=this.errorMessages.min||""},e.prototype.ngOnChanges=function(e){e.errorText&&(this.errorText=e.errorText.currentValue)},l([Object(o.D)("control"),a("design:type",r.e)],e.prototype,"formControl",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"errorMessages",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"errorText",void 0),e=l([Object(o.m)({selector:"core-input-errors",templateUrl:"core-input-errors.html"}),a("design:paramtypes",[i.c])],e)}()},,function(e,t,n){"use strict";function o(e){return r._57(0,[r._43(null,0)],null,null)}n.d(t,"a",function(){return s}),t.b=o;var r=n(0),i=n(87),l=n(6),a=n(4),s=r._29({encapsulation:2,styles:[],data:{}});r._27("core-navbar-buttons",i.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,2,"core-navbar-buttons",[],null,null,null,o,s)),r._30(1,245760,null,1,i.a,[r.t,l.a,a.a],null,null),r._52(603979776,1,{buttons:1})],function(e,t){e(t,1,0)},null)},{hidden:"hidden"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(10),i=n(6),l=n(1),a=n(2),s=n(18),u=n(65),c=n(292),d=n(127),f=n(53),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,n,o,r,i,l,a,s){this.sitesProvider=n,this.utils=o,this.filepoolProvider=r,this.dataOffline=i,this.appProvider=l,this.fieldsDelegate=a,this.logHelper=s,this.ROOT_CACHE_KEY=t.COMPONENT+":",this.logger=e.getInstance("AddonModDataProvider")}return t=e,e.prototype.addEntry=function(e,t,n,o,r,i,l,a){var s=this;void 0===r&&(r=0),void 0===a&&(a=!1),l=l||this.sitesProvider.getCurrentSiteId();var u=function(){return s.dataOffline.saveEntry(e,t,"add",n,r,o,void 0,l).then(function(e){return{newentryid:e,sent:!1}})};if(!this.appProvider.isOnline()||a){var c=this.checkFields(i,o);return c?Promise.resolve({fieldnotifications:c}):u()}return this.addEntryOnline(e,o,r,l).then(function(e){return e.sent=!0,e}).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):u()})},e.prototype.addEntryOnline=function(e,t,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={databaseid:e,data:t};return void 0!==n&&(r.groupid=n),o.write("mod_data_add_entry",r)})},e.prototype.approveEntry=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.dataOffline.saveEntry(e,t,n?"approve":"disapprove",o,void 0,void 0,void 0,r).then(function(){return{sent:!1}})},a=n?"disapprove":"approve";return this.dataOffline.getEntry(e,t,a,r).then(function(){return i.dataOffline.deleteEntry(e,t,a,r)}).catch(function(){return i.appProvider.isOnline()?i.approveEntryOnline(t,n,r).then(function(){return{sent:!0}}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()}):l()})},e.prototype.approveEntryOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_data_approve_entry",{entryid:e,approve:t?1:0})})},e.prototype.checkFields=function(e,t){var n=this,o=[],r={};return t.forEach(function(e){void 0===r[e.fieldid]&&(r[e.fieldid]=[]),r[e.fieldid].push(e)}),Object.keys(e).forEach(function(t){var i=e[t],l=n.fieldsDelegate.getFieldsNotifications(i,r[i.id]);l&&o.push({fieldname:i.name,notification:l})}),!!o.length&&o},e.prototype.deleteEntry=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=function(){return r.dataOffline.saveEntry(e,t,"delete",n,void 0,void 0,void 0,o).then(function(){return{sent:!1}})},l=!1;return this.dataOffline.getEntryActions(e,t,o).then(function(n){if(n&&n.length){var i=n.map(function(n){return"add"==n.action&&(l=!0),r.dataOffline.deleteEntry(e,t,n.action,o)});return Promise.all(i)}}).then(function(){if(!l)return r.appProvider.isOnline()?r.deleteEntryOnline(t,o).then(function(){return{sent:!0}}).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):i()}):i()})},e.prototype.deleteEntryOnline=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_data_delete_entry",{entryid:e})})},e.prototype.editEntry=function(e,t,n,o,r,i,l){var a=this;void 0===l&&(l=!1),i=i||this.sitesProvider.getCurrentSiteId();var s,u=function(){return a.dataOffline.saveEntry(e,t,"edit",n,void 0,o,void 0,i).then(function(){return{updated:!0,sent:!1}})},c=!1;if(!this.appProvider.isOnline()||l){var d=this.checkFields(r,o);if(d)return Promise.resolve({fieldnotifications:d})}return this.dataOffline.getEntryActions(e,t,i).then(function(n){if(n&&n.length){var o=[];return n.forEach(function(n){"add"==n.action?(c=!0,s=n.groupid,o.push(a.dataOffline.deleteEntry(e,t,n.action,i))):"edit"==n.action&&o.push(a.dataOffline.deleteEntry(e,t,n.action,i))}),Promise.all(o)}}).then(function(){return c?a.addEntry(e,t,n,o,s,r,i,l).then(function(e){return e.updated=!0,e.sent=!0,e}):!a.appProvider.isOnline()||l?u():a.editEntryOnline(t,o,i).then(function(e){return e.sent=!0,e}).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):u()})})},e.prototype.editEntryOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_data_update_entry",{entryid:e,data:t})})},e.prototype.fetchAllEntries=function(e,n,o,r,i,l,a,s){return void 0===n&&(n=0),void 0===o&&(o="0"),void 0===r&&(r="DESC"),void 0===i&&(i=t.PER_PAGE),void 0===l&&(l=!1),void 0===a&&(a=!1),s=s||this.sitesProvider.getCurrentSiteId(),this.fetchEntriesRecursive(e,n,o,r,i,l,a,[],0,s)},e.prototype.fetchEntriesRecursive=function(e,t,n,o,r,i,l,a,s,u){var c=this;return this.getEntries(e,t,n,o,s,r,i,l,u).then(function(d){a=a.concat(d.entries);return r>0&&(s+1)*r<d.totalcount?c.fetchEntriesRecursive(e,t,n,o,r,i,l,a,s+1,u):a})},e.prototype.getDatabaseDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"data:"+e},e.prototype.getDatabaseDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getDatabaseByKey=function(e,t,n,o,r){var i=this;return void 0===r&&(r=!1),this.sitesProvider.getSite(o).then(function(o){var l={courseids:[e]},a={cacheKey:i.getDatabaseDataCacheKey(e),updateFrequency:f.a.FREQUENCY_RARELY};return r&&(a.omitExpires=!0),o.read("mod_data_get_databases_by_courses",l,a).then(function(e){if(e&&e.databases){var o=e.databases.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getDatabase=function(e,t,n,o){return void 0===o&&(o=!1),this.getDatabaseByKey(e,"coursemodule",t,n,o)},e.prototype.getDatabaseById=function(e,t,n,o){return void 0===o&&(o=!1),this.getDatabaseByKey(e,"id",t,n,o)},e.prototype.getDatabaseAccessInformationDataPrefixCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":access:"},e.prototype.getDatabaseAccessInformationDataCacheKey=function(e,t){return void 0===t&&(t=0),this.getDatabaseAccessInformationDataPrefixCacheKey(e)+t},e.prototype.getDatabaseAccessInformation=function(e,t,n,o,r){var i=this;return void 0===n&&(n=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={databaseid:e},a={cacheKey:i.getDatabaseAccessInformationDataCacheKey(e,t)};return void 0!==t&&(l.groupid=t),n?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_data_get_data_access_information",l,a)})},e.prototype.getEntries=function(e,n,o,r,i,l,a,s,u){var c=this;return void 0===n&&(n=0),void 0===o&&(o="0"),void 0===r&&(r="DESC"),void 0===i&&(i=0),void 0===l&&(l=t.PER_PAGE),void 0===a&&(a=!1),void 0===s&&(s=!1),this.sitesProvider.getSite(u).then(function(t){var u={databaseid:e,returncontents:1,page:i,perpage:l,groupid:n,sort:o,order:r},d={cacheKey:c.getEntriesCacheKey(e,n),updateFrequency:f.a.FREQUENCY_SOMETIMES};return a?d.omitExpires=!0:s&&(d.getFromCache=!1,d.emergencyCache=!1),t.read("mod_data_get_entries",u,d).then(function(e){return e.entries.forEach(function(e){e.contents=c.utils.arrayToObject(e.contents,"fieldid")}),e})})},e.prototype.getEntriesCacheKey=function(e,t){return void 0===t&&(t=0),this.getEntriesPrefixCacheKey(e)+t},e.prototype.getEntriesPrefixCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":entries:"},e.prototype.getEntry=function(e,t,n,o){var r=this;return void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={entryid:t,returncontents:1},l={cacheKey:r.getEntryCacheKey(e,t),updateFrequency:f.a.FREQUENCY_SOMETIMES};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_data_get_entry",i,l).then(function(e){return e.entry.contents=r.utils.arrayToObject(e.entry.contents,"fieldid"),e})})},e.prototype.getEntryCacheKey=function(e,t){return this.getDatabaseDataPrefixCacheKey(e)+":entry:"+t},e.prototype.getFields=function(e,t,n,o){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={databaseid:e},l={cacheKey:r.getFieldsCacheKey(e),updateFrequency:f.a.FREQUENCY_RARELY};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_data_get_fields",i,l).then(function(e){return e&&e.fields?e.fields:Promise.reject(null)})})},e.prototype.getFieldsCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":fields"},e.prototype.invalidateContent=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.getDatabase(t,e).then(function(e){var r=[];return r.push(o.invalidateDatabaseData(t,n)),r.push(o.invalidateDatabaseWSData(e.id,n)),r.push(o.invalidateFieldsData(e.id,n)),Promise.all(r)})),r.push(this.invalidateFiles(e,n)),this.utils.allPromises(r)},e.prototype.invalidateDatabaseAccessInformationData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getDatabaseAccessInformationDataPrefixCacheKey(e))})},e.prototype.invalidateEntriesData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getEntriesPrefixCacheKey(e))})},e.prototype.invalidateFieldsData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getFieldsCacheKey(e))})},e.prototype.invalidateFiles=function(e,n){return this.filepoolProvider.invalidateFilesByComponent(n,t.COMPONENT,e)},e.prototype.invalidateDatabaseData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getDatabaseDataCacheKey(e))})},e.prototype.invalidateDatabaseWSData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getDatabaseDataPrefixCacheKey(e))})},e.prototype.invalidateEntryData=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getEntryCacheKey(e,t))})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_data_get_data_access_information")})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_data_view_database",{databaseid:e},t.COMPONENT,e,n,"data",{},o)},e.prototype.searchEntries=function(e,n,o,r,i,l,a,s,u){var c=this;return void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=t.PER_PAGE),this.sitesProvider.getSite(u).then(function(t){var u={databaseid:e,groupid:n,returncontents:1,page:a,perpage:s};return void 0!==i&&(u.sort=i),void 0!==l&&(u.order=l),void 0!==o&&(u.search=o),void 0!==r&&(u.advsearch=r),t.read("mod_data_search_entries",u,{getFromCache:!1,saveToCache:!0,emergencyCache:!0}).then(function(e){return e.entries.forEach(function(e){e.contents=c.utils.arrayToObject(e.contents,"fieldid")}),e})})},e.COMPONENT="mmaModData",e.PER_PAGE=25,e.ENTRY_CHANGED="addon_mod_data_entry_changed",e=t=p([Object(o.A)(),h("design:paramtypes",[i.a,l.a,a.a,s.a,c.a,r.a,d.a,u.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(9),r=function(){function e(e,t,n,r){var i=this;this.loggerProvider=t,this.sitesProvider=n,this.eventsProvider=r,this.handlers={},this.enabledHandlers={},this.handlerNameProperty="name",this.updatePromises={},this.handlersInitialized=!1,this.logger=this.loggerProvider.getInstance(e),this.handlersInitPromise=new Promise(function(e){i.handlersInitResolve=e}),r&&(r.on(o.a.LOGIN,this.updateHandlers.bind(this)),r.on(o.a.SITE_UPDATED,this.updateHandlers.bind(this)),r.on(o.a.SITE_PLUGINS_LOADED,this.updateHandlers.bind(this)))}return e.prototype.executeFunctionOnEnabled=function(e,t,n){return this.execute(this.enabledHandlers[e],t,n)},e.prototype.executeFunction=function(e,t,n){return this.execute(this.handlers[e],t,n)},e.prototype.execute=function(e,t,n){return e&&e[t]?e[t].apply(e,n):this.defaultHandler&&this.defaultHandler[t]?this.defaultHandler[t].apply(this.defaultHandler,n):void 0},e.prototype.getHandler=function(e,t){return void 0===t&&(t=!1),t?this.enabledHandlers[e]:this.handlers[e]},e.prototype.getHandlerName=function(e){var t=this.getHandler(e,!0);return t?t.name:""},e.prototype.hasFunction=function(e,t,n){void 0===n&&(n=!0);var o=n?this.enabledHandlers[e]:this.handlers[e];return o&&o[t]},e.prototype.hasHandler=function(e,t){return void 0===t&&(t=!1),t?void 0!==this.enabledHandlers[e]:void 0!==this.handlers[e]},e.prototype.isLastUpdateCall=function(e){return!this.lastUpdateHandlersStart||e==this.lastUpdateHandlersStart},e.prototype.registerHandler=function(e){var t=e[this.handlerNameProperty]||e.name;return void 0!==this.handlers[t]?(this.logger.log("Handler '"+e[this.handlerNameProperty]+"' already registered"),!1):(this.logger.log("Registered handler '"+e[this.handlerNameProperty]+"'"),this.handlers[t]=e,!0)},e.prototype.updateHandler=function(e,t){var n,o=this,r=this.sitesProvider.getCurrentSiteId(),i=this.sitesProvider.getCurrentSite();return this.updatePromises[r]&&this.updatePromises[r][e.name]?this.updatePromises[r][e.name]:(this.updatePromises[r]||(this.updatePromises[r]={}),n=this.sitesProvider.isLoggedIn()?this.isFeatureDisabled(e,i)?Promise.resolve(!1):Promise.resolve(e.isEnabled()):Promise.reject(null),this.updatePromises[r][e.name]=n.catch(function(){return!1}).then(function(t){if(o.sitesProvider.getCurrentSiteId()===r){var n=e[o.handlerNameProperty]||e.name;t?o.enabledHandlers[n]=e:delete o.enabledHandlers[n]}}).finally(function(){delete o.updatePromises[r][e.name]}),this.updatePromises[r][e.name])},e.prototype.isFeatureDisabled=function(e,t){return void 0!==this.featurePrefix&&t.isFeatureDisabled(this.featurePrefix+e.name)},e.prototype.updateHandlers=function(){var e=this,t=[],n=Date.now();this.logger.debug("Updating handlers for current site."),this.lastUpdateHandlersStart=n;for(var o in this.handlers)t.push(this.updateHandler(this.handlers[o],n));return Promise.all(t).then(function(){return!0},function(){return!0}).then(function(){e.isLastUpdateCall(n)&&(e.handlersInitialized=!0,e.handlersInitResolve(),e.updateData())})},e.prototype.updateData=function(){},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(55),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(e){function t(t,n,o,r){var i=e.call(this)||this;i.courseHelper=t,i.addon=n,i.modName=o,i.instanceIdParam=r,i.useModNameToGetModule=!1;var l=r?"/mod/"+o+"/view.php.*([&?]("+r+"|id)=\\d+)":"/mod/"+o+"/view.php.*([&?]id=\\d+)";return i.pattern=new RegExp(l),i.featureName="CoreCourseModuleDelegate_"+n,i}return r(t,e),t.prototype.getPageParams=function(e,t,n){},t.prototype.getActions=function(e,t,n,o){var r=this,i=this.getPageParams(t,n,o=o||n.courseid||n.cid);if(this.instanceIdParam&&void 0!==n[this.instanceIdParam]){var l=parseInt(n[this.instanceIdParam],10);return[{action:function(e,t){r.courseHelper.navigateToModuleByInstance(l,r.modName,e,o,void 0,r.useModNameToGetModule,i,t)}}]}return[{action:function(e,t){r.courseHelper.navigateToModule(parseInt(n.id,10),e,o,void 0,r.useModNameToGetModule?r.modName:void 0,i,t)}}]},t}(o.a)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(98),i=n(9),l=n(6),a=n(1),s=n(2),u=n(52),c=n(13),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,l){var a=e.call(this,"CoreCourseOptionsDelegate",t,n,r)||this;return a.sitesProvider=n,a.utils=o,a.eventsProvider=r,a.coursesProvider=l,a.loaded={},a.lastUpdateHandlersForCoursesStart={},a.coursesHandlers={},a.featurePrefix="CoreCourseOptionsDelegate_",r.on(i.a.LOGOUT,function(){a.clearCoursesHandlers()}),a}return d(t,e),t.prototype.areHandlersLoaded=function(e){return!!this.loaded[e]},t.prototype.clearCoursesHandlers=function(e){e?(this.loaded[e]=!1,delete this.coursesHandlers[e]):(this.loaded={},this.coursesHandlers={})},t.prototype.clearAndInvalidateCoursesOptions=function(e){var t=[];if(this.eventsProvider.trigger(u.a.EVENT_MY_COURSES_REFRESHED),e)t.push(this.coursesProvider.invalidateCoursesAdminAndNavOptions([e])),t.push(this.invalidateCourseHandlers(e));else{t.push(this.coursesProvider.invalidateUserNavigationOptions()),t.push(this.coursesProvider.invalidateUserAdministrationOptions());for(var n in this.coursesHandlers)t.push(this.invalidateCourseHandlers(parseInt(n,10)))}return this.clearCoursesHandlers(e),Promise.all(t)},t.prototype.getHandlersForAccess=function(e,t,n,o,r){var i=this;return this.loaded[e]||(t=!1),!t&&this.coursesHandlers[e]&&this.coursesHandlers[e].access.type==n.type||(this.coursesHandlers[e]||(this.coursesHandlers[e]={}),this.coursesHandlers[e].access=n,this.coursesHandlers[e].navOptions=o,this.coursesHandlers[e].admOptions=r,this.coursesHandlers[e].deferred=this.utils.promiseDefer(),this.updateHandlersForCourse(e,n,o,r)),this.coursesHandlers[e].deferred.promise.then(function(){return i.coursesHandlers[e].enabledHandlers})},t.prototype.getHandlersToDisplay=function(e,t,n,o,r,i){return this.getHandlersToDisplayInternal(!1,e,t,n,o,r,i)},t.prototype.getMenuHandlersToDisplay=function(e,t,n,o,r,i){return this.getHandlersToDisplayInternal(!0,e,t,n,o,r,i)},t.prototype.getHandlersToDisplayInternal=function(e,t,n,o,r,i,l){var a=this;n.id=parseInt(n.id,10);var s={type:r?c.a.ACCESS_GUEST:c.a.ACCESS_DEFAULT},u=[];return i&&(n.navOptions=i),l&&(n.admOptions=l),this.loadCourseOptions(n,o).then(function(){return a.getHandlersForAccess(n.id,o,s,n.navOptions,n.admOptions)}).then(function(){var o=[];return(e?a.coursesHandlers[n.id].enabledMenuHandlers:a.coursesHandlers[n.id].enabledHandlers).forEach(function(r){var i=e?r.getMenuDisplayData:r.getDisplayData;o.push(Promise.resolve(i.call(r,t,n)).then(function(e){u.push({data:e,priority:r.priority,prefetch:r.prefetch&&r.prefetch.bind(r),name:r.name})}).catch(function(e){a.logger.error("Error getting data for handler",r.name,e)}))}),Promise.all(o)}).then(function(){return u.sort(function(e,t){return t.priority-e.priority}),u})},t.prototype.hasHandlersForCourse=function(e,t){var n=this;return this.loadCourseOptions(e,t).then(function(){return n.hasHandlersForDefault(e.id,t,e.navOptions,e.admOptions)})},t.prototype.hasHandlersForDefault=function(e,t,n,o){return this.getHandlersForAccess(e,t,{type:c.a.ACCESS_DEFAULT},n,o).then(function(e){return!(!e||!e.length)})},t.prototype.hasHandlersForGuest=function(e,t,n,o){return this.getHandlersForAccess(e,t,{type:c.a.ACCESS_GUEST},n,o).then(function(e){return!(!e||!e.length)})},t.prototype.invalidateCourseHandlers=function(e){var t=[],n=this.coursesHandlers[e];return n?(n.enabledHandlers.forEach(function(o){o&&o.invalidateEnabledForCourse&&t.push(Promise.resolve(o.invalidateEnabledForCourse(e,n.navOptions,n.admOptions)))}),this.utils.allPromises(t)):Promise.resolve()},t.prototype.isLastUpdateCourseCall=function(e,t){return!this.lastUpdateHandlersForCoursesStart[e]||t==this.lastUpdateHandlersForCoursesStart[e]},t.prototype.loadCourseOptions=function(e,t){return this.coursesProvider.canGetAdminAndNavOptions()&&(void 0===e.navOptions||void 0===e.admOptions||t)?this.coursesProvider.getCoursesAdminAndNavOptions([e.id]).then(function(t){e.navOptions=t.navOptions[e.id],e.admOptions=t.admOptions[e.id]}):Promise.resolve()},t.prototype.updateData=function(){for(var e in this.coursesHandlers){var t=this.coursesHandlers[e];this.updateHandlersForCourse(parseInt(e,10),t.access,t.navOptions,t.admOptions)}},t.prototype.updateHandlersForCourse=function(e,t,n,o){var r=this,i=[],l=[],a=[],s=this.sitesProvider.getCurrentSiteId(),u=Date.now();this.lastUpdateHandlersForCoursesStart[e]=u;var c=function(r){var s=d.enabledHandlers[r];i.push(Promise.resolve(s.isEnabledForCourse(e,t,n,o)).then(function(e){if(!e)return Promise.reject(null);s.isMenuHandler?a.push(s):l.push(s)}).catch(function(){}))},d=this;for(var f in this.enabledHandlers)c(f);return Promise.all(i).then(function(){return!0}).catch(function(){return!0}).finally(function(){r.isLastUpdateCourseCall(e,u)&&r.sitesProvider.getCurrentSiteId()===s&&(r.coursesHandlers[e].enabledHandlers=l,r.coursesHandlers[e].enabledMenuHandlers=a,r.loaded[e]=!0,r.coursesHandlers[e].deferred.resolve())})},t=f([Object(o.A)(),p("design:paramtypes",[l.a,a.a,s.a,i.a,u.a])],t)}(r.a)},function(e,t,n){"use strict";function o(e){return f._57(0,[(e()(),f._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),f._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.errorMessages[t.parent.parent.context.$implicit])})}function r(e){return f._57(0,[(e()(),f._31(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),f._55(1,null,["\n                    ","\n                "])),f._48(2,{$a:0}),f._47(131072,p.a,[h.a,f.j])],null,function(e,t){var n=t.component;e(t,1,0,f._56(t,1,0,f._44(t,3).transform("core.login.invalidvaluemax",e(t,2,0,n.formControl.errors.max.max))))})}function i(e){return f._57(0,[(e()(),f._31(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),f._55(1,null,["\n                    ","\n                "])),f._48(2,{$a:0}),f._47(131072,p.a,[h.a,f.j])],null,function(e,t){var n=t.component;e(t,1,0,f._56(t,1,0,f._44(t,3).transform("core.login.invalidvaluemin",e(t,2,0,n.formControl.errors.min.min))))})}function l(e){return f._57(0,[(e()(),f._31(0,0,null,null,10,"div",[["class","core-input-error"]],null,null,null,null,null)),(e()(),f._55(-1,null,["\n                "])),(e()(),f._26(16777216,null,null,1,null,o)),f._30(3,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n                "])),(e()(),f._26(16777216,null,null,1,null,r)),f._30(6,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n                "])),(e()(),f._26(16777216,null,null,1,null,i)),f._30(9,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,3,0,n.errorMessages[t.parent.context.$implicit]);e(t,6,0,!n.errorMessages[t.parent.context.$implicit]&&"max"==t.parent.context.$implicit&&n.formControl.errors.max);e(t,9,0,!n.errorMessages[t.parent.context.$implicit]&&"min"==t.parent.context.$implicit&&n.formControl.errors.min)},null)}function a(e){return f._57(0,[(e()(),f._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),f._55(-1,null,["\n            "])),(e()(),f._26(16777216,null,null,1,null,l)),f._30(3,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,t.component.formControl.hasError(t.context.$implicit))},null)}function s(e){return f._57(0,[(e()(),f._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),f._55(-1,null,["\n        "])),(e()(),f._26(16777216,null,null,1,null,a)),f._30(3,802816,null,0,m.j,[f._11,f._6,f.E],{ngForOf:[0,"ngForOf"]},null),(e()(),f._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.errorKeys)},null)}function u(e){return f._57(0,[(e()(),f._31(0,0,null,null,1,"div",[["aria-live","assertive"],["class","core-input-error"]],null,null,null,null,null)),(e()(),f._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.errorText)})}function c(e){return f._57(0,[(e()(),f._31(0,0,null,null,7,"div",[["class","core-input-error-container"],["role","alert"]],null,null,null,null,null)),(e()(),f._55(-1,null,["\n    "])),(e()(),f._26(16777216,null,null,1,null,s)),f._30(3,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n    "])),(e()(),f._26(16777216,null,null,1,null,u)),f._30(6,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.formControl&&n.formControl.dirty&&!n.formControl.valid);e(t,6,0,n.errorText)},null)}function d(e){return f._57(0,[(e()(),f._26(16777216,null,null,1,null,c)),f._30(1,16384,null,0,m.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.formControl&&n.formControl.dirty&&!n.formControl.valid||n.errorText)},null)}n.d(t,"a",function(){return g}),t.b=d;var f=n(0),p=n(25),h=n(17),m=n(7),_=n(94),g=f._29({encapsulation:2,styles:[],data:{}});f._27("core-input-errors",_.a,function(e){return f._57(0,[(e()(),f._31(0,0,null,null,1,"core-input-errors",[],null,null,null,d,g)),f._30(1,638976,null,0,_.a,[h.a],null,null)],function(e,t){e(t,1,0)},null)},{formControl:"control",errorMessages:"errorMessages",errorText:"errorText"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(98),i=n(52),l=n(2),a=n(6),s=n(1),u=n(9),c=n(146),d=(n.n(c),this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,o,r,i,l){var a=e.call(this,"CoreUserDelegate",t,o,i)||this;return a.loggerProvider=t,a.sitesProvider=o,a.coursesProvider=r,a.eventsProvider=i,a.utils=l,a.featurePrefix="CoreUserDelegate_",a.userHandlers={},i.on(n.UPDATE_HANDLER_EVENT,function(e){if(e&&e.handler&&a.userHandlers[e.userId]){var t=a.userHandlers[e.userId],n=t.handlers.find(function(t){return t.name==e.handler});if(n){for(var o in e.data)n.data[o]=e.data[o];t.observable.next(t.handlers)}}}),a}return d(t,e),n=t,t.prototype.areHandlersLoaded=function(e){return this.userHandlers[e]&&this.userHandlers[e].loaded},t.prototype.clearUserHandlers=function(e){var t=this.userHandlers[e];t&&(t.handlers=[],t.observable.next([]),t.loaded=!1)},t.prototype.getProfileHandlersFor=function(e,t){var o,r,i,l=this;o=this.coursesProvider.canGetAdminAndNavOptions()?this.coursesProvider.getUserCourses(!0).then(function(e){var n=e.map(function(e){return e.id});return l.coursesProvider.getCoursesAdminAndNavOptions(n).then(function(e){var n=t||l.sitesProvider.getCurrentSiteHomeId();r=e.navOptions[n],i=e.admOptions[n]})}):Promise.resolve(),this.userHandlers[e.id]||(this.userHandlers[e.id]={loaded:!1,handlers:[],observable:new c.BehaviorSubject([])});var a=this.userHandlers[e.id];return a.handlers=[],o.then(function(){var o=[],s=function(s){var u=l.handlers[s],c=u.isEnabledForUser(e,t,r,i);o.push(Promise.resolve(c).then(function(o){o&&a.handlers.push({name:s,data:u.getDisplayData(e,t),priority:u.priority,type:u.type||n.TYPE_NEW_PAGE})}).catch(function(){}))};for(var u in l.enabledHandlers)s(u);return l.utils.allPromises(o).then(function(){a.handlers.sort(function(e,t){return t.priority-e.priority}),a.loaded=!0,a.observable.next(a.handlers)})}).catch(function(){a.loaded=!0,a.observable.next(a.handlers)}),a.observable},t.TYPE_COMMUNICATION="communication",t.TYPE_NEW_PAGE="newpage",t.TYPE_ACTION="action",t.UPDATE_HANDLER_EVENT="CoreUserDelegate_update_handler_event",t=n=f([Object(o.A)(),p("design:paramtypes",[a.a,s.a,i.a,u.a,l.a])],t);var n}(r.a)},,function(e,t,n){"use strict";var o=n(0),r=n(1570),i=n(1617),l=n(377),a=n(1581),s=n(228),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=function(){function e(){}return e.prototype.transform=function(e){return e.replace(/(<([^>]+)>)/gi,"")},e=u([Object(o.S)({name:"coreNoTags"})],e)}(),d=n(1571),f=n(443),p=n(6),h=n(24),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t){this.timeUtils=t,this.logger=e.getInstance("CoreToLocaleStringPipe")}return e.prototype.transform=function(e){if("string"==typeof e){var t=parseInt(e,10);if(isNaN(t))return this.logger.error("Invalid value received",e),e;e=t}return e<0?"":(e<1e11&&(e*=1e3),this.timeUtils.userDate(e,"core.strftimedatetimeshort"))},e=m([Object(o.S)({name:"coreToLocaleString"}),_("design:paramtypes",[p.a,h.a])],e)}();n.d(t,"a",function(){return y});var v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=function(){function e(){}return e=v([Object(o.I)({declarations:[r.a,i.a,l.a,a.a,s.a,c,d.a,f.a,g],imports:[],exports:[r.a,i.a,l.a,a.a,s.a,c,d.a,f.a,g]})],e)}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",String)],e.prototype,"description",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"note",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"component",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"componentId",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"showFull",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"contextLevel",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"contextInstanceId",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"courseId",void 0),e=r([Object(o.m)({selector:"core-course-module-description",templateUrl:"core-course-module-description.html"}),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(55),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.translate=n,i.addon=o,i.modName=r,i.pattern=new RegExp("/mod/"+r+"/index.php.*([&?]id=\\d+)"),i.featureName="CoreCourseModuleDelegate_"+o,i}return r(t,e),t.prototype.getActions=function(e,t,n){var o=this;return[{action:function(e,t){var r={courseId:n.id,modName:o.modName,title:o.title||o.translate.instant("addon.mod_"+o.modName+".modulenameplural")};o.linkHelper.goInSite(t,"CoreCourseListModTypePage",r,e)}}]},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",String)],e.prototype,"message",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"icon",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"image",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"inline",void 0),e=r([Object(o.m)({selector:"core-empty-box",templateUrl:"core-empty-box.html"}),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(10),l=n(57),a=n(18),s=n(1),u=n(171),c=n(2),d=n(40),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},_=function(){function e(e,t,n,o,r,i,l){this.fileProvider=e,this.filepoolProvider=t,this.sitesProvider=n,this.appProvider=o,this.translate=r,this.utils=i,this.wsProvider=l}return e.prototype.downloadAndOpenFile=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var a=this.getFileUrl(e),s=this.getFileTimemodified(e);return this.downloadFileIfNeeded(e,a,t,n,s,o,r,i).then(function(u){if(u)return 0===u.indexOf("http")?(u+="#moodlemobile-embedded",l.utils.openOnlineFile(u).catch(function(u){if(!l.fileProvider.isAvailable())return Promise.reject(u);return(o?Promise.resolve(o):l.filepoolProvider.getFileStateByUrl(i,a,s)).then(function(o){if(o==d.a.DOWNLOADING)return Promise.reject(l.translate.instant("core.erroropenfiledownloading"));return(o===d.a.NOT_DOWNLOADED?l.downloadFile(a,t,n,s,r,e,i):l.filepoolProvider.getInternalUrlByUrl(i,a)).then(function(e){return l.utils.openFile(e)})})})):l.utils.openFile(u)})},e.prototype.downloadFileIfNeeded=function(e,t,n,o,r,i,l,a){var s=this;return a=a||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(a).then(function(e){return e.checkAndFixPluginfileURL(t)}).then(function(u){if(s.fileProvider.isAvailable()){return(i?Promise.resolve(i):s.filepoolProvider.getFileStateByUrl(a,t,r)).then(function(i){var c=s.appProvider.isWifi(),f=s.appProvider.isOnline();return i==d.a.DOWNLOADED?s.filepoolProvider.getUrlByUrl(a,t,n,o,r,!1,!1,e):f||s.isStateDownloaded(i)?(l&&l({calculating:!0}),s.filepoolProvider.shouldDownloadBeforeOpen(u,e.filesize).then(function(){if(i!=d.a.DOWNLOADING)return s.downloadFile(t,n,o,r,l,e,a)},function(){return c&&s.downloadFile(t,n,o,r,l,e,a),!s.isStateDownloaded(i)||f?u:s.filepoolProvider.getUrlByUrl(a,t,n,o,r,!1,!1,e)})):Promise.reject(s.translate.instant("core.networkerrormsg"))})}return u})},e.prototype.downloadFile=function(e,t,n,o,r,i,l){var a=this;return l=l||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(l).then(function(s){return s.canDownloadFiles()?a.filepoolProvider.downloadUrl(l,e,!1,t,n,o,r,void 0,i).catch(function(t){return a.filepoolProvider.getFileStateByUrl(l,e,o).then(function(n){return a.isStateDownloaded(n)?a.filepoolProvider.getInternalUrlByUrl(l,e):Promise.reject(t)})}):Promise.reject(a.translate.instant("core.cannotdownloadfiles"))})},e.prototype.getFileUrl=function(e){return e.fileurl||e.url},e.prototype.getFileTimemodified=function(e){return e.timemodified||0},e.prototype.isStateDownloaded=function(e){return e===d.a.DOWNLOADED||e===d.a.OUTDATED},e.prototype.shouldOpenInBrowser=function(e){if(!e||!e.isexternalfile||!e.mimetype)return!1;var t=e.mimetype;return-1!=t.indexOf("application/vnd.google-apps.")||"onedrive"==e.repositorytype&&(-1!=t.indexOf("application/vnd.openxmlformats-officedocument")||"text/plain"==t||"document/unknown"==t)},e.prototype.getTotalFilesSize=function(e){return h(this,void 0,void 0,function(){var t,n,o,r,i;return m(this,function(l){switch(l.label){case 0:t=0,n=0,o=e,l.label=1;case 1:return n<o.length?(r=o[n],i=t,[4,this.getFileSize(r)]):[3,4];case 2:t=i+l.sent(),l.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},e.prototype.getFileSize=function(e){return h(this,void 0,void 0,function(){var t,n,o,r,i;return m(this,function(l){switch(l.label){case 0:if(e.filesize)return[2,e.filesize];if(!e.filename||e.name)return[3,7];l.label=1;case 1:return l.trys.push([1,5,,7]),t=this.sitesProvider.getCurrentSiteId(),[4,this.filepoolProvider.getFilePathByUrl(t,e.fileurl)];case 2:return n=l.sent(),[4,this.fileProvider.getFile(n)];case 3:return o=l.sent(),[4,this.fileProvider.getFileObjectFromFileEntry(o)];case 4:return i=l.sent(),[2,i.size];case 5:return l.sent(),[4,this.wsProvider.getRemoteFileSize(e.fileurl)];case 6:if(-1===(r=l.sent()))throw new Error("Couldn't determine file size: "+e.fileurl);return[2,r];case 7:return e.name?[4,this.fileProvider.getFileObjectFromFileEntry(e)]:[3,9];case 8:return i=l.sent(),[2,i.size];case 9:throw new Error("Couldn't determine file size: "+e.fileurl)}})})},e=f([Object(o.A)(),p("design:paramtypes",[l.a,a.a,s.a,i.a,r.c,c.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){}return e.app_id="com.moodle.moodlemobile",e.appname="Moodle Mobile",e.desktopappname="Moodle Desktop",e.versioncode=3810,e.versionname="3.8.1-dev",e.cache_update_frequency_usually=42e4,e.cache_update_frequency_often=12e5,e.cache_update_frequency_sometimes=36e5,e.cache_update_frequency_rarely=432e5,e.default_lang="en",e.languages={ar:"",bg:"",ca:"Catal",cs:"etina",da:"Dansk",de:"Deutsch","de-du":"Deutsch - Du",el:"",en:"English","en-us":"English - United States",es:"Espaol","es-mx":"Espaol - Mxico",eu:"Euskara",fa:"",fi:"Suomi",fr:"Franais",he:"",hi:"",hr:"Hrvatski",hu:"magyar",id:"Indonesian",it:"Italiano",ja:"",km:"",kn:"",ko:"",lt:"Lietuvi",lv:"Latvieu",mr:"",nl:"Nederlands",no:"Norsk - bokml",pl:"Polski",pt:"Portugus - Portugal","pt-br":"Portugus - Brasil",ro:"Romn",ru:"","sr-cr":"","sr-lt":"Srpski",sv:"Svenska",tg:"",tr:"Trke",uk:"",vi:"Vietnamese","zh-cn":"","zh-tw":""},e.wsservice="moodle_mobile_app",e.wsextservice="local_mobile",e.demo_sites={student:{url:"https://school.moodledemo.net",username:"student",password:"moodle"},teacher:{url:"https://school.moodledemo.net",username:"teacher",password:"moodle"}},e.font_sizes=[62.5,75.89,93.75],e.customurlscheme="moodlemobile",e.siteurl="",e.sitename="",e.multisitesdisplay="",e.skipssoconfirmation=!1,e.forcedefaultlanguage=!1,e.privacypolicy="https://moodle.org/mod/page/view.php?id=8148",e.notificoncolor="#f98012",e.statusbarbg=!1,e.statusbarlighttext=!1,e.statusbarbgios="#f98012",e.statusbarlighttextios=!0,e.statusbarbgandroid="#df7310",e.statusbarlighttextandroid=!0,e.statusbarbgremotetheme="#000000",e.statusbarlighttextremotetheme=!0,e.enableanalytics=!1,e.forceColorScheme="",e.compilationtime=1582626358503,e.lastcommit="4f25af26189a9fb70f4f1f1f148d3344fee66410",e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(98),s=n(73),u=n(610),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this,"CoreQuestionBehaviourDelegate",t,n,o)||this;return l.questionDelegate=r,l.defaultHandler=i,l.handlerNameProperty="type",l}return c(t,e),t.prototype.determineNewState=function(e,t,n,o,r){return e=this.questionDelegate.getBehaviourForQuestion(o,e),Promise.resolve(this.executeFunctionOnEnabled(e,"determineNewState",[t,n,o,r]))},t.prototype.handleQuestion=function(e,t,n){return t=this.questionDelegate.getBehaviourForQuestion(n,t),Promise.resolve(this.executeFunctionOnEnabled(t,"handleQuestion",[e,n]))},t.prototype.isBehaviourSupported=function(e){return this.hasHandler(e,!0)},t=d([Object(o.A)(),f("design:paramtypes",[r.a,l.a,i.a,s.a,u.a])],t)}(a.a)},,,,,function(e,t,n){"use strict";function o(e){return l._57(0,[(e()(),l._31(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),l._30(1,1097728,null,3,s.a,[u.a,c.a,l.t,l.V,[2,d.a]],null,null),l._52(335544320,4,{contentLabel:0}),l._52(603979776,5,{_buttons:1}),l._52(603979776,6,{_icons:1}),l._30(5,16384,null,0,f.a,[],null,null),(e()(),l._55(-1,2,["\n        "])),(e()(),l._31(7,0,null,4,2,"ion-note",[["item-end",""]],null,null,null,null,null)),l._30(8,16384,null,0,p.a,[c.a,l.t,l.V],null,null),(e()(),l._55(9,null,["",""])),(e()(),l._55(-1,2,["\n    "]))],null,function(e,t){e(t,9,0,t.component.note)})}function r(e){return l._57(0,[(e()(),l._31(0,0,null,null,16,"ion-card",[],null,null,null,null,null)),l._30(1,16384,null,0,h.a,[c.a,l.t,l.V],null,null),(e()(),l._55(-1,null,["\n    "])),(e()(),l._31(3,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),l._30(4,1097728,null,3,s.a,[u.a,c.a,l.t,l.V,[2,d.a]],null,null),l._52(335544320,1,{contentLabel:0}),l._52(603979776,2,{_buttons:1}),l._52(603979776,3,{_icons:1}),l._30(8,16384,null,0,f.a,[],null,null),(e()(),l._55(-1,2,["\n        "])),(e()(),l._31(10,16777216,null,2,1,"core-format-text",[["fullOnClick","true"]],null,null,null,null,null)),l._30(11,540672,null,0,m.a,[l.t,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a,I.a,R.a,[2,S.a],[2,w.a],[2,A.a],D.a,j.a,k.a,T.a,x.a,l._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],contextLevel:[5,"contextLevel"],contextInstanceId:[6,"contextInstanceId"],courseId:[7,"courseId"]},null),(e()(),l._55(-1,2,["\n    "])),(e()(),l._55(-1,null,["\n    "])),(e()(),l._26(16777216,null,null,1,null,o)),l._30(15,16384,null,0,M.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(e()(),l._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.description,n.component,n.componentId,n.showFull&&"false"!==n.showFull?0:120,"true",n.contextLevel,n.contextInstanceId,n.courseId);e(t,15,0,n.note)},null)}function i(e){return l._57(0,[(e()(),l._26(16777216,null,null,1,null,r)),l._30(1,16384,null,0,M.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,t.component.description)},null)}n.d(t,"a",function(){return U}),t.b=i;var l=n(0),a=n(30),s=n(20),u=n(19),c=n(8),d=n(27),f=n(33),p=n(248),h=n(89),m=n(48),_=n(1),g=n(4),v=n(11),y=n(17),b=n(16),P=n(2),O=n(22),E=n(6),C=n(18),I=n(10),R=n(15),S=n(21),w=n(29),A=n(28),D=n(44),j=n(9),k=n(41),T=n(32),x=n(36),M=n(7),N=n(112),U=l._29({encapsulation:2,styles:[],data:{}});l._27("core-course-module-description",N.a,function(e){return l._57(0,[(e()(),l._31(0,0,null,null,1,"core-course-module-description",[],null,null,null,i,U)),l._30(1,49152,null,0,N.a,[],null,null)],null,null)},{description:"description",note:"note",component:"component",componentId:"componentId",showFull:"showFull",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[])},,function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,0,"img",[["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component.image)})}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-icon",[],null,null,null,s.b,s.a)),a._30(1,704512,null,0,u.a,[a.t,c.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,t.component.icon)},null)}function i(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"p",[],[[2,"padding-top",null]],null,null,null,null)),(e()(),a._55(1,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,n.image||n.icon);e(t,1,0,n.message)})}function l(e){return a._57(0,[(e()(),a._31(0,0,null,null,15,"div",[["class","core-empty-box"]],[[2,"core-empty-box-inline",null]],null,null,null,null)),(e()(),a._55(-1,null,["\n    "])),(e()(),a._31(2,0,null,null,12,"div",[["class","core-empty-box-content"],["padding",""]],null,null,null,null,null)),(e()(),a._55(-1,null,["\n        "])),(e()(),a._26(16777216,null,null,1,null,o)),a._30(5,16384,null,0,d.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n        "])),(e()(),a._26(16777216,null,null,1,null,r)),a._30(8,16384,null,0,d.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n        "])),(e()(),a._26(16777216,null,null,1,null,i)),a._30(11,16384,null,0,d.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n        "])),a._43(null,0),(e()(),a._55(-1,null,["\n    "])),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.image&&!n.icon);e(t,8,0,n.icon);e(t,11,0,n.message)},function(e,t){var n=t.component;e(t,0,0,!n.image&&!n.icon||n.inline)})}n.d(t,"a",function(){return p}),t.b=l;var a=n(0),s=n(80),u=n(75),c=n(8),d=n(7),f=n(114),p=a._29({encapsulation:2,styles:[],data:{}});a._27("core-empty-box",f.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-empty-box",[],null,null,null,l,p)),a._30(1,49152,null,0,f.a,[],null,null)],null,null)},{message:"message",icon:"icon",image:"image",inline:"inline"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(10),s=n(126),u=n(9),c=n(154),d=n(6),f=n(1),p=n(171),h=n(4),m=n(11),_=n(22),g=n(2),v=n(58),y=n(13),b=n(116),P=n(40),O=n(194),E=(n.n(O),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,n,o,r,i,l,a,s,c,d,f,p,h,m,_,g){var v=this;this.sitesProvider=t,this.domUtils=n,this.wsProvider=o,this.translate=r,this.textUtils=i,this.eventsProvider=l,this.appProvider=a,this.utils=s,this.urlUtils=c,this.configProvider=d,this.platform=f,this.initDelegate=p,this.sitePluginsProvider=h,this.location=m,this.alertCtrl=_,this.courseProvider=g,this.isSSOConfirmShown=!1,this.isOpenEditAlertShown=!1,this.waitingForBrowser=!1,this.logger=e.getInstance("CoreLoginHelper"),this.eventsProvider.on(u.a.MAIN_MENU_OPEN,function(){v.pageToLoad&&Date.now()-v.pageToLoad.time<5e3&&(v.loadPageInMainMenu(v.pageToLoad.page,v.pageToLoad.params),delete v.pageToLoad)})}return t=e,e.prototype.acceptSitePolicy=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.write("core_user_agree_site_policy",{}).then(function(e){if(!e.status){if(e.warnings&&e.warnings.length){for(var t in e.warnings){if("alreadyagreed"==e.warnings[t].warningcode)return}return Promise.reject(e.warnings[0])}return Promise.reject(null)}})})},e.prototype.appLaunchedByURL=function(e){var t=this,n=b.a.customurlscheme+"://token=";if(-1==e.indexOf(n))return!1;if(this.appProvider.isSSOAuthenticationOngoing())return!0;this.appProvider.isDesktop()&&this.utils.closeInAppBrowser(!0),this.appProvider.startSSOAuthentication(),this.logger.debug("App launched by URL with an SSO"),e=(e=e.replace(n,"")).replace(/\/?#?\/?$/,"");try{e=atob(e)}catch(e){return this.logger.error("Error decoding parameter received for login SSO"),!1}var o,r;return this.initDelegate.ready().then(function(){return r=t.domUtils.showModalLoading("core.login.authenticating",!0),t.validateBrowserSSOLogin(e)}).then(function(e){return o=e,t.handleSSOLoginAuthentication(o.siteUrl,o.token,o.privateToken,t.getOAuthIdFromParams(e.ssoUrlParams))}).then(function(){o.pageName?t.appProvider.getRootNavController().push(o.pageName,o.pageParams):t.goToSiteInitialPage()}).catch(function(e){e&&(t.treatUserTokenError(o.siteUrl,e),t.sitesProvider.logout())}).finally(function(){r.dismiss(),t.appProvider.finishSSOAuthentication()}),!0},e.prototype.canRequestPasswordReset=function(e){return this.requestPasswordReset(e).then(function(){return!0}).catch(function(e){return 1==e.available||void 0!==e.errorcode&&"invalidrecord"!=e.errorcode&&""!=e.errorcode})},e.prototype.checkLogout=function(){var e=this.appProvider.getRootNavController();!this.appProvider.isSSOAuthenticationOngoing()&&this.sitesProvider.isLoggedIn()&&this.sitesProvider.getCurrentSite().isLoggedOut()&&"CoreLoginReconnectPage"==e.getActive().name&&this.sitesProvider.logout()},e.prototype.confirmAndOpenBrowserForSSOLogin=function(e,t,n,o){var r=this;(this.shouldShowSSOConfirm(t)?this.domUtils.showConfirm(this.translate.instant("core.login.logininsiterequired")):Promise.resolve()).then(function(){r.openBrowserForSSOLogin(e,t,n,o)}).catch(function(){})},e.prototype.forgottenPasswordClicked=function(e,t,n,o){var r=this;if(o&&o.forgottenpasswordurl)this.utils.openInApp(o.forgottenpasswordurl);else{var i=this.domUtils.showModalLoading();this.canRequestPasswordReset(t).then(function(o){o?e.push("CoreLoginForgottenPasswordPage",{siteUrl:t,username:n}):r.openForgottenPassword(t)}).finally(function(){i.dismiss()})}},e.prototype.formatProfileFieldsForSignup=function(e){if(!e)return[];var t={};return e.forEach(function(e){e.signup&&(t[e.categoryid]||(t[e.categoryid]={id:e.categoryid,name:e.categoryname,fields:[]}),t[e.categoryid].fields.push(e))}),Object.keys(t).map(function(e){return t[e]})},e.prototype.getDisabledFeatures=function(e){var t=e&&e.tool_mobile_disabledfeatures;return t?this.textUtils.treatDisabledFeatures(t):""},e.prototype.getErrorMessages=function(e,t,n,o,r,i,l,a){var s={};return e&&(s.required=s.requiredTrue=this.translate.instant(e)),t&&(s.email=this.translate.instant(t)),n&&(s.pattern=this.translate.instant(n)),o&&(s.url=this.translate.instant(o)),r&&(s.minlength=this.translate.instant(r)),i&&(s.maxlength=this.translate.instant(i)),l&&(s.min=this.translate.instant(l)),a&&(s.max=this.translate.instant(a)),s},e.prototype.getLogoutLabel=function(e){var t=(e=e||this.sitesProvider.getCurrentSite()).getStoredConfig();return"core.mainmenu."+(t&&"1"==t.tool_mobile_forcelogout?"logout":"changesite")},e.prototype.getOAuthIdFromParams=function(e){return e&&void 0!==e.oauthsso?Number(e.oauthsso):void 0},e.prototype.getSitePolicy=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getConfig("sitepolicy",!0).then(function(e){return e||Promise.reject(null)},function(){return t.wsProvider.callAjax("auth_email_get_signup_settings",{},{siteUrl:e.getURL()}).then(function(e){return e.sitepolicy?e.sitepolicy:Promise.reject(null)})})})},e.prototype.getFixedSites=function(){return b.a.siteurl},e.prototype.getValidIdentityProviders=function(e,t){var n=this;if(this.isFeatureDisabled("NoDelegate_IdentityProviders",e,t))return[];var o=[],r=this.textUtils.concatenatePaths(e.wwwroot,"auth/oauth2/"),i=this.textUtils.concatenatePaths(e.httpswwwroot,"auth/oauth2/");return e.identityproviders&&e.identityproviders.length&&e.identityproviders.forEach(function(l){var a=n.urlUtils.extractUrlParams(l.url);!l.url||-1==l.url.indexOf(i)&&-1==l.url.indexOf(r)||n.isFeatureDisabled("NoDelegate_IdentityProvider_"+a.id,e,t)||o.push(l)}),o},e.prototype.goToAddSite=function(e,t){var n,o;if(this.isFixedUrlSet()){n="CoreLoginCredentialsPage",o={siteUrl:"string"==typeof b.a.siteurl?b.a.siteurl:b.a.siteurl[0].url}}else n="CoreLoginSitePage",o={showKeyboard:t};return e?this.appProvider.getRootNavController().setRoot(n,o,{animate:!1}):this.appProvider.getRootNavController().push(n,o)},e.prototype.goToNoSitePage=function(e,t,n){return e=e||this.appProvider.getRootNavController(),"CoreLoginSitesPage"==t?e.setRoot(t,n):this.sitesProvider.hasSites().then(function(o){return o?(e.setRoot("CoreLoginSitesPage"),e.push(t,n,{animate:!1})):"CoreLoginSitePage"!=t?(e.setRoot("CoreLoginSitePage"),e.push(t,n,{animate:!1})):e.setRoot(t,n)})},e.prototype.goToSiteInitialPage=function(e,t,n,o,r){return this.openMainMenu(e,t,n,o,r)},e.prototype.handleSSOLoginAuthentication=function(e,t,n,o){return this.sitesProvider.newSite(e,t,n,!0,o)},e.prototype.hasSeveralFixedSites=function(){return b.a.siteurl&&Array.isArray(b.a.siteurl)&&b.a.siteurl.length>1},e.prototype.inAppBrowserLoadStart=function(e){},e.prototype.isEmailSignupDisabled=function(e,t){return this.isFeatureDisabled("CoreLoginEmailSignup",e,t)},e.prototype.isFeatureDisabled=function(e,t,n){void 0===n&&(n=this.getDisabledFeatures(t));var o=new RegExp("(,|^)"+e+"(,|$)","g");return!!n.match(o)},e.prototype.isFixedUrlSet=function(){return Array.isArray(b.a.siteurl)?1==b.a.siteurl.length:!!b.a.siteurl},e.prototype.isForgottenPasswordDisabled=function(e,t){return this.isFeatureDisabled("NoDelegate_ForgottenPassword",e,t)},e.prototype.isSiteLoggedOut=function(e,t){var n=this.sitesProvider.getCurrentSite();return!!n&&(!!n.isLoggedOut()&&(this.eventsProvider.trigger(u.a.SESSION_EXPIRED,{pageName:e,params:t},n.getId()),!0))},e.prototype.isSSOEmbeddedBrowser=function(e){return!!this.appProvider.isLinux()||e==P.a.LOGIN_SSO_INAPP_CODE},e.prototype.isSSOLoginNeeded=function(e){return e==P.a.LOGIN_SSO_CODE||e==P.a.LOGIN_SSO_INAPP_CODE},e.prototype.loadSiteAndPage=function(e,t,n){var o=this,r=this.appProvider.getRootNavController();if(n==P.a.NO_SITE_ID)return r.setRoot(e,t);var i=this.domUtils.showModalLoading();return this.sitesProvider.loadSite(n,e,t).then(function(n){if(n)return o.openMainMenu(r,e,t)}).catch(function(e){return r.setRoot("CoreLoginSitesPage")}).finally(function(){i.dismiss()})},e.prototype.loadPageInMainMenu=function(e,n){this.appProvider.isMainMenuOpen()?e==t.OPEN_COURSE?this.courseProvider.openCourse(void 0,n.course,n):this.eventsProvider.trigger(u.a.LOAD_PAGE_MAIN_MENU,{redirectPage:e,redirectParams:n}):this.pageToLoad={page:e,params:n,time:Date.now()}},e.prototype.openMainMenu=function(e,n,o,r,i){var l=this;return e=e||this.appProvider.getRootNavController(),this.location.replaceState(""),n==t.OPEN_COURSE?e.setRoot("CoreMainMenuPage").finally(function(){return l.courseProvider.openCourse(void 0,o.course,o)}):e.setRoot("CoreMainMenuPage",{redirectPage:n,redirectParams:o,urlToOpen:i},r)},e.prototype.openBrowserForOAuthLogin=function(e,t,n,o,r){if(n=n||e+"/admin/tool/mobile/launch.php",!t||!t.url)return!1;var i=this.urlUtils.extractUrlParams(t.url);if(!i.id)return!1;var l=this.sitesProvider.determineService(e),a=this.prepareForSSOLogin(e,l,n,o,r,{oauthsso:i.id});return this.appProvider.isLinux()?this.utils.openInApp(a):(this.utils.openInBrowser(a),navigator.app&&navigator.app.exitApp()),!0},e.prototype.openBrowserForSSOLogin=function(e,t,n,o,r,i){var l=this.prepareForSSOLogin(e,n,o,r,i);if(this.isSSOEmbeddedBrowser(t)){var a={clearsessioncache:"yes",closebuttoncaption:this.translate.instant("core.login.cancel")};this.utils.openInApp(l,a)}else this.utils.openInBrowser(l),navigator.app&&navigator.app.exitApp()},e.prototype.openChangePassword=function(e,t){var n=this;this.domUtils.showAlert(this.translate.instant("core.notice"),t,void 0,3e3).then(function(t){var o=t.didDismiss.subscribe(function(){o&&o.unsubscribe(),n.utils.openInApp(e+"/login/change_password.php")})})},e.prototype.openForgottenPassword=function(e){this.utils.openInApp(e+"/login/forgot_password.php")},e.prototype.openInAppForEdit=function(e,t,n,o){var r=this;if(e&&e===this.sitesProvider.getCurrentSiteId()){var i=this.sitesProvider.getCurrentSite(),l=i&&i.getURL();i&&l&&(this.isOpenEditAlertShown||this.waitingForBrowser||(this.isOpenEditAlertShown=!0,o&&i.invalidateWsCache(),n&&(n=this.translate.instant(n)+"<br>"+this.translate.instant("core.redirectingtosite")),i.openInAppWithAutoLogin(l+t,void 0,n).then(function(){r.waitingForBrowser=!0}).finally(function(){r.isOpenEditAlertShown=!1})))}},e.prototype.passwordChangeForced=function(e){var t=this.sitesProvider.getCurrentSite();if(t&&e===t.getId()){var n=this.appProvider.getRootNavController(),o=n.getActive();o&&o.component&&"CoreLoginChangePasswordPage"==o.component.name||n.setRoot("CoreLoginChangePasswordPage",{siteId:e})}},e.prototype.prepareForSSOLogin=function(e,t,n,o,r,i){t=t||b.a.wsextservice,n=n||e+"/local/mobile/launch.php";var l=1e3*Math.random(),a=n+"?service="+t;return a+="&passport="+l,a+="&urlscheme="+b.a.customurlscheme,i&&(a=this.urlUtils.addParamsToUrl(a,i)),this.configProvider.set(P.a.LOGIN_LAUNCH_DATA,JSON.stringify({siteUrl:e,passport:l,pageName:o||"",pageParams:r||{},ssoUrlParams:i||{}})),a},e.prototype.redirect=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.isLoggedIn()?n&&n!=this.sitesProvider.getCurrentSiteId()?this.sitePluginsProvider.hasSitePluginsLoaded?(this.appProvider.storeRedirect(n,e,t),this.sitesProvider.logout()):this.sitesProvider.logout().then(function(){return o.loadSiteAndPage(e,t,n)}):(this.loadPageInMainMenu(e,t),Promise.resolve()):n?this.loadSiteAndPage(e,t,n):this.appProvider.getRootNavController().setRoot("CoreLoginSitesPage")},e.prototype.requestPasswordReset=function(e,t,n){var o={};return t&&(o.username=t),n&&(o.email=n),this.wsProvider.callAjax("core_auth_request_password_reset",o,{siteUrl:e})},e.prototype.sessionExpired=function(e){var t=this,n=e&&e.siteId,o=this.sitesProvider.getCurrentSite(),r=o&&o.getURL();o&&r&&(n&&n!==o.getId()||this.sitesProvider.checkSite(r).then(function(i){if(i.warning&&t.domUtils.showErrorModal(i.warning,!0,4e3),t.isSSOLoginNeeded(i.code))t.appProvider.isSSOAuthenticationOngoing()||t.isSSOConfirmShown||t.waitingForBrowser||(t.isSSOConfirmShown=!0,(t.shouldShowSSOConfirm(i.code)?t.domUtils.showConfirm(t.translate.instant("core.login."+(o.isLoggedOut()?"loggedoutssodescription":"reconnectssodescription"))):Promise.resolve()).then(function(){t.waitingForBrowser=!0,t.sitesProvider.unsetCurrentSite(),t.openBrowserForSSOLogin(i.siteUrl,i.code,i.service,i.config&&i.config.launchurl,e.pageName,e.params)}).catch(function(){t.sitesProvider.logout()}).finally(function(){t.isSSOConfirmShown=!1}));else{if(o.isOAuth()){var l=t.getValidIdentityProviders(i.config).find(function(e){return t.urlUtils.extractUrlParams(e.url).id==o.getOAuthId()});if(l){if(!t.appProvider.isSSOAuthenticationOngoing()&&!t.isSSOConfirmShown&&!t.waitingForBrowser){t.isSSOConfirmShown=!0;var a=t.translate.instant("core.login."+(o.isLoggedOut()?"loggedoutssodescription":"reconnectssodescription"));t.domUtils.showConfirm(a).then(function(){t.waitingForBrowser=!0,t.sitesProvider.unsetCurrentSite(),t.openBrowserForOAuthLogin(r,l,i.config.launchurl,e.pageName,e.params)}).catch(function(){t.sitesProvider.logout()}).finally(function(){t.isSSOConfirmShown=!1})}return}}var s=o.getInfo();if(void 0!==s&&void 0!==s.username){var u=t.appProvider.getRootNavController(),c=u.getActive();if(c&&c.component&&"CoreLoginReconnectPage"==c.component.name)return;u.setRoot("CoreLoginReconnectPage",{infoSiteUrl:s.siteurl,siteUrl:i.siteUrl,siteId:n,pageName:e.pageName,pageParams:e.params,siteConfig:i.config})}}}).catch(function(e){o.isLoggedOut()&&(t.domUtils.showErrorModalDefault(e,"core.networkerrormsg",!0),t.sitesProvider.logout())}))},e.prototype.shouldShowSSOConfirm=function(e){return!(this.isSSOEmbeddedBrowser(e)||b.a.skipssoconfirmation&&"false"!==String(b.a.skipssoconfirmation))},e.prototype.showWorkplaceNoticeModal=function(e){var t;this.platform.is("android")?t="market://details?id=com.moodle.workplace":this.platform.is("ios")&&(t="itms-apps://itunes.apple.com/app/id1470929705"),this.showDownloadAppNoticeModal(e,t)},e.prototype.showMoodleAppNoticeModal=function(e){var t;this.appProvider.isWindows()?t="https://download.moodle.org/desktop/download.php?platform=windows":this.appProvider.isLinux()?t="https://download.moodle.org/desktop/download.php?platform=linux&arch="+(this.appProvider.is64Bits()?"64":"32"):this.appProvider.isMac()?t="itms-apps://itunes.apple.com/app/id1255924440":this.platform.is("android")?t="market://details?id=com.moodle.moodlemobile":this.platform.is("ios")&&(t="itms-apps://itunes.apple.com/app/id633359593"),this.showDownloadAppNoticeModal(e,t)},e.prototype.showDownloadAppNoticeModal=function(e,t){var n=this,o=[{text:this.translate.instant("core.ok"),role:"cancel"}];t&&o.push({text:this.translate.instant("core.download"),handler:function(){n.utils.openInBrowser(t)}});var r=this.alertCtrl.create({message:e,buttons:o});r.present().then(function(){if(!(n.platform.is("android")||n.platform.is("ios"))){var e=r.pageRef().nativeElement.querySelector(".alert-message");n.domUtils.treatAnchors(e)}})},e.prototype.showNotConfirmedModal=function(e,t,n,o){var r,i=this,l=this.translate.instant("core.login.mustconfirm");r=t?this.translate.instant("core.login.emailconfirmsent",{$a:t}):this.translate.instant("core.login.emailconfirmsentnoemail");var a;if(n&&o){var s=this.domUtils.showModalLoading();a=this.wsProvider.callAjax("core_auth_resend_confirmation_email",{},{siteUrl:e}).catch(function(e){return Promise.resolve(e&&"invalidparameter"===e.errorcode)}).finally(function(){s.dismiss()})}else a=Promise.resolve(!1);a.then(function(t){if(t){var a=i.translate.instant("core.login.resendemail"),s=i.translate.instant("core.close");i.domUtils.showConfirm(r,l,a,s).then(function(){var t=i.domUtils.showModalLoading("core.sending",!0);i.wsProvider.callAjax("core_auth_resend_confirmation_email",{username:n,password:o},{siteUrl:e}).then(function(e){var t=i.translate.instant("core.login.emailconfirmsentsuccess");i.domUtils.showAlert(i.translate.instant("core.success"),t)}).catch(function(e){i.domUtils.showErrorModal(e)}).finally(function(){t.dismiss()})}).catch(function(){})}else i.domUtils.showAlert(l,r)})},e.prototype.sitePolicyNotAgreed=function(e){if((e=e||this.sitesProvider.getCurrentSiteId())&&e==this.sitesProvider.getCurrentSiteId()&&this.sitesProvider.wsAvailableInCurrentSite("core_user_agree_site_policy")){var t=this.appProvider.getRootNavController(),n=t.getActive();n&&n.component&&"CoreLoginSitePolicyPage"==n.component.name||t.setRoot("CoreLoginSitePolicyPage",{siteId:e})}},e.prototype.treatUserTokenError=function(e,t,n,o){"forcepasswordchangenotice"==t.errorcode?this.openChangePassword(e,this.textUtils.getErrorMessageFromError(t)):"usernotconfirmed"==t.errorcode?this.showNotConfirmedModal(e,void 0,n,o):"connecttomoodleapp"==t.errorcode?this.showMoodleAppNoticeModal(this.textUtils.getErrorMessageFromError(t)):"connecttoworkplaceapp"==t.errorcode?this.showWorkplaceNoticeModal(this.textUtils.getErrorMessageFromError(t)):this.domUtils.showErrorModal(t)},e.prototype.validateBrowserSSOLogin=function(e){var t=this,n=e.split(":::");return this.configProvider.get(P.a.LOGIN_LAUNCH_DATA).then(function(e){if(null===(e=t.textUtils.parseJSON(e,null)))return Promise.reject(null);var o=e.passport,r=e.siteUrl;t.configProvider.delete(P.a.LOGIN_LAUNCH_DATA);var i=O.Md5.hashAsciiStr(r+o);return i!=n[0]&&(r=-1!=r.indexOf("https://")?r.replace("https://","http://"):r.replace("http://","https://"),i=O.Md5.hashAsciiStr(r+o)),i==n[0]?(t.logger.debug("Signature validated"),{siteUrl:r,token:n[1],privateToken:n[2],pageName:e.pageName,pageParams:e.pageParams,ssoUrlParams:e.ssoUrlParams}):(t.logger.debug("Invalid signature in the URL request yours: "+n[0]+" mine: "+i+" for passport "+o),Promise.reject(t.translate.instant("core.unexpectederror")))})},e.OPEN_COURSE="open_course",e=t=E([Object(o.A)(),C("design:paramtypes",[d.a,f.a,h.a,p.a,l.c,m.a,u.a,a.a,g.a,_.a,s.a,i.v,c.a,v.a,r.f,i.b,y.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(10),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},u=function(){function e(e){this.TABLE_NAME="core_config",this.tableSchema={name:"CoreConfigProvider",version:1,tables:[{name:this.TABLE_NAME,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value"}]}]},this.appDB=e.getDB(),this.dbReady=e.createTablesFromSchema(this.tableSchema).catch(function(){})}return e.prototype.delete=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.deleteRecords(this.TABLE_NAME,{name:e})]}})})},e.prototype.get=function(e,t){return a(this,void 0,void 0,function(){var n,o;return s(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.appDB.getRecord(this.TABLE_NAME,{name:e})];case 3:return n=r.sent(),[2,n.value];case 4:if(o=r.sent(),void 0!==t)return[2,t];throw o;case 5:return[2]}})})},e.prototype.set=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.insertRecord(this.TABLE_NAME,{name:e,value:t})]}})})},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(2),s=n(98),u=n(592),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this,"AddonModDataFieldsDelegate",t,n,o)||this;return l.utils=r,l.defaultHandler=i,l.handlerNameProperty="type",l}return c(t,e),t.prototype.getComponentForField=function(e,t){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getComponent",[e,t]))},t.prototype.getFieldSearchData=function(e,t){return this.executeFunctionOnEnabled(e.type,"getFieldSearchData",[e,t])},t.prototype.getFieldEditData=function(e,t,n){return this.executeFunctionOnEnabled(e.type,"getFieldEditData",[e,t,n])},t.prototype.getFieldEditFiles=function(e,t,n){return this.executeFunctionOnEnabled(e.type,"getFieldEditFiles",[e,t,n])},t.prototype.getFieldsNotifications=function(e,t){return this.executeFunctionOnEnabled(e.type,"getFieldsNotifications",[e,t])},t.prototype.hasFiles=function(e){return this.hasFunction(e.type,"getFieldEditFiles")},t.prototype.hasFieldDataChanged=function(e,t,n){return Promise.resolve(this.executeFunctionOnEnabled(e.type,"hasFieldDataChanged",[e,t,n])).then(function(e){return e?Promise.reject(null):Promise.resolve()})},t.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},t.prototype.overrideData=function(e,t,n,o){return t=t||{},n?this.executeFunctionOnEnabled(e.type,"overrideData",[t,n,o]):t},t=d([Object(o.A)(),f("design:paramtypes",[r.a,l.a,i.a,a.a,u.a])],t)}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(24),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.sitesProvider=t,this.timeUtils=n,this.utils=o,this.QUESTION_TABLE="questions",this.QUESTION_ANSWERS_TABLE="question_answers",this.siteSchema={name:"CoreQuestionProvider",version:1,tables:[{name:this.QUESTION_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"attemptid",type:"INTEGER",notNull:!0},{name:"slot",type:"INTEGER",notNull:!0},{name:"componentid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"number",type:"INTEGER"},{name:"state",type:"TEXT"}],primaryKeys:["component","attemptid","slot"]},{name:this.QUESTION_ANSWERS_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"attemptid",type:"INTEGER",notNull:!0},{name:"name",type:"TEXT",notNull:!0},{name:"componentid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"questionslot",type:"INTEGER"},{name:"value",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["component","attemptid","name"]}]},this.QUESTION_PREFIX_REGEX=/q\d+:(\d+)_/,this.STATES={todo:{name:"todo",class:"core-question-notyetanswered",status:"notyetanswered",active:!0,finished:!1},invalid:{name:"invalid",class:"core-question-invalidanswer",status:"invalidanswer",active:!0,finished:!1},complete:{name:"complete",class:"core-question-answersaved",status:"answersaved",active:!0,finished:!1},needsgrading:{name:"needsgrading",class:"core-question-requiresgrading",status:"requiresgrading",active:!1,finished:!0},finished:{name:"finished",class:"core-question-complete",status:"complete",active:!1,finished:!0},gaveup:{name:"gaveup",class:"core-question-notanswered",status:"notanswered",active:!1,finished:!0},gradedwrong:{name:"gradedwrong",class:"core-question-incorrect",status:"incorrect",active:!1,finished:!0},gradedpartial:{name:"gradedpartial",class:"core-question-partiallycorrect",status:"partiallycorrect",active:!1,finished:!0},gradedright:{name:"gradedright",class:"core-question-correct",status:"correct",active:!1,finished:!0},mangrwrong:{name:"mangrwrong",class:"core-question-incorrect",status:"incorrect",active:!1,finished:!0},mangrpartial:{name:"mangrpartial",class:"core-question-partiallycorrect",status:"partiallycorrect",active:!1,finished:!0},mangrright:{name:"mangrright",class:"core-question-correct",status:"correct",active:!1,finished:!0},cannotdeterminestatus:{name:"cannotdeterminestatus",class:"core-question-unknown",status:"cannotdeterminestatus",active:!0,finished:!1}},this.logger=e.getInstance("CoreQuestionProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e.prototype.compareAllAnswers=function(e,t){var n=this.utils.mergeArraysWithoutDuplicates(Object.keys(e),Object.keys(t));for(var o in n){var r=n[o];if(!this.isExtraAnswer(r[0])&&!this.utils.sameAtKeyMissingIsBlank(e,t,r))return!1}return!0},e.prototype.convertAnswersArrayToObject=function(e,t){var n=this,o={};return e.forEach(function(e){if(t){var r=n.removeQuestionPrefix(e.name);o[r]=e.value}else o[e.name]=e.value}),o},e.prototype.getAnswer=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:t,name:n})})},e.prototype.getAttemptAnswers=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:t})})},e.prototype.getAttemptQuestions=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(o.QUESTION_TABLE,{component:e,attemptid:t})})},e.prototype.getBasicAnswers=function(e){var t={};for(var n in e)this.isExtraAnswer(n)||(t[n]=e[n]);return t},e.prototype.getBasicAnswersFromArray=function(e){var t=this,n=[];return e.forEach(function(e){t.isExtraAnswer(e.name)&&n.push(e)}),n},e.prototype.getQuestion=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(r.QUESTION_TABLE,{component:e,attemptid:t,slot:n})})},e.prototype.getQuestionAnswers=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecords(i.QUESTION_ANSWERS_TABLE,{component:e,attemptid:t,questionslot:n}).then(function(e){return o?i.getBasicAnswersFromArray(e):e})})},e.prototype.getQuestionSlotFromName=function(e){if(e){var t=e.match(this.QUESTION_PREFIX_REGEX);if(t&&t[1])return parseInt(t[1],10)}return-1},e.prototype.getState=function(e){return this.STATES[e||"cannotdeterminestatus"]},e.prototype.isExtraAnswer=function(e){return"-"==(e=this.removeQuestionPrefix(e))[0]||":"==e[0]},e.prototype.removeAttemptAnswers=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:t})})},e.prototype.removeAttemptQuestions=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(o.QUESTION_TABLE,{component:e,attemptid:t})})},e.prototype.removeAnswer=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:t,name:n})})},e.prototype.removeQuestion=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(r.QUESTION_TABLE,{component:e,attemptid:t,slot:n})})},e.prototype.removeQuestionAnswers=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:t,questionslot:n})})},e.prototype.removeQuestionPrefix=function(e){return e?e.replace(this.QUESTION_PREFIX_REGEX,""):""},e.prototype.saveAnswers=function(e,t,n,o,r,i,l){var a=this;return i=i||this.timeUtils.timestamp(),this.sitesProvider.getSite(l).then(function(l){var s=l.getDb(),u=[];for(var c in r){var d=r[c],f={component:e,componentid:t,attemptid:n,userid:o,questionslot:a.getQuestionSlotFromName(c),name:c,value:d,timemodified:i};u.push(s.insertRecord(a.QUESTION_ANSWERS_TABLE,f))}return Promise.all(u)})},e.prototype.saveQuestion=function(e,t,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(l).then(function(l){var s={component:e,componentid:t,attemptid:n,userid:o,number:r.number,slot:r.slot,state:i};return l.getDb().insertRecord(a.QUESTION_TABLE,s)})},e.COMPONENT="mmQuestion",e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(2),s=n(98),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,"AddonModQuizAccessRulesDelegate",t,n,o)||this;return i.utils=r,i.handlerNameProperty="ruleName",i}return u(t,e),t.prototype.getAccessRuleHandler=function(e){return this.getHandler(e,!0)},t.prototype.getFixedPreflightData=function(e,t,n,o,r,i){var l=this,a=[];return(e=e||[]).forEach(function(e){a.push(Promise.resolve(l.executeFunctionOnEnabled(e,"getFixedPreflightData",[t,n,o,r,i])))}),this.utils.allPromises(a).catch(function(){})},t.prototype.getPreflightComponent=function(e,t){return Promise.resolve(this.executeFunctionOnEnabled(e,"getPreflightComponent",[t]))},t.prototype.isAccessRuleSupported=function(e){return this.hasHandler(e,!0)},t.prototype.isPreflightCheckRequired=function(e,t,n,o,r){var i=this,l=[],a=!1;return(e=e||[]).forEach(function(e){l.push(i.isPreflightCheckRequiredForRule(e,t,n,o,r).then(function(e){e&&(a=!0)}))}),this.utils.allPromises(l).then(function(){return a}).catch(function(){return a})},t.prototype.isPreflightCheckRequiredForRule=function(e,t,n,o,r){return Promise.resolve(this.executeFunctionOnEnabled(e,"isPreflightCheckRequired",[t,n,o,r]))},t.prototype.notifyPreflightCheckPassed=function(e,t,n,o,r,i){var l=this,a=[];return(e=e||[]).forEach(function(e){a.push(Promise.resolve(l.executeFunctionOnEnabled(e,"notifyPreflightCheckPassed",[t,n,o,r,i])))}),this.utils.allPromises(a).catch(function(){})},t.prototype.notifyPreflightCheckFailed=function(e,t,n,o,r,i){var l=this,a=[];return(e=e||[]).forEach(function(e){a.push(Promise.resolve(l.executeFunctionOnEnabled(e,"notifyPreflightCheckFailed",[t,n,o,r,i])))}),this.utils.allPromises(a).catch(function(){})},t.prototype.shouldShowTimeLeft=function(e,t,n,o){e=e||[];for(var r in e){if(this.executeFunctionOnEnabled(e[r],"shouldShowTimeLeft",[t,n,o]))return!0}return!1},t=c([Object(o.A)(),d("design:paramtypes",[r.a,l.a,i.a,a.a])],t)}(s.a)},,function(e,t){e.exports=require("electron")},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="CoreFilterDefaultHandler",this.filterName="default"}return e.prototype.filter=function(e,t,n,o){return e},e.prototype.handleHtml=function(e,t,n,o,r,i,l){},e.prototype.isEnabled=function(){return!0},e.prototype.shouldBeApplied=function(e,t){return!0},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(57),i=n(6),l=n(1),a=n(11),s=n(24),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,n,o,r,i){this.sitesProvider=n,this.textUtils=o,this.fileProvider=r,this.timeUtils=i,this.siteSchema={name:"AddonModAssignOfflineProvider",version:1,tables:[{name:t.SUBMISSIONS_TABLE,columns:[{name:"assignid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"plugindata",type:"TEXT"},{name:"onlinetimemodified",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"submitted",type:"INTEGER"},{name:"submissionstatement",type:"INTEGER"}],primaryKeys:["assignid","userid"]},{name:t.SUBMISSIONS_GRADES_TABLE,columns:[{name:"assignid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"grade",type:"REAL"},{name:"attemptnumber",type:"INTEGER"},{name:"addattempt",type:"INTEGER"},{name:"workflowstate",type:"TEXT"},{name:"applytoall",type:"INTEGER"},{name:"outcomes",type:"TEXT"},{name:"plugindata",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["assignid","userid"]}]},this.logger=e.getInstance("AddonModAssignOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteSubmission=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){return n=n||o.getUserId(),o.getDb().deleteRecords(t.SUBMISSIONS_TABLE,{assignid:e,userid:n})})},e.prototype.deleteSubmissionGrade=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){return n=n||o.getUserId(),o.getDb().deleteRecords(t.SUBMISSIONS_GRADES_TABLE,{assignid:e,userid:n})})},e.prototype.getAllAssigns=function(e){var t=[];return t.push(this.getAllSubmissions(e)),t.push(this.getAllSubmissionsGrade(e)),Promise.all(t).then(function(e){return e=[].concat.apply([],e),e=e.map(function(e){return e.assignid}),e=e.filter(function(t,n){return e.indexOf(t)==n})})},e.prototype.getAllSubmissions=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(t.SUBMISSIONS_TABLE)}).then(function(e){return e.forEach(function(e){e.plugindata=n.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getAllSubmissionsGrade=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(t.SUBMISSIONS_GRADES_TABLE)}).then(function(e){return e.forEach(function(e){e.outcomes=n.textUtils.parseJSON(e.outcomes,{}),e.plugindata=n.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getAssignSubmissions=function(e,n){var o=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getRecords(t.SUBMISSIONS_TABLE,{assignid:e})}).then(function(e){return e.forEach(function(e){e.plugindata=o.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getAssignSubmissionsGrade=function(e,n){var o=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getRecords(t.SUBMISSIONS_GRADES_TABLE,{assignid:e})}).then(function(e){return e.forEach(function(e){e.outcomes=o.textUtils.parseJSON(e.outcomes,{}),e.plugindata=o.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getSubmission=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return n=n||o.getUserId(),o.getDb().getRecord(t.SUBMISSIONS_TABLE,{assignid:e,userid:n})}).then(function(e){return e.plugindata=r.textUtils.parseJSON(e.plugindata,{}),e})},e.prototype.getSubmissionFolder=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();var r=o.fileProvider.getSiteFolder(n.getId());return o.textUtils.concatenatePaths(r,"offlineassign/"+e+"/"+t)})},e.prototype.getSubmissionGrade=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return n=n||o.getUserId(),o.getDb().getRecord(t.SUBMISSIONS_GRADES_TABLE,{assignid:e,userid:n})}).then(function(e){return e.outcomes=r.textUtils.parseJSON(e.outcomes,{}),e.plugindata=r.textUtils.parseJSON(e.plugindata,{}),e})},e.prototype.getSubmissionPluginFolder=function(e,t,n,o){var r=this;return this.getSubmissionFolder(e,n,o).then(function(e){return r.textUtils.concatenatePaths(e,t)})},e.prototype.hasAssignOfflineData=function(e,t){var n=[];return n.push(this.getAssignSubmissions(e,t)),n.push(this.getAssignSubmissionsGrade(e,t)),Promise.all(n).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n&&n.length)return!0}return!1}).catch(function(){return!1})},e.prototype.markSubmitted=function(e,n,o,r,i,l,a){var s=this;return this.sitesProvider.getSite(a).then(function(a){return l=l||a.getUserId(),s.getSubmission(e,l,a.getId()).catch(function(){var t=s.timeUtils.timestamp();return{assignid:e,courseid:n,userid:l,onlinetimemodified:i,timecreated:t,timemodified:t}}).then(function(e){return e.submitted=o?1:0,e.submissionstatement=r?1:0,e.plugindata=e.plugindata?JSON.stringify(e.plugindata):"{}",a.getDb().insertRecord(t.SUBMISSIONS_TABLE,e)})})},e.prototype.saveSubmission=function(e,n,o,r,i,l,a){var s=this;return this.sitesProvider.getSite(a).then(function(a){l=l||a.getUserId();var u=s.timeUtils.timestamp(),c={assignid:e,courseid:n,plugindata:o?JSON.stringify(o):"{}",userid:l,submitted:i?1:0,timecreated:u,timemodified:u,onlinetimemodified:r};return a.getDb().insertRecord(t.SUBMISSIONS_TABLE,c)})},e.prototype.submitGradingForm=function(e,n,o,r,i,l,a,s,u,c,d){var f=this;return this.sitesProvider.getSite(d).then(function(d){var p=f.timeUtils.timestamp(),h={assignid:e,userid:n,courseid:o,grade:r,attemptnumber:i,addattempt:l?1:0,workflowstate:a,applytoall:s?1:0,outcomes:u?JSON.stringify(u):"{}",plugindata:c?JSON.stringify(c):"{}",timemodified:p};return d.getDb().insertRecord(t.SUBMISSIONS_GRADES_TABLE,h)})},e.SUBMISSIONS_TABLE="addon_mod_assign_submissions",e.SUBMISSIONS_GRADES_TABLE="addon_mod_assign_submissions_grading",e=t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,a.a,r.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(18),s=n(10),u=n(65),c=n(297),d=n(53),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.sitesProvider=t,this.utils=n,this.filepoolProvider=o,this.feedbackOffline=r,this.appProvider=i,this.logHelper=l,this.ROOT_CACHE_KEY=this.ROOT_CACHE_KEY+"",this.logger=e.getInstance("AddonModFeedbackProvider")}return t=e,e.prototype.checkDependencyItem=function(e,t){var n=e.find(function(e){return e.id==t.dependitem});if(!n)return!0;switch(n.typ){case"label":return!1;case"multichoice":case"multichoicerated":return this.compareDependItemMultichoice(n,t.dependvalue)}return t.dependvalue==n.rawValue},e.prototype.compareDependItemMultichoice=function(e,n){var o,r,i=e.presentation.split(t.MULTICHOICE_TYPE_SEP)||[],l=i.length>0&&i[0]?i[0]:"r";r=(r=(r=i[1]||"").split(t.MULTICHOICE_ADJUST_SEP)[0]||"").split(t.LINE_SEP)||[],"c"===l?void 0===e.rawValue?o=[""]:(e.rawValue=""+e.rawValue,o=e.rawValue.split(t.LINE_SEP)):o=[e.rawValue];for(var a=0;a<r.length;a++)for(var s in o)if(o[s]==a+1){var u=r[a];if("multichoicerated"==e.typ&&(u=u.split(t.MULTICHOICERATED_VALUE_SEP)[1]||""),u.trim()==n)return!0;if(1==o.length)return!1}return!1},e.prototype.fillValues=function(e,n,o,r,i){var l=this;return this.getCurrentValues(e,o,r,i).then(function(e){var t={};e.forEach(function(e){t[e.item]=e.value}),n.forEach(function(e){e.hasvalue&&void 0!==t[e.id]&&(e.rawValue=t[e.id])})}).catch(function(){}).then(function(){return l.feedbackOffline.getFeedbackResponses(e,i).then(function(e){var o={};return(e=e.reduce(function(e,t){var n=l.utils.objectToArrayOfObjects(t.responses,"id","value");return e.concat(n)},[]).map(function(e){var t=e.id.split("_");return e.typ=t[0],e.item=parseInt(t[1],0),e})).forEach(function(e){void 0===o[e.item]&&(o[e.item]=[]),o[e.item].push(e.value)}),n.forEach(function(e){e.hasvalue&&void 0!==o[e.id]&&("multichoice"==e.typ&&"c"==e.presentation.split(t.MULTICHOICE_TYPE_SEP)[0]?(o[e.id]=o[e.id].filter(function(e){return e>0}),e.rawValue=o[e.id].join(t.LINE_SEP)):e.rawValue=o[e.id][0])}),n})}).catch(function(){return n})},e.prototype.getAllNonRespondents=function(e,t,n,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),void 0===r&&(r={page:0,users:[]}),this.getNonRespondents(e,t,r.page,n,o).then(function(l){return r.users.length<l.total&&(r.users=r.users.concat(l.users)),r.users.length<l.total?(r.page++,i.getAllNonRespondents(e,t,n,o,r)):(r.total=l.total,r)})},e.prototype.getAllResponsesAnalysis=function(e,t,n,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),void 0===r&&(r={page:0,attempts:[],anonattempts:[]}),this.getResponsesAnalysis(e,t,r.page,n,o).then(function(l){return r.anonattempts.length<l.totalanonattempts&&(r.anonattempts=r.anonattempts.concat(l.anonattempts)),r.attempts.length<l.totalattempts&&(r.attempts=r.attempts.concat(l.attempts)),r.anonattempts.length<l.totalanonattempts||r.attempts.length<l.totalattempts?(r.page++,i.getAllResponsesAnalysis(e,t,n,o,r)):(r.totalattempts=l.totalattempts,r.totalanonattempts=l.totalanonattempts,r)})},e.prototype.getAnalysis=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getAnalysisDataCacheKey(e,t)};return t&&(i.groupid=t),n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_get_analysis",i,l)})},e.prototype.getAnalysisDataCacheKey=function(e,t){return void 0===t&&(t=0),this.getAnalysisDataPrefixCacheKey(e)+t},e.prototype.getAnalysisDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":analysis:"},e.prototype.getAttempt=function(e,t,n,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),void 0===r&&(r={page:0,attemptsLoaded:0,anonAttemptsLoaded:0}),this.getResponsesAnalysis(e,0,r.page,n,o).then(function(l){var a;return(a=l.attempts.find(function(e){return t==e.id}))?a:(a=l.anonattempts.find(function(e){return t==e.id}))?a:(r.anonAttemptsLoaded<l.totalanonattempts&&(r.anonAttemptsLoaded+=l.anonattempts.length),r.attemptsLoaded<l.totalattempts&&(r.attemptsLoaded+=l.attempts.length),r.anonAttemptsLoaded<l.totalanonattempts||r.attemptsLoaded<l.totalattempts?(r.page++,i.getAttempt(e,t,n,o,r)):Promise.reject(null))})},e.prototype.getCompletedDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":completed:"},e.prototype.getCurrentCompletedTimeModified=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={feedbackid:e},i={cacheKey:o.getCurrentCompletedTimeModifiedDataCacheKey(e)};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_feedback_get_current_completed_tmp",r,i).then(function(e){return e&&void 0!==e.feedback&&void 0!==e.feedback.timemodified?e.feedback.timemodified:0}).catch(function(){return 0})})},e.prototype.getCurrentCompletedTimeModifiedDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":completedtime:"},e.prototype.getCurrentValues=function(e,t,n,o){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getCurrentValuesDataCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_get_unfinished_responses",i,l).then(function(e){return e&&void 0!==e.responses?0==e.responses.length?o.read("mod_feedback_get_finished_responses",i,l).then(function(e){return e&&void 0!==e.responses?e.responses:Promise.reject(null)}):e.responses:Promise.reject(null)})})},e.prototype.getCurrentValuesDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":currentvalues"},e.prototype.getFeedbackAccessInformation=function(e,t,n,o){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getFeedbackAccessInformationDataCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_get_feedback_access_information",i,l)})},e.prototype.getFeedbackAccessInformationDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":access"},e.prototype.getFeedbackCacheKey=function(e){return this.ROOT_CACHE_KEY+"feedback:"+e},e.prototype.getFeedbackDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getFeedbackDataByKey=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(o).then(function(o){var a={courseids:[e]},s={cacheKey:l.getFeedbackCacheKey(e),updateFrequency:d.a.FREQUENCY_RARELY};return r?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_feedback_get_feedbacks_by_courses",a,s).then(function(e){if(e&&e.feedbacks){var o=e.feedbacks.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getFeedback=function(e,t,n,o,r){return this.getFeedbackDataByKey(e,"coursemodule",t,n,o,r)},e.prototype.getFeedbackById=function(e,t,n,o,r){return this.getFeedbackDataByKey(e,"id",t,n,o,r)},e.prototype.getItems=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={feedbackid:e},i={cacheKey:o.getItemsDataCacheKey(e),updateFrequency:d.a.FREQUENCY_SOMETIMES};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_feedback_get_items",r,i)})},e.prototype.getItemsDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":items"},e.prototype.getNonRespondents=function(e,t,n,o,r){var i=this;return void 0===t&&(t=0),void 0===n&&(n=0),this.sitesProvider.getSite(r).then(function(r){var l={feedbackid:e,groupid:t,page:n},a={cacheKey:i.getNonRespondentsDataCacheKey(e,t)};return o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_feedback_get_non_respondents",l,a)})},e.prototype.getNonRespondentsDataCacheKey=function(e,t){return void 0===t&&(t=0),this.getNonRespondentsDataPrefixCacheKey(e)+t},e.prototype.getNonRespondentsDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":nonrespondents:"},e.prototype.getPageItems=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_feedback_get_page_items",{feedbackid:e,page:t})})},e.prototype.getPageItemsWithValues=function(e,t,n,o,r){var i=this;return void 0===n&&(n=!1),void 0===o&&(o=!1),r=r||this.sitesProvider.getCurrentSiteId(),this.getPageItems(e,t,r).then(function(t){return i.fillValues(e,t.items,n,o,r).then(function(e){return t.items=e,t})}).catch(function(){return i.getItems(e,!1,r).then(function(l){return i.fillValues(e,l.items,n,o,r).then(function(e){var n=0,o=[],r=e.filter(function(e){return!(n>t)&&("pagebreak"==e.typ?(n++,!1):n<t?(o.push(e),!1):e&&e.dependitem>0&&o.length>0?i.checkDependencyItem(o,e):e)});return l.hasprevpage=t>0,l.hasnextpage=n>t,l.items=r,l})})})},e.prototype.getPageJumpTo=function(e,t,n,o){var r=this;return this.getPageItemsWithValues(e,t,!0,!1,o).then(function(i){return i.items.length>0?t:!!(1==n&&i.hasnextpage||-1==n&&i.hasprevpage)&&r.getPageJumpTo(e,t+n,n,o)})},e.prototype.getResponsesAnalysis=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={feedbackid:e,groupid:t||0,page:n||0},a={cacheKey:i.getResponsesAnalysisDataCacheKey(e,t)};return o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_feedback_get_responses_analysis",l,a)})},e.prototype.getResponsesAnalysisDataCacheKey=function(e,t){return void 0===t&&(t=0),this.getResponsesAnalysisDataPrefixCacheKey(e)+t},e.prototype.getResponsesAnalysisDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":responsesanalysis:"},e.prototype.getResumePage=function(e,t,n,o){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getResumePageDataCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_launch_feedback",i,l).then(function(e){return e&&void 0!==e.gopage?e.gopage>0?e.gopage:0:Promise.reject(null)})})},e.prototype.getResumePageDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":launch"},e.prototype.invalidateAllFeedbackData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getFeedbackDataPrefixCacheKey(e))})},e.prototype.invalidateAnalysisData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getAnalysisDataPrefixCacheKey(e))})},e.prototype.invalidateContent=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.getFeedback(t,e,n).then(function(e){var r=[];return r.push(o.invalidateFeedbackData(t,n)),r.push(o.invalidateAllFeedbackData(e.id,n)),Promise.all(r)})),r.push(this.invalidateFiles(e,n)),this.utils.allPromises(r)},e.prototype.invalidateCurrentValuesData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCurrentValuesDataCacheKey(e))})},e.prototype.invalidateFeedbackAccessInformationData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getFeedbackAccessInformationDataCacheKey(e))})},e.prototype.invalidateFeedbackData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getFeedbackCacheKey(e))})},e.prototype.invalidateFiles=function(e,n){return this.filepoolProvider.invalidateFilesByComponent(n,t.COMPONENT,e)},e.prototype.invalidateNonRespondentsData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getNonRespondentsDataPrefixCacheKey(e))})},e.prototype.invalidateResponsesAnalysisData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getResponsesAnalysisDataPrefixCacheKey(e))})},e.prototype.invalidateResumePageData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getResumePageDataCacheKey(e))})},e.prototype.isCompleted=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={feedbackid:e},i={cacheKey:o.getCompletedDataCacheKey(e)};return t&&(i.getFromCache=!1,i.emergencyCache=!1),o.utils.promiseWorks(n.read("mod_feedback_get_last_completed",r,i))})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_feedback_get_feedbacks_by_courses")&&e.wsAvailable("mod_feedback_get_feedback_access_information")})},e.prototype.logView=function(e,n,o,r){void 0===o&&(o=!1);var i={feedbackid:e,moduleviewed:o?1:0};return this.logHelper.logSingle("mod_feedback_view_feedback",i,t.COMPONENT,e,n,"feedback",{moduleviewed:i.moduleviewed},r)},e.prototype.processPage=function(e,t,n,o,r,i,l){var a=this;l=l||this.sitesProvider.getCurrentSiteId();var s=function(){return a.feedbackOffline.saveResponses(e,t,n,i,l).then(function(){var n={jumpto:t,completed:!1,offline:!0},i=0;return o?t>0&&(i=-1):r||(i=1),0===i?n:a.getPageItemsWithValues(e,t,!0,!1,l).then(function(o){return 1!=i||o.hasnextpage?a.getPageJumpTo(e,t+i,i,l).then(function(e){return!1===e?-1==i?n.jumpto=0:n.completed=!0:n.jumpto=e,n}):(n.completed=!0,n)})})};return this.appProvider.isOnline()?this.feedbackOffline.deleteFeedbackPageResponses(e,t,l).then(function(){return a.processPageOnline(e,t,n,o,l).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):s()})}):s()},e.prototype.processPageOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={feedbackid:e,page:t,responses:i.utils.objectToArrayOfObjects(n,"name","value"),goprevious:o?1:0};return r.write("mod_feedback_process_page",l).catch(function(e){return Promise.reject(i.utils.createFakeWSError(e))}).then(function(t){return i.invalidateCurrentValuesData(e,r.getId()).then(function(){return i.getCurrentValues(e,!1,!1,r.getId())}).catch(function(){}).then(function(){return t})})})},e.COMPONENT="mmaModFeedback",e.FORM_SUBMITTED="addon_mod_feedback_form_submitted",e.LINE_SEP="|",e.MULTICHOICE_TYPE_SEP=">>>>>",e.MULTICHOICE_ADJUST_SEP="<<<<<",e.MULTICHOICE_HIDENOSELECT="h",e.MULTICHOICERATED_VALUE_SEP="####",e=t=f([Object(o.A)(),p("design:paramtypes",[r.a,i.a,l.a,a.a,c.a,s.a,u.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(53),l=n(10),a=n(18),s=n(71),u=n(1),c=n(46),d=n(2),f=n(65),p=n(233),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a,s){this.appProvider=e,this.sitesProvider=t,this.groupsProvider=n,this.filepoolProvider=o,this.userProvider=r,this.translate=i,this.utils=l,this.forumOffline=a,this.logHelper=s,this.ROOT_CACHE_KEY="mmaModForum:"}return t=e,e.prototype.getCanAddDiscussionCacheKey=function(e,t){return this.getCommonCanAddDiscussionCacheKey(e)+t},e.prototype.getCommonCanAddDiscussionCacheKey=function(e){return this.ROOT_CACHE_KEY+"canadddiscussion:"+e+":"},e.prototype.getForumDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getDiscussionPostDataCacheKey=function(e,t,n){return this.getForumDiscussionDataCacheKey(e,t)+":post:"+n},e.prototype.getForumDiscussionDataCacheKey=function(e,t){return this.getForumDataPrefixCacheKey(e)+":discussion:"+t},e.prototype.getForumDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"forum:"+e},e.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInformation:"+e},e.prototype.getDiscussionPostsCacheKey=function(e){return this.ROOT_CACHE_KEY+"discussion:"+e},e.prototype.getDiscussionsListCacheKey=function(e,n){var o=this.ROOT_CACHE_KEY+"discussions:"+e;return n!=t.SORTORDER_LASTPOST_DESC&&(o+=":"+n),o},e.prototype.addNewDiscussionOnline=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={forumid:e,subject:t,message:n,options:l.utils.objectToArrayOfObjects(o,"name","value")};return r&&(a.groupid=r),i.write("mod_forum_add_discussion",a).then(function(e){return e&&e.discussionid?e.discussionid:Promise.reject(l.utils.createFakeWSError(""))})})},e.prototype.canAddDiscussion=function(e,t,n){var o={forumid:e,groupid:t},r={cacheKey:this.getCanAddDiscussionCacheKey(e,t)};return this.sitesProvider.getSite(n).then(function(e){return e.read("mod_forum_can_add_discussion",o,r).then(function(e){return e?(void 0===e.canpindiscussions&&(e.canpindiscussions=!1),void 0===e.cancreateattachment&&(e.cancreateattachment=!0),e):Promise.reject(null)})})},e.prototype.canAddDiscussionToAll=function(e){return this.canAddDiscussion(e,t.ALL_PARTICIPANTS)},e.prototype.deletePost=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_forum_delete_post",{postid:e})})},e.prototype.extractStartingPost=function(e){var t=e.findIndex(function(e){return 0==e.parent});return t>=0?e.splice(t,1).pop():void 0},e.prototype.isAllParticipantsFixed=function(){return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan(["3.1.5","3.2.2"])},e.prototype.isGetDiscussionPostAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_forum_get_discussion_post")},e.prototype.isDeletePostAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_forum_delete_post")},e.prototype.isUpdatePostAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_forum_update_discussion_post")},e.prototype.formatDiscussionsGroups=function(e,n){var o=this;return n=this.utils.clone(n),this.groupsProvider.getActivityAllowedGroups(e).then(function(e){var r=o.translate.instant("core.allparticipants"),i=o.translate.instant("core.allgroups"),l={};return e.groups.forEach(function(e){l[e.id]=e}),n.forEach(function(e){if(e.groupid==t.ALL_PARTICIPANTS)e.groupname=r;else if(e.groupid==t.ALL_GROUPS)e.groupname=i;else{var n=l[e.groupid];n&&(e.groupname=n.name)}}),n}).catch(function(){return n})},e.prototype.getCourseForums=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={courseids:[e]},r={cacheKey:n.getForumDataCacheKey(e),updateFrequency:i.a.FREQUENCY_RARELY};return t.read("mod_forum_get_forums_by_courses",o,r)})},e.prototype.getDiscussionPost=function(e,t,n,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var a={postid:n},s={cacheKey:l.getDiscussionPostDataCacheKey(e,t,n),updateFrequency:i.a.FREQUENCY_USUALLY};return o&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_forum_get_discussion_post",a,s).then(function(e){return e.post?e.post:Promise.reject(null)})})},e.prototype.getForum=function(e,t,n){return this.getCourseForums(e,n).then(function(e){var n=e.find(function(e){return e.cmid==t});return n||Promise.reject(null)})},e.prototype.getForumById=function(e,t,n){return this.getCourseForums(e,n).then(function(e){var n=e.find(function(e){return e.id==t});return n||Promise.reject(null)})},e.prototype.getAccessInformation=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){if(!n.wsAvailable("mod_forum_get_forum_access_information"))return Promise.resolve({});var r={forumid:e},i={cacheKey:o.getAccessInformationCacheKey(e),omitExpires:t};return n.read("mod_forum_get_forum_access_information",r,i)})},e.prototype.getDiscussionPosts=function(e,t){var n=this,o={discussionid:e},r={cacheKey:this.getDiscussionPostsCacheKey(e)};return this.sitesProvider.getSite(t).then(function(e){return e.read("mod_forum_get_forum_discussion_posts",o,r).then(function(e){return e?(n.storeUserData(e.posts),e):Promise.reject(null)})})},e.prototype.sortDiscussionPosts=function(e,t){e.sort(function(e,n){return e=parseInt(e.created,10),n=parseInt(n.created,10),"ASC"==t?e-n:n-e})},e.prototype.isDiscussionListSortingAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan("3.7")},e.prototype.getAvailableSortOrders=function(){var e=[{label:"addon.mod_forum.discussionlistsortbylastpostdesc",value:t.SORTORDER_LASTPOST_DESC}];return this.isDiscussionListSortingAvailable()&&e.push({label:"addon.mod_forum.discussionlistsortbylastpostasc",value:t.SORTORDER_LASTPOST_ASC},{label:"addon.mod_forum.discussionlistsortbycreateddesc",value:t.SORTORDER_CREATED_DESC},{label:"addon.mod_forum.discussionlistsortbycreatedasc",value:t.SORTORDER_CREATED_ASC},{label:"addon.mod_forum.discussionlistsortbyrepliesdesc",value:t.SORTORDER_REPLIES_DESC},{label:"addon.mod_forum.discussionlistsortbyrepliesasc",value:t.SORTORDER_REPLIES_ASC}),e},e.prototype.getDiscussions=function(e,n,o,r,i){var l=this;return void 0===o&&(o=0),n=n||t.SORTORDER_LASTPOST_DESC,this.sitesProvider.getSite(i).then(function(i){var a="mod_forum_get_forum_discussions_paginated",s={forumid:e,page:o,perpage:t.DISCUSSIONS_PER_PAGE};if(i.wsAvailable("mod_forum_get_forum_discussions"))a="mod_forum_get_forum_discussions",s.sortorder=n;else{if(n!=t.SORTORDER_LASTPOST_DESC)return Promise.reject(null);s.sortby="timemodified",s.sortdirection="DESC"}var u={cacheKey:l.getDiscussionsListCacheKey(e,n)};return r&&(u.omitExpires=!0),i.read(a,s,u).catch(function(r){if(!l.appProvider.isOnline()&&"mod_forum_get_forum_discussion"==a&&n==t.SORTORDER_LASTPOST_DESC){var s={forumid:e,page:o,perpage:t.DISCUSSIONS_PER_PAGE,sortby:"timemodified",sortdirection:"DESC"},u={cacheKey:l.getDiscussionsListCacheKey(e,n),omitExpires:!0};return i.read("mod_forum_get_forum_discussions_paginated",s,u)}return Promise.reject(r)}).then(function(e){return e?(l.storeUserData(e.discussions),Promise.resolve({discussions:e.discussions,canLoadMore:e.discussions.length>=t.DISCUSSIONS_PER_PAGE})):Promise.reject(null)})})},e.prototype.getDiscussionsInPages=function(e,t,n,o,r,i){var l=this;void 0===o&&(o=-1),r=r||0;var a={discussions:[],error:!1};if(!o)return Promise.resolve(a);var s=function(r){return l.getDiscussions(e,t,r,n,i).then(function(e){return a.discussions=a.discussions.concat(e.discussions),o--,e.canLoadMore&&0!==o?s(r+1):a}).catch(function(){return a.error=!0,a})};return s(r)},e.prototype.invalidateCanAddDiscussion=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getCommonCanAddDiscussionCacheKey(e))})},e.prototype.invalidateContent=function(e,n){var o=this;return this.getForum(n,e).then(function(e){var r=[];return r.push(o.invalidateForumData(n)),r.push(o.invalidateDiscussionsList(e.id)),r.push(o.invalidateCanAddDiscussion(e.id)),r.push(o.invalidateAccessInformation(e.id)),o.getAvailableSortOrders().forEach(function(t){r.push(o.getDiscussionsInPages(e.id,t.value,!0).then(function(t){var n=[];return t.discussions.forEach(function(t){n.push(o.invalidateDiscussionPosts(t.discussion,e.id))}),o.utils.allPromises(n)}))}),o.isDiscussionListSortingAvailable()&&r.push(o.userProvider.invalidateUserPreference(t.PREFERENCE_SORTORDER)),o.utils.allPromises(r)})},e.prototype.invalidateAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAccessInformationCacheKey(e))})},e.prototype.invalidateDiscussionPosts=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=[n.invalidateWsCacheForKey(o.getDiscussionPostsCacheKey(e))];return t&&r.push(n.invalidateWsCacheForKeyStartingWith(o.getForumDiscussionDataCacheKey(t,e))),o.utils.allPromises(r)})},e.prototype.invalidateDiscussionsList=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return n.utils.allPromises(n.getAvailableSortOrders().map(function(o){return t.invalidateWsCacheForKey(n.getDiscussionsListCacheKey(e,o.value))}))})},e.prototype.invalidateFiles=function(e){var n=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.invalidateFilesByComponent(n,t.COMPONENT,e)},e.prototype.invalidateForumData=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getForumDataCacheKey(e))},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_forum_view_forum",{forumid:e},t.COMPONENT,e,n,"forum",{},o)},e.prototype.logDiscussionView=function(e,n,o,r){var i={discussionid:e};return this.logHelper.logSingle("mod_forum_view_forum_discussion",i,t.COMPONENT,n,o,"forum",i,r)},e.prototype.replyPost=function(e,t,n,o,r,i,l,a,s,u){var c=this;s=s||this.sitesProvider.getCurrentSiteId();var d=function(){return n?c.forumOffline.replyPost(e,t,n,o,r,i,l,a,s).then(function(){return!1}):Promise.reject(c.translate.instant("core.networkerrormsg"))};return!this.appProvider.isOnline()&&u?d():this.forumOffline.deleteReply(e,s).then(function(){return c.replyPostOnline(e,i,l,a,s).then(function(){return!0}).catch(function(e){return u&&!c.utils.isWebServiceError(e)?d():Promise.reject(e)})})},e.prototype.replyPostOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={postid:e,subject:t,message:n,options:i.utils.objectToArrayOfObjects(o,"name","value")};return r.write("mod_forum_add_discussion_post",l).then(function(e){return e&&e.postid?e.postid:Promise.reject(i.utils.createFakeWSError(""))})})},e.prototype.setLockState=function(e,t,n,o){return this.sitesProvider.getSite(o).then(function(o){return o.write("mod_forum_set_lock_state",{forumid:e,discussionid:t,targetstate:n?0:1})})},e.prototype.isSetPinStateAvailableForSite=function(e){return e=e||this.sitesProvider.getCurrentSite(),this.sitesProvider.wsAvailableInCurrentSite("mod_forum_set_pin_state")},e.prototype.setPinState=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_forum_set_pin_state",{discussionid:e,targetstate:t?1:0})})},e.prototype.toggleFavouriteState=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_forum_toggle_favourite_state",{discussionid:e,targetstate:t?1:0})})},e.prototype.storeUserData=function(e){var t={};e.forEach(function(e){var n=parseInt(e.userid);isNaN(n)||t[n]||(t[n]={id:n,fullname:e.userfullname,profileimageurl:e.userpictureurl});var o=parseInt(e.usermodified);isNaN(o)||t[o]||(t[o]={id:o,fullname:e.usermodifiedfullname,profileimageurl:e.usermodifiedpictureurl})}),this.userProvider.storeUsers(this.utils.objectToArray(t))},e.prototype.updatePost=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={postid:e,subject:t,message:n,options:i.utils.objectToArrayOfObjects(o,"name","value")};return r.write("mod_forum_update_discussion_post",l).then(function(e){return e&&e.status})})},e.COMPONENT="mmaModForum",e.DISCUSSIONS_PER_PAGE=10,e.NEW_DISCUSSION_EVENT="addon_mod_forum_new_discussion",e.REPLY_DISCUSSION_EVENT="addon_mod_forum_reply_discussion",e.VIEW_DISCUSSION_EVENT="addon_mod_forum_view_discussion",e.CHANGE_DISCUSSION_EVENT="addon_mod_forum_change_discussion_status",e.MARK_READ_EVENT="addon_mod_forum_mark_read",e.PREFERENCE_SORTORDER="forum_discussionlistsortorder",e.SORTORDER_LASTPOST_DESC=1,e.SORTORDER_LASTPOST_ASC=2,e.SORTORDER_CREATED_DESC=3,e.SORTORDER_CREATED_ASC=4,e.SORTORDER_REPLIES_DESC=5,e.SORTORDER_REPLIES_ASC=6,e.ALL_PARTICIPANTS=-1,e.ALL_GROUPS=-2,e=t=h([Object(o.A)(),m("design:paramtypes",[l.a,u.a,s.a,a.a,c.a,r.c,d.a,p.a,f.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var o=n(0),r=n(5),i=n(568),l=n(353),a=n(490),s=n(3),u=n(10),c=n(154),d=n(6),f=n(1),p=n(441),h=n(144),m=n(151),_=n(2),g=n(11),v=n(126),y=n(40),b=n(116),P=n(41),O=n(36),E=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},R=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},S=function(){function e(e,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_,g,v){var y=this;this.appProvider=n,this.initDelegate=o,this.pushNotificationsDelegate=r,this.sitesProvider=i,this.badge=l,this.localNotificationsProvider=a,this.utils=s,this.textUtils=u,this.push=c,this.configProvider=d,this.device=f,this.zone=p,this.translate=h,this.platform=m,this.sitesFactory=_,this.filterProvider=g,this.filterDelegate=v,this.appTablesSchema={name:"CorePushNotificationsProvider",version:1,tables:[{name:t.BADGE_TABLE,columns:[{name:"siteid",type:"TEXT"},{name:"addon",type:"TEXT"},{name:"number",type:"INTEGER"}],primaryKeys:["siteid","addon"]},{name:t.PENDING_UNREGISTER_TABLE,columns:[{name:"siteid",type:"TEXT",primaryKey:!0},{name:"siteurl",type:"TEXT"},{name:"token",type:"TEXT"},{name:"info",type:"TEXT"}]}]},this.siteSchema={name:"AddonPushNotificationsProvider",version:1,tables:[{name:t.REGISTERED_DEVICES_TABLE,columns:[{name:"appid",type:"TEXT"},{name:"uuid",type:"TEXT"},{name:"name",type:"TEXT"},{name:"model",type:"TEXT"},{name:"platform",type:"TEXT"},{name:"version",type:"TEXT"},{name:"pushid",type:"TEXT"}],primaryKeys:["appid","uuid"]}]},this.logger=e.getInstance("CorePushNotificationsProvider"),this.appDB=n.getDB(),this.dbReady=n.createTablesFromSchema(this.appTablesSchema).catch(function(){}),this.sitesProvider.registerSiteSchema(this.siteSchema),m.ready().then(function(){y.createDefaultChannel(),h.onLangChange.subscribe(function(e){y.createDefaultChannel()})})}return t=e,e.prototype.canRegisterOnMoodle=function(){return this.pushID&&this.appProvider.isMobile()},e.prototype.cleanSiteCounters=function(e){return I(this,void 0,void 0,function(){return R(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,this.appDB.deleteRecords(t.BADGE_TABLE,{siteid:e})];case 3:return n.sent(),[3,5];case 4:return this.updateAppCounter(),[7];case 5:return[2]}})})},e.prototype.createDefaultChannel=function(){var e=this;return this.platform.is("android")?this.push.createChannel({id:"PushPluginChannel",description:this.translate.instant("core.misc"),importance:4}).catch(function(t){e.logger.error("Error changing push channel name",t)}):Promise.resolve()},e.prototype.enableAnalytics=function(e){var t=this,n=window;return b.a.enableanalytics&&n.PushNotification&&n.PushNotification.enableAnalytics?new Promise(function(o,r){n.PushNotification.enableAnalytics(o,function(n){t.logger.error("Error enabling or disabling Firebase analytics",e,n),o()},!!e)}):Promise.resolve()},e.prototype.getOptions=function(){return(this.localNotificationsProvider.canDisableSound()?this.configProvider.get(y.a.SETTINGS_NOTIFICATION_SOUND,!0):Promise.resolve(!0)).then(function(e){return{android:{sound:!!e,icon:"smallicon",iconColor:b.a.notificoncolor},ios:{alert:"true",badge:!0,sound:!!e},windows:{sound:!!e}}})},e.prototype.getPushId=function(){return this.pushID},e.prototype.getRegisterData=function(){return{appid:b.a.app_id,name:this.device.manufacturer||"",model:this.device.model,platform:this.device.platform+"-fcm",version:this.device.version,pushid:this.pushID,uuid:this.device.uuid}},e.prototype.getSiteCounter=function(e){return this.getAddonBadge(e)},e.prototype.logEvent=function(e,t,n){var o=this,r=window;return b.a.enableanalytics&&r.PushNotification&&r.PushNotification.logEvent?this.configProvider.get(y.a.SETTINGS_ANALYTICS_ENABLED,!0).then(function(i){if(i)return new Promise(function(i,l){r.PushNotification.logEvent(i,function(t){o.logger.error("Error logging firebase event",e,t),i()},e,t,!!n)})}):Promise.resolve()},e.prototype.logViewEvent=function(e,t,n,o,r,i){return r=r||{},r=this.utils.prefixKeys(r,"moodle"),r.moodleaction=o,r.moodlesiteid=i||this.sitesProvider.getCurrentSiteId(),e&&(r.item_id=e),t&&(r.item_name=t),n&&(r.item_category=n),this.logEvent("view_item",r,!1)},e.prototype.logViewListEvent=function(e,t,n,o){return n=n||{},n=this.utils.prefixKeys(n,"moodle"),n.moodleaction=t,n.moodlesiteid=o||this.sitesProvider.getCurrentSiteId(),e&&(n.item_category=e),this.logEvent("view_item_list",n,!1)},e.prototype.notificationClicked=function(e){var t=this;this.initDelegate.ready().then(function(){t.pushNotificationsDelegate.clicked(e)})},e.prototype.onMessageReceived=function(e){var n=this,o=e?e.additionalData:{};this.sitesProvider.getSite(o.site).then(function(r){if("string"==typeof o.customdata&&(o.customdata=n.textUtils.parseJSON(o.customdata,{})),n.utils.isTrueOrOne(o.foreground)){if(n.localNotificationsProvider.isAvailable()){var i={id:o.notId||1,data:o,title:"",text:"",channel:"PushPluginChannel"},l={clean:!0,singleLine:!0,contextLevel:"system",instanceId:0,filter:!0},a=n.platform.is("android"),s=n.utils.isTrueOrOne(o.extrafeatures);n.filterProvider.canGetAvailableInContext(r.getId()).then(function(e){return e?n.filterProvider.getAvailableInContext(l.contextLevel,l.instanceId,r.getId()):n.filterDelegate.getEnabledFilters(l.contextLevel,l.instanceId)}).catch(function(){return[]}).then(function(u){var c=[];c.push(n.filterProvider.formatText(e.title,l,u,r.getId()).then(function(e){i.title=e}).catch(function(){i.title=e.title})),c.push(n.filterProvider.formatText(e.message,l,u,r.getId()).catch(function(){return e.message}).then(function(e){i.text=s&&a&&n.utils.isFalseOrZero(o.notif)?[{message:e,person:2==o.conversationtype?o.userfromfullname:""}]:e})),s&&a&&(i.icon=e.image,i.iconType=o["image-type"]),Promise.all(c).then(function(){n.localNotificationsProvider.schedule(i,t.COMPONENT,o.site,!0)})})}n.initDelegate.ready().then(function(){o.title=e.title,o.message=e.message,n.pushNotificationsDelegate.received(o)})}else n.notificationClicked(o)})},e.prototype.unregisterDeviceOnMoodle=function(e){return I(this,void 0,void 0,function(){var n,o,r,i;return R(this,function(l){switch(l.label){case 0:return e&&this.appProvider.isMobile()?[4,this.dbReady]:[2,Promise.reject(null)];case 1:l.sent(),this.logger.debug("Unregister device on Moodle: '"+e.id+"'"),n={appid:b.a.app_id,uuid:this.device.uuid},l.label=2;case 2:return l.trys.push([2,4,,7]),[4,e.write("core_user_remove_user_device",n)];case 3:if(!(o=l.sent())||!o.removed)throw null;return(r=[]).push(e.getDb().deleteRecords(t.REGISTERED_DEVICES_TABLE,this.getRegisterData())),r.push(this.appDB.deleteRecords(t.PENDING_UNREGISTER_TABLE,{siteid:e.id})),[2,Promise.all(r).catch(function(){})];case 4:return i=l.sent(),this.utils.isWebServiceError(i)?[3,6]:[4,this.appDB.insertRecord(t.PENDING_UNREGISTER_TABLE,{siteid:e.id,siteurl:e.getURL(),token:e.getToken(),info:JSON.stringify(e.getInfo())})];case 5:l.sent(),l.label=6;case 6:throw i;case 7:return[2]}})})},e.prototype.updateAddonCounter=function(e,t,n){var o=this;return this.pushNotificationsDelegate.isCounterHandlerRegistered(e)?(n=n||this.sitesProvider.getCurrentSiteId(),this.saveAddonBadge(t,n,e).then(function(){return o.updateSiteCounter(n).then(function(){return t})})):Promise.resolve(0)},e.prototype.updateAppCounter=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(t){var n=[];return t.forEach(function(t){n.push(e.getAddonBadge(t))}),Promise.all(n).then(function(t){var n=t.reduce(function(e,t){return e+parseInt(t,10)},0);return e.appProvider.isDesktop()||e.appProvider.isMobile()?e.badge.set(n).then(function(){return n}):n})})},e.prototype.updateSiteCounter=function(e){var t=this,n=this.pushNotificationsDelegate.getCounterHandlers(),o=[];for(var r in n)o.push(this.getAddonBadge(e,n[r]));return Promise.all(o).then(function(n){var o=!1,r=n.reduce(function(e,t){return t!=parseInt(t,10)&&(o=!0,t=parseInt(t,10)),e+t},0);return r=o&&r>0?r+"+":r,t.saveAddonBadge(r,e)}).then(function(e){return t.updateAppCounter().then(function(){return e})})},e.prototype.registerDevice=function(){var e=this;try{return this.getOptions().then(function(t){var n=e.push.init(t);n.on("notification").subscribe(function(t){e.zone.run(function(){e.logger.log("Received a notification",t),e.onMessageReceived(t)})}),n.on("registration").subscribe(function(t){e.zone.run(function(){e.pushID=t.registrationId,e.sitesProvider.isLoggedIn()&&e.registerDeviceOnMoodle().catch(function(t){e.logger.warn("Can't register device",t)})})}),n.on("error").subscribe(function(t){e.zone.run(function(){e.logger.warn("Error with Push plugin",t)})})})}catch(e){this.logger.warn(e)}return Promise.reject(null)},e.prototype.registerDeviceOnMoodle=function(e,n){return I(this,void 0,void 0,function(){var o,r,i;return R(this,function(l){switch(l.label){case 0:return this.logger.debug("Register device on Moodle."),this.canRegisterOnMoodle()?[4,this.dbReady]:[2,Promise.reject(null)];case 1:return l.sent(),o=this.getRegisterData(),[4,this.sitesProvider.getSite(e)];case 2:i=l.sent(),l.label=3;case 3:return l.trys.push([3,,14,16]),n?(r={unregister:!0,register:!0},[3,6]):[3,4];case 4:return[4,this.shouldRegister(o,i)];case 5:r=l.sent(),l.label=6;case 6:return r.unregister?[4,this.unregisterDeviceOnMoodle(i).catch(function(){})]:[3,8];case 7:l.sent(),l.label=8;case 8:return r.register?[4,i.write("core_user_add_user_device",this.utils.clone(o))]:[3,13];case 9:l.sent(),l.label=10;case 10:return l.trys.push([10,12,,13]),[4,i.getDb().insertRecord(t.REGISTERED_DEVICES_TABLE,o)];case 11:return l.sent(),[3,13];case 12:return l.sent(),[3,13];case 13:return[3,16];case 14:return[4,this.appDB.deleteRecords(t.PENDING_UNREGISTER_TABLE,{siteid:i.id}).catch(function(){})];case 15:return l.sent(),[7];case 16:return[2]}})})},e.prototype.getAddonBadge=function(e,n){return void 0===n&&(n="site"),I(this,void 0,void 0,function(){var o;return R(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.appDB.getRecord(t.BADGE_TABLE,{siteid:e,addon:n})];case 3:return o=r.sent(),[2,o&&o.number||0];case 4:return r.sent(),[2,0];case 5:return[2]}})})},e.prototype.retryUnregisters=function(e){return I(this,void 0,void 0,function(){var n,o=this;return R(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),e?[4,this.appDB.getRecords(t.PENDING_UNREGISTER_TABLE,{siteid:e})]:[3,3];case 2:return n=r.sent(),[3,5];case 3:return[4,this.appDB.getAllRecords(t.PENDING_UNREGISTER_TABLE)];case 4:n=r.sent(),r.label=5;case 5:return[2,Promise.all(n.map(function(e){var t=o.sitesFactory.makeSite(e.siteid,e.siteurl,e.token,o.textUtils.parseJSON(e.info,{}));return o.unregisterDeviceOnMoodle(t)}))]}})})},e.prototype.saveAddonBadge=function(e,n,o){return void 0===o&&(o="site"),I(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,this.dbReady];case 1:return i.sent(),n=n||this.sitesProvider.getCurrentSiteId(),r={siteid:n,addon:o,number:e},[4,this.appDB.insertRecord(t.BADGE_TABLE,r)];case 2:return i.sent(),[2,e]}})})},e.prototype.shouldRegister=function(e,n){return n.getDb().getRecords(t.REGISTERED_DEVICES_TABLE,{appid:e.appid,uuid:e.uuid}).catch(function(){return[]}).then(function(t){var n=!1,o=!1;return t.forEach(function(t){t.name==e.name&&t.model==e.model&&t.platform==e.platform&&(t.version==e.version&&t.pushid==e.pushid?n=!0:o=!0)}),n?{register:!1,unregister:!1}:o?{register:!0,unregister:!1}:{register:!0,unregister:!0}})},e.COMPONENT="CorePushNotificationsProvider",e.BADGE_TABLE="addon_pushnotifications_badge",e.PENDING_UNREGISTER_TABLE="addon_pushnotifications_pending_unregister",e.REGISTERED_DEVICES_TABLE="addon_pushnotifications_registered_devices",e=t=E([Object(o.A)(),C("design:paramtypes",[d.a,u.a,c.a,h.a,f.a,i.a,m.a,_.a,g.a,l.a,v.a,a.a,o.M,s.c,r.v,p.a,P.a,O.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(3),i=n(18),l=n(1),a=n(4),s=n(11),u=n(22),c=n(2),d=n(128),f=n(73),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,i,l,a,s){this.domUtils=e,this.textUtils=t,this.questionProvider=n,this.sitesProvider=o,this.translate=r,this.urlUtils=i,this.utils=l,this.filepoolProvider=a,this.questionDelegate=s,this.lastErrorShown=0}return e.prototype.addBehaviourButton=function(e,t){t&&e&&(e.behaviourButtons||(e.behaviourButtons=[]),e.behaviourButtons.push({id:t.id,name:t.name,value:t.value,disabled:t.disabled}))},e.prototype.extractQbehaviourButtons=function(e,t){var n=this;if(!this.questionDelegate.getPreventSubmitMessage(e)){t=t||'.im-controls input[type="submit"]';var o=this.domUtils.convertToElement(e.html);Array.from(o.querySelectorAll(t)).forEach(function(t){n.addBehaviourButton(e,t)})}},e.prototype.extractQbehaviourCBM=function(e){var t=this,n=this.domUtils.convertToElement(e.html),o=Array.from(n.querySelectorAll('.im-controls .certaintychoices label[for*="certainty"]'));return e.behaviourCertaintyOptions=[],o.forEach(function(n){var o=n.querySelector('input[type="radio"]');o&&(e.behaviourCertaintyOptions.push({id:o.id,name:o.name,value:o.value,text:t.textUtils.cleanTags(n.innerHTML),disabled:o.disabled}),o.checked&&(e.behaviourCertaintySelected=o.value))}),e.localAnswers&&void 0!==e.localAnswers["-certainty"]&&(e.behaviourCertaintySelected=e.localAnswers["-certainty"]),o.length>0},e.prototype.extractQbehaviourRedoButton=function(e){var t='input[type="submit"][name*=redoslot], input[type="submit"][name*=tryagain]';if(!this.searchBehaviourButton(e,"html",".outcome "+t)){if(e.feedbackHtml&&this.searchBehaviourButton(e,"feedbackHtml",t))return;e.infoHtml&&this.searchBehaviourButton(e,"infoHtml",t)}},e.prototype.extractQbehaviourSeenInput=function(e){var t=this.domUtils.convertToElement(e.html),n=t.querySelector('input[type="hidden"][name*=seen]');return!!n&&(e.behaviourSeenInput={name:n.name,value:n.value},n.parentElement.removeChild(n),e.html=t.innerHTML,!0)},e.prototype.extractQuestionComment=function(e){this.extractQuestionLastElementNotInContent(e,".comment","commentHtml")},e.prototype.extractQuestionFeedback=function(e){this.extractQuestionLastElementNotInContent(e,".outcome","feedbackHtml")},e.prototype.extractQuestionInfoBox=function(e,t){this.extractQuestionLastElementNotInContent(e,t,"infoHtml")},e.prototype.extractQuestionLastElementNotInContent=function(e,t,n){for(var o=this.domUtils.convertToElement(e.html),r=Array.from(o.querySelectorAll(t)),i=r.pop();i;){if(!this.domUtils.closest(i,".formulation"))return e[n]=i.innerHTML,i.parentElement.removeChild(i),void(e.html=o.innerHTML);i=r.pop()}},e.prototype.extractQuestionScripts=function(e,t){var n=this;if(e.scriptsCode="",e.initObjects=null,e.amdArgs=null,e.html){var o=e.html.match(/<script[^>]*>[\s\S]*?<\/script>/gm);if(!o)return;o.forEach(function(o){e.scriptsCode+=o,e.html=e.html.replace(o,"");var r=o.match(new RegExp("M.qtype_"+e.type+".init_question\\(.*?}\\);","mg"));if(r){var i=r.pop();i=(i=i.replace("M.qtype_"+e.type+".init_question(","")).substr(0,i.length-2),e.initObjects=n.textUtils.parseJSON(i,null)}var l=new RegExp("require\\(\\[[\"']qtype_"+e.type+"/question[\"']\\], ?function\\(amd\\) ?\\{ ?amd\\.init\\(([\"'](q|question-"+t+"-)"+e.slot+"[\"'].*?)\\);","m"),a=o.match(l);a&&(e.amdArgs=n.textUtils.parseJSON("["+a[1]+"]",null))})}},e.prototype.getAllInputNamesFromHtml=function(e){var t=this,n=this.domUtils.convertToElement("<form>"+e+"</form>").children[0],o={};return Array.from(n.elements).forEach(function(e){var n=e.name||"";n&&!n.match(/_:flagged$/)&&"submit"!=e.type&&"BUTTON"!=e.tagName&&(o[t.questionProvider.removeQuestionPrefix(n)]=!0)}),o},e.prototype.getAnswersFromForm=function(e){if(!e||!e.elements)return{};var t={};return Array.from(e.elements).forEach(function(e){var n=e.name||e.getAttribute("ng-reflect-name")||"";n&&!n.match(/_:flagged$/)&&"submit"!=e.type&&"BUTTON"!=e.tagName&&("checkbox"==e.type?t[n]=!!e.checked:"radio"==e.type?e.checked&&(t[n]=e.value):t[n]=e.value)}),t},e.prototype.getQuestionAttachmentsFromHtml=function(e){var t=this,n=this.domUtils.convertToElement(e);this.domUtils.removeElement(n,"div[id*=filemanager]");var o=[];return Array.from(n.querySelectorAll("a")).forEach(function(e){var n=e.innerHTML;e.href&&n&&(n=t.textUtils.cleanTags(n,!0).trim(),o.push({filename:n,fileurl:e.href}))}),o},e.prototype.getQuestionSequenceCheckFromHtml=function(e){if(e){var t=this.domUtils.convertToElement(e).querySelector("input[name*=sequencecheck]");if(t&&void 0!==t.name&&void 0!==t.value)return{name:t.name,value:t.value}}},e.prototype.getQuestionStateClass=function(e){var t=this.questionProvider.getState(e);return t?t.class:""},e.prototype.getValidationErrorFromHtml=function(e){var t=this.domUtils.convertToElement(e);return this.domUtils.getContentsOfElement(t,".validationerror")},e.prototype.hasDraftFileUrls=function(e){var t=this.sitesProvider.getCurrentSite().getURL();return"/"!=t.slice(-1)&&(t=t+="/"),t+="draftfile.php",-1!=e.indexOf(t)},e.prototype.loadLocalAnswersInHtml=function(e){var t=this,n=this.domUtils.convertToElement("<form>"+e.html+"</form>").children[0];Array.from(n.elements).forEach(function(n){var o=n.name||"";if(o&&!o.match(/_:flagged$/)&&"submit"!=n.type&&"BUTTON"!=n.tagName&&(o=t.questionProvider.removeQuestionPrefix(o),e.localAnswers&&void 0!==e.localAnswers[o]))if("TEXTAREA"==n.tagName)n.innerHTML=e.localAnswers[o];else if("SELECT"==n.tagName){var r=n.querySelector('option[value="'+e.localAnswers[o]+'"]');r&&r.setAttribute("selected","selected")}else"radio"==n.type?n.value==e.localAnswers[o]?n.setAttribute("checked","checked"):n.removeAttribute("checked"):"checkbox"==n.type?t.utils.isTrueOrOne(e.localAnswers[o])?n.setAttribute("checked","checked"):n.removeAttribute("checked"):n.setAttribute("value",e.localAnswers[o])}),e.html=n.innerHTML},e.prototype.prefetchQuestionFiles=function(e,t,n,o,r){var i=this,l=this.filepoolProvider.extractDownloadableFilesFromHtml(e.html);return t||(t=d.a.COMPONENT,n=e.id),l.push.apply(l,this.questionDelegate.getAdditionalDownloadableFiles(e,r)),this.sitesProvider.getSite(o).then(function(e){var r=[];return l.forEach(function(l){!e.canDownloadFiles()&&i.urlUtils.isPluginFileUrl(l)||l.indexOf("theme/image.php")>-1&&l.indexOf("flagged")>-1||r.push(i.filepoolProvider.addToQueueByUrl(o,l,t,n))}),Promise.all(r)})},e.prototype.prepareAnswers=function(e,t,n,o){var r=this,i=[];return(e=e||[]).forEach(function(e){i.push(r.questionDelegate.prepareAnswersForQuestion(e,t,n,o))}),this.utils.allPromises(i).then(function(){return t})},e.prototype.replaceCorrectnessClasses=function(e){this.domUtils.replaceClassesInElement(e,{correct:"core-question-answer-correct",incorrect:"core-question-answer-incorrect"})},e.prototype.replaceFeedbackClasses=function(e){this.domUtils.replaceClassesInElement(e,{outcome:"core-question-feedback-container core-question-feedback-padding",specificfeedback:"core-question-feedback-container core-question-feedback-inline"})},e.prototype.searchBehaviourButton=function(e,t,n){var o=this.domUtils.convertToElement(e[t]),r=o.querySelector(n);return!!r&&(this.addBehaviourButton(e,r),r.parentElement.removeChild(r),e[t]=o.innerHTML,!0)},e.prototype.showComponentError=function(e,t){var n=Date.now();n-this.lastErrorShown>500&&(this.lastErrorShown=n,this.domUtils.showErrorModalDefault(t,"addon.mod_quiz.errorparsequestions",!0)),e&&e.emit()},e.prototype.treatCorrectnessIcons=function(e){Array.from(e.querySelectorAll("img.icon, img.questioncorrectnessicon")).forEach(function(e){if(e.src){var t=document.createElement("i");if(e.src.indexOf("incorrect")>-1)t.className="icon fa fa-remove text-danger fa-fw questioncorrectnessicon";else{if(!(e.src.indexOf("correct")>-1))return;t.className="icon fa fa-check text-success fa-fw questioncorrectnessicon"}t.title=e.title,t.ariaLabel=e.title,e.parentNode.replaceChild(t,e)}});Array.from(e.querySelectorAll(".feedbackspan.accesshide")).forEach(function(e){var t=e.previousSibling;t&&(t.classList.contains("icon")||t.classList.contains("questioncorrectnessicon"))&&(t.classList.add("questioncorrectnessicon"),e.innerHTML&&t.setAttribute("tappable",""))})},e.prototype.treatCorrectnessIconsClicks=function(e,t,n,o,r,i){var l=this,a=Array.from(e.querySelectorAll("i.icon.questioncorrectnessicon[tappable]")),s=this.translate.instant("core.question.feedback");a.forEach(function(e){var a=e.parentElement.querySelector(".feedbackspan.accesshide");a&&e.addEventListener("click",function(e){l.textUtils.expandText(s,a.innerHTML,t,n,[],!0,o,r,i)})})},e=p([Object(o.A)(),h("design:paramtypes",[a.a,s.a,d.a,l.a,r.c,u.a,c.a,i.a,f.a])],e)}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(40),r=n(1057),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.download=function(e,t,n){return this.prefetch(e,t,!1,n)},t.prototype.prefetch=function(e,t,n,o){return Promise.resolve()},t.prototype.prefetchPackage=function(e,t,n,o,r){for(var i=this,l=[],a=5;a<arguments.length;a++)l[a-5]=arguments[a];if(r=r||this.sitesProvider.getCurrentSiteId(),!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));if(this.isDownloading(e.id,r))return this.getOngoingDownload(e.id,r);var s=this.setDownloading(e.id,r).then(function(){return Promise.all([i.courseProvider.getModuleBasicInfo(e.id,r),i.courseProvider.getModule(e.id,t,void 0,!1,!0,r),i.filterHelper.getFilters("module",e.id,{courseId:t})])}).then(function(){return o.apply(o,[e,t,n,r].concat(l))}).then(function(t){return"string"!=typeof t&&(t=""),i.setDownloaded(e.id,r,t)}).catch(function(t){return i.setPreviousStatusAndReject(e.id,t,r)});return this.addOngoingDownload(e.id,s,r)},t.prototype.setDownloaded=function(e,t,n){return t=t||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.storePackageStatus(t,o.a.DOWNLOADED,this.component,e,n)},t.prototype.setDownloading=function(e,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.storePackageStatus(t,o.a.DOWNLOADING,this.component,e)},t.prototype.setPreviousStatusAndReject=function(e,t,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.setPackagePreviousStatus(n,this.component,e).then(function(){return Promise.reject(t)})},t}(r.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(146),s=(n.n(a),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.sitesProvider=t,this.utils=n,this.observables={},this.clickHandlers={},this.counterHandlers={},this.logger=e.getInstance("CorePushNotificationsDelegate"),this.observables.receive=new a.Subject}return e.prototype.clicked=function(e){if(e){var t=[],n=[],o=function(o){var i=r.clickHandlers[o];t.push(r.isFeatureDisabled(i,e.site).then(function(t){if(!t)return Promise.resolve(i.handles(e)).then(function(e){e&&n.push(i)})}))},r=this;for(var i in this.clickHandlers)o(i);return this.utils.allPromises(t).catch(function(){}).then(function(){(n=n.sort(function(e,t){return e.priority<=t.priority?1:-1}))[0]&&n[0].handleClick(e)})}},e.prototype.isFeatureDisabled=function(e,t){return e.featureName?this.sitesProvider.isFeatureDisabled(e.featureName,t):Promise.resolve(!1)},e.prototype.received=function(e){this.observables.receive.next(e)},e.prototype.on=function(e){if(void 0===this.observables[e]){var t=Object.keys(this.observables).join(", ");return this.logger.warn("'"+e+"' event name is not allowed. Use one of the following: '"+t+"'."),new a.Subject}return this.observables[e]},e.prototype.registerClickHandler=function(e){return void 0!==this.clickHandlers[e.name]?(this.logger.log("Addon '"+e.name+"' already registered"),!1):(this.logger.log("Registered addon '"+e.name+"'"),this.clickHandlers[e.name]=e,!0)},e.prototype.registerCounterHandler=function(e){void 0===this.counterHandlers[e]?(this.logger.debug("Registered handler '"+e+"' as badge counter handler."),this.counterHandlers[e]=e):this.logger.log("Handler '"+e+"' as badge counter handler already registered.")},e.prototype.isCounterHandlerRegistered=function(e){return void 0!==this.counterHandlers[e]},e.prototype.getCounterHandlers=function(){return this.counterHandlers},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a])],e)}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e,t,n,o,r,i,l,a){this.sitesProvider=n,this.appProvider=o,this.syncProvider=r,this.textUtils=i,this.translate=l,this.timeUtils=a,this.component="core",this.syncInterval=3e5,this.syncPromises={},this.logger=t.getInstance(e),this.component=e}return e.prototype.addOngoingSync=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueSyncId(e);return this.syncPromises[n]||(this.syncPromises[n]={}),this.syncPromises[n][r]=t,t.finally(function(){delete o.syncPromises[n][r]})},e.prototype.getOngoingSync=function(e,t){if(t=t||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,t)){var n=this.getUniqueSyncId(e);return this.syncPromises[t][n]}},e.prototype.getReadableSyncTime=function(e,t){var n=this;return this.getSyncTime(e,t).then(function(e){return n.getReadableTimeFromTimestamp(e)})},e.prototype.getReadableTimeFromTimestamp=function(e){return e?this.timeUtils.userDate(e):this.translate.instant("core.never")},e.prototype.getSyncTime=function(e,t){return this.syncProvider.getSyncRecord(this.component,e,t).then(function(e){return e.time}).catch(function(){return 0})},e.prototype.getSyncWarnings=function(e,t){var n=this;return this.syncProvider.getSyncRecord(this.component,e,t).then(function(e){return n.textUtils.parseJSON(e.warnings,[])}).catch(function(){return[]})},e.prototype.getUniqueSyncId=function(e){return this.component+"#"+e},e.prototype.isSyncing=function(e,t){t=t||this.sitesProvider.getCurrentSiteId();var n=this.getUniqueSyncId(e);return!(!this.syncPromises[t]||!this.syncPromises[t][n])},e.prototype.isSyncNeeded=function(e,t){var n=this;return this.getSyncTime(e,t).then(function(e){return Date.now()-n.syncInterval>=e})},e.prototype.setSyncTime=function(e,t,n){return n=void 0!==n?n:Date.now(),this.syncProvider.insertOrUpdateSyncRecord(this.component,e,{time:n},t)},e.prototype.setSyncWarnings=function(e,t,n){var o=JSON.stringify(t||[]);return this.syncProvider.insertOrUpdateSyncRecord(this.component,e,{warnings:o},n)},e.prototype.syncOnSites=function(e,t,n,o){if(!this.appProvider.isOnline())return this.logger.debug("Cannot sync '"+e+"' because device is offline."),Promise.reject(null);var r;return o?(this.logger.debug("Try to sync '"+e+"' in site '"+o+"'."),r=Promise.resolve([o])):(this.logger.debug("Try to sync '"+e+"' in all sites."),r=this.sitesProvider.getLoggedInSitesIds()),n=n||[],r.then(function(e){var o=[];return e.forEach(function(e){o.push(t.apply(t,[e].concat(n)))}),Promise.all(o)})},e.prototype.waitForSync=function(e,t){var n=this.getOngoingSync(e,t);return n?n.catch(function(){}):Promise.resolve()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(355),l=n(3),a=n(10),s=n(57),u=n(6),c=n(4),d=n(11),f=n(2),p=n(72),h=n(445),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d){this.appProvider=t,this.translate=n,this.fileUploaderProvider=o,this.domUtils=r,this.textUtils=i,this.fileProvider=l,this.utils=a,this.actionSheetCtrl=s,this.uploaderDelegate=u,this.camera=c,this.platform=d,this.logger=e.getInstance("CoreFileUploaderProvider")}return e.prototype.confirmUploadFile=function(e,t,n,o,r){if(0==e)return Promise.resolve();if(!n&&!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.fileuploader.errormustbeonlinetoupload"));if(o=void 0===o?p.a.WIFI_SIZE_WARNING:o,r=void 0===r?p.a.LIMITED_SIZE_WARNING:r,e<0)return this.domUtils.showConfirm(this.translate.instant("core.fileuploader.confirmuploadunknownsize"));if(e>=o||this.appProvider.isNetworkAccessLimited()&&e>=r){var i=this.textUtils.bytesToSize(e,2);return this.domUtils.showConfirm(this.translate.instant("core.fileuploader.confirmuploadfile",{size:i}))}return t?this.domUtils.showConfirm(this.translate.instant("core.areyousure")):Promise.resolve()},e.prototype.copyAndUploadFile=function(e,t,n){var o=this;n=n||e.name;var r=this.domUtils.showModalLoading("core.fileuploader.readingfile",!0);return this.fileProvider.getUniqueNameInFolder(s.a.TMPFOLDER,n).then(function(t){var n=o.textUtils.concatenatePaths(s.a.TMPFOLDER,t);return o.fileProvider.writeFileDataInFile(e,n,function(e){o.showProgressModal(r,"core.fileuploader.readingfileperc",e)})}).catch(function(e){return o.logger.error("Error reading file to upload.",e),r.dismiss(),Promise.reject(o.translate.instant("core.fileuploader.errorreadingfile"))}).then(function(i){return r.dismiss(),t?o.uploadGenericFile(i.toURL(),n,e.type,!0):i})},e.prototype.copyToTmpFolder=function(e,t,n,o,r){var i,l=this,a=r&&r.fileName||this.fileProvider.getFileAndDirectoryFromPath(e).name;return(void 0!==n&&-1!=n?this.fileProvider.getExternalFile(e).then(function(e){return l.fileProvider.getFileObjectFromFileEntry(e).then(function(e){e.size>n&&(i=e)})}).catch(function(){}):Promise.resolve()).then(function(){return i?l.errorMaxBytes(n,i.name):l.fileProvider.getUniqueNameInFolder(s.a.TMPFOLDER,a,o)}).then(function(n){var o=l.textUtils.concatenatePaths(s.a.TMPFOLDER,n);return t?l.fileProvider.moveExternalFile(e,o):l.fileProvider.copyExternalFile(e,o)})},e.prototype.errorMaxBytes=function(e,t){var n=this.translate.instant("core.fileuploader.maxbytesfile",{$a:{file:t,size:this.textUtils.bytesToSize(e,2)}});return this.domUtils.showErrorModal(n),Promise.reject(null)},e.prototype.filePickerClosed=function(){this.filePickerDeferred&&(this.filePickerDeferred.reject(this.domUtils.createCanceledError()),this.filePickerDeferred=void 0)},e.prototype.fileUploaded=function(e){this.filePickerDeferred&&(this.filePickerDeferred.resolve(e),this.filePickerDeferred=void 0),this.actionSheet&&this.actionSheet.dismiss()},e.prototype.selectAndUploadFile=function(e,t,n){return this.selectFileWithPicker(e,!1,t,n,!0)},e.prototype.selectFile=function(e,t,n,o){return this.selectFileWithPicker(e,t,n,o,!1)},e.prototype.selectFileWithPicker=function(e,t,n,o,r){var i=this,l=[{text:this.translate.instant("core.cancel"),role:"cancel",handler:function(){i.filePickerClosed()}}],a=this.uploaderDelegate.getHandlers(o);return this.filePickerDeferred=this.utils.promiseDefer(),a.sort(function(e,t){return e.priority<=t.priority?1:-1}),a.forEach(function(n){l.push({text:i.translate.instant(n.title),icon:n.icon,cssClass:n.class,handler:function(){return!!n.action&&(t||i.appProvider.isOnline()?(n.action(e,r,t,n.mimetypes).then(function(n){return n.treated?n.result:n.fileEntry?i.uploadFileEntry(n.fileEntry,n.delete,e,r,t):n.path?i.fileProvider.getFile(n.path).catch(function(){return i.fileProvider.getExternalFile(n.path)}).then(function(o){return i.uploadFileEntry(o,n.delete,e,r,t)}):Promise.reject("No file received")}).then(function(e){i.fileUploaded(e)}).catch(function(e){e&&i.domUtils.showErrorModal(e)}),!1):(i.domUtils.showErrorModal("core.fileuploader.errormustbeonlinetoupload",!0),!1))}})}),this.actionSheet=this.actionSheetCtrl.create({title:n||this.translate.instant("core.fileuploader."+(r?"uploadafile":"selectafile")),buttons:l}),this.actionSheet.present(),setTimeout(function(){a.forEach(function(n){n.afterRender&&n.afterRender(e,r,t,n.mimetypes)})},500),this.filePickerDeferred.promise},e.prototype.showConfirmAndUploadInSite=function(e,t,n){var o=this;return this.fileProvider.getFileObjectFromFileEntry(e).then(function(r){return o.confirmUploadFile(r.size).then(function(){return o.uploadGenericFile(e.toURL(),r.name,r.type,t,n).then(function(){o.domUtils.showToast("core.fileuploader.fileuploaded",!0,void 0,"core-toast-success")})}).catch(function(e){return e&&o.domUtils.showErrorModal(e),Promise.reject(null)})},function(){return o.domUtils.showErrorModal("core.fileuploader.errorreadingfile",!0),Promise.reject(null)})},e.prototype.treatCaptureError=function(e,t){if(e){if("string"==typeof e)return this.logger.error("Error while recording audio/video: "+e),e.indexOf("No Activity found")>-1?Promise.reject(this.translate.instant("core.fileuploader.errornoapp")):Promise.reject(this.translate.instant(t));if(3!=e.code)return this.logger.error("Error while recording audio/video",e),Promise.reject(this.translate.instant(t));this.logger.debug("Cancelled")}return Promise.reject(null)},e.prototype.treatImageError=function(e,t){if(e){if("string"!=typeof e)return Promise.reject(this.translate.instant(t));if(e.toLowerCase().indexOf("error")>-1||e.toLowerCase().indexOf("unable")>-1)return this.logger.error("Error getting image: "+e),Promise.reject(e);this.logger.debug("Cancelled")}return Promise.reject(null)},e.prototype.uploadAudioOrVideo=function(e,t,n,o){var r=this;this.logger.debug("Trying to record a "+(e?"audio":"video")+" file");var i={limit:1,mimetypes:o};return(e?this.fileUploaderProvider.captureAudio(i):this.fileUploaderProvider.captureVideo(i)).then(function(e){var i=e[0],l=i.fullPath,a=r.fileUploaderProvider.isInvalidMimetype(o,l);if(a)return Promise.reject(a);r.appProvider.isMobile()&&-1==l.indexOf("file://")&&(l="file://"+l);var s=r.fileUploaderProvider.getMediaUploadOptions(i);return n?r.uploadFile(l,t,!0,s):r.copyToTmpFolder(l,!0,t,void 0,s)},function(t){return r.treatCaptureError(t,e?"core.fileuploader.errorcapturingaudio":"core.fileuploader.errorcapturingvideo")})},e.prototype.uploadGenericFile=function(e,t,n,o,r){var i=this.fileUploaderProvider.getFileUploadOptions(e,t,n,o);return this.uploadFile(e,-1,!1,i,r)},e.prototype.uploadImage=function(e,t,n,o){var r=this;this.logger.debug("Trying to capture an image with camera");var i={quality:50,destinationType:this.camera.DestinationType.FILE_URI,correctOrientation:!0};if(e){var l=!o||this.utils.indexOfRegexp(o,/^image\//)>-1,a=!o||this.utils.indexOfRegexp(o,/^video\//)>-1;i.sourceType=this.camera.PictureSourceType.PHOTOLIBRARY,i.popoverOptions={x:10,y:10,width:this.platform.width()-200,height:this.platform.height()-200,arrowDir:this.camera.PopoverArrowDirection.ARROW_ANY},l&&!a?i.mediaType=this.camera.MediaType.PICTURE:!l&&a?i.mediaType=this.camera.MediaType.VIDEO:this.platform.is("ios")&&(i.mediaType=this.camera.MediaType.ALLMEDIA)}else o&&(o.indexOf("image/jpeg")>-1?i.encodingType=this.camera.EncodingType.JPEG:o.indexOf("image/png")>-1&&(i.encodingType=this.camera.EncodingType.PNG));return this.fileUploaderProvider.getPicture(i).then(function(i){var l=r.fileUploaderProvider.isInvalidMimetype(o,i);if(l)return Promise.reject(l);var a=r.fileUploaderProvider.getCameraUploadOptions(i,e);return n?r.uploadFile(i,t,!0,a):r.copyToTmpFolder(i,!e,t,"jpg",a)},function(t){return r.treatImageError(t,e?"core.fileuploader.errorgettingimagealbum":"core.fileuploader.errorcapturingimage")})},e.prototype.uploadFileEntry=function(e,t,n,o,r,i){var l=this;return this.fileProvider.getFileObjectFromFileEntry(e).then(function(a){return l.uploadFileObject(a,n,o,r,i).then(function(n){return t&&l.fileProvider.removeFileByFileEntry(e),n})})},e.prototype.uploadFileObject=function(e,t,n,o,r){var i=this;return-1!=t&&e.size>t?this.errorMaxBytes(t,e.name):this.confirmUploadFile(e.size,!1,o).then(function(){return i.copyAndUploadFile(e,n,r)})},e.prototype.uploadFile=function(e,t,n,o,r){var i,l=this,a=this.translate.instant("core.error"),s=this.translate.instant("core.retry"),u=this.translate.instant("core.fileuploader.uploading"),c=function(i){return l.domUtils.showConfirm(i,a,s).then(function(){return l.uploadFile(e,t,n,o,r)},function(){return o.deleteAfterUpload&&l.fileProvider.removeExternalFile(e),Promise.reject(null)})};return this.appProvider.isOnline()?(n?this.fileProvider.getExternalFile(e).then(function(e){return l.fileProvider.getFileObjectFromFileEntry(e).then(function(e){return(i=e).size})}).catch(function(){}):Promise.resolve(0)).then(function(e){return-1!=t&&e>t?l.errorMaxBytes(t,i.name):e>0?l.confirmUploadFile(e):void 0}).then(function(){var t=l.domUtils.showModalLoading(u);return l.fileUploaderProvider.uploadFile(e,o,function(e){l.showProgressModal(t,"core.fileuploader.uploadingperc",e)},r).catch(function(e){return l.logger.error("Error uploading file.",e),t.dismiss(),"string"!=typeof e&&(e=l.translate.instant("core.fileuploader.errorwhileuploading")),c(e)}).finally(function(){t.dismiss()})}):c(this.translate.instant("core.fileuploader.errormustbeonlinetoupload"))},e.prototype.showProgressModal=function(e,t,n){if(n&&n.lengthComputable){var o=Math.min(n.loaded/n.total*100,100);o>=0&&(e.setContent(this.translate.instant(t,{$a:o.toFixed(1)})),e._cmp&&e._cmp.changeDetectorRef&&e._cmp.changeDetectorRef.detectChanges())}},e=m([Object(o.A)(),_("design:paramtypes",[u.a,a.a,l.c,p.a,c.a,d.a,s.a,f.a,r.a,h.a,i.a,r.v])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(3),i=n(14),l=(n.n(i),n(426)),a=n(5),s=n(10),u=n(126),c=n(116),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r){var i=this;this.translate=e,this.configProvider=t,this.globalization=o,this.config=r,this.fallbackLanguage="en",this.defaultLanguage=c.a.default_lang||"en",this.customStrings={},this.sitePluginsStrings={},e.setDefaultLang(this.fallbackLanguage),e.use(this.defaultLanguage),n.ready().then(function(){s.a.isAutomated()?i.changeCurrentLanguage("en"):i.getCurrentLanguage().then(function(e){i.changeCurrentLanguage(e)})}),e.onLangChange.subscribe(function(e){n.setLang(e.lang,!0),n.setDir(i.translate.instant("core.thisdirection"),!0)})}return e.prototype.addSitePluginsStrings=function(e,t,n){e=e.replace(/_/g,"-"),this.sitePluginsStrings[e]||(this.sitePluginsStrings[e]={});for(var o in t){var r=n+o,i=t[o];this.customStrings[e]&&this.customStrings[e][r]||(i=(i=(i=i.replace(/\$a->/gm,"$a.")).replace(/{([^ ]+)}/gm,"{{$1}}")).replace(/{{{([^ ]+)}}}/gm,"{{$1}}"),this.loadString(this.sitePluginsStrings,e,r,i))}},e.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.changeCurrentLanguage=function(e){var t=this,n=[];return n.push(new Promise(function(n,o){var r=t.translate.use(e).subscribe(function(o){var i=t.translate.instant("core.parentlanguage");if(""!=i&&"core.parentlanguage"!=i&&i!=e)var l=t.translate.use(i).subscribe(function(e){o=Object.assign(e,o),n(o),setTimeout(function(){l.unsubscribe()})},function(e){n(o),setTimeout(function(){l.unsubscribe()})});else n(o);setTimeout(function(){r.unsubscribe()})},function(e){o(e),setTimeout(function(){r.unsubscribe()})})})),n.push(this.configProvider.set("current_language",e)),i.locale("en"==e?"en-gb":e),this.config.set("monthNames",i.months().map(this.capitalize.bind(this))),this.config.set("monthShortNames",i.monthsShort().map(this.capitalize.bind(this))),this.config.set("dayNames",i.weekdays().map(this.capitalize.bind(this))),this.config.set("dayShortNames",i.weekdaysShort().map(this.capitalize.bind(this))),this.currentLanguage=e,Promise.all(n).finally(function(){(t.loadLangStrings(t.customStrings,e)||t.loadLangStrings(t.sitePluginsStrings,e))&&t.translate.onLangChange.emit({lang:e,translations:t.translate.translations[e]})})},e.prototype.clearCustomStrings=function(){this.unloadStrings(this.customStrings),this.customStrings={},this.customStringsRaw=""},e.prototype.clearSitePluginsStrings=function(){this.unloadStrings(this.sitePluginsStrings),this.sitePluginsStrings={}},e.prototype.getAllCustomStrings=function(){return this.customStrings},e.prototype.getAllSitePluginsStrings=function(){return this.sitePluginsStrings},e.prototype.getCurrentLanguage=function(){var e=this;return void 0!==this.currentLanguage?Promise.resolve(this.currentLanguage):this.configProvider.get("current_language").then(function(e){return e}).catch(function(){if(c.a.default_lang&&c.a.forcedefaultlanguage)return c.a.default_lang;try{return e.globalization.getPreferredLanguage().then(function(t){var n=t.value.toLowerCase();return n.indexOf("-")>-1&&c.a.languages&&void 0===c.a.languages[n]&&(n=n.substr(0,n.indexOf("-"))),void 0===c.a.languages[n]?e.defaultLanguage:n}).catch(function(){return e.defaultLanguage})}catch(t){return Promise.resolve(e.defaultLanguage)}}).then(function(t){return e.currentLanguage=t,t})},e.prototype.getDefaultLanguage=function(){return this.defaultLanguage},e.prototype.getFallbackLanguage=function(){return this.fallbackLanguage},e.prototype.getTranslationTable=function(e){var t=this;return new Promise(function(n,o){var r=t.translate.getTranslation(e).subscribe(function(e){n(e),r.unsubscribe()},function(e){o(e),r.unsubscribe()})})},e.prototype.loadCustomStrings=function(e){var t=this;if(e!=this.customStringsRaw&&(this.clearCustomStrings(),e)){var n=!1;e.split(/(?:\r\n|\r|\n)/).forEach(function(e){var o,r=e.split("|");if(!(r.length<3)){(o=r[2].replace(/_/g,"-"))==t.currentLanguage&&(n=!0),t.customStrings[o]||(t.customStrings[o]={});var i=r[0].replace(/^mm\.core/,"core").replace(/^mm\./,"core.").replace(/^mma\./,"addon.").replace(/^core\.sidemenu/,"core.mainmenu").replace(/^addon\.grades/,"core.grades").replace(/^addon\.participants/,"core.user");t.loadString(t.customStrings,o,i,r[1])}}),this.customStringsRaw=e,n&&this.translate.onLangChange.emit({lang:this.currentLanguage,translations:this.translate.translations[this.currentLanguage]})}},e.prototype.loadLangStrings=function(e,t){var n=!1;if(e[t])for(var o in e[t]){var r=e[t][o];r.applied||(r.original=this.translate.translations[t][o],this.translate.translations[t][o]=r.value,r.applied=!0,n=!0)}return n},e.prototype.loadString=function(e,t,n,o){t=t.replace(/_/g,"-"),this.translate.translations[t]?(e[t][n]={original:this.translate.translations[t][n],value:o,applied:!0},this.translate.translations[t][n]=o):e[t][n]={value:o,applied:!1}},e.prototype.unloadStrings=function(e){for(var t in e)if(this.translate.translations[t]){var n=e[t];for(var o in n){var r=n[o];r.original?this.translate.translations[t][o]=r.original:delete this.translate.translations[t][o]}}},e=d([Object(o.A)(),f("design:paramtypes",[r.c,u.a,a.v,l.a,a.e])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(5),i=n(354),l=n(353),a=n(3),s=n(10),u=n(126),c=n(9),d=n(6),f=n(11),p=n(2),h=n(40),m=n(116),_=n(146),g=(n.n(_),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},P=function(){function e(e,t,n,o,r,i,l,a,s,u,d,f){var p=this;this.localNotifications=t,this.platform=n,this.appProvider=o,this.utils=r,this.configProvider=i,this.textUtils=l,this.translate=a,this.alertCtrl=s,this.push=d,this.zone=f,this.SITES_TABLE="notification_sites",this.COMPONENTS_TABLE="notification_components",this.TRIGGERED_TABLE="notifications_triggered",this.tablesSchema={name:"CoreLocalNotificationsProvider",version:1,tables:[{name:this.SITES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"code",type:"INTEGER",notNull:!0}]},{name:this.COMPONENTS_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"code",type:"INTEGER",notNull:!0}]},{name:this.TRIGGERED_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"at",type:"INTEGER",notNull:!0}]}]},this.codes={},this.codeRequestsQueue={},this.observables={},this.currentNotification={title:"",texts:[],ids:[],timeouts:[]},this.logger=e.getInstance("CoreLocalNotificationsProvider"),this.appDB=o.getDB(),this.dbReady=o.createTablesFromSchema(this.tablesSchema).catch(function(){}),n.ready().then(function(){p.triggerSubscription=t.on("trigger").subscribe(function(e){p.trigger(e),p.handleEvent("trigger",e)}),p.clickSubscription=t.on("click").subscribe(function(e){p.handleEvent("click",e)}),p.clearSubscription=t.on("clear").subscribe(function(e){p.handleEvent("clear",e)}),p.cancelSubscription=t.on("cancel").subscribe(function(e){p.handleEvent("cancel",e)}),p.addSubscription=t.on("schedule").subscribe(function(e){p.handleEvent("schedule",e)}),p.updateSubscription=t.on("update").subscribe(function(e){p.handleEvent("update",e)}),p.createDefaultChannel(),a.onLangChange.subscribe(function(e){p.createDefaultChannel()})}),u.on(c.a.SITE_DELETED,function(e){e&&p.cancelSiteNotifications(e.id)})}return e.prototype.cancel=function(e,t,n){var o=this;return this.getUniqueNotificationId(e,t,n).then(function(e){return o.localNotifications.cancel(e)})},e.prototype.cancelSiteNotifications=function(e){var t=this;return this.isAvailable()?e?this.localNotifications.getScheduled().then(function(n){var o=[];return n.forEach(function(n){"string"==typeof n.data&&(n.data=t.textUtils.parseJSON(n.data)),"object"==typeof n.data&&n.data.siteId===e&&o.push(n.id)}),t.localNotifications.cancel(o)}):Promise.reject(null):Promise.resolve()},e.prototype.canDisableSound=function(){return this.isAvailable()&&!this.appProvider.isDesktop()&&this.platform.is("android")&&this.platform.version().major<8},e.prototype.createDefaultChannel=function(){var e=this;return this.platform.is("android")?this.push.createChannel({id:"default-channel-id",description:this.translate.instant("addon.calendar.calendarreminders"),importance:4}).catch(function(t){e.logger.error("Error changing channel name",t)}):Promise.resolve()},e.prototype.getCode=function(e,t){return y(this,void 0,void 0,function(){var n,o,r,i;return b(this,function(l){switch(l.label){case 0:return[4,this.dbReady];case 1:if(l.sent(),n=e+"#"+t,void 0!==this.codes[n])return[2,this.codes[n]];l.label=2;case 2:return l.trys.push([2,4,,7]),[4,this.appDB.getRecord(e,{id:t})];case 3:return o=l.sent(),this.codes[n]=o.code,[2,o.code];case 4:return l.sent(),[4,this.appDB.getRecords(e,void 0,"code DESC")];case 5:return r=l.sent(),i=0,r.length>0&&(i=r[0].code+1),[4,this.appDB.insertRecord(e,{id:t,code:i})];case 6:return l.sent(),this.codes[n]=i,[2,i];case 7:return[2]}})})},e.prototype.getComponentCode=function(e){return this.requestCode(this.COMPONENTS_TABLE,e)},e.prototype.getSiteCode=function(e){return this.requestCode(this.SITES_TABLE,e)},e.prototype.getUniqueNotificationId=function(e,t,n){var o=this;return n&&t?this.getSiteCode(n).then(function(n){return o.getComponentCode(t).then(function(t){return(1e8*n+1e7*t+e)%2147483647})}):Promise.reject(null)},e.prototype.handleEvent=function(e,t){t&&t.data&&(this.logger.debug("Notification event: "+e+". Data:",t.data),this.notifyEvent(e,t.data))},e.prototype.isAvailable=function(){var e=window;return this.appProvider.isDesktop()||!!(e.cordova&&e.cordova.plugins&&e.cordova.plugins.notification&&e.cordova.plugins.notification.local)},e.prototype.isTriggered=function(e){return y(this,void 0,void 0,function(){var t,n;return b(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.appDB.getRecord(this.TRIGGERED_TABLE,{id:e.id})];case 3:return t=o.sent(),"number"!=typeof(n=e.trigger&&e.trigger.at||0)&&(n=n.getTime()),[2,t.at===n];case 4:return o.sent(),[2,this.localNotifications.isTriggered(e.id)];case 5:return[2]}})})},e.prototype.notifyClick=function(e){this.notifyEvent("click",e)},e.prototype.notifyEvent=function(e,t){var n=this;this.zone.run(function(){var o=t.component;o&&n.observables[e]&&n.observables[e][o]&&n.observables[e][o].next(t)})},e.prototype.processNextRequest=function(){var e,t=this,n=Object.keys(this.codeRequestsQueue)[0];void 0!==n&&("object"==typeof(e=this.codeRequestsQueue[n])&&void 0!==e.table&&void 0!==e.id?this.getCode(e.table,e.id).then(function(t){e.promises.forEach(function(e){e.resolve(t)})}).catch(function(t){e.promises.forEach(function(e){e.reject(t)})}):Promise.resolve()).finally(function(){delete t.codeRequestsQueue[n],t.processNextRequest()})},e.prototype.registerClick=function(e,t){return this.registerObserver("click",e,t)},e.prototype.registerObserver=function(e,t,n){var o=this;return this.logger.debug("Register observer '"+t+"' for event '"+e+"'."),void 0===this.observables[e]&&(this.observables[e]={}),void 0===this.observables[e][t]&&(this.observables[e][t]=new _.Subject),this.observables[e][t].subscribe(n),{off:function(){o.observables[e][t].unsubscribe(n)}}},e.prototype.removeTriggered=function(e){return y(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.deleteRecords(this.TRIGGERED_TABLE,{id:e})]}})})},e.prototype.requestCode=function(e,t){var n=this.utils.promiseDefer(),o=e+"#"+t,r=0==Object.keys(this.codeRequestsQueue).length;return void 0!==this.codeRequestsQueue[o]?this.codeRequestsQueue[o].promises.push(n):this.codeRequestsQueue[o]={table:e,id:t,promises:[n]},r&&this.processNextRequest(),n.promise},e.prototype.rescheduleAll=function(){var e=this;return this.localNotifications.getScheduled().then(function(t){var n=[];return t.forEach(function(t){t.data=t.data?e.textUtils.parseJSON(t.data,{}):{},n.push(e.scheduleNotification(t))}),Promise.all(n)})},e.prototype.schedule=function(e,t,n,o){var r=this;return(o?Promise.resolve(e.id):this.getUniqueNotificationId(e.id,t,n)).then(function(o){if(e.id=o,e.data=e.data||{},e.data.component=t,e.data.siteId=n,r.platform.is("android")){e.icon=e.icon||"res://icon",e.smallIcon=e.smallIcon||"res://smallicon",e.color=e.color||m.a.notificoncolor;var i=e.led||{};e.led={color:i.color||"FF9900",on:i.on||1e3,off:i.off||1e3}}return r.scheduleNotification(e)})},e.prototype.scheduleNotification=function(e){var t=this;return this.isTriggered(e).then(function(n){return t.localNotifications.cancel(e.id).finally(function(){if(!n){return(t.canDisableSound()?t.configProvider.get(h.a.SETTINGS_NOTIFICATION_SOUND,!0):Promise.resolve(!0)).then(function(n){n?delete e.sound:e.sound=null,e.foreground=!0,t.removeTriggered(e.id),t.localNotifications.schedule(e)})}})})},e.prototype.showNotificationPopover=function(e){var t=this;if(e&&e.title&&e.text){var n=function(e){if(void 0===e&&(e=!1),!e&&t.alertNotification&&t.currentNotification.ids.length>1){t.currentNotification.texts.shift(),t.currentNotification.ids.shift(),clearTimeout(t.currentNotification.timeouts.shift());var n="<p>"+t.currentNotification.texts.join("</p><p>")+"</p>";t.alertNotification.setMessage(n)}else t.alertNotification&&!e&&t.alertNotification.dismiss(),t.alertNotification=null,t.currentNotification.title="",t.currentNotification.texts=[],t.currentNotification.ids=[],t.currentNotification.timeouts.forEach(function(e){clearTimeout(e)}),t.currentNotification.timeouts=[]};if(this.alertNotification&&this.currentNotification.title==e.title){if(-1!=this.currentNotification.ids.indexOf(e.id))return;this.currentNotification.texts.push(e.text),this.currentNotification.ids.push(e.id),this.currentNotification.texts.length>3&&(this.currentNotification.texts.shift(),this.currentNotification.ids.shift(),clearTimeout(this.currentNotification.timeouts.shift()))}else this.currentNotification.timeouts.forEach(function(e){clearTimeout(e)}),this.currentNotification.timeouts=[],this.currentNotification.title=e.title,this.currentNotification.texts=[e.text],this.currentNotification.ids=[e.id];var o="<p>"+this.currentNotification.texts.join("</p><p>")+"</p>";this.alertNotification?(this.alertNotification.setTitle(this.currentNotification.title),this.alertNotification.setMessage(o)):this.alertNotification=this.alertCtrl.create({title:this.currentNotification.title,message:o,cssClass:"core-inapp-notification",enableBackdropDismiss:!1,buttons:[{text:this.translate.instant("core.dismiss"),role:"cancel",handler:function(){n(!0)}}]}),this.alertNotification.present(),this.currentNotification.timeouts.push(setTimeout(function(){n()},4e3))}},e.prototype.trigger=function(e){return y(this,void 0,void 0,function(){var t;return b(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),t={id:e.id,at:e.trigger&&e.trigger.at?e.trigger.at:Date.now()},[2,this.appDB.insertRecord(this.TRIGGERED_TABLE,t)]}})})},e.prototype.updateComponentName=function(e,t){return y(this,void 0,void 0,function(){var n,o;return b(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),n=this.COMPONENTS_TABLE+"#"+e,o=this.COMPONENTS_TABLE+"#"+t,[2,this.appDB.updateRecords(this.COMPONENTS_TABLE,{id:o},{id:n})]}})})},e=g([Object(o.A)(),v("design:paramtypes",[d.a,i.a,r.v,s.a,p.a,u.a,f.a,a.c,r.b,c.a,l.a,o.M])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(98),s=n(585),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,"AddonModAssignFeedbackDelegate",t,n,o)||this;return i.defaultHandler=r,i.handlerNameProperty="type",i}return u(t,e),t.prototype.discardPluginFeedbackData=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"discardDraft",[e,t,o]))},t.prototype.getComponentForPlugin=function(e,t){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getComponent",[e,t]))},t.prototype.getPluginDraftData=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getDraft",[e,t,o]))},t.prototype.getPluginFiles=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getPluginFiles",[e,t,n,o]))},t.prototype.getPluginName=function(e){return this.executeFunctionOnEnabled(e.type,"getPluginName",[e])},t.prototype.hasPluginDataChanged=function(e,t,n,o,r){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"hasDataChanged",[e,t,n,o,r]))},t.prototype.hasPluginDraftData=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"hasDraftData",[e,t,o]))},t.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},t.prototype.prefetch=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"prefetch",[e,t,n,o]))},t.prototype.preparePluginFeedbackData=function(e,t,n,o,r){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"prepareFeedbackData",[e,t,n,o,r]))},t.prototype.saveFeedbackDraft=function(e,t,n,o,r){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"saveDraft",[e,t,n,o,r]))},t=c([Object(o.A)(),d("design:paramtypes",[r.a,l.a,i.a,s.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(10),i=n(2),l=n(1),a=n(53),s=n(388),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.sitesProvider=e,this.utils=t,this.appProvider=n,this.commentsOffline=o,this.ROOT_CACHE_KEY="mmComments:"}return t=e,e.prototype.addComment=function(e,t,n,o,r,i,l){var a=this;void 0===i&&(i=""),l=l||this.sitesProvider.getCurrentSiteId();var s=function(){return a.commentsOffline.saveComment(e,t,n,o,r,i,l).then(function(){return!1})};return this.appProvider.isOnline()?this.addCommentOnline(e,t,n,o,r,i,l).then(function(e){return e}).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):s()}):s()},e.prototype.addCommentOnline=function(e,t,n,o,r,i,l){var a=this;void 0===i&&(i="");return this.addCommentsOnline([{contextlevel:t,instanceid:n,component:o,itemid:r,area:i,content:e}],l).then(function(e){return a.invalidateCommentsData(t,n,o,r,i,l).catch(function(){}).then(function(){return e})})},e.prototype.addCommentsOnline=function(e,t){return e&&e.length?this.sitesProvider.getSite(t).then(function(t){return t.write("core_comment_add_comments",{comments:e})}):Promise.resolve()},e.prototype.areCommentsDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CoreComments")},e.prototype.areCommentsDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.areCommentsDisabledInSite(e)})},e.prototype.deleteComment=function(e,t){var n=this;if(t=t||this.sitesProvider.getCurrentSiteId(),!e.id)return this.commentsOffline.removeComment(e.contextlevel,e.instanceid,e.component,e.itemid,e.area,t).then(function(){return!1});var o=function(){return n.commentsOffline.deleteComment(e.id,e.contextlevel,e.instanceid,e.component,e.itemid,e.area,t).then(function(){return!1})};return this.appProvider.isOnline()?this.deleteCommentsOnline([e.id],e.contextlevel,e.instanceid,e.component,e.itemid,e.area,t).then(function(){return!0}).catch(function(e){return n.utils.isWebServiceError(e)?Promise.reject(e):o()}):o()},e.prototype.deleteCommentsOnline=function(e,t,n,o,r,i,l){var a=this;return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(s){return s.write("core_comment_delete_comments",{comments:e}).then(function(e){return a.invalidateCommentsData(t,n,o,r,i,l).catch(function(){})})})},e.prototype.isAddCommentsAvailable=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return!t.areCommentsDisabledInSite(e)&&e.wsAvailable("core_comment_add_comments")})},e.prototype.getCommentsCacheKey=function(e,t,n,o,r){return void 0===r&&(r=""),this.getCommentsPrefixCacheKey(e,t)+":"+n+":"+o+":"+r},e.prototype.getCommentsPrefixCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"comments:"+e+":"+t},e.prototype.getComments=function(e,n,o,r,i,l,s){var u=this;return void 0===i&&(i=""),void 0===l&&(l=0),this.sitesProvider.getSite(s).then(function(s){var c={contextlevel:e,instanceid:n,component:o,itemid:r,area:i,page:l},d={cacheKey:u.getCommentsCacheKey(e,n,o,r,i),updateFrequency:a.a.FREQUENCY_SOMETIMES};return s.read("core_comment_get_comments",c,d).then(function(e){return e.comments?(void 0===e.count&&e.comments.length>t.pageSize&&(t.pageSize=e.comments.length),e):Promise.reject(null)})})},e.prototype.getCommentsCount=function(e,n,o,r,i,l){var a=this;void 0===i&&(i=""),l=l||this.sitesProvider.getCurrentSiteId();var s=!1,u=function(t){return a.getComments(e,n,o,r,i,t,l).then(function(e){return void 0!==e.count?(s=!0,e.count):e.comments?e.comments.length||0:-1}).catch(function(){return-1})};return u(0).then(function(e){return s||e<t.pageSize?e+"":t.pageSizeOK&&e>=t.pageSize?t.pageSize-1+"+":u(1).then(function(n){return n>0?(t.pageSizeOK=!0,t.pageSize-1+"+"):e+""})})},e.prototype.invalidateCommentsData=function(e,t,n,o,r,i){var l=this;return void 0===r&&(r=""),this.sitesProvider.getSite(i).then(function(i){return l.utils.allPromises([i.invalidateWsCacheForKeyStartingWith(l.getCommentsCacheKey(e,t,n,o,r)+":"),i.invalidateWsCacheForKey(l.getCommentsCacheKey(e,t,n,o,r))])})},e.prototype.invalidateCommentsByInstance=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(o.getCommentsPrefixCacheKey(e,t))})},e.REFRESH_COMMENTS_EVENT="core_comments_refresh_comments",e.COMMENTS_COUNT_CHANGED_EVENT="core_comments_count_changed",e.pageSize=1,e.pageSizeOK=!1,e=t=u([Object(o.A)(),c("design:paramtypes",[l.a,i.a,r.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(6),l=n(2),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.utils=n,this.initProcesses={},this.logger=e.getInstance("CoreInitDelegate")}return t=e,e.prototype.executeInitProcesses=function(){var e=this,t=[];void 0===this.readiness&&this.initReadiness();for(var n in this.initProcesses)t.push(this.initProcesses[n]);t.sort(function(e,t){return t.priority-e.priority}),t=t.map(function(t){return{context:e,func:e.prepareProcess,params:[t],blocking:!!t.blocking}}),this.utils.executeOrderedPromises(t).finally(this.readiness.resolve)},e.prototype.initReadiness=function(){var e=this;this.readiness=this.utils.promiseDefer(),this.readiness.promise.then(function(){return e.readiness.resolved=!0})},e.prototype.isReady=function(){return this.readiness.resolved},e.prototype.prepareProcess=function(e){var t;this.logger.debug("Executing init process '"+e.name+"'");try{t=e.load()}catch(t){return void this.logger.error("Error while calling the init process '"+e.name+"'. "+t)}return t},e.prototype.ready=function(){return void 0===this.readiness&&this.initReadiness(),this.readiness.promise},e.prototype.registerProcess=function(e){void 0===e.priority&&(e.priority=t.DEFAULT_PRIORITY),void 0===this.initProcesses[e.name]?(this.logger.log("Registering process '"+e.name+"'."),this.initProcesses[e.name]=e):this.logger.log("Process '"+e.name+"' already registered.")},e.DEFAULT_PRIORITY=100,e.MAX_RECOMMENDED_PRIORITY=600,e=t=a([Object(o.A)(),s("design:paramtypes",[i.a,r.v,l.a])],e);var t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return CoreCompileProvider});var __WEBPACK_IMPORTED_MODULE_0__angular_core__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_dynamic__=__webpack_require__(593),__WEBPACK_IMPORTED_MODULE_2_ionic_angular__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_3__ngx_translate_core__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_4__providers_logger__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_5__app_app_module__=__webpack_require__(535),__WEBPACK_IMPORTED_MODULE_6__core_block_block_module__=__webpack_require__(594),__WEBPACK_IMPORTED_MODULE_7__core_contentlinks_contentlinks_module__=__webpack_require__(595),__WEBPACK_IMPORTED_MODULE_8__core_course_course_module__=__webpack_require__(596),__WEBPACK_IMPORTED_MODULE_9__core_courses_courses_module__=__webpack_require__(598),__WEBPACK_IMPORTED_MODULE_10__core_fileuploader_fileuploader_module__=__webpack_require__(600),__WEBPACK_IMPORTED_MODULE_11__core_filter_filter_module__=__webpack_require__(601),__WEBPACK_IMPORTED_MODULE_12__core_grades_grades_module__=__webpack_require__(602),__WEBPACK_IMPORTED_MODULE_13__core_h5p_h5p_module__=__webpack_require__(603),__WEBPACK_IMPORTED_MODULE_14__core_login_login_module__=__webpack_require__(606),__WEBPACK_IMPORTED_MODULE_15__core_mainmenu_mainmenu_module__=__webpack_require__(607),__WEBPACK_IMPORTED_MODULE_16__core_question_question_module__=__webpack_require__(608),__WEBPACK_IMPORTED_MODULE_17__core_sharedfiles_sharedfiles_module__=__webpack_require__(611),__WEBPACK_IMPORTED_MODULE_18__core_sitehome_sitehome_module__=__webpack_require__(612),__WEBPACK_IMPORTED_MODULE_19__core_user_user_module__=__webpack_require__(613),__WEBPACK_IMPORTED_MODULE_20__core_pushnotifications_pushnotifications_module__=__webpack_require__(616),__WEBPACK_IMPORTED_MODULE_21__core_emulator_emulator_module__=__webpack_require__(617),__WEBPACK_IMPORTED_MODULE_22__core_siteplugins_providers_siteplugins__=__webpack_require__(58),__WEBPACK_IMPORTED_MODULE_23__angular_platform_browser__=__webpack_require__(79),__WEBPACK_IMPORTED_MODULE_24__angular_forms__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_25__angular_common_http__=__webpack_require__(262),__WEBPACK_IMPORTED_MODULE_26__configconstants__=__webpack_require__(116),__WEBPACK_IMPORTED_MODULE_27__core_constants__=__webpack_require__(40),__WEBPACK_IMPORTED_MODULE_28_moment__=__webpack_require__(14),__WEBPACK_IMPORTED_MODULE_28_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_28_moment__),__WEBPACK_IMPORTED_MODULE_29_ts_md5_dist_md5__=__webpack_require__(194),__WEBPACK_IMPORTED_MODULE_29_ts_md5_dist_md5___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_29_ts_md5_dist_md5__),__WEBPACK_IMPORTED_MODULE_30__classes_base_sync__=__webpack_require__(148),__WEBPACK_IMPORTED_MODULE_31__classes_utils_url__=__webpack_require__(1619),__WEBPACK_IMPORTED_MODULE_32__classes_cache__=__webpack_require__(1055),__WEBPACK_IMPORTED_MODULE_33__classes_delegate__=__webpack_require__(98),__WEBPACK_IMPORTED_MODULE_34__core_contentlinks_classes_base_handler__=__webpack_require__(55),__WEBPACK_IMPORTED_MODULE_35__core_contentlinks_classes_module_grade_handler__=__webpack_require__(454),__WEBPACK_IMPORTED_MODULE_36__core_contentlinks_classes_module_index_handler__=__webpack_require__(99),__WEBPACK_IMPORTED_MODULE_37__core_course_classes_activity_prefetch_handler__=__webpack_require__(142),__WEBPACK_IMPORTED_MODULE_38__core_course_classes_resource_prefetch_handler__=__webpack_require__(244),__WEBPACK_IMPORTED_MODULE_39__components_components_module__=__webpack_require__(26),__WEBPACK_IMPORTED_MODULE_40__directives_directives_module__=__webpack_require__(31),__WEBPACK_IMPORTED_MODULE_41__pipes_pipes_module__=__webpack_require__(106),__WEBPACK_IMPORTED_MODULE_42__core_course_components_components_module__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_43__core_course_directives_directives_module__=__webpack_require__(1954),__WEBPACK_IMPORTED_MODULE_44__core_courses_components_components_module__=__webpack_require__(277),__WEBPACK_IMPORTED_MODULE_45__core_siteplugins_directives_directives_module__=__webpack_require__(1955),__WEBPACK_IMPORTED_MODULE_46__core_sitehome_components_components_module__=__webpack_require__(1559),__WEBPACK_IMPORTED_MODULE_47__core_user_components_components_module__=__webpack_require__(483),__WEBPACK_IMPORTED_MODULE_48__core_question_components_components_module__=__webpack_require__(1565),__WEBPACK_IMPORTED_MODULE_49__core_block_components_components_module__=__webpack_require__(271),__WEBPACK_IMPORTED_MODULE_50__core_course_components_unsupported_module_unsupported_module__=__webpack_require__(396),__WEBPACK_IMPORTED_MODULE_51__core_course_formats_singleactivity_components_singleactivity__=__webpack_require__(450),__WEBPACK_IMPORTED_MODULE_52__core_siteplugins_components_module_index_module_index__=__webpack_require__(392),__WEBPACK_IMPORTED_MODULE_53__core_siteplugins_components_block_block__=__webpack_require__(455),__WEBPACK_IMPORTED_MODULE_54__core_siteplugins_components_course_option_course_option__=__webpack_require__(456),__WEBPACK_IMPORTED_MODULE_55__core_siteplugins_components_course_format_course_format__=__webpack_require__(457),__WEBPACK_IMPORTED_MODULE_56__core_siteplugins_components_question_question__=__webpack_require__(458),__WEBPACK_IMPORTED_MODULE_57__core_siteplugins_components_question_behaviour_question_behaviour__=__webpack_require__(459),__WEBPACK_IMPORTED_MODULE_58__core_siteplugins_components_user_profile_field_user_profile_field__=__webpack_require__(460),__WEBPACK_IMPORTED_MODULE_59__core_siteplugins_components_quiz_access_rule_quiz_access_rule__=__webpack_require__(461),__WEBPACK_IMPORTED_MODULE_60__core_siteplugins_components_assign_feedback_assign_feedback__=__webpack_require__(462),__WEBPACK_IMPORTED_MODULE_61__core_siteplugins_components_assign_submission_assign_submission__=__webpack_require__(463),__WEBPACK_IMPORTED_MODULE_62__addon_badges_badges_module__=__webpack_require__(624),__WEBPACK_IMPORTED_MODULE_63__addon_calendar_calendar_module__=__webpack_require__(625),__WEBPACK_IMPORTED_MODULE_64__addon_competency_competency_module__=__webpack_require__(626),__WEBPACK_IMPORTED_MODULE_65__addon_files_files_module__=__webpack_require__(627),__WEBPACK_IMPORTED_MODULE_66__addon_messageoutput_messageoutput_module__=__webpack_require__(628),__WEBPACK_IMPORTED_MODULE_67__addon_messages_messages_module__=__webpack_require__(629),__WEBPACK_IMPORTED_MODULE_68__addon_mod_assign_assign_module__=__webpack_require__(632),__WEBPACK_IMPORTED_MODULE_69__addon_mod_book_book_module__=__webpack_require__(643),__WEBPACK_IMPORTED_MODULE_70__addon_mod_chat_chat_module__=__webpack_require__(644),__WEBPACK_IMPORTED_MODULE_71__addon_mod_choice_choice_module__=__webpack_require__(645),__WEBPACK_IMPORTED_MODULE_72__addon_mod_feedback_feedback_module__=__webpack_require__(646),__WEBPACK_IMPORTED_MODULE_73__addon_mod_folder_folder_module__=__webpack_require__(648),__WEBPACK_IMPORTED_MODULE_74__addon_mod_forum_forum_module__=__webpack_require__(649),__WEBPACK_IMPORTED_MODULE_75__addon_mod_glossary_glossary_module__=__webpack_require__(652),__WEBPACK_IMPORTED_MODULE_76__addon_mod_imscp_imscp_module__=__webpack_require__(654),__WEBPACK_IMPORTED_MODULE_77__addon_mod_lesson_lesson_module__=__webpack_require__(655),__WEBPACK_IMPORTED_MODULE_78__addon_mod_lti_lti_module__=__webpack_require__(656),__WEBPACK_IMPORTED_MODULE_79__addon_mod_page_page_module__=__webpack_require__(657),__WEBPACK_IMPORTED_MODULE_80__addon_mod_quiz_quiz_module__=__webpack_require__(658),__WEBPACK_IMPORTED_MODULE_81__addon_mod_resource_resource_module__=__webpack_require__(662),__WEBPACK_IMPORTED_MODULE_82__addon_mod_scorm_scorm_module__=__webpack_require__(663),__WEBPACK_IMPORTED_MODULE_83__addon_mod_survey_survey_module__=__webpack_require__(664),__WEBPACK_IMPORTED_MODULE_84__addon_mod_url_url_module__=__webpack_require__(666),__WEBPACK_IMPORTED_MODULE_85__addon_mod_wiki_wiki_module__=__webpack_require__(667),__WEBPACK_IMPORTED_MODULE_86__addon_mod_workshop_workshop_module__=__webpack_require__(669),__WEBPACK_IMPORTED_MODULE_87__addon_notes_notes_module__=__webpack_require__(674),__WEBPACK_IMPORTED_MODULE_88__addon_notifications_notifications_module__=__webpack_require__(675),__WEBPACK_IMPORTED_MODULE_89__addon_remotethemes_remotethemes_module__=__webpack_require__(676),__WEBPACK_IMPORTED_MODULE_90__addon_mod_assign_components_components_module__=__webpack_require__(1542),__WEBPACK_IMPORTED_MODULE_91__addon_mod_workshop_components_components_module__=__webpack_require__(484),__decorate=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},CoreCompileProvider=function(){function CoreCompileProvider(e,t,n){this.injector=e,this.OTHER_PROVIDERS=[__WEBPACK_IMPORTED_MODULE_3__ngx_translate_core__.c,__WEBPACK_IMPORTED_MODULE_25__angular_common_http__.c,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.v,__WEBPACK_IMPORTED_MODULE_23__angular_platform_browser__.c,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.a,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.b,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.n,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.q,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.w,__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.F,__WEBPACK_IMPORTED_MODULE_24__angular_forms__.d],this.IMPORTS=[__WEBPACK_IMPORTED_MODULE_2_ionic_angular__.k,__WEBPACK_IMPORTED_MODULE_3__ngx_translate_core__.b.forChild(),__WEBPACK_IMPORTED_MODULE_39__components_components_module__.a,__WEBPACK_IMPORTED_MODULE_40__directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_41__pipes_pipes_module__.a,__WEBPACK_IMPORTED_MODULE_42__core_course_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_44__core_courses_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_46__core_sitehome_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_47__core_user_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_43__core_course_directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_45__core_siteplugins_directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_48__core_question_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_90__addon_mod_assign_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_91__addon_mod_workshop_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_49__core_block_components_components_module__.a],this.logger=t.getInstance("CoreCompileProvider"),this.compiler=n.createCompiler()}return CoreCompileProvider.prototype.createAndCompileComponent=function(e,t,n){void 0===n&&(n=[]);var o=Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__.m)({template:e})(t),r=this.IMPORTS.concat(n),i=Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__.I)({imports:r,declarations:[o]})(function(){return function(){}}());try{return this.compiler.compileModuleAndAllComponentsAsync(i).then(function(e){for(var t in e.componentFactories){var n=e.componentFactories[t];if(n.componentType==o)return n}})}catch(e){return Promise.reject({message:"Template has some errors and cannot be displayed.",debuginfo:e})}},CoreCompileProvider.prototype.evalInContext=function(javascript){return eval(javascript)},CoreCompileProvider.prototype.executeJavascript=function(e,t){try{return this.evalInContext.call(e,t)}catch(e){this.logger.error("Error evaluating javascript",e)}},CoreCompileProvider.prototype.injectLibraries=function(e,t){void 0===t&&(t=[]);var n=__WEBPACK_IMPORTED_MODULE_5__app_app_module__.b.concat(__WEBPACK_IMPORTED_MODULE_7__core_contentlinks_contentlinks_module__.a).concat(__WEBPACK_IMPORTED_MODULE_8__core_course_course_module__.a).concat(__WEBPACK_IMPORTED_MODULE_9__core_courses_courses_module__.a).concat(__WEBPACK_IMPORTED_MODULE_10__core_fileuploader_fileuploader_module__.a).concat(__WEBPACK_IMPORTED_MODULE_12__core_grades_grades_module__.a).concat(__WEBPACK_IMPORTED_MODULE_14__core_login_login_module__.a).concat(__WEBPACK_IMPORTED_MODULE_15__core_mainmenu_mainmenu_module__.a).concat(__WEBPACK_IMPORTED_MODULE_17__core_sharedfiles_sharedfiles_module__.a).concat(__WEBPACK_IMPORTED_MODULE_18__core_sitehome_sitehome_module__.a).concat([__WEBPACK_IMPORTED_MODULE_22__core_siteplugins_providers_siteplugins__.a]).concat(__WEBPACK_IMPORTED_MODULE_19__core_user_user_module__.a).concat(__WEBPACK_IMPORTED_MODULE_16__core_question_question_module__.a).concat(__WEBPACK_IMPORTED_MODULE_21__core_emulator_emulator_module__.b).concat(this.OTHER_PROVIDERS).concat(t).concat(__WEBPACK_IMPORTED_MODULE_62__addon_badges_badges_module__.a).concat(__WEBPACK_IMPORTED_MODULE_63__addon_calendar_calendar_module__.a).concat(__WEBPACK_IMPORTED_MODULE_64__addon_competency_competency_module__.a).concat(__WEBPACK_IMPORTED_MODULE_65__addon_files_files_module__.a).concat(__WEBPACK_IMPORTED_MODULE_66__addon_messageoutput_messageoutput_module__.a).concat(__WEBPACK_IMPORTED_MODULE_67__addon_messages_messages_module__.a).concat(__WEBPACK_IMPORTED_MODULE_68__addon_mod_assign_assign_module__.a).concat(__WEBPACK_IMPORTED_MODULE_69__addon_mod_book_book_module__.a).concat(__WEBPACK_IMPORTED_MODULE_70__addon_mod_chat_chat_module__.a).concat(__WEBPACK_IMPORTED_MODULE_71__addon_mod_choice_choice_module__.a).concat(__WEBPACK_IMPORTED_MODULE_72__addon_mod_feedback_feedback_module__.a).concat(__WEBPACK_IMPORTED_MODULE_73__addon_mod_folder_folder_module__.a).concat(__WEBPACK_IMPORTED_MODULE_74__addon_mod_forum_forum_module__.a).concat(__WEBPACK_IMPORTED_MODULE_75__addon_mod_glossary_glossary_module__.a).concat(__WEBPACK_IMPORTED_MODULE_76__addon_mod_imscp_imscp_module__.a).concat(__WEBPACK_IMPORTED_MODULE_77__addon_mod_lesson_lesson_module__.a).concat(__WEBPACK_IMPORTED_MODULE_78__addon_mod_lti_lti_module__.a).concat(__WEBPACK_IMPORTED_MODULE_79__addon_mod_page_page_module__.a).concat(__WEBPACK_IMPORTED_MODULE_80__addon_mod_quiz_quiz_module__.a).concat(__WEBPACK_IMPORTED_MODULE_81__addon_mod_resource_resource_module__.a).concat(__WEBPACK_IMPORTED_MODULE_82__addon_mod_scorm_scorm_module__.a).concat(__WEBPACK_IMPORTED_MODULE_83__addon_mod_survey_survey_module__.a).concat(__WEBPACK_IMPORTED_MODULE_84__addon_mod_url_url_module__.a).concat(__WEBPACK_IMPORTED_MODULE_85__addon_mod_wiki_wiki_module__.a).concat(__WEBPACK_IMPORTED_MODULE_86__addon_mod_workshop_workshop_module__.a).concat(__WEBPACK_IMPORTED_MODULE_87__addon_notes_notes_module__.a).concat(__WEBPACK_IMPORTED_MODULE_88__addon_notifications_notifications_module__.a).concat(__WEBPACK_IMPORTED_MODULE_20__core_pushnotifications_pushnotifications_module__.a).concat(__WEBPACK_IMPORTED_MODULE_89__addon_remotethemes_remotethemes_module__.a).concat(__WEBPACK_IMPORTED_MODULE_6__core_block_block_module__.a).concat(__WEBPACK_IMPORTED_MODULE_11__core_filter_filter_module__.a).concat(__WEBPACK_IMPORTED_MODULE_13__core_h5p_h5p_module__.a);for(var o in n){var r=n[o];if("function"==typeof r&&r.name)try{e[r.name]=this.injector.get(r)}catch(e){this.logger.warn("Error injecting provider",r.name,e)}}e.CoreCompileProvider=this,e.injector=this.injector,e.Validators=__WEBPACK_IMPORTED_MODULE_24__angular_forms__.u,e.CoreConfigConstants=__WEBPACK_IMPORTED_MODULE_26__configconstants__.a,e.CoreConstants=__WEBPACK_IMPORTED_MODULE_27__core_constants__.a,e.moment=__WEBPACK_IMPORTED_MODULE_28_moment__,e.Md5=__WEBPACK_IMPORTED_MODULE_29_ts_md5_dist_md5__.Md5,e.CoreSyncBaseProvider=__WEBPACK_IMPORTED_MODULE_30__classes_base_sync__.a,e.CoreUrl=__WEBPACK_IMPORTED_MODULE_31__classes_utils_url__.a,e.CoreCache=__WEBPACK_IMPORTED_MODULE_32__classes_cache__.a,e.CoreDelegate=__WEBPACK_IMPORTED_MODULE_33__classes_delegate__.a,e.CoreContentLinksHandlerBase=__WEBPACK_IMPORTED_MODULE_34__core_contentlinks_classes_base_handler__.a,e.CoreContentLinksModuleGradeHandler=__WEBPACK_IMPORTED_MODULE_35__core_contentlinks_classes_module_grade_handler__.a,e.CoreContentLinksModuleIndexHandler=__WEBPACK_IMPORTED_MODULE_36__core_contentlinks_classes_module_index_handler__.a,e.CoreCourseActivityPrefetchHandlerBase=__WEBPACK_IMPORTED_MODULE_37__core_course_classes_activity_prefetch_handler__.a,e.CoreCourseResourcePrefetchHandlerBase=__WEBPACK_IMPORTED_MODULE_38__core_course_classes_resource_prefetch_handler__.a,e.CoreCourseUnsupportedModuleComponent=__WEBPACK_IMPORTED_MODULE_50__core_course_components_unsupported_module_unsupported_module__.a,e.CoreCourseFormatSingleActivityComponent=__WEBPACK_IMPORTED_MODULE_51__core_course_formats_singleactivity_components_singleactivity__.a,e.CoreSitePluginsModuleIndexComponent=__WEBPACK_IMPORTED_MODULE_52__core_siteplugins_components_module_index_module_index__.a,e.CoreSitePluginsBlockComponent=__WEBPACK_IMPORTED_MODULE_53__core_siteplugins_components_block_block__.a,e.CoreSitePluginsCourseOptionComponent=__WEBPACK_IMPORTED_MODULE_54__core_siteplugins_components_course_option_course_option__.a,e.CoreSitePluginsCourseFormatComponent=__WEBPACK_IMPORTED_MODULE_55__core_siteplugins_components_course_format_course_format__.a,e.CoreSitePluginsQuestionComponent=__WEBPACK_IMPORTED_MODULE_56__core_siteplugins_components_question_question__.a,e.CoreSitePluginsQuestionBehaviourComponent=__WEBPACK_IMPORTED_MODULE_57__core_siteplugins_components_question_behaviour_question_behaviour__.a,e.CoreSitePluginsUserProfileFieldComponent=__WEBPACK_IMPORTED_MODULE_58__core_siteplugins_components_user_profile_field_user_profile_field__.a,e.CoreSitePluginsQuizAccessRuleComponent=__WEBPACK_IMPORTED_MODULE_59__core_siteplugins_components_quiz_access_rule_quiz_access_rule__.a,e.CoreSitePluginsAssignFeedbackComponent=__WEBPACK_IMPORTED_MODULE_60__core_siteplugins_components_assign_feedback_assign_feedback__.a,e.CoreSitePluginsAssignSubmissionComponent=__WEBPACK_IMPORTED_MODULE_61__core_siteplugins_components_assign_submission_assign_submission__.a},CoreCompileProvider.prototype.instantiateDynamicComponent=function(e,t,n){return n=n||this.injector,this.createAndCompileComponent(e,t).then(function(e){if(e)return e.create(n,void 0,void 0,n.get(__WEBPACK_IMPORTED_MODULE_0__angular_core__.K))})},CoreCompileProvider=__decorate([Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__.A)(),__metadata("design:paramtypes",[__WEBPACK_IMPORTED_MODULE_0__angular_core__.C,__WEBPACK_IMPORTED_MODULE_4__providers_logger__.a,__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_dynamic__.a])],CoreCompileProvider)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(4),l=n(58),a=n(146),s=(n.n(a),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},d=function(){function e(e,t,n,r){this.domUtils=e,this.sitePluginsProvider=t,this.navCtrl=n,this.onContentLoaded=new o.v,this.onLoadingContent=new o.v,this.invalidateObservable=new a.Subject,this.differ=r.find([]).create()}return e.prototype.ngOnInit=function(){this.fetchContent()},e.prototype.ngDoCheck=function(){if(this.data&&this.jsData){this.differ.diff(this.data)&&(this.jsData=Object.assign(this.jsData,this.data))}},e.prototype.fetchContent=function(e){var t=this;return this.onLoadingContent.emit(e),this.forceCompile=!1,this.sitePluginsProvider.getContent(this.component,this.method,this.args,this.preSets).then(function(n){t.content=n.templates.length?n.templates[0].html:"",t.javascript=n.javascript,t.otherData=n.otherdata,t.data=t.data||{},t.forceCompile=!0,t.jsData=Object.assign(t.data,t.sitePluginsProvider.createDataForJS(t.initResult,n)),t.jsData.fetchContent=t.fetchContent.bind(t),t.jsData.openContent=t.openContent.bind(t),t.jsData.refreshContent=t.refreshContent.bind(t),t.jsData.updateContent=t.updateContent.bind(t),t.onContentLoaded.emit(e)}).catch(function(n){t.content="<div></div>",t.onContentLoaded.emit(e),t.domUtils.showErrorModalDefault(n,"core.errorloadingcontent",!0)}).finally(function(){t.dataLoaded=!0})},e.prototype.openContent=function(e,t,n,o,r,i){!0===r&&(r=this.data),this.navCtrl.push("CoreSitePluginsPluginPage",{title:e,component:n||this.component,method:o||this.method,args:t,initResult:this.initResult,jsData:r,preSets:i})},e.prototype.refreshContent=function(e){var t=this;return void 0===e&&(e=!0),e&&(this.dataLoaded=!1),this.invalidateObservable.next(),this.sitePluginsProvider.invalidateContent(this.component,this.method,this.args).finally(function(){return t.fetchContent(!0)})},e.prototype.updateContent=function(e,t,n,o,r){this.component=t||this.component,this.method=n||this.method,this.args=e,this.dataLoaded=!1,this.preSets=r||this.preSets,o&&Object.assign(this.data,o),this.fetchContent()},e.prototype.callComponentFunction=function(e,t){if(this.compileComponent)return this.compileComponent.callComponentFunction(e,t)},s([Object(o._9)("compile"),u("design:type",o.t)],e.prototype,"compileComponent",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"component",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"method",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"args",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"initResult",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"data",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"preSets",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"pageTitle",void 0),s([Object(o.O)(),u("design:type",o.v)],e.prototype,"onContentLoaded",void 0),s([Object(o.O)(),u("design:type",o.v)],e.prototype,"onLoadingContent",void 0),e=s([Object(o.m)({selector:"core-site-plugins-plugin-content",templateUrl:"core-siteplugins-plugin-content.html"}),c(2,Object(o.N)()),u("design:paramtypes",[i.a,l.a,r.s,o.F])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(196),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(t){return e.call(this,t,"CoreBlockPreRenderedComponent")||this}return i(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.courseId="course"==this.contextLevel?this.instanceId:void 0,this.fetchContentDefaultError="Error getting "+this.block.contents.title+" data."},t=l([Object(o.m)({selector:"core-block-pre-rendered",templateUrl:"core-block-pre-rendered.html"}),a("design:paramtypes",[o.C])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(1),i=n(13),l=n(50),a=n(9),s=n(185),u=n(10),c=n(268),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,c){void 0===c&&(c="CoreCourseModuleMainResourceComponent");var d=e.call(this,t,c)||this;d.content=n,d.sitesProvider=t.get(r.a),d.courseProvider=t.get(i.a),d.appProvider=t.get(u.a),d.eventsProvider=t.get(a.a),d.modulePrefetchDelegate=t.get(l.a);var f=t.get(s.a),p=t.get(o.M);return d.onlineObserver=f.onchange().subscribe(function(){p.run(function(){d.isOnline=d.appProvider.isOnline()})}),d}return d(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.hasOffline=!1,this.syncIcon="spinner",this.siteId=this.sitesProvider.getCurrentSiteId(),this.moduleName=this.courseProvider.translateModuleName(this.moduleName),this.syncEventName&&(this.syncObserver=this.eventsProvider.on(this.syncEventName,function(e){t.autoSyncEventReceived(e)},this.siteId))},t.prototype.isRefreshSyncNeeded=function(e){return!1},t.prototype.autoSyncEventReceived=function(e){this.isRefreshSyncNeeded(e)&&this.showLoadingAndRefresh(!1)},t.prototype.refreshContent=function(e,t){var n=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),!this.module)return Promise.resolve();this.refreshIcon="spinner",this.syncIcon="spinner";var o;try{o=this.invalidateContent()}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(){}).then(function(){return n.loadContent(!0,e,t)}).finally(function(){n.refreshIcon="refresh",n.syncIcon="sync"})},t.prototype.showLoadingAndFetch=function(e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),this.refreshIcon="spinner",this.syncIcon="spinner",this.loaded=!1,this.domUtils.scrollToTop(this.content),this.loadContent(!1,e,t).finally(function(){n.refreshIcon="refresh",n.syncIcon="sync"})},t.prototype.showLoadingAndRefresh=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this.refreshIcon="spinner",this.syncIcon="spinner",this.loaded=!1,this.domUtils.scrollToTop(this.content),this.refreshContent(e,t)},t.prototype.fetchContent=function(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),Promise.resolve()},t.prototype.loadContent=function(e,t,n){var o=this;if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.isOnline=this.appProvider.isOnline(),!this.module)return Promise.resolve();var r;try{r=this.fetchContent(e,t,n)}catch(e){this.logger.error(e),r=Promise.resolve()}return r.catch(function(n){if(!e)return o.refreshContent(t);o.domUtils.showErrorModalDefault(n,o.fetchContentDefaultError,!0)}).finally(function(){o.loaded=!0,o.refreshIcon="refresh",o.syncIcon="sync"})},t.prototype.showStatus=function(e,t){},t.prototype.setStatusListener=function(){var e=this;return void 0===this.statusObserver?(this.statusObserver=this.eventsProvider.on(a.a.PACKAGE_STATUS_CHANGED,function(t){if(t.componentId===e.module.id&&t.component===e.component){var n=e.currentStatus;e.currentStatus=t.status,e.showStatus(e.currentStatus,n)}},this.siteId),this.modulePrefetchDelegate.getModuleStatus(this.module,this.courseId).then(function(t){e.currentStatus=t,e.showStatus(t)})):Promise.resolve()},t.prototype.sync=function(){return Promise.resolve(!0)},t.prototype.hasSyncSucceed=function(e){return!0},t.prototype.syncActivity=function(e){var t=this;return void 0===e&&(e=!1),this.sync().then(function(e){return e.warnings&&e.warnings.length&&t.domUtils.showErrorModal(e.warnings[0]),t.hasSyncSucceed(e)}).catch(function(n){return e&&t.domUtils.showErrorModalDefault(n,"core.errorsync",!0),!1})},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.onlineObserver&&this.onlineObserver.unsubscribe(),this.syncObserver&&this.syncObserver.off(),this.statusObserver&&this.statusObserver.off()},f([Object(o.D)(),p("design:type",Number)],t.prototype,"group",void 0),t}(c.a)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(6),i=n(1),l=n(10),a=n(46),s=n(380),u=n(2),c=n(24),d=n(310),f=n(9),p=n(53),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,n,o,r,i,l,a,s,u){this.sitesProvider=n,this.appProvider=o,this.userProvider=r,this.messagesOffline=i,this.utils=l,this.timeUtils=a,this.emulatorHelper=s,this.eventsProvider=u,this.ROOT_CACHE_KEY="mmaMessages:",this.LIMIT_MESSAGES=t.LIMIT_MESSAGES,this.logger=e.getInstance("AddonMessagesProvider")}return t=e,e.prototype.addContact=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("core_message_create_contacts",{userids:[e]}).then(function(){return n.invalidateAllContactsCache(t.getUserId(),t.getId())})})},e.prototype.blockContact=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r;if(n.wsAvailable("core_message_block_user")){var i={userid:n.getUserId(),blockeduserid:e};r=n.write("core_message_block_user",i)}else{r=n.write("core_message_block_contacts",i={userids:[e]})}return r.then(function(){return o.invalidateAllMemberInfo(e,n).finally(function(){o.eventsProvider.trigger(t.MEMBER_INFO_CHANGED_EVENT,{userId:e,userBlocked:!0},n.id)})})})},e.prototype.confirmContactRequest=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={userid:e,requesteduserid:n.getUserId()};return n.write("core_message_confirm_contact_request",r).then(function(){return o.utils.allPromises([o.invalidateAllMemberInfo(e,n),o.invalidateContactsCache(n.id),o.invalidateUserContacts(n.id),o.refreshContactRequestsCount(n.id)]).finally(function(){o.eventsProvider.trigger(t.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRequestConfirmed:!0},n.id)})})})},e.prototype.createContactRequest=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={userid:n.getUserId(),requesteduserid:e};return n.write("core_message_create_contact_request",r).then(function(){return o.invalidateAllMemberInfo(e,n).finally(function(){o.eventsProvider.trigger(t.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRequestCreated:!0},n.id)})})})},e.prototype.declineContactRequest=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={userid:e,requesteduserid:n.getUserId()};return n.write("core_message_decline_contact_request",r).then(function(){return o.utils.allPromises([o.invalidateAllMemberInfo(e,n),o.refreshContactRequestsCount(n.id)]).finally(function(){o.eventsProvider.trigger(t.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRequestDeclined:!0},n.id)})})})},e.prototype.deleteConversation=function(e,t,n){return this.deleteConversations([e],t,n)},e.prototype.deleteConversations=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();return t.write("core_message_delete_conversations_by_id",{userid:n,conversationids:e}).then(function(){var n=[];return e.forEach(function(e){n.push(o.messagesOffline.deleteConversationMessages(e,t.getId()).catch(function(){}))}),Promise.all(n)})})},e.prototype.deleteMessage=function(e,t){return e.id?t?this.deleteMessageForAllOnline(e.id):this.deleteMessageOnline(e.id,e.read):e.conversationid?this.messagesOffline.deleteConversationMessage(e.conversationid,e.text,e.timecreated):this.messagesOffline.deleteMessage(e.touserid,e.smallmessage,e.timecreated)},e.prototype.deleteMessageOnline=function(e,t,n){var o=this,r={messageid:e,userid:n||this.sitesProvider.getCurrentSiteUserId()};return void 0!==t&&(r.read=t),this.sitesProvider.getCurrentSite().write("core_message_delete_message",r).then(function(){return o.invalidateDiscussionCache(n)})},e.prototype.deleteMessageForAllOnline=function(e,t){var n=this,o={messageid:e,userid:t||this.sitesProvider.getCurrentSiteUserId()};return this.sitesProvider.getCurrentSite().write("core_message_delete_message_for_all_users",o).then(function(){return n.invalidateDiscussionCache(t)})},e.prototype.formatConversation=function(e,n){var o=e.messages.length,r=o?e.messages[o-1]:null;if(e.lastmessage=r?r.text:null,e.lastmessagedate=r?r.timecreated:null,e.sentfromcurrentuser=r?r.useridfrom==n:null,e.type!=t.MESSAGE_CONVERSATION_TYPE_GROUP){var i=e.type==t.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL,l=e.members.reduce(function(e,t){return!e&&(i&&t.id!=n||!i&&t.id==n)&&(e=t),e},null);e.name=e.name?e.name:l.fullname,e.imageurl=e.imageurl?e.imageurl:l.profileimageurl,e.userid=l.id,e.showonlinestatus=l.showonlinestatus,e.isonline=l.isonline,e.isblocked=l.isblocked,e.otherUser=l}return e},e.prototype.getCacheKeyForBlockedContacts=function(e){return this.ROOT_CACHE_KEY+"blockedContacts:"+e},e.prototype.getCacheKeyForContacts=function(){return this.ROOT_CACHE_KEY+"contacts"},e.prototype.getCacheKeyForUserContacts=function(){return this.ROOT_CACHE_KEY+"userContacts"},e.prototype.getCacheKeyForContactRequests=function(){return this.ROOT_CACHE_KEY+"contactRequests"},e.prototype.getCacheKeyForContactRequestsCount=function(){return this.ROOT_CACHE_KEY+"contactRequestsCount"},e.prototype.getCacheKeyForDiscussion=function(e){return this.ROOT_CACHE_KEY+"discussion:"+e},e.prototype.getCacheKeyForMessageCount=function(e){return this.ROOT_CACHE_KEY+"count:"+e},e.prototype.getCacheKeyForUnreadConversationCounts=function(){return this.ROOT_CACHE_KEY+"unreadConversationCounts"},e.prototype.getCacheKeyForDiscussions=function(){return this.ROOT_CACHE_KEY+"discussions"},e.prototype.getCacheKeyForConversation=function(e,t){return this.ROOT_CACHE_KEY+"conversation:"+e+":"+t},e.prototype.getCacheKeyForConversationBetweenUsers=function(e,t){return this.ROOT_CACHE_KEY+"conversationBetweenUsers:"+e+":"+t},e.prototype.getCacheKeyForConversationMembers=function(e,t){return this.ROOT_CACHE_KEY+"conversationMembers:"+e+":"+t},e.prototype.getCacheKeyForConversationMessages=function(e,t){return this.ROOT_CACHE_KEY+"conversationMessages:"+e+":"+t},e.prototype.getCacheKeyForConversations=function(e,t,n){return this.getCommonCacheKeyForUserConversations(e)+":"+t+":"+n},e.prototype.getCacheKeyForConversationCounts=function(){return this.ROOT_CACHE_KEY+"conversationCounts"},e.prototype.getCacheKeyForMemberInfo=function(e,t){return this.ROOT_CACHE_KEY+"memberInfo:"+e+":"+t},e.prototype.getCacheKeyForSelfConversation=function(e){return this.ROOT_CACHE_KEY+"selfconversation:"+e},e.prototype.getCommonCacheKeyForUserConversations=function(e){return this.getRootCacheKeyForConversations()+e},e.prototype.getRootCacheKeyForConversations=function(){return this.ROOT_CACHE_KEY+"conversations:"},e.prototype.getAllContacts=function(e){var t=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.getContacts(e).then(function(n){return t.getBlockedContacts(e).then(function(e){return n.blocked=e.users,t.storeUsersFromAllContacts(n),n}).catch(function(){return n.blocked=[],t.storeUsersFromAllContacts(n),n})})},e.prototype.getBlockedContacts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n=e.getUserId(),o={userid:n},r={cacheKey:t.getCacheKeyForBlockedContacts(n),updateFrequency:p.a.FREQUENCY_OFTEN};return e.read("core_message_get_blocked_users",o,r)})},e.prototype.getContacts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n={cacheKey:t.getCacheKeyForContacts(),updateFrequency:p.a.FREQUENCY_OFTEN};return e.read("core_message_get_contacts",void 0,n).then(function(e){var t={online:[],offline:[],strangers:[]},n=function(n){t[n]||(t[n]=[]),e[n].forEach(function(e){e.id>0&&t[n].push(e)})};for(var o in e)n(o);return t})})},e.prototype.getUserContacts=function(e,n,o){var r=this;return void 0===e&&(e=0),void 0===n&&(n=t.LIMIT_CONTACTS),this.sitesProvider.getSite(o).then(function(t){var o={userid:t.getUserId(),limitfrom:e,limitnum:n<=0?0:n+1},i={cacheKey:r.getCacheKeyForUserContacts(),updateFrequency:p.a.FREQUENCY_OFTEN};return t.read("core_message_get_user_contacts",o,i).then(function(e){return e&&e.length?(r.userProvider.storeUsers(e,t.id),n<=0?{contacts:e,canLoadMore:!1}:{contacts:e.slice(0,n),canLoadMore:e.length>n}):{contacts:[],canLoadMore:!1}})})},e.prototype.getContactRequests=function(e,n,o){var r=this;return void 0===e&&(e=0),void 0===n&&(n=t.LIMIT_CONTACTS),this.sitesProvider.getSite(o).then(function(t){var o={userid:t.getUserId(),limitfrom:e,limitnum:n<=0?0:n+1},i={cacheKey:r.getCacheKeyForContactRequests(),updateFrequency:p.a.FREQUENCY_OFTEN};return t.read("core_message_get_contact_requests",o,i).then(function(e){return e&&e.length?(r.userProvider.storeUsers(e,t.id),n<=0?{requests:e,canLoadMore:!1}:{requests:e.slice(0,n),canLoadMore:e.length>n}):{requests:[],canLoadMore:!1}})})},e.prototype.getContactRequestsCount=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var o={userid:e.getUserId()},r={cacheKey:n.getCacheKeyForContactRequestsCount(),typeExpected:"number"};return e.read("core_message_get_received_contact_requests_count",o,r).then(function(o){return n.eventsProvider.trigger(t.CONTACT_REQUESTS_COUNT_EVENT,{count:o},e.id),o})})},e.prototype.getConversation=function(e,t,n,o,r,i,l,a,s,u){var c=this;return void 0===o&&(o=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===l&&(l=2),void 0===a&&(a=!0),this.sitesProvider.getSite(s).then(function(s){u=u||s.getUserId();var d={cacheKey:c.getCacheKeyForConversation(u,e)};return s.read("core_message_get_conversation",{userid:u,conversationid:e,includecontactrequests:t?1:0,includeprivacyinfo:n?1:0,messageoffset:o,messagelimit:r,memberoffset:i,memberlimit:l,newestmessagesfirst:a?1:0},d).then(function(e){return c.formatConversation(e,u)})})},e.prototype.getConversationBetweenUsers=function(e,t,n,o,r,i,l,a,s,u,c){var d=this;return void 0===o&&(o=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===l&&(l=2),void 0===a&&(a=!0),this.sitesProvider.getSite(s).then(function(s){u=u||s.getUserId();var f={cacheKey:d.getCacheKeyForConversationBetweenUsers(u,e),omitExpires:!!c};return s.read("core_message_get_conversation_between_users",{userid:u,otheruserid:e,includecontactrequests:t?1:0,includeprivacyinfo:n?1:0,messageoffset:o,messagelimit:r,memberoffset:i,memberlimit:l,newestmessagesfirst:a?1:0},f).then(function(e){return d.formatConversation(e,u)})})},e.prototype.getConversationMembers=function(e,t,n,o,r,i){var l=this;return void 0===t&&(t=0),this.sitesProvider.getSite(r).then(function(r){i=i||r.getUserId(),void 0!==n&&null!==n||(n=l.LIMIT_MESSAGES);var a={cacheKey:l.getCacheKeyForConversationMembers(i,e),updateFrequency:p.a.FREQUENCY_SOMETIMES};return r.read("core_message_get_conversation_members",{userid:i,conversationid:e,limitfrom:t,limitnum:n<1?n:n+1,includecontactrequests:o?1:0,includeprivacyinfo:1},a).then(function(e){return n<1?{canLoadMore:!1,members:e}:{canLoadMore:e.length>n,members:e.slice(0,n)}})})},e.prototype.getConversationMessages=function(e,t,n,o,r,i,l,a){var s=this;return void 0===n&&(n=0),void 0===r&&(r=!0),void 0===i&&(i=0),this.sitesProvider.getSite(l).then(function(l){a=a||l.getUserId(),void 0!==o&&null!==o||(o=s.LIMIT_MESSAGES);var u={cacheKey:s.getCacheKeyForConversationMessages(a,e)},c={currentuserid:a,convid:e,limitfrom:n,limitnum:o<1?o:o+1,newest:r?1:0,timefrom:i};return n>0&&(u.getFromCache=!1,u.saveToCache=!1,u.emergencyCache=!1),l.read("core_message_get_conversation_messages",c,u).then(function(r){o<1?(r.canLoadMore=!1,r.messages=r.messages):(r.canLoadMore=r.messages.length>o,r.messages=r.messages.slice(0,o));var i;return r.messages.forEach(function(e){e.timecreated=e.timecreated?1e3*e.timecreated:0,i||e.useridfrom==a||(i=e)}),s.appProvider.isDesktop()&&0===n&&i&&s.storeLastReceivedMessageIfNeeded(e,i,l.getId()),t?r:s.messagesOffline.getConversationMessages(e).then(function(e){return e.forEach(function(e){e.pending=!0,e.useridfrom=a}),r.messages=r.messages.concat(e),r})})})},e.prototype.getConversations=function(e,n,o,r,i,l,a){var s=this;return void 0===o&&(o=0),this.sitesProvider.getSite(r).then(function(r){i=i||r.getUserId();var u={cacheKey:s.getCacheKeyForConversations(i,e,n)},c={userid:i,limitfrom:o,limitnum:s.LIMIT_MESSAGES+1};return l?u.omitExpires=!0:a&&(u.getFromCache=!1,u.emergencyCache=!1),void 0!==e&&null!=e&&(c.type=e),void 0!==n&&null!=n&&(c.favourites=n?1:0),r.isVersionGreaterEqualThan("3.7")&&e!=t.MESSAGE_CONVERSATION_TYPE_GROUP&&(c.mergeself=1),r.read("core_message_get_conversations",c,u).catch(function(e){return c.mergeself?(delete c.mergeself,r.read("core_message_get_conversations",c,u)):Promise.reject(e)}).then(function(e){var t=e.conversations.slice(0,s.LIMIT_MESSAGES).map(function(e){return s.formatConversation(e,i)}),n=t[0],l=n&&n.messages[0];return s.appProvider.isDesktop()&&0===o&&l&&!n.sentfromcurrentuser&&s.storeLastReceivedMessageIfNeeded(n.id,l,r.getId()),{conversations:t,canLoadMore:e.conversations.length>s.LIMIT_MESSAGES}})})},e.prototype.getConversationCounts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var o={cacheKey:n.getCacheKeyForConversationCounts()};return e.read("core_message_get_conversation_counts",{},o).then(function(e){return{favourites:e.favourites,individual:e.types[t.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL],group:e.types[t.MESSAGE_CONVERSATION_TYPE_GROUP],self:e.types[t.MESSAGE_CONVERSATION_TYPE_SELF]||0}})})},e.prototype.getDiscussion=function(e,t,n,o,r,i,l,a){var s=this;return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!0),this.sitesProvider.getSite(a).then(function(u){var c,d,f={messages:[],canLoadMore:!1},p={cacheKey:s.getCacheKeyForDiscussion(e)},h={useridto:u.getUserId(),useridfrom:e,limitnum:s.LIMIT_MESSAGES};return(n>0||o>0||r>0||i>0)&&(p.getFromCache=!1,p.saveToCache=!1,p.emergencyCache=!1),s.getRecentMessages(h,p,n,o,l,u.getId()).then(function(t){return f.messages=t,h.useridto=e,h.useridfrom=u.getUserId(),c=t.length>0,s.getRecentMessages(h,p,r,i,l,a)}).then(function(n){return f.messages=f.messages.concat(n),d=n.length>0,f.messages.length>s.LIMIT_MESSAGES?(f.canLoadMore=!0,f.messages=s.sortMessages(f.messages),f.messages=f.messages.slice(-s.LIMIT_MESSAGES)):f.canLoadMore=!(f.messages.length!=s.LIMIT_MESSAGES||c&&d),t?f:s.messagesOffline.getMessages(e).then(function(e){return e.forEach(function(e){e.pending=!0,e.text=e.smallmessage}),f.messages=f.messages.concat(e),f})})})},e.prototype.getDiscussions=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n={},o=e.getUserId(),r={useridto:o,useridfrom:0,limitnum:t.LIMIT_MESSAGES},i={cacheKey:t.getCacheKeyForDiscussions()},l=function(e,t,r){void 0===n[t]&&(n[t]={fullname:r,profileimageurl:""},e.timeread||e.pending||e.useridfrom==o||(n[t].unread=!0));var i=n[t].message;(void 0===i||!i.pending&&e.pending||i.pending==e.pending&&(i.timecreated<e.timecreated||i.timecreated==e.timecreated&&i.id<e.id))&&(n[t].message={id:e.id,user:t,message:e.text,timecreated:e.timecreated,pending:!!e.pending})};return t.getRecentMessages(r,i,void 0,void 0,void 0,e.getId()).then(function(e){return e.forEach(function(e){l(e,e.useridfrom,e.userfromfullname)}),r.useridfrom=r.useridto,r.useridto=0,t.getRecentMessages(r,i)}).then(function(n){return n.forEach(function(e){l(e,e.useridto,e.usertofullname)}),t.messagesOffline.getAllMessages(e.getId())}).then(function(o){return o.forEach(function(e){e.pending=!0,e.text=e.smallmessage,l(e,e.touserid,"")}),t.getDiscussionsUserImg(n,e.getId()).then(function(e){return t.storeUsersFromDiscussions(e),e})})})},e.prototype.getDiscussionsUserImg=function(e,t){var n=[],o=function(o){e[o].profileimageurl||n.push(r.userProvider.getProfile(e[o].message.user,0,!0,t).then(function(t){e[o].profileimageurl=t.profileimageurl}).catch(function(){}))},r=this;for(var i in e)o(i);return Promise.all(n).then(function(){return e})},e.prototype.getMemberInfo=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();var r={cacheKey:o.getCacheKeyForMemberInfo(n,e),updateFrequency:p.a.FREQUENCY_OFTEN};return t.read("core_message_get_member_info",{referenceuserid:n,userids:[e],includecontactrequests:1,includeprivacyinfo:1},r).then(function(e){return!e||e.length<1?Promise.reject(null):e[0]})})},e.prototype.getMessagePreferencesCacheKey=function(){return this.ROOT_CACHE_KEY+"messagePreferences"},e.prototype.getMessagePreferences=function(e){var t=this;return this.logger.debug("Get message preferences"),this.sitesProvider.getSite(e).then(function(e){var n={cacheKey:t.getMessagePreferencesCacheKey(),updateFrequency:p.a.FREQUENCY_SOMETIMES};return e.read("core_message_get_user_message_preferences",{},n).then(function(e){return e.preferences?(e.preferences.blocknoncontacts=e.blocknoncontacts,e.preferences):Promise.reject(null)})})},e.prototype.getMessages=function(e,t,n,o){var r=this;return void 0===n&&(n=!0),e.type="conversations",e.newestfirst=1,this.sitesProvider.getSite(o).then(function(o){var i=o.getUserId();return o.read("core_message_get_messages",e,t).then(function(t){return t.messages.forEach(function(t){t.read=0==e.read?0:1,t.timecreated=t.timecreated?1e3*t.timecreated:0,t.timeread=t.timeread?1e3*t.timeread:0}),n&&r.appProvider.isDesktop()&&!e.read&&e.useridto==i&&0===e.limitfrom&&r.storeLastReceivedMessageIfNeeded(e.useridfrom,t.messages[0],o.getId()),t})})},e.prototype.getRecentMessages=function(e,t,n,o,r,i){var l=this;return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),n=n||0,o=o||0,e.read=0,e.limitfrom=n,this.getMessages(e,t,r,i).then(function(n){var a=n.messages;return a?a.length>=e.limitnum?a:(e.limitnum=e.limitnum-a.length,e.read=1,e.limitfrom=o,l.getMessages(e,t,r,i).then(function(e){return e.messages&&(a=a.concat(e.messages)),a}).catch(function(){return a})):Promise.reject(null)})},e.prototype.getSelfConversation=function(e,t,n,o,r){var i=this;return void 0===e&&(e=0),void 0===t&&(t=1),void 0===n&&(n=!0),this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId();var l={cacheKey:i.getCacheKeyForSelfConversation(r)};return o.read("core_message_get_self_conversation",{userid:r,messageoffset:e,messagelimit:t,newestmessagesfirst:n?1:0},l).then(function(e){return i.formatConversation(e,r)})})},e.prototype.getUnreadConversationCounts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(o){var r;if(n.isGroupMessagingEnabled()){var i={cacheKey:n.getCacheKeyForUnreadConversationCounts()};r=o.read("core_message_get_unread_conversation_counts",{},i).then(function(e){return{favourites:e.favourites,individual:e.types[t.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL],group:e.types[t.MESSAGE_CONVERSATION_TYPE_GROUP],self:e.types[t.MESSAGE_CONVERSATION_TYPE_SELF]||0}})}else if(n.isMessageCountEnabled()){var l={useridto:o.getUserId()};i={cacheKey:n.getCacheKeyForMessageCount(o.getUserId()),typeExpected:"number"};r=o.read("core_message_get_unread_conversations_count",l,i).then(function(e){return{favourites:0,individual:e,group:0,self:0}})}else{l={read:0,limitfrom:0,limitnum:n.LIMIT_MESSAGES+1,useridto:o.getUserId(),useridfrom:0};r=n.getMessages(l,void 0,!1,e).then(function(e){var t={};e.messages.forEach(function(e){t[e.useridto]=1});var o=Object.keys(t).length;return{favourites:0,individual:o,group:0,self:0,orMore:o>n.LIMIT_MESSAGES}})}return r.then(function(e){return n.eventsProvider.trigger(t.UNREAD_CONVERSATION_COUNTS_EVENT,e,o.id),e})})},e.prototype.getUnreadReceivedMessages=function(e,t,n,o){var r=this;return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(i){var l={read:0,limitfrom:0,limitnum:r.LIMIT_MESSAGES,useridto:i.getUserId(),useridfrom:0},a={};return t?a.omitExpires=!0:n&&(a.getFromCache=!1,a.emergencyCache=!1),r.getMessages(l,a,e,o)})},e.prototype.invalidateAllContactsCache=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.invalidateContactsCache(t).then(function(){return n.invalidateBlockedContactsCache(e,t)})},e.prototype.invalidateBlockedContactsCache=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCacheKeyForBlockedContacts(e))})},e.prototype.invalidateContactsCache=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getCacheKeyForContacts())})},e.prototype.invalidateUserContacts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getCacheKeyForUserContacts())})},e.prototype.invalidateContactRequestsCache=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getCacheKeyForContactRequests())})},e.prototype.invalidateContactRequestsCountCache=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getCacheKeyForContactRequestsCount())})},e.prototype.invalidateConversation=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCacheKeyForConversation(n,e))})},e.prototype.invalidateConversationBetweenUsers=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCacheKeyForConversationBetweenUsers(n,e))})},e.prototype.invalidateConversationMembers=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCacheKeyForConversationMembers(n,e))})},e.prototype.invalidateConversationMessages=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCacheKeyForConversationMessages(n,e))})},e.prototype.invalidateConversations=function(e,t){var n=this;return this.sitesProvider.getSite(e).then(function(e){return t=t||e.getUserId(),e.invalidateWsCacheForKeyStartingWith(n.getCommonCacheKeyForUserConversations(t))})},e.prototype.invalidateConversationCounts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getCacheKeyForConversationCounts())})},e.prototype.invalidateDiscussionCache=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCacheKeyForDiscussion(e))})},e.prototype.invalidateDiscussionsCache=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n=[];return n.push(e.invalidateWsCacheForKey(t.getCacheKeyForDiscussions())),n.push(t.invalidateContactsCache(e.getId())),Promise.all(n)})},e.prototype.invalidateMemberInfo=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCacheKeyForMemberInfo(n,e))})},e.prototype.invalidateMessagePreferences=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getMessagePreferencesCacheKey())})},e.prototype.invalidateAllMemberInfo=function(e,t){var n=this;return this.utils.allPromises([this.invalidateMemberInfo(e,t.id),this.invalidateUserContacts(t.id),this.invalidateContactRequestsCache(t.id),this.invalidateConversations(t.id),this.getConversationBetweenUsers(e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.id,void 0,!0).then(function(e){return n.utils.allPromises([n.invalidateConversation(e.id),n.invalidateConversationMembers(e.id,t.id)])}).catch(function(){})])},e.prototype.invalidateSelfConversation=function(e,t){var n=this;return this.sitesProvider.getSite(e).then(function(e){return t=t||e.getUserId(),e.invalidateWsCacheForKey(n.getCacheKeyForSelfConversation(t))})},e.prototype.invalidateUnreadConversationCounts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isGroupMessagingEnabled()?e.invalidateWsCacheForKey(t.getCacheKeyForUnreadConversationCounts()):t.isMessageCountEnabled()?e.invalidateWsCacheForKey(t.getCacheKeyForMessageCount(e.getUserId())):void 0})},e.prototype.isBlocked=function(e,t){return this.isGroupMessagingEnabled()?this.getMemberInfo(e,t).then(function(e){return e.isblocked}):this.getBlockedContacts(t).then(function(t){return!(!t.users||t.users.length<1)&&t.users.some(function(t){return e==t.id})})},e.prototype.isContact=function(e,t){return this.isGroupMessagingEnabled()?this.getMemberInfo(e,t).then(function(e){return e.iscontact}):this.getContacts(t).then(function(t){return["online","offline"].some(function(n){return!!(t[n]&&t[n].length>0)&&t[n].some(function(t){return e==t.id})})})},e.prototype.isGroupMessagingEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_conversations")},e.prototype.isGroupMessagingEnabledInSite=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_message_get_conversations")}).catch(function(){return!1})},e.prototype.isMarkAllMessagesReadEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_mark_all_messages_as_read")},e.prototype.isMessageCountEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_unread_conversations_count")},e.prototype.isMessagePreferencesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_user_message_preferences")},e.prototype.isMessagingEnabledForSite=function(e){return this.isPluginEnabled(e).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.isMuteConversationEnabled=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_message_mute_conversations")},e.prototype.isMuteConversationEnabledInSite=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isMuteConversationEnabled(e)}).catch(function(){return!1})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canUseAdvancedFeature("messaging")})},e.prototype.isSearchMessagesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_data_for_messagearea_search_messages")},e.prototype.isSelfConversationEnabled=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_message_get_self_conversation")},e.prototype.isSelfConversationEnabledInSite=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isSelfConversationEnabled(e)}).catch(function(){return!1})},e.prototype.markMessageRead=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={messageid:e,timeread:n.timeUtils.timestamp()};return t.write("core_message_mark_message_read",o)})},e.prototype.markAllConversationMessagesRead=function(e){var t={userid:this.sitesProvider.getCurrentSiteUserId(),conversationid:e};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_conversation_messages_as_read",t,{responseExpected:!1})},e.prototype.markAllMessagesRead=function(e){var t={useridto:this.sitesProvider.getCurrentSiteUserId(),useridfrom:e};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_messages_as_read",t,{typeExpected:"boolean"})},e.prototype.muteConversation=function(e,t,n,o){return this.muteConversations([e],t,n,o)},e.prototype.muteConversations=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){o=o||n.getUserId();return n.write(t?"core_message_mute_conversations":"core_message_unmute_conversations",{userid:o,conversationids:e}).then(function(){var t=[];return e.forEach(function(e){t.push(r.invalidateConversation(e,n.getId(),o))}),Promise.all(t).catch(function(){})})})},e.prototype.refreshContactRequestsCount=function(e){var t=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.invalidateContactRequestsCountCache(e).then(function(){return t.getContactRequestsCount(e)})},e.prototype.refreshUnreadConversationCounts=function(e){var t=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.invalidateUnreadConversationCounts(e).then(function(){return t.getUnreadConversationCounts(e)})},e.prototype.removeContact=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("core_message_delete_contacts",{userids:[e]},{responseExpected:!1}).then(function(){return o.isGroupMessagingEnabled()?o.utils.allPromises([o.invalidateUserContacts(n.id),o.invalidateAllMemberInfo(e,n)]).then(function(){o.eventsProvider.trigger(t.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRemoved:!0},n.id)}):o.invalidateContactsCache(n.id)})})},e.prototype.searchContacts=function(e,t,n){var o=this;return void 0===t&&(t=100),this.sitesProvider.getSite(n).then(function(n){return n.read("core_message_search_contacts",{searchtext:e,onlymycourses:0},{getFromCache:!1}).then(function(e){return t&&e.length>t&&(e=e.splice(0,t)),o.userProvider.storeUsers(e),e})})},e.prototype.searchMessages=function(e,n,o,r,i){var l=this;return void 0===o&&(o=0),void 0===r&&(r=t.LIMIT_SEARCH),this.sitesProvider.getSite(i).then(function(t){var i={userid:n||t.getUserId(),search:e,limitfrom:o,limitnum:r<=0?0:r+1};return t.read("core_message_data_for_messagearea_search_messages",i,{getFromCache:!1}).then(function(e){return e.contacts&&e.contacts.length?(e.contacts.forEach(function(e){e.id=e.userid}),l.userProvider.storeUsers(e.contacts,t.id),r<=0?{messages:e.contacts,canLoadMore:!1}:{messages:e.contacts.slice(0,r),canLoadMore:e.contacts.length>r}):{messages:[],canLoadMore:!1}})})},e.prototype.searchUsers=function(e,n,o,r){var i=this;return void 0===n&&(n=0),void 0===o&&(o=t.LIMIT_SEARCH),this.sitesProvider.getSite(r).then(function(t){var r={userid:t.getUserId(),search:e,limitfrom:n,limitnum:o<=0?0:o+1};return t.read("core_message_message_search_users",r,{getFromCache:!1}).then(function(e){var n=e.contacts||[],r=e.noncontacts||[];return i.userProvider.storeUsers(n,t.id),i.userProvider.storeUsers(r,t.id),o<=0?{contacts:n,nonContacts:r,canLoadMoreContacts:!1,canLoadMoreNonContacts:!1}:{contacts:n.slice(0,o),nonContacts:r.slice(0,o),canLoadMoreContacts:n.length>o,canLoadMoreNonContacts:r.length>o}})})},e.prototype.sendMessage=function(e,t,n){var o=this,r=function(){return o.messagesOffline.saveMessage(e,t,n).then(function(e){return{sent:!1,message:e}})};return n=n||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.messagesOffline.hasMessages(e,n).catch(function(){return!0}).then(function(n){return n?r():o.sendMessageOnline(e,t).then(function(e){return{sent:!0,message:e}}).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()})}):r()},e.prototype.sendMessageOnline=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();return this.sendMessagesOnline([{touserid:e,text:t,textformat:1}],n).then(function(t){return t&&t[0]&&-1===t[0].msgid?Promise.reject(o.utils.createFakeWSError(t[0].errormessage)):o.invalidateDiscussionCache(e,n).catch(function(){}).then(function(){return t[0]})})},e.prototype.sendMessagesOnline=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("core_message_send_instant_messages",{messages:e})})},e.prototype.sendMessageToConversation=function(e,t,n){var o=this,r=function(){return o.messagesOffline.saveConversationMessage(e,t,n).then(function(e){return{sent:!1,message:e}})};return n=n||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.messagesOffline.hasConversationMessages(e.id,n).catch(function(){return!0}).then(function(n){return n?r():o.sendMessageToConversationOnline(e.id,t).then(function(e){return{sent:!0,message:e}}).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()})}):r()},e.prototype.sendMessageToConversationOnline=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();return this.sendMessagesToConversationOnline(e,[{text:t,textformat:1}],n).then(function(t){return o.invalidateConversationMessages(e,n).catch(function(){}).then(function(){return t[0]})})},e.prototype.sendMessagesToConversationOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){var o={conversationid:e,messages:t.map(function(e){return{text:e.text,textformat:void 0!==e.textformat?e.textformat:1}})};return n.write("core_message_send_messages_to_conversation",o)})},e.prototype.setFavouriteConversation=function(e,t,n,o){return this.setFavouriteConversations([e],t,n,o)},e.prototype.setFavouriteConversations=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){o=o||n.getUserId();return n.write(t?"core_message_set_favourite_conversations":"core_message_unset_favourite_conversations",{userid:o,conversations:e}).then(function(){var t=[];return e.forEach(function(e){t.push(r.invalidateConversation(e,n.getId(),o))}),Promise.all(t).catch(function(){})})})},e.prototype.sortConversations=function(e){return e.sort(function(e,t){var n=Number(e.lastmessagedate),o=Number(t.lastmessagedate);return n==o&&e.id?e.id<=t.id?1:-1:n<=o?1:-1})},e.prototype.sortMessages=function(e){return e.sort(function(e,t){if(e.pending&&!t.pending)return 1;if(!e.pending&&t.pending)return-1;var n=parseInt(e.timecreated,10),o=parseInt(t.timecreated,10);return n==o&&e.id?e.id>=t.id?1:-1:n>=o?1:-1})},e.prototype.storeLastReceivedMessageIfNeeded=function(e,n,o){var r=this,i=t.PUSH_SIMULATION_COMPONENT;return this.emulatorHelper.getLastReceivedNotification(i,o).then(function(t){if((!(e>0)||n&&t)&&!(n&&t&&n.timecreated<=t.timecreated))return r.emulatorHelper.storeLastReceivedNotification(i,n,o)})},e.prototype.storeUsersFromAllContacts=function(e){for(var t in e)this.userProvider.storeUsers(e[t])},e.prototype.storeUsersFromDiscussions=function(e,t){var n=[];for(var o in e)n.push({id:o,fullname:e[o].fullname,profileimageurl:e[o].profileimageurl});this.userProvider.storeUsers(n,t)},e.prototype.unblockContact=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r;if(n.wsAvailable("core_message_unblock_user")){var i={userid:n.getUserId(),unblockeduserid:e};r=n.write("core_message_unblock_user",i)}else{r=n.write("core_message_unblock_contacts",i={userids:[e]},{responseExpected:!1})}return r.then(function(){return o.invalidateAllMemberInfo(e,n).finally(function(){o.eventsProvider.trigger(t.MEMBER_INFO_CHANGED_EVENT,{userId:e,userUnblocked:!0},n.id)})})})},e.NEW_MESSAGE_EVENT="addon_messages_new_message_event",e.READ_CHANGED_EVENT="addon_messages_read_changed_event",e.OPEN_CONVERSATION_EVENT="addon_messages_open_conversation_event",e.SPLIT_VIEW_LOAD_EVENT="addon_messages_split_view_load_event",e.UPDATE_CONVERSATION_LIST_EVENT="addon_messages_update_conversation_list_event",e.MEMBER_INFO_CHANGED_EVENT="addon_messages_member_changed_event",e.UNREAD_CONVERSATION_COUNTS_EVENT="addon_messages_unread_conversation_counts_event",e.CONTACT_REQUESTS_COUNT_EVENT="addon_messages_contact_requests_count_event",e.POLL_INTERVAL=1e4,e.PUSH_SIMULATION_COMPONENT="AddonMessagesPushSimulation",e.MESSAGE_PRIVACY_COURSEMEMBER=0,e.MESSAGE_PRIVACY_ONLYCONTACTS=1,e.MESSAGE_PRIVACY_SITE=2,e.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL=1,e.MESSAGE_CONVERSATION_TYPE_GROUP=2,e.MESSAGE_CONVERSATION_TYPE_SELF=3,e.LIMIT_CONTACTS=50,e.LIMIT_MESSAGES=50,e.LIMIT_INITIAL_USER_SEARCH=3,e.LIMIT_SEARCH=50,e.NOTIFICATION_PREFERENCES_KEY="message_provider_moodle_instantmessage",e=t=h([Object(o.A)(),m("design:paramtypes",[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(1),l=n(53),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.sitesProvider=e,this.translate=t,this.ROOT_CACHE_KEY="CoreTag:"}return t=e,e.prototype.areTagsAvailable=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.areTagsAvailableInSite(e)})},e.prototype.areTagsAvailableInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_tag_get_tagindex_per_area")&&e.wsAvailable("core_tag_get_tag_cloud")&&e.wsAvailable("core_tag_get_tag_collections")&&!e.isFeatureDisabled("NoDelegate_CoreTag")},e.prototype.getTagCloud=function(e,n,o,r,i,a,s,u,c){var d=this;return void 0===e&&(e=0),void 0===n&&(n=!1),void 0===o&&(o="name"),void 0===r&&(r=""),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=!0),u=u||t.SEARCH_LIMIT,this.sitesProvider.getSite(c).then(function(t){var c={tagcollid:e,isstandard:n,limit:u,sort:o,search:r,fromctx:i,ctx:a,rec:s},f={updateFrequency:l.a.FREQUENCY_SOMETIMES,cacheKey:d.getTagCloudKey(e,n,o,r,i,a,s),getFromCache:""!=r};return t.read("core_tag_get_tag_cloud",c,f)})},e.prototype.getTagCollections=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n={updateFrequency:l.a.FREQUENCY_RARELY,cacheKey:t.getTagCollectionsKey()};return e.read("core_tag_get_tag_collections",null,n).then(function(e){return e&&e.collections?e.collections:Promise.reject(null)})})},e.prototype.getTagIndexPerArea=function(e,t,n,o,r,i,a,s,u){var c=this;return void 0===t&&(t=""),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=!0),void 0===s&&(s=0),this.sitesProvider.getSite(u).then(function(u){var d={tagindex:{id:e,tag:t,tc:n,ta:o,excl:!0,from:r,ctx:i,rec:a,page:s}},f={updateFrequency:l.a.FREQUENCY_OFTEN,cacheKey:c.getTagIndexPerAreaKey(e,t,n,o,r,i,a)};return u.read("core_tag_get_tagindex_per_area",d,f).catch(function(n){return n&&"notagsfound"==n.errorcode&&(n.message=c.translate.instant("core.tag.notagsfound",{$a:t||e||""})),Promise.reject(n)}).then(function(e){return e&&e.length?e:Promise.reject(null)})})},e.prototype.invalidateTagCloud=function(e,t,n,o,r,i,l,a){var s=this;return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n="name"),void 0===o&&(o=""),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!0),this.sitesProvider.getSite(a).then(function(a){var u=s.getTagCloudKey(e,t,n,o,r,i,l);return a.invalidateWsCacheForKey(u)})},e.prototype.invalidateTagCollections=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n=t.getTagCollectionsKey();return e.invalidateWsCacheForKey(n)})},e.prototype.invalidateTagIndexPerArea=function(e,t,n,o,r,i,l,a){var s=this;return void 0===t&&(t=""),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!0),this.sitesProvider.getSite(a).then(function(a){var u=s.getTagIndexPerAreaKey(e,t,n,o,r,i,l);return a.invalidateWsCacheForKey(u)})},e.prototype.getTagCloudKey=function(e,t,n,o,r,i,l){return this.ROOT_CACHE_KEY+"cloud:"+e+":"+(t?1:0)+":"+n+":"+o+":"+r+":"+i+":"+(l?1:0)},e.prototype.getTagCollectionsKey=function(){return this.ROOT_CACHE_KEY+"collections"},e.prototype.getTagIndexPerAreaKey=function(e,t,n,o,r,i,l){return this.ROOT_CACHE_KEY+"index:"+e+":"+t+":"+n+":"+o+":"+r+":"+i+":"+(l?1:0)},e.SEARCH_LIMIT=150,e=t=a([Object(o.A)(),s("design:paramtypes",[i.a,r.c])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(136),a=n(53),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.sitesProvider=t,this.pushNotificationsProvider=n,this.ROOT_CACHE_KEY="mmaCompetency:",this.logger=e.getInstance("AddonCompetencyProvider")}return t=e,e.prototype.allCompetenciesDisabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.isFeatureDisabled("CoreMainMenuDelegate_AddonCompetency")&&e.isFeatureDisabled("CoreCourseOptionsDelegate_AddonCompetency")&&e.isFeatureDisabled("CoreUserDelegate_AddonCompetency")})},e.prototype.getLearningPlansCacheKey=function(e){return this.ROOT_CACHE_KEY+"userplans:"+e},e.prototype.getLearningPlanCacheKey=function(e){return this.ROOT_CACHE_KEY+"learningplan:"+e},e.prototype.getCompetencyInPlanCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"plancompetency:"+e+":"+t},e.prototype.getCompetencyInCourseCacheKey=function(e,t,n){return this.ROOT_CACHE_KEY+"coursecompetency:"+n+":"+e+":"+t},e.prototype.getCompetencySummaryCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"competencysummary:"+t+":"+e},e.prototype.getCourseCompetenciesCacheKey=function(e){return this.ROOT_CACHE_KEY+"coursecompetencies:"+e},e.prototype.isPluginForCourseEnabled=function(e,t){return this.sitesProvider.isLoggedIn()?this.getCourseCompetencies(e,0,t).catch(function(){return!1}):Promise.resolve(!1)},e.prototype.getLearningPlans=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){e=e||t.getUserId(),n.logger.debug("Get plans for user "+e);var o={userid:e},r={cacheKey:n.getLearningPlansCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("tool_lp_data_for_plans_page",o,r).then(function(e){return e.plans?e.plans:Promise.reject(null)})})},e.prototype.getLearningPlan=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){n.logger.debug("Get plan "+e);var o={planid:e},r={cacheKey:n.getLearningPlanCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return t.read("tool_lp_data_for_plan_page",o,r).then(function(e){return e.plan?e:Promise.reject(null)})})},e.prototype.getCompetencyInPlan=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){o.logger.debug("Get competency "+t+" in plan "+e);var r={planid:e,competencyid:t},i={cacheKey:o.getCompetencyInPlanCacheKey(e,t),updateFrequency:a.a.FREQUENCY_SOMETIMES};return n.read("tool_lp_data_for_user_competency_summary_in_plan",r,i).then(function(e){return e.usercompetencysummary?e:Promise.reject(null)})})},e.prototype.getCompetencyInCourse=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){n=n||o.getUserId(),i.logger.debug("Get competency "+t+" in course "+e);var l={courseid:e,competencyid:t,userid:n},s={cacheKey:i.getCompetencyInCourseCacheKey(e,t,n),updateFrequency:a.a.FREQUENCY_SOMETIMES};return r&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("tool_lp_data_for_user_competency_summary_in_course",l,s).then(function(e){return e.usercompetencysummary?e:Promise.reject(null)})})},e.prototype.getCompetencySummary=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId(),r.logger.debug("Get competency "+e+" summary for user"+t);var i={competencyid:e,userid:t},l={cacheKey:r.getCompetencySummaryCacheKey(e,t),updateFrequency:a.a.FREQUENCY_SOMETIMES};return o&&(l.getFromCache=!1,l.emergencyCache=!1),n.read("tool_lp_data_for_user_competency_summary",i,l).then(function(e){return e.competency?e:Promise.reject(null)})})},e.prototype.getCourseCompetencies=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(t){r.logger.debug("Get course competencies for course "+e);var n={courseid:e},i={cacheKey:r.getCourseCompetenciesCacheKey(e),updateFrequency:a.a.FREQUENCY_SOMETIMES};return o&&(i.getFromCache=!1,i.emergencyCache=!1),t.read("tool_lp_data_for_course_competencies_page",n,i).then(function(e){return e.competencies?e:Promise.reject(null)})}).then(function(o){if(!t||t==r.sitesProvider.getCurrentSiteUserId())return o;var i;return i=o.competencies.map(function(o){return r.getCompetencyInCourse(e,o.competency.id,t,n)}),Promise.all(i).then(function(e){return e.forEach(function(e,t){o.competencies[t].usercompetencycourse=e.usercompetencysummary.usercompetencycourse}),o})})},e.prototype.invalidateLearningPlans=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return e=e||t.getUserId(),t.invalidateWsCacheForKey(n.getLearningPlansCacheKey(e))})},e.prototype.invalidateLearningPlan=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getLearningPlanCacheKey(e))})},e.prototype.invalidateCompetencyInPlan=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getCompetencyInPlanCacheKey(e,t))})},e.prototype.invalidateCompetencyInCourse=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return n=n||o.getUserId(),o.invalidateWsCacheForKey(r.getCompetencyInCourseCacheKey(e,t,n))})},e.prototype.invalidateCompetencySummary=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCompetencySummaryCacheKey(e,t))})},e.prototype.invalidateCourseCompetencies=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(t){return t.invalidateWsCacheForKey(o.getCourseCompetenciesCacheKey(e))}).then(function(){if(t&&t!=o.sitesProvider.getCurrentSiteUserId())return o.getCourseCompetencies(e,0,n).then(function(r){var i=r.competencies.map(function(r){return o.invalidateCompetencyInCourse(e,r.competency.id,t,n)});return Promise.all(i)})})},e.prototype.logCompetencyInPlanView=function(e,n,o,r,i,l){var a=this;return e&&n?this.sitesProvider.getSite(l).then(function(s){i=i||s.getUserId();var u={planid:e,competencyid:n,userid:i},c=o==t.STATUS_COMPLETE?"core_competency_user_competency_plan_viewed":"core_competency_user_competency_viewed_in_plan";return a.pushNotificationsProvider.logViewEvent(n,r,"competency",c,{planid:e,planstatus:o,userid:i},l),s.write(c,u,{typeExpected:"boolean"}).then(function(e){if(!e)return Promise.reject(null)})}):Promise.reject(null)},e.prototype.logCompetencyInCourseView=function(e,t,n,o,r){var i=this;return e&&t?this.sitesProvider.getSite(r).then(function(l){o=o||l.getUserId();var a={courseid:e,competencyid:t,userid:o},s="core_competency_user_competency_viewed_in_course";return i.pushNotificationsProvider.logViewEvent(t,n,"competency",s,{courseid:e,userid:o},r),l.write(s,a,{typeExpected:"boolean"}).then(function(e){if(!e)return Promise.reject(null)})}):Promise.reject(null)},e.prototype.logCompetencyView=function(e,t,n){var o=this;return e?this.sitesProvider.getSite(n).then(function(r){var i={id:e},l="core_competency_competency_viewed";return o.pushNotificationsProvider.logViewEvent(e,t,"competency",l,{},n),r.write(l,i,{typeExpected:"boolean"}).then(function(e){if(!e)return Promise.reject(null)})}):Promise.reject(null)},e.STATUS_DRAFT=0,e.STATUS_ACTIVE=1,e.STATUS_COMPLETE=2,e.STATUS_WAITING_FOR_REVIEW=3,e.STATUS_IN_REVIEW=4,e.REVIEW_STATUS_IDLE=0,e.REVIEW_STATUS_WAITING_FOR_REVIEW=1,e.REVIEW_STATUS_IN_REVIEW=2,e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(9),l=n(1),a=n(98),s=n(590),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,"AddonModAssignSubmissionDelegate",t,n,o)||this;return i.defaultHandler=r,i.handlerNameProperty="type",i}return u(t,e),t.prototype.canPluginEditOffline=function(e,t,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"canEditOffline",[e,t,n]))},t.prototype.clearTmpData=function(e,t,n,o){return this.executeFunctionOnEnabled(n.type,"clearTmpData",[e,t,n,o])},t.prototype.copyPluginSubmissionData=function(e,t,n,o,r){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"copySubmissionData",[e,t,n,o,r]))},t.prototype.deletePluginOfflineData=function(e,t,n,o,r){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"deleteOfflineData",[e,t,n,o,r]))},t.prototype.getComponentForPlugin=function(e,t,n){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getComponent",[e,t,n]))},t.prototype.getPluginFiles=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getPluginFiles",[e,t,n,o]))},t.prototype.getPluginName=function(e){return this.executeFunctionOnEnabled(e.type,"getPluginName",[e])},t.prototype.getPluginSizeForCopy=function(e,t){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getSizeForCopy",[e,t]))},t.prototype.getPluginSizeForEdit=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getSizeForEdit",[e,t,n,o]))},t.prototype.hasPluginDataChanged=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"hasDataChanged",[e,t,n,o]))},t.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},t.prototype.isPluginSupportedForEdit=function(e){return Promise.resolve(this.executeFunctionOnEnabled(e,"isEnabledForEdit"))},t.prototype.isPluginEmpty=function(e,t){return this.executeFunctionOnEnabled(t.type,"isEmpty",[e,t])},t.prototype.prefetch=function(e,t,n,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"prefetch",[e,t,n,o]))},t.prototype.preparePluginSubmissionData=function(e,t,n,o,r,i,l,a){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"prepareSubmissionData",[e,t,n,o,r,i,l,a]))},t.prototype.preparePluginSyncData=function(e,t,n,o,r,i){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"prepareSyncData",[e,t,n,o,r,i]))},t=c([Object(o.A)(),d("design:paramtypes",[r.a,l.a,i.a,s.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(3),i=n(18),l=n(6),a=n(1),s=n(4),u=n(11),c=n(24),d=n(2),f=n(53),p=n(184),h=n(73),m=n(65),_=n(129),g=n(263),v=n(136),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p){this.sitesProvider=t,this.utils=n,this.translate=o,this.textUtils=r,this.gradesHelper=i,this.questionDelegate=l,this.filepoolProvider=a,this.timeUtils=s,this.accessRulesDelegate=u,this.quizOfflineProvider=c,this.domUtils=d,this.logHelper=f,this.pushNotificationsProvider=p,this.ROOT_CACHE_KEY="mmaModQuiz:",this.logger=e.getInstance("AddonModQuizProvider")}return t=e,e.prototype.formatGrade=function(e,t){return void 0===e||-1==e||null===e?this.translate.instant("addon.mod_quiz.notyetgraded"):this.utils.formatFloat(this.textUtils.roundToDecimals(e,t))},e.prototype.getAllQuestionsData=function(e,t,n,o,r,i,l){var a=this,s=[],u={},c=this.isNavigationSequential(e);return o||(o=this.getPagesFromLayout(t.layout)),o.forEach(function(e){c&&e<t.currentpage||s.push(a.getAttemptData(t.id,e,n,r,i,l).then(function(e){e.questions.forEach(function(e){u[e.slot]=e})}))}),Promise.all(s).then(function(){return u})},e.prototype.getAttemptAccessInformationCacheKey=function(e,t){return this.getAttemptAccessInformationCommonCacheKey(e)+":"+t},e.prototype.getAttemptAccessInformationCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptAccessInformation:"+e},e.prototype.getAttemptAccessInformation=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={quizid:e,attemptid:t},a={cacheKey:i.getAttemptAccessInformationCacheKey(e,t)};return n?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_quiz_get_attempt_access_information",l,a)})},e.prototype.getAttemptDataCacheKey=function(e,t){return this.getAttemptDataCommonCacheKey(e)+":"+t},e.prototype.getAttemptDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptData:"+e},e.prototype.getAttemptData=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={attemptid:e,page:t,preflightdata:l.utils.objectToArrayOfObjects(n,"name","value",!0)},s={cacheKey:l.getAttemptDataCacheKey(e,t)};return o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_quiz_get_attempt_data",a,s)})},e.prototype.getAttemptDueDate=function(e,n){var o=[];if(e.timelimit&&o.push(parseInt(n.timestart,10)+parseInt(e.timelimit,10)),e.timeclose&&o.push(parseInt(e.timeclose,10)),!o.length)return 0;var r=Math.min.apply(null,o);if(!r)return 0;switch(n.state){case t.ATTEMPT_IN_PROGRESS:return 1e3*r;case t.ATTEMPT_OVERDUE:return 1e3*(r+parseInt(e.graceperiod,10));default:return this.logger.warn("Unexpected state when getting due date: "+n.state),0}},e.prototype.getAttemptDueDateWarning=function(e,n){var o=this.getAttemptDueDate(e,n);return n.state===t.ATTEMPT_OVERDUE?this.translate.instant("addon.mod_quiz.overduemustbesubmittedby",{$a:this.timeUtils.userDate(o)}):o?this.translate.instant("addon.mod_quiz.mustbesubmittedby",{$a:this.timeUtils.userDate(o)}):void 0},e.prototype.getAttemptReadableState=function(e,n){if(n.finishedOffline)return[this.translate.instant("addon.mod_quiz.finishnotsynced")];switch(n.state){case t.ATTEMPT_IN_PROGRESS:return[this.translate.instant("addon.mod_quiz.stateinprogress")];case t.ATTEMPT_OVERDUE:var o=[],r=this.getAttemptDueDate(e,n);return o.push(this.translate.instant("addon.mod_quiz.stateoverdue")),r&&o.push(this.translate.instant("addon.mod_quiz.stateoverduedetails",{$a:this.timeUtils.userDate(r)})),o;case t.ATTEMPT_FINISHED:return[this.translate.instant("addon.mod_quiz.statefinished"),this.translate.instant("addon.mod_quiz.statefinisheddetails",{$a:this.timeUtils.userDate(1e3*n.timefinish)})];case t.ATTEMPT_ABANDONED:return[this.translate.instant("addon.mod_quiz.stateabandoned")];default:return[]}},e.prototype.getAttemptReadableStateName=function(e){switch(e){case t.ATTEMPT_IN_PROGRESS:return this.translate.instant("addon.mod_quiz.stateinprogress");case t.ATTEMPT_OVERDUE:return this.translate.instant("addon.mod_quiz.stateoverdue");case t.ATTEMPT_FINISHED:return this.translate.instant("addon.mod_quiz.statefinished");case t.ATTEMPT_ABANDONED:return this.translate.instant("addon.mod_quiz.stateabandoned");default:return""}},e.prototype.getAttemptReviewCacheKey=function(e,t){return this.getAttemptReviewCommonCacheKey(e)+":"+t},e.prototype.getAttemptReviewCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptReview:"+e},e.prototype.getAttemptReview=function(e,t,n,o){var r=this;return void 0===t&&(t=-1),this.sitesProvider.getSite(o).then(function(o){var i={attemptid:e,page:t},l={cacheKey:r.getAttemptReviewCacheKey(e,t),cacheErrors:["noreview"]};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_quiz_get_attempt_review",i,l)})},e.prototype.getAttemptSummaryCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptSummary:"+e},e.prototype.getAttemptSummary=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={attemptid:e,preflightdata:l.utils.objectToArrayOfObjects(t,"name","value",!0)},s={cacheKey:l.getAttemptSummaryCacheKey(e)};return n?s.omitExpires=!0:o&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_quiz_get_attempt_summary",a,s).then(function(t){return t&&t.questions?n&&r?l.quizOfflineProvider.loadQuestionsLocalStates(e,t.questions,i.getId()):t.questions:Promise.reject(null)})})},e.prototype.getCombinedReviewOptionsCacheKey=function(e,t){return this.getCombinedReviewOptionsCommonCacheKey(e)+":"+t},e.prototype.getCombinedReviewOptionsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"combinedReviewOptions:"+e},e.prototype.getCombinedReviewOptions=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){o=o||n.getUserId();var i={quizid:e,userid:o},l={cacheKey:r.getCombinedReviewOptionsCacheKey(e,o)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),n.read("mod_quiz_get_combined_review_options",i,l).then(function(e){return e&&e.someoptions&&e.alloptions?(e.someoptions=r.utils.objectToKeyValueMap(e.someoptions,"name","value"),e.alloptions=r.utils.objectToKeyValueMap(e.alloptions,"name","value"),e):Promise.reject(null)})})},e.prototype.getFeedbackForGradeCacheKey=function(e,t){return this.getFeedbackForGradeCommonCacheKey(e)+":"+t},e.prototype.getFeedbackForGradeCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"feedbackForGrade:"+e},e.prototype.getFeedbackForGrade=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={quizid:e,grade:t},l={cacheKey:r.getFeedbackForGradeCacheKey(e,t),updateFrequency:f.a.FREQUENCY_RARELY};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_quiz_get_quiz_feedback_for_grade",i,l)})},e.prototype.getGradeDecimals=function(e){return void 0===e.questiondecimalpoints&&(e.questiondecimalpoints=-1),-1==e.questiondecimalpoints?e.decimalpoints:e.questiondecimalpoints},e.prototype.getGradeFromGradebook=function(e,t,n,o,r){return this.gradesHelper.getGradeModuleItems(e,t,r,null,o,n).then(function(e){return e.shift()})},e.prototype.getLastFinishedAttemptFromList=function(e){if(e&&e.length)for(var t=e.length-1;t>=0;t--){var n=e[t];if(this.isAttemptFinished(n.state))return n}},e.prototype.getPreventSubmitMessages=function(e){var t=this,n=[];return e.forEach(function(e){if("random"==e.type||t.questionDelegate.isQuestionSupported(e.type)){var o=t.questionDelegate.getPreventSubmitMessage(e);o&&(o=t.translate.instant(o),n.push(t.translate.instant("core.question.questionmessage",{$a:e.slot,$b:o})))}else n.push(t.translate.instant("core.question.questionmessage",{$a:e.slot,$b:t.translate.instant("core.question.errorquestionnotsupported",{$a:e.type})}))}),n},e.prototype.getQuizDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"quiz:"+e},e.prototype.getQuizByField=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={courseids:[e]},s={cacheKey:l.getQuizDataCacheKey(e),updateFrequency:f.a.FREQUENCY_RARELY};return o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_quiz_get_quizzes_by_courses",a,s).then(function(e){if(e&&e.quizzes)for(var o in e.quizzes){var r=e.quizzes[o];if(r[t]==n)return r}return Promise.reject(null)})})},e.prototype.getQuiz=function(e,t,n,o,r){return this.getQuizByField(e,"coursemodule",t,n,o,r)},e.prototype.getQuizById=function(e,t,n,o,r){return this.getQuizByField(e,"id",t,n,o,r)},e.prototype.getQuizAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"quizAccessInformation:"+e},e.prototype.getQuizAccessInformation=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={quizid:e},l={cacheKey:r.getQuizAccessInformationCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_quiz_get_quiz_access_information",i,l)})},e.prototype.getQuizGradeMethod=function(e){switch("string"==typeof e&&(e=parseInt(e,10)),e){case t.GRADEHIGHEST:return this.translate.instant("addon.mod_quiz.gradehighest");case t.GRADEAVERAGE:return this.translate.instant("addon.mod_quiz.gradeaverage");case t.ATTEMPTFIRST:return this.translate.instant("addon.mod_quiz.attemptfirst");case t.ATTEMPTLAST:return this.translate.instant("addon.mod_quiz.attemptlast");default:return""}},e.prototype.getQuizRequiredQtypesCacheKey=function(e){return this.ROOT_CACHE_KEY+"quizRequiredQtypes:"+e},e.prototype.getQuizRequiredQtypes=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={quizid:e},i={cacheKey:o.getQuizRequiredQtypesCacheKey(e),updateFrequency:f.a.FREQUENCY_SOMETIMES};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_quiz_get_quiz_required_qtypes",r,i).then(function(e){return e&&e.questiontypes?e.questiontypes:Promise.reject(null)})})},e.prototype.getPagesFromLayout=function(e){for(var t=e.split(","),n=[],o=0,r=0;r<t.length;r++)"0"==t[r]&&(n.push(o),o++);return n},e.prototype.getPagesFromLayoutAndQuestions=function(e,t){for(var n=e.split(","),o=[],r=0,i=!1,l=0;l<n.length;l++){var a=Number(n[l]);0==a?(r++,i=!1):!i&&t[a]&&(o.push(r),i=!0)}return o},e.prototype.getUnsupportedQuestions=function(e){var t=this,n=[];return e.forEach(function(e){"random"==e||t.questionDelegate.isQuestionSupported(e)||n.push(e)}),n},e.prototype.getUnsupportedRules=function(e){var t=this,n=[];return e.forEach(function(e){t.accessRulesDelegate.isAccessRuleSupported(e)||n.push(e)}),n},e.prototype.getUserAttemptsCacheKey=function(e,t){return this.getUserAttemptsCommonCacheKey(e)+":"+t},e.prototype.getUserAttemptsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userAttempts:"+e},e.prototype.getUserAttempts=function(e,t,n,o,r,i,l){var a=this;return void 0===t&&(t="all"),void 0===n&&(n=!0),this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId();var s={quizid:e,userid:l,status:t,includepreviews:n?1:0},u={cacheKey:a.getUserAttemptsCacheKey(e,l),updateFrequency:f.a.FREQUENCY_SOMETIMES};return o?u.omitExpires=!0:r&&(u.getFromCache=!1,u.emergencyCache=!1),i.read("mod_quiz_get_user_attempts",s,u).then(function(e){return e&&e.attempts?e.attempts:Promise.reject(null)})})},e.prototype.getUserBestGradeCacheKey=function(e,t){return this.getUserBestGradeCommonCacheKey(e)+":"+t},e.prototype.getUserBestGradeCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userBestGrade:"+e},e.prototype.getUserBestGrade=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){o=o||n.getUserId();var i={quizid:e,userid:o},l={cacheKey:r.getUserBestGradeCacheKey(e,o)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),n.read("mod_quiz_get_user_best_grade",i,l)})},e.prototype.invalidateAllQuizData=function(e,t,n,o,r){o=o||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.invalidateAttemptAccessInformation(e,o)),i.push(this.invalidateCombinedReviewOptionsForUser(e,o,r)),i.push(this.invalidateFeedback(e,o)),i.push(this.invalidateQuizAccessInformation(e,o)),i.push(this.invalidateQuizRequiredQtypes(e,o)),i.push(this.invalidateUserAttemptsForUser(e,o,r)),i.push(this.invalidateUserBestGradeForUser(e,o,r)),n&&(i.push(this.invalidateAttemptData(n,o)),i.push(this.invalidateAttemptReview(n,o)),i.push(this.invalidateAttemptSummary(n,o))),t&&i.push(this.invalidateGradeFromGradebook(t,o,r)),Promise.all(i)},e.prototype.invalidateAttemptAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getAttemptAccessInformationCommonCacheKey(e))})},e.prototype.invalidateAttemptAccessInformationForAttempt=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getAttemptAccessInformationCacheKey(e,t))})},e.prototype.invalidateAttemptData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getAttemptDataCommonCacheKey(e))})},e.prototype.invalidateAttemptDataForPage=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getAttemptDataCacheKey(e,t))})},e.prototype.invalidateAttemptReview=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getAttemptReviewCommonCacheKey(e))})},e.prototype.invalidateAttemptReviewForPage=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getAttemptReviewCacheKey(e,t))})},e.prototype.invalidateAttemptSummary=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAttemptSummaryCacheKey(e))})},e.prototype.invalidateCombinedReviewOptions=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getCombinedReviewOptionsCommonCacheKey(e))})},e.prototype.invalidateCombinedReviewOptionsForUser=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCombinedReviewOptionsCacheKey(e,n))})},e.prototype.invalidateContent=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getQuiz(t,e,!0,!1,n).then(function(e){return o.getUserAttempts(e.id,"all",!0,!1,!1,n).then(function(r){return o.invalidateAllQuizData(e.id,t,r.length?r[r.length-1].id:void 0,n)})})},e.prototype.invalidateFeedback=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getFeedbackForGradeCommonCacheKey(e))})},e.prototype.invalidateFeedbackForGrade=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getFeedbackForGradeCacheKey(e,t))})},e.prototype.invalidateFiles=function(e){return this.filepoolProvider.invalidateFilesByComponent(this.sitesProvider.getCurrentSiteId(),t.COMPONENT,e)},e.prototype.invalidateGradeFromGradebook=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(r){return n=n||r.getUserId(),o.gradesHelper.invalidateGradeModuleItems(e,n,null,t)})},e.prototype.invalidateQuizAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getQuizAccessInformationCacheKey(e))})},e.prototype.invalidateQuizRequiredQtypes=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getQuizRequiredQtypesCacheKey(e))})},e.prototype.invalidateUserAttempts=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getUserAttemptsCommonCacheKey(e))})},e.prototype.invalidateUserAttemptsForUser=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getUserAttemptsCacheKey(e,n))})},e.prototype.invalidateUserBestGrade=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getUserBestGradeCommonCacheKey(e))})},e.prototype.invalidateUserBestGradeForUser=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getUserBestGradeCacheKey(e,n))})},e.prototype.invalidateQuizData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getQuizDataCacheKey(e))})},e.prototype.isAttemptFinished=function(e){return e==t.ATTEMPT_FINISHED||e==t.ATTEMPT_ABANDONED},e.prototype.isAttemptFinishedOffline=function(e,t){return this.quizOfflineProvider.getAttemptById(e,t).then(function(e){return!!e.finished}).catch(function(){return!1})},e.prototype.isAttemptTimeNearlyOver=function(e,n){if(n.state!=t.ATTEMPT_IN_PROGRESS)return!0;var o=this.getAttemptDueDate(e,n),r=e.autosaveperiod||0;return o>0&&Date.now()+r>=o},e.prototype.isLastAttemptOfflineUnfinished=function(e,t,n){return this.quizOfflineProvider.getQuizAttempts(e.id,t,n).then(function(e){var t=e.pop();return t&&!t.finished}).catch(function(){return!1})},e.prototype.isNavigationSequential=function(e){return"sequential"==e.navmethod},e.prototype.isPluginEnabled=function(e){return!0},e.prototype.isQuestionBlocked=function(e){return!!this.domUtils.convertToElement(e.html).querySelector(".mod_quiz-blocked_question_warning")},e.prototype.isQuizOffline=function(e){return!!e.allowofflineattempts&&!this.sitesProvider.getCurrentSite().isOfflineDisabled()},e.prototype.loadFinishedOfflineData=function(e,t){if(e.length){var n=e[e.length-1];return this.isAttemptFinishedOffline(n.id,t).then(function(e){n.finishedOffline=e})}return Promise.resolve()},e.prototype.logViewAttempt=function(e,t,n,o,r,i){var l=this;return void 0===t&&(t=0),void 0===n&&(n={}),this.sitesProvider.getSite(i).then(function(a){var s={attemptid:e,page:t,preflightdata:l.utils.objectToArrayOfObjects(n,"name","value",!0)},u=[];return u.push(a.write("mod_quiz_view_attempt",s)),o&&u.push(l.quizOfflineProvider.setAttemptCurrentPage(e,t,a.getId())),r&&l.pushNotificationsProvider.logViewEvent(r.id,r.name,"quiz","mod_quiz_view_attempt",{attemptid:e,page:t},i),Promise.all(u)})},e.prototype.logViewAttemptReview=function(e,n,o,r){var i={attemptid:e};return this.logHelper.logSingle("mod_quiz_view_attempt_review",i,t.COMPONENT,n,o,"quiz",i,r)},e.prototype.logViewAttemptSummary=function(e,n,o,r,i){var l={attemptid:e,preflightdata:this.utils.objectToArrayOfObjects(n,"name","value",!0)};return this.logHelper.logSingle("mod_quiz_view_attempt_summary",l,t.COMPONENT,o,r,"quiz",{attemptid:e},i)},e.prototype.logViewQuiz=function(e,n,o){return this.logHelper.logSingle("mod_quiz_view_quiz",{quizid:e},t.COMPONENT,e,n,"quiz",{},o)},e.prototype.processAttempt=function(e,t,n,o,r,i,l,a){return l?this.processAttemptOffline(e,t,n,o,r,a):this.processAttemptOnline(t.id,n,o,r,i,a)},e.prototype.processAttemptOnline=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={attemptid:e,data:l.utils.objectToArrayOfObjects(t,"name","value"),finishattempt:o?1:0,timeup:r?1:0,preflightdata:l.utils.objectToArrayOfObjects(n,"name","value")};return i.write("mod_quiz_process_attempt",a).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.state?e.state:Promise.reject(null)})})},e.prototype.processAttemptOffline=function(e,t,n,o,r,i){var l=this;return this.getAttemptSummary(t.id,o,!0,!1,!0,i).then(function(o){var a=l.utils.arrayToObject(o,"slot");return l.quizOfflineProvider.processAttempt(e,t,a,n,r,i)})},e.prototype.quizHasGrades=function(e){return e.grade>=5e-6&&e.sumgrades>=5e-6},e.prototype.rescaleGrade=function(e,t,n){void 0===n&&(n=!0);var o,r=parseFloat(e);return isNaN(r)||(o=t.sumgrades>=5e-6?r*t.grade/t.sumgrades:0),"question"===n?this.formatGrade(o,this.getGradeDecimals(t)):n?this.formatGrade(o,t.decimalpoints):null===o?null:void 0!==o?String(o):void 0},e.prototype.saveAttempt=function(e,t,n,o,r,i){try{return r?this.processAttemptOffline(e,t,n,o,!1,i):this.saveAttemptOnline(t.id,n,o,i)}catch(e){return this.logger.error(e),Promise.reject(null)}},e.prototype.saveAttemptOnline=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={attemptid:e,data:r.utils.objectToArrayOfObjects(t,"name","value"),preflightdata:r.utils.objectToArrayOfObjects(n,"name","value")};return o.write("mod_quiz_save_attempt",i).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.status?void 0:Promise.reject(null)})})},e.prototype.shouldShowTimeLeft=function(e,n,o){var r=this.timeUtils.timestamp();return n.state==t.ATTEMPT_IN_PROGRESS&&this.accessRulesDelegate.shouldShowTimeLeft(e,n,o,r)},e.prototype.startAttempt=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={quizid:e,preflightdata:r.utils.objectToArrayOfObjects(t,"name","value",!0),forcenew:n?1:0};return o.write("mod_quiz_start_attempt",i).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.attempt?e.attempt:Promise.reject(null)})})},e.COMPONENT="mmaModQuiz",e.ATTEMPT_FINISHED_EVENT="addon_mod_quiz_attempt_finished",e.GRADEHIGHEST=1,e.GRADEAVERAGE=2,e.ATTEMPTFIRST=3,e.ATTEMPTLAST=4,e.QUESTION_OPTIONS_MAX_ONLY=1,e.QUESTION_OPTIONS_MARK_AND_MAX=2,e.ATTEMPT_IN_PROGRESS="inprogress",e.ATTEMPT_OVERDUE="overdue",e.ATTEMPT_FINISHED="finished",e.ATTEMPT_ABANDONED="abandoned",e.QUIZ_SHOW_TIME_BEFORE_DEADLINE=3600,e=t=y([Object(o.A)(),b("design:paramtypes",[l.a,a.a,d.a,r.c,u.a,p.a,h.a,i.a,c.a,_.a,g.a,s.a,m.a,v.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(52),a=n(136),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.sitesProvider=t,this.coursesProvider=n,this.pushNotificationsProvider=o,this.ROOT_CACHE_KEY="mmGrades:",this.logger=e.getInstance("CoreGradesProvider")}return e.prototype.getCourseGradesCacheKey=function(e,t){return this.getCourseGradesPrefixCacheKey(e)+t},e.prototype.getCourseGradesItemsCacheKey=function(e,t,n){return n=n||0,this.getCourseGradesPrefixCacheKey(e)+t+":"+n},e.prototype.getCourseGradesPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"items:"+e+":"},e.prototype.getCoursesGradesCacheKey=function(){return this.ROOT_CACHE_KEY+"coursesgrades"},e.prototype.getGradeItems=function(e,t,n,o,r){var i=this;return void 0===r&&(r=!1),o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(l){return t=t||l.getUserId(),i.isGradeItemsAvalaible(o).then(function(l){return l?i.getCourseGradesItems(e,t,n,o,r).catch(function(){return i.getCourseGradesTable(e,t,o,r)}):i.getCourseGradesTable(e,t,o,r)})})},e.prototype.getCourseGradesItems=function(e,t,n,o,r){var i=this;return void 0===r&&(r=!1),this.sitesProvider.getSite(o).then(function(o){t=t||o.getUserId(),n=n||0,i.logger.debug("Get grades for course '"+e+"' and user '"+t+"'");var l={courseid:e,userid:t,groupid:n},a={cacheKey:i.getCourseGradesItemsCacheKey(e,t,n)};return r&&(a.getFromCache=0,a.emergencyCache=0),o.read("gradereport_user_get_grade_items",l,a).then(function(e){return e&&e.usergrades&&e.usergrades[0]?e.usergrades[0].gradeitems:Promise.reject(null)})})},e.prototype.getCourseGradesTable=function(e,t,n,o){var r=this;return void 0===o&&(o=!1),this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId(),r.logger.debug("Get grades for course '"+e+"' and user '"+t+"'");var i={courseid:e,userid:t},l={cacheKey:r.getCourseGradesCacheKey(e,t)};return o&&(l.getFromCache=0,l.emergencyCache=0),n.read("gradereport_user_get_grades_table",i,l).then(function(e){return e&&e.tables&&e.tables[0]?e.tables[0]:Promise.reject(null)})})},e.prototype.getCoursesGrades=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){t.logger.debug("Get course grades");var n={cacheKey:t.getCoursesGradesCacheKey()};return e.read("gradereport_overview_get_course_grades",void 0,n).then(function(e){return e&&e.grades?e.grades:Promise.reject(null)})})},e.prototype.invalidateAllCourseGradesData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getCourseGradesPrefixCacheKey(e))})},e.prototype.invalidateCourseGradesData=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCourseGradesCacheKey(e,t))})},e.prototype.invalidateCoursesGradesData=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getCoursesGradesCacheKey())})},e.prototype.invalidateCourseGradesItemsData=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getCourseGradesItemsCacheKey(e,t,n))})},e.prototype.isCourseGradesEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){if(!e.wsAvailable("gradereport_overview_get_course_grades"))return!1;return-1!==(e.getStoredConfig("mygradesurl")||"").indexOf("/grade/report/overview/")})},e.prototype.isPluginEnabledForCourse=function(e,t){return e?this.coursesProvider.getUserCourse(e,!0,t).then(function(e){return!(e&&void 0!==e.showgrades&&0==e.showgrades)}):Promise.reject(null)},e.prototype.isGradeItemsAvalaible=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("gradereport_user_get_grade_items")})},e.prototype.logCourseGradesView=function(e,t,n){var o=this;t=t||this.sitesProvider.getCurrentSiteUserId();var r="gradereport_user_view_grade_report";return n?this.pushNotificationsProvider.logViewEvent(e,n,"grades",r,{userid:t}):this.coursesProvider.getUserCourse(e,!0).catch(function(){return{}}).then(function(n){o.pushNotificationsProvider.logViewEvent(e,n.fullname||"","grades",r,{userid:t})}),this.sitesProvider.getCurrentSite().write(r,{courseid:e,userid:t})},e.prototype.logCoursesGradesView=function(e){e||(e=this.sitesProvider.getCurrentSiteHomeId());var t={courseid:e};return this.pushNotificationsProvider.logViewListEvent("grades","gradereport_overview_view_grade_report",t),this.sitesProvider.getCurrentSite().write("gradereport_overview_view_grade_report",t)},e.TYPE_NONE=0,e.TYPE_VALUE=1,e.TYPE_SCALE=2,e.TYPE_TEXT=3,e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(3),i=n(9),l=n(6),a=n(1),s=n(11),u=n(4),c=n(2),d=n(168),f=n(65),p=n(53),h=n(286),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,n,o,r,i,l,a,s,u){this.sitesProvider=n,this.utils=o,this.translate=r,this.textUtils=i,this.domUtils=l,this.lessonOfflineProvider=a,this.logHelper=s,this.eventsProvider=u,this.siteSchema={name:"AddonModLessonProvider",version:1,tables:[{name:t.PASSWORD_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"password",type:"TEXT"},{name:"timemodified",type:"INTEGER"}]}]},this.ROOT_CACHE_KEY="mmaModLesson:",this.logger=e.getInstance("AddonModLessonProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.addAnswerAndResponseToFeedback=function(e,t,n,o,r){return e+='<tr><td class="cell c0 lastcol">'+(n?t:this.textUtils.cleanTags(t))+"</td></tr>",o&&o.trim()?e+='<tr><td class="cell c0 lastcol '+r+'"><em>'+this.translate.instant("addon.mod_lesson.response")+"</em>: <br/>"+o+"</td></tr>":e+='<tr><td class="cell c0 lastcol"></td></tr>',e},e.prototype.addMessage=function(e,t,n){e.push({message:this.translate.instant(t,n)})},e.prototype.addResultValueEolPage=function(e,t,n,o){var r="";if(o){r=this.translate.instant("addon.mod_lesson."+t,"boolean"!=typeof n?{$a:n}:void 0)}e.data[t]={name:t,value:n,message:r}},e.prototype.answerPageIsContent=function(e){if(e.qtype==this.translate.instant("addon.mod_lesson.branchtable"))return!0;if(e.answerdata&&!this.answerPageIsQuestion(e)&&e.answerdata.answers&&e.answerdata.answers[0]){return!!this.domUtils.convertToElement(e.answerdata.answers[0][0]).querySelector('input[type="button"]')}return!1},e.prototype.answerPageIsQuestion=function(e){if(!e.answerdata)return!1;if(e.answerdata.score)return!0;if(e.answerdata.answers)for(var t=0;t<e.answerdata.answers.length;t++){if(e.answerdata.answers[t][1])return!0}return!1},e.prototype.calculateOfflineData=function(e,t,n,o,r,i){t=t||{};var l,a=o||t.reviewmode,s=[],u="";return t.canmanage||(e.ongoing&&!a&&s.push(this.getOngoingScoreMessage(e,t,n,o,r,i).then(function(e){u=e})),e.progressbar&&s.push(this.calculateProgress(e.id,t,n,o,r,i).then(function(e){l=e}))),Promise.all(s).then(function(){return{reviewmode:a,progress:l,ongoingscore:u}})},e.prototype.calculateProgress=function(e,t,n,o,r,i){var l=this;if(i=i||this.sitesProvider.getCurrentSiteId(),o)return Promise.resolve(100);var a,s=t.attemptscount;return(r?Promise.resolve():this.getPages(e,n,!0,!1,i).then(function(e){r=l.createPagesIndex(e)})).then(function(){return l.getPagesIdsWithQuestionAttempts(e,s,!1,i)}).then(function(t){return a=t,l.getContentPagesViewedIds(e,s,i)}).then(function(e){var n={},o=t.firstpageid;for(a=l.utils.mergeArraysWithoutDuplicates(a,e);o;)o=l.validPageAndView(r,r[o],n,a);return 100*l.textUtils.roundToDecimals(a.length/Object.keys(n).length,2)})},e.prototype.checkAnswer=function(e,n,o,r,i){var l={answerid:0,noanswer:!1,correctanswer:!1,isessayquestion:!1,response:"",newpageid:0,studentanswer:"",userresponse:null,feedback:"",nodefaultresponse:!1,inmediatejump:!1};switch(n.page.qtype){case t.LESSON_PAGE_BRANCHTABLE:l.inmediatejump=!0,l.newpageid=this.getNewPageId(n.page.id,o.jumpto,r);break;case t.LESSON_PAGE_ESSAY:this.checkAnswerEssay(n,o,l);break;case t.LESSON_PAGE_MATCHING:this.checkAnswerMatching(n,o,l);break;case t.LESSON_PAGE_MULTICHOICE:this.checkAnswerMultichoice(e,n,o,i,l);break;case t.LESSON_PAGE_NUMERICAL:this.checkAnswerNumerical(e,n,o,i,l);break;case t.LESSON_PAGE_SHORTANSWER:this.checkAnswerShort(e,n,o,i,l);break;case t.LESSON_PAGE_TRUEFALSE:this.checkAnswerTruefalse(e,n,o,i,l)}return l},e.prototype.checkAnswerEssay=function(e,t,n){var o;if(n.isessayquestion=!0,!t)return n.inmediatejump=!0,void(n.newpageid=e.page.id);(o=void 0!==t["answer_editor[text]"]?t["answer_editor[text]"]:"object"==typeof t.answer_editor?t.answer_editor.text:void 0!==t["answer[text]"]?t["answer[text]"]:"object"==typeof t.answer?t.answer.text:t.answer)&&""!==o.trim()?(e.answers.forEach(function(e){n.answerid=e.id,n.newpageid=e.jumpto}),n.userresponse={sent:0,graded:0,score:0,answer:o,answerformat:1,response:"",responseformat:1},n.studentanswerformat=1,n.studentanswer=o):n.noanswer=!0},e.prototype.checkAnswerMatching=function(e,t,n){if(!t)return n.inmediatejump=!0,void(n.newpageid=e.page.id);var o=this.getUserResponseMatching(t),r=this.utils.clone(e.answers),i=r.shift(),l=r.shift(),a={};r.forEach(function(e){""===e.answer&&""===e.response||(a[e.id]=e)});var s=[],u=0;n.studentanswer="",n.studentanswerformat=1;for(var c in o){var d=o[c];if(!d)return void(n.noanswer=!0);if(d=this.textUtils.decodeHTML(d),s.push(d),void 0!==a[c]){var f=a[c];n.studentanswer+="<br />"+f.answer+" = "+d,f.response&&f.response.trim()==d.trim()&&u++}}n.userresponse=s.join(","),u==Object.keys(a).length?(n.correctanswer=!0,n.response=i.answer,n.answerid=i.id,n.newpageid=i.jumpto):(n.correctanswer=!1,n.response=l.answer,n.answerid=l.id,n.newpageid=l.jumpto)},e.prototype.checkAnswerMultichoice=function(e,n,o,r,i){var l=this;if(!o)return i.inmediatejump=!0,void(i.newpageid=n.page.id);var a=this.getUsedAnswersMultichoice(n);if(n.page.qoption){var s=this.getUserResponseMultichoice(o);if(!s||!Array.isArray(s))return void(i.noanswer=!0);i.userresponse=s.join(",");var u,c,d=[],f=[],p=0,h=0,m=0,_=0;i.studentanswer="",i.studentanswerformat=1,a.forEach(function(e){for(var t in s){if(s[t]==e.id){d.push(e.answer),f.push(e.response);break}}}),i.studentanswer=d.join(t.MULTIANSWER_DELIMITER),a.forEach(function(t){var o=l.isAnswerCorrect(e,n.page.id,t,r);s.forEach(function(e){e==t.id&&(o?p++:(void 0===c&&(c=t.jumpto),_||(_=t.id)))}),o&&(h++,void 0===u&&(u=t.jumpto),m||(m=t.id))}),s.length==h&&p==h?(i.correctanswer=!0,i.response=f.join(t.MULTIANSWER_DELIMITER),i.newpageid=u,i.answerid=m):(i.correctanswer=!1,i.response=f.join(t.MULTIANSWER_DELIMITER),i.newpageid=c,i.answerid=_)}else{if(void 0===o.answerid||!o.answerid&&0!==Number(o.answerid))return void(i.noanswer=!0);i.answerid=o.answerid;for(var g in n.answers){var v=n.answers[g];if(v.id==o.answerid){i.correctanswer=this.isAnswerCorrect(e,n.page.id,v,r),i.newpageid=v.jumpto,i.response=v.response,i.userresponse=i.studentanswer=v.answer;break}}}},e.prototype.checkAnswerNumerical=function(e,t,n,o,r){var i=parseFloat(n.answer);if(r.response="",r.newpageid=0,n.answer&&!isNaN(i)){r.useranswer=i,r.studentanswer=r.userresponse=r.useranswer;for(var l in t.answers){var a=t.answers[l],s=void 0,u=void 0;if(a.answer&&-1!=a.answer.indexOf(":")){var c=a.answer.split(":");u=parseFloat(c[0]),s=parseFloat(c[1])}else s=u=parseFloat(a.answer);if(r.useranswer>=u&&r.useranswer<=s){r.newpageid=a.jumpto,r.response=a.response,r.correctanswer=this.isAnswerCorrect(e,t.page.id,a,o),r.answerid=a.id;break}}this.checkOtherAnswers(e,t,r)}else r.noanswer=!0},e.prototype.checkAnswerShort=function(e,t,n,o,r){var i=!(!n.answer||!n.answer.trim)&&n.answer.trim();if(i){for(var l in t.answers){var a=t.answers[l],s=t.page.qoption,u=a.answer,c=!1,d=void 0;if(s?(d="","/i"==u.substr(-2)&&(u=u.substr(0,u.length-2),d="i")):(u=u.replace("*","#####"),u=(u=this.textUtils.escapeForRegex(u)).replace("#####",".*")),this.isAnswerCorrect(e,t.page.id,a,o))s?i.match(new RegExp("^"+u+"$",d))&&(c=!0):i.match(new RegExp("^"+u+"$","i"))&&(c=!0),c&&(r.correctanswer=!0);else if(s){switch(u.substr(0,2)){case"--":u=u.substr(2),i.match(new RegExp("^"+u+"$",d))||(c=!0);break;case"++":u=u.substr(2);var f=i.match(new RegExp(u,"g"+d));if(f){c=!0;for(var p=f[0].length,h=[],m=[],_=0;_<p;_++)h.push(f[0][_]),m.push('<span class="incorrect matches">'+f[0][_]+"</span>");i=i.replace(h,m)}break;default:i.match(new RegExp("^"+u+"$",d))&&(c=!0)}r.correctanswer=!1}else i.match(new RegExp("^"+u+"$","i"))&&(c=!0);if(c){r.newpageid=a.jumpto,r.response=a.response,r.answerid=a.id;break}}this.checkOtherAnswers(e,t,r),r.userresponse=i,r.studentanswer=this.textUtils.s(i)}else r.noanswer=!0},e.prototype.checkAnswerTruefalse=function(e,t,n,o,r){if(n.answerid){r.answerid=n.answerid;for(var i in t.answers){var l=t.answers[i];if(l.id==n.answerid){r.correctanswer=this.isAnswerCorrect(e,t.page.id,l,o),r.newpageid=l.jumpto,r.response=l.response,r.studentanswer=r.userresponse=l.answer;break}}}else r.noanswer=!0},e.prototype.checkOtherAnswers=function(e,n,o){if(0==o.answerid){var r=n.answers[n.answers.length-1]||{};"string"==typeof r.answer&&-1!=r.answer.indexOf(t.LESSON_OTHER_ANSWERS)&&(o.newpageid=r.jumpto,o.response=r.response,e.custom&&(o.correctanswer=r.score>0),o.answerid=r.id)}},e.prototype.createPagesIndex=function(e){var t={};return e.forEach(function(e){t[e.page.id]=e.page}),t},e.prototype.finishRetake=function(e,n,o,r,i,l,a,s){var u=this;if(l){var c=a.attemptscount;return this.lessonOfflineProvider.finishRetake(e.id,n,c,!0,r,s).then(function(){return u.lessonGrade(e,c,o,i,void 0,s).catch(function(){return{}})}).then(function(t){var n,l={data:{},messages:[],warnings:[]},c=[],f=!0;return u.addResultValueEolPage(l,"offline",!0),u.addResultValueEolPage(l,"gradeinfo",t),e.custom&&!a.canmanage&&t.nquestions<e.minquestions&&(f=!1,u.addMessage(l.messages,"addon.mod_lesson.numberofpagesviewednotice",{$a:{nquestions:t.nquestions,minquestions:e.minquestions}})),a.canmanage?e.grade!=d.a.TYPE_NONE&&u.addResultValueEolPage(l,"displayofgrade",!0,!0):f&&(c.push(u.calculateProgress(e.id,a,o,i,void 0,s).then(function(e){u.addResultValueEolPage(l,"progresscompleted",e)})),t.attempts?(e.custom||(u.addResultValueEolPage(l,"numberofpagesviewed",t.nquestions,!0),e.minquestions&&t.nquestions<e.minquestions&&u.addResultValueEolPage(l,"youshouldview",e.minquestions,!0),u.addResultValueEolPage(l,"numberofcorrectanswers",t.earned,!0)),n={score:t.earned,grade:t.total},t.nmanual?(n.tempmaxgrade=t.total-t.manualpoints,n.essayquestions=t.nmanual,u.addResultValueEolPage(l,"displayscorewithessays",n,!0)):u.addResultValueEolPage(l,"displayscorewithoutessays",n,!0),e.grade!=d.a.TYPE_NONE&&(n={grade:u.textUtils.roundToDecimals(t.grade*e.grade/100,1),total:e.grade},u.addResultValueEolPage(l,"yourcurrentgradeisoutof",n,!0))):e.timelimit?r&&u.addResultValueEolPage(l,"eolstudentoutoftimenoanswers",!0,!0):u.addResultValueEolPage(l,"welldone",!0,!0)),e.modattempts&&a.canmanage&&u.addResultValueEolPage(l,"modattemptsnoteacher",!0,!0),f&&u.addResultValueEolPage(l,"gradelesson",1),l})}return this.finishRetakeOnline(e.id,o,r,i,s).then(function(o){return u.eventsProvider.trigger(t.DATA_SENT_EVENT,{lessonId:e.id,type:"finish",courseId:n,outOfTime:r,review:i},u.sitesProvider.getCurrentSiteId()),o})},e.prototype.finishRetakeOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={lessonid:e,outoftime:n?1:0,review:o?1:0};return"string"==typeof t&&(l.password=t),r.write("mod_lesson_finish_attempt",l).then(function(e){var t={};return e.data.forEach(function(e){e.value&&"string"==typeof e.value&&"1"!==e.value&&(e.value=i.textUtils.parseJSON(e.value)),t[e.name]=e}),e.data=t,e})})},e.prototype.getAccessInformation=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={lessonid:e},l={cacheKey:r.getAccessInformationCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_lesson_get_lesson_access_information",i,l)})},e.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInfo:"+e},e.prototype.getContentPagesViewed=function(e,n,o){var r=[],i=t.TYPE_STRUCTURE,l={online:[],offline:[]};return r.push(this.getContentPagesViewedOnline(e,n,!1,!1,o).then(function(e){l.online=e})),r.push(this.lessonOfflineProvider.getRetakeAttemptsForType(e,n,i,o).catch(function(){return[]}).then(function(e){l.offline=e})),Promise.all(r).then(function(){return l})},e.prototype.getContentPagesViewedCacheKey=function(e,t){return this.getContentPagesViewedCommonCacheKey(e)+":"+t},e.prototype.getContentPagesViewedCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"contentPagesViewed:"+e},e.prototype.getContentPagesViewedIds=function(e,t,n){return this.getContentPagesViewed(e,t,n).then(function(e){var t={};return e.online.concat(e.offline).forEach(function(e){t[e.pageid]||(t[e.pageid]=!0)}),Object.keys(t).map(function(e){return Number(e)})})},e.prototype.getContentPagesViewedOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={lessonid:e,lessonattempt:t},a={cacheKey:i.getContentPagesViewedCacheKey(e,t)};return n?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_lesson_get_content_pages_viewed",l,a).then(function(e){return e.pages})})},e.prototype.getLastContentPageViewed=function(e,t,n){return this.getContentPagesViewed(e,t,n).then(function(e){var t,n=0;return e.online.forEach(function(e){e.timeseen>n&&(t=e,n=e.timeseen)}),e.offline.forEach(function(e){e.timemodified>n&&(t=e,n=e.timemodified)}),t}).catch(function(){})},e.prototype.getLastPageSeen=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r;return this.lessonOfflineProvider.getLastQuestionPageAttempt(e,t,n).then(function(i){return i&&(r=i.newpageid),o.getLastContentPageViewed(e,t,n).then(function(e){return e&&(i?e.timemodified>i.timemodified&&(r=e.newpageid||e.pageid):r=e.newpageid||e.pageid),r})})},e.prototype.getLesson=function(e,t,n,o,r){return this.getLessonByField(e,"coursemodule",t,n,o,r)},e.prototype.getLessonByField=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={courseids:[e]},s={cacheKey:l.getLessonDataCacheKey(e),updateFrequency:p.a.FREQUENCY_RARELY};return o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_lesson_get_lessons_by_courses",a,s).then(function(e){if(e&&e.lessons){var o=e.lessons.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getLessonById=function(e,t,n,o,r){return this.getLessonByField(e,"id",t,n,o,r)},e.prototype.getLessonDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"lesson:"+e},e.prototype.getLessonWithPassword=function(e,t,n,o,r,i){var l=this;return void 0===n&&(n=!0),this.sitesProvider.getSite(i).then(function(i){var a={lessonid:e},s={cacheKey:l.getLessonWithPasswordCacheKey(e)};return"string"==typeof t&&(a.password=t),o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_lesson_get_lesson",a,s).then(function(t){return void 0===t.lesson.ongoing&&(l.removeStoredPassword(e,i.id),n)?l.invalidateLessonWithPassword(e,i.id).catch(function(){}).then(function(){return Promise.reject(l.translate.instant("addon.mod_lesson.loginfail"))}):t.lesson})})},e.prototype.getLessonWithPasswordCacheKey=function(e){return this.ROOT_CACHE_KEY+"lessonWithPswrd:"+e},e.prototype.getNewPageId=function(e,t,n){return n&&n[e]&&n[e][t]?n[e][t].calculatedjump:t||e},e.prototype.getOngoingScoreMessage=function(e,t,n,o,r,i){var l=this;if(t.canmanage)return Promise.resolve(this.translate.instant("addon.mod_lesson.teacherongoingwarning"));var a=t.attemptscount;return o&&a--,this.lessonGrade(e,a,n,o,r,i).then(function(t){var n={};return e.custom?(n.score=t.earned,n.currenthigh=t.total,l.translate.instant("addon.mod_lesson.ongoingcustom",{$a:n})):(n.correct=t.earned,n.viewed=t.attempts,l.translate.instant("addon.mod_lesson.ongoingnormal",{$a:n}))})},e.prototype.getPageAnswers=function(e,t,n,o,r){return this.getPageData(e,t,n,o,!0,!0,!1,void 0,void 0,r).then(function(e){return e.answers})},e.prototype.getPagesAnswers=function(e,t,n,o,r){var i=this,l={},a=[];return t.forEach(function(t){a.push(i.getPageAnswers(e,t,n,o,r).then(function(e){e.forEach(function(e){e.pageid=t,l[e.id]=e})}))}),Promise.all(a).then(function(){return l})},e.prototype.getPageData=function(e,t,n,o,r,i,l,a,s,u){var c=this;return this.sitesProvider.getSite(u).then(function(d){var f={lessonid:e.id,pageid:Number(t),review:o?1:0,returncontents:r?1:0},p={cacheKey:c.getPageDataCacheKey(e.id,t)};return"string"==typeof n&&(f.password=n),i?p.omitExpires=!0:l&&(p.getFromCache=!1,p.emergencyCache=!1),o&&(p.getFromCache=!1,p.saveToCache=!1,p.emergencyCache=!1),d.read("mod_lesson_get_page_data",f,p).then(function(t){return i&&a&&t.page?c.calculateOfflineData(e,a,n,o,void 0,u).then(function(r){return Object.assign(t,r),c.getPageViewMessages(e,a,t.page,o,s,n,u)}).then(function(e){return t.messages=e,t}):t})})},e.prototype.getPageDataCacheKey=function(e,t){return this.getPageDataCommonCacheKey(e)+":"+t},e.prototype.getPageDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"pageData:"+e},e.prototype.getPages=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={lessonid:e},a={cacheKey:i.getPagesCacheKey(e),updateFrequency:p.a.FREQUENCY_SOMETIMES};return"string"==typeof t&&(l.password=t),n?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_lesson_get_pages",l,a).then(function(e){return e.pages})})},e.prototype.getPagesCacheKey=function(e){return this.ROOT_CACHE_KEY+"pages:"+e},e.prototype.getPagesPossibleJumps=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={lessonid:e},l={cacheKey:r.getPagesPossibleJumpsCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_lesson_get_pages_possible_jumps",i,l).then(function(e){if(e.jumps){var t={};return e.jumps.forEach(function(e){void 0===t[e.pageid]&&(t[e.pageid]={}),t[e.pageid][e.jumpto]=e}),t}return Promise.reject(null)})})},e.prototype.getPagesPossibleJumpsCacheKey=function(e){return this.ROOT_CACHE_KEY+"pagesJumps:"+e},e.prototype.getPageProcessMessages=function(e,t,n,o,r){var i=[];return t.canmanage&&(this.lessonDisplayTeacherWarning(r)&&this.addMessage(i,"addon.mod_lesson.teacherjumpwarning",{$a:{cluster:this.translate.instant("addon.mod_lesson.clusterjump"),unseen:this.translate.instant("addon.mod_lesson.unseenpageinbranch")}}),e.timelimit&&this.addMessage(i,"addon.mod_lesson.teachertimerwarning")),n.attemptsremaining>0&&e.review&&!o&&this.addMessage(i,"addon.mod_lesson.attemptsremaining",{$a:n.attemptsremaining}),i},e.prototype.getPagesIdsWithQuestionAttempts=function(e,t,n,o,r){return this.getQuestionsAttempts(e,t,n,void 0,o,r).then(function(e){var t={};return e.online.concat(e.offline).forEach(function(e){t[e.pageid]||(t[e.pageid]=!0)}),Object.keys(t).map(function(e){return Number(e)})})},e.prototype.getPageViewMessages=function(e,n,o,r,i,l,a){var s=this,u=[],c=Promise.resolve();if(n.canmanage)e.timelimit&&this.addMessage(u,"addon.mod_lesson.teachertimerwarning"),this.lessonDisplayTeacherWarning(i)&&this.addMessage(u,"addon.mod_lesson.teacherjumpwarning",{$a:{cluster:this.translate.instant("addon.mod_lesson.clusterjump"),unseen:this.translate.instant("addon.mod_lesson.unseenpageinbranch")}});else if(o.qtype==t.LESSON_PAGE_BRANCHTABLE&&e.minquestions){c=this.lessonGrade(e,n.attemptscount,l,r,void 0,a).then(function(t){t.attempts&&(t.nquestions<e.minquestions&&s.addMessage(u,"addon.mod_lesson.numberofpagesviewednotice",{$a:{nquestions:t.nquestions,minquestions:e.minquestions}}),r||e.retake||(s.addMessage(u,"addon.mod_lesson.numberofcorrectanswers",{$a:t.earned}),e.grade!=d.a.TYPE_NONE&&s.addMessage(u,"addon.mod_lesson.yourcurrentgradeisoutof",{$a:{grade:s.textUtils.roundToDecimals(t.grade*e.grade/100,1),total:e.grade}})))}).catch(function(){})}return c.then(function(){return u})},e.prototype.getQuestionsAttempts=function(e,t,n,o,r,i){var l=[],a={online:[],offline:[]};return l.push(this.getQuestionsAttemptsOnline(e,t,n,o,!1,!1,r,i).then(function(e){a.online=e})),l.push(this.lessonOfflineProvider.getQuestionsAttempts(e,t,n,o,r).catch(function(){return[]}).then(function(e){a.offline=e})),Promise.all(l).then(function(){return a})},e.prototype.getQuestionsAttemptsCacheKey=function(e,t,n){return this.getQuestionsAttemptsCommonCacheKey(e)+":"+n+":"+t},e.prototype.getQuestionsAttemptsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"questionsAttempts:"+e},e.prototype.getQuestionsAttemptsOnline=function(e,t,n,o,r,i,l,a){var s=this;return this.sitesProvider.getSite(l).then(function(l){a=a||l.getUserId();var u={lessonid:e,attempt:t,userid:a},c={cacheKey:s.getQuestionsAttemptsCacheKey(e,t,a)};return r?c.omitExpires=!0:i&&(c.getFromCache=!1,c.emergencyCache=!1),l.read("mod_lesson_get_questions_attempts",u,c).then(function(e){return o||n?e.attempts.filter(function(e){return!(n&&!e.correct)&&(!o||e.pageid==o)}):e.attempts})})},e.prototype.getRetakesOverview=function(e,t,n,o,r){var i=this;return t=t||0,this.sitesProvider.getSite(r).then(function(r){var l={lessonid:e,groupid:t},a={cacheKey:i.getRetakesOverviewCacheKey(e,t),updateFrequency:p.a.FREQUENCY_OFTEN};return n?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_lesson_get_attempts_overview",l,a).then(function(e){return e.data})})},e.prototype.getRetakesOverviewCacheKey=function(e,t){return this.getRetakesOverviewCommonCacheKey(e)+":"+t},e.prototype.getRetakesOverviewCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"retakesOverview:"+e},e.prototype.getStoredPassword=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.PASSWORD_TABLE,{lessonid:e}).then(function(e){return e.password})})},e.prototype.getSubpagesOf=function(e,t,n){var o=[];for(t=e[t].nextpageid,n=n||[];t&&-1==n.indexOf(e[t].qtype);)o.push(e[t]),t=e[t].nextpageid;return o},e.prototype.getTimers=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId();var l={lessonid:e,userid:r},a={cacheKey:i.getTimersCacheKey(e,r)};return t?a.omitExpires=!0:n&&(a.getFromCache=!1,a.emergencyCache=!1),o.read("mod_lesson_get_user_timers",l,a).then(function(e){return e.timers})})},e.prototype.getTimersCacheKey=function(e,t){return this.getTimersCommonCacheKey(e)+":"+t},e.prototype.getTimersCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"timers:"+e},e.prototype.getUsedAnswersMultichoice=function(e){return this.utils.clone(e.answers).filter(function(e){return""!==e.answer})},e.prototype.getUserResponseMatching=function(e){if(e.response)return e.response;var t={};for(var n in e){var o=n.match(/^response\[(\d+)\]/);o&&o.length>1&&(t[o[1]]=e[n])}return t},e.prototype.getUserResponseMultichoice=function(e){if(e.answer)return Array.isArray(e.answer)?e.answer.map(function(e){return parseInt(e,10)}):e.answer;var t=[];for(var n in e){var o=n.match(/^answer\[(\d+)\]/);o&&o.length>1&&t.push(parseInt(o[1],10))}return t},e.prototype.getUserRetake=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){n=n||i.getUserId();var a={lessonid:e,userid:n,lessonattempt:t},s={cacheKey:l.getUserRetakeCacheKey(e,n,t),updateFrequency:p.a.FREQUENCY_SOMETIMES};return o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_lesson_get_user_attempt",a,s)})},e.prototype.getUserRetakeCacheKey=function(e,t,n){return this.getUserRetakeUserCacheKey(e,t)+":"+n},e.prototype.getUserRetakeUserCacheKey=function(e,t){return this.getUserRetakeLessonCacheKey(e)+":"+t},e.prototype.getUserRetakeLessonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userRetake:"+e},e.prototype.getPreventAccessReason=function(e,t,n){var o;if(e&&e.preventaccessreasons)for(var r=0;r<e.preventaccessreasons.length;r++){var i=e.preventaccessreasons[r];if("lessonopen"==i.reason||"lessonclosed"==i.reason)return i;"passwordprotectedlesson"==i.reason?t||(o=i):"noretake"==i.reason&&n||o||(o=i)}return o},e.prototype.jumptoIsCorrect=function(e,n,o){if(!n)return!1;if(n==t.LESSON_NEXTPAGE)return!0;if(n==t.LESSON_UNSEENBRANCHPAGE)return!0;if(n==t.LESSON_RANDOMPAGE)return!0;if(n==t.LESSON_CLUSTERJUMP)return!0;if(n==t.LESSON_EOL)return!0;for(var r=o[e].nextpageid;r;){if(n==r)return!0;r=o[r].nextpageid}return!1},e.prototype.invalidateAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAccessInformationCacheKey(e))})},e.prototype.invalidateContentPagesViewed=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getContentPagesViewedCommonCacheKey(e))})},e.prototype.invalidateContentPagesViewedForRetake=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getContentPagesViewedCacheKey(e,t))})},e.prototype.invalidateLessonData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getLessonDataCacheKey(e))})},e.prototype.invalidateLessonWithPassword=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getLessonWithPasswordCacheKey(e))})},e.prototype.invalidatePageData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getPageDataCommonCacheKey(e))})},e.prototype.invalidatePageDataForPage=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getPageDataCacheKey(e,t))})},e.prototype.invalidatePages=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getPagesCacheKey(e))})},e.prototype.invalidatePagesPossibleJumps=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getPagesPossibleJumpsCacheKey(e))})},e.prototype.invalidateQuestionsAttempts=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getQuestionsAttemptsCommonCacheKey(e))})},e.prototype.invalidateQuestionsAttemptsForRetake=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.invalidateWsCacheForKey(r.getQuestionsAttemptsCacheKey(e,t,o))})},e.prototype.invalidateRetakesOverview=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getRetakesOverviewCommonCacheKey(e))})},e.prototype.invalidateRetakesOverviewForGroup=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getRetakesOverviewCacheKey(e,t))})},e.prototype.invalidateTimers=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getTimersCommonCacheKey(e))})},e.prototype.invalidateTimersForUser=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getTimersCacheKey(e,n))})},e.prototype.invalidateUserRetake=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return n=n||o.getUserId(),o.invalidateWsCacheForKey(r.getUserRetakeCacheKey(e,n,t))})},e.prototype.invalidateUserRetakesForLesson=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getUserRetakeLessonCacheKey(e))})},e.prototype.invalidateUserRetakesForUser=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKeyStartingWith(o.getUserRetakeUserCacheKey(e,t))})},e.prototype.isAnswerCorrect=function(e,t,n,o){return e.custom?n.score>0:this.jumptoIsCorrect(t,n.jumpto,o)},e.prototype.isLessonOffline=function(e){return!!e.allowofflineattempts},e.prototype.isPasswordProtected=function(e){if(e&&e.preventaccessreasons)for(var t=0;t<e.preventaccessreasons.length;t++){if("passwordprotectedlesson"==e.preventaccessreasons[t].reason)return!0}return!1},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_lesson_get_lesson_access_information")})},e.prototype.isQuestionPage=function(e){return e==t.TYPE_QUESTION},e.prototype.launchRetake=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={lessonid:e,review:r?1:0};return"string"==typeof n&&(a.password=n),"number"==typeof o&&(a.pageid=o),i.write("mod_lesson_launch_attempt",a).then(function(n){return l.eventsProvider.trigger(t.DATA_SENT_EVENT,{lessonId:e,type:"launch"},l.sitesProvider.getCurrentSiteId()),n})})},e.prototype.leftDuringTimed=function(e){return e&&e.lastpageseen&&e.lastpageseen!=t.LESSON_EOL&&e.leftduringtimedsession},e.prototype.lessonDisplayTeacherWarning=function(e){if(!e)return!1;for(var n in e)for(var o in e[n]){var r=Number(o);if(r==t.LESSON_CLUSTERJUMP||r==t.LESSON_UNSEENBRANCHPAGE)return!0}return!1},e.prototype.lessonGrade=function(e,n,o,r,i,l,a){var s=this,u=0,c=0,d=0,f=0,p=0,h=0,m=0;return this.getQuestionsAttempts(e.id,n,!1,void 0,l,a).then(function(n){var a=n.online.concat(n.offline);if(a.length){var f={};return(i?Promise.resolve():s.getPages(e.id,o,!0,!1,l).then(function(e){i=s.createPagesIndex(e)})).then(function(){var t=[];a.forEach(function(e){f[e.pageid]||(f[e.pageid]=[],t.push(e.pageid)),f[e.pageid].push(e)});for(var n in f){var i=f[n].sort(function(e,t){return(e.timeseen||e.timemodified)-(t.timeseen||t.timemodified)});f[n]=i.slice(0,e.maxattempts)}return s.getPagesAnswers(e,t,o,r,l)}).then(function(n){p=Object.keys(f).length;for(var o in f){var r=f[o],l=r[r.length-1];e.custom?i[l.pageid].qtype==t.LESSON_PAGE_ESSAY?(l.useranswer&&void 0!==l.useranswer.score&&(m+=l.useranswer.score),c++,d+=n[l.answerid].score):l.answerid&&(m+=n[l.answerid].score):(r.forEach(function(e){m+=e.correct?1:0}),i[l.pageid].qtype==t.LESSON_PAGE_ESSAY&&(c++,d++)),u+=r.length}if(e.custom){var a={};for(var s in n){var _=n[s];void 0===a[_.pageid]?a[_.pageid]=_.score:a[_.pageid]<_.score&&(a[_.pageid]=_.score)}for(var o in a)h+=a[o]}else h=e.minquestions&&p<e.minquestions?u+(e.minquestions-p):u})}}).then(function(){return h&&(f=s.textUtils.roundToDecimals(100*m/h,5)),{nquestions:p,attempts:u,total:h,earned:m,grade:f,nmanual:c,manualpoints:d}})},e.prototype.logViewLesson=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var a={lessonid:e};return"string"==typeof n&&(a.password=n),i.logHelper.logSingle("mod_lesson_view_lesson",a,t.COMPONENT,e,o,"lesson",{},r)})},e.prototype.processPage=function(e,n,o,r,i,l,a,s,u,c){var d=this;c=c||this.sitesProvider.getCurrentSiteId();var f,p,h=o.page.id;return a?this.getPages(e.id,i,!0,!1,c).then(function(t){return p=d.createPagesIndex(t),o.answers.length?d.recordAttempt(e,n,o,r,l,s,u,p,c):{nodefaultresponse:!0,newpageid:r.newpageid}}).then(function(t){return f=t,f.newpageid=d.getNewPageId(o.page.id,f.newpageid,u),d.calculateOfflineData(e,s,i,l,p,c)}).then(function(t){return f.warnings=[],f.displaymenu=o.displaymenu,f.messages=d.getPageProcessMessages(e,s,f,l,u),f.sent=!1,Object.assign(f,t),f}):this.processPageOnline(e.id,h,r,i,l,c).then(function(o){return d.eventsProvider.trigger(t.DATA_SENT_EVENT,{lessonId:e.id,type:"process",courseId:n,pageId:h,review:l},d.sitesProvider.getCurrentSiteId()),o.sent=!0,o})},e.prototype.processPageOnline=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={lessonid:e,pageid:t,data:l.utils.objectToArrayOfObjects(n,"name","value",!0),review:r?1:0};return"string"==typeof o&&(a.password=o),i.write("mod_lesson_process_page",a)})},e.prototype.recordAttempt=function(e,n,o,r,i,l,a,s,u){var c=this,d=this.checkAnswer(e,o,r,a,s),f=l.attemptscount;if(d.inmediatejump)return o.page.qtype==t.LESSON_PAGE_BRANCHTABLE?this.lessonOfflineProvider.processPage(e.id,n,f,o.page,r,d.newpageid,d.answerid,!1,d.userresponse,u).then(function(){return d}):Promise.resolve(d);var p,h=Promise.resolve(),m=!1;return d.attemptsremaining=0,d.maxattemptsreached=!1,d.noanswer?(d.newpageid=o.page.id,d.feedback=this.translate.instant("addon.mod_lesson.noanswer")):(l.canmanage||(h=this.getQuestionsAttempts(e.id,f,!1,o.page.id,u).then(function(l){if((p=l.online.length+l.offline.length)>=e.maxattempts)return d.maxattemptsreached=!0,d.feedback=c.translate.instant("addon.mod_lesson.maximumnumberofattemptsreached"),d.newpageid=t.LESSON_NEXTPAGE,void(m=!0);var s;if(!i&&(e.retake||!e.retake&&!f)){var h=c.getNewPageId(o.page.id,d.newpageid,a);s=c.lessonOfflineProvider.processPage(e.id,n,f,o.page,r,h,d.answerid,d.correctanswer,d.userresponse,u),p++}return d.correctanswer||d.newpageid||(p>=e.maxattempts?(e.maxattempts>1&&(d.maxattemptsreached=!0),d.newpageid=t.LESSON_NEXTPAGE):e.maxattempts>1&&(d.attemptsremaining=e.maxattempts-p)),s})),h=h.then(function(){if(!m&&(d.response||(e.feedback||d.noanswer||e.review&&!d.correctanswer&&!d.isessayquestion?d.response=c.translate.instant(d.isessayquestion?"addon.mod_lesson.defaultessayresponse":d.correctanswer?"addon.mod_lesson.thatsthecorrectanswer":"addon.mod_lesson.thatsthewronganswer"):d.nodefaultresponse=!0),d.response)){var n=void 0;!e.review||d.correctanswer||d.isessayquestion?(d.feedback="",n=Promise.resolve()):(n=void 0===p?c.getQuestionsAttempts(e.id,f,!1,o.page.id,u).then(function(e){p=e.online.length+e.offline.length}):Promise.resolve()).then(function(){d.feedback='<div class="box feedback">'+c.translate.instant("addon.mod_lesson."+(1==p?"firstwrong":"secondpluswrong"))+"</div>"});var r="response";return d.correctanswer?r+=" correct":d.isessayquestion||(r+=" incorrect"),n.then(function(){if(d.feedback+='<div class="box generalbox boxaligncenter p-y-1">'+o.page.contents+"</div>",d.feedback+='<div class="correctanswer generalbox"><em>'+c.translate.instant("addon.mod_lesson.youranswer")+'</em> : <div class="studentanswer m-t-2 m-b-2"><table class="generaltable"><tbody>',o.page.qoption)for(var e=d.studentanswer?d.studentanswer.split(t.MULTIANSWER_DELIMITER):[],n=d.response?d.response.split(t.MULTIANSWER_DELIMITER):[],i=0;i<e.length;i++)d.feedback=c.addAnswerAndResponseToFeedback(d.feedback,e[i],d.studentanswerformat,n[i],r);else d.feedback=c.addAnswerAndResponseToFeedback(d.feedback,d.studentanswer,d.studentanswerformat,d.response,r);d.feedback+="</tbody></table></div></div>"})}})),h.then(function(){return d})},e.prototype.removeStoredPassword=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.PASSWORD_TABLE,{lessonid:e})})},e.prototype.storePassword=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={lessonid:e,password:n,timemodified:Date.now()};return o.getDb().insertRecord(t.PASSWORD_TABLE,r)})},e.prototype.validPageAndView=function(e,n,o,r){if(n.qtype!=t.LESSON_PAGE_ENDOFCLUSTER&&n.qtype!=t.LESSON_PAGE_ENDOFBRANCH&&(o[n.id]=1),n.qtype==t.LESSON_PAGE_CLUSTER){this.getSubpagesOf(e,n.id,[t.LESSON_PAGE_ENDOFCLUSTER]).forEach(function(e){var t=r.indexOf(e.id);-1!=t&&(delete r[t],-1==r.indexOf(n.id)&&r.push(n.id))})}return n.nextpageid},e.COMPONENT="mmaModLesson",e.DATA_SENT_EVENT="addon_mod_lesson_data_sent",e.LESSON_THISPAGE=0,e.LESSON_UNSEENPAGE=1,e.LESSON_UNANSWEREDPAGE=2,e.LESSON_NEXTPAGE=-1,e.LESSON_EOL=-9,e.LESSON_UNSEENBRANCHPAGE=-50,e.LESSON_RANDOMPAGE=-60,e.LESSON_RANDOMBRANCH=-70,e.LESSON_CLUSTERJUMP=-80,e.TYPE_QUESTION=0,e.TYPE_STRUCTURE=1,e.LESSON_PAGE_SHORTANSWER=1,e.LESSON_PAGE_TRUEFALSE=2,e.LESSON_PAGE_MULTICHOICE=3,e.LESSON_PAGE_MATCHING=5,e.LESSON_PAGE_NUMERICAL=8,e.LESSON_PAGE_ESSAY=10,e.LESSON_PAGE_BRANCHTABLE=20,e.LESSON_PAGE_ENDOFBRANCH=21,e.LESSON_PAGE_CLUSTER=30,e.LESSON_PAGE_ENDOFCLUSTER=31,e.MULTIANSWER_DELIMITER="@^#|",e.LESSON_OTHER_ANSWERS="@#wronganswer#@",e.PASSWORD_TABLE="addon_mod_lesson_password",e=t=m([Object(o.A)(),_("design:paramtypes",[l.a,a.a,c.a,r.c,s.a,u.a,h.a,f.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(9),i=n(98),l=n(6),a=n(1),s=n(146),u=(n.n(s),this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o){var i=e.call(this,"CoreMainMenuDelegate",t,n,o)||this;return i.loggerProvider=t,i.sitesProvider=n,i.eventsProvider=o,i.loaded=!1,i.siteHandlers=new s.BehaviorSubject([]),i.featurePrefix="CoreMainMenuDelegate_",o.on(r.a.LOGOUT,i.clearSiteHandlers.bind(i)),i}return u(t,e),t.prototype.areHandlersLoaded=function(){return this.loaded},t.prototype.clearSiteHandlers=function(){this.loaded=!1,this.siteHandlers.next([])},t.prototype.getHandlers=function(){return this.siteHandlers},t.prototype.updateData=function(){var e=[];for(var t in this.enabledHandlers){var n=this.enabledHandlers[t],o=n.getDisplayData();e.push({name:t,data:o,priority:n.priority})}e.sort(function(e,t){return t.priority-e.priority});var r=e.map(function(e){return e.data.name=e.name,e.data.priority=e.priority,e.data});this.loaded=!0,this.siteHandlers.next(r)},t=c([Object(o.A)(),d("design:paramtypes",[l.a,a.a,r.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(262),i=n(3),l=n(439),a=n(10),s=n(57),u=n(6),c=n(66),d=n(11),f=n(40),p=n(194),h=(n.n(p),n(440)),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},y=function(){function e(e,t,n,o,r,i,l,a){this.http=e,this.translate=t,this.appProvider=n,this.textUtils=o,this.fileProvider=r,this.fileTransfer=i,this.mimeUtils=l,this.mimeTypeCache={},this.ongoingCalls={},this.retryCalls=[],this.retryTimeout=0,this.logger=a.getInstance("CoreWSProvider")}return e.prototype.addToRetryQueue=function(e,t,n,o){var r={method:e,siteUrl:t,ajaxData:n,preSets:o,deferred:{}};return r.deferred.promise=new Promise(function(e,t){r.deferred.resolve=e,r.deferred.reject=t}),this.retryCalls.push(r),r.deferred.promise},e.prototype.call=function(e,t,n){var o;return n?this.appProvider.isOnline()?(n.typeExpected=n.typeExpected||"object",void 0===n.responseExpected&&(n.responseExpected=!0),t=Object.assign({},t),t.wsfunction=e,t.wstoken=n.wsToken,o=n.siteUrl+"/webservice/rest/server.php?moodlewsrestformat=json",this.retryCalls.length>0?(this.logger.warn("Calls locked, trying later..."),this.addToRetryQueue(e,o,t,n)):this.performPost(e,o,t,n)):Promise.reject(this.createFakeWSError("core.networkerrormsg",!0)):Promise.reject(this.createFakeWSError("core.unexpectederror",!0))},e.prototype.callAjax=function(e,t,n){function o(e,t){return void 0===t&&(t=e.errorcode?"invalidrecord"==e.errorcode?-1:1:0),e.available=t,Promise.reject(e)}var r,i=this;if(void 0===n.siteUrl)return o(this.createFakeWSError("core.unexpectederror",!0));if(!this.appProvider.isOnline())return o(this.createFakeWSError("core.networkerrormsg",!0));void 0===n.responseExpected&&(n.responseExpected=!0);var l=n.noLogin?"service-nologin.php":"service.php",a=JSON.stringify([{index:0,methodname:e,args:this.convertValuesToString(t)}]),s=n.siteUrl+"/lib/ajax/"+l+"?info="+e;return n.noLogin&&n.useGet?(s+="&args="+encodeURIComponent(a),r=this.http.get(s).timeout(this.getRequestTimeout()).toPromise()):r=this.http.post(s,a).timeout(this.getRequestTimeout()).toPromise(),r.then(function(e){return e||n.responseExpected||(e=[{}]),e&&"object"==typeof e?e.error?o(e):(e=e[0]).error?o(e.exception):e.data:o(i.createFakeWSError("core.serverconnection",!0))},function(e){var t=404==e.status?-1:0;return o(i.createFakeWSError("core.serverconnection",!0),t)})},e.prototype.convertValuesToString=function(e,t){var n=Array.isArray(e)?[]:{};for(var o in e){var r=e[o];if(null!=r){if("object"==typeof r){if(null==(r=this.convertValuesToString(r,t)))return null}else if("string"==typeof r){if(t){var i=this.textUtils.stripUnicode(r);if(i!=r&&0==i.trim().length)return null;r=i}}else if("boolean"==typeof r)r="moodlewssettingfilter"==o||"moodlewssettingfileurl"==o?r?"true":"false":r?"1":"0";else{if("number"!=typeof r)continue;r=String(r)}Array.isArray(n)?n.push(r):n[o]=r}}return n},e.prototype.createFakeWSError=function(e,t,n){return t&&(e=this.translate.instant(e,n)),{message:e}},e.prototype.downloadFile=function(e,t,n,o){var r=this;if(this.logger.debug("Downloading file",e,t,n),!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var i=t+".tmp";return this.fileProvider.createFile(i).then(function(l){var a=r.fileTransfer.create();return a.onProgress(o),a.download(e,l.toURL(),!0).then(function(){var o;if(n){var l=r.mimeUtils.getFileExtension(t);o=l&&"gdoc"!=l&&"gsheet"!=l&&"gslides"!=l&&"gdraw"!=l&&"php"!=l?Promise.resolve(l):r.getRemoteFileMimeType(e).then(function(n){if(n){var o=r.mimeUtils.getExtension(n,e);if(o&&(!l||"application/json"!=n))return l&&(t=r.mimeUtils.removeExtension(t)),t+="."+o,o}return l})}else o=Promise.resolve("");return o.then(function(n){return r.fileProvider.moveFile(i,t).then(function(o){return o.extension=n,o.path=t,r.logger.debug("Success downloading file "+e+" to "+t+" with extension "+n),o})})})}).catch(function(n){return r.logger.error("Error downloading "+e+" to "+t,n),Promise.reject(n)})},e.prototype.getPromiseHttp=function(e,t,n){var o=this.getQueueItemId(e,t,n);return void 0!==this.ongoingCalls[o]&&this.ongoingCalls[o]},e.prototype.getRemoteFileMimeType=function(e,t){var n=this;return this.mimeTypeCache[e]&&!t?Promise.resolve(this.mimeTypeCache[e]):this.performHead(e).then(function(t){var o=t.headers.get("Content-Type");return o&&(o=o.split(";")[0]),n.mimeTypeCache[e]=o,o||""}).catch(function(){return""})},e.prototype.getRemoteFileSize=function(e){return this.performHead(e).then(function(e){var t=parseInt(e.headers.get("Content-Length"),10);return t||-1}).catch(function(){return-1})},e.prototype.getRequestTimeout=function(){return this.appProvider.isNetworkAccessLimited()?f.a.WS_TIMEOUT:f.a.WS_TIMEOUT_WIFI},e.prototype.getQueueItemId=function(e,t,n){return n&&(t+="###"+h.a.serialize(n)),e+"#"+p.Md5.hashAsciiStr(t)},e.prototype.performHead=function(e){var t=this.getPromiseHttp("head",e);return t||(t=this.http.head(e,{observe:"response"}).timeout(this.getRequestTimeout()).toPromise(),t=this.setPromiseHttp(t,"head",e)),t},e.prototype.performPost=function(e,t,n,o){var r=this,i={};"number"!=o.typeExpected&&"boolean"!=o.typeExpected&&"string"!=o.typeExpected||(i.responseType="text");return this.http.post(t+"&wsfunction="+e,n,i).timeout(this.getRequestTimeout()).toPromise().then(function(t){if(t||o.responseExpected||(t={}),!t)return Promise.reject(r.createFakeWSError("core.serverconnection",!0));if(typeof t!=o.typeExpected){if("string"!=typeof t)return r.logger.warn('Response of type "'+typeof t+'" received, expecting "'+o.typeExpected+'"'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));if("number"==o.typeExpected){if(t=Number(t),isNaN(t))return r.logger.warn('Response expected type "'+o.typeExpected+'" cannot be parsed to number'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0))}else{if("boolean"!=o.typeExpected)return r.logger.warn('Response of type "'+typeof t+'" received, expecting "'+o.typeExpected+'"'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));if("true"===t)t=!0;else{if("false"!==t)return r.logger.warn('Response expected type "'+o.typeExpected+'" is not true or false'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));t=!1}}}return void 0!==t.exception?("tool_mobile_get_content"==e&&r.logger.error("Error calling WS",e,t),Promise.reject(t)):void 0!==t.debuginfo?Promise.reject(r.createFakeWSError("Error. "+t.message)):t},function(i){if(429==i.status){var l=r.addToRetryQueue(e,t,n,o);return 0==r.retryTimeout?(r.retryTimeout=parseInt(i.headers.get("Retry-After"),10)||5,r.logger.warn(i.statusText+". Retrying in "+r.retryTimeout+" seconds. "+r.retryCalls.length+" calls left."),setTimeout(function(){r.logger.warn("Retrying now with "+r.retryCalls.length+" calls to process."),r.retryTimeout=0,r.processRetryQueue()},1e3*r.retryTimeout)):r.logger.warn("Calls locked, trying later..."),l}return Promise.reject(r.createFakeWSError("core.serverconnection",!0))})},e.prototype.processRetryQueue=function(){var e=this;if(this.retryCalls.length>0&&0==this.retryTimeout){var t=this.retryCalls.shift();setTimeout(function(){t.deferred.resolve(e.performPost(t.method,t.siteUrl,t.ajaxData,t.preSets)),e.processRetryQueue()},200)}else this.logger.warn("Retry queue has stopped with "+this.retryCalls.length+" calls and "+this.retryTimeout+" timeout secs.")},e.prototype.setPromiseHttp=function(e,t,n,o){var r,i=this,l=this.getQueueItemId(t,n,o);return this.ongoingCalls[l]=e,r=setTimeout(function(){delete i.ongoingCalls[l]},this.getRequestTimeout()),e.finally(function(){delete i.ongoingCalls[l],clearTimeout(r)})},e.prototype.syncCall=function(e,t,n){var o,r,i={error:!0,message:""};if(!n)return i.message=this.translate.instant("core.unexpectederror"),i;if(!this.appProvider.isOnline())return i.message=this.translate.instant("core.networkerrormsg"),i;if(n.typeExpected=n.typeExpected||"object",void 0===n.responseExpected&&(n.responseExpected=!0),null==(t=this.convertValuesToString(t||{},n.cleanUnicode)))return i.message=this.translate.instant("core.unicodenotsupportedcleanerror"),i;t.wsfunction=e,t.wstoken=n.wsToken,o=n.siteUrl+"/webservice/rest/server.php?moodlewsrestformat=json",t=h.a.serialize(t),(r=new window.XMLHttpRequest).open("post",o,!1),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.send(t),t="response"in r?r.response:r.responseText;var l=Math.max(1223===r.status?204:r.status,0);return l<200||l>=300?(i.message=t,i):((t=this.textUtils.parseJSON(t))&&t.data||n.responseExpected||(t={}),t?typeof t!=n.typeExpected&&(this.logger.warn('Response of type "'+typeof t+'" received, expecting "'+n.typeExpected+'"'),i.message=this.translate.instant("core.errorinvalidresponse")):i.message=this.translate.instant("core.serverconnection"),void 0===t.exception&&void 0===t.debuginfo||(i.message=t.message),""!==i.message?i:t)},e.prototype.uploadFile=function(e,t,n,o){var r=this;if(this.logger.debug("Trying to upload file: "+e),!e||!t||!n)return Promise.reject(null);if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var i=n.siteUrl+"/webservice/upload.php",l=this.fileTransfer.create();return l.onProgress(o),t.httpMethod="POST",t.params={token:n.wsToken,filearea:t.fileArea||"draft",itemid:t.itemId||0},t.chunkedMode=!1,t.headers={Connection:"close"},l.upload(e,i,t,!0).then(function(t){var n=r.textUtils.parseJSON(t.response,null,r.logger.error.bind(r.logger,"Error parsing response from upload"));return null===n?Promise.reject(r.translate.instant("core.errorinvalidresponse")):n?"object"!=typeof n?(r.logger.warn('Upload file: Response of type "'+typeof n+'" received, expecting "object"'),Promise.reject(r.translate.instant("core.errorinvalidresponse"))):void 0!==n.exception?Promise.reject(n.message):n&&void 0!==n.error?Promise.reject(n.error):n[0]&&void 0!==n[0].error?Promise.reject(n[0].error):(r.logger.debug("Successfully uploaded file",e),n[0]):Promise.reject(r.translate.instant("core.serverconnection"))}).catch(function(t){return r.logger.error("Error while uploading file",e,t),Promise.reject(r.translate.instant("core.errorinvalidresponse"))})},e.prototype.getText=function(e){return g(this,void 0,void 0,function(){var t;return v(this,function(n){switch(n.label){case 0:return[4,this.http.get(e,{responseType:"text"}).toPromise()];case 1:return"string"!=typeof(t=n.sent())?[2,Promise.reject(null)]:[2,t]}})})},e=m([Object(o.A)(),_("design:paramtypes",[r.c,i.c,a.a,d.a,s.a,l.a,c.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(52),s=n(53),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.sitesProvider=t,this.coursesProvider=n,this.utils=o,this.ROOT_CACHE_KEY="mmaCourseCompletion:",this.logger=e.getInstance("AddonCourseCompletionProvider")}return e.prototype.canMarkSelfCompleted=function(e,t){var n=!1,o=!1;return this.sitesProvider.getCurrentSiteUserId()==e&&(t.completions.forEach(function(e){1===e.type&&(n=!0,o=e.complete)}),n&&!o)},e.prototype.getCompletedStatusText=function(e){if(e.completed)return"addon.coursecompletion.completed";var t=!1;return e.completions.forEach(function(e){(e.timecompleted||e.complete)&&(t=!0)}),t?"addon.coursecompletion.inprogress":"addon.coursecompletion.notyetstarted"},e.prototype.getCompletion=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){t=t||o.getUserId(),n=n||{},r.logger.debug("Get completion for course "+e+" and user "+t);var i={courseid:e,userid:t};return n.cacheKey=r.getCompletionCacheKey(e,t),n.updateFrequency=n.updateFrequency||s.a.FREQUENCY_SOMETIMES,n.cacheErrors=["notenroled"],o.read("core_completion_get_course_completion_status",i,n).then(function(e){return e.completionstatus?e.completionstatus:Promise.reject(null)})})},e.prototype.getCompletionCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"view:"+e+":"+t},e.prototype.invalidateCourseCompletion=function(e,t){return t=t||this.sitesProvider.getCurrentSiteUserId(),this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getCompletionCacheKey(e,t))},e.prototype.isPluginViewEnabled=function(){return this.sitesProvider.isLoggedIn()},e.prototype.isPluginViewEnabledForCourse=function(e,t){return void 0===t&&(t=!0),e?this.coursesProvider.getUserCourse(e,t).then(function(e){if(e){if(void 0!==e.enablecompletion&&0==e.enablecompletion)return!1;if(void 0!==e.completionhascriteria&&0==e.completionhascriteria)return!1}return!0}):Promise.reject(null)},e.prototype.isPluginViewEnabledForUser=function(e,t){var n=this,o=this.sitesProvider.getCurrentSiteUserId();return(t&&t!=o?Promise.reject(null):this.coursesProvider.getUserCourse(e,!0).then(function(e){return!(!e||void 0===e.completionhascriteria)||Promise.reject(null)})).catch(function(){var o={emergencyCache:0};return n.getCompletion(e,t,o).then(function(){return!0}).catch(function(r){return!n.utils.isWebServiceError(r)&&(o.omitExpires=!0,n.getCompletion(e,t,o).then(function(){return!0}).catch(function(){return!1}))})})},e.prototype.markCourseAsSelfCompleted=function(e){var t={courseid:e};return this.sitesProvider.getCurrentSite().write("core_completion_mark_course_self_completed",t).then(function(e){if(!e.status)return Promise.reject(null)})},e=u([Object(o.A)(),c("design:paramtypes",[r.a,i.a,a.a,l.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(1),l=n(4),a=n(22),s=n(2),u=n(15),c=n(116),d=n(28),f=n(11),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},_=function(){function e(e,t,n,o,r,i,l,a,s,u){this.domUtils=t,this.utils=n,this.sitesProvider=o,this.urlUtils=r,this.contentLinksHelper=i,this.navCtrl=l,this.content=a,this.svComponent=s,this.textUtils=u,this.autoLogin="check",this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.inApp=this.utils.isTrueOrOne(this.inApp);var t=this.navCtrl;!this.svComponent||this.navCtrl&&this.navCtrl!==this.svComponent.getDetailsNav()||(t=this.svComponent.getMasterNav()),this.element.addEventListener("click",function(n){if(!n.defaultPrevented){var o=e.element.getAttribute("href");o&&(n.preventDefault(),n.stopPropagation(),e.utils.isTrueOrOne(e.capture)?(o=e.textUtils.decodeURI(o),e.contentLinksHelper.handleLink(o,void 0,t,!0,!0).then(function(t){t||e.navigate(o)})):e.navigate(o))}})},e.prototype.navigate=function(e){var t=this,n=c.a.customurlscheme+"://link=";0===e.indexOf("cdvfile://")||0===e.indexOf("file://")||0===e.indexOf("filesystem:")?this.utils.openFile(e).catch(function(e){t.domUtils.showErrorModal(e)}):"#"==e.charAt(0)?"/"==(e=e.substr(1)).charAt(0)||this.domUtils.scrollToElementBySelector(this.content,"#"+e+", [name='"+e+"']"):0===e.indexOf(n)?(e=n+encodeURIComponent(e.replace(n,"")),this.utils.openInBrowser(e)):this.sitesProvider.isLoggedIn()?(this.urlUtils.isAbsoluteURL(e)||(e="/"==e.charAt(0)?this.sitesProvider.getCurrentSite().getURL()+e:this.sitesProvider.getCurrentSite().getURL()+"/"+e),"yes"==this.autoLogin?this.inApp?this.sitesProvider.getCurrentSite().openInAppWithAutoLogin(e):this.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(e):"no"==this.autoLogin?this.inApp?this.utils.openInApp(e):this.utils.openInBrowser(e):this.inApp?this.sitesProvider.getCurrentSite().openInAppWithAutoLoginIfSameSite(e):this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e)):this.inApp?this.utils.openInApp(e):this.utils.openInBrowser(e)},p([Object(o.D)(),h("design:type",Object)],e.prototype,"capture",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"inApp",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"autoLogin",void 0),e=p([Object(o.s)({selector:"[core-link]"}),m(6,Object(o.N)()),m(7,Object(o.N)()),m(8,Object(o.N)()),h("design:paramtypes",[o.t,l.a,s.a,i.a,a.a,u.a,r.s,r.f,d.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(10),i=n(18),l=n(1),a=n(2),s=n(65),u=n(189),c=n(53),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.appProvider=e,this.filepoolProvider=t,this.sitesProvider=n,this.utils=o,this.workshopOffline=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModWorkshop:"}return t=e,e.prototype.getWorkshopDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"workshop:"+e},e.prototype.getWorkshopDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getWorkshopAccessInformationDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":access"},e.prototype.getUserPlanDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":userplan"},e.prototype.getSubmissionsDataCacheKey=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this.getWorkshopDataPrefixCacheKey(e)+":submissions:"+t+":"+n},e.prototype.getSubmissionDataCacheKey=function(e,t){return this.getWorkshopDataPrefixCacheKey(e)+":submission:"+t},e.prototype.getGradesDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":grades"},e.prototype.getGradesReportDataCacheKey=function(e,t){return void 0===t&&(t=0),this.getWorkshopDataPrefixCacheKey(e)+":report:"+t},e.prototype.getSubmissionAssessmentsDataCacheKey=function(e,t){return this.getWorkshopDataPrefixCacheKey(e)+":assessments:"+t},e.prototype.getReviewerAssessmentsDataCacheKey=function(e,t){return void 0===t&&(t=0),this.getWorkshopDataPrefixCacheKey(e)+":reviewerassessments:"+t},e.prototype.getAssessmentDataCacheKey=function(e,t){return this.getWorkshopDataPrefixCacheKey(e)+":assessment:"+t},e.prototype.getAssessmentFormDataCacheKey=function(e,t,n){return void 0===n&&(n="assessment"),this.getWorkshopDataPrefixCacheKey(e)+":assessmentsform:"+t+":"+n},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_workshop_get_workshops_by_courses")&&e.wsAvailable("mod_workshop_get_workshop_access_information")})},e.prototype.getWorkshopByKey=function(e,n,o,r,i){var l=this;return void 0===i&&(i=!1),this.sitesProvider.getSite(r).then(function(r){var a={courseids:[e]},s={cacheKey:l.getWorkshopDataCacheKey(e),updateFrequency:c.a.FREQUENCY_RARELY};return i&&(s.omitExpires=!0),r.read("mod_workshop_get_workshops_by_courses",a,s).then(function(e){if(e&&e.workshops){var t=e.workshops.find(function(e){return e[n]==o});if(t)return t}return Promise.reject(null)}).then(function(e){return void 0===e.submissiontypetext&&(e.nattachments>0?(e.submissiontypetext=t.SUBMISSION_TYPE_AVAILABLE,e.submissiontypefile=t.SUBMISSION_TYPE_AVAILABLE):(e.submissiontypetext=t.SUBMISSION_TYPE_REQUIRED,e.submissiontypefile=t.SUBMISSION_TYPE_DISABLED)),e})})},e.prototype.getWorkshop=function(e,t,n,o){return void 0===o&&(o=!1),this.getWorkshopByKey(e,"coursemodule",t,n,o)},e.prototype.getWorkshopById=function(e,t,n,o){return void 0===o&&(o=!1),this.getWorkshopByKey(e,"id",t,n,o)},e.prototype.invalidateWorkshopData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getWorkshopDataCacheKey(e))})},e.prototype.invalidateWorkshopWSData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getWorkshopDataPrefixCacheKey(e))})},e.prototype.getWorkshopAccessInformation=function(e,t,n,o){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e},l={cacheKey:r.getWorkshopAccessInformationDataCacheKey(e)};return t?l.omitExpires=!0:n&&(l.getFromCache=0,l.emergencyCache=0),o.read("mod_workshop_get_workshop_access_information",i,l)})},e.prototype.invalidateWorkshopAccessInformationData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getWorkshopAccessInformationDataCacheKey(e))})},e.prototype.getUserPlanPhases=function(e,t,n,o){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e},l={cacheKey:r.getUserPlanDataCacheKey(e),updateFrequency:c.a.FREQUENCY_OFTEN};return t?l.omitExpires=!0:n&&(l.getFromCache=0,l.emergencyCache=0),o.read("mod_workshop_get_user_plan",i,l).then(function(e){return e&&e.userplan&&e.userplan.phases?r.utils.arrayToObject(e.userplan.phases,"code"):Promise.reject(null)})})},e.prototype.invalidateUserPlanPhasesData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getUserPlanDataCacheKey(e))})},e.prototype.getSubmissions=function(e,t,n,o,r,i){var l=this;return void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=!1),void 0===r&&(r=!1),this.sitesProvider.getSite(i).then(function(i){var a={workshopid:e,userid:t,groupid:n},s={cacheKey:l.getSubmissionsDataCacheKey(e,t,n),updateFrequency:c.a.FREQUENCY_OFTEN};return o?s.omitExpires=!0:r&&(s.getFromCache=0,s.emergencyCache=0),i.read("mod_workshop_get_submissions",a,s).then(function(e){return e&&e.submissions?e.submissions:Promise.reject(null)})})},e.prototype.invalidateSubmissionsData=function(e,t,n,o){var r=this;return void 0===t&&(t=0),void 0===n&&(n=0),this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getSubmissionsDataCacheKey(e,t,n))})},e.prototype.getSubmission=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={submissionid:t},i={cacheKey:o.getSubmissionDataCacheKey(e,t)};return n.read("mod_workshop_get_submission",r,i).then(function(e){return e&&e.submission?e.submission:Promise.reject(null)})})},e.prototype.invalidateSubmissionData=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getSubmissionDataCacheKey(e,t))})},e.prototype.getGrades=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={workshopid:e},r={cacheKey:n.getGradesDataCacheKey(e)};return t.read("mod_workshop_get_grades",o,r)})},e.prototype.invalidateGradesData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getGradesDataCacheKey(e))})},e.prototype.getGradesReport=function(e,n,o,r,i,l,a){var s=this;return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=!1),void 0===l&&(l=!1),this.sitesProvider.getSite(a).then(function(a){var u={workshopid:e,groupid:n,page:o,perpage:r||t.PER_PAGE},d={cacheKey:s.getGradesReportDataCacheKey(e,n),updateFrequency:c.a.FREQUENCY_OFTEN};return i?d.omitExpires=!0:l&&(d.getFromCache=0,d.emergencyCache=0),a.read("mod_workshop_get_grades_report",u,d).then(function(e){return e&&e.report?e.report:Promise.reject(null)})})},e.prototype.fetchAllGradeReports=function(e,n,o,r,i,l){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!1),void 0===i&&(i=!1),l=l||this.sitesProvider.getCurrentSiteId(),o=o||t.PER_PAGE,this.fetchGradeReportsRecursive(e,n,o,r,i,[],0,l)},e.prototype.fetchGradeReportsRecursive=function(e,t,n,o,r,i,l,a){var s=this;return this.getGradesReport(e,t,l,n,o,r,a).then(function(u){Array.prototype.push.apply(i,u.grades);return(l+1)*n<u.totalcount?s.fetchGradeReportsRecursive(e,t,n,o,r,i,l+1,a):i})},e.prototype.invalidateGradeReportData=function(e,t,n){var o=this;return void 0===t&&(t=0),this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getGradesReportDataCacheKey(e,t))})},e.prototype.getSubmissionAssessments=function(e,t,n,o,r){var i=this;return void 0===n&&(n=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={submissionid:t},a={cacheKey:i.getSubmissionAssessmentsDataCacheKey(e,t)};return n?a.omitExpires=!0:o&&(a.getFromCache=0,a.emergencyCache=0),r.read("mod_workshop_get_submission_assessments",l,a).then(function(e){return e&&e.assessments?e.assessments:Promise.reject(null)})})},e.prototype.invalidateSubmissionAssesmentsData=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getSubmissionAssessmentsDataCacheKey(e,t))})},e.prototype.addSubmission=function(e,t,n,o,r,i,l,a){var s=this;void 0===a&&(a=!1),i=i||this.sitesProvider.getCurrentSiteId();var u=function(){return s.workshopOffline.saveSubmission(e,t,n,o,{},l,"add",i).then(function(){return!1})};return(l?this.workshopOffline.deleteSubmissionAction(e,l,"add",i):Promise.resolve()).then(function(){return!s.appProvider.isOnline()&&a?u():s.addSubmissionOnline(e,n,o,r,i).catch(function(e){return a&&!s.utils.isWebServiceError(e)?u():Promise.reject(e)})})},e.prototype.addSubmissionOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_add_submission",{workshopid:e,title:t,content:n,attachmentsid:o||0}).then(function(e){return e&&e.submissionid?e.submissionid:Promise.reject(i.utils.createFakeWSError(""))})})},e.prototype.updateSubmission=function(e,t,n,o,r,i,l,a){var s=this;void 0===a&&(a=!1),l=l||this.sitesProvider.getCurrentSiteId();var u=function(){return s.workshopOffline.saveSubmission(e,n,o,r,i,t,"update",l).then(function(){return!1})};return this.workshopOffline.deleteSubmissionAction(e,t,"update",l).then(function(){return!s.appProvider.isOnline()&&a?u():s.updateSubmissionOnline(t,o,r,i,l).catch(function(e){return a&&!s.utils.isWebServiceError(e)?u():Promise.reject(e)})})},e.prototype.updateSubmissionOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_update_submission",{submissionid:e,title:t,content:n,attachmentsid:o||0}).then(function(t){return t&&t.status?Promise.resolve(e):Promise.reject(i.utils.createFakeWSError(""))})})},e.prototype.deleteSubmission=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=function(){return r.workshopOffline.saveSubmission(e,n,"","",0,t,"delete",o).then(function(){return!1})};return this.workshopOffline.deleteSubmissionAction(e,t,"delete",o).then(function(){return r.appProvider.isOnline()?r.deleteSubmissionOnline(t,o).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):i()}):i()})},e.prototype.deleteSubmissionOnline=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_workshop_delete_submission",{submissionid:e}).then(function(t){return t&&t.status?Promise.resolve(e):Promise.reject(n.utils.createFakeWSError(""))})})},e.prototype.getReviewerAssessments=function(e,t,n,o,r){var i=this;return void 0===n&&(n=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={workshopid:e},a={cacheKey:i.getReviewerAssessmentsDataCacheKey(e,t)};return t&&(l.userid=t),n?a.omitExpires=!0:o&&(a.getFromCache=0,a.emergencyCache=0),r.read("mod_workshop_get_reviewer_assessments",l,a).then(function(e){return e&&e.assessments?e.assessments:Promise.reject(null)})})},e.prototype.invalidateReviewerAssesmentsData=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getReviewerAssessmentsDataCacheKey(e,t))})},e.prototype.getAssessment=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={assessmentid:t},i={cacheKey:o.getAssessmentDataCacheKey(e,t)};return n.read("mod_workshop_get_assessment",r,i).then(function(e){return e&&e.assessment?e.assessment:Promise.reject(null)})})},e.prototype.invalidateAssessmentData=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getAssessmentDataCacheKey(e,t))})},e.prototype.getAssessmentForm=function(e,t,n,o,r,i){var l=this;return void 0===n&&(n="assessment"),void 0===o&&(o=!1),void 0===r&&(r=!1),this.sitesProvider.getSite(i).then(function(i){var a={assessmentid:t,mode:n||"assessment"},s={cacheKey:l.getAssessmentFormDataCacheKey(e,t,n),updateFrequency:c.a.FREQUENCY_RARELY};return o?s.omitExpires=!0:r&&(s.getFromCache=0,s.emergencyCache=0),i.read("mod_workshop_get_assessment_form_definition",a,s).then(function(e){return e?(e.fields=l.parseFields(e.fields),e.options=l.utils.objectToKeyValueMap(e.options,"name","value"),e.current=l.parseFields(e.current),e):Promise.reject(null)})})},e.prototype.parseFields=function(e){var t=[];return e.forEach(function(e){var n=e.name.split("_"),o=n[0],r=n[3],i=n[6]||!1;parseInt(r,10)==r&&(t[r]||(t[r]={number:parseInt(r,10)+1}),i&&parseInt(i,10)==i?(t[r].fields||(t[r].fields=[]),t[r].fields[i]||(t[r].fields[i]={number:parseInt(i,10)+1}),t[r].fields[i][o]=e.value):t[r][o]=e.value)}),t},e.prototype.invalidateAssessmentFormData=function(e,t,n,o){var r=this;return void 0===n&&(n="assessment"),this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getAssessmentFormDataCacheKey(e,t,n))})},e.prototype.updateAssessment=function(e,t,n,o,r,i){var l=this;void 0===i&&(i=!1),r=r||this.sitesProvider.getCurrentSiteId();var a=function(){return l.workshopOffline.saveAssessment(e,t,n,o,r).then(function(){return!1})};return this.workshopOffline.deleteAssessment(e,t,r).then(function(){return!l.appProvider.isOnline()&&i?a():l.updateAssessmentOnline(t,o,r).catch(function(e){return i&&!l.utils.isWebServiceError(e)?a():Promise.reject(e)})})},e.prototype.updateAssessmentOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={assessmentid:e,data:o.utils.objectToArrayOfObjects(t,"name","value")};return n.write("mod_workshop_update_assessment",r).then(function(e){return e&&e.status?e.rawgrade:Promise.reject(o.utils.createFakeWSError(""))})})},e.prototype.evaluateSubmission=function(e,t,n,o,r,i,l){var a=this;l=l||this.sitesProvider.getCurrentSiteId();var s=function(){return a.workshopOffline.saveEvaluateSubmission(e,t,n,o,r,i,l).then(function(){return!1})};return this.workshopOffline.deleteEvaluateSubmission(e,t,l).then(function(){return a.appProvider.isOnline()?a.evaluateSubmissionOnline(t,o,r,i,l).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):s()}):s()})},e.prototype.evaluateSubmissionOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_evaluate_submission",{submissionid:e,feedbacktext:t||"",feedbackformat:1,published:n?1:0,gradeover:o}).then(function(e){return e&&e.status?Promise.resolve(!0):Promise.reject(i.utils.createFakeWSError(""))})})},e.prototype.evaluateAssessment=function(e,t,n,o,r,i,l){var a=this;l=l||this.sitesProvider.getCurrentSiteId();var s=function(){return a.workshopOffline.saveEvaluateAssessment(e,t,n,o,r,i,l).then(function(){return!1})};return this.workshopOffline.deleteEvaluateAssessment(e,t,l).then(function(){return a.appProvider.isOnline()?a.evaluateAssessmentOnline(t,o,r,i,l).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):s()}):s()})},e.prototype.evaluateAssessmentOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_evaluate_assessment",{assessmentid:e,feedbacktext:t||"",feedbackformat:1,weight:n,gradinggradeover:o}).then(function(e){return e&&e.status?Promise.resolve(!0):Promise.reject(i.utils.createFakeWSError(""))})})},e.prototype.invalidateContent=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getWorkshop(t,e,n,!0).then(function(e){return o.invalidateContentById(e.id,t,n)})},e.prototype.invalidateContentById=function(e,t,n){n=n||this.sitesProvider.getCurrentSiteId();var o=[this.invalidateWorkshopData(t,n),this.invalidateWorkshopWSData(e,n)];return Promise.all(o)},e.prototype.invalidateFiles=function(e,n){return this.filepoolProvider.invalidateFilesByComponent(n,t.COMPONENT,e)},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_workshop_view_workshop",{workshopid:e},t.COMPONENT,e,n,"workshop",o)},e.prototype.logViewSubmission=function(e,n,o,r){var i={submissionid:e};return this.logHelper.logSingle("mod_workshop_view_submission",i,t.COMPONENT,n,o,"workshop",i,r)},e.COMPONENT="mmaModWorkshop",e.PER_PAGE=10,e.PHASE_SETUP=10,e.PHASE_SUBMISSION=20,e.PHASE_ASSESSMENT=30,e.PHASE_EVALUATION=40,e.PHASE_CLOSED=50,e.EXAMPLES_VOLUNTARY=0,e.EXAMPLES_BEFORE_SUBMISSION=1,e.EXAMPLES_BEFORE_ASSESSMENT=2,e.SUBMISSION_TYPE_DISABLED=0,e.SUBMISSION_TYPE_AVAILABLE=1,e.SUBMISSION_TYPE_REQUIRED=2,e.SUBMISSION_CHANGED="addon_mod_workshop_submission_changed",e.ASSESSMENT_SAVED="addon_mod_workshop_assessment_saved",e.ASSESSMENT_INVALIDATED="addon_mod_workshop_assessment_invalidated",e=t=d([Object(o.A)(),f("design:paramtypes",[r.a,i.a,l.a,a.a,u.a,s.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.sitesProvider=e,this.files={}}return e.prototype.addFile=function(e,t,n,o){o=o||this.sitesProvider.getCurrentSiteId(),this.initFileArea(e,t,o),this.files[o][e][t].push(n)},e.prototype.clearFiles=function(e,t,n){n=n||this.sitesProvider.getCurrentSiteId(),this.files[n]&&this.files[n][e]&&this.files[n][e][t]&&(this.files[n][e][t]=[])},e.prototype.getFiles=function(e,t,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.files[n]&&this.files[n][e]&&this.files[n][e][t]?this.files[n][e][t]:[]},e.prototype.initFileArea=function(e,t,n){this.files[n]||(this.files[n]={}),this.files[n][e]||(this.files[n][e]={}),this.files[n][e][t]||(this.files[n][e][t]=[])},e.prototype.removeFile=function(e,t,n,o){if(o=o||this.sitesProvider.getCurrentSiteId(),this.files[o]&&this.files[o][e]&&this.files[o][e][t]){var r=this.files[o][e][t].indexOf(n);-1!=r&&this.files[o][e][t].splice(r,1)}},e.prototype.removeFileByIndex=function(e,t,n,o){o=o||this.sitesProvider.getCurrentSiteId(),this.files[o]&&this.files[o][e]&&this.files[o][e][t]&&n>=0&&n<this.files[o][e][t].length&&this.files[o][e][t].splice(n,1)},e.prototype.setFiles=function(e,t,n,o){o=o||this.sitesProvider.getCurrentSiteId(),this.initFileArea(e,t,o),this.files[o][e][t]=n},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(567),s=n(98),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,"CoreCoursesCourseFormatDelegate",t,n,o)||this;return i.sitesProvider=n,i.defaultHandler=r,i.featurePrefix="CoreCourseFormatDelegate_",i.handlerNameProperty="format",i}return u(t,e),t.prototype.canViewAllSections=function(e){return this.executeFunctionOnEnabled(e.format,"canViewAllSections",[e])},t.prototype.displayEnableDownload=function(e){return this.executeFunctionOnEnabled(e.format,"displayEnableDownload",[e])},t.prototype.displayRefresher=function(e,t){return this.executeFunctionOnEnabled(e.format,"displayRefresher",[e,t])},t.prototype.displaySectionSelector=function(e){return this.executeFunctionOnEnabled(e.format,"displaySectionSelector",[e])},t.prototype.getAllSectionsComponent=function(e,t){var n=this;return Promise.resolve(this.executeFunctionOnEnabled(t.format,"getAllSectionsComponent",[e,t])).catch(function(e){n.logger.error("Error getting all sections component",e)})},t.prototype.getCourseFormatComponent=function(e,t){var n=this;return Promise.resolve(this.executeFunctionOnEnabled(t.format,"getCourseFormatComponent",[e,t])).catch(function(e){n.logger.error("Error getting course format component",e)})},t.prototype.getCourseSummaryComponent=function(e,t){var n=this;return Promise.resolve(this.executeFunctionOnEnabled(t.format,"getCourseSummaryComponent",[e,t])).catch(function(e){n.logger.error("Error getting course summary component",e)})},t.prototype.getCourseTitle=function(e,t){return this.executeFunctionOnEnabled(e.format,"getCourseTitle",[e,t])},t.prototype.getCurrentSection=function(e,t){return Promise.resolve(this.executeFunctionOnEnabled(e.format,"getCurrentSection",[e,t])).catch(function(){return t[0]})},t.prototype.getSectionSelectorComponent=function(e,t){var n=this;return Promise.resolve(this.executeFunctionOnEnabled(t.format,"getSectionSelectorComponent",[e,t])).catch(function(e){n.logger.error("Error getting section selector component",e)})},t.prototype.getSingleSectionComponent=function(e,t){var n=this;return Promise.resolve(this.executeFunctionOnEnabled(t.format,"getSingleSectionComponent",[e,t])).catch(function(e){n.logger.error("Error getting single section component",e)})},t.prototype.invalidateData=function(e,t){return this.executeFunctionOnEnabled(e.format,"invalidateData",[e,t])},t.prototype.openCourse=function(e,t,n){return this.executeFunctionOnEnabled(t.format,"openCourse",[e,t,n])},t.prototype.shouldRefreshWhenCompletionChanges=function(e){return Promise.resolve(this.executeFunctionOnEnabled(e.format,"shouldRefreshWhenCompletionChanges",[e]))},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,r.a,a.a])],t)}(s.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(23),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.fb=e,this.gotoEntry=new o.v}return e.prototype.addControl=function(e,t){this.form&&("search"==this.mode&&this.form.addControl(e,this.fb.control(this.search[e]||null)),"edit"==this.mode&&this.form.addControl(e,this.fb.control(t,this.field.required?r.u.required:null)))},e.prototype.ngOnInit=function(){this.init()},e.prototype.init=function(){},e.prototype.isShowOrListMode=function(){return"list"==this.mode||"show"==this.mode},e.prototype.ngOnChanges=function(e){this.isShowOrListMode()&&e.value&&this.updateValue(e.value.currentValue)},e.prototype.updateValue=function(e){this.value=e},i([Object(o.D)(),l("design:type",String)],e.prototype,"mode",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"field",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"value",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"database",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"error",void 0),i([Object(o.O)(),l("design:type",o.v)],e.prototype,"gotoEntry",void 0),i([Object(o.D)(),l("design:type",r.g)],e.prototype,"form",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"search",void 0),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(1),l=n(10),a=n(2),s=n(9),u=n(46),c=n(28),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},h=function(){function e(e,t,n,o,r,i){var l=this;this.navCtrl=e,this.sitesProvider=t,this.utils=n,this.appProvider=o,this.svComponent=i,this.linkProfile=!0,this.checkOnline=!1,this.timetoshowusers=3e5,this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.pictureObs=r.on(u.a.PROFILE_PICTURE_UPDATED,function(e){e.userId==l.userId&&(l.avatarUrl=e.picture)},this.sitesProvider.getCurrentSiteId())}return e.prototype.ngOnInit=function(){this.setFields()},e.prototype.ngOnChanges=function(e){e&&this.setFields()},e.prototype.setFields=function(){var e=this.profileUrl||this.user&&(this.user.profileimageurl||this.user.userprofileimageurl||this.user.userpictureurl||this.user.profileimageurlsmall);"string"==typeof e&&(this.avatarUrl=e),this.fullname=this.fullname||this.user&&(this.user.fullname||this.user.userfullname),this.userId=this.userId||this.user&&(this.user.userid||this.user.id),this.courseId=this.courseId||this.user&&this.user.courseid},e.prototype.isOnline=function(){if(this.utils.isFalseOrZero(this.user.isonline))return!1;if(this.user.lastaccess){var e=(new Date).getTime()-this.timetoshowusers;return 1e3*this.user.lastaccess>=e}return this.user.isonline&&this.appProvider.isOnline()},e.prototype.gotoProfile=function(e){if(this.linkProfile&&this.userId){e.preventDefault(),e.stopPropagation();(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreUserProfilePage",{userId:this.userId,courseId:this.courseId})}},e.prototype.ngOnDestroy=function(){this.pictureObs&&this.pictureObs.off()},d([Object(o.D)(),f("design:type",Object)],e.prototype,"user",void 0),d([Object(o.D)(),f("design:type",String)],e.prototype,"profileUrl",void 0),d([Object(o.D)(),f("design:type",Object)],e.prototype,"linkProfile",void 0),d([Object(o.D)(),f("design:type",String)],e.prototype,"fullname",void 0),d([Object(o.D)(),f("design:type",Number)],e.prototype,"userId",void 0),d([Object(o.D)(),f("design:type",Number)],e.prototype,"courseId",void 0),d([Object(o.D)(),f("design:type",Object)],e.prototype,"checkOnline",void 0),d([Object(o.D)(),f("design:type",String)],e.prototype,"extraIcon",void 0),e=d([Object(o.m)({selector:"ion-avatar[core-user-avatar]",templateUrl:"core-user-avatar.html"}),p(5,Object(o.N)()),f("design:paramtypes",[r.s,i.a,a.a,l.a,s.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(57),i=n(71),l=n(6),a=n(1),s=n(2),u=n(72),c=n(152),d=n(166),f=n(77),p=n(133),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a,s,u){this.sitesProvider=t,this.fileProvider=n,this.assignProvider=o,this.utils=r,this.assignOffline=i,this.feedbackDelegate=l,this.submissionDelegate=a,this.fileUploaderProvider=s,this.groupsProvider=u,this.logger=e.getInstance("AddonModAssignHelperProvider")}return e.prototype.canEditSubmissionOffline=function(e,t){if(!t)return Promise.resolve(!1);if(t.status==f.a.SUBMISSION_STATUS_NEW||t.status==f.a.SUBMISSION_STATUS_REOPENED)return Promise.resolve(!0);for(var n=[],o=!0,r=0;r<t.plugins.length;r++){n.push(this.submissionDelegate.canPluginEditOffline(e,t,t.plugins[r]).then(function(e){e||(o=!1)}))}return Promise.all(n).then(function(){return o})},e.prototype.clearSubmissionPluginTmpData=function(e,t,n){var o=this;t.plugins.forEach(function(r){o.submissionDelegate.clearTmpData(e,t,r,n)})},e.prototype.copyPreviousAttempt=function(e,t){var n=this,o={},r=[];return t.plugins.forEach(function(t){r.push(n.submissionDelegate.copyPluginSubmissionData(e,t,o))}),Promise.all(r).then(function(){if(Object.keys(o).length)return n.assignProvider.saveSubmissionOnline(e.id,o)})},e.prototype.createEmptyFeedback=function(){return{grade:void 0,gradefordisplay:void 0,gradeddate:void 0}},e.prototype.createEmptySubmission=function(){return{id:void 0,userid:void 0,attemptnumber:void 0,timecreated:void 0,timemodified:void 0,status:void 0,groupid:void 0}},e.prototype.deleteStoredSubmissionFiles=function(e,t,n,o){var r=this;return this.assignOffline.getSubmissionPluginFolder(e,t,n,o).then(function(e){return r.fileProvider.removeDir(e)})},e.prototype.discardFeedbackPluginData=function(e,t,n,o){var r=this,i=[];return n.plugins.forEach(function(n){i.push(r.feedbackDelegate.discardPluginFeedbackData(e,t,n,o))}),Promise.all(i)},e.prototype.isSubmissionEmpty=function(e,t){if(!t)return!0;for(var n=0,o=t.plugins;n<o.length;n++){if(!this.submissionDelegate.isPluginEmpty(e,o[n]))return!1}return!0},e.prototype.getParticipants=function(e,t,n,o){var r=this;return t=t||0,o=o||this.sitesProvider.getCurrentSiteId(),this.assignProvider.listParticipants(e.id,t,n,o).then(function(i){return t||i&&i.length>0?i:r.groupsProvider.getActivityGroupInfo(e.cmid,!1,void 0,o).then(function(t){var i=[],l={};return t.groups.forEach(function(t){i.push(r.assignProvider.listParticipants(e.id,t.id,n,o).then(function(e){e.forEach(function(e){l[e.id]=e})}))}),Promise.all(i).then(function(){return r.utils.objectToArray(l)})})})},e.prototype.getPluginConfig=function(e,t,n){var o={};return e.configs.forEach(function(e){e.subtype==t&&e.plugin==n&&(o[e.name]=e.value)}),o},e.prototype.getPluginsEnabled=function(e,t){var n=[];return e.configs.forEach(function(e){e.subtype==t&&"enabled"==e.name&&1===parseInt(e.value,10)&&n.push({type:e.plugin})}),n},e.prototype.getStoredSubmissionFiles=function(e,t,n,o){var r=this;return this.assignOffline.getSubmissionPluginFolder(e,t,n,o).then(function(e){return r.fileProvider.getDirectoryContents(e)})},e.prototype.getSubmissionSizeForCopy=function(e,t){var n=this,o=[],r=0;return t.plugins.forEach(function(t){o.push(n.submissionDelegate.getPluginSizeForCopy(e,t).then(function(e){r+=e}))}),Promise.all(o).then(function(){return r})},e.prototype.getSubmissionSizeForEdit=function(e,t,n){var o=this,r=[],i=0;return t.plugins.forEach(function(l){r.push(o.submissionDelegate.getPluginSizeForEdit(e,t,l,n).then(function(e){i+=e}))}),Promise.all(r).then(function(){return i})},e.prototype.getSubmissionsUserData=function(e,t,n,o,r){var i=this;return this.getParticipants(e,n).then(function(n){var l=e.blindmarking&&!e.revealidentities,a=[],s=[],u=i.utils.arrayToObject(n,"id");return t.forEach(function(t){if(t.submitid=t.userid>0?t.userid:t.blindid,!(t.submitid<=0)){var n=u[t.submitid];if(n){delete u[t.submitid],l||(t.userfullname=n.fullname,t.userprofileimageurl=n.profileimageurl),t.manyGroups=!!n.groups&&n.groups.length>1,t.noGroups=!!n.groups&&0==n.groups.length,n.groupname&&(t.groupid=n.groupid,t.groupname=n.groupname);var c;t.userid>0&&l&&(delete t.userid,c=i.assignProvider.getAssignmentUserMappings(e.id,t.submitid,o,r).then(function(e){t.blindid=e})),c=c||Promise.resolve(),a.push(c.then(function(){(t.userfullname||t.blindid)&&s.push(t)}))}}}),Promise.all(a).then(function(){return i.utils.objectToArray(u).forEach(function(e){var t=i.createEmptySubmission();t.submitid=e.id,l?t.blindid=e.id:(t.userid=e.id,t.userfullname=e.fullname,t.userprofileimageurl=e.profileimageurl),t.manyGroups=!!e.groups&&e.groups.length>1,t.noGroups=!!e.groups&&0==e.groups.length,e.groupname&&(t.groupid=e.groupid,t.groupname=e.groupname),t.status=e.submitted?f.a.SUBMISSION_STATUS_SUBMITTED:f.a.SUBMISSION_STATUS_NEW,s.push(t)}),s})})},e.prototype.hasFeedbackDataChanged=function(e,t,n,o){var r=this,i=[],l=!1;return n.plugins.forEach(function(a){i.push(r.prepareFeedbackPluginData(e.id,o,n).then(function(n){return r.feedbackDelegate.hasPluginDataChanged(e,t,a,n,o).then(function(e){e&&(l=!0)})}).catch(function(){}))}),this.utils.allPromises(i).then(function(){return l})},e.prototype.hasSubmissionDataChanged=function(e,t,n){var o=this,r=[],i=!1;return t.plugins.forEach(function(l){r.push(o.submissionDelegate.hasPluginDataChanged(e,t,l,n).then(function(e){e&&(i=!0)}).catch(function(){}))}),this.utils.allPromises(r).then(function(){return i})},e.prototype.prepareFeedbackPluginData=function(e,t,n,o){var r=this,i={},l=[];return n.plugins.forEach(function(n){l.push(r.feedbackDelegate.preparePluginFeedbackData(e,t,n,i,o))}),Promise.all(l).then(function(){return i})},e.prototype.prepareSubmissionPluginData=function(e,t,n,o){var r=this,i={},l=[];return t.plugins.forEach(function(a){l.push(r.submissionDelegate.preparePluginSubmissionData(e,t,a,n,i,o))}),Promise.all(l).then(function(){return i})},e.prototype.storeSubmissionFiles=function(e,t,n,o,r){var i=this;return this.assignOffline.getSubmissionPluginFolder(e,t,o,r).then(function(e){return i.fileUploaderProvider.storeFilesToUpload(e,n)})},e.prototype.uploadFile=function(e,t,n,o){return this.fileUploaderProvider.uploadOrReuploadFile(t,n,f.a.COMPONENT,e,o)},e.prototype.uploadFiles=function(e,t,n){return this.fileUploaderProvider.uploadOrReuploadFiles(t,f.a.COMPONENT,e,n)},e.prototype.uploadOrStoreFiles=function(e,t,n,o,r,i){return o?this.storeSubmissionFiles(e,t,n,r,i):this.uploadFiles(e,n,i)},e=h([Object(o.A)(),m("design:paramtypes",[l.a,a.a,r.a,f.a,s.a,p.a,c.a,d.a,u.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(6),i=n(1),l=n(52),a=n(13),s=n(168),u=n(11),c=n(22),d=n(2),f=n(4),p=n(15),h=n(38),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},y=function(){function e(e,t,n,o,r,i,l,a,s,u,c){this.coursesProvider=t,this.gradesProvider=n,this.sitesProvider=o,this.textUtils=r,this.courseProvider=i,this.domUtils=l,this.urlUtils=a,this.utils=s,this.linkHelper=u,this.courseHelper=c,this.logger=e.getInstance("CoreGradesHelperProvider")}return e.prototype.formatGradeRow=function(e){var t={};for(var n in e)if(void 0!==e[n].content&&null!==e[n].content){var o=String(e[n].content);"itemname"==n?(this.setRowIcon(t,o),t.link=this.getModuleLink(o),t.rowclass+=e[n].class.indexOf("hidden")>=0?" hidden":"",t.rowclass+=e[n].class.indexOf("dimmed_text")>=0?" dimmed_text":"",o=o.replace(/<\/span>/gi,"\n"),o=this.textUtils.cleanTags(o)):o=this.textUtils.replaceNewLines(o,"<br>"),"&nbsp;"==o&&(o=""),t[n]=o.trim()}return t},e.prototype.formatGradeRowForTable=function(e){var t={};for(var n in e)if(void 0!==e[n].content&&null!==e[n].content){var o=String(e[n].content);"itemname"==n?(t.id=parseInt(e[n].id.split("_")[1],10),t.colspan=e[n].colspan,t.rowspan=e.leader&&e.leader.rowspan||1,this.setRowIcon(t,o),t.rowclass=e[n].class.indexOf("leveleven")<0?"odd":"even",t.rowclass+=e[n].class.indexOf("hidden")>=0?" hidden":"",t.rowclass+=e[n].class.indexOf("dimmed_text")>=0?" dimmed_text":"",o=o.replace(/<\/span>/gi,"\n"),o=this.textUtils.cleanTags(o),n="gradeitem"):o=this.textUtils.replaceNewLines(o,"<br>"),"&nbsp;"==o&&(o=""),t[n]=o.trim()}return t},e.prototype.formatGradeItem=function(e){for(var t in e){var n=t.indexOf("formatted");n>0&&(e[t.substr(0,n)]=e[t])}return e},e.prototype.formatGradesTable=function(e){var t=this,n=e.maxdepth,o={columns:[],rows:[]},r={gradeitem:!0,weight:!1,grade:!1,range:!1,percentage:!1,lettergrade:!1,rank:!1,average:!1,feedback:!1,contributiontocoursetotal:!1};o.rows=e.tabledata.map(function(e){return t.formatGradeRowForTable(e)});var i=o.rows.find(function(e){return"leader"!=e.itemtype&&(void 0!==e.grade||void 0!==e.percentage)});i&&void 0!==i.grade?r.grade=!0:i&&void 0!==i.percentage?r.percentage=!0:(i=o.rows.find(function(e){return"leader"!=e.itemtype}),r.grade=!0);for(var l in r)void 0!==i[l]&&o.columns.push({name:l,colspan:"gradeitem"==l?n:1,hiddenPhone:!r[l]});return o},e.prototype.getGradesCourseData=function(e){return g(this,void 0,void 0,function(){var t,n,o,r;return v(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.coursesProvider.getUserCourses(void 0,void 0,0)];case 1:return o=i.sent(),r=this.utils.arrayToObject(o,"id"),t=this.addCourseData(e,r),[3,3];case 2:return i.sent(),t=!0,[3,3];case 3:return t?(n=this.coursesProvider.isGetCoursesByFieldAvailable()?this.coursesProvider.getCoursesByField("ids",e.map(function(e){return e.courseid}).join(",")):this.coursesProvider.getUserCourses(void 0,void 0,2),[4,n]):[3,5];case 4:o=i.sent(),r=this.utils.arrayToObject(o,"id"),this.addCourseData(e,r),i.label=5;case 5:return[2,e.filter(function(e){return void 0!==e.courseFullName})]}})})},e.prototype.addCourseData=function(e,t){for(var n=!1,o=0,r=e;o<r.length;o++){var i=r[o];i.courseid in t?i.courseFullName=t[i.courseid].fullname:n=!0}return n},e.prototype.getGradeItem=function(e,t,n,o,r){var i=this;return void 0===r&&(r=!1),this.gradesProvider.getCourseGradesTable(e,n,o,r).then(function(e){return e?i.getGradesTableRow(e,t):Promise.reject(null)})},e.prototype.getGradeLabelFromValue=function(e,t){if(t=Number(t),!e||!t||t<=0)return"";for(var n in e)if(e[n].value==t)return e[n].label;return""},e.prototype.getGradeModuleItems=function(e,t,n,o,r,i){var l=this;return void 0===i&&(i=!1),this.gradesProvider.getGradeItems(e,n,o,r,i).then(function(e){return e?void 0!==e.tabledata?l.getModuleGradesTableRows(e,t):e.filter(function(e){return e.cmid==t}).map(function(e){return l.formatGradeItem(e)}):Promise.reject(null)})},e.prototype.getGradeValueFromLabel=function(e,t){if(!e||!t)return 0;for(var n in e)if(e[n].label==t)return e[n].value<0?0:e[n].value;return 0},e.prototype.getModuleLink=function(e){var t=this.domUtils.toDom(e)[0],n=!!t.attributes.href&&t.attributes.href.value;return!(!n||n.indexOf("/mod/")<0)&&n},e.prototype.getGradesTableRow=function(e,t){if(e.tabledata){var n=e.tabledata.find(function(e){return e.itemname&&e.itemname.id&&"row"==e.itemname.id.substr(0,3)&&parseInt(e.itemname.id.split("_")[1],10)==t});if(n)return this.formatGradeRow(n)}return""},e.prototype.getModuleGradesTableRows=function(e,t){var n=this;if(e.tabledata){var o=/href="([^"]*\/mod\/[^"|^\/]*\/[^"|^\.]*\.php[^"]*)/;return e.tabledata.filter(function(e){if(e.itemname&&e.itemname.content){var r=e.itemname.content.match(o);if(r&&r.length){var i=n.urlUtils.extractUrlParams(r[1]);return i&&i.id==t}}return!1}).map(function(e){return n.formatGradeRow(e)})}return[]},e.prototype.goToGrades=function(e,t,n,o,r){var i,l=this,a=this.domUtils.showModalLoading();return this.sitesProvider.getSite(r).then(function(e){return r=e.id,i=e.getUserId(),n?l.gradesProvider.isGradeItemsAvalaible(r).then(function(e){if(!e)return Promise.reject(null)}):Promise.reject(null)}).then(function(){return l.gradesProvider.getGradeItems(e,t,void 0,r).then(function(i){var a=i.find(function(e){return n==e.cmid});if(a){return l.linkHelper.goInSite(o,"CoreGradesGradePage",{courseId:e,userId:t,gradeId:a.id},r).catch(function(){})}return Promise.reject(null)})}).catch(function(){if(t&&t!=i){return l.linkHelper.goInSite(o,"CoreGradesCoursePage",{course:{id:e},userId:t},r).catch(function(){})}if(!l.courseProvider.currentViewIsCourse(o,e))return l.courseHelper.getCourse(e,r).then(function(e){return l.linkHelper.goInSite(o,"CoreCourseSectionPage",{course:e.course,selectedTab:"CoreGrades"},r).catch(function(){})});l.courseProvider.selectCourseTab("CoreGrades")}).catch(function(){return l.linkHelper.goInSite(o,"CoreGradesCoursePage",{course:{id:e}},r)}).finally(function(){a.dismiss()})},e.prototype.invalidateGradeModuleItems=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(i){return t=t||i.getUserId(),r.gradesProvider.isGradeItemsAvalaible(o).then(function(i){return i?r.gradesProvider.invalidateCourseGradesItemsData(e,t,n,o):r.gradesProvider.invalidateCourseGradesData(e,t,o)})})},e.prototype.setRowIcon=function(e,t){if((t=t.replace("%2F","/").replace("%2f","/")).indexOf("/agg_mean")>-1)e.itemtype="agg_mean",e.image="assets/img/grades/agg_mean.png";else if(t.indexOf("/agg_sum")>-1)e.itemtype="agg_sum",e.image="assets/img/grades/agg_sum.png";else if(t.indexOf("/outcomes")>-1||t.indexOf("fa-tasks")>-1)e.itemtype="outcome",e.icon="fa-tasks";else if(t.indexOf("i/folder")>-1||t.indexOf("fa-folder")>-1)e.itemtype="category",e.icon="fa-folder";else if(t.indexOf("/manual_item")>-1||t.indexOf("fa-square-o")>-1)e.itemtype="manual",e.icon="fa-square-o";else if(t.indexOf("/mod/")>-1){var n=t.match(/mod\/([^\/]*)\//);void 0!==n[1]&&(e.itemtype="mod",e.itemmodule=n[1],e.image=this.courseProvider.getModuleIconSrc(n[1],this.domUtils.convertToElement(t).querySelector("img").getAttribute("src")))}else if(e.rowspan&&e.rowspan>1)e.itemtype="category",e.icon="fa-folder";else if(t.indexOf("src=")>-1){e.itemtype="unknown";var o=t.match(/src="([^"]*)"/);e.image=o[1]}else if(t.indexOf("<i ")>-1){e.itemtype="unknown";o=t.match(/<i class="(?:[^"]*?\s)?(fa-[a-z0-9-]+)/);e.icon=o?o[1]:""}return e},e.prototype.makeGradesMenu=function(e,t,n,o,r){var i=this;if(void 0===n&&(n=""),void 0===o&&(o=""),e<0)return r?Promise.resolve(this.utils.makeMenuFromList(r,n,void 0,o)):t?this.courseProvider.getModuleBasicGradeInfo(t).then(function(e){return e.scale?i.utils.makeMenuFromList(e.scale,n,void 0,o):[]}):Promise.resolve([]);if(e>0){var l=[];n&&l.push({label:n,value:o});for(var a=e;a>=0;a--)l.push({label:a+" / "+e,value:a});return Promise.resolve(l)}return Promise.resolve([])},e=m([Object(o.A)(),_("design:paramtypes",[r.a,l.a,s.a,i.a,u.a,a.a,f.a,c.a,d.a,p.a,h.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(6),i=n(1),l=n(53),a=n(52),s=n(10),u=n(11),c=n(24),d=n(22),f=n(2),p=n(71),h=n(40),m=n(151),_=n(126),g=n(275),v=n(46),y=n(3),b=n(14),P=(n.n(b),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,n,o,r,i,l,a,s,u,c,d,f,p,h){this.sitesProvider=n,this.groupsProvider=o,this.coursesProvider=r,this.textUtils=i,this.timeUtils=l,this.urlUtils=a,this.localNotificationsProvider=s,this.configProvider=u,this.utils=c,this.calendarOffline=d,this.appProvider=f,this.translate=p,this.userProvider=h,this.ROOT_CACHE_KEY="mmaCalendar:",this.weekDays=[{shortname:"addon.calendar.sun",fullname:"addon.calendar.sunday"},{shortname:"addon.calendar.mon",fullname:"addon.calendar.monday"},{shortname:"addon.calendar.tue",fullname:"addon.calendar.tuesday"},{shortname:"addon.calendar.wed",fullname:"addon.calendar.wednesday"},{shortname:"addon.calendar.thu",fullname:"addon.calendar.thursday"},{shortname:"addon.calendar.fri",fullname:"addon.calendar.friday"},{shortname:"addon.calendar.sat",fullname:"addon.calendar.saturday"}],this.siteSchema={name:"AddonCalendarProvider",version:3,canBeCleared:[t.EVENTS_TABLE],tables:[{name:t.EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"name",type:"TEXT",notNull:!0},{name:"description",type:"TEXT"},{name:"format",type:"INTEGER"},{name:"eventtype",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"timestart",type:"INTEGER"},{name:"timeduration",type:"INTEGER"},{name:"categoryid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"instance",type:"INTEGER"},{name:"modulename",type:"TEXT"},{name:"timemodified",type:"INTEGER"},{name:"repeatid",type:"INTEGER"},{name:"visible",type:"INTEGER"},{name:"uuid",type:"TEXT"},{name:"sequence",type:"INTEGER"},{name:"subscriptionid",type:"INTEGER"},{name:"location",type:"TEXT"},{name:"eventcount",type:"INTEGER"},{name:"timesort",type:"INTEGER"},{name:"category",type:"TEXT"},{name:"course",type:"TEXT"},{name:"subscription",type:"TEXT"},{name:"canedit",type:"INTEGER"},{name:"candelete",type:"INTEGER"},{name:"deleteurl",type:"TEXT"},{name:"editurl",type:"TEXT"},{name:"viewurl",type:"TEXT"},{name:"formattedtime",type:"TEXT"},{name:"isactionevent",type:"INTEGER"},{name:"url",type:"TEXT"},{name:"islastday",type:"INTEGER"},{name:"popupname",type:"TEXT"},{name:"mindaytimestamp",type:"INTEGER"},{name:"maxdaytimestamp",type:"INTEGER"},{name:"draggable",type:"INTEGER"}]},{name:t.REMINDERS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"eventid",type:"INTEGER"},{name:"time",type:"INTEGER"}],uniqueKeys:[["eventid","time"]]}],migrate:function(e,n,o){if(n<3){var r=t.EVENTS_TABLE,i="addon_calendar_events_2";return e.tableExists(i).catch(function(){return i="addon_calendar_events",e.tableExists(i)}).then(function(){return e.getAllRecords(i).then(function(t){var n=[];return t.forEach(function(t){n.push(e.insertRecord(r,t))}),Promise.all(n)})}).then(function(){return e.dropTable(i)}).catch(function(){})}}},this.logger=e.getInstance("AddonCalendarProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.canDeleteEvents=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.canDeleteEventsInSite(e)}).catch(function(){return!1})},e.prototype.canDeleteEventsInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_calendar_delete_calendar_events")},e.prototype.canEditEvents=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.canEditEventsInSite(e)}).catch(function(){return!1})},e.prototype.canEditEventsInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan("3.7.1")},e.prototype.canViewMonth=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.canViewMonthInSite(e)}).catch(function(){return!1})},e.prototype.canViewMonthInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_calendar_get_calendar_monthly_view")},e.prototype.cleanExpiredEvents=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(o){if(!n.canViewMonthInSite(o))return o.getDb().getRecordsSelect(t.EVENTS_TABLE,"timestart + timeduration < ?",[n.timeUtils.timestamp()]).then(function(t){return Promise.all(t.map(function(t){return n.deleteLocalEvent(t.id,e)}))})})},e.prototype.deleteEvent=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.calendarOffline.markDeleted(e,t,n,r).then(function(){return!1})};return o||!this.appProvider.isOnline()?l():this.calendarOffline.unmarkDeleted(e,r).then(function(){return i.deleteEventOnline(e,n,r).then(function(){return!0}).catch(function(e){return e&&!i.utils.isWebServiceError(e)?l():Promise.reject(e)})})},e.prototype.deleteEventOnline=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("core_calendar_delete_calendar_events",{events:[{eventid:e,repeat:t?1:0}]},{responseExpected:!1})})},e.prototype.deleteLocalEvent=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){n=r.getId();var i=[];return i.push(r.getDb().deleteRecords(t.EVENTS_TABLE,{id:e})),i.push(r.getDb().getRecords(t.REMINDERS_TABLE,{eventid:e}).then(function(e){return Promise.all(e.map(function(e){return o.deleteEventReminder(e.id,n)}))})),Promise.all(i).catch(function(){})})},e.prototype.formatEventTime=function(e,t,n,o,r,i){var l=this;void 0===n&&(n=!0),void 0===r&&(r=0);var a,s=1e3*e.timestart,u=1e3*(e.timestart+e.timeduration);if(e.timeduration){if(!b(s).isSame(u,"day")){var c=this.timeUtils.userDate(s,t),d=this.timeUtils.userDate(u,t),f=[],p=this.getDayRepresentation(s,!1)+", ",m=this.getDayRepresentation(u,!1)+", ";return!p||o&&b(o).isSame(s,"day")||f.push(this.getViewUrl("day",e.timestart,void 0,i).then(function(e){p=l.urlUtils.buildLink(e,p)})),!m||o&&b(o).isSame(u,"day")||f.push(this.getViewUrl("day",u/1e3,void 0,i).then(function(e){m=l.urlUtils.buildLink(e,m)})),Promise.all(f).then(function(){return p+c+" <strong>&raquo;</strong> "+m+d})}a=e.timeduration==h.a.SECONDS_DAY?this.translate.instant("addon.calendar.allday"):this.timeUtils.userDate(s,t)+" <strong>&raquo;</strong> "+this.timeUtils.userDate(u,t)}else a=this.timeUtils.userDate(s,t);return r?Promise.resolve(a):o&&b(o).isSame(s,"day")?Promise.resolve(this.getDayRepresentation(s,n)+", "+a):this.getViewUrl("day",e.timestart,void 0,i).then(function(e){return l.urlUtils.buildLink(e,l.getDayRepresentation(s,n))+", "+a})},e.prototype.getAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={},r={cacheKey:n.getAccessInformationCacheKey(e)};return e&&(o.courseid=e),t.read("core_calendar_get_calendar_access_information",o,r)})},e.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInformation:"+(e||0)},e.prototype.getAllEventsFromLocalDb=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(t.EVENTS_TABLE)})},e.prototype.getAllowedEventTypes=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={},r={cacheKey:n.getAllowedEventTypesCacheKey(e)};return e&&(o.courseid=e),t.read("core_calendar_get_allowed_event_types",o,r).then(function(e){var t={};return e.allowedeventtypes&&e.allowedeventtypes.map(function(e){t[e]=!0}),t})})},e.prototype.getAllowedEventTypesCacheKey=function(e){return this.ROOT_CACHE_KEY+"allowedEventTypes:"+(e||0)},e.prototype.getCalendarLookAhead=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.userProvider.getUserPreference("calendar_lookahead").catch(function(e){}).then(function(t){return null!=t?t:e.getStoredConfig("calendar_lookahead")})})},e.prototype.getCalendarTimeFormat=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.userProvider.getUserPreference("calendar_timeformat").catch(function(e){}).then(function(o){return o&&"0"!==o||(o=e.getStoredConfig("calendar_site_timeformat")),o===t.CALENDAR_TF_12?o=n.translate.instant("core.strftimetime12"):o===t.CALENDAR_TF_24&&(o=n.translate.instant("core.strftimetime24")),o&&"0"!==o?o:n.translate.instant("core.strftimetime")})})},e.prototype.getDayRepresentation=function(e,t){if(void 0===t&&(t=!0),!t)return this.timeUtils.userDate(e,"core.strftimedayshort");var n=b(e),o=b();return n.isSame(o,"day")?this.translate.instant("addon.calendar.today"):n.isSame(o.clone().subtract(1,"days"),"day")?this.translate.instant("addon.calendar.yesterday"):n.isSame(o.clone().add(1,"days"),"day")?this.translate.instant("addon.calendar.tomorrow"):this.timeUtils.userDate(e,"core.strftimedayshort")},e.prototype.getDefaultNotificationTime=function(e){e=e||this.sitesProvider.getCurrentSiteId();return this.configProvider.get(t.DEFAULT_NOTIFICATION_TIME_SETTING+"#"+e,t.DEFAULT_NOTIFICATION_TIME)},e.prototype.getEvent=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={cacheKey:n.getEventCacheKey(e),updateFrequency:l.a.FREQUENCY_RARELY};return t.read("core_calendar_get_calendar_events",{options:{userevents:0,siteevents:0},events:{eventids:[e]}},o).then(function(t){return t.events.find(function(t){return t.id==e})||n.getEventFromLocalDb(e)}).catch(function(){return n.getEventFromLocalDb(e)})})},e.prototype.getEventById=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={cacheKey:n.getEventCacheKey(e),updateFrequency:l.a.FREQUENCY_RARELY};return t.read("core_calendar_get_calendar_event_by_id",{eventid:e},o).then(function(e){return e.event}).catch(function(t){return n.getEventFromLocalDb(e).catch(function(){return Promise.reject(t)})})})},e.prototype.getEventCacheKey=function(e){return this.ROOT_CACHE_KEY+"events:"+e},e.prototype.getEventFromLocalDb=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.EVENTS_TABLE,{id:e}).then(function(e){return o.isGetEventByIdAvailableInSite(n)&&(e.descriptionformat=e.format,e.iscourseevent=e.eventtype==t.TYPE_COURSE,e.iscategoryevent=e.eventtype==t.TYPE_CATEGORY,e.normalisedeventtype=o.getEventType(e),e.category=o.textUtils.parseJSON(e.category,null),e.course=o.textUtils.parseJSON(e.course,null),e.subscription=o.textUtils.parseJSON(e.subscription,null)),e})})},e.prototype.addEventReminder=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={eventid:e.id,time:n};return o.getDb().insertRecord(t.REMINDERS_TABLE,i).then(function(t){return r.scheduleEventNotification(e,t,n,o.getId())})})},e.prototype.getEventType=function(e){return e.modulename?"course":e.eventtype},e.prototype.deleteEventReminder=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return o.localNotificationsProvider.isAvailable()&&o.localNotificationsProvider.cancel(e,t.COMPONENT,n.getId()),n.getDb().deleteRecords(t.REMINDERS_TABLE,{id:e})})},e.prototype.getDayEvents=function(e,t,n,o,r,i,a){var s=this;return this.sitesProvider.getSite(a).then(function(u){var c={year:e,month:t,day:n};o&&(c.courseid=o),r&&(c.categoryid=r);var d={cacheKey:s.getDayEventsCacheKey(e,t,n,o,r),updateFrequency:l.a.FREQUENCY_SOMETIMES};return i&&(d.getFromCache=!1,d.emergencyCache=!1),u.read("core_calendar_get_calendar_day_view",c,d).then(function(e){return s.storeEventsInLocalDB(e.events,a),e})})},e.prototype.getDayEventsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"day:"},e.prototype.getDayEventsDayPrefixCacheKey=function(e,t,n){return this.getDayEventsPrefixCacheKey()+e+":"+t+":"+n+":"},e.prototype.getDayEventsCacheKey=function(e,t,n,o,r){return this.getDayEventsDayPrefixCacheKey(e,t,n)+(o||"")+":"+(r||"")},e.prototype.getEventReminders=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.REMINDERS_TABLE,{eventid:e},"time ASC")})},e.prototype.getEventsList=function(e,n,o,r){var i=this;return void 0===n&&(n=0),void 0===o&&(o=t.DAYS_INTERVAL),e=e||this.timeUtils.timestamp(),this.sitesProvider.getSite(r).then(function(t){r=t.getId();var a,s,u=[];return u.push(i.coursesProvider.getUserCourses(!1,r).then(function(e){(a=e).push({id:t.getSiteHomeId()})})),u.push(i.groupsProvider.getAllUserGroups(r).then(function(e){s=e})),Promise.all(u).then(function(){var u=e+h.a.SECONDS_DAY*n,c={options:{userevents:1,siteevents:1,timestart:u,timeend:u+h.a.SECONDS_DAY*o-1},events:{courseids:[],groupids:[]}};c.events.courseids=a.map(function(e){return e.id}),c.events.groupids=s.map(function(e){return e.id});var d={cacheKey:i.getEventsListCacheKey(n,o),getCacheUsingCacheKey:!0,uniqueCacheKey:!0,updateFrequency:l.a.FREQUENCY_SOMETIMES};return t.read("core_calendar_get_calendar_events",c,d).then(function(e){return i.canViewMonthInSite(t)||i.storeEventsInLocalDB(e.events,r),e.events})})})},e.prototype.getEventsListPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"events:"},e.prototype.getEventsListCacheKey=function(e,t){return this.getEventsListPrefixCacheKey()+e+":"+t},e.prototype.getLocalEventsByRepeatIdFromLocalDb=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.EVENTS_TABLE,{repeatid:e})})},e.prototype.getMonthlyEvents=function(e,n,o,r,i,a){var s=this;return this.sitesProvider.getSite(a).then(function(u){var c={year:e,month:n};u.isVersionGreaterEqualThan("3.5")&&(c.mini=1),o&&(c.courseid=o),r&&(c.categoryid=r);var d={cacheKey:s.getMonthlyEventsCacheKey(e,n,o,r),updateFrequency:l.a.FREQUENCY_SOMETIMES};return i&&(d.getFromCache=!1,d.emergencyCache=!1),u.read("core_calendar_get_calendar_monthly_view",c,d).then(function(e){return e.weeks.forEach(function(e){e.days.forEach(function(e){s.storeEventsInLocalDB(e.events,a)})}),s.appProvider.isOnline()&&s.configProvider.set(t.STARTING_WEEK_DAY,e.daynames[0].dayno),e})})},e.prototype.getMonthlyEventsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"monthly:"},e.prototype.getMonthlyEventsMonthPrefixCacheKey=function(e,t){return this.getMonthlyEventsPrefixCacheKey()+e+":"+t+":"},e.prototype.getMonthlyEventsCacheKey=function(e,t,n,o){return this.getMonthlyEventsMonthPrefixCacheKey(e,t)+(n||"")+":"+(o||"")},e.prototype.getUpcomingEvents=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(i){var a={};e&&(a.courseid=e),t&&(a.categoryid=t);var s={cacheKey:r.getUpcomingEventsCacheKey(e,t),updateFrequency:l.a.FREQUENCY_SOMETIMES};return n&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("core_calendar_get_calendar_upcoming_view",a,s).then(function(e){return r.storeEventsInLocalDB(e.events,o),e})})},e.prototype.getUpcomingEventsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"upcoming:"},e.prototype.getUpcomingEventsCacheKey=function(e,t){return this.getUpcomingEventsPrefixCacheKey()+(e||"")+":"+(t||"")},e.prototype.getViewUrl=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=r.textUtils.concatenatePaths(o.getURL(),"calendar/view.php?view="+e);return t&&(i+="&time="+t),n&&(i+="&course="+n),i})},e.prototype.getWeekDays=function(e){return e=e||0,this.weekDays.slice(e).concat(this.weekDays.slice(0,e))},e.prototype.invalidateAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAccessInformationCacheKey(e))})},e.prototype.invalidateAllowedEventTypes=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAllowedEventTypesCacheKey(e))})},e.prototype.invalidateAllDayEvents=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getDayEventsPrefixCacheKey())})},e.prototype.invalidateDayEvents=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKeyStartingWith(r.getDayEventsDayPrefixCacheKey(e,t,n))})},e.prototype.invalidateEventsList=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(n){e=n.getId();var o=[];return o.push(t.coursesProvider.invalidateUserCourses(e)),o.push(t.groupsProvider.invalidateAllUserGroups(e)),o.push(n.invalidateWsCacheForKeyStartingWith(t.getEventsListPrefixCacheKey())),Promise.all(o)})},e.prototype.invalidateEvent=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getEventCacheKey(e))})},e.prototype.invalidateAllMonthlyEvents=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getMonthlyEventsPrefixCacheKey())})},e.prototype.invalidateMonthlyEvents=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(o.getMonthlyEventsMonthPrefixCacheKey(e,t))})},e.prototype.invalidateAllUpcomingEvents=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getUpcomingEventsPrefixCacheKey())})},e.prototype.invalidateUpcomingEvents=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(o.getUpcomingEventsCacheKey(e,t))})},e.prototype.invalidateLookAhead=function(e){return this.userProvider.invalidateUserPreference("calendar_lookahead",e)},e.prototype.invalidateTimeFormat=function(e){return this.userProvider.invalidateUserPreference("calendar_timeformat",e)},e.prototype.isCalendarDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_AddonCalendar")},e.prototype.isDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isCalendarDisabledInSite(e)})},e.prototype.isGetEventByIdAvailable=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isGetEventByIdAvailableInSite(e)}).catch(function(){return!1})},e.prototype.isGetEventByIdAvailableInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_calendar_get_calendar_event_by_id")},e.prototype.scheduleAllSitesEventsNotifications=function(){var e=this,t=this.localNotificationsProvider.isAvailable();return this.sitesProvider.getSitesIds().then(function(n){var o=[];return n.forEach(function(n){o.push(e.cleanExpiredEvents(n).then(function(){if(t)return e.isDisabled(n).then(function(t){if(!t)return e.getEventsList(void 0,void 0,void 0,n).then(function(t){return e.scheduleEventsNotifications(t,n)})})}))}),Promise.all(o)})},e.prototype.scheduleEventNotification=function(e,n,o,r){var i=this;if(this.localNotificationsProvider.isAvailable()){if(r=r||this.sitesProvider.getCurrentSiteId(),0===o)return this.localNotificationsProvider.cancel(n,t.COMPONENT,r);return(-1==o?this.getDefaultNotificationTime(r).then(function(o){return 0==o?i.localNotificationsProvider.cancel(n,t.COMPONENT,r):e.timestart-60*o}):Promise.resolve(o)).then(function(o){if((o*=1e3)<=(new Date).getTime())return i.localNotificationsProvider.cancel(n,t.COMPONENT,r);var l={id:n,title:e.name,text:i.timeUtils.userDate(1e3*e.timestart,"core.strftimedaydatetime",!0),icon:"file://assets/img/icons/calendar.png",trigger:{at:new Date(o)},data:{eventid:e.id,reminderid:n,siteid:r}};return i.localNotificationsProvider.schedule(l,t.COMPONENT,r)})}return Promise.resolve()},e.prototype.scheduleEventsNotifications=function(e,t){var n=this;return this.localNotificationsProvider.isAvailable()?(t=t||this.sitesProvider.getCurrentSiteId(),Promise.all(e.map(function(e){return 1e3*(e.timestart+e.timeduration)<=(new Date).getTime()?n.deleteLocalEvent(e.id,t):n.getEventReminders(e.id,t).then(function(o){return Promise.all(o.map(function(o){return n.scheduleEventNotification(e,o.id,o.time,t)}))})}))):Promise.resolve([])},e.prototype.setDefaultNotificationTime=function(e,n){n=n||this.sitesProvider.getCurrentSiteId();return this.configProvider.set(t.DEFAULT_NOTIFICATION_TIME_SETTING+"#"+n,e)},e.prototype.storeEventInLocalDb=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){return n=r.getId(),o.getEventFromLocalDb(e.id,r.id).catch(function(){return o.getEventReminders(e.id,n).then(function(t){0==t.length&&o.addEventReminder(e,-1,n)})}).then(function(){var n={id:e.id,name:e.name,description:e.description,format:e.descriptionformat||e.format,eventtype:e.eventtype,courseid:e.courseid,timestart:e.timestart,timeduration:e.timeduration,categoryid:e.categoryid,groupid:e.groupid,userid:e.userid,instance:e.instance,modulename:e.modulename,timemodified:e.timemodified,repeatid:e.repeatid,visible:e.visible,uuid:e.uuid,sequence:e.sequence,subscriptionid:e.subscriptionid,location:e.location,eventcount:e.eventcount,timesort:e.timesort,category:e.category?JSON.stringify(e.category):void 0,course:e.course?JSON.stringify(e.course):void 0,subscription:e.subscription?JSON.stringify(e.subscription):void 0,canedit:e.canedit?1:0,candelete:e.candelete?1:0,deleteurl:e.deleteurl,editurl:e.editurl,viewurl:e.viewurl,isactionevent:e.isactionevent?1:0,url:e.url,islastday:e.islastday?1:0,popupname:e.popupname,mindaytimestamp:e.mindaytimestamp,maxdaytimestamp:e.maxdaytimestamp,draggable:e.draggable};return r.getDb().insertRecord(t.EVENTS_TABLE,n)})})},e.prototype.storeEventsInLocalDB=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(o){return t=o.getId(),Promise.all(e.map(function(e){return n.storeEventInLocalDb(e,t)}))})},e.prototype.submitEvent=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.calendarOffline.saveEvent(e,t,n,r).then(function(e){return{sent:!1,event:e}})};return o||!this.appProvider.isOnline()?l():this.calendarOffline.deleteEvent(e,r).then(function(){return i.submitEventOnline(e,t,r).then(function(e){return{sent:!0,event:e}}).catch(function(e){return e&&!i.utils.isWebServiceError(e)?l():Promise.reject(e)})})},e.prototype.submitEventOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){t.id=e||0,t.userid=n.getUserId(),t.visible=1,t.instance=0,e>0?t._qf__core_calendar_local_event_forms_update=1:t._qf__core_calendar_local_event_forms_create=1;var r={formdata:o.utils.objectToGetParams(t)};return n.write("core_calendar_submit_create_update_form",r).then(function(e){return e.validationerror?Promise.reject({message:o.translate.instant("core.invalidformdata"),errorcode:"validationerror"}):e.event})})},e.DAYS_INTERVAL=30,e.COMPONENT="AddonCalendarEvents",e.DEFAULT_NOTIFICATION_TIME_CHANGED="AddonCalendarDefaultNotificationTimeChangedEvent",e.DEFAULT_NOTIFICATION_TIME_SETTING="mmaCalendarDefaultNotifTime",e.DEFAULT_NOTIFICATION_TIME=60,e.STARTING_WEEK_DAY="addon_calendar_starting_week_day",e.NEW_EVENT_EVENT="addon_calendar_new_event",e.NEW_EVENT_DISCARDED_EVENT="addon_calendar_new_event_discarded",e.EDIT_EVENT_EVENT="addon_calendar_edit_event",e.DELETED_EVENT_EVENT="addon_calendar_deleted_event",e.UNDELETED_EVENT_EVENT="addon_calendar_undeleted_event",e.FILTER_CHANGED_EVENT="addon_calendar_filter_changed_event",e.TYPE_CATEGORY="category",e.TYPE_COURSE="course",e.TYPE_GROUP="group",e.TYPE_SITE="site",e.TYPE_USER="user",e.ALL_TYPES=[t.TYPE_SITE,t.TYPE_CATEGORY,t.TYPE_COURSE,t.TYPE_GROUP,t.TYPE_USER],e.CALENDAR_TF_24="%H:%M",e.CALENDAR_TF_12="%I:%M %p",e.EVENTS_TABLE="addon_calendar_events_3",e.REMINDERS_TABLE="addon_calendar_reminders",e=t=P([Object(o.A)(),O("design:paramtypes",[r.a,i.a,p.a,a.a,u.a,c.a,d.a,m.a,_.a,f.a,g.a,s.a,y.c,v.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(2),l=n(1),a=n(52),s=n(172),u=n(3),c=n(570),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.coursesProvider=e,this.utils=t,this.courseCompletionProvider=n,this.translate=o,this.popoverCtrl=r,this.sitesProvider=i}return e.prototype.getCoursesForPopover=function(e){var t=this;return this.coursesProvider.getUserCourses(!1).then(function(n){n.unshift({id:-1,fullname:t.translate.instant("core.fulllistofcourses"),category:-1});var o;if(e){var r=n.find(function(t){return t.id==e});r&&(o=r.category)}return{courses:n,categoryId:o}})},e.prototype.loadCourseExtraInfo=function(e,t,n){void 0===n&&(n=!1),t?(e.displayname=t.displayname,e.categoryname=n?t.categoryname:null,e.courseImage=!(!t.overviewfiles||!t.overviewfiles[0])&&t.overviewfiles[0].fileurl):(delete e.displayname,e.courseImage=!1)},e.prototype.loadCoursesExtraInfo=function(e,t){var n=this;if(void 0===t&&(t=!1),!e.length)return Promise.resolve();var o={},r=!1,i=this.sitesProvider.getCurrentSite(),l=[],a=[];if(i.isVersionGreaterEqualThan("3.8")&&l.push(i.getConfig().then(function(e){for(var t=0;t<10;t++)a[t]=e["core_admin_coursecolor"+(t+1)]||null}).catch(function(){})),this.coursesProvider.isGetCoursesByFieldAvailable()&&(t||void 0===e[0].overviewfiles&&void 0===e[0].displayname)){var s=e.map(function(e){return e.id}).join(",");r=!0,l.push(this.coursesProvider.getCoursesByField("ids",s).then(function(e){o=n.utils.arrayToObject(e,"id")}))}return Promise.all(l).then(function(){e.forEach(function(e){n.loadCourseExtraInfo(e,r?o[e.id]:e,t),e.courseImage||(e.colorNumber=e.id%10,e.color=a.length&&a[e.colorNumber])})})},e.prototype.getUserCoursesWithOptions=function(e,t,n,o){var r=this;return void 0===e&&(e="fullname"),void 0===t&&(t=0),void 0===o&&(o=!1),this.coursesProvider.getUserCourses().then(function(i){var l=[],a=i.map(function(e){return e.id});return r.coursesProvider.canGetAdminAndNavOptions()&&l.push(r.coursesProvider.getCoursesAdminAndNavOptions(a).then(function(e){i.forEach(function(t){t.navOptions=e.navOptions[t.id],t.admOptions=e.admOptions[t.id]})})),l.push(r.loadCoursesExtraInfo(i,o)),Promise.all(l).then(function(){if(i.length<=0)return[];switch(n){case"isfavourite":i=i.filter(function(e){return!!e.isfavourite})}switch(e){case"fullname":i.sort(function(e,t){var n=e.fullname.toLowerCase(),o=t.fullname.toLowerCase();return n.localeCompare(o)});break;case"lastaccess":i.sort(function(e,t){return t.lastaccess-e.lastaccess});break;case"timemodified":i.sort(function(e,t){return t.timemodified-e.timemodified})}return i=t>0?i.slice(0,t):i,Promise.all(i.map(function(e){return void 0!==e.completed?Promise.resolve(e):void 0!==e.enablecompletion&&0==e.enablecompletion?Promise.resolve(e):r.courseCompletionProvider.getCompletion(e.id).catch(function(){}).then(function(t){return e.completed=t&&t.completed,e})}))})})},e.prototype.selectCourse=function(e,t,n){var o=this;return new Promise(function(r,i){var l=o.popoverCtrl.create(c.a,{courses:t,courseId:n});l.onDidDismiss(function(e){r(e?{courseId:e.id,categoryId:e.category}:{})}),l.present({ev:e})})},e=d([Object(o.A)(),f("design:paramtypes",[a.a,i.a,s.a,u.c,r.w,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(57),i=n(1),l=n(11),a=n(24),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,n,o,r){this.fileProvider=e,this.sitesProvider=n,this.textUtils=o,this.timeUtils=r,this.siteSchema={name:"AddonModWorkshopOfflineProvider",version:1,tables:[{name:t.SUBMISSIONS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"submissionid",type:"INTEGER"},{name:"action",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"title",type:"TEXT"},{name:"content",type:"TEXT"},{name:"attachmentsid",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["workshopid","submissionid","action"]},{name:t.ASSESSMENTS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"assessmentid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"inputdata",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["workshopid","assessmentid"]},{name:t.EVALUATE_SUBMISSIONS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"submissionid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"feedbacktext",type:"TEXT"},{name:"published",type:"INTEGER"},{name:"gradeover",type:"TEXT"}],primaryKeys:["workshopid","submissionid"]},{name:t.EVALUATE_ASSESSMENTS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"assessmentid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"feedbacktext",type:"TEXT"},{name:"weight",type:"INTEGER"},{name:"gradinggradeover",type:"TEXT"}],primaryKeys:["workshopid","assessmentid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getAllWorkshops=function(e){var t=[this.getAllSubmissions(e),this.getAllAssessments(e),this.getAllEvaluateSubmissions(e),this.getAllEvaluateAssessments(e)];return Promise.all(t).then(function(e){var t={};return e.forEach(function(e){e.forEach(function(e){t[e.workshopid]=!0})}),Object.keys(t).map(function(e){return parseInt(e,10)})})},e.prototype.hasWorkshopOfflineData=function(e,t){var n=[this.getSubmissions(e,t),this.getAssessments(e,t),this.getEvaluateSubmissions(e,t),this.getEvaluateAssessments(e,t)];return Promise.all(n).then(function(e){return e.some(function(e){return e&&e.length})}).catch(function(){return!1})},e.prototype.deleteSubmissionAction=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={workshopid:e,submissionid:n,action:o};return r.getDb().deleteRecords(t.SUBMISSIONS_TABLE,i)})},e.prototype.deleteAllSubmissionActions=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:e,submissionid:n};return o.getDb().deleteRecords(t.SUBMISSIONS_TABLE,r)})},e.prototype.getAllSubmissions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.SUBMISSIONS_TABLE).then(function(e){return e.forEach(n.parseSubmissionRecord.bind(n)),e})})},e.prototype.getSubmissions=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={workshopid:e};return n.getDb().getRecords(t.SUBMISSIONS_TABLE,r).then(function(e){return e.forEach(o.parseSubmissionRecord.bind(o)),e})})},e.prototype.getSubmissionActions=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e,submissionid:n};return o.getDb().getRecords(t.SUBMISSIONS_TABLE,i).then(function(e){return e.forEach(r.parseSubmissionRecord.bind(r)),e})})},e.prototype.getSubmissionAction=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={workshopid:e,submissionid:n,action:o};return r.getDb().getRecord(t.SUBMISSIONS_TABLE,l).then(function(e){return i.parseSubmissionRecord(e),e})})},e.prototype.saveSubmission=function(e,n,o,r,i,l,a,s){var u=this;return this.sitesProvider.getSite(s).then(function(s){var c=u.timeUtils.timestamp(),d={workshopid:e,courseid:n,title:o,content:r,attachmentsid:JSON.stringify(i),action:a,submissionid:l||-c,timemodified:c};return s.getDb().insertRecord(t.SUBMISSIONS_TABLE,d)})},e.prototype.parseSubmissionRecord=function(e){e.attachmentsid=this.textUtils.parseJSON(e.attachmentsid)},e.prototype.deleteAssessment=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:e,assessmentid:n};return o.getDb().deleteRecords(t.ASSESSMENTS_TABLE,r)})},e.prototype.getAllAssessments=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.ASSESSMENTS_TABLE).then(function(e){return e.forEach(n.parseAssessmentRecord.bind(n)),e})})},e.prototype.getAssessments=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={workshopid:e};return n.getDb().getRecords(t.ASSESSMENTS_TABLE,r).then(function(e){return e.forEach(o.parseAssessmentRecord.bind(o)),e})})},e.prototype.getAssessment=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e,assessmentid:n};return o.getDb().getRecord(t.ASSESSMENTS_TABLE,i).then(function(e){return r.parseAssessmentRecord(e),e})})},e.prototype.saveAssessment=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={workshopid:e,courseid:o,inputdata:JSON.stringify(r),assessmentid:n,timemodified:l.timeUtils.timestamp()};return i.getDb().insertRecord(t.ASSESSMENTS_TABLE,a)})},e.prototype.parseAssessmentRecord=function(e){e.inputdata=this.textUtils.parseJSON(e.inputdata)},e.prototype.deleteEvaluateSubmission=function(e,n,o){var r={workshopid:e,submissionid:n};return this.sitesProvider.getSite(o).then(function(e){return e.getDb().deleteRecords(t.EVALUATE_SUBMISSIONS_TABLE,r)})},e.prototype.getAllEvaluateSubmissions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.EVALUATE_SUBMISSIONS_TABLE).then(function(e){return e.forEach(n.parseEvaluateSubmissionRecord.bind(n)),e})})},e.prototype.getEvaluateSubmissions=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={workshopid:e};return n.getDb().getRecords(t.EVALUATE_SUBMISSIONS_TABLE,r).then(function(e){return e.forEach(o.parseEvaluateSubmissionRecord.bind(o)),e})})},e.prototype.getEvaluateSubmission=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e,submissionid:n};return o.getDb().getRecord(t.EVALUATE_SUBMISSIONS_TABLE,i).then(function(e){return r.parseEvaluateSubmissionRecord(e),e})})},e.prototype.saveEvaluateSubmission=function(e,n,o,r,i,l,a){var s=this;return this.sitesProvider.getSite(a).then(function(a){var u={workshopid:e,courseid:o,submissionid:n,timemodified:s.timeUtils.timestamp(),feedbacktext:r,published:Number(i),gradeover:JSON.stringify(l)};return a.getDb().insertRecord(t.EVALUATE_SUBMISSIONS_TABLE,u)})},e.prototype.parseEvaluateSubmissionRecord=function(e){e.published=Boolean(e.published),e.gradeover=this.textUtils.parseJSON(e.gradeover)},e.prototype.deleteEvaluateAssessment=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:e,assessmentid:n};return o.getDb().deleteRecords(t.EVALUATE_ASSESSMENTS_TABLE,r)})},e.prototype.getAllEvaluateAssessments=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.EVALUATE_ASSESSMENTS_TABLE).then(function(e){return e.forEach(n.parseEvaluateAssessmentRecord.bind(n)),e})})},e.prototype.getEvaluateAssessments=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={workshopid:e};return n.getDb().getRecords(t.EVALUATE_ASSESSMENTS_TABLE,r).then(function(e){return e.forEach(o.parseEvaluateAssessmentRecord.bind(o)),e})})},e.prototype.getEvaluateAssessment=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e,assessmentid:n};return o.getDb().getRecord(t.EVALUATE_ASSESSMENTS_TABLE,i).then(function(e){return r.parseEvaluateAssessmentRecord(e),e})})},e.prototype.saveEvaluateAssessment=function(e,n,o,r,i,l,a){var s=this;return this.sitesProvider.getSite(a).then(function(a){var u={workshopid:e,courseid:o,assessmentid:n,timemodified:s.timeUtils.timestamp(),feedbacktext:r,weight:i,gradinggradeover:JSON.stringify(l)};return a.getDb().insertRecord(t.EVALUATE_ASSESSMENTS_TABLE,u)})},e.prototype.parseEvaluateAssessmentRecord=function(e){e.gradinggradeover=this.textUtils.parseJSON(e.gradinggradeover)},e.prototype.getWorkshopFolder=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=n.fileProvider.getSiteFolder(t.getId());return n.textUtils.concatenatePaths(o,"offlineworkshop/"+e+"/")})},e.prototype.getSubmissionFolder=function(e,t,n,o){var r=this;return this.getWorkshopFolder(e,o).then(function(e){return r.textUtils.concatenatePaths(e+="submission/",n?"update_"+t:"add")})},e.prototype.getAssessmentFolder=function(e,t,n){var o=this;return this.getWorkshopFolder(e,n).then(function(e){return e+="assessment/",o.textUtils.concatenatePaths(e,String(t))})},e.SUBMISSIONS_TABLE="addon_mod_workshop_submissions",e.ASSESSMENTS_TABLE="addon_mod_workshop_assessments",e.EVALUATE_SUBMISSIONS_TABLE="addon_mod_workshop_evaluate_submissions",e.EVALUATE_ASSESSMENTS_TABLE="addon_mod_workshop_evaluate_assessments",e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(98),i=n(6),l=n(1),a=n(9),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,"CoreUserProfileFieldDelegate",t,n,o)||this;return r.loggerProvider=t,r.sitesProvider=n,r.eventsProvider=o,r.handlerNameProperty="type",r}return s(t,e),t.prototype.getComponent=function(e,t,n){var o,r=this,i=t.type||t.datatype;return o=n?this.executeFunction(i,"getComponent",[e]):this.executeFunctionOnEnabled(i,"getComponent",[e]),Promise.resolve(o).catch(function(e){r.logger.error("Error getting component for field",i,e)})},t.prototype.getDataForField=function(e,t,n,o){var r=e.type||e.datatype,i=this.getHandler(r,!t);if(i){var l="profile_field_"+e.shortname;if(i.getData)return Promise.resolve(i.getData(e,t,n,o));if(e.shortname&&void 0!==o[l])return Promise.resolve({type:r,name:l,value:o[l]})}return Promise.reject(null)},t.prototype.getDataForFields=function(e,t,n,o){var r=this;void 0===t&&(t=!1),void 0===n&&(n="");var i=[],l=[];return e?(e.forEach(function(e){l.push(r.getDataForField(e,t,n,o).then(function(e){e&&i.push(e)}).catch(function(){}))}),Promise.all(l).then(function(){return i})):Promise.resolve([])},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(98),i=n(9),l=n(6),a=n(1),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,"AddonWorkshopAssessmentStrategyDelegate",t,n,o)||this;return r.loggerProvider=t,r.sitesProvider=n,r.eventsProvider=o,r.handlerNameProperty="strategyName",r}return s(t,e),t.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},t.prototype.getComponentForPlugin=function(e,t){return this.executeFunctionOnEnabled(t,"getComponent",[e])},t.prototype.getOriginalValues=function(e,t,n){return Promise.resolve(this.executeFunctionOnEnabled(e,"getOriginalValues",[t,n])||[])},t.prototype.hasDataChanged=function(e,t,n){return this.executeFunctionOnEnabled(e.strategy,"hasDataChanged",[t,n])||!1},t.prototype.prepareAssessmentData=function(e,t,n){return Promise.resolve(this.executeFunctionOnEnabled(e,"prepareAssessmentData",[t,n]))},t=u([Object(o.A)(),c("design:paramtypes",[l.a,a.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(155),l=n(4),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},d=function(){function e(e,t,n,r,i,l,a){this.compileProvider=e,this.cdr=t,this.navCtrl=r,this.domUtils=l,this.utils=a,this.extraImports=[],this.extraProviders=[],this.created=new o.v,this.compiling=new o.v,this.creatingComponent=!1,this.pendingCalls={},this.element=n.nativeElement,this.differ=i.find([]).create()}return e.prototype.ngDoCheck=function(){if(this.componentInstance&&!this.creatingComponent){var e=this.differ.diff(this.jsData);e&&(this.setInputData(),this.componentInstance.ngOnChanges&&this.componentInstance.ngOnChanges(this.domUtils.createChangesFromKeyValueDiff(e)))}},e.prototype.ngOnChanges=function(e){var t=this;(e.text||e.javascript||e.forceCompile&&this.utils.isTrueOrOne(this.forceCompile))&&this.text&&(this.creatingComponent=!0,this.compiling.emit(!0),this.compileProvider.createAndCompileComponent(this.text,this.getComponentClass(),this.extraImports).then(function(e){t.componentRef&&t.componentRef.destroy(),e&&(t.componentRef=t.container.createComponent(e),t.created.emit(t.componentRef.instance)),t.loaded=!0}).catch(function(e){t.domUtils.showErrorModal(e),t.loaded=!0}).finally(function(){t.creatingComponent=!1,t.compiling.emit(!1)}))},e.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.destroy()},e.prototype.getComponentClass=function(){var e=this;return function(){function t(){e.componentInstance=this,this.dataObject={},this.dataArray=[],e.compileProvider.injectLibraries(this,e.extraProviders),this.ChangeDetectorRef=e.cdr,this.NavController=e.navCtrl,this.componentContainer=e.element,e.setInputData()}return t.prototype.ngOnInit=function(){e.javascript&&e.compileProvider.executeJavascript(this,e.javascript);for(var t in e.pendingCalls){var n=e.pendingCalls[t];"function"==typeof this[t]?Promise.resolve(this[t].apply(this,n.params)).then(n.defer.resolve).catch(n.defer.reject):n.defer.resolve()}e.pendingCalls={}},t.prototype.ngAfterContentInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t}()},e.prototype.setInputData=function(){if(this.componentInstance)for(var e in this.jsData)this.componentInstance[e]=this.jsData[e]},e.prototype.callComponentFunction=function(e,t,n){if(void 0===n&&(n=!0),this.componentInstance){if("function"==typeof this.componentInstance[e])return this.componentInstance[e].apply(this.componentInstance,t)}else if(n){if(this.pendingCalls[e])return this.pendingCalls[e].params=t,this.pendingCalls[e].defer.promise;var o=this.utils.promiseDefer();return this.pendingCalls[e]={params:t,defer:o},o.promise}},s([Object(o.D)(),u("design:type",String)],e.prototype,"text",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"javascript",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"jsData",void 0),s([Object(o.D)(),u("design:type",Array)],e.prototype,"extraImports",void 0),s([Object(o.D)(),u("design:type",Array)],e.prototype,"extraProviders",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"forceCompile",void 0),s([Object(o.O)(),u("design:type",o.v)],e.prototype,"created",void 0),s([Object(o.O)(),u("design:type",o.v)],e.prototype,"compiling",void 0),s([Object(o._9)("dynamicComponent",{read:o._11}),u("design:type",o._11)],e.prototype,"container",void 0),e=s([Object(o.m)({selector:"core-compile-html",template:'<core-loading [hideUntil]="loaded"><ng-container #dynamicComponent></ng-container></core-loading>'}),c(3,Object(o.N)()),u("design:paramtypes",[i.a,o.j,o.t,r.s,o.F,l.a,a.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(4),l=n(2),a=n(11),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){void 0===t&&(t="AddonBlockComponent"),this.domUtils=e.get(i.a),this.utils=e.get(l.a),this.textUtils=e.get(a.a);var n=e.get(r.a);this.logger=n.getInstance(t)}return e.prototype.ngOnInit=function(){var e=this;this.loaded=!1,this.block.configs&&this.block.configs.length>0&&(this.block.configs.map(function(t){return t.value=e.textUtils.parseJSON(t.value),t}),this.block.configs=this.utils.arrayToObject(this.block.configs,"name")),this.loadContent()},e.prototype.doRefresh=function(e,t,n){return void 0===n&&(n=!1),this.loaded?this.refreshContent(n).finally(function(){e&&e.complete(),t&&t()}):Promise.resolve()},e.prototype.refreshContent=function(e){var t=this;void 0===e&&(e=!1);var n;try{n=this.invalidateContent()}catch(e){this.logger.error(e),n=Promise.resolve()}return n.catch(function(){}).then(function(){return t.loadContent(!0,e)})},e.prototype.invalidateContent=function(){return Promise.resolve()},e.prototype.loadContent=function(e,t){var n=this;void 0===t&&(t=!1);var o;try{o=this.fetchContent(e)}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(e){n.domUtils.showErrorModalDefault(e,n.fetchContentDefaultError,!0)}).finally(function(){n.loaded=!0})},e.prototype.fetchContent=function(e){return Promise.resolve()},s([Object(o.D)(),u("design:type",String)],e.prototype,"title",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"block",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"contextLevel",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"instanceId",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"link",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"linkParams",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(4),i=n(11),l=n(138),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.injector=n,this.logger=e.getInstance(t),this.questionHelper=n.get(l.a),this.domUtils=n.get(r.a),this.textUtils=n.get(i.a),this.realElement=n.get(o.t).nativeElement}return e.prototype.initCalculatedComponent=function(){var e=this.initInputTextComponent();if(e){var t={},n=e.querySelector("select[name*=unit]"),o=n&&Array.from(n.querySelectorAll("option"));if(n&&o&&o.length){t.id=n.id,t.name=n.name,t.disabled=n.disabled,t.options=[];for(var r in o){var i=o[r];if(void 0===i.value)return this.logger.warn("Aborting because couldn't find input.",this.question.name),this.questionHelper.showComponentError(this.onAbort);var l={value:i.value,label:i.innerHTML};i.selected&&(t.selected=l.value),t.options.push(l)}t.selected||(t.selected=t.options[0].value);var a=e.querySelector('label[for="'+n.id+'"]');t.accessibilityLabel=a&&a.innerHTML,this.question.select=t;var s=e.querySelector('input[type="text"][name*=answer]');return this.question.selectFirst=e.innerHTML.indexOf(s.outerHTML)>e.innerHTML.indexOf(n.outerHTML),e}var u=Array.from(e.querySelectorAll('input[type="radio"]'));if(!u.length)return e;this.question.options=[];for(var r in u){var c=u[r],d=e.querySelector('label[for="'+(l={id:c.id,name:c.name,value:c.value,checked:c.checked,disabled:c.disabled}).id+'"]');if(this.question.optionsName=l.name,!d||(l.text=d.innerText,void 0===l.name||void 0===l.value||void 0===l.text))return this.logger.warn("Aborting because of an error parsing options.",this.question.name,l.name),this.questionHelper.showComponentError(this.onAbort);c.checked&&(this.question.unit=l.value),this.question.options.push(l)}var f=e.querySelector('input[type="text"][name*=answer]');this.question.optionsFirst=e.innerHTML.indexOf(f.outerHTML)>e.innerHTML.indexOf(u[0].outerHTML)}},e.prototype.initComponent=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);this.realElement.classList.add("core-question-container");var e=this.domUtils.convertToElement(this.question.html);return this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),void 0===this.question.text?(this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort)):e},e.prototype.initEssayComponent=function(){var e=this.initComponent();if(e){var t=e.querySelector("textarea[name*=_answer]");if(this.question.allowsAttachments=!!e.querySelector("div[id*=filemanager]"),this.question.isMonospaced=!!e.querySelector(".qtype_essay_monospaced"),this.question.isPlainText=this.question.isMonospaced||!!e.querySelector(".qtype_essay_plain"),this.question.hasDraftFiles=this.questionHelper.hasDraftFileUrls(e.innerHTML),t){var n=e.querySelector('input[type="hidden"][name*=answerformat]'),o=t.innerHTML;this.question.textarea={id:t.id,name:t.name,text:o?this.textUtils.decodeHTML(o):""},n&&(this.question.formatInput={name:n.name,value:n.value})}else this.question.answer=this.domUtils.getContentsOfElement(e,".qtype_essay_response"),this.question.attachments=this.questionHelper.getQuestionAttachmentsFromHtml(this.domUtils.getContentsOfElement(e,".attachments"))}},e.prototype.initOriginalTextComponent=function(e){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var t=this.domUtils.convertToElement(this.question.html),n=t.querySelector(e);if(!n)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.domUtils.removeElement(n,"input[name*=sequencecheck]"),this.domUtils.removeElement(n,".validationerror"),this.questionHelper.replaceCorrectnessClasses(t),this.questionHelper.replaceFeedbackClasses(t),this.questionHelper.treatCorrectnessIcons(t),this.question.text=n.innerHTML},e.prototype.initInputTextComponent=function(){var e=this.initComponent();if(e){var t=e.querySelector('input[type="text"][name*=answer]');if(!t)return this.logger.warn("Aborting because couldn't find input.",this.question.name),this.questionHelper.showComponentError(this.onAbort);if(this.question.input={id:t.id,name:t.name,value:t.value,readOnly:t.readOnly,isInline:!!this.domUtils.closest(t,".qtext")},t.classList.contains("incorrect")?(this.question.input.correctClass="core-question-incorrect",this.question.input.correctIcon="fa-remove",this.question.input.correctIconColor="danger"):t.classList.contains("correct")?(this.question.input.correctClass="core-question-correct",this.question.input.correctIcon="fa-check",this.question.input.correctIconColor="success"):t.classList.contains("partiallycorrect")?(this.question.input.correctClass="core-question-partiallycorrect",this.question.input.correctIcon="fa-check-square",this.question.input.correctIconColor="warning"):(this.question.input.correctClass="",this.question.input.correctIcon="",this.question.input.correctIconColor=""),this.question.input.isInline){var n=e.querySelector(".qtext");this.questionHelper.replaceCorrectnessClasses(n),this.questionHelper.treatCorrectnessIcons(n),this.question.text=n.innerHTML}}return e},e.prototype.initMatchComponent=function(){var e=this.initComponent();if(e){var t=Array.from(e.querySelectorAll("table.answer tr"));if(!t||!t.length)return this.logger.warn("Aborting because couldn't find any row.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.rows=[];for(var n in t){var o=t[n],r={},i=Array.from(o.querySelectorAll("td"));if(!i||i.length<2)return this.logger.warn("Aborting because couldn't the right columns.",this.question.name),this.questionHelper.showComponentError(this.onAbort);r.text=i[0].innerHTML;var l=i[1].querySelector("select"),a=Array.from(i[1].querySelectorAll("option"));if(!l||!a||!a.length)return this.logger.warn("Aborting because couldn't find select or options.",this.question.name),this.questionHelper.showComponentError(this.onAbort);r.id=l.id,r.name=l.name,r.disabled=l.disabled,r.selected=!1,r.options=[],i[1].className.indexOf("incorrect")>=0?r.isCorrect=0:i[1].className.indexOf("correct")>=0&&(r.isCorrect=1);for(var s in a){var u=a[s];if(void 0===u.value)return this.logger.warn("Aborting because couldn't find the value of an option.",this.question.name),this.questionHelper.showComponentError(this.onAbort);var c={value:u.value,label:u.innerHTML,selected:u.selected};c.selected&&(r.selected=c.value),r.options.push(c)}var d=i[1].querySelector("label.accesshide");r.accessibilityLabel=d&&d.innerHTML,this.question.rows.push(r)}this.question.loaded=!0}return e},e.prototype.initMultichoiceComponent=function(){var e=this.initComponent();if(e){this.question.prompt=this.domUtils.getContentsOfElement(e,".prompt");var t=Array.from(e.querySelectorAll('input[type="radio"]'));if(!(t&&t.length||(this.question.multi=!0,(t=Array.from(e.querySelectorAll('input[type="checkbox"]')))&&t.length)))return this.logger.warn("Aborting because of no radio and checkbox found.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.options=[],this.question.disabled=!0;for(var n in t){var o=t[n],r={id:o.id,name:o.name,value:o.value,checked:o.checked,disabled:o.disabled},i=o.parentElement;if("-1"!=r.value){this.question.optionsName=r.name,this.question.disabled=this.question.disabled&&o.disabled;var l=e.querySelector('label[for="'+r.id+'"]');if(!l||(r.text=l.innerHTML,void 0===r.name||void 0===r.value||void 0===r.text))return this.logger.warn("Aborting because of an error parsing options.",this.question.name,r.name),this.questionHelper.showComponentError(this.onAbort);if(o.checked&&(this.question.multi||(this.question.singleChoiceModel=r.value),i)){i&&i.className.indexOf("incorrect")>=0?r.isCorrect=0:i&&i.className.indexOf("correct")>=0&&(r.isCorrect=1);var a=i.querySelector(".specificfeedback");a&&(r.feedback=a.innerHTML)}this.question.options.push(r)}}}return e},a([Object(o.D)(),s("design:type",Object)],e.prototype,"question",void 0),a([Object(o.D)(),s("design:type",String)],e.prototype,"component",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"componentId",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"attemptId",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"offlineEnabled",void 0),a([Object(o.D)(),s("design:type",String)],e.prototype,"contextLevel",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"contextInstanceId",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"courseId",void 0),a([Object(o.O)(),s("design:type",o.v)],e.prototype,"buttonClicked",void 0),a([Object(o.O)(),s("design:type",o.v)],e.prototype,"onAbort",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(6),l=n(4),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},c=function(){function e(e,t,n,o,r,i,l){this.factoryResolver=t,this.navCtrl=o,this.cdr=r,this.element=i,this.domUtils=l,this.logger=e.getInstance("CoreDynamicComponent"),this.differ=n.find([]).create()}return Object.defineProperty(e.prototype,"dynamicComponent",{set:function(e){this.container=e,this.createComponent()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.createComponent()},e.prototype.ngOnChanges=function(e){e.component&&!this.component?(this.lastComponent=void 0,this.instance=void 0,this.container&&this.container.clear()):!e.component||this.instance&&this.component==this.lastComponent||this.createComponent()},e.prototype.ngDoCheck=function(){if(this.instance){var e=this.differ.diff(this.data);e&&(this.setInputData(),this.instance.ngOnChanges&&this.instance.ngOnChanges(this.domUtils.createChangesFromKeyValueDiff(e)))}},e.prototype.callComponentFunction=function(e,t){if(this.instance&&"function"==typeof this.instance[e])return this.instance[e].apply(this.instance,t)},e.prototype.createComponent=function(){if(this.lastComponent=this.component,!this.component||!this.container)return!1;if(this.instance)return!0;if(this.component instanceof o.p)this.container.insert(this.component.hostView),this.instance=this.component.instance,this.instance.ChangeDetectorRef=this.cdr,this.instance.NavController=this.navCtrl,this.instance.componentContainer=this.element.nativeElement;else try{var e=this.factoryResolver.resolveComponentFactory(this.component),t=this.container.createComponent(e);this.instance=t.instance}catch(e){return this.logger.error("Error creating component",e),!1}return this.setInputData(),!0},e.prototype.setInputData=function(){for(var e in this.data)this.instance[e]=this.data[e]},a([Object(o.D)(),s("design:type",Object)],e.prototype,"component",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"data",void 0),a([Object(o._9)("dynamicComponent",{read:o._11}),s("design:type",o._11),s("design:paramtypes",[o._11])],e.prototype,"dynamicComponent",null),e=a([Object(o.m)({selector:"core-dynamic-component",templateUrl:"core-dynamic-component.html"}),u(3,Object(o.N)()),s("design:paramtypes",[i.a,o.o,o.F,r.s,o.j,o.t,l.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(4),a=n(10),s=n(126),u=n(40),c=n(116),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,r,i,l,a){var s=this;this.content=t,this.domUtils=n,this.appProvider=r,this.configProvider=i,this.selectedIndex=0,this.hideUntil=!0,this.parentScrollable=!1,this.ionChange=new o.v,this.tabs=[],this.maxSlides=3,this.slidesShown=this.maxSlides,this.numTabsShown=0,this.direction="ltr",this.description="",this.lastScroll=0,this.initialized=!1,this.afterViewInitTriggered=!1,this.tabsShown=!0,this.isDestroyed=!1,this.isCurrentView=!0,this.shouldSlideToInitial=!1,this.hasSliddenToInitial=!1,this.selectHistory=[],this.isInTransition=!1,this.tabBarElement=e.nativeElement,this.direction=l.isRTL?"rtl":"ltr",this.languageChangedSubscription=a.onLangChange.subscribe(function(e){setTimeout(function(){s.direction=l.isRTL?"rtl":"ltr"})})}return t=e,e.prototype.ngOnInit=function(){this.originalTabsContainer=this.originalTabsRef.nativeElement,this.topTabsElement=this.topTabs.nativeElement},e.prototype.ngAfterViewInit=function(){this.isDestroyed||(this.afterViewInitTriggered=!0,!this.initialized&&this.hideUntil&&this.initializeTabs(),this.resizeFunction=this.calculateSlides.bind(this),window.addEventListener("resize",this.resizeFunction))},e.prototype.ngOnChanges=function(e){var t=this;!this.initialized&&this.hideUntil&&this.afterViewInitTriggered&&setTimeout(function(){t.initializeTabs()})},e.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.calculateSlides(),this.registerBackButtonAction()},e.prototype.registerBackButtonAction=function(){var e=this;this.unregisterBackButtonAction=this.appProvider.registerBackButtonAction(function(){if(e.selectHistory.length>1){var t=e.selectHistory[e.selectHistory.length-2];return e.selectHistory=e.selectHistory.filter(function(n){return e.selected!=n&&t!=n}),e.selectTab(t),!0}return e.selected!=e.firstSelectedTab&&(e.selectHistory=[],e.selectTab(e.firstSelectedTab),!0)},750)},e.prototype.ionViewDidLeave=function(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction(),this.isCurrentView=!1},e.prototype.addTab=function(e){var t=this;-1==this.getIndex(e)&&(this.tabs.push(e),this.sortTabs(),this.calculateSlides(),this.initialized&&this.tabs.length>1&&0==this.tabBarHeight&&setTimeout(function(){t.calculateTabBarHeight()},50))},e.prototype.calculateSlides=function(){var e=this;this.isCurrentView&&this.tabsShown&&this.initialized&&this.calculateMaxSlides().then(function(){e.updateSlides()})},e.prototype.calculateTabBarHeight=function(){this.tabBarHeight=this.topTabsElement.offsetHeight,this.tabsShown?(this.topTabsElement.style.transform="translateY(-"+this.lastScroll+"px)",this.originalTabsContainer.style.transform="translateY(-"+this.lastScroll+"px)",this.originalTabsContainer.style.paddingBottom=this.tabBarHeight-this.lastScroll+"px"):this.tabBarElement.classList.add("tabs-hidden")},e.prototype.getIndex=function(e){for(var t=0;t<this.tabs.length;t++){var n=this.tabs[t];if(n===e||void 0!==n.id&&n.id===e.id)return t}return-1},e.prototype.getSelected=function(){return this.tabs[this.selected]},e.prototype.initializeTabs=function(){var e=this.selectedIndex||0,t=this.tabs[e];if(t&&t.enabled&&t.show||(t=this.tabs.find(function(t,n){return!(!t.enabled||!t.show)&&(e=n,!0)})),t&&(this.firstSelectedTab=e,this.selectTab(e)),this.calculateTabBarHeight(),this.content)if(this.parentScrollable)this.originalTabsContainer.classList.add("no-scroll");else{var n=this.content.getScrollElement();n&&n.classList.add("no-scroll")}this.initialized=!0,this.calculateSlides()},e.prototype.slideChanged=function(){var e=this.slides.getActiveIndex();this.isInTransition=!1,this.slidesShown>=this.numTabsShown?(this.showPrevButton=!1,this.showNextButton=!1):void 0!==e?(this.showPrevButton=e>0,this.showNextButton=e<this.numTabsShown-this.slidesShown):(this.showPrevButton=!1,this.showNextButton=this.numTabsShown>this.slidesShown),this.shouldSlideToInitial&&e!=this.selected&&(this.shouldSlideToInitial=!1),this.updateAriaHidden()},e.prototype.updateSlides=function(){var e=this;if(this.numTabsShown=this.tabs.reduce(function(e,t){return t.show?e+1:e},0),this.slidesShown=Math.min(this.maxSlides,this.numTabsShown),this.slideChanged(),this.calculateTabBarHeight(),this.slides.update(),this.slides.resize(),!this.hasSliddenToInitial&&this.selected&&this.selected>=this.slidesShown)return this.hasSliddenToInitial=!0,this.shouldSlideToInitial=!0,void setTimeout(function(){e.shouldSlideToInitial&&(e.slides.slideTo(e.selected,0),e.shouldSlideToInitial=!1,e.updateAriaHidden())},400);this.selected&&(this.hasSliddenToInitial=!0),setTimeout(function(){e.updateAriaHidden()},400)},e.prototype.calculateMaxSlides=function(){var e=this;return new Promise(function(n,o){if(e.maxSlides=3,e.slides){var r=e.domUtils.getElementWidth(e.slides.getNativeElement())||e.slides.renderedWidth;r?e.configProvider.get(u.a.SETTINGS_FONT_SIZE,c.a.font_sizes[0].toString()).then(function(o){e.maxSlides=Math.floor(r/(o/c.a.font_sizes[0]*t.MIN_TAB_WIDTH)),n()}):n()}else n()})},e.prototype.slideNext=function(){if(this.showNextButton){if(this.isInTransition)return;if(this.slides.isBeginning())this.slides.slideTo(this.maxSlides);else{var e=this.slides.getActiveIndex();if(void 0!==e){var t=e+this.maxSlides;this.isInTransition=!0,this.slides.slideTo(t<this.numTabsShown?t:this.numTabsShown-1)}}}},e.prototype.slidePrev=function(){if(this.showPrevButton){if(this.isInTransition)return;if(this.slides.isEnd())this.slides.slideTo(this.numTabsShown-2*this.maxSlides);else{var e=this.slides.getActiveIndex();if(void 0!==e){var t=e-this.maxSlides;this.isInTransition=!0,this.slides.slideTo(t>=0?t:0)}}}},e.prototype.showHideTabs=function(e){if(this.tabBarHeight){var t=parseInt(e.scrollTop,10);if(0==t)return this.topTabsElement.style.transform="",this.originalTabsContainer.style.transform="",this.originalTabsContainer.style.paddingBottom=this.tabBarHeight+"px",this.tabBarElement.classList.remove("tabs-hidden"),void(this.tabsShown=!0);t!=this.lastScroll&&(this.tabsShown&&t>this.tabBarHeight?(this.tabsShown=!1,this.tabBarElement.classList.add("tabs-hidden")):!this.tabsShown&&t<=this.tabBarHeight&&(this.tabsShown=!0,this.tabBarElement.classList.remove("tabs-hidden"),this.calculateSlides()),this.tabsShown&&e.scrollHeight>e.clientHeight+(this.tabBarHeight-t)&&(this.topTabsElement.style.transform="translateY(-"+t+"px)",this.originalTabsContainer.style.transform="translateY(-"+t+"px)",this.originalTabsContainer.style.paddingBottom=this.tabBarHeight-t+"px"),this.lastScroll=parseInt(e.scrollTop,10))}},e.prototype.removeTab=function(e){var t=this.getIndex(e);this.tabs.splice(t,1),this.calculateSlides()},e.prototype.selectTab=function(e){if(e!=this.selected){(e<0||e>=this.tabs.length)&&(e=0);var t=this.getSelected(),n=this.tabs[e];n&&n.enabled&&n.show&&(t&&t.unselectTab(),this.selected&&(this.slides.slideTo(e),this.updateAriaHidden()),this.selectHistory.push(e),this.selected=e,n.selectTab(),this.ionChange.emit(n))}},e.prototype.sortTabs=function(){var e=this;if(this.originalTabsContainer){var t=[];this.tabs.forEach(function(n,o){var r=Array.prototype.indexOf.call(e.originalTabsContainer.children,n.element);-1!=r&&(t[r]=n)}),this.tabs=t}},e.prototype.tabVisibilityChanged=function(){this.calculateSlides()},e.prototype.updateAriaHidden=function(){this.tabs.forEach(function(e,t){e.updateAriaHidden()})},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.MIN_TAB_WIDTH=107,d([Object(o.D)(),f("design:type",Object)],e.prototype,"selectedIndex",void 0),d([Object(o.D)(),f("design:type",Object)],e.prototype,"hideUntil",void 0),d([Object(o.D)(),f("design:type",Object)],e.prototype,"parentScrollable",void 0),d([Object(o.O)(),f("design:type",o.v)],e.prototype,"ionChange",void 0),d([Object(o._9)("originalTabs"),f("design:type",o.t)],e.prototype,"originalTabsRef",void 0),d([Object(o._9)("topTabs"),f("design:type",o.t)],e.prototype,"topTabs",void 0),d([Object(o._9)(r.B),f("design:type",r.B)],e.prototype,"slides",void 0),e=t=d([Object(o.m)({selector:"core-tabs",templateUrl:"core-tabs.html"}),f("design:paramtypes",[o.t,r.f,l.a,a.a,s.a,r.v,i.c])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,n){this.sitesProvider=e,this.utils=n,this.siteSchema={name:"CoreRatingOfflineProvider",version:1,tables:[{name:t.RATINGS_TABLE,columns:[{name:"component",type:"TEXT"},{name:"ratingarea",type:"TEXT"},{name:"contextlevel",type:"INTEGER"},{name:"instanceid",type:"INTEGER"},{name:"itemid",type:"INTEGER"},{name:"itemsetid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"scaleid",type:"INTEGER"},{name:"rating",type:"INTEGER"},{name:"rateduserid",type:"INTEGER"},{name:"aggregation",type:"INTEGER"}],primaryKeys:["component","ratingarea","contextlevel","instanceid","itemid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getRating=function(e,n,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var a={contextlevel:e,instanceid:n,component:o,ratingarea:r,itemid:i};return l.getDb().getRecord(t.RATINGS_TABLE,a)})},e.prototype.addRating=function(e,n,o,r,i,l,a,s,u,c,d,f){return this.sitesProvider.getSite(f).then(function(f){var p={component:e,ratingarea:n,contextlevel:o,instanceid:r,itemid:i,itemsetid:l,courseid:a,scaleid:s,rating:u,rateduserid:c,aggregation:d};return f.getDb().insertRecord(t.RATINGS_TABLE,p)})},e.prototype.deleteRating=function(e,n,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var a={component:e,ratingarea:n,contextlevel:o,instanceid:r,itemid:i};return l.getDb().deleteRecords(t.RATINGS_TABLE,a)})},e.prototype.getItemSets=function(e,n,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var a={component:e,ratingarea:n};return null!=o&&null!=r&&(a.contextlevel=o,a.instanceId=r),null!=i&&(a.itemSetId=i),l.getDb().getRecords(t.RATINGS_TABLE,a,void 0,"DISTINCT contextlevel, instanceid, itemsetid, courseid").then(function(t){return t.map(function(t){return{component:e,ratingArea:n,contextLevel:t.contextlevel,instanceId:t.instanceid,itemSetId:t.itemsetid,courseId:t.courseid}})})})},e.prototype.getRatings=function(e,n,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var a={component:e,ratingarea:n,contextlevel:o,instanceid:r,itemsetid:i};return l.getDb().getRecords(t.RATINGS_TABLE,a)})},e.prototype.hasRatings=function(e,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(l).then(function(l){var s={component:e,ratingarea:n};return null!=o&&null!=r&&(s.contextlevel=o,s.instanceId=r),null!=i&&(s.itemsetid=i),a.utils.promiseWorks(l.getDb().recordExists(t.RATINGS_TABLE,s))})},e.RATINGS_TABLE="rating_ratings",e=t=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(3),i=n(57),l=n(72),a=n(1),s=n(11),u=n(2),c=n(175),d=n(189),f=n(192),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,i,l,a,s){this.translate=e,this.fileProvider=t,this.uploaderProvider=n,this.sitesProvider=o,this.textUtils=r,this.utils=i,this.workshopProvider=l,this.workshopOffline=a,this.strategyDelegate=s}return e.prototype.getTask=function(e,t){for(var n in e)if(e[n].code==t)return e[n];return!1},e.prototype.isTaskDone=function(e,t){var n=this.getTask(e,t);return!n||!!n.completed},e.prototype.canSubmit=function(e,t,n){var o=e.useexamples&&e.examplesmode==c.a.EXAMPLES_BEFORE_SUBMISSION,r=t.canmanageexamples||e.examplesmode==c.a.EXAMPLES_VOLUNTARY||this.isTaskDone(n,"examples");return e.phase>c.a.PHASE_SETUP&&t.cansubmit&&(!o||r)},e.prototype.canAssess=function(e,t){return!(e.useexamples&&e.examplesmode==c.a.EXAMPLES_BEFORE_ASSESSMENT)||t.canmanageexamples},e.prototype.getUserSubmission=function(e,t){var n=this;return void 0===t&&(t=0),this.workshopProvider.getSubmissions(e).then(function(e){t=t||n.sitesProvider.getCurrentSiteUserId();for(var o in e)if(e[o].authorid==t)return e[o];return!1})},e.prototype.getSubmissionById=function(e,t,n){var o=this;return this.workshopProvider.getSubmission(e,t,n).catch(function(){return o.workshopProvider.getSubmissions(e,void 0,void 0,void 0,void 0,n).then(function(e){for(var n in e)if(e[n].id==t)return e[n];return!1})})},e.prototype.getReviewerAssessmentById=function(e,t,n,o){var r=this;return void 0===n&&(n=0),this.workshopProvider.getAssessment(e,t,o).catch(function(i){return r.workshopProvider.getReviewerAssessments(e,n,void 0,void 0,o).then(function(e){for(var n in e)if(e[n].id==t)return e[n];return Promise.reject(i)})}).then(function(n){return r.workshopProvider.getAssessmentForm(e,t,void 0,void 0,void 0,o).then(function(e){return n.form=e,n})})},e.prototype.getReviewerAssessments=function(e,t,n,o,r){var i=this;return void 0===t&&(t=0),void 0===n&&(n=!1),void 0===o&&(o=!1),r=r||this.sitesProvider.getCurrentSiteId(),this.workshopProvider.getReviewerAssessments(e,t,n,o,r).then(function(t){var n=t.map(function(t){return i.getSubmissionById(e,t.submissionid,r).then(function(e){t.submission=e})});return Promise.all(n).then(function(){return t})})},e.prototype.deleteSubmissionStoredFiles=function(e,t,n,o){var r=this;return this.workshopOffline.getSubmissionFolder(e,t,n,o).then(function(e){return r.fileProvider.removeDir(e).catch(function(){})})},e.prototype.storeSubmissionFiles=function(e,t,n,o,r){var i=this;return this.workshopOffline.getSubmissionFolder(e,t,n,r).then(function(e){return i.uploaderProvider.storeFilesToUpload(e,o)})},e.prototype.uploadOrStoreSubmissionFiles=function(e,t,n,o,r,i){return r?this.storeSubmissionFiles(e,t,o,n,i):this.uploaderProvider.uploadOrReuploadFiles(n,c.a.COMPONENT,e,i)},e.prototype.getStoredSubmissionFiles=function(e,t,n,o){var r=this;return this.workshopOffline.getSubmissionFolder(e,t,n,o).then(function(e){return r.uploaderProvider.getStoredFiles(e).catch(function(){return[]})})},e.prototype.getSubmissionFilesFromOfflineFilesObject=function(e,t,n,o,r){var i=this;return this.workshopOffline.getSubmissionFolder(t,n,o,r).then(function(t){return i.uploaderProvider.getStoredFilesFromOfflineFilesObject(e,t)})},e.prototype.deleteAssessmentStoredFiles=function(e,t,n){var o=this;return this.workshopOffline.getAssessmentFolder(e,t,n).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},e.prototype.storeAssessmentFiles=function(e,t,n,o){var r=this;return this.workshopOffline.getAssessmentFolder(e,t,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,n)})},e.prototype.uploadOrStoreAssessmentFiles=function(e,t,n,o,r){return o?this.storeAssessmentFiles(e,t,n,r):this.uploaderProvider.uploadOrReuploadFiles(n,c.a.COMPONENT,e,r)},e.prototype.getStoredAssessmentFiles=function(e,t,n){var o=this;return this.workshopOffline.getAssessmentFolder(e,t,n).then(function(e){return o.uploaderProvider.getStoredFiles(e).catch(function(){return[]})})},e.prototype.getAssessmentFilesFromOfflineFilesObject=function(e,t,n,o){var r=this;return this.workshopOffline.getAssessmentFolder(t,n,o).then(function(t){return r.uploaderProvider.getStoredFilesFromOfflineFilesObject(e,t)})},e.prototype.filterSubmissionActions=function(e,t){return e.filter(function(e){return t?e.submissionid==t:e.submissionid<0})},e.prototype.applyOfflineData=function(e,t){t.length&&!e&&(e={});var n,o=!0,r=!1;if(t.forEach(function(t){switch(t.action){case"add":e.id=t.submissionid,o=!1;case"update":e.title=t.title,e.content=t.content,e.title=t.title,e.courseid=t.courseid,e.submissionmodified=parseInt(t.timemodified,10)/1e3,e.offline=!0,r=t.attachmentsid,n=t.workshopid;break;case"delete":e.deleted=!0,e.submissionmodified=parseInt(t.timemodified,10)/1e3}}),t.length){if(r)return this.getSubmissionFilesFromOfflineFilesObject(r,n,e.id,o).then(function(t){return e.attachmentfiles=t,e});e.attachmentfiles=[]}return Promise.resolve(e)},e.prototype.prepareAssessmentData=function(e,t,n,o,r,i){return 2!=e.overallfeedbackmode||n?this.strategyDelegate.prepareAssessmentData(e.strategy,t,r).then(function(e){return e.feedbackauthor=n,e.feedbackauthorattachmentsid=i||0,e.nodims=r.dimenssionscount,e}):Promise.reject({feedbackauthor:this.translate.instant("core.err_required")})},e.prototype.realGradeValueHelper=function(e,t,n){return null==e?null:0==t?"0":(e=this.textUtils.roundToDecimals(t*e/100,n),this.utils.formatFloat(e))},e.prototype.realGradeValue=function(e,t){return t.grade=this.realGradeValueHelper(t.grade,e.grade,e.gradedecimals),t.gradinggrade=this.realGradeValueHelper(t.gradinggrade,e.gradinggrade,e.gradedecimals),t.gradinggradeover=this.realGradeValueHelper(t.gradinggradeover,e.gradinggrade,e.gradedecimals),t},e.prototype.showGrade=function(e){return void 0!==e&&null!==e},e=p([Object(o.A)(),h("design:paramtypes",[r.c,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(3),i=n(53),l=n(10),a=n(18),s=n(1),u=n(11),c=n(2),d=n(65),f=n(258),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,n,o,r,i,l,a,s){this.appProvider=e,this.sitesProvider=n,this.filepoolProvider=o,this.translate=r,this.textUtils=i,this.utils=l,this.glossaryOffline=a,this.logHelper=s,this.ROOT_CACHE_KEY="mmaModGlossary:",this.siteSchema={name:"AddonModGlossaryProvider",version:1,tables:[{name:t.ENTRIES_TABLE,columns:[{name:"entryid",type:"INTEGER",primaryKey:!0},{name:"glossaryid",type:"INTEGER"},{name:"pagefrom",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getCourseGlossariesCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseGlossaries:"+e},e.prototype.getCourseGlossaries=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={courseids:[e]},r={cacheKey:n.getCourseGlossariesCacheKey(e),updateFrequency:i.a.FREQUENCY_RARELY};return t.read("mod_glossary_get_glossaries_by_courses",o,r).then(function(e){return e.glossaries})})},e.prototype.invalidateCourseGlossaries=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=n.getCourseGlossariesCacheKey(e);return t.invalidateWsCacheForKey(o)})},e.prototype.getEntriesByAuthorCacheKey=function(e,t,n,o){return this.ROOT_CACHE_KEY+"entriesByAuthor:"+e+":"+t+":"+n+":"+o},e.prototype.getEntriesByAuthor=function(e,t,n,o,r,l,a,s,u){var c=this;return this.sitesProvider.getSite(u).then(function(u){var d={id:e,letter:t,field:n,sort:o,from:r,limit:l},f={cacheKey:c.getEntriesByAuthorCacheKey(e,t,n,o),omitExpires:a,forceOffline:s,updateFrequency:i.a.FREQUENCY_SOMETIMES};return u.read("mod_glossary_get_entries_by_author",d,f)})},e.prototype.invalidateEntriesByAuthor=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l=i.getEntriesByAuthorCacheKey(e,t,n,o);return r.invalidateWsCacheForKey(l)})},e.prototype.getEntriesByCategory=function(e,t,n,o,r,l,a){var s=this;return this.sitesProvider.getSite(a).then(function(a){var u={id:e,categoryid:t,from:n,limit:o},c={cacheKey:s.getEntriesByCategoryCacheKey(e,t),omitExpires:r,forceOffline:l,updateFrequency:i.a.FREQUENCY_SOMETIMES};return a.read("mod_glossary_get_entries_by_category",u,c)})},e.prototype.invalidateEntriesByCategory=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=o.getEntriesByCategoryCacheKey(e,t);return n.invalidateWsCacheForKey(r)})},e.prototype.getEntriesByCategoryCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"entriesByCategory:"+e+":"+t},e.prototype.getEntriesByDateCacheKey=function(e,t,n){return this.ROOT_CACHE_KEY+"entriesByDate:"+e+":"+t+":"+n},e.prototype.getEntriesByDate=function(e,t,n,o,r,l,a,s){var u=this;return this.sitesProvider.getSite(s).then(function(s){var c={id:e,order:t,sort:n,from:o,limit:r},d={cacheKey:u.getEntriesByDateCacheKey(e,t,n),omitExpires:l,forceOffline:a,updateFrequency:i.a.FREQUENCY_SOMETIMES};return s.read("mod_glossary_get_entries_by_date",c,d)})},e.prototype.invalidateEntriesByDate=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=r.getEntriesByDateCacheKey(e,t,n);return o.invalidateWsCacheForKey(i)})},e.prototype.getEntriesByLetterCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"entriesByLetter:"+e+":"+t},e.prototype.getEntriesByLetter=function(e,n,o,r,l,a,s){var u=this;return this.sitesProvider.getSite(s).then(function(s){var c={id:e,letter:n,from:o,limit:r},d={cacheKey:u.getEntriesByLetterCacheKey(e,n),omitExpires:l,forceOffline:a,updateFrequency:i.a.FREQUENCY_SOMETIMES};return s.read("mod_glossary_get_entries_by_letter",c,d).then(function(n){return r==t.LIMIT_ENTRIES&&u.storeEntries(e,n.entries,o,s.getId()).catch(function(){}),n})})},e.prototype.invalidateEntriesByLetter=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=o.getEntriesByLetterCacheKey(e,t);return n.invalidateWsCacheForKey(r)})},e.prototype.getEntriesBySearchCacheKey=function(e,t,n,o,r){return this.ROOT_CACHE_KEY+"entriesBySearch:"+e+":"+n+":"+o+":"+r+":"+t},e.prototype.getEntriesBySearch=function(e,t,n,o,r,l,a,s,u,c){var d=this;return this.sitesProvider.getSite(c).then(function(c){var f={id:e,query:t,fullsearch:n,order:o,sort:r,from:l,limit:a},p={cacheKey:d.getEntriesBySearchCacheKey(e,t,n,o,r),omitExpires:s,forceOffline:u,updateFrequency:i.a.FREQUENCY_SOMETIMES};return c.read("mod_glossary_get_entries_by_search",f,p)})},e.prototype.invalidateEntriesBySearch=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a=l.getEntriesBySearchCacheKey(e,t,n,o,r);return i.invalidateWsCacheForKey(a)})},e.prototype.getCategoriesCacheKey=function(e){return this.ROOT_CACHE_KEY+"categories:"+e},e.prototype.getAllCategories=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return o.getCategories(e,0,t.LIMIT_CATEGORIES,[],n)})},e.prototype.getCategories=function(e,t,n,o,r){var l=this,a={id:e,from:t,limit:n},s={cacheKey:this.getCategoriesCacheKey(e),updateFrequency:i.a.FREQUENCY_SOMETIMES};return r.read("mod_glossary_get_categories",a,s).then(function(i){o=o.concat(i.categories);return t+n<i.count?(t+=n,l.getCategories(e,t,n,o,r)):o})},e.prototype.invalidateCategories=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getCategoriesCacheKey(e))})},e.prototype.getEntryCacheKey=function(e){return this.ROOT_CACHE_KEY+"getEntry:"+e},e.prototype.getEntry=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){var l={id:e},a={cacheKey:o.getEntryCacheKey(e),updateFrequency:i.a.FREQUENCY_RARELY};return r.read("mod_glossary_get_entry_by_id",l,a).then(function(e){return e&&e.entry?e:Promise.reject(null)}).catch(function(i){var l,a=function(r,i){return o.getEntriesByLetter(l,"ALL",r,t.LIMIT_ENTRIES,!1,!0,n).then(function(t){for(var n=0;n<t.entries.length;n++){var o=t.entries[n];if(o.id==e)return{entry:o,from:r}}var l=r+t.entries.length;return l<t.count&&i?a(l,!0):Promise.reject(null)})};return o.getStoredDataForEntry(e,r.getId()).then(function(e){return l=e.glossaryId,void 0!==e.from?a(e.from,!1).catch(function(){return a(0,!0)}):a(0,!0)}).catch(function(){return Promise.reject(i)})})})},e.prototype.getStoredDataForEntry=function(e,n){return this.sitesProvider.getSite(n).then(function(n){var o={entryid:e};return n.getDb().getRecord(t.ENTRIES_TABLE,o).then(function(e){return{glossaryId:e.glossaryid,from:e.pagefrom}})})},e.prototype.fetchEntries=function(e,n,o,r,i,l,a){void 0===o&&(o=0),void 0===i&&(i=!1),void 0===l&&(l=!1),r=r||t.LIMIT_ENTRIES,a=a||this.sitesProvider.getCurrentSiteId();var s=n.slice();return s.push(o),s.push(r),s.push(i),s.push(l),s.push(a),e.apply(this,s)},e.prototype.fetchAllEntries=function(e,n,o,r,i){var l=this;void 0===o&&(o=!1),void 0===r&&(r=!1),i=i||this.sitesProvider.getCurrentSiteId();var a=[],s=t.LIMIT_ENTRIES,u=function(){return l.fetchEntries(e,n,a.length,s,o,r,i).then(function(e){return Array.prototype.push.apply(a,e.entries),a.length<e.count?u():a})};return u()},e.prototype.invalidateEntry=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getEntryCacheKey(e))})},e.prototype.invalidateEntries=function(e,t){var n=this,o=[];return e.forEach(function(e){o.push(n.getEntryCacheKey(e.id))}),this.sitesProvider.getSite(t).then(function(e){return e.invalidateMultipleWsCacheForKey(o)})},e.prototype.invalidateContent=function(e,t){var n=this;return this.getGlossary(t,e).then(function(e){return n.invalidateGlossaryEntries(e).finally(function(){return n.utils.allPromises([n.invalidateCourseGlossaries(t),n.invalidateCategories(e.id)])})})},e.prototype.invalidateGlossaryEntries=function(e,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return n||i.push(this.fetchAllEntries(this.getEntriesByLetter,[e.id,"ALL"],!0,!1,o).then(function(e){return r.invalidateEntries(e,o)})),e.browsemodes.forEach(function(n){switch(n){case"letter":i.push(r.invalidateEntriesByLetter(e.id,"ALL",o));break;case"cat":i.push(r.invalidateEntriesByCategory(e.id,t.SHOW_ALL_CATEGORIES,o));break;case"date":i.push(r.invalidateEntriesByDate(e.id,"CREATION","DESC",o)),i.push(r.invalidateEntriesByDate(e.id,"UPDATE","DESC",o));break;case"author":i.push(r.invalidateEntriesByAuthor(e.id,"ALL","LASTNAME","ASC",o))}}),this.utils.allPromises(i)},e.prototype.invalidateFiles=function(e,n){return this.filepoolProvider.invalidateFilesByComponent(n,t.COMPONENT,e)},e.prototype.getGlossary=function(e,t,n){return this.getCourseGlossaries(e,n).then(function(e){var n=e.find(function(e){return e.coursemodule==t});return n||Promise.reject(null)})},e.prototype.getGlossaryById=function(e,t,n){return this.getCourseGlossaries(e,n).then(function(e){var n=e.find(function(e){return e.id==t});return n||Promise.reject(null)})},e.prototype.addEntry=function(e,t,n,o,r,i,l,a,s,u,c){var d=this;a=a||this.sitesProvider.getCurrentSiteId();var f=function(){return(c?d.isConceptUsed(e,t,s&&s.timecreated,a):Promise.resolve(!1)).then(function(u){return u?Promise.reject(d.translate.instant("addon.mod_glossary.errconceptalreadyexists")):d.glossaryOffline.addNewEntry(e,t,n,o,i,r,l,a,void 0,s).then(function(){return!1})})};if(!this.appProvider.isOnline()&&u)return f();return(s?this.glossaryOffline.deleteNewEntry(e,s.concept,s.timecreated,a):Promise.resolve()).then(function(){return d.addEntryOnline(e,t,n,r,i,a).then(function(e){return e}).catch(function(e){return u&&!d.utils.isWebServiceError(e)?f():Promise.reject(e)})})},e.prototype.addEntryOnline=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={glossaryid:e,concept:t,definition:n,definitionformat:1,options:l.utils.objectToArrayOfObjects(o||{},"name","value")};return r&&a.options.push({name:"attachmentsid",value:r}),i.isVersionGreaterEqualThan("3.2.2")||(a.definition=l.textUtils.cleanTags(a.definition)),i.write("mod_glossary_add_entry",a).then(function(e){return e&&e.entryid?e.entryid:Promise.reject(l.utils.createFakeWSError(""))})})},e.prototype.isConceptUsed=function(e,t,n,o){var r=this;return this.glossaryOffline.isConceptUsed(e,t,n,o).then(function(n){return!!n||r.fetchAllEntries(r.getEntriesByLetter,[e,"ALL"],!0,!1,o).then(function(e){return e.some(function(e){return e.concept==t})})}).catch(function(){return!1})},e.prototype.isPluginEnabledForEditing=function(){return this.sitesProvider.getCurrentSite().wsAvailable("mod_glossary_add_entry")},e.prototype.logView=function(e,n,o,r){return this.logHelper.logSingle("mod_glossary_view_glossary",{id:e,mode:n},t.COMPONENT,e,o,"glossary",{mode:n},r)},e.prototype.logEntryView=function(e,n,o,r){return this.logHelper.logSingle("mod_glossary_view_entry",{id:e},t.COMPONENT,n,o,"glossary",{entryid:e},r)},e.prototype.storeEntries=function(e,t,n,o){var r=this,i=[];return t.forEach(function(t){i.push(r.storeEntryId(e,t.id,n,o))}),Promise.all(i)},e.prototype.storeEntryId=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={entryid:n,glossaryid:e,pagefrom:o};return r.getDb().insertRecord(t.ENTRIES_TABLE,i)})},e.COMPONENT="mmaModGlossary",e.LIMIT_ENTRIES=25,e.LIMIT_CATEGORIES=10,e.SHOW_ALL_CATEGORIES=0,e.SHOW_NOT_CATEGORISED=-1,e.ADD_ENTRY_EVENT="addon_mod_glossary_add_entry",e.ENTRIES_TABLE="addon_mod_glossary_entry_glossaryid",e=t=p([Object(o.A)(),h("design:paramtypes",[l.a,s.a,a.a,r.c,u.a,c.a,f.a,d.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(98),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,"CoreTagAreaDelegate",t,n,o)||this;return r.handlerNameProperty="type",r}return s(t,e),t.prototype.getDisplayNameKey=function(e,t){return("core"==e?"core.tag":"addon."+e)+".tagarea_"+t},t.prototype.parseContent=function(e,t,n){var o=e+"/"+t;return Promise.resolve(this.executeFunctionOnEnabled(o,"parseContent",[n]))},t.prototype.getComponent=function(e,t,n){var o=e+"/"+t;return Promise.resolve(this.executeFunctionOnEnabled(o,"getComponent",[n]))},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,r.a])],t)}(a.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(136),s=n(53),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.sitesProvider=t,this.utils=n,this.pushNotificationsProvider=o,this.ROOT_CACHE_KEY="addonBlog:",this.logger=e.getInstance("AddonBlogProvider")}return t=e,e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_blog_get_entries")&&e.canUseAdvancedFeature("enableblogs")})},e.prototype.getEntriesCacheKey=function(e){return void 0===e&&(e={}),this.ROOT_CACHE_KEY+this.utils.sortAndStringify(e)},e.prototype.getEntries=function(e,n,o){var r=this;return void 0===e&&(e={}),void 0===n&&(n=0),this.sitesProvider.getSite(o).then(function(o){var i={filters:r.utils.objectToArrayOfObjects(e,"name","value"),page:n,perpage:t.ENTRIES_PER_PAGE},l={cacheKey:r.getEntriesCacheKey(e),updateFrequency:s.a.FREQUENCY_SOMETIMES};return o.read("core_blog_get_entries",i,l)})},e.prototype.invalidateEntries=function(e,t){var n=this;return void 0===e&&(e={}),this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getEntriesCacheKey(e))})},e.prototype.logView=function(e,t){var n=this;return void 0===e&&(e={}),this.pushNotificationsProvider.logViewListEvent("blog","core_blog_view_entries",e,t),this.sitesProvider.getSite(t).then(function(t){var o={filters:n.utils.objectToArrayOfObjects(e,"name","value")};return t.write("core_blog_view_entries",o)})},e.ENTRIES_PER_PAGE=10,e.COMPONENT="blog",e=t=u([Object(o.A)(),c("design:paramtypes",[r.a,i.a,l.a,a.a])],e);var t}()},,,,,,,function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"alt",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoProfile(n)&&o}return o},null,null)),s._30(1,4734976,null,0,u.a,[s.t,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a],{siteId:[0,"siteId"],src:[1,"src"]},null),s._48(2,{$a:0}),s._47(131072,v.a,[y.a,s.j])],function(e,t){var n=t.component;e(t,1,0,n.siteId||null,n.avatarUrl)},function(e,t){var n=t.component;e(t,0,0,s._56(t,0,0,s._44(t,3).transform("core.pictureof",e(t,2,0,n.fullname))))})}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,2,"img",[["role","presentation"],["src","assets/img/user-avatar.png"]],[[8,"alt",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoProfile(n)&&o}return o},null,null)),s._48(1,{$a:0}),s._47(131072,v.a,[y.a,s.j])],null,function(e,t){var n=t.component;e(t,0,0,s._56(t,0,0,s._44(t,2).transform("core.pictureof",e(t,1,0,n.fullname))))})}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,0,"span",[["class","contact-status online"]],null,null,null,null,null))],null,null)}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,0,"img",[["alt",""],["class","core-avatar-extra-icon"],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component.extraIcon)})}function a(e){return s._57(0,[(e()(),s._26(16777216,null,null,1,null,o)),s._30(1,16384,null,0,b.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._26(16777216,null,null,1,null,r)),s._30(4,16384,null,0,b.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._26(16777216,null,null,1,null,i)),s._30(7,16384,null,0,b.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._26(16777216,null,null,1,null,l)),s._30(10,16384,null,0,b.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),s._43(null,0)],function(e,t){var n=t.component;e(t,1,0,n.avatarUrl);e(t,4,0,!n.avatarUrl);e(t,7,0,n.checkOnline&&n.isOnline());e(t,10,0,n.extraIcon)},null)}n.d(t,"a",function(){return I}),t.b=a;var s=n(0),u=n(229),c=n(6),d=n(18),f=n(16),p=n(1),h=n(4),m=n(22),_=n(10),g=n(2),v=n(25),y=n(17),b=n(7),P=n(182),O=n(21),E=n(9),C=n(28),I=s._29({encapsulation:2,styles:[],data:{}});s._27("ion-avatar[core-user-avatar]",P.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"ion-avatar",[["core-user-avatar",""]],null,null,null,a,I)),s._30(1,770048,null,0,P.a,[O.a,p.a,g.a,_.a,E.a,[2,C.a]],null,null)],function(e,t){e(t,1,0)},null)},{user:"user",profileUrl:"profileUrl",linkProfile:"linkProfile",fullname:"fullname",userId:"userId",courseId:"courseId",checkOnline:"checkOnline",extraIcon:"extraIcon"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(250),s=n(26),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=function(){function e(){}return e=u([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(10),i=n(9),l=n(18),a=n(115),s=n(1),u=n(4),c=n(66),d=n(22),f=n(2),p=n(11),h=n(40),m=n(56),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,n,r,i,l,a,s,u,c,d){this.sitesProvider=e,this.utils=t,this.domUtils=n,this.filepoolProvider=r,this.appProvider=i,this.fileHelper=l,this.mimeUtils=a,this.eventsProvider=s,this.textUtils=u,this.pluginFileDelegate=c,this.urlUtils=d,this.canDownload=!0,this.showSize=!0,this.showTime=!0,this.onDelete=new o.v}return e.prototype.ngOnInit=function(){var e=this;this.canDelete=this.utils.isTrueOrOne(this.canDelete),this.alwaysDownload=this.utils.isTrueOrOne(this.alwaysDownload),this.canDownload=this.utils.isTrueOrOne(this.canDownload),this.fileUrl=this.fileHelper.getFileUrl(this.file),this.timemodified=this.fileHelper.getFileTimemodified(this.file),this.siteId=this.sitesProvider.getCurrentSiteId(),this.fileSize=this.file.filesize,this.fileName=this.file.filename,this.utils.isTrueOrOne(this.showSize)&&this.fileSize>=0&&(this.fileSizeReadable=this.textUtils.bytesToSize(this.fileSize,2)),this.showTime=this.utils.isTrueOrOne(this.showTime)&&this.timemodified>0,this.file.isexternalfile&&(this.alwaysDownload=!0),this.fileIcon=this.mimeUtils.getFileIcon(this.file.filename),this.canDownload&&(this.calculateState(),this.filepoolProvider.getFileEventNameByUrl(this.siteId,this.fileUrl).then(function(t){e.observer=e.eventsProvider.on(t,function(){e.calculateState()})}).catch(function(){}))},e.prototype.calculateState=function(){var e=this;return this.filepoolProvider.getFileStateByUrl(this.siteId,this.fileUrl,this.timemodified).then(function(t){e.canDownload=e.sitesProvider.getCurrentSite().canDownloadFiles(),e.state=t,e.isDownloading=e.canDownload&&t===h.a.DOWNLOADING})},e.prototype.openFile=function(){var e=this;return this.fileHelper.downloadAndOpenFile(this.file,this.component,this.componentId,this.state,function(t){t&&t.calculating&&(e.isDownloading=!0)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)})},e.prototype.download=function(e,t){var n=this;void 0===t&&(t=!1),e&&e.preventDefault(),e&&e.stopPropagation(),this.isDownloading&&!t||(this.canDownload&&this.state&&this.state!=h.a.NOT_DOWNLOADABLE?this.appProvider.isOnline()||t&&(!t||this.fileHelper.isStateDownloaded(this.state))?t?this.openFile().catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}):this.pluginFileDelegate.getFileSize({fileurl:this.fileUrl,filesize:this.fileSize},this.siteId).then(function(e){return(e?n.domUtils.confirmDownloadSize({size:e,total:!0}):Promise.resolve()).then(function(){return n.filepoolProvider.invalidateFileByUrl(n.siteId,n.fileUrl).finally(function(){n.isDownloading=!0,n.filepoolProvider.addToQueueByUrl(n.siteId,n.fileUrl,n.component,n.componentId,n.timemodified,void 0,void 0,0,n.file).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errordownloading",!0),n.calculateState()})})}).catch(function(){})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}):this.domUtils.showErrorModal("core.networkerrormsg",!0):this.file.toURL?this.utils.openFile(this.file.toURL()):this.fileUrl&&(0===this.fileUrl.indexOf("http")?this.utils.openOnlineFile(this.urlUtils.unfixPluginfileURL(this.fileUrl)):this.utils.openFile(this.fileUrl)))},e.prototype.delete=function(e){e.preventDefault(),e.stopPropagation(),this.canDelete&&this.onDelete.emit()},e.prototype.ngOnDestroy=function(){this.observer&&this.observer.off()},_([Object(o.D)(),g("design:type",Object)],e.prototype,"file",void 0),_([Object(o.D)(),g("design:type",String)],e.prototype,"component",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"componentId",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"canDelete",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"alwaysDownload",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"canDownload",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"showSize",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"showTime",void 0),_([Object(o.O)(),g("design:type",o.v)],e.prototype,"onDelete",void 0),e=_([Object(o.m)({selector:"core-file",templateUrl:"core-file.html"}),g("design:paramtypes",[s.a,f.a,u.a,l.a,r.a,a.a,c.a,i.a,p.a,m.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(1),l=n(11),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},f=function(){function e(e,t,n,o){this.sitesProvider=t,this.textUtils=n,this.utils=o,this.DRAFT_TABLE="editor_draft",this.siteSchema={name:"CoreEditorProvider",version:1,tables:[{name:this.DRAFT_TABLE,columns:[{name:"contextlevel",type:"TEXT"},{name:"contextinstanceid",type:"INTEGER"},{name:"elementid",type:"TEXT"},{name:"extraparams",type:"TEXT"},{name:"drafttext",type:"TEXT",notNull:!0},{name:"pageinstance",type:"TEXT",notNull:!0},{name:"timecreated",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0},{name:"originalcontent",type:"TEXT"}],primaryKeys:["contextlevel","contextinstanceid","elementid","extraparams"]}]},this.logger=e.getInstance("CoreEditorProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e.prototype.deleteDraft=function(e,t,n,o,r){return c(this,void 0,void 0,function(){var i,l;return d(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.sitesProvider.getSiteDb(r)];case 1:return i=a.sent(),l=this.fixDraftPrimaryData(e,t,n,o),[2,i.deleteRecords(this.DRAFT_TABLE,l)];case 2:return a.sent(),[3,3];case 3:return[2]}})})},e.prototype.fixDraftPrimaryData=function(e,t,n,o){return{contextlevel:e,contextinstanceid:t,elementid:n,extraparams:this.utils.sortAndStringify(o||{})}},e.prototype.getDraft=function(e,t,n,o,r){return c(this,void 0,void 0,function(){var i,l;return d(this,function(a){switch(a.label){case 0:return[4,this.sitesProvider.getSiteDb(r)];case 1:return i=a.sent(),l=this.fixDraftPrimaryData(e,t,n,o),[2,i.getRecord(this.DRAFT_TABLE,l)]}})})},e.prototype.resumeDraft=function(e,t,n,o,r,i,l){return c(this,void 0,void 0,function(){var a,s;return d(this,function(u){switch(u.label){case 0:return u.trys.push([0,7,,9]),[4,this.getDraft(e,t,n,o,l)];case 1:a=u.sent(),u.label=2;case 2:return u.trys.push([2,5,,6]),[4,this.sitesProvider.getSiteDb(l)];case 3:return s=u.sent(),a.pageinstance=r,a.timemodified=Date.now(),i&&a.originalcontent!=i&&(a.originalcontent=i,a.drafttext=""),[4,s.insertRecord(this.DRAFT_TABLE,a)];case 4:return u.sent(),[3,6];case 5:return u.sent(),[3,6];case 6:return[2,a];case 7:return u.sent(),[4,this.saveDraft(e,t,n,o,r,"",i,l)];case 8:return u.sent(),[3,9];case 9:return[2]}})})},e.prototype.saveDraft=function(e,t,n,o,r,i,l,a){return c(this,void 0,void 0,function(){var s,u,c,f;return d(this,function(d){switch(d.label){case 0:s=Date.now(),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.getDraft(e,t,n,o,a)];case 2:return u=d.sent(),s=u.timecreated,[3,4];case 3:return d.sent(),[3,4];case 4:if(u){if(u.pageinstance!=r)throw this.logger.warning("Discarding draft because of pageinstance. Context '"+e+"' '"+t+"', element '"+n+"'"),null;l||(l=u.originalcontent)}return[4,this.sitesProvider.getSiteDb(a)];case 5:return c=d.sent(),f=this.fixDraftPrimaryData(e,t,n,o),f.drafttext=(i||"").trim(),f.pageinstance=r,f.timecreated=s,f.timemodified=Date.now(),l&&(f.originalcontent=l),[4,c.insertRecord(this.DRAFT_TABLE,f)];case 6:return d.sent(),[2]}})})},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(9),l=n(1),a=n(4),s=n(11),u=n(2),c=n(13),d=n(72),f=n(127),p=n(292),h=n(97),m=n(201),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d){this.sitesProvider=e,this.dataProvider=t,this.translate=n,this.fieldsDelegate=o,this.dataOffline=r,this.fileUploaderProvider=i,this.textUtils=l,this.eventsProvider=a,this.utils=s,this.domUtils=u,this.courseProvider=c,this.ratingOffline=d}return e.prototype.applyOfflineActions=function(e,t,n){var o=this,r=[];return t.forEach(function(t){switch(e.timemodified=t.timemodified,e.hasOffline=!0,t.action){case"approve":e.approved=!0;break;case"disapprove":e.approved=!1;break;case"delete":e.deleted=!0;break;case"add":case"edit":e.groupid=t.groupid;var i={};t.fields.forEach(function(e){void 0===i[e.fieldid]&&(i[e.fieldid]={}),e.subfield?i[e.fieldid][e.subfield]=o.textUtils.parseJSON(e.value):i[e.fieldid][""]=o.textUtils.parseJSON(e.value)}),n.forEach(function(t){o.fieldsDelegate.hasFiles(t)?r.push(o.getStoredFiles(e.dataid,e.id,t.id).then(function(n){e.contents[t.id]=o.fieldsDelegate.overrideData(t,e.contents[t.id],i[t.id],n),e.contents[t.id].fieldid=t.id})):(e.contents[t.id]=o.fieldsDelegate.overrideData(t,e.contents[t.id],i[t.id]),e.contents[t.id].fieldid=t.id)})}}),Promise.all(r).then(function(){return e})},e.prototype.approveOrDisapproveEntry=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=this.domUtils.showModalLoading("core.sending",!0);this.getActivityCourseIdIfNotSet(e,o,r).then(function(o){return i.dataProvider.approveEntry(e,t,n,o,r).catch(function(e){return i.domUtils.showErrorModalDefault(e,"addon.mod_data.errorapproving",!0),Promise.reject(null)})}).then(function(){var n=[];return n.push(i.dataProvider.invalidateEntryData(e,t,r)),n.push(i.dataProvider.invalidateEntriesData(e,r)),Promise.all(n).catch(function(){})}).then(function(){i.eventsProvider.trigger(h.a.ENTRY_CHANGED,{dataId:e,entryId:t},r),i.domUtils.showToast(n?"addon.mod_data.recordapproved":"addon.mod_data.recorddisapproved",!0,3e3)}).catch(function(){}).finally(function(){l.dismiss()})},e.prototype.displayShowFields=function(e,t,n,o,r,i){if(!e)return"";var l,a;t.forEach(function(t){l=(l="[["+t.name+"]]").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),l=new RegExp(l,"gi"),e=e.replace(l,a='<addon-mod-data-field-plugin [field]="fields['+t.id+']" [value]="entries['+n.id+"].contents["+t.id+']" mode="'+r+'" [database]="data" (gotoEntry)="gotoEntry('+n.id+')"></addon-mod-data-field-plugin>')});for(var s in i)l=new RegExp("##"+s+"##","gi"),i[s]?(a="moreurl"==s?this.sitesProvider.getCurrentSite().getURL()+"/mod/data/view.php?d={{data.id}}&rid="+n.id:"approvalstatus"==s?this.translate.instant("addon.mod_data."+(n.approved?"approved":"notapproved")):'<addon-mod-data-action action="'+s+'" [entry]="entries['+n.id+']" mode="'+r+'" [database]="data" [module]="module" [offset]="'+o+'" [group]="group" ></addon-mod-data-action>',e=e.replace(l,a)):e=e.replace(l,"");return e},e.prototype.fetchEntries=function(e,t,n,o,r,i,l,a,s,u){var c=this;return void 0===n&&(n=0),void 0===i&&(i="0"),void 0===l&&(l="DESC"),void 0===a&&(a=0),void 0===s&&(s=h.a.PER_PAGE),this.sitesProvider.getSite(u).then(function(u){var d,f={},p={entries:[],totalcount:0,offlineEntries:[]},h=c.dataOffline.getDatabaseEntries(e.id,u.id).then(function(t){p.hasOfflineActions=!!t.length,t.forEach(function(t){void 0===f[t.entryid]&&(f[t.entryid]=[]),f[t.entryid].push(t),"add"!=t.action||0!=a||o||r||t.groupid&&n&&t.groupid!=n||p.offlineEntries.push({id:t.entryid,canmanageentry:!0,approved:!e.approval||e.manageapproved,dataid:e.id,groupid:t.groupid,timecreated:-t.entryid,timemodified:-t.entryid,userid:u.getUserId(),fullname:u.getInfo().fullname,contents:{}})}),p.offlineEntries.sort(function(e,t){return t.timecreated-e.timecreated})}),m=c.ratingOffline.hasRatings("mod_data","entry","module",e.coursemodule).then(function(e){p.hasOfflineRatings=e});return d=o||r?c.dataProvider.searchEntries(e.id,n,o,r,i,l,a,s,u.id).then(function(e){p.entries=e.entries,p.totalcount=e.totalcount,p.maxcount=e.maxcount}):c.dataProvider.getEntries(e.id,n,i,l,a,s,!1,!1,u.id).then(function(e){p.entries=e.entries,p.totalcount=e.totalcount}),Promise.all([h,m,d]).then(function(){var e=[];return p.entries.forEach(function(n){e.push(c.applyOfflineActions(n,f[n.id]||[],t))}),p.offlineEntries.forEach(function(n){e.push(c.applyOfflineActions(n,f[n.id]||[],t))}),Promise.all(e)}).then(function(){return p})})},e.prototype.fetchEntry=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return r.dataOffline.getEntryActions(e.id,n,o.id).then(function(i){return(n>0?r.dataProvider.getEntry(e.id,n,!1,o.id):Promise.resolve({entry:{id:n,userid:o.getUserId(),groupid:0,dataid:e.id,timecreated:-n,timemodified:-n,approved:!e.approval||e.manageapproved,canmanageentry:!0,fullname:o.getInfo().fullname,contents:{}}})).then(function(e){return r.applyOfflineActions(e.entry,i,t).then(function(){return e})})})})},e.prototype.getActions=function(e,t,n){return{more:!0,moreurl:!0,user:!0,userpicture:!0,timeadded:!0,timemodified:!0,tags:!0,edit:n.canmanageentry&&!n.deleted,delete:n.canmanageentry,approve:e.approval&&t.canapprove&&!n.approved&&!n.deleted,disapprove:e.approval&&t.canapprove&&n.approved&&!n.deleted,approvalstatus:e.approval,comments:e.comments,delcheck:!1,export:!1}},e.prototype.getActivityCourseIdIfNotSet=function(e,t,n){return t?Promise.resolve(t):this.courseProvider.getModuleBasicInfoByInstance(e,"data",n).then(function(e){return e.course})},e.prototype.getDefaultTemplate=function(e,t){if("listtemplateheader"==e||"listtemplatefooter"==e)return"";var n=[];return"listtemplate"==e&&n.push("##delcheck##<br />"),n.push('<div class="defaulttemplate">','<table class="mod-data-default-template ##approvalstatus##">',"<tbody>"),t.forEach(function(e){n.push('<tr class="">','<td class="template-field cell c0" style="">',e.name,": </td>",'<td class="template-token cell c1 lastcol" style="">[[',e.name,"]]</td>","</tr>")}),"listtemplate"==e?n.push('<tr class="lastrow">','<td class="controls template-field cell c0 lastcol" style="" colspan="2">',"##edit##  ##more##  ##delete##  ##approve##  ##disapprove##  ##export##","</td>","</tr>"):"singletemplate"==e?n.push('<tr class="lastrow">','<td class="controls template-field cell c0 lastcol" style="" colspan="2">',"##edit##  ##delete##  ##approve##  ##disapprove##  ##export##","</td>","</tr>"):"asearchtemplate"==e&&n.push('<tr class="searchcontrols">','<td class="template-field cell c0" style="">Author first name: </td>','<td class="template-token cell c1 lastcol" style="">##firstname##</td>',"</tr>",'<tr class="searchcontrols lastrow">','<td class="template-field cell c0" style="">Author surname: </td>','<td class="template-token cell c1 lastcol" style="">##lastname##</td>',"</tr>"),n.push("</tbody>","</table>","</div>"),"listtemplate"==e&&n.push("<hr />"),n.join("")},e.prototype.getEditDataFromForm=function(e,t,n,o,r,i,l){var a=this;if(void 0===i&&(i=!1),!e)return Promise.resolve({});l=l||this.sitesProvider.getCurrentSiteId();var s=[],u=[];return t.forEach(function(t){u.push(Promise.resolve(a.fieldsDelegate.getFieldEditData(t,e,r[t.id])).then(function(e){if(e){var t=[];return e.forEach(function(e){var r;r=n&&e.files?a.uploadOrStoreFiles(n,0,o,e.fieldid,e.files,i,l).then(function(t){delete e.files,e.value=t}):Promise.resolve(),t.push(r.then(function(){e.value&&(e.value=JSON.stringify(e.value)),void 0===e.subfield&&(e.subfield=""),s.push(e)}))}),Promise.all(t)}}))}),Promise.all(u).then(function(){return s})},e.prototype.getEditTmpFiles=function(e,t,n,o){var r=this;if(!e)return Promise.resolve([]);var i=t.map(function(t){return Promise.resolve(r.fieldsDelegate.getFieldEditFiles(t,e,o[t.id]))});return Promise.all(i).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])})},e.prototype.getStoredFiles=function(e,t,n,o){var r=this;return this.dataOffline.getEntryFieldFolder(e,t,n,o).then(function(e){return r.fileUploaderProvider.getStoredFiles(e).catch(function(){return[]})})},e.prototype.getTemplate=function(e,t,n){var o=e[t]||this.getDefaultTemplate(t,n);return"listtemplateheader"!=t&&"listtemplatefooter"!=t&&(o=this.domUtils.fixHtml(o)),o=o.replace(/<a ([^>]*href="[^>]*)>/gi,function(e,t){return'<a core-link capture="true" '+t+">"})},e.prototype.hasEditDataChanged=function(e,t,n,o){var r=this,i=t.map(function(t){return r.fieldsDelegate.hasFieldDataChanged(t,e,o[t.id])});return Promise.all(i).then(function(){return!1}).catch(function(){return!0})},e.prototype.showDeleteEntryModal=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId(),this.domUtils.showDeleteConfirm("addon.mod_data.confirmdeleterecord").then(function(){var i=r.domUtils.showModalLoading();return r.getActivityCourseIdIfNotSet(e,n,o).then(function(n){return r.dataProvider.deleteEntry(e,t,n,o)}).catch(function(e){return r.domUtils.showErrorModalDefault(e,"addon.mod_data.errordeleting",!0),Promise.reject(null)}).then(function(){return r.utils.allPromises([r.dataProvider.invalidateEntryData(e,t,o),r.dataProvider.invalidateEntriesData(e,o)]).catch(function(){})}).then(function(){r.eventsProvider.trigger(h.a.ENTRY_CHANGED,{dataId:e,entryId:t,deleted:!0},o),r.domUtils.showToast("addon.mod_data.recorddeleted",!0,3e3)}).finally(function(){i.dismiss()})}).catch(function(){})},e.prototype.storeFiles=function(e,t,n,o,r){var i=this;return this.dataOffline.getEntryFieldFolder(e,t,n,r).then(function(e){return i.fileUploaderProvider.storeFilesToUpload(e,o)})},e.prototype.uploadOrStoreFiles=function(e,t,n,o,r,i,l){return void 0===t&&(t=0),r.length?i?this.storeFiles(e,n,o,r,l):this.fileUploaderProvider.uploadOrReuploadFiles(r,h.a.COMPONENT,t,l):Promise.resolve(0)},e=_([Object(o.A)(),g("design:paramtypes",[l.a,h.a,r.c,f.a,p.a,d.a,s.a,i.a,u.a,a.a,c.a,m.a])],e)}()},,function(e,t,n){"use strict";function o(e){return r._57(0,[r._52(402653184,1,{container:0}),(e()(),r._31(1,0,null,null,2,"core-loading",[],null,null,null,i.b,i.a)),r._30(2,638976,null,0,l.a,[a.a,r.t,s.a,u.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._31(3,16777216,[[1,3],["dynamicComponent",1]],0,0,null,null,null,null,null,null,null))],function(e,t){e(t,2,0,t.component.loaded)},null)}n.d(t,"a",function(){return h}),t.b=o;var r=n(0),i=n(54),l=n(51),a=n(17),s=n(9),u=n(2),c=n(193),d=n(155),f=n(21),p=n(4),h=r._29({encapsulation:2,styles:[],data:{}});r._27("core-compile-html",c.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,null,null,o,h)),r._30(1,966656,null,0,c.a,[d.a,r.j,r.t,[2,f.a],r.F,p.a,u.a],null,null)],function(e,t){e(t,1,0)},null)},{text:"text",javascript:"javascript",jsData:"jsData",extraImports:"extraImports",extraProviders:"extraProviders",forceCompile:"forceCompile"},{created:"created",compiling:"compiling"},[])},,function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(57),i=n(18),l=n(6),a=n(1),s=n(4),u=n(11),c=n(2),d=n(13),f=n(65),p=n(53),h=n(171),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},y=function(){function e(e,t,n,o,r,i,l,a,s,u){this.sitesProvider=t,this.textUtils=n,this.fileProvider=o,this.filepoolProvider=r,this.wsProvider=i,this.utils=l,this.courseProvider=a,this.domUtils=s,this.logHelper=u,this.ROOT_CACHE_KEY="mmaModBook:",this.logger=e.getInstance("AddonModBookProvider")}return t=e,e.prototype.getBook=function(e,t,n){return this.getBookByField(e,"coursemodule",t,n)},e.prototype.getBookByField=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={courseids:[e]},l={cacheKey:r.getBookDataCacheKey(e),updateFrequency:p.a.FREQUENCY_RARELY};return o.read("mod_book_get_books_by_courses",i,l).then(function(e){if(e&&e.books){var o=e.books.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getBookDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"book:"+e},e.prototype.getChapterContent=function(e,n,o){var r=this,i=e[n]?e[n].indexUrl:void 0,l=this.sitesProvider.getCurrentSiteId();return i?this.fileProvider.isAvailable()?this.filepoolProvider.downloadUrl(l,i,!1,t.COMPONENT,o).then(function(t){return g(r,void 0,void 0,function(){var o;return v(this,function(r){switch(r.label){case 0:return[4,this.wsProvider.getText(t)];case 1:return o=r.sent(),[2,this.domUtils.restoreSourcesInHtml(o,e[n].paths)]}})})}):this.sitesProvider.getCurrentSite().checkAndFixPluginfileURL(i):(this.logger.debug("Could not locate the index chapter"),Promise.reject(null))},e.prototype.getContentsMap=function(e){var t=this,n={};return e?(e.forEach(function(e){if(t.isFileDownloadable(e)){var o=void 0,r=void 0,i=void 0,l=void 0;(r=e.filepath.match(/\/(\d+)\//))&&r[1]&&(i=e.filepath=="/"+(o=r[1])+"/",n[o]=n[o]||{paths:{}},"index.html"==e.filename&&i?(n[o].indexUrl=e.fileurl,n[o].tags=e.tags):(l=i?e.fileurl.split("mod_book/chapter"+e.filepath)[1]||e.filename:e.filepath.replace("/"+o+"/","")+e.filename,n[o].paths[t.textUtils.decodeURIComponent(l)]=e.fileurl))}}),n):n},e.prototype.getFirstChapter=function(e){if(e&&e.length)return e[0].id},e.prototype.getNextChapter=function(e,t){for(var n="0",o=0;o<e.length;o++)if(e[o].id==t&&void 0!==e[o+1]){n=e[o+1].id;break}return n},e.prototype.getPreviousChapter=function(e,t){for(var n="0",o=0;o<e.length&&e[o].id!=t;o++)n=e[o].id;return n},e.prototype.getToc=function(e){return e&&e.length?this.textUtils.parseJSON(e[0].content,[]):[]},e.prototype.getTocList=function(e){var t=function(e,t,n){void 0===n&&(n=""),e.hidden=!!parseInt(e.hidden,10);var o=n+(e.hidden?"x.":t+".");return{id:e.href.replace("/index.html",""),title:e.title,level:e.level,number:o,hidden:e.hidden}},n=[],o=1;return this.getToc(e).forEach(function(e){var r=t(e,o);if(n.push(r),e.subitems){var i=1;e.subitems.forEach(function(e){n.push(t(e,i,r.number)),i++})}o++}),n},e.prototype.invalidateBookData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getBookDataCacheKey(e))})},e.prototype.invalidateContent=function(e,n,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateBookData(n,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e)),r.push(this.courseProvider.invalidateModule(e,o)),this.utils.allPromises(r)},e.prototype.isFileDownloadable=function(e){return"file"===e.type},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e,n,o,r){return this.logHelper.logSingle("mod_book_view_book",{bookid:e,chapterid:n},t.COMPONENT,e,o,"book",{chapterid:n},r)},e.COMPONENT="mmaModBook",e=t=m([Object(o.A)(),_("design:paramtypes",[l.a,a.a,u.a,r.a,i.a,h.a,c.a,d.a,s.a,f.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(13),s=n(65),u=n(18),c=n(53),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.sitesProvider=t,this.courseProvider=n,this.utils=o,this.filepoolProvider=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModPage:",this.logger=e.getInstance("AddonModPageProvider")}return t=e,e.prototype.getPageData=function(e,t,n){return this.getPageByKey(e,"coursemodule",t,n)},e.prototype.getPageByKey=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={courseids:[e]},l={cacheKey:r.getPageCacheKey(e),updateFrequency:c.a.FREQUENCY_RARELY};return o.read("mod_page_get_pages_by_courses",i,l).then(function(e){if(e&&e.pages){var o=e.pages.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getPageCacheKey=function(e){return this.ROOT_CACHE_KEY+"page:"+e},e.prototype.invalidateContent=function(e,n,o){var r=[];return r.push(this.invalidatePageData(n,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e)),r.push(this.courseProvider.invalidateModule(e,o)),this.utils.allPromises(r)},e.prototype.invalidatePageData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getPageCacheKey(e))})},e.prototype.isGetPageWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_page_get_pages_by_courses")},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_page_view_page",{pageid:e},t.COMPONENT,e,n,"page",{},o)},e.COMPONENT="mmaModPage",e=t=d([Object(o.A)(),f("design:paramtypes",[r.a,i.a,a.a,l.a,u.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(13),s=n(65),u=n(18),c=n(53),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.sitesProvider=t,this.courseProvider=n,this.filepoolProvider=o,this.utils=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModResource:",this.logger=e.getInstance("AddonModResourceProvider")}return t=e,e.prototype.getResourceCacheKey=function(e){return this.ROOT_CACHE_KEY+"resource:"+e},e.prototype.getResourceDataByKey=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={courseids:[e]},l={cacheKey:r.getResourceCacheKey(e),updateFrequency:c.a.FREQUENCY_RARELY};return o.read("mod_resource_get_resources_by_courses",i,l).then(function(e){if(e&&e.resources){var o=e.resources.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getResourceData=function(e,t,n){return this.getResourceDataByKey(e,"coursemodule",t,n)},e.prototype.invalidateContent=function(e,n,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateResourceData(n,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e)),r.push(this.courseProvider.invalidateModule(e,o,"resource")),this.utils.allPromises(r)},e.prototype.invalidateResourceData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getResourceCacheKey(e))})},e.prototype.isGetResourceWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_resource_get_resources_by_courses")},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_resource_view_resource",{resourceid:e},t.COMPONENT,e,n,"resource",{},o)},e.COMPONENT="mmaModResource",e=t=d([Object(o.A)(),f("design:paramtypes",[r.a,i.a,a.a,u.a,l.a,s.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",Array)],e.prototype,"items",void 0),e=r([Object(o.m)({selector:"core-tag-feed",templateUrl:"core-tag-feed.html"})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(196),l=n(15),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n,o){var r=e.call(this,t,"CoreBlockOnlyTitleComponent")||this;return r.navCtrl=n,r.linkHelper=o,r}return a(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.fetchContentDefaultError="Error getting "+this.block.contents.title+" data."},t.prototype.gotoBlock=function(){this.linkHelper.goInSite(this.navCtrl,this.link,this.linkParams,void 0,!0)},t=s([Object(o.m)({selector:"core-block-only-title",templateUrl:"core-block-only-title.html"}),u("design:paramtypes",[o.C,r.s,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(4),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.domUtils=e}return e.prototype.parseFeedContent=function(e){var t=[],n=this.domUtils.convertToElement(e);return Array.from(n.querySelectorAll("ul.tag_feed > li.media")).forEach(function(e){var n={details:[]};Array.from(e.querySelectorAll("div.media-body > div")).forEach(function(e){if(e.classList.contains("media-heading")){n.heading=e.innerText.trim();var t=e.querySelector("a");t&&(n.url=t.getAttribute("href"))}else{var o=[""];Array.from(e.childNodes).forEach(function(e){if(e.nodeType==Node.TEXT_NODE)o[o.length-1]+=e.textContent;else if(e.nodeType==Node.ELEMENT_NODE){var t=e;"BR"==t.tagName?o.push(""):o[o.length-1]+=t.innerText}}),(r=n.details).push.apply(r,o.map(function(e){return e.trim()}).filter(function(e){return""!=e}))}var r});var o=e.querySelector("div.itemimage img");o&&(o.classList.contains("userpicture")?n.avatarUrl=o.getAttribute("src"):n.iconUrl=o.getAttribute("src")),n.heading&&n.url&&t.push(n)}),t},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(6),i=n(24),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.timeUtils=t,this.logger=e.getInstance("CoreFormatDatePipe")}return e.prototype.transform=function(e,t,n){if(e=e||Date.now(),t=t||"strftimedaydatetime","string"==typeof e){var o=parseInt(e,10);if(isNaN(o))return this.logger.error("Invalid value received",e),e;e=o}return 0!=t.indexOf("strf")&&0!=t.indexOf("df")||(t="core."+t),void 0===n&&(n=0!=t.indexOf("core.df")),this.timeUtils.userDate(e,t,n)},e=l([Object(o.S)({name:"coreFormatDate"}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(10),l=n(6),a=n(18),s=n(1),u=n(4),c=n(22),d=n(2),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,r,i,l,a,s,u){this.filepoolProvider=n,this.platform=r,this.sitesProvider=i,this.domUtils=l,this.urlUtils=a,this.appProvider=s,this.utils=u,this.onLoad=new o.v,this.loaded=!1,this.initialized=!1,this.invalid=!1,this.element=e.nativeElement||e,this.logger=t.getInstance("CoreExternalContentDirective")}return e.prototype.ngAfterViewInit=function(){this.checkAndHandleExternalContent(),this.initialized=!0},e.prototype.ngOnChanges=function(e){e&&this.initialized&&this.checkAndHandleExternalContent()},e.prototype.addSource=function(e){if("SOURCE"===this.element.tagName){var t=document.createElement("source"),n=this.element.getAttribute("type");t.setAttribute("src",e),n&&(this.platform.is("android")&&"video/quicktime"==n?t.setAttribute("type","video/mp4"):t.setAttribute("type",n)),this.element.parentNode.insertBefore(t,this.element)}},e.prototype.checkAndHandleExternalContent=function(){var e,t,n=this,o=this.sitesProvider.getCurrentSite(),r=this.siteId||o&&o.getId(),i=this.element.tagName;if(this.handleInlineStyles(r).catch(function(e){n.logger.error("Error treating inline styles.",n.element)}),"A"===i)e="href",t=this.href;else if("IMG"===i)e="src",t=this.src;else{if("AUDIO"!==i&&"VIDEO"!==i&&"SOURCE"!==i&&"TRACK"!==i)return void(this.invalid=!0);e="src",t=this.targetSrc||this.src,"VIDEO"===i&&this.poster&&this.handleExternalContent("poster",this.poster,r).catch(function(){})}if(t&&0===t.indexOf("data:"))return this.invalid=!0,this.onLoad.emit(),void(this.loaded=!0);this.handleExternalContent(e,t,r).catch(function(){"IMG"===i&&(t?n.waitForLoad():(n.onLoad.emit(),n.loaded=!0))})},e.prototype.handleExternalContent=function(e,t,n){var o=this,r=this.element.tagName;if("VIDEO"==r&&"poster"!=e){var i=this.element;i.textTracks&&(i.textTracks.onaddtrack=function(e){var t=e.track;t&&(t.oncuechange=function(){var e=o.platform.is("tablet")||o.platform.is("android")?90:80;Array.from(t.cues).forEach(function(t){t.snapToLines=!1,t.line=e,t.size=100}),t.oncuechange=null})})}return t&&t.match(/^https?:\/\//i)&&("A"!==r||this.urlUtils.isDownloadableUrl(t))?this.sitesProvider.getSite(n).then(function(i){if(!i.canDownloadFiles()&&o.urlUtils.isPluginFileUrl(t))return o.element.parentElement.removeChild(o.element),Promise.reject(null);var l="IMG"==r||"TRACK"==r||"poster"==e;return("src"===e&&"SOURCE"!==r&&"TRACK"!==r&&"VIDEO"!==r&&"AUDIO"!==r?o.filepoolProvider.getSrcByUrl(n,t,o.component,o.componentId,0,!0,l):o.filepoolProvider.getUrlByUrl(n,t,o.component,o.componentId,0,!0,l)).then(function(i){if(i.match(/^https?:\/\//i)&&(i+="#moodlemobile-embedded"),o.logger.debug("Using URL "+i+" for "+t),"SOURCE"===r?o.addSource(i):("IMG"===r&&(o.loaded=!1,o.waitForLoad()),o.element.setAttribute(e,i),o.element.setAttribute("data-original-"+e,t)),0===i.indexOf("http")&&"poster"!=e&&("VIDEO"==r||"AUDIO"==r||"A"==r||"SOURCE"==r)){var l="A"==r?"click":"play",a=o.element;if("SOURCE"==r&&!(a=o.domUtils.closest(o.element,"video,audio")))return;a.addEventListener(l,function(){o.appProvider.isWifi()&&o.filepoolProvider.getUrlByUrl(n,t,o.component,o.componentId,0,!1)})}})}):(this.logger.debug("Ignoring non-downloadable URL: "+t),"SOURCE"===r&&this.addSource(t),Promise.reject(null))},e.prototype.handleInlineStyles=function(e){var t=this,n=this.element.getAttribute("style");if(!n)return Promise.resolve();var o=n.match(/https?:\/\/[^"'\) ;]*/g);if(!o||!o.length)return Promise.resolve();var r=[];return(o=this.utils.uniqueArray(o)).forEach(function(o){r.push(t.filepoolProvider.getUrlByUrl(e,o,t.component,t.componentId,0,!0,!0).then(function(e){t.logger.debug("Using URL "+e+" for "+o+" in inline styles"),n=n.replace(new RegExp(o,"gi"),e)}))}),this.utils.allPromises(r).then(function(){t.element.setAttribute("style",n)})},e.prototype.waitForLoad=function(){var e=this,t=function(){e.element.removeEventListener("load",t),e.element.removeEventListener("error",t),e.onLoad.emit(),e.loaded=!0};this.element.addEventListener("load",t),this.element.addEventListener("error",t)},f([Object(o.D)(),p("design:type",String)],e.prototype,"siteId",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"component",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"componentId",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"src",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"href",void 0),f([Object(o.D)("target-src"),p("design:type",String)],e.prototype,"targetSrc",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"poster",void 0),f([Object(o.O)(),p("design:type",Object)],e.prototype,"onLoad",void 0),e=f([Object(o.s)({selector:"[core-external-content]"}),p("design:paramtypes",[o.t,l.a,a.a,r.v,s.a,u.a,c.a,i.a,d.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(53),i=n(10),l=n(9),a=n(1),s=n(46),u=n(2),c=n(201),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.appProvider=e,this.eventsProvider=t,this.sitesProvider=n,this.userProvider=o,this.utils=r,this.ratingOffline=i,this.ROOT_CACHE_KEY="CoreRating:"}return t=e,e.prototype.isAddRatingWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_rating_add_rating")},e.prototype.addRating=function(e,n,o,r,i,l,a,s,u,c,d,f){var p=this;f=f||this.sitesProvider.getCurrentSiteId();var h=function(){return p.ratingOffline.addRating(e,n,o,r,i,l,a,s,u,c,d,f).then(function(){return p.eventsProvider.trigger(t.RATING_SAVED_EVENT,{component:e,ratingArea:n,contextLevel:o,instanceId:r,itemSetId:l,itemId:i},f),null})};return this.appProvider.isOnline()?this.ratingOffline.deleteRating(e,n,o,r,i,f).then(function(){return p.addRatingOnline(e,n,o,r,i,s,u,c,d,f).catch(function(e){return p.utils.isWebServiceError(e)?Promise.reject(e):h()})}):h()},e.prototype.addRatingOnline=function(e,n,o,r,i,l,a,s,u,c){var d=this;return this.sitesProvider.getSite(c).then(function(c){return c.write("core_rating_add_rating",{contextlevel:o,instanceid:r,component:e,ratingarea:n,itemid:i,scaleid:l,rating:a,rateduserid:s,aggregation:u}).then(function(a){return d.invalidateRatingItems(o,r,e,n,i,l).then(function(){return d.eventsProvider.trigger(t.AGGREGATE_CHANGED_EVENT,{contextLevel:o,instanceId:r,component:e,ratingArea:n,itemId:i,aggregate:a.aggregate,count:a.count}),a})})})},e.prototype.getItemRatings=function(e,t,n,o,i,l,a,s,u,c){var d=this;return void 0===a&&(a="timemodified"),void 0===c&&(c=!1),this.sitesProvider.getSite(u).then(function(u){var f={contextlevel:e,instanceid:t,component:n,ratingarea:o,itemid:i,scaleid:l,sort:a},p={cacheKey:d.getItemRatingsCacheKey(e,t,n,o,i,l,a),updateFrequency:r.a.FREQUENCY_RARELY};return c&&(p.getFromCache=!1,p.emergencyCache=!1),u.read("core_rating_get_item_ratings",f,p).then(function(e){if(!e||!e.ratings)return Promise.reject(null);var t=e.ratings.map(function(e){return d.userProvider.getProfile(e.userid,s,!0,u.id).then(function(t){e.userpictureurl=t.profileimageurl}).catch(function(){e.userpictureurl=null})});return Promise.all(t).then(function(){return e.ratings})})})},e.prototype.invalidateRatingItems=function(e,t,n,o,r,i,l,a){var s=this;return void 0===l&&(l="timemodified"),this.sitesProvider.getSite(a).then(function(a){var u=s.getItemRatingsCacheKey(e,t,n,o,r,i,l);return a.invalidateWsCacheForKey(u)})},e.prototype.isRatingDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CoreRating")},e.prototype.isRatingDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isRatingDisabledInSite(e)})},e.prototype.mergeRatingInfos=function(e){var t=null,n={},o={};return e.forEach(function(e){e&&(t||(t=Object.assign({},e)),(e.scales||[]).forEach(function(e){n[e.id]=e}),(e.ratings||[]).forEach(function(e){o[e.itemid]=e}))}),t&&(t.scales=this.utils.objectToArray(n),t.ratings=this.utils.objectToArray(o)),t},e.prototype.prefetchRatings=function(e,t,n,o,r,i){var l=this;return r&&r.ratings?this.sitesProvider.getSite(i).then(function(i){var a=r.ratings.map(function(a){return l.getItemRatings(e,t,r.component,r.ratingarea,a.itemid,n,void 0,o,i.id,!0).then(function(e){var t=e.map(function(e){return e.userid});return l.userProvider.prefetchProfiles(t,o,i.id)})});return Promise.all(a)}):Promise.resolve()},e.prototype.getItemRatingsCacheKey=function(e,t,n,o,r,i,l){return""+this.ROOT_CACHE_KEY+e+":"+t+":"+n+":"+o+":"+r+":"+i+":"+l},e.AGGREGATE_NONE=0,e.AGGREGATE_AVERAGE=1,e.AGGREGATE_COUNT=2,e.AGGREGATE_MAXIMUM=3,e.AGGREGATE_MINIMUM=4,e.AGGREGATE_SUM=5,e.UNSET_RATING=-999,e.AGGREGATE_CHANGED_EVENT="core_rating_aggregate_changed",e.RATING_SAVED_EVENT="core_rating_rating_saved",e=t=d([Object(o.A)(),f("design:paramtypes",[i.a,l.a,a.a,s.a,u.a,c.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(13),a=n(135),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.sitesProvider=t,this.courseProvider=n,this.forumProvider=o,this.logger=e.getInstance("CoreSiteHomeProvider")}return e.prototype.getNewsForum=function(e){return this.forumProvider.getCourseForums(e).then(function(e){for(var t=0;t<e.length;t++)if("news"==e[t].type)return e[t];return Promise.reject(null)})},e.prototype.invalidateNewsForum=function(e){return this.forumProvider.invalidateForumData(e)},e.prototype.isAvailable=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){if(t.isDisabledInSite(e))return!1;var n=e.getSiteHomeId();return t.logger.debug("Using WS call to check if site home is available."),t.courseProvider.getSections(n,!1,!0,{emergencyCache:!1},e.id).then(function(e){if(!e||!e.length)return Promise.reject(null);for(var t=0;t<e.length;t++){var n=e[t];if(n.summary||n.modules&&n.modules.length)return!0}return Promise.reject(null)}).catch(function(){var t=e.getStoredConfig();if(t&&t.frontpageloggedin){if(t.frontpageloggedin.split(",").length>0)return!0}return!1})}).catch(function(){return!1})},e.prototype.isDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isDisabledInSite(e)})},e.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreSiteHome")},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(57),i=n(1),l=n(11),a=n(135),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,n,o){this.fileProvider=e,this.sitesProvider=n,this.textUtils=o,this.siteSchema={name:"AddonModForumOfflineProvider",version:1,tables:[{name:t.DISCUSSIONS_TABLE,columns:[{name:"forumid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"subject",type:"TEXT"},{name:"message",type:"TEXT"},{name:"options",type:"TEXT"},{name:"groupid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["forumid","userid","timecreated"]},{name:t.REPLIES_TABLE,columns:[{name:"postid",type:"INTEGER"},{name:"discussionid",type:"INTEGER"},{name:"forumid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"subject",type:"TEXT"},{name:"message",type:"TEXT"},{name:"options",type:"TEXT"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["postid","userid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteNewDiscussion=function(e,n,o,r){return this.sitesProvider.getSite(o).then(function(o){var i={forumid:e,userid:r||o.getUserId(),timecreated:n};return o.getDb().deleteRecords(t.DISCUSSIONS_TABLE,i)})},e.prototype.getNewDiscussion=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){var l={forumid:e,userid:r||o.getUserId(),timecreated:n};return o.getDb().getRecord(t.DISCUSSIONS_TABLE,l).then(function(e){return e.options=i.textUtils.parseJSON(e.options),e})})},e.prototype.getAllNewDiscussions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.DISCUSSIONS_TABLE).then(n.parseRecordOptions.bind(n))})},e.prototype.hasNewDiscussions=function(e,t,n){return this.getNewDiscussions(e,t,n).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getNewDiscussions=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={forumid:e,userid:o||n.getUserId()};return n.getDb().getRecords(t.DISCUSSIONS_TABLE,i).then(r.parseRecordOptions.bind(r))})},e.prototype.addNewDiscussion=function(e,n,o,r,i,l,s,u,c,d){return this.sitesProvider.getSite(c).then(function(c){var f={forumid:e,name:n,courseid:o,subject:r,message:i,options:JSON.stringify(l||{}),groupid:s||a.a.ALL_PARTICIPANTS,userid:d||c.getUserId(),timecreated:u||(new Date).getTime()};return c.getDb().insertRecord(t.DISCUSSIONS_TABLE,f)})},e.prototype.deleteReply=function(e,n,o){return this.sitesProvider.getSite(n).then(function(n){var r={postid:e,userid:o||n.getUserId()};return n.getDb().deleteRecords(t.REPLIES_TABLE,r)})},e.prototype.getAllReplies=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.REPLIES_TABLE).then(n.parseRecordOptions.bind(n))})},e.prototype.hasForumReplies=function(e,t,n){return this.getForumReplies(e,t,n).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getForumReplies=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={forumid:e,userid:o||n.getUserId()};return n.getDb().getRecords(t.REPLIES_TABLE,i).then(r.parseRecordOptions.bind(r))})},e.prototype.hasDiscussionReplies=function(e,t,n){return this.getDiscussionReplies(e,t,n).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getDiscussionReplies=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={discussionid:e,userid:o||n.getUserId()};return n.getDb().getRecords(t.REPLIES_TABLE,i).then(r.parseRecordOptions.bind(r))})},e.prototype.replyPost=function(e,n,o,r,i,l,a,s,u,c){return this.sitesProvider.getSite(u).then(function(u){var d={postid:e,discussionid:n,forumid:o,name:r,courseid:i,subject:l,message:a,options:JSON.stringify(s||{}),userid:c||u.getUserId(),timecreated:(new Date).getTime()};return u.getDb().insertRecord(t.REPLIES_TABLE,d)})},e.prototype.getForumFolder=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=n.fileProvider.getSiteFolder(t.getId());return n.textUtils.concatenatePaths(o,"offlineforum/"+e)})},e.prototype.getNewDiscussionFolder=function(e,t,n){var o=this;return this.getForumFolder(e,n).then(function(e){return o.textUtils.concatenatePaths(e,"newdisc_"+t)})},e.prototype.getReplyFolder=function(e,t,n,o){var r=this;return this.getForumFolder(e,n).then(function(e){return r.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),r.textUtils.concatenatePaths(e,"reply_"+t+"_"+o)})})},e.prototype.parseRecordOptions=function(e){var t=this;return e.forEach(function(e){e.options=t.textUtils.parseJSON(e.options)}),e},e.DISCUSSIONS_TABLE="addon_mod_forum_discussions",e.REPLIES_TABLE="addon_mod_forum_replies",e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a])],e);var t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AddonModScormProvider});var __WEBPACK_IMPORTED_MODULE_0__angular_core__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__ngx_translate_core__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_2__providers_events__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_3__providers_filepool__=__webpack_require__(18),__WEBPACK_IMPORTED_MODULE_4__providers_logger__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_5__providers_sites__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_6__providers_sync__=__webpack_require__(81),__WEBPACK_IMPORTED_MODULE_7__providers_ws__=__webpack_require__(171),__WEBPACK_IMPORTED_MODULE_8__providers_utils_text__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_9__providers_utils_time__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_10__providers_utils_utils__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_11__scorm_offline__=__webpack_require__(264),__WEBPACK_IMPORTED_MODULE_12__classes_site__=__webpack_require__(53),__WEBPACK_IMPORTED_MODULE_13__core_constants__=__webpack_require__(40),__WEBPACK_IMPORTED_MODULE_14__core_course_providers_log_helper__=__webpack_require__(65),__decorate=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},AddonModScormProvider=function(){function AddonModScormProvider(e,t,n,o,r,i,l,a,s,u,c,d){this.translate=t,this.sitesProvider=n,this.wsProvider=o,this.textUtils=r,this.utils=i,this.filepoolProvider=l,this.scormOfflineProvider=a,this.timeUtils=s,this.syncProvider=u,this.eventsProvider=c,this.logHelper=d,this.VALID_STATUSES=["notattempted","passed","completed","failed","incomplete","browsed","suspend"],this.STATUSES={passed:"passed",completed:"completed",failed:"failed",incomplete:"incomplete",browsed:"browsed","not attempted":"notattempted",p:"passed",c:"completed",f:"failed",i:"incomplete",b:"browsed",n:"notattempted"},this.ROOT_CACHE_KEY="mmaModScorm:",this.logger=e.getInstance("AddonModScormProvider")}return AddonModScormProvider_1=AddonModScormProvider,AddonModScormProvider.prototype.calculateScormGrade=function(e,t){if(!t||!Object.keys(t).length)return-1;switch(e.whatgrade){case AddonModScormProvider_1.FIRSTATTEMPT:return t[1]?t[1].grade:-1;case AddonModScormProvider_1.LASTATTEMPT:var n=0;return Object.keys(t).forEach(function(e){n=Math.max(Number(e),n)}),n>0?t[n].grade:-1;case AddonModScormProvider_1.HIGHESTATTEMPT:var o=0;for(var r in t)o=Math.max(t[r].grade,o);return o;case AddonModScormProvider_1.AVERAGEATTEMPT:var i=0,l=0;for(var r in t)i+=t[r].grade,l++;return Math.round(i/l);default:return-1}},AddonModScormProvider.prototype.calculateScormSize=function(e){return e.packagesize?Promise.resolve(e.packagesize):this.wsProvider.getRemoteFileSize(this.getPackageUrl(e))},AddonModScormProvider.prototype.countAttemptsLeft=function(e,t){return 0==e.maxattempt?Number.MAX_VALUE:(t=Number(t),isNaN(t)?-1:e.maxattempt-t)},AddonModScormProvider.prototype.determineAttemptAndMode=function(e,t,n,o,r){if(t==AddonModScormProvider_1.MODEBROWSE){if(!e.hidebrowse)return 0==n&&(n=1,o=!0),{mode:t,attempt:n,newAttempt:o};t=AddonModScormProvider_1.MODENORMAL}return e.forcenewattempt==AddonModScormProvider_1.SCORM_FORCEATTEMPT_ALWAYS?{mode:AddonModScormProvider_1.MODENORMAL,attempt:n+1,newAttempt:!0}:(0==n?o=!0:r?o=!1:e.forcenewattempt&&(o=!0),o&&(0==e.maxattempt||n<e.maxattempt)?(n++,t=AddonModScormProvider_1.MODENORMAL):t=r?AddonModScormProvider_1.MODENORMAL:AddonModScormProvider_1.MODEREVIEW,{mode:t,attempt:n,newAttempt:o})},AddonModScormProvider.prototype.displayTocInPlayer=function(e){return 3!==e.hidetoc},AddonModScormProvider.prototype.evalPrerequisites=function(prerequisites,trackData){var _this=this,stack=[];prerequisites=prerequisites.replace(/&amp;/gi,"&"),prerequisites=prerequisites.replace(/(&|\||\(|\)|\~)/gi,"\t$1\t"),prerequisites=prerequisites.replace(/&/gi,"&&"),prerequisites=prerequisites.replace(/\|/gi,"||");var elements=prerequisites.trim().split("\t");return elements.forEach(function(e){if(e=e.trim()){if(!e.match(/^(&&|\|\||\(|\))$/gi)){var t=/^(\d+)\*\{(.+)\}$/,n=/^(.+)(\=|\<\>)(.+)$/,o=void 0;if(t.test(e)){var r=(o=e.match(t))[1],i=0;o[2].split(",").forEach(function(e){e=e.trim(),void 0===trackData[e]||"completed"!=trackData[e].status&&"passed"!=trackData[e].status||i++}),e=i>=r?"true":"false"}else if("~"==e)e="!";else if(n.test(e))if(o=e.match(n),e=o[1].trim(),void 0!==trackData[e]){var l=o[3].trim().replace(/(\'|\")/gi);void 0!==_this.STATUSES[l]&&(l=_this.STATUSES[l]),e="('"+trackData[e].status+"' "+("<>"==o[2]?"!=":"==")+" '"+l+"')"}else e="false";else e=void 0===trackData[e]||"completed"!=trackData[e].status&&"passed"!=trackData[e].status?"false":"true"}stack.push(" "+e+" ")}}),eval(stack.join("")+";")},AddonModScormProvider.prototype.formatGrade=function(e,t){return void 0===t||-1==t?this.translate.instant("core.none"):e.grademethod!==AddonModScormProvider_1.GRADESCOES&&e.maxgrade>0?(t=t/e.maxgrade*100,this.translate.instant("core.percentagenumber",{$a:this.textUtils.roundToDecimals(t,2)})):String(t)},AddonModScormProvider.prototype.formatTocToArray=function(e,t){var n=this;if(void 0===t&&(t=0),!e||!e.length)return[];var o=[];return e.forEach(function(e){e.level=t,o.push(e),o=o.concat(n.formatTocToArray(e.children,t+1))}),o},AddonModScormProvider.prototype.getAccessInformation=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){if(!n.wsAvailable("mod_scorm_get_scorm_access_information"))return Promise.resolve({});var r={scormid:e},i={cacheKey:o.getAccessInformationCacheKey(e),omitExpires:t};return n.read("mod_scorm_get_scorm_access_information",r,i)})},AddonModScormProvider.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInfo:"+e},AddonModScormProvider.prototype.getAttemptCount=function(e,t,n,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(l){r=r||l.getUserId();var a={lastAttempt:{number:0,offline:!1}},s=[];return s.push(i.getAttemptCountOnline(e,t,n,o,r).then(function(e){a.online=[];for(var t=1;t<=e;t++)a.online.push(t);e>a.lastAttempt.number&&(a.lastAttempt.number=e,a.lastAttempt.offline=!1)})),s.push(i.scormOfflineProvider.getAttempts(e,o,r).then(function(e){a.offline=e.map(function(e){return e.attempt>=a.lastAttempt.number&&(a.lastAttempt.number=e.attempt,a.lastAttempt.offline=!0),e.attempt})})),Promise.all(s).then(function(){var e=a.online.length;return a.offline.forEach(function(t){-1==a.online.indexOf(t)&&e++}),a.total=e,a})})},AddonModScormProvider.prototype.getAttemptCountCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"attemptcount:"+e+":"+t},AddonModScormProvider.prototype.getAttemptCountOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId();var l={scormid:e,userid:r,ignoremissingcompletion:t?1:0},a={cacheKey:i.getAttemptCountCacheKey(e,r),updateFrequency:__WEBPACK_IMPORTED_MODULE_12__classes_site__.a.FREQUENCY_SOMETIMES};return n&&(a.getFromCache=!1,a.emergencyCache=!1),o.read("mod_scorm_get_scorm_attempt_count",l,a).then(function(e){return e&&void 0!==e.attemptscount?e.attemptscount:Promise.reject(null)})})},AddonModScormProvider.prototype.getAttemptGrade=function(e,t,n,o){var r={scos:0,values:0,max:0,sum:0};return this.getScormUserData(e.id,t,void 0,n,!1,o).then(function(t){for(var n in t){var o=t[n].userdata;if("completed"!=o.status&&"passed"!=o.status||r.scos++,o.score_raw||void 0!==e.scormtype&&"sco"==e.scormtype&&void 0!==o.score_raw){var i=parseFloat(o.score_raw);r.values++,r.sum+=i,r.max=Math.max(i,r.max)}}var l=0;switch(e.grademethod){case AddonModScormProvider_1.GRADEHIGHEST:l=r.max;break;case AddonModScormProvider_1.GRADEAVERAGE:l=r.values>0?r.sum/r.values:0;break;case AddonModScormProvider_1.GRADESUM:l=r.sum;break;case AddonModScormProvider_1.GRADESCOES:l=r.scos;break;default:l=r.max}return l})},AddonModScormProvider.prototype.getOrganizations=function(e,t){return this.getScos(e,void 0,!1,t).then(function(e){var t=[];return e.forEach(function(e){""==e.organization&&"/"==e.parent&&""==e.scormtype&&t.push({identifier:e.identifier,title:e.title,sortorder:e.sortorder})}),t})},AddonModScormProvider.prototype.getOrganizationToc=function(e,t,n,o,r){return this.getScosWithData(e,t,n,o,!1,r).then(function(e){var t={},o=[];return e.forEach(function(r,i){r.children=[],t[r.identifier]=i,"/"!==r.parent&&(r.parent==n?o.push(r):e[t[r.parent]].children.push(r))}),o})},AddonModScormProvider.prototype.getPackageUrl=function(e){return e.packageurl?e.packageurl:e.reference?e.reference:""},AddonModScormProvider.prototype.getScormUserData=function(e,t,n,o,r,i){var l=this;if(i=i||this.sitesProvider.getCurrentSiteId(),o){return(n?Promise.resolve(n):this.getScos(e,void 0,void 0,i)).then(function(n){return l.scormOfflineProvider.getScormUserData(e,t,n,i)})}return this.getScormUserDataOnline(e,t,r,i)},AddonModScormProvider.prototype.getScormUserDataCacheKey=function(e,t){return this.getScormUserDataCommonCacheKey(e)+":"+t},AddonModScormProvider.prototype.getScormUserDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userdata:"+e},AddonModScormProvider.prototype.getScormUserDataOnline=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={scormid:e,attempt:t},l={cacheKey:r.getScormUserDataCacheKey(e,t)};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_scorm_get_scorm_user_data",i,l).then(function(e){if(e&&e.data){var t={};return e.data.forEach(function(e){e.defaultdata=r.utils.objectToKeyValueMap(e.defaultdata,"element","value"),e.userdata=r.utils.objectToKeyValueMap(e.userdata,"element","value"),t[e.scoid]=e}),t}return Promise.reject(null)})})},AddonModScormProvider.prototype.getScosCacheKey=function(e){return this.ROOT_CACHE_KEY+"scos:"+e},AddonModScormProvider.prototype.getScos=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(o){var i={scormid:e},l={cacheKey:r.getScosCacheKey(e),updateFrequency:__WEBPACK_IMPORTED_MODULE_12__classes_site__.a.FREQUENCY_SOMETIMES};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_scorm_get_scorm_scoes",i,l).then(function(e){return e&&e.scoes?t?e.scoes.filter(function(e){return e.organization==t}):e.scoes:Promise.reject(null)})})},AddonModScormProvider.prototype.getScosWithData=function(e,t,n,o,r,i){var l=this;return this.getScos(e,n,r,i).then(function(n){return l.getScormUserData(e,t,n,o,r,i).then(function(e){var t={};return n.forEach(function(n){t[n.identifier]=e[n.id].userdata}),n.forEach(function(n){var o=e[n.id].userdata;o&&(n.isvisible=void 0===o.isvisible||o.isvisible&&"false"!==o.isvisible,n.prereq=void 0===o.prerequisites||l.evalPrerequisites(o.prerequisites,t),n.status=void 0===o.status||""===o.status?"notattempted":o.status,n.exitvar=void 0===o.exitvar?"cmi.core.exit":o.exitvar,n.exitvalue=o[n.exitvar],n.score_raw=o.score_raw)}),n})})},AddonModScormProvider.prototype.getScoSrc=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r,i=t.launch;if(t.extradata&&t.extradata.length)for(var l=0;l<t.extradata.length;l++){var a=t.extradata[l];if("parameters"==a.element){r=a.value;break}}if(r){var s=i.indexOf("?")>-1?"&":"?";"?"==r.charAt(0)&&(r=r.substr(1)),i+=s+r}return this.isExternalLink(i)?Promise.resolve(i):this.filepoolProvider.getPackageDirUrlByUrl(n,e.moduleurl).then(function(e){return o.textUtils.concatenatePaths(e,i)})},AddonModScormProvider.prototype.getScormFolder=function(e,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.getPackageDirPathByUrl(t,e)},AddonModScormProvider.prototype.getScormFileList=function(e){var t=[];return this.isScormUnsupported(e)||e.warningMessage||t.push({fileurl:this.getPackageUrl(e),filepath:"/",filename:e.reference,filesize:e.packagesize,type:"file",timemodified:0}),t},AddonModScormProvider.prototype.getScoStatusIcon=function(e,t){var n="",o="",r="",i=e.status;return e.isvisible&&(this.VALID_STATUSES.indexOf(i)>=0?("sco"==e.scormtype?(n=i,o=i):(n="asset",o="assetlaunched"),t||(t=this.isStatusIncomplete(i)),t&&"suspend"==e.exitvalue&&(n="suspend",r=" - "+this.translate.instant("addon.mod_scorm.suspended"))):(t=!0,o=n="sco"==e.scormtype?"notattempted":"asset")),""==n&&(n="notattempted",o="notattempted",r=""),e.incomplete=t,{icon:AddonModScormProvider_1.STATUS_TO_ICON[n],description:this.translate.instant("addon.mod_scorm."+o)+r}},AddonModScormProvider.prototype.getScormDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"scorm:"+e},AddonModScormProvider.prototype.getScormByField=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={courseids:[e]},s={cacheKey:l.getScormDataCacheKey(e),updateFrequency:__WEBPACK_IMPORTED_MODULE_12__classes_site__.a.FREQUENCY_RARELY};return r&&(s.omitExpires=!0),i.read("mod_scorm_get_scorms_by_courses",a,s).then(function(e){if(e&&e.scorms){var r=e.scorms.find(function(e){return e[t]==n});if(r){if(void 0===r.timeopen)for(var i in e.warnings){var l=e.warnings[i];if(l.itemid===r.id){r.warningMessage=l.message;break}}return r.moduleurl=o,r}}return Promise.reject(null)})})},AddonModScormProvider.prototype.getScorm=function(e,t,n,o,r){return this.getScormByField(e,"coursemodule",t,n,o,r)},AddonModScormProvider.prototype.getScormById=function(e,t,n,o,r){return this.getScormByField(e,"id",t,n,o,r)},AddonModScormProvider.prototype.getScormGradeMethod=function(e){if(1==e.maxattempt)switch(parseInt(e.grademethod,10)){case AddonModScormProvider_1.GRADEHIGHEST:return this.translate.instant("addon.mod_scorm.gradehighest");case AddonModScormProvider_1.GRADEAVERAGE:return this.translate.instant("addon.mod_scorm.gradeaverage");case AddonModScormProvider_1.GRADESUM:return this.translate.instant("addon.mod_scorm.gradesum");case AddonModScormProvider_1.GRADESCOES:return this.translate.instant("addon.mod_scorm.gradescoes");default:return""}else switch(parseInt(e.whatgrade,10)){case AddonModScormProvider_1.HIGHESTATTEMPT:return this.translate.instant("addon.mod_scorm.highestattempt");case AddonModScormProvider_1.AVERAGEATTEMPT:return this.translate.instant("addon.mod_scorm.averageattempt");case AddonModScormProvider_1.FIRSTATTEMPT:return this.translate.instant("addon.mod_scorm.firstattempt");case AddonModScormProvider_1.LASTATTEMPT:return this.translate.instant("addon.mod_scorm.lastattempt");default:return""}},AddonModScormProvider.prototype.invalidateAccessInformation=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getAccessInformationCacheKey(e))})},AddonModScormProvider.prototype.invalidateAllScormData=function(e,t,n){var o=[];return o.push(this.invalidateAttemptCount(e,t,n)),o.push(this.invalidateScos(e,t)),o.push(this.invalidateScormUserData(e,t)),o.push(this.invalidateAccessInformation(e,t)),Promise.all(o)},AddonModScormProvider.prototype.invalidateAttemptCount=function(e,t,n){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getAttemptCountCacheKey(e,n))})},AddonModScormProvider.prototype.invalidateContent=function(e,t,n,o){var r=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getScorm(t,e,void 0,!1,n).then(function(t){var i=[];return i.push(r.invalidateAllScormData(t.id,n,o)),i.push(r.filepoolProvider.invalidateFilesByComponent(n,AddonModScormProvider_1.COMPONENT,e,!0)),Promise.all(i)})},AddonModScormProvider.prototype.invalidateScormData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getScormDataCacheKey(e))})},AddonModScormProvider.prototype.invalidateScormUserData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getScormUserDataCommonCacheKey(e))})},AddonModScormProvider.prototype.invalidateScos=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getScosCacheKey(e))})},AddonModScormProvider.prototype.isAttemptIncomplete=function(e,t,n,o,r){var i=this;return this.getScosWithData(e,t,void 0,n,o,r).then(function(e){for(var t in e){var n=e[t];if(n.isvisible&&n.launch&&i.isStatusIncomplete(n.status))return!0}return!1})},AddonModScormProvider.prototype.isExternalLink=function(e){return!!(e=e.toLowerCase()).match(/https?:\/\//)||"www."==e.substr(0,4)},AddonModScormProvider.prototype.isScormClosed=function(e){var t=this.timeUtils.timestamp();return e.timeclose>0&&t>e.timeclose},AddonModScormProvider.prototype.isScormDownloadable=function(e){return void 0!==e.protectpackagedownloads&&!1===e.protectpackagedownloads},AddonModScormProvider.prototype.isScormOpen=function(e){var t=this.timeUtils.timestamp();return!(e.timeopen>0&&e.timeopen>t)},AddonModScormProvider.prototype.isScormUnsupported=function(e){return this.isScormValidVersion(e)?this.isScormDownloadable(e)?this.isValidPackageUrl(this.getPackageUrl(e))?void 0:"addon.mod_scorm.errorpackagefile":"addon.mod_scorm.errornotdownloadable":"addon.mod_scorm.errorinvalidversion"},AddonModScormProvider.prototype.isScormValidVersion=function(e){return"SCORM_1.2"==e.version},AddonModScormProvider.prototype.isStatusIncomplete=function(e){return!e||"notattempted"==e||"incomplete"==e||"browsed"==e},AddonModScormProvider.prototype.isValidPackageUrl=function(e){return!!e&&!(e.indexOf("imsmanifest.xml")>-1)},AddonModScormProvider.prototype.logLaunchSco=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(i){return r.logHelper.logSingle("mod_scorm_launch_sco",{scormid:e,scoid:t},AddonModScormProvider_1.COMPONENT,e,n,"scorm",{scoid:t},o)})},AddonModScormProvider.prototype.logView=function(e,t,n){return this.logHelper.logSingle("mod_scorm_view_scorm",{scormid:e},AddonModScormProvider_1.COMPONENT,e,t,"scorm",{},n)},AddonModScormProvider.prototype.saveTracks=function(e,t,n,o,r,i,l){var a=this;if(l=l||this.sitesProvider.getCurrentSiteId(),r){return(i?Promise.resolve(i):this.getScormUserData(o.id,t,void 0,r,!1,l)).then(function(r){return a.scormOfflineProvider.saveTracks(o,e,t,n,r,l)})}return this.saveTracksOnline(o.id,e,t,n,l).then(function(){a.updateUserDataAfterSave(o.id,t,n,l),a.eventsProvider.trigger(AddonModScormProvider_1.DATA_SENT_EVENT,{scormId:o.id,scoId:e,attempt:t},a.sitesProvider.getCurrentSiteId())})},AddonModScormProvider.prototype.saveTracksOnline=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){if(!o||!o.length)return Promise.resolve();var l={scoid:t,attempt:n,tracks:o};return i.syncProvider.blockOperation(AddonModScormProvider_1.COMPONENT,e,"saveTracksOnline",r.id),r.write("mod_scorm_insert_scorm_tracks",l).then(function(e){return e&&e.trackids?e.trackids:Promise.reject(null)}).finally(function(){i.syncProvider.unblockOperation(AddonModScormProvider_1.COMPONENT,e,"saveTracksOnline",r.id)})})},AddonModScormProvider.prototype.saveTracksSync=function(e,t,n,o,r,i){if(r)return this.scormOfflineProvider.saveTracksSync(o,e,t,n,i);var l=this.saveTracksSyncOnline(e,t,n);return l&&(this.updateUserDataAfterSave(o.id,t,n),this.eventsProvider.trigger(AddonModScormProvider_1.DATA_SENT_EVENT,{scormId:o.id,scoId:e,attempt:t},this.sitesProvider.getCurrentSiteId())),l},AddonModScormProvider.prototype.saveTracksSyncOnline=function(e,t,n){var o,r={scoid:e,attempt:t,tracks:n},i=this.sitesProvider.getCurrentSite(),l={siteUrl:i.getURL(),wsToken:i.getToken()},a="mod_scorm_insert_scorm_tracks";if(!n||!n.length)return!0;if(!i.wsAvailable(a,!1)){if(!i.wsAvailable(__WEBPACK_IMPORTED_MODULE_13__core_constants__.a.WS_PREFIX+a,!1))return this.logger.error('WS function "'+a+'" is not available, even in compatibility mode.'),!1;a=__WEBPACK_IMPORTED_MODULE_13__core_constants__.a.WS_PREFIX+a}return!(!(o=this.wsProvider.syncCall(a,r,l))||o.error||!o.trackids)},AddonModScormProvider.prototype.shouldDownloadMainFile=function(e,t,n){n=n||this.sitesProvider.getCurrentSiteId();var o=AddonModScormProvider_1.COMPONENT;return void 0===t?this.filepoolProvider.getPackageData(n,o,e.coursemodule).then(function(t){return!(t.status==__WEBPACK_IMPORTED_MODULE_13__core_constants__.a.OUTDATED||t.status==__WEBPACK_IMPORTED_MODULE_13__core_constants__.a.DOWNLOADING&&t.previous==__WEBPACK_IMPORTED_MODULE_13__core_constants__.a.OUTDATED)||t.extra!=e.sha1hash}).catch(function(){return!0}):t?this.filepoolProvider.getPackageExtra(n,o,e.coursemodule).then(function(t){return e.sha1hash!=t}).catch(function(){return!0}):Promise.resolve(!0)},AddonModScormProvider.prototype.updateUserDataAfterSave=function(e,t,n,o){if(!n||!n.length)return Promise.resolve();for(var r=!1,i=0,l=n.length;i<l;i++){var a=n[i];if(a.element&&a.element.indexOf(".")>-1){r=!0;break}}return r?this.getScormUserDataOnline(e,t,!0,o):Promise.resolve()},AddonModScormProvider.COMPONENT="mmaModScorm",AddonModScormProvider.GRADESCOES=0,AddonModScormProvider.GRADEHIGHEST=1,AddonModScormProvider.GRADEAVERAGE=2,AddonModScormProvider.GRADESUM=3,AddonModScormProvider.HIGHESTATTEMPT=0,AddonModScormProvider.AVERAGEATTEMPT=1,AddonModScormProvider.FIRSTATTEMPT=2,AddonModScormProvider.LASTATTEMPT=3,AddonModScormProvider.MODEBROWSE="browse",AddonModScormProvider.MODENORMAL="normal",AddonModScormProvider.MODEREVIEW="review",AddonModScormProvider.SCORM_FORCEATTEMPT_NO=0,AddonModScormProvider.SCORM_FORCEATTEMPT_ONCOMPLETE=1,AddonModScormProvider.SCORM_FORCEATTEMPT_ALWAYS=2,AddonModScormProvider.SKIPVIEW_NEVER=0,AddonModScormProvider.SKIPVIEW_FIRST=1,AddonModScormProvider.SKIPVIEW_ALWAYS=2,AddonModScormProvider.LAUNCH_NEXT_SCO_EVENT="addon_mod_scorm_launch_next_sco",AddonModScormProvider.LAUNCH_PREV_SCO_EVENT="addon_mod_scorm_launch_prev_sco",AddonModScormProvider.UPDATE_TOC_EVENT="addon_mod_scorm_update_toc",AddonModScormProvider.GO_OFFLINE_EVENT="addon_mod_scorm_go_offline",AddonModScormProvider.DATA_SENT_EVENT="addon_mod_scorm_data_sent",AddonModScormProvider.STATUS_TO_ICON={assetc:"fa-file-archive-o",asset:"fa-file-archive-o",browsed:"fa-book",completed:"fa-check-square-o",failed:"fa-times",incomplete:"fa-pencil-square-o",minus:"fa-minus",notattempted:"fa-square-o",passed:"fa-check",plus:"fa-plus",popdown:"fa-window-close-o",popup:"fa-window-restore",suspend:"fa-pause",wait:"fa-clock-o"},AddonModScormProvider=AddonModScormProvider_1=__decorate([Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__.A)(),__metadata("design:paramtypes",[__WEBPACK_IMPORTED_MODULE_4__providers_logger__.a,__WEBPACK_IMPORTED_MODULE_1__ngx_translate_core__.c,__WEBPACK_IMPORTED_MODULE_5__providers_sites__.a,__WEBPACK_IMPORTED_MODULE_7__providers_ws__.a,__WEBPACK_IMPORTED_MODULE_8__providers_utils_text__.a,__WEBPACK_IMPORTED_MODULE_10__providers_utils_utils__.a,__WEBPACK_IMPORTED_MODULE_3__providers_filepool__.a,__WEBPACK_IMPORTED_MODULE_11__scorm_offline__.a,__WEBPACK_IMPORTED_MODULE_9__providers_utils_time__.a,__WEBPACK_IMPORTED_MODULE_6__providers_sync__.a,__WEBPACK_IMPORTED_MODULE_2__providers_events__.a,__WEBPACK_IMPORTED_MODULE_14__core_course_providers_log_helper__.a])],AddonModScormProvider);var AddonModScormProvider_1}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(9),l=n(6),a=n(1),s=n(2),u=n(10),c=n(18),d=n(65),f=n(289),p=n(53),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,l,a,s,u){var c=this;this.sitesProvider=t,this.appProvider=n,this.filepoolProvider=o,this.utils=r,this.translate=l,this.wikiOffline=a,this.logHelper=u,this.ROOT_CACHE_KEY="mmaModWiki:",this.subwikiListsCache={},this.logger=e.getInstance("AddonModWikiProvider"),s.on(i.a.LOGIN,function(){c.clearSubwikiList()})}return t=e,e.prototype.clearSubwikiList=function(e){void 0===e?this.subwikiListsCache={}:delete this.subwikiListsCache[e]},e.prototype.editPage=function(e,t,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={pageid:e,content:t};return n&&(r.section=n),o.write("mod_wiki_edit_page",r).then(function(e){return e.pageid||Promise.reject(null)})})},e.prototype.getPageContents=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={pageid:e},l={cacheKey:r.getPageContentsCacheKey(e),updateFrequency:p.a.FREQUENCY_SOMETIMES};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_wiki_get_page_contents",i,l).then(function(e){return e.page||Promise.reject(null)})})},e.prototype.getPageContentsCacheKey=function(e){return this.ROOT_CACHE_KEY+"page:"+e},e.prototype.getPageForEditing=function(e,t,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={pageid:e};return t&&(r.section=t),n&&o.isVersionGreaterEqualThan("3.2")&&(r.lockonly=1),o.write("mod_wiki_get_page_for_editing",r).then(function(e){return e.pagesection||Promise.reject(null)})})},e.prototype.getSubwikiFiles=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={wikiid:e,groupid:t=t||-1,userid:n=n||0},s={cacheKey:l.getSubwikiFilesCacheKey(e,t,n),updateFrequency:p.a.FREQUENCY_SOMETIMES};return o?s.omitExpires=!0:r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_wiki_get_subwiki_files",a,s).then(function(e){return e.files||Promise.reject(null)})})},e.prototype.getSubwikiFilesCacheKey=function(e,t,n){return this.getSubwikiFilesCacheKeyPrefix(e)+":"+t+":"+n},e.prototype.getSubwikiFilesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"subwikifiles:"+e},e.prototype.getSubwikiList=function(e){return this.subwikiListsCache[e]},e.prototype.getSubwikiPages=function(e,t,n,o,r,i,l,a,s){var u=this;return void 0===o&&(o="title"),void 0===r&&(r="ASC"),this.sitesProvider.getSite(s).then(function(s){var c={wikiid:e,groupid:t=t||-1,userid:n=n||0,options:{sortby:o=o||"title",sortdirection:r=r||"ASC",includecontent:(i=i||!1)?1:0}},d={cacheKey:u.getSubwikiPagesCacheKey(e,t,n),updateFrequency:p.a.FREQUENCY_SOMETIMES};return l?d.omitExpires=!0:a&&(d.getFromCache=!1,d.emergencyCache=!1),s.read("mod_wiki_get_subwiki_pages",c,d).then(function(e){return e.pages||Promise.reject(null)})})},e.prototype.getSubwikiPagesCacheKey=function(e,t,n){return this.getSubwikiPagesCacheKeyPrefix(e)+":"+t+":"+n},e.prototype.getSubwikiPagesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"subwikipages:"+e},e.prototype.getSubwikis=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={wikiid:e},l={cacheKey:r.getSubwikisCacheKey(e),updateFrequency:p.a.FREQUENCY_RARELY};return t?l.omitExpires=!0:n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_wiki_get_subwikis",i,l).then(function(e){return e.subwikis||Promise.reject(null)})})},e.prototype.getSubwikisCacheKey=function(e){return this.ROOT_CACHE_KEY+"subwikis:"+e},e.prototype.getWiki=function(e,t,n,o){return this.getWikiByField(e,"coursemodule",t,n,o)},e.prototype.getWikiByField=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(o){var r={courseids:[e]},l={cacheKey:i.getWikiDataCacheKey(e),updateFrequency:p.a.FREQUENCY_RARELY};return o.read("mod_wiki_get_wikis_by_courses",r,l).then(function(e){if(e.wikis){var o=e.wikis.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getWikiById=function(e,t,n,o){return this.getWikiByField(e,"id",t,n,o)},e.prototype.getWikiDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"wiki:"+e},e.prototype.getWikiFileList=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return this.getSubwikis(e.id,t,n,o).then(function(e){var l=[];return e.forEach(function(e){l.push(r.getSubwikiFiles(e.wikiid,e.groupid,e.userid,t,n,o).then(function(e){i=i.concat(e)}))}),Promise.all(l).then(function(){return i})})},e.prototype.getWikiPageList=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return this.getSubwikis(e.id,t,n,o).then(function(e){var l=[];return e.forEach(function(e){l.push(r.getSubwikiPages(e.wikiid,e.groupid,e.userid,void 0,void 0,void 0,t,n,o).then(function(e){i=i.concat(e)}))}),Promise.all(l).then(function(){return i})})},e.prototype.invalidateContent=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getWiki(t,e,!1,n).then(function(e){var r=[];return r.push(o.invalidateWikiData(t,n)),r.push(o.invalidateSubwikis(e.id,n)),r.push(o.invalidateSubwikiPages(e.id,n)),r.push(o.invalidateSubwikiFiles(e.id,n)),Promise.all(r)})},e.prototype.invalidateFiles=function(e,n){return this.filepoolProvider.invalidateFilesByComponent(n,t.COMPONENT,e)},e.prototype.invalidatePage=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getPageContentsCacheKey(e))})},e.prototype.invalidateSubwikiFiles=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getSubwikiFilesCacheKeyPrefix(e))})},e.prototype.invalidateSubwikiPages=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(n.getSubwikiPagesCacheKeyPrefix(e))})},e.prototype.invalidateSubwikis=function(e,t){var n=this;return this.clearSubwikiList(e),this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getSubwikisCacheKey(e))})},e.prototype.invalidateWikiData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getWikiDataCacheKey(e))})},e.prototype.isTitleUsed=function(e,t,n,o,r,i){var l=this;return this.getSubwikis(e,o,r,i).then(function(e){return e.find(function(e){return e.id==t})||Promise.reject(null)}).then(function(t){return l.getSubwikiPages(e,t.groupid,t.userid,void 0,void 0,!1,o,r,i)}).then(function(e){return!!e.find(function(e){return e.title==n})}).catch(function(){return!1})},e.prototype.logPageView=function(e,n,o,r){var i={pageid:e};return this.logHelper.logSingle("mod_wiki_view_page",i,t.COMPONENT,n,o,"wiki",i,r)},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_wiki_view_wiki",{wikiid:e},t.COMPONENT,e,n,"wiki",{},o)},e.prototype.newPage=function(e,t,n,o,r,i,l){var a=this;l=l||this.sitesProvider.getCurrentSiteId();var s=function(){return(o?a.isTitleUsed(o,n,e,!0,!1,l).catch(function(){return!1}).then(function(e){if(e)return Promise.reject(a.translate.instant("addon.mod_wiki.pageexists"))}):Promise.resolve()).then(function(){return a.wikiOffline.saveNewPage(e,t,n,o,r,i,l).then(function(){return-1})})};return this.appProvider.isOnline()?this.wikiOffline.deleteNewPage(e,n,o,r,i,l).then(function(){return a.newPageOnline(e,t,n,o,r,i,l).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):s()})}):s()},e.prototype.newPageOnline=function(e,t,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(l).then(function(l){var s={title:e,content:t,contentformat:"html"};return n=a.wikiOffline.convertToPositiveNumber(n),o=a.wikiOffline.convertToPositiveNumber(o),n&&n>0?s.subwikiid=n:o&&(s.wikiid=o,s.userid=a.wikiOffline.convertToPositiveNumber(r),s.groupid=a.wikiOffline.convertToPositiveNumber(i)),l.write("mod_wiki_new_page",s).then(function(e){return e.pageid||Promise.reject(null)})})},e.prototype.setSubwikiList=function(e,t,n,o,r,i){this.subwikiListsCache[e]={count:n,subwikiSelected:o,userSelected:r,groupSelected:i,subwikis:t}},e.prototype.sortPagesByTitle=function(e,t){return e.sort(function(e,n){var o=e.title>=n.title?1:-1;return t&&(o=-o),o})},e.prototype.wikiHasSubwiki=function(e,t,n,o,r){return this.getSubwikis(e,n,o,r).then(function(e){return!!e.find(function(e){return e.id==t})}).catch(function(){return!1})},e.COMPONENT="mmaModWiki",e.PAGE_CREATED_EVENT="addon_mod_wiki_page_created",e.RENEW_LOCK_TIME=3e4,e=t=h([Object(o.A)(),m("design:paramtypes",[l.a,a.a,u.a,c.a,s.a,r.c,f.a,i.a,d.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(148),l=n(10),a=n(6),s=n(1),u=n(81),c=n(11),d=n(24),f=n(2),p=n(231),h=n(201),m=n(9),_=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d){var f=e.call(this,"CoreRatingSyncProvider",r,i,n,l,a,t,s)||this;return f.eventsProvider=o,f.utils=u,f.ratingProvider=c,f.ratingOffline=d,f}return _(t,e),n=t,t.prototype.syncRatings=function(e,t,o,r,i,l,a){var s=this;return a=a||this.sitesProvider.getCurrentSiteId(),this.ratingOffline.getItemSets(e,t,o,r,i,a).then(function(o){var r=[],i=o.map(function(o){return(l?s.syncItemSet(e,t,o.contextLevel,o.instanceId,o.itemSetId,a):s.syncItemSetIfNeeded(e,t,o.contextLevel,o.instanceId,o.itemSetId,a)).then(function(e){e.updated&&s.eventsProvider.trigger(n.SYNCED_EVENT,g({},o,{warnings:e.warnings}),a),r.push(g({itemSet:o},e))})});return Promise.all(i).then(function(){return r})})},t.prototype.syncItemSetIfNeeded=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var a=this.getItemSetSyncId(e,t,n,o,r);return this.isSyncNeeded(a,i).then(function(a){if(a)return l.syncItemSet(e,t,n,o,r,i)})},t.prototype.syncItemSet=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var a=this.getItemSetSyncId(e,t,n,o,r);if(this.isSyncing(a,i))return this.getOngoingSync(a,i);this.logger.debug("Try to sync ratings of component '"+e+"' rating area '"+t+"' context level '"+n+"' instance "+o+" item set "+r);var s=[],u=[];return this.ratingOffline.getRatings(e,t,n,o,r,i).then(function(n){if(n.length){if(!l.appProvider.isOnline())return Promise.reject(null);var o=n.map(function(n){return l.ratingProvider.addRatingOnline(e,t,n.contextlevel,n.instanceid,n.itemid,n.scaleid,n.rating,n.rateduserid,n.aggregation,i).catch(function(e){if(!l.utils.isWebServiceError(e))return Promise.reject(e);u.push(l.textUtils.getErrorMessageFromError(e))}).then(function(){return s.push(n.itemid),l.ratingOffline.deleteRating(e,t,n.contextlevel,n.instanceid,n.itemid,i).finally(function(){return l.ratingProvider.invalidateRatingItems(n.contextlevel,n.instanceid,e,t,n.itemid,n.scaleid,void 0,i)})})});return Promise.all(o).then(function(){return{updated:s,warnings:u}})}})},t.prototype.getItemSetSyncId=function(e,t,n,o,r){return"itemSet#"+e+"#"+t+"#"+n+"#"+o+"#"+r},t.SYNCED_EVENT="core_rating_synced",t=n=v([Object(o.A)(),y("design:paramtypes",[r.c,l.a,m.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a,h.a])],t);var n}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(10),i=n(18),l=n(1),a=n(11),s=n(2),u=n(13),c=n(65),d=n(53),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.appProvider=e,this.courseProvider=t,this.filepoolProvider=n,this.sitesProvider=o,this.textUtils=r,this.utils=i,this.logHelper=l,this.ROOT_CACHE_KEY="mmaModImscp:"}return t=e,e.prototype.getToc=function(e){return e&&e.length?JSON.parse(e[0].content):[]},e.prototype.createItemList=function(e){var t=[];return this.getToc(e).forEach(function(e){t.push({href:e.href,title:e.title,level:e.level}),e.subitems.forEach(function(e){t.push({href:e.href,title:e.title,level:e.level})})}),t},e.prototype.getPreviousItem=function(e,t){var n=this.getItemPosition(e,t);if(-1!=n)for(var o=n-1;o>=0;o--)if(e[o]&&e[o].href)return e[o].href;return""},e.prototype.getNextItem=function(e,t){var n=this.getItemPosition(e,t);if(-1!=n)for(var o=n+1;o<e.length;o++)if(e[o]&&e[o].href)return e[o].href;return""},e.prototype.getItemPosition=function(e,t){for(var n=0;n<e.length;n++)if(e[n].href==t)return n;return-1},e.prototype.checkSpecialFiles=function(e){return"imsmanifest.xml"==e},e.prototype.getImscpDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"imscp:"+e},e.prototype.getImscpByKey=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={courseids:[e]},l={cacheKey:r.getImscpDataCacheKey(e),updateFrequency:d.a.FREQUENCY_RARELY};return o.read("mod_imscp_get_imscps_by_courses",i,l).then(function(e){if(e&&e.imscps){var o=e.imscps.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getImscp=function(e,t,n){return this.getImscpByKey(e,"coursemodule",t,n)},e.prototype.getFileUrlFromContents=function(e,t){var n,o=this;return e.forEach(function(e){if("file"==e.type&&!n){var r=o.textUtils.concatenatePaths(e.filepath,e.filename),i="/"===r.charAt(0)?r.substr(1):"/"+r;r!==t&&i!==t||(n=e.fileurl)}}),n},e.prototype.getIframeSrc=function(e,t){var n=this;if(!t){var o=this.getToc(e.contents);if(!o.length)return Promise.reject(null);t=o[0].href}var r=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageDirUrlByUrl(r,e.url).then(function(e){return n.textUtils.concatenatePaths(e,t)}).catch(function(){if(n.appProvider.isOnline()){var o=n.getFileUrlFromContents(e.contents,t);if(o)return n.sitesProvider.getSite(r).then(function(e){return e.checkAndFixPluginfileURL(o)})}return Promise.reject(null)})},e.prototype.invalidateContent=function(e,n,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateImscpData(n,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e)),r.push(this.courseProvider.invalidateModule(e,o)),this.utils.allPromises(r)},e.prototype.invalidateImscpData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getImscpDataCacheKey(e))})},e.prototype.isFileDownloadable=function(e){return"file"===e.type&&!this.checkSpecialFiles(e.filename)},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_imscp_view_imscp",{imscpid:e},t.COMPONENT,e,n,"imscp",{},o)},e.COMPONENT="mmaModImscp",e=t=f([Object(o.A)(),p("design:paramtypes",[r.a,u.a,i.a,l.a,a.a,s.a,c.a])],e);var t}()},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(1057),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.download=function(e,t,n){return this.downloadOrPrefetch(e,t,!1,n)},t.prototype.downloadOrPrefetch=function(e,t,n,o){var r=this;if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var i=this.sitesProvider.getCurrentSiteId();if(this.isDownloading(e.id,i))return this.getOngoingDownload(e.id,i);var l=this.courseProvider.getModuleBasicInfo(e.id,i).then(function(){return r.loadContents(e,t,!0)}).then(function(){return r.getIntroFiles(e,t,!0)}).then(function(l){var a=n?r.filepoolProvider.prefetchPackage.bind(r.filepoolProvider):r.filepoolProvider.downloadPackage.bind(r.filepoolProvider),s=r.getContentDownloadableFiles(e),u=[];if(o)u.push(r.filepoolProvider.downloadOrPrefetchFiles(i,l,n,!1,r.component,e.id)),u.push(a(i,s,r.component,e.id,void 0,o));else{var c=l.concat(s);u.push(a(i,c,r.component,e.id))}return u.push(r.filterHelper.getFilters("module",e.id,{courseId:t})),Promise.all(u)});return this.addOngoingDownload(e.id,l,i)},t.prototype.getFiles=function(e,t,n){var o=this;return this.loadContents(e,t).then(function(){return o.getIntroFiles(e,t).then(function(t){return t.concat(o.getContentDownloadableFiles(e))})})},t.prototype.invalidateContent=function(e,t){var n=[],o=this.sitesProvider.getCurrentSiteId();return n.push(this.courseProvider.invalidateModule(e)),n.push(this.filepoolProvider.invalidateFilesByComponent(o,this.component,e)),Promise.all(n)},t.prototype.loadContents=function(e,t,n){return this.courseProvider.loadModuleContents(e,t,void 0,!1,n)},t.prototype.prefetch=function(e,t,n,o){return this.downloadOrPrefetch(e,t,!0,o)},t}(o.a)},,,,,function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),a._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.fileSizeReadable)})}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),a._55(1,null,["",""])),a._49(2,1)],null,function(e,t){var n=t.component;e(t,1,0,a._56(t,1,0,e(t,2,0,a._44(t.parent,0),1e3*n.timemodified)))})}function i(e){return a._57(0,[(e()(),a._31(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.delete(n)&&o}return o},s.b,s.a)),a._30(1,1097728,[[2,4]],0,u.a,[[8,""],c.a,a.t,a.V],{color:[0,"color"],clear:[1,"clear"]},null),a._47(131072,d.a,[f.a,a.j]),(e()(),a._55(-1,0,["\n            "])),(e()(),a._31(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._30(5,147456,null,0,p.a,[c.a,a.t,a.V],{name:[0,"name"]},null),(e()(),a._55(-1,0,["\n        "]))],function(e,t){e(t,1,0,"danger","");e(t,5,0,"trash")},function(e,t){e(t,0,0,a._56(t,0,0,a._44(t,2).transform("core.delete")));e(t,4,0,a._44(t,5)._hidden)})}function l(e){return a._57(0,[a._47(0,h.a,[m.a,_.a]),(e()(),a._31(1,0,null,null,26,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.download(n,!0)&&o}return o},g.b,g.a)),a._30(2,1097728,null,3,v.a,[y.a,c.a,a.t,a.V,[2,b.a]],null,null),a._52(335544320,1,{contentLabel:0}),a._52(603979776,2,{_buttons:1}),a._52(603979776,3,{_icons:1}),a._30(6,16384,null,0,P.a,[],null,null),(e()(),a._55(-1,2,["\n    "])),(e()(),a._31(8,0,null,0,0,"img",[["alt",""],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),a._55(-1,2,["\n    "])),(e()(),a._31(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),a._55(11,null,["",""])),(e()(),a._55(-1,2,["\n    "])),(e()(),a._26(16777216,null,2,1,null,o)),a._30(14,16384,null,0,O.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,2,["\n    "])),(e()(),a._26(16777216,null,2,1,null,r)),a._30(17,16384,null,0,O.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,2,["\n\n    "])),(e()(),a._31(19,0,null,4,7,"div",[["class","buttons"],["item-end",""]],null,null,null,null,null)),(e()(),a._55(-1,null,["\n        "])),(e()(),a._31(21,0,null,null,1,"core-download-refresh",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.download()&&o}return o},E.b,E.a)),a._30(22,49152,null,0,C.a,[],{status:[0,"status"],enabled:[1,"enabled"],loading:[2,"loading"],canTrustDownload:[3,"canTrustDownload"]},{action:"action"}),(e()(),a._55(-1,null,["\n\n        "])),(e()(),a._26(16777216,null,null,1,null,i)),a._30(25,16384,null,0,O.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n    "])),(e()(),a._55(-1,2,["\n"])),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,14,0,n.fileSizeReadable);e(t,17,0,n.showTime);e(t,22,0,n.state,n.canDownload,n.isDownloading,!n.alwaysDownload);e(t,25,0,!n.isDownloading&&n.canDelete)},function(e,t){var n=t.component;e(t,8,0,n.fileIcon);e(t,11,0,n.fileName)})}n.d(t,"a",function(){return U}),t.b=l;var a=n(0),s=n(45),u=n(42),c=n(8),d=n(25),f=n(17),p=n(47),h=n(228),m=n(6),_=n(24),g=n(30),v=n(20),y=n(19),b=n(27),P=n(33),O=n(7),E=n(524),C=n(327),I=n(215),R=n(1),S=n(2),w=n(4),A=n(18),D=n(10),j=n(115),k=n(66),T=n(9),x=n(11),M=n(56),N=n(22),U=a._29({encapsulation:2,styles:[],data:{}});a._27("core-file",I.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-file",[],null,null,null,l,U)),a._30(1,245760,null,0,I.a,[R.a,S.a,w.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,N.a],null,null)],function(e,t){e(t,1,0)},null)},{file:"file",component:"component",componentId:"componentId",canDelete:"canDelete",alwaysDownload:"alwaysDownload",canDownload:"canDownload",showSize:"showSize",showTime:"showTime"},{onDelete:"onDelete"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(5),i=n(1),l=n(18),a=n(4),s=n(22),u=n(2),c=n(9),d=n(216),f=n(23),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},_=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},v=function(){function e(e,t,n,r,i,l,a,s,u,c){var d=this;this.domUtils=e,this.urlUtils=t,this.sitesProvider=n,this.filepoolProvider=r,this.content=i,this.events=a,this.utils=s,this.platform=u,this.editorOffline=c,this.placeholder="",this.name="core-rich-text-editor",this.DRAFT_AUTOSAVE_FREQUENCY=3e4,this.RESTORE_MESSAGE_CLEAR_TIME=6e3,this.SAVE_MESSAGE_CLEAR_TIME=2e3,this.kbHeight=0,this.minHeight=200,this.rteEnabled=!1,this.editorSupported=!0,this.isPhone=this.platform.is("mobile")&&!this.platform.is("tablet"),this.toolbarHidden=this.isPhone,this.numToolbarButtons=6,this.toolbarArrows=!1,this.toolbarPrevHidden=!0,this.toolbarNextHidden=!1,this.toolbarStyles={b:"false",i:"false",u:"false",strike:"false",p:"false",h3:"false",h4:"false",h5:"false",ul:"false",ol:"false"},this.isCurrentView=!0,this.toolbarButtonWidth=40,this.toolbarArrowWidth=28,this.lastDraft="",this.draftWasRestored=!1,this.maximizeEditorSize=function(){d.content.resize();var e=d.utils.promiseDefer();return setTimeout(function(){var t=d.domUtils.getContentHeight(d.content);d.platform.is("android")||(t-=d.kbHeight),t<=0?e.resolve(0):setTimeout(function(){var t;d.platform.is("android")?t=d.domUtils.getContentHeight(d.content)-d.getSurroundingHeight(d.element):d.platform.is("ios")&&d.kbHeight>0&&d.platform.version().major<12?(t=window.innerHeight-d.getSurroundingHeight(d.element),d.element.getBoundingClientRect().top<40&&window.scrollTo(window.scrollX,window.scrollY-40)):t=d.domUtils.getContentHeight(d.content)-d.kbHeight-d.getSurroundingHeight(d.element),d.element.style.height=t>d.minHeight?d.domUtils.formatPixelsSize(t-1):"",e.resolve(t)},100)},100),e.promise},this.updateToolbarStyles=function(){var e=document.getSelection().focusNode;if(e){for(var t=1==e.nodeType?e:e.parentElement,n={};null!=t&&t!==d.editorElement;){var o=t.tagName.toLowerCase();d.toolbarStyles[o]&&(n[o]="true"),t=t.parentElement}for(var o in d.toolbarStyles)d.toolbarStyles[o]="false";t===d.editorElement&&Object.assign(d.toolbarStyles,n)}},this.contentChanged=new o.v,this.element=l.nativeElement,this.pageInstance="app_"+Date.now()}return e.prototype.ngAfterContentInit=function(){var e=this;this.domUtils.isRichTextEditorEnabled().then(function(t){e.rteEnabled=!!t}),this.editorSupported=this.domUtils.isRichTextEditorSupported(),this.editorElement=this.editor.nativeElement,this.setContent(this.control.value),this.originalContent=this.control.value,this.lastDraft=this.control.value,this.editorElement.onchange=this.onChange.bind(this),this.editorElement.onkeyup=this.onChange.bind(this),this.editorElement.onpaste=this.onChange.bind(this),this.editorElement.oninput=this.onChange.bind(this),this.editorElement.onkeydown=this.moveCursor.bind(this),this.valueChangeSubscription=this.control.valueChanges.subscribe(function(t){e.draftWasRestored&&e.originalContent==t?e.control.setValue(e.lastDraft,{emitEvent:!1}):(e.setContent(t),e.originalContent=t,e.infoMessage=null,e.lastDraft=t,e.editorOffline.saveDraft(e.contextLevel,e.contextInstanceId,e.elementId,e.draftExtraParams,e.pageInstance,t,t))}),document.execCommand("DefaultParagraphSeparator",!1,"p"),window.addEventListener("resize",this.maximizeEditorSize),document.addEventListener("selectionchange",this.updateToolbarStyles);var t=0;this.initHeightInterval=setInterval(function(){e.maximizeEditorSize().then(function(n){(t>=5||0!=n)&&clearInterval(e.initHeightInterval),t++})},750),this.keyboardObs=this.events.on(c.a.KEYBOARD_CHANGE,function(t){e.kbHeight=t,e.maximizeEditorSize()}),this.updateToolbarButtons(),this.elementId&&(this.elementId="id_"+this.elementId,this.element.setAttribute("id",this.elementId)),this.shouldAutoSaveDrafts()&&(this.restoreDraft(),this.autoSaveDrafts(),this.deleteDraftOnSubmitOrCancel())},e.prototype.getSurroundingHeight=function(e){for(var t=0;e.parentNode&&"ION-CONTENT"!=e.parentNode.tagName;){var n=e.parentNode;if(e.tagName&&"CORE-LOADING"!=e.tagName)for(var o=0;o<n.childNodes.length;o++){var r=n.childNodes[o];r.tagName&&r!=e&&(t+=this.domUtils.getElementHeight(r,!1,!0,!0))}e=n}var i=getComputedStyle(e);if(t+=this.domUtils.getComputedStyleMeasure(i,"paddingTop")+this.domUtils.getComputedStyleMeasure(i,"paddingBottom"),e&&e.parentNode&&"ION-CONTENT"==e.parentNode.tagName){var l=getComputedStyle(e);t-=this.domUtils.getComputedStyleMeasure(l,"paddingTop")+this.domUtils.getComputedStyleMeasure(l,"paddingBottom")}return t},e.prototype.onChange=function(e){this.rteEnabled?this.isNullOrWhiteSpace(this.editorElement.innerText)?this.clearText():(this.restoreExternalContent(),this.control.setValue(this.editorElement.innerHTML,{emitEvent:!1}),this.control.markAsDirty(),this.textarea.value=this.editorElement.innerHTML,this.treatExternalContent()):this.isNullOrWhiteSpace(this.textarea.value)?this.clearText():(this.control.setValue(this.textarea.value,{emitEvent:!1}),this.control.markAsDirty()),this.contentChanged.emit(this.control.value)},e.prototype.moveCursor=function(e){if(this.rteEnabled&&("ArrowLeft"==e.key||"ArrowRight"==e.key)){e.preventDefault(),e.stopPropagation();var t="ArrowLeft"==e.key?-1:1,n=this.getCurrentCursorPosition(this.editorElement);this.setCurrentCursorPosition(this.editorElement,n+t)}},e.prototype.getCurrentCursorPosition=function(e){var t,n=window.getSelection(),o=-1;if(n.focusNode&&e.contains(n.focusNode))for(t=n.focusNode,o=n.focusOffset;t&&!t.isSameNode(e);)if(t.previousSibling)o+=(t=t.previousSibling).textContent.length;else if(null===(t=t.parentNode))break;return o},e.prototype.setCurrentCursorPosition=function(e,t){var n=function(e,t,o){if(0===o.count)t.setEnd(e,0);else if(e&&o.count>0)if(e.hasChildNodes())for(var r=0;r<e.childNodes.length&&(t=n(e.childNodes[r],t,o),0!==o.count);r++);else e.textContent.length<o.count?o.count-=e.textContent.length:(t.setEnd(e,o.count),o.count=0);return t},o=document.createRange();if(void 0===t)o.selectNode(e),o.selectNodeContents(e);else{if(t<0||t>e.textContent.length)return;o.selectNode(e),o.setStart(e,0),o=n(e,o,{count:t})}if(o){var r=window.getSelection();o.collapse(!1),r.removeAllRanges(),r.addRange(o)}},e.prototype.toggleEditor=function(e){e.preventDefault(),e.stopPropagation(),this.setContent(this.control.value),this.rteEnabled=!this.rteEnabled,this.rteEnabled?(this.editorElement.removeAttribute("hidden"),this.textarea.getNativeElement().setAttribute("hidden",""),this.editorElement.focus()):(this.editorElement.setAttribute("hidden",""),this.textarea.getNativeElement().removeAttribute("hidden"),this.textarea.setFocus())},e.prototype.treatExternalContent=function(){var e=this;if(this.sitesProvider.isLoggedIn()){var t=Array.from(this.editorElement.querySelectorAll("img")),n=this.sitesProvider.getCurrentSiteId(),o=this.sitesProvider.getCurrentSite().canDownloadFiles();t.forEach(function(t){if(!t.getAttribute("data-original-src")){var r=t.src;if(r&&e.urlUtils.isDownloadableUrl(r)&&(o||!e.urlUtils.isPluginFileUrl(r)))return e.filepoolProvider.getSrcByUrl(n,r,e.component,e.componentId).then(function(e){t.getAttribute("data-original-src")||(t.setAttribute("data-original-src",t.src),t.setAttribute("src",e))})}})}},e.prototype.restoreExternalContent=function(){Array.from(this.editorElement.querySelectorAll("img")).forEach(function(e){var t=e.getAttribute("data-original-src");t&&(e.setAttribute("src",t),e.removeAttribute("data-original-src"))})},e.prototype.isNullOrWhiteSpace=function(e){return null==e||void 0===e||(e=e.replace(/[\n\r]/g,""),0===(e=e.split(" ").join("")).length)},e.prototype.setContent=function(e){this.isNullOrWhiteSpace(e)?(this.editorElement.innerHTML="<p></p>",this.textarea.value=""):(this.editorElement.innerHTML=e,this.textarea.value=e,this.treatExternalContent())},e.prototype.clearText=function(){var e=this;this.setContent(null),this.control.setValue(null,{emitEvent:!1}),setTimeout(function(){e.rteEnabled&&e.setCurrentCursorPosition(e.editorElement)},1)},e.prototype.buttonAction=function(e,t){if(this.stopBubble(e),t)if(t.includes("|")){var n=t.split("|")[1];t=t.split("|")[0],document.execCommand(t,!1,n)}else document.execCommand(t,!1)},e.prototype.focusRTE=function(e){this.rteEnabled?this.editorElement.focus():this.textarea.setFocus()},e.prototype.hideToolbar=function(e){this.stopBubble(e),this.isPhone&&(this.toolbarHidden=!0)},e.prototype.showToolbar=function(){this.editorElement.focus(),this.toolbarHidden=!1},e.prototype.stopBubble=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.toolbarNext=function(e){if(this.stopBubble(e),!this.toolbarNextHidden){var t=this.toolbarSlides.getActiveIndex()||0;this.toolbarSlides.slideTo(t+this.numToolbarButtons)}this.updateToolbarArrows()},e.prototype.toolbarPrev=function(e){if(this.stopBubble(e),!this.toolbarPrevHidden){var t=this.toolbarSlides.getActiveIndex()||0;this.toolbarSlides.slideTo(t-this.numToolbarButtons)}this.updateToolbarArrows()},e.prototype.updateToolbarButtons=function(){if(this.isCurrentView){var e=this.domUtils.getElementWidth(this.toolbar.nativeElement);this.toolbarSlides._init&&e?(e>this.toolbarSlides.length()*this.toolbarButtonWidth?(this.numToolbarButtons=this.toolbarSlides.length(),this.toolbarArrows=!1):(this.numToolbarButtons=Math.floor((e-2*this.toolbarArrowWidth)/this.toolbarButtonWidth),this.toolbarArrows=!0),this.toolbarSlides.update(),this.updateToolbarArrows()):setTimeout(this.updateToolbarButtons.bind(this),100)}},e.prototype.updateToolbarArrows=function(){var e=this.toolbarSlides.getActiveIndex()||0;this.toolbarPrevHidden=e<=0,this.toolbarNextHidden=e+this.numToolbarButtons>=this.toolbarSlides.length()},e.prototype.shouldAutoSaveDrafts=function(){return!!this.sitesProvider.getCurrentSite()&&(void 0===this.autoSave||this.utils.isTrueOrOne(this.autoSave))&&void 0!==this.contextLevel&&void 0!==this.contextInstanceId&&void 0!==this.elementId},e.prototype.restoreDraft=function(){return _(this,void 0,void 0,function(){var e,t;return g(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.editorOffline.resumeDraft(this.contextLevel,this.contextInstanceId,this.elementId,this.draftExtraParams,this.pageInstance,this.originalContent)];case 1:return void 0===(e=n.sent())?[2]:("<p></p>"!=(t=e.drafttext)&&"<p><br></p>"!=t&&"<br>"!=t&&"<p>&nbsp;</p>"!=t&&"<p><br>&nbsp;</p>"!=t||(t=""),""!==t&&t!=this.control.value&&(this.control.setValue(t,{emitEvent:!1}),this.setContent(t),this.lastDraft=t,this.draftWasRestored=!0,this.originalContent=e.originalcontent,e.drafttext!=e.originalcontent&&this.showMessage("core.editor.textrecovered",this.RESTORE_MESSAGE_CLEAR_TIME)),[3,3]);case 2:return n.sent(),[3,3];case 3:return[2]}})})},e.prototype.autoSaveDrafts=function(){var e=this;this.autoSaveInterval=setInterval(function(){return _(e,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:if(e=this.control.value,this.lastDraft==e)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.editorOffline.saveDraft(this.contextLevel,this.contextInstanceId,this.elementId,this.draftExtraParams,this.pageInstance,e,this.originalContent)];case 2:return t.sent(),this.lastDraft=e,this.showMessage("core.editor.autosavesucceeded",this.SAVE_MESSAGE_CLEAR_TIME),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}})})},this.DRAFT_AUTOSAVE_FREQUENCY)},e.prototype.deleteDraftOnSubmitOrCancel=function(){var e=this;this.resetObs=this.events.on(c.a.FORM_ACTION,function(t){return _(e,void 0,void 0,function(){var e;return g(this,function(n){switch(n.label){case 0:if(e=this.element.closest("form"),!t.form||!e||t.form!=e)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.editorOffline.deleteDraft(this.contextLevel,this.contextInstanceId,this.elementId,this.draftExtraParams)];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}})})},this.sitesProvider.getCurrentSiteId())},e.prototype.showMessage=function(e,t){var n=this;clearTimeout(this.hideMessageTimeout),this.infoMessage=e,this.hideMessageTimeout=setTimeout(function(){n.hideMessageTimeout=null,n.infoMessage=null},t)},e.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.updateToolbarButtons()},e.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},e.prototype.ngOnDestroy=function(){this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe(),window.removeEventListener("resize",this.maximizeEditorSize),document.removeEventListener("selectionchange",this.updateToolbarStyles),clearInterval(this.initHeightInterval),this.keyboardObs&&this.keyboardObs.off(),clearInterval(this.autoSaveInterval),clearTimeout(this.hideMessageTimeout),this.resetObs&&this.resetObs.off()},p([Object(o.D)(),h("design:type",Object)],e.prototype,"placeholder",void 0),p([Object(o.D)(),h("design:type",f.e)],e.prototype,"control",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"name",void 0),p([Object(o.D)(),h("design:type",String)],e.prototype,"component",void 0),p([Object(o.D)(),h("design:type",Number)],e.prototype,"componentId",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"autoSave",void 0),p([Object(o.D)(),h("design:type",String)],e.prototype,"contextLevel",void 0),p([Object(o.D)(),h("design:type",Number)],e.prototype,"contextInstanceId",void 0),p([Object(o.D)(),h("design:type",String)],e.prototype,"elementId",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"draftExtraParams",void 0),p([Object(o.O)(),h("design:type",o.v)],e.prototype,"contentChanged",void 0),p([Object(o._9)("editor"),h("design:type",o.t)],e.prototype,"editor",void 0),p([Object(o._9)("textarea"),h("design:type",r.E)],e.prototype,"textarea",void 0),p([Object(o._9)("toolbar"),h("design:type",o.t)],e.prototype,"toolbar",void 0),p([Object(o._9)(r.B),h("design:type",r.B)],e.prototype,"toolbarSlides",void 0),e=p([Object(o.m)({selector:"core-rich-text-editor",templateUrl:"core-editor-rich-text-editor.html"}),m(4,Object(o.N)()),h("design:paramtypes",[a.a,s.a,i.a,l.a,r.f,o.t,c.a,u.a,r.v,d.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(134),i=n(46),l=n(13),a=n(15),s=n(1),u=n(4),c=n(11),d=n(24),f=n(2),p=n(3),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a,s,u){this.feedbackProvider=e,this.userProvider=t,this.textUtils=n,this.translate=o,this.timeUtils=r,this.domUtils=i,this.courseProvider=l,this.linkHelper=a,this.sitesProvider=s,this.utils=u,this.MODE_RESPONSETIME=1,this.MODE_COURSE=2,this.MODE_CATEGORY=3}return e.prototype.getPageView=function(e,t,n,o,r){for(var i,l,a=r.getActive();!a.isFirst()&&a.name.startsWith(o)&&(l=a.getNavParams(),(i=l.get(n)?l.get(n):l.get("module").instance)&&i==t);){if(a.name==e)return a;a=r.getPrevious(a)}return null},e.prototype.getNonRespondents=function(e,t,n){var o=this;return this.feedbackProvider.getNonRespondents(e,t,n).then(function(e){return o.addImageProfileToAttempts(e.users).then(function(t){return e.users=t,e})})},e.prototype.getPageItemsResponses=function(e){var t={};return e.forEach(function(e){var n=!1;if(e.hasError=!1,"captcha"==e.typ){var o=e.value||"";n=!!o,t[e.typ+"_"+e.id]=1,t["g-recaptcha-response"]=o,t.recaptcha_element="dummyvalue",e.isEmpty=!(!e.required||n)}else if(e.hasvalue){var r,i,l=e.typ+"_"+e.id;"multichoice"==e.typ&&"c"==e.subtype?(t[r=l+"[0]"]=0,e.choices.forEach(function(e,o){r=l+"["+(o+1)+"]",i=e.checked?e.value:0,!n&&i&&(n=!0),t[r]=i})):(r="multichoice"==e.typ&&"r"!=e.subtype?l+"[0]":l,"multichoice"==e.typ||"multichoicerated"==e.typ?i=e.value||0:"numeric"==e.typ?""!=(i=e.value||0==e.value?e.value:"")&&(""!=e.rangefrom&&i<e.rangefrom||""!=e.rangeto&&i>e.rangeto)&&(e.hasError=!0):i=e.value||0==e.value?e.value:"",n=!!i,t[r]=i),e.isEmpty=!(!e.required||n)}}),t},e.prototype.getResponsesAnalysis=function(e,t,n){var o=this;return this.feedbackProvider.getResponsesAnalysis(e,t,n).then(function(e){return o.addImageProfileToAttempts(e.attempts).then(function(t){return e.attempts=t,e})})},e.prototype.handleShowEntriesLink=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(t.id,n).then(function(r){var i;return void 0===t.showcompleted?(i={module:r,courseId:r.course},o.linkHelper.goInSite(e,"AddonModFeedbackRespondentsPage",i,n)):o.feedbackProvider.getAttempt(r.instance,t.showcompleted,!0,n).then(function(t){return i={moduleId:r.id,attempt:t,feedbackId:r.instance,courseId:r.course},o.linkHelper.goInSite(e,"AddonModFeedbackAttemptPage",i,n)})}).finally(function(){r.dismiss()})},e.prototype.addImageProfileToAttempts=function(e){var t=this,n=e.map(function(e){return t.userProvider.getProfile(e.userid,e.courseid,!0).then(function(t){e.profileimageurl=t.profileimageurl}).catch(function(){})});return Promise.all(n).then(function(){return e})},e.prototype.openFeature=function(e,t,n,o,r){void 0===r&&(r=0);var i=e&&"analysis"!=e?"AddonModFeedback"+e+"Page":"AddonModFeedbackIndexPage",l={module:n,moduleId:n.id,courseId:o,feedbackId:n.instance,group:r};if("AddonModFeedbackIndexPage"==i){l.tab="analysis"==e?"analysis":"overview";var a=this.getPageView(i,n.instance,"feedbackId","AddonModFeedback",t);if(a)return t.popTo(a)}return t.push(i,l)},e.prototype.getItemFormLabel=function(e){return e.template="label",e.name="",e.presentation=this.textUtils.replacePluginfileUrls(e.presentation,e.itemfiles),e},e.prototype.getItemFormInfo=function(e){e.template="label";var t=parseInt(e.presentation,10);if(t==this.MODE_COURSE||t==this.MODE_CATEGORY)e.presentation=e.otherdata,e.value=void 0!==e.rawValue?e.rawValue:e.otherdata;else{if(t!=this.MODE_RESPONSETIME)return!1;e.value="__CURRENT__TIMESTAMP__";var n=void 0!==e.rawValue?1e3*e.rawValue:(new Date).getTime();e.presentation=this.timeUtils.userDate(n)}return e},e.prototype.getItemFormNumeric=function(e){e.template="numeric";var t=e.presentation.split(r.a.LINE_SEP)||[];return t[0]=t.length>0?parseInt(t[0],10):void 0,t[1]=t.length>1?parseInt(t[1],10):void 0,e.rangefrom="number"!=typeof t[0]||isNaN(t[0])?"":t[0],e.rangeto="number"!=typeof t[1]||isNaN(t[1])?"":t[1],e.value=void 0!==e.rawValue?parseFloat(e.rawValue):"",e.postfix=this.getNumericBoundariesForDisplay(e.rangefrom,e.rangeto),e},e.prototype.getItemFormTextfield=function(e){return e.template="textfield",e.length=e.presentation.split(r.a.LINE_SEP)[1]||255,e.value=void 0!==e.rawValue?e.rawValue:"",e},e.prototype.getItemFormTextarea=function(e){return e.template="textarea",e.value=void 0!==e.rawValue?e.rawValue:"",e},e.prototype.getItemFormMultichoice=function(e){var t=e.presentation.split(r.a.MULTICHOICE_TYPE_SEP)||[];if(e.subtype=t.length>0&&t[0]?t[0]:"r",e.template="multichoice-"+e.subtype,e.presentation=t.length>1?t[1]:"","d"!=e.subtype&&(t=e.presentation.split(r.a.MULTICHOICE_ADJUST_SEP)||[],e.presentation=t.length>0?t[0]:""),e.choices=e.presentation.split(r.a.LINE_SEP)||[],e.choices=e.choices.map(function(e,t){var n=e.split(r.a.MULTICHOICERATED_VALUE_SEP)||[""];return e=1==n.length?n[0]:"("+n[0]+") "+n[1],{value:t+1,label:e}}),"r"===e.subtype&&-1==e.options.search(r.a.MULTICHOICE_HIDENOSELECT))e.choices.unshift({value:0,label:this.translate.instant("addon.mod_feedback.not_selected")}),e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):0;else if("d"===e.subtype)e.choices.unshift({value:0,label:""}),e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):0;else if("c"===e.subtype)if(void 0===e.rawValue)e.value="";else{e.rawValue=""+e.rawValue;var n=e.rawValue.split(r.a.LINE_SEP);e.choices.forEach(function(e){for(var t in n)if(e.value==n[t])return void(e.checked=!0)})}else e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):"";return e},e.prototype.getItemFormCaptcha=function(e){var t=this.textUtils.parseJSON(e.otherdata);return t&&t.length>3&&(e.captcha={recaptchapublickey:t[3]}),e.template="captcha",e.value="",e},e.prototype.getItemForm=function(e,t){switch(e.typ){case"label":return this.getItemFormLabel(e);case"info":return this.getItemFormInfo(e);case"numeric":return this.getItemFormNumeric(e);case"textfield":return this.getItemFormTextfield(e);case"textarea":return this.getItemFormTextarea(e);case"multichoice":case"multichoicerated":return this.getItemFormMultichoice(e);case"pagebreak":if(!t)return!1;break;case"captcha":return this.getItemFormCaptcha(e);default:return!1}return e},e.prototype.getNumericBoundariesForDisplay=function(e,t){var n="number"==typeof e,o="number"==typeof t;return!n&&o?" ("+this.translate.instant("addon.mod_feedback.maximal")+": "+this.utils.formatFloat(t)+")":n&&!o?" ("+this.translate.instant("addon.mod_feedback.minimal")+": "+this.utils.formatFloat(e)+")":n||o?" ("+this.utils.formatFloat(e)+" - "+this.utils.formatFloat(t)+")":""},e=h([Object(o.A)(),m("design:paramtypes",[r.a,i.a,c.a,p.c,d.a,u.a,l.a,a.a,s.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(3),l=n(1),a=n(4),s=n(2),u=n(167),c=n(263),d=n(129),f=n(38),p=n(15),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a,s,u){this.domUtils=e,this.translate=t,this.utils=n,this.accessRuleDelegate=o,this.quizProvider=r,this.modalCtrl=i,this.quizOfflineProvider=l,this.courseHelper=a,this.sitesProvider=s,this.linkHelper=u}return e.prototype.getAndCheckPreflightData=function(e,t,n,o,r,i,l,a,s){var u=this,c=t&&t.activerulenames,d=!1;return this.accessRuleDelegate.isPreflightCheckRequired(c,e,o,i,a).then(function(r){if(d=r,r)return u.getPreflightData(e,t,o,i,l,a).then(function(e){Object.assign(n,e)})}).then(function(){return u.accessRuleDelegate.getFixedPreflightData(c,e,n,o,i,a)}).then(function(){return u.validatePreflightData(e,t,n,o,r,i,a).catch(function(c){return i?Promise.reject(c):s&&!d?Promise.reject(c):(setTimeout(function(){u.domUtils.showErrorModalDefault(c,"core.error",!0)},100),u.getAndCheckPreflightData(e,t,n,o,r,i,l,a,!0))})})},e.prototype.getPreflightData=function(e,t,n,o,r,i){var l=this,a=[];if(t.activerulenames.forEach(function(e){l.accessRuleDelegate.isAccessRuleSupported(e)||a.push(e)}),a.length)return Promise.reject(this.translate.instant("addon.mod_quiz.errorrulesnotsupported")+" "+JSON.stringify(a));var s=this.modalCtrl.create("AddonModQuizPreflightModalPage",{title:r,quiz:e,attempt:n,prefetch:!!o,siteId:i,rules:t.activerulenames});return s.present(),new Promise(function(e,t){s.onDidDismiss(function(n){void 0!==n?e(n):t(l.domUtils.createCanceledError())})})},e.prototype.getQuestionMarkFromHtml=function(e){var t=this.domUtils.convertToElement(e);return this.domUtils.getContentsOfElement(t,".grade")},e.prototype.getQuizIdByAttemptId=function(e,t){return this.quizProvider.getAttemptReview(e,void 0,!1,t).then(function(e){return e.attempt&&e.attempt.quiz?e.attempt.quiz:Promise.reject(null)})},e.prototype.handleReviewLink=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var a=this.domUtils.showModalLoading();return(r?Promise.resolve(r):this.getQuizIdByAttemptId(t)).then(function(e){return r=e,o||l.courseHelper.getModuleCourseIdByInstance(r,"quiz",i)}).then(function(o){var a={quizId:r,attemptId:t,courseId:o,page:isNaN(n)?-1:n};return l.linkHelper.goInSite(e,"AddonModQuizReviewPage",a,i)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"An error occurred while loading the required data.")}).finally(function(){a.dismiss()})},e.prototype.setAttemptCalculatedData=function(e,t,n,o){t.rescaledGrade=this.quizProvider.rescaleGrade(t.sumgrades,e,!1),t.finished=this.quizProvider.isAttemptFinished(t.state),t.readableState=this.quizProvider.getAttemptReadableState(e,t),t.readableMark=e.showMarkColumn&&t.finished?this.quizProvider.formatGrade(t.sumgrades,e.decimalpoints):"",e.showGradeColumn&&t.finished?(t.readableGrade=this.quizProvider.formatGrade(t.rescaledGrade,e.decimalpoints),t.highlightGrade=n&&!t.preview&&t.state==u.a.ATTEMPT_FINISHED&&t.readableGrade==o):t.readableGrade=""},e.prototype.setQuizCalculatedData=function(e,t){e.sumGradesFormatted=this.quizProvider.formatGrade(e.sumgrades,e.decimalpoints),e.gradeFormatted=this.quizProvider.formatGrade(e.grade,e.decimalpoints),e.showAttemptColumn=1!=e.attempts,e.showGradeColumn=t.someoptions.marks>=u.a.QUESTION_OPTIONS_MARK_AND_MAX&&this.quizProvider.quizHasGrades(e),e.showMarkColumn=e.showGradeColumn&&e.grade!=e.sumgrades,e.showFeedbackColumn=e.hasfeedback&&t.alloptions.overallfeedback},e.prototype.validatePreflightData=function(e,t,n,o,r,i,l){var a,s=this,c=t.activerulenames;if(o)if(o.state==u.a.ATTEMPT_OVERDUE||o.finishedOffline)a=this.quizProvider.getAttemptSummary(o.id,n,r,!0,!1,l);else{a=this.quizProvider.getAttemptData(o.id,o.currentpage,n,r,!0,l).then(function(){if(r)return s.quizOfflineProvider.getAttemptById(o.id).then(function(e){o.currentpage=e.currentpage}).catch(function(){})})}else a=this.quizProvider.startAttempt(e.id,n,!1,l).then(function(e){o=e});return a.then(function(){return s.accessRuleDelegate.notifyPreflightCheckPassed(c,e,o,n,i,l),o}).catch(function(t){return s.utils.isWebServiceError(t)&&s.accessRuleDelegate.notifyPreflightCheckFailed(c,e,o,n,i,l),Promise.reject(t)})},e=h([Object(o.A)(),m("design:paramtypes",[a.a,i.c,s.a,d.a,u.a,r.q,c.a,f.a,l.a,p.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var o=n(0),r=n(3),i=n(148),l=n(13),a=n(65),s=n(72),u=n(10),c=n(6),d=n(9),f=n(71),p=n(1),h=n(81),m=n(11),_=n(24),g=n(2),v=n(135),y=n(280),b=n(233),P=n(236),O=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_,g){var v=e.call(this,"AddonModForumSyncProvider",l,a,n,s,u,t,c)||this;return v.eventsProvider=r,v.groupsProvider=i,v.uploaderProvider=d,v.utils=f,v.forumProvider=p,v.forumHelper=h,v.forumOffline=m,v.logHelper=_,v.ratingSync=g,v.componentTranslate=o.translateModuleName("forum"),v}return O(t,e),n=t,t.prototype.syncAllForums=function(e,t){return this.syncOnSites("all forums",this.syncAllForumsFunc.bind(this),[t],e)},t.prototype.syncAllForumsFunc=function(e,t){var o=this,r=[];return r.push(this.forumOffline.getAllNewDiscussions(e).then(function(r){var i={};return r.forEach(function(r){void 0===i[r.forumid]&&(i[r.forumid]=t?o.syncForumDiscussions(r.forumid,r.userid,e):o.syncForumDiscussionsIfNeeded(r.forumid,r.userid,e),i[r.forumid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{forumId:r.forumid,userId:r.userid,warnings:t.warnings},e)}))}),Promise.all(o.utils.objectToArray(i))})),r.push(this.forumOffline.getAllReplies(e).then(function(r){var i={};return r.forEach(function(r){void 0===i[r.discussionid]&&(i[r.discussionid]=t?o.syncDiscussionReplies(r.discussionid,r.userid,e):o.syncDiscussionRepliesIfNeeded(r.discussionid,r.userid,e),i[r.discussionid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{forumId:r.forumid,discussionId:r.discussionid,userId:r.userid,warnings:t.warnings},e)}))}),Promise.all(o.utils.objectToArray(i))})),r.push(this.syncRatings(void 0,void 0,t,e)),Promise.all(r)},t.prototype.syncForumDiscussionsIfNeeded=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getForumSyncId(e,t);return this.isSyncNeeded(r,n).then(function(r){if(r)return o.syncForumDiscussions(e,t,n)})},t.prototype.syncForumDiscussions=function(e,t,n){var o=this;t=t||this.sitesProvider.getCurrentSiteUserId(),n=n||this.sitesProvider.getCurrentSiteId();var r=this.getForumSyncId(e,t);if(this.isSyncing(r,n))return this.getOngoingSync(r,n);if(this.syncProvider.isBlocked(v.a.COMPONENT,r,n))return this.logger.debug("Cannot sync forum "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync forum "+e+" for user "+t);var i={warnings:[],updated:!1},l=this.logHelper.syncIfNeeded(v.a.COMPONENT,e,n).catch(function(){}).then(function(){return o.forumOffline.getNewDiscussions(e,n,t).catch(function(){return[]})}).then(function(r){if(r.length){if(!o.appProvider.isOnline())return Promise.reject(null);var l=[];return r.forEach(function(r){var a;a=r.groupid==v.a.ALL_GROUPS?o.forumProvider.getForumById(r.courseid,r.forumid,n).then(function(e){return o.groupsProvider.getActivityAllowedGroups(e.cmid).then(function(e){return e.groups.map(function(e){return e.id})})}):Promise.resolve([r.groupid]),l.push(a.then(function(l){var a=[];return Promise.all(l.map(function(i){return o.uploadAttachments(e,r,!0,n,t).then(function(t){var l=o.utils.clone(r.options||{});return l.attachmentsid=t,o.forumProvider.addNewDiscussionOnline(e,r.subject,r.message,l,i,n)}).catch(function(e){a.push(e)})})).then(function(){if(a.length==l.length)for(var s=0;s<a.length;s++)if(!o.utils.isWebServiceError(a[s]))return Promise.reject(a[s]);return i.updated=!0,o.deleteNewDiscussion(e,r.timecreated,n,t).then(function(){a.length==l.length&&i.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:r.name,error:o.textUtils.getErrorMessageFromError(a[0])}))})})}))}),Promise.all(l)}}).then(function(){if(i.updated){var t=[o.forumProvider.invalidateDiscussionsList(e,n),o.forumProvider.invalidateCanAddDiscussion(e,n)];return Promise.all(t).catch(function(){})}}).then(function(){return o.setSyncTime(r,n).catch(function(){})}).then(function(){return i});return this.addOngoingSync(r,l,n)},t.prototype.syncRatings=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.ratingSync.syncRatings("mod_forum","post","module",e,t,n,o).then(function(e){var t=!1,n=[],i=[];return e.forEach(function(e){e.updated.length&&(t=!0,i.push(r.forumProvider.invalidateDiscussionPosts(e.itemSet.itemSetId,void 0,o))),e.warnings.length&&i.push(r.forumProvider.getForum(e.itemSet.courseId,e.itemSet.instanceId,o).then(function(t){e.warnings.forEach(function(e){n.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:t.name,error:e}))})}))}),r.utils.allPromises(i).then(function(){return{updated:t,warnings:n}})})},t.prototype.syncForumReplies=function(e,t,n){var o=this;return this.forumOffline.getForumReplies(e,n,t).catch(function(){return[]}).then(function(e){if(!e.length)return{warnings:[],updated:!1};if(!o.appProvider.isOnline())return Promise.reject(null);var r={};return e.forEach(function(e){void 0===r[e.discussionid]&&(r[e.discussionid]=o.syncDiscussionReplies(e.discussionid,t,n))}),Promise.all(o.utils.objectToArray(r)).then(function(e){return e.reduce(function(e,t){return{warnings:e.warnings.concat(t.warnings),updated:e.updated||t.updated}},{warnings:[],updated:!1})})})},t.prototype.syncDiscussionRepliesIfNeeded=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getDiscussionSyncId(e,t);return this.isSyncNeeded(r,n).then(function(r){if(r)return o.syncDiscussionReplies(e,t,n)})},t.prototype.syncDiscussionReplies=function(e,t,n){var o=this;t=t||this.sitesProvider.getCurrentSiteUserId(),n=n||this.sitesProvider.getCurrentSiteId();var r=this.getDiscussionSyncId(e,t);if(this.isSyncing(r,n))return this.getOngoingSync(r,n);if(this.syncProvider.isBlocked(v.a.COMPONENT,r,n))return this.logger.debug("Cannot sync forum discussion "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync forum discussion "+e+" for user "+t);var i,l={warnings:[],updated:!1},a=this.forumOffline.getDiscussionReplies(e,n,t).catch(function(){return[]}).then(function(e){if(e.length){if(!o.appProvider.isOnline())return Promise.reject(null);var r=[];return e.forEach(function(e){i=e.forumid,e.options=e.options||{};var a=o.uploadAttachments(i,e,!1,n,t).then(function(t){return e.options.attachmentsid=t,o.forumProvider.replyPostOnline(e.postid,e.subject,e.message,e.options,n)});r.push(a.then(function(){return l.updated=!0,o.deleteReply(i,e.postid,n,t)}).catch(function(r){return o.utils.isWebServiceError(r)?(l.updated=!0,o.deleteReply(i,e.postid,n,t).then(function(){l.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:e.name,error:o.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)}))}),Promise.all(r)}}).then(function(){var t=[];return i&&t.push(o.forumProvider.invalidateDiscussionsList(i,n)),t.push(o.forumProvider.invalidateDiscussionPosts(e,i,n)),o.utils.allPromises(t).catch(function(){})}).then(function(){return o.setSyncTime(r,n).catch(function(){})}).then(function(){return l});return this.addOngoingSync(r,a,n)},t.prototype.deleteNewDiscussion=function(e,t,n,o){var r=[];return r.push(this.forumOffline.deleteNewDiscussion(e,t,n,o)),r.push(this.forumHelper.deleteNewDiscussionStoredFiles(e,t,n).catch(function(){})),Promise.all(r)},t.prototype.deleteReply=function(e,t,n,o){var r=[];return r.push(this.forumOffline.deleteReply(t,n,o)),r.push(this.forumHelper.deleteReplyStoredFiles(e,t,n,o).catch(function(){})),Promise.all(r)},t.prototype.uploadAttachments=function(e,t,n,o,r){var i=this,l=t&&t.options&&t.options.attachmentsid;if(l){var a=l.online||[],s=void 0;return l.offline?(s=n?this.forumHelper.getNewDiscussionStoredFiles(e,t.timecreated,o):this.forumHelper.getReplyStoredFiles(e,t.postid,o,r)).then(function(e){a=a.concat(e)}).catch(function(){}):s=Promise.resolve(),s.then(function(){return i.uploaderProvider.uploadOrReuploadFiles(a,v.a.COMPONENT,e,o)})}return Promise.resolve()},t.prototype.getForumSyncId=function(e,t){return t=t||this.sitesProvider.getCurrentSiteUserId(),"forum#"+e+"#"+t},t.prototype.getDiscussionSyncId=function(e,t){return t=t||this.sitesProvider.getCurrentSiteUserId(),"discussion#"+e+"#"+t},t.AUTO_SYNCED="addon_mod_forum_autom_synced",t.MANUAL_SYNCED="addon_mod_forum_manual_synced",t=n=E([Object(o.A)(),C("design:paramtypes",[r.c,u.a,l.a,d.a,f.a,c.a,p.a,h.a,m.a,_.a,s.a,g.a,v.a,y.a,b.a,a.a,P.a])],t);var n}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.content=t,this.element=e.nativeElement}return e.prototype.ngOnInit=function(){this.content&&(this.content.getNativeElement().classList.add("has-fab"),this.content.getFixedElement().appendChild(this.element))},e.prototype.ngOnDestroy=function(){this.content&&this.content.getNativeElement().classList.remove("has-fab")},e=i([Object(o.s)({selector:"ion-fab[core-fab]"}),l("design:paramtypes",[o.t,r.f])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(10),i=n(6),l=n(1),a=n(11),s=n(24),u=n(46),c=n(310),d=n(161),f=n(53),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,i,l,a){this.appProvider=t,this.sitesProvider=n,this.timeUtils=o,this.userProvider=r,this.emulatorHelper=i,this.messageProvider=l,this.textUtils=a,this.ROOT_CACHE_KEY="mmaNotifications:",this.logger=e.getInstance("AddonNotificationsProvider")}return t=e,e.prototype.formatNotificationsData=function(e,t){var n=this,o=e.map(function(e){if(e.mobiletext=e.component&&"mod_forum"==e.component?e.smallmessage:e.fullmessage,e.moodlecomponent=e.component,e.notification=1,e.notif=1,void 0!==t&&(e.read=t),"string"==typeof e.customdata&&(e.customdata=n.textUtils.parseJSON(e.customdata,{})),e.customdata&&e.customdata.courseid)e.courseid=e.customdata.courseid;else if(!e.courseid){var o=e.fullmessagehtml.match(/course\/view\.php\?id=([^"]*)/);o&&o[1]&&(e.courseid=parseInt(o[1],10))}return e.useridfrom>0?n.userProvider.getProfile(e.useridfrom,e.courseid,!0).then(function(t){return e.profileimageurlfrom=t.profileimageurl,e.userfromfullname=t.fullname,e}).catch(function(){}):Promise.resolve(e)});return Promise.all(o)},e.prototype.getNotificationPreferencesCacheKey=function(){return this.ROOT_CACHE_KEY+"notificationPreferences"},e.prototype.getNotificationPreferences=function(e){var t=this;return this.logger.debug("Get notification preferences"),this.sitesProvider.getSite(e).then(function(e){var n={cacheKey:t.getNotificationPreferencesCacheKey(),updateFrequency:f.a.FREQUENCY_SOMETIMES};return e.read("core_message_get_user_notification_preferences",{},n).then(function(e){return e.preferences})})},e.prototype.getNotificationsCacheKey=function(){return this.ROOT_CACHE_KEY+"list"},e.prototype.getNotifications=function(e,n,o,r,i,l,a){var s=this;return void 0===o&&(o=0),void 0===r&&(r=!0),o=o||t.LIST_LIMIT,this.logger.debug("Get "+(e?"read":"unread")+" notifications from "+n+". Limit: "+o),this.sitesProvider.getSite(a).then(function(u){var c={useridto:u.getUserId(),useridfrom:0,type:"notifications",read:e?1:0,newestfirst:1,limitfrom:n,limitnum:o},d={cacheKey:s.getNotificationsCacheKey(),omitExpires:i,getFromCache:i||!l,emergencyCache:i||!l};return u.read("core_message_get_messages",c,d).then(function(o){if(o.messages){var i=o.messages;return s.formatNotificationsData(i,e).then(function(){return s.appProvider.isDesktop()&&r&&!e&&0===n&&s.emulatorHelper.storeLastReceivedNotification(t.PUSH_SIMULATION_COMPONENT,i[0],a),i})}return Promise.reject(null)})})},e.prototype.getPopupNotifications=function(e,n,o,r,i,l){var a=this;return void 0===o&&(o=!0),n=n||t.LIST_LIMIT,this.logger.debug("Get popup notifications from "+e+". Limit: "+n),this.sitesProvider.getSite(l).then(function(s){var u={useridto:s.getUserId(),newestfirst:1,offset:e,limit:n+1},c={cacheKey:a.getNotificationsCacheKey(),omitExpires:r,getFromCache:r||!i,emergencyCache:r||!i};return s.read("message_popup_get_popup_notifications",u,c).then(function(r){if(r.notifications){var i={canLoadMore:r.notifications.length>n,notifications:r.notifications.slice(0,n)};return a.formatNotificationsData(i.notifications).then(function(){var n=i.notifications[0];return a.appProvider.isDesktop()&&o&&0===e&&n&&!n.read&&a.emulatorHelper.storeLastReceivedNotification(t.PUSH_SIMULATION_COMPONENT,n,l),i})}return Promise.reject(null)})})},e.prototype.getReadNotifications=function(e,t,n,o,r,i){return void 0===n&&(n=!0),this.getNotifications(!0,e,t,n,o,r,i)},e.prototype.getUnreadNotifications=function(e,t,n,o,r,i){return void 0===n&&(n=!0),this.getNotifications(!1,e,t,n,o,r,i)},e.prototype.getUnreadNotificationsCount=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){if(r.wsAvailable("message_popup_get_unread_popup_notification_count")){e=e||r.getUserId();return r.read("message_popup_get_unread_popup_notification_count",{useridto:e},{getFromCache:!1,emergencyCache:!1,saveToCache:!1,typeExpected:"number"}).catch(function(){return 0})}return o.getUnreadNotifications(0,t.LIST_LIMIT+1,!1,!1,!1,n).then(function(e){return e.length>t.LIST_LIMIT?t.LIST_LIMIT+"+":e.length}).catch(function(){return 0})})},e.prototype.isPopupAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("message_popup_get_popup_notifications")})},e.prototype.markAllNotificationsAsRead=function(){var e={useridto:this.sitesProvider.getCurrentSiteUserId()};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_notifications_as_read",e)},e.prototype.markNotificationRead=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){if(t.wsAvailable("core_message_mark_notification_read")){var o={notificationid:e,timeread:n.timeUtils.timestamp()};return t.write("core_message_mark_notification_read",o)}return n.messageProvider.markMessageRead(e,t.id)})},e.prototype.invalidateNotificationPreferences=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getNotificationPreferencesCacheKey())})},e.prototype.invalidateNotificationsList=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getNotificationsCacheKey())})},e.prototype.isMarkAllNotificationsAsReadEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_mark_all_notifications_as_read")},e.prototype.isPreciseNotificationCountEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("message_popup_get_unread_popup_notification_count")},e.prototype.isNotificationPreferencesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_user_notification_preferences")},e.READ_CHANGED_EVENT="addon_notifications_read_changed_event",e.READ_CRON_EVENT="addon_notifications_read_cron_event",e.PUSH_SIMULATION_COMPONENT="AddonNotificationsPushSimulation",e.LIST_LIMIT=20,e=t=p([Object(o.A)(),h("design:paramtypes",[i.a,r.a,l.a,s.a,u.a,c.a,d.a,a.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(79),i=n(5),l=n(6),a=n(4),s=n(22),u=n(44),c=n(2),d=n(28),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},m=function(){function e(e,t,n,r,i,l,a,s){this.iframeUtils=t,this.domUtils=n,this.sanitizer=r,this.navCtrl=i,this.urlUtils=l,this.utils=a,this.svComponent=s,this.loaded=new o.v,this.IFRAME_TIMEOUT=15e3,this.logger=e.getInstance("CoreIframe"),this.loaded=new o.v}return e.prototype.ngOnInit=function(){var e=this,t=this.iframe&&this.iframe.nativeElement;this.iframeWidth=this.domUtils.formatPixelsSize(this.iframeWidth)||"100%",this.iframeHeight=this.domUtils.formatPixelsSize(this.iframeHeight)||"100%",this.allowFullscreen=this.utils.isTrueOrOne(this.allowFullscreen),this.loading=!this.src||!!this.src.match(/^https?:\/\//i);var n=this.svComponent?this.svComponent.getMasterNav():this.navCtrl;this.iframeUtils.treatFrame(t,!1,n),this.loading&&(t.addEventListener("load",function(){e.loading=!1,e.loaded.emit(t)}),t.addEventListener("error",function(){e.loading=!1,e.domUtils.showErrorModal("core.errorloadingcontent",!0)}),setTimeout(function(){e.loading=!1},this.IFRAME_TIMEOUT))},e.prototype.ngOnChanges=function(e){if(e.src){var t=this.urlUtils.getYoutubeEmbedUrl(e.src.currentValue);this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t||e.src.currentValue)}},f([Object(o._9)("iframe"),p("design:type",o.t)],e.prototype,"iframe",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"src",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"iframeWidth",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"iframeHeight",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"allowFullscreen",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"loaded",void 0),e=f([Object(o.m)({selector:"core-iframe",templateUrl:"core-iframe.html"}),h(7,Object(o.N)()),p("design:paramtypes",[l.a,u.a,a.a,r.c,i.s,s.a,c.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(57),i=n(1),l=n(2),a=n(11),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,n,o,r){this.fileProvider=e,this.sitesProvider=n,this.textUtils=o,this.utils=r,this.siteSchema={name:"AddonModGlossaryOfflineProvider",version:1,tables:[{name:t.ENTRIES_TABLE,columns:[{name:"glossaryid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"concept",type:"TEXT"},{name:"definition",type:"TEXT"},{name:"definitionformat",type:"TEXT"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"options",type:"TEXT"},{name:"attachments",type:"TEXT"}],primaryKeys:["glossaryid","concept","timecreated"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteNewEntry=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={glossaryid:e,concept:n,timecreated:o};return r.getDb().deleteRecords(t.ENTRIES_TABLE,i)})},e.prototype.getAllNewEntries=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.ENTRIES_TABLE).then(function(e){return e.map(n.parseRecord.bind(n))})})},e.prototype.getNewEntry=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={glossaryid:e,concept:n,timecreated:o};return r.getDb().getRecord(t.ENTRIES_TABLE,l).then(i.parseRecord.bind(i))})},e.prototype.getGlossaryNewEntries=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={glossaryid:e,userId:o||n.getUserId()};return n.getDb().getRecords(t.ENTRIES_TABLE,i).then(function(e){return e.map(r.parseRecord.bind(r))})})},e.prototype.isConceptUsed=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var a={glossaryid:e,concept:n};return l.getDb().getRecords(t.ENTRIES_TABLE,a).then(function(t){return!!t.length&&(t.length>1||!o||i.utils.promiseFails(i.getNewEntry(e,n,o,r)))})}).catch(function(){return!1})},e.prototype.addNewEntry=function(e,n,o,r,i,l,a,s,u,c){var d=this;return this.sitesProvider.getSite(s).then(function(s){var f={glossaryid:e,courseid:r,concept:n,definition:o,definitionformat:"html",options:JSON.stringify(i),attachments:JSON.stringify(l),userid:u||s.getUserId(),timecreated:a||(new Date).getTime()};return(c?d.deleteNewEntry(e,c.concept,c.timecreated,s.getId()):Promise.resolve()).then(function(){return s.getDb().insertRecord(t.ENTRIES_TABLE,f).then(function(){return!1})})})},e.prototype.getGlossaryFolder=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=n.fileProvider.getSiteFolder(t.getId());return n.textUtils.concatenatePaths(o,"offlineglossary/"+e)})},e.prototype.getEntryFolder=function(e,t,n,o){var r=this;return this.getGlossaryFolder(e,o).then(function(e){return r.textUtils.concatenatePaths(e,"newentry_"+t+"_"+n)})},e.prototype.parseRecord=function(e){return e.options=this.textUtils.parseJSON(e.options),e.attachments=this.textUtils.parseJSON(e.attachments),e},e.ENTRIES_TABLE="addon_mod_glossary_entrues",e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,a.a,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(6),s=n(1),u=n(81),c=n(11),d=n(24),f=n(13),p=n(65),h=n(50),m=n(128),_=n(73),g=n(311),v=n(167),y=n(263),b=n(332),P=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_){var g=e.call(this,"AddonModQuizSyncProvider",t,n,o,r,i,l,s,m,d)||this;return g.eventsProvider=a,g.quizProvider=u,g.quizOfflineProvider=c,g.prefetchHandler=d,g.questionProvider=f,g.questionDelegate=p,g.logHelper=h,g.courseProvider=_,g.componentTranslate=_.translateModuleName("quiz"),g}return P(t,e),n=t,t.prototype.finishSync=function(e,t,n,o,r,i,l,a,s){var u=this;return this.quizProvider.invalidateAllQuizData(t.id,n,r,e).catch(function(){}).then(function(){if(a&&r)return u.quizOfflineProvider.removeAttemptAndAnswers(r,e)}).then(function(){if(s)return u.courseProvider.getModuleBasicInfoByInstance(t.id,"quiz",e).then(function(o){return u.prefetchAfterUpdateQuiz(o,t,n,void 0,e)}).catch(function(){})}).then(function(){return u.setSyncTime(t.id,e).catch(function(){})}).then(function(){return!(!l||u.quizProvider.isAttemptFinished(l.state))&&u.quizProvider.getUserAttempts(t.id,"all",!0,!1,!1,e).then(function(e){for(var t in e){var n=e[t];if(n.id==l.id)return u.quizProvider.isAttemptFinished(n.state)}return!1})}).then(function(e){return{warnings:o,attemptFinished:e}})},t.prototype.hasDataToSync=function(e,t){return this.quizOfflineProvider.getQuizAttempts(e,t).then(function(e){return!!e.length}).catch(function(){return!1})},t.prototype.prefetchAfterUpdateQuiz=function(e,t,n,o,r){var i=this;o=o||/^.*files$/;var l;return this.prefetchDelegate.getModuleUpdates(e,n,!0,r).then(function(t){if(t&&t.updates&&t.updates.length>0&&(l=!t.updates.find(function(e){return e.name.match(o)})))return i.prefetchHandler.download(e,n,void 0,!1,!1)}).then(function(){return i.prefetchHandler.setStatusAfterPrefetch(t,void 0,l,!1,r)})},t.prototype.syncAllQuizzes=function(e,t){return this.syncOnSites("all quizzes",this.syncAllQuizzesFunc.bind(this),[t],e)},t.prototype.syncAllQuizzesFunc=function(e,t){var o=this;return this.quizOfflineProvider.getAllAttempts(e).then(function(r){var i=[],l=[],a=[];return r.forEach(function(e){-1==l.indexOf(e.quizid)&&(l.push(e.quizid),i.push({id:e.quizid,courseid:e.courseid}))}),i.forEach(function(r){o.syncProvider.isBlocked(v.a.COMPONENT,r.id,e)||a.push(o.quizProvider.getQuizById(r.courseid,r.id,!1,!1,e).then(function(r){return(t?o.syncQuiz(r,!1,e):o.syncQuizIfNeeded(r,!1,e)).then(function(t){return t&&t.warnings&&t.warnings.length?o.setSyncWarnings(r.id,t.warnings,e).then(function(){return t}):t}).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{quizId:r.id,attemptFinished:t.attemptFinished,warnings:t.warnings},e)})}))}),Promise.all(a)})},t.prototype.syncQuizIfNeeded=function(e,t,n){var o=this;return this.isSyncNeeded(e.id,n).then(function(r){if(r)return o.syncQuiz(e,t,n)})},t.prototype.syncQuiz=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r,i,l=[],a=e.course;return this.isSyncing(e.id,n)?this.getOngoingSync(e.id,n):this.syncProvider.isBlocked(v.a.COMPONENT,e.id,n)?(this.logger.debug("Cannot sync quiz "+e.id+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync quiz "+e.id+" in site "+n),r=this.logHelper.syncIfNeeded(v.a.COMPONENT,e.id,n).catch(function(){}).then(function(){return o.quizOfflineProvider.getQuizAttempts(e.id,n)}).then(function(r){if(!r.length)return o.finishSync(n,e,a,l);var s=r.pop();return o.quizProvider.getUserAttempts(e.id,"all",!0,!1,!0,n).then(function(r){var u,c=r.length?r[r.length-1].id:void 0;for(var d in r){var f=r[d];if(f.id==s.id){u=f;break}}return!u||o.quizProvider.isAttemptFinished(u.state)?(l.push(o.translate.instant("addon.mod_quiz.warningattemptfinished")),o.finishSync(n,e,a,l,s.id,s,u,!0)):o.quizOfflineProvider.getAttemptAnswers(s.id,n).then(function(r){if(!r.length)return o.finishSync(n,e,a,l,c,s,u,!0);var d,f=o.questionProvider.convertAnswersArrayToObject(r),p=o.quizOfflineProvider.classifyAnswersInQuestions(f);return o.quizProvider.getQuizAccessInformation(e.id,!1,!0,n).then(function(r){return o.prefetchHandler.getPreflightData(e,r,u,t,"core.settings.synchronization",n)}).then(function(t){i=t;var r=o.quizProvider.getPagesFromLayoutAndQuestions(u.layout,p);return o.quizProvider.getAllQuestionsData(e,u,i,r,!1,!0,n)}).then(function(e){return o.validateQuestions(u.id,e,p,n)}).then(function(t){var r=o.quizOfflineProvider.extractAnswersFromQuestions(p);return d=s.finished&&!t,t&&l.push(o.translate.instant(s.finished?"addon.mod_quiz.warningdatadiscardedfromfinished":"addon.mod_quiz.warningdatadiscarded")),o.quizProvider.processAttempt(e,u,r,i,d,!1,!1,n)}).then(function(){if(!d)return o.quizProvider.logViewAttempt(u.id,s.currentpage,i,!1,void 0,n).catch(function(){})}).then(function(){return o.finishSync(n,e,a,l,c,s,u,!0,!0)})})})}),this.addOngoingSync(e.id,r,n))},t.prototype.validateQuestions=function(e,t,n,o){var r=[],i=!1;for(var l in n){var a=n[l],s=t[l];s&&this.questionDelegate.validateSequenceCheck(s,a.answers[":sequencecheck"])?a.answers[":sequencecheck"]=s.sequencecheck:(i=!0,r.push(this.quizOfflineProvider.removeQuestionAndAnswers(e,Number(l),o)),delete n[l])}return Promise.all(r).then(function(){return i})},t.AUTO_SYNCED="addon_mod_quiz_autom_synced",t=n=O([Object(o.A)(),E("design:paramtypes",[a.a,s.a,i.a,u.a,c.a,r.c,l.a,d.a,v.a,y.a,b.a,m.a,_.a,p.a,h.a,f.a])],t);var n}(g.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(10),i=n(6),l=n(2),a=n(1),s=n(53),u=n(3),c=n(46),d=n(304),f=n(136),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,i,l,a){this.sitesProvider=t,this.appProvider=n,this.utils=o,this.translate=r,this.userProvider=i,this.notesOffline=l,this.pushNotificationsProvider=a,this.ROOT_CACHE_KEY="mmaNotes:",this.logger=e.getInstance("AddonNotesProvider")}return e.prototype.addNote=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.notesOffline.saveNote(e,t,n,o,r).then(function(){return!1})};return this.appProvider.isOnline()?this.addNoteOnline(e,t,n,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()}):l()},e.prototype.addNoteOnline=function(e,t,n,o,r){var i=this;return this.addNotesOnline([{courseid:t,format:1,publishstate:n,text:o,userid:e}],r).then(function(e){return e&&e[0]&&-1===e[0].noteid?Promise.reject(i.utils.createFakeWSError(e[0].errormessage)):i.invalidateNotes(t,void 0,r).catch(function(){})})},e.prototype.addNotesOnline=function(e,t){return e&&e.length?this.sitesProvider.getSite(t).then(function(t){return t.write("core_notes_create_notes",{notes:e})}):Promise.resolve([])},e.prototype.deleteNote=function(e,t,n){var o=this;if(n=n||this.sitesProvider.getCurrentSiteId(),e.offline)return this.notesOffline.deleteOfflineNote(e.userid,e.content,e.created,n);var r=function(){return o.notesOffline.deleteNote(e.id,t,n).then(function(){return!1})};return this.appProvider.isOnline()?this.deleteNotesOnline([e.id],t,n).then(function(){return!0}).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()}):r()},e.prototype.deleteNotesOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){return r.write("core_notes_delete_notes",{notes:e}).then(function(e){return o.invalidateNotes(t,void 0,n).catch(function(){})})})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canUseAdvancedFeature("enablenotes")})},e.prototype.isPluginAddNoteEnabledForCourse=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return n.utils.promiseWorks(t.read("core_notes_create_notes",{notes:[{userid:-1,publishstate:"personal",courseid:e,text:"",format:1}]},{updateFrequency:s.a.FREQUENCY_RARELY}))})},e.prototype.isPluginViewNotesEnabledForCourse=function(e,t){return this.utils.promiseWorks(this.getNotes(e,void 0,!1,!0,t))},e.prototype.getNotesPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"notes:"+e+":"},e.prototype.getNotesCacheKey=function(e,t){return this.getNotesPrefixCacheKey(e)+(t||"")},e.prototype.getNotes=function(e,t,n,o,r){var i=this;return this.logger.debug("Get notes for course "+e),this.sitesProvider.getSite(r).then(function(l){var a={courseid:e};t&&(a.userid=t);var u={cacheKey:i.getNotesCacheKey(e,t),updateFrequency:s.a.FREQUENCY_SOMETIMES};return n&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("core_notes_get_course_notes",a,u).then(function(n){return o?n:i.notesOffline.getNotesForCourseAndUser(e,t,r).then(function(e){return e.forEach(function(e){var t=e.publishstate+"notes";n[t]||(n[t]=[]),e.offline=!0,n[t].unshift(e)}),n})})})},e.prototype.setOfflineDeletedNotes=function(e,t,n){return this.notesOffline.getCourseDeletedNotes(t,n).then(function(t){return e.forEach(function(e){e.deleted=t.some(function(t){return t.noteid==e.id})}),e})},e.prototype.getNotesUserData=function(e,t){var n=this,o=e.map(function(e){return n.userProvider.getProfile(e.userid,e.courseid,!0).then(function(t){e.userfullname=t.fullname,e.userprofileimageurl=t.profileimageurl||null}).catch(function(){e.userfullname=n.translate.instant("addon.notes.userwithid",{id:e.userid})})});return Promise.all(o).then(function(){return e})},e.prototype.invalidateNotes=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t?n.invalidateWsCacheForKey(o.getNotesCacheKey(e,t)):n.invalidateWsCacheForKeyStartingWith(o.getNotesPrefixCacheKey(e))})},e.prototype.logView=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={courseid:e,userid:t||0};return o.pushNotificationsProvider.logViewListEvent("notes","core_notes_view_notes",r,n.getId()),n.write("core_notes_view_notes",r)})},e=p([Object(o.A)(),h("design:paramtypes",[i.a,a.a,r.a,l.a,u.c,c.a,d.a,f.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(3),i=n(6),l=n(1),a=n(24),s=n(2),u=n(128),c=n(117),d=n(167),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,n,o,r,i,l,a){this.sitesProvider=n,this.timeUtils=o,this.questionProvider=r,this.translate=i,this.utils=l,this.behaviourDelegate=a,this.siteSchema={name:"AddonModQuizOfflineProvider",version:1,tables:[{name:t.ATTEMPTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"attempt",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"quizid",type:"INTEGER"},{name:"currentpage",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"finished",type:"INTEGER"}]}]},this.logger=e.getInstance("AddonModQuizOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.classifyAnswersInQuestions=function(e){var t={};for(var n in e){var o=this.questionProvider.getQuestionSlotFromName(n),r=this.questionProvider.removeQuestionPrefix(n);t[o]||(t[o]={answers:{},prefix:n.substr(0,n.indexOf(r))}),t[o].answers[r]=e[n]}return t},e.prototype.extractAnswersFromQuestions=function(e){var t={};for(var n in e){var o=e[n];for(var r in o.answers)t[o.prefix+r]=o.answers[r]}return t},e.prototype.getAllAttempts=function(e){return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(t.ATTEMPTS_TABLE)})},e.prototype.getAttemptAnswers=function(e,t){return this.questionProvider.getAttemptAnswers(d.a.COMPONENT,e,t)},e.prototype.getAttemptById=function(e,n){return this.sitesProvider.getSiteDb(n).then(function(n){return n.getRecord(t.ATTEMPTS_TABLE,{id:e})})},e.prototype.getQuizAttempts=function(e,n,o){return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.getDb().getRecords(t.ATTEMPTS_TABLE,{quizid:e,userid:o})})},e.prototype.loadQuestionsLocalStates=function(e,t,n){var o=this,r=[];return t.forEach(function(t){r.push(o.questionProvider.getQuestion(d.a.COMPONENT,e,t.slot,n).then(function(e){var n=o.questionProvider.getState(e.state);t.state=e.state,t.status=o.translate.instant("core.question."+n.status)}).catch(function(){}))}),Promise.all(r).then(function(){return t})},e.prototype.processAttempt=function(e,n,o,r,i,l){var a=this;l=l||this.sitesProvider.getCurrentSiteId();var s,u=this.timeUtils.timestamp();return this.sitesProvider.getSiteDb(l).then(function(t){return s=t,a.getAttemptById(n.id,l).catch(function(){return{quizid:e.id,userid:n.userid,id:n.id,courseid:e.course,timecreated:u,attempt:n.attempt,currentpage:n.currentpage}})}).then(function(e){return e.timemodified=u,e.finished=i?1:0,s.insertRecord(t.ATTEMPTS_TABLE,e)}).then(function(){return a.saveAnswers(e,n,o,r,u,l)})},e.prototype.removeAttemptAndAnswers=function(e,n){n=n||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.questionProvider.removeAttemptAnswers(d.a.COMPONENT,e,n)),o.push(this.questionProvider.removeAttemptQuestions(d.a.COMPONENT,e,n)),o.push(this.sitesProvider.getSiteDb(n).then(function(n){return n.deleteRecords(t.ATTEMPTS_TABLE,{id:e})})),Promise.all(o)},e.prototype.removeQuestionAndAnswers=function(e,t,n){n=n||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.questionProvider.removeQuestion(d.a.COMPONENT,e,t,n)),o.push(this.questionProvider.removeQuestionAnswers(d.a.COMPONENT,e,t,n)),Promise.all(o)},e.prototype.saveAnswers=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId(),r=r||this.timeUtils.timestamp();var a={},s={},u=[];for(var c in o){var f=this.questionProvider.getQuestionSlotFromName(c),p=this.questionProvider.removeQuestionPrefix(c);n[f]&&(a[f]||(a[f]=n[f],a[f].answers={}),a[f].answers[p]=o[c])}var h=function(n){var o=a[n];u.push(m.behaviourDelegate.determineNewState(e.preferredbehaviour,d.a.COMPONENT,t.id,o,i).then(function(e){e&&e.name!=o.state&&(s[o.slot]=e.name)}))},m=this;for(var f in a)h(f);return Promise.all(u).then(function(){return l.questionProvider.saveAnswers(d.a.COMPONENT,e.id,t.id,t.userid,o,r,i)}).then(function(){u=[];for(var n in s){u.push(l.questionProvider.saveQuestion(d.a.COMPONENT,e.id,t.id,t.userid,a[n],s[n],i))}return l.utils.allPromises(u).catch(function(e){l.logger.error("Error saving question state",e)})})},e.prototype.setAttemptCurrentPage=function(e,n,o){return this.sitesProvider.getSiteDb(o).then(function(o){return o.updateRecords(t.ATTEMPTS_TABLE,{currentpage:n},{id:e})})},e.ATTEMPTS_TABLE="addon_mod_quiz_attempts",e=t=f([Object(o.A)(),p("design:paramtypes",[i.a,l.a,a.a,u.a,r.c,s.a,c.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(6),i=n(1),l=n(81),a=n(11),s=n(24),u=n(2),c=n(46),d=n(234),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,n,o,r,i,l,a){this.sitesProvider=n,this.timeUtils=o,this.syncProvider=r,this.utils=i,this.textUtils=l,this.userProvider=a,this.siteSchema={name:"AddonModScormOfflineProvider",version:1,tables:[{name:t.ATTEMPTS_TABLE,columns:[{name:"scormid",type:"INTEGER",notNull:!0},{name:"attempt",type:"INTEGER",notNull:!0},{name:"userid",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"snapshot",type:"TEXT"}],primaryKeys:["scormid","userid","attempt"]},{name:t.TRACKS_TABLE,columns:[{name:"scormid",type:"INTEGER",notNull:!0},{name:"attempt",type:"INTEGER",notNull:!0},{name:"userid",type:"INTEGER",notNull:!0},{name:"scoid",type:"INTEGER",notNull:!0},{name:"element",type:"TEXT",notNull:!0},{name:"value",type:"TEXT"},{name:"timemodified",type:"INTEGER"},{name:"synced",type:"INTEGER"}],primaryKeys:["scormid","userid","attempt","scoid","element"]}]},this.logger=e.getInstance("AddonModScormOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.changeAttemptNumber=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(r).then(function(r){i=i||r.getUserId(),l.logger.debug("Change attempt number from "+n+" to "+o+" in SCORM "+e);var a=r.getDb(),s={scormid:e,userid:i,attempt:n},u={scormid:e,userid:i,attempt:o},c={attempt:o,timemodified:l.timeUtils.timestamp()};return l.syncProvider.blockOperation(d.a.COMPONENT,e,"changeAttemptNumber",r.id),a.updateRecords(t.ATTEMPTS_TABLE,c,s).then(function(){return c={attempt:o,synced:0},a.updateRecords(t.TRACKS_TABLE,c,s).catch(function(e){return a.updateRecords(t.ATTEMPTS_TABLE,{attempt:n},u).then(function(){return Promise.reject(e)})})}).finally(function(){l.syncProvider.unblockOperation(d.a.COMPONENT,e,"changeAttemptNumber",r.id)})})},e.prototype.createNewAttempt=function(e,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId(),a.logger.debug("Creating new offline attempt "+n+" in SCORM "+e.id),a.syncProvider.blockOperation(d.a.COMPONENT,e.id,"createNewAttempt",i.id);var s=i.getDb(),u={scormid:e.id,userid:l,attempt:n,courseid:e.course,timecreated:a.timeUtils.timestamp(),timemodified:a.timeUtils.timestamp(),snapshot:null};return r&&(u.snapshot=JSON.stringify(a.removeDefaultData(r))),s.insertRecord(t.ATTEMPTS_TABLE,u).then(function(){var t=[];for(var r in o){var s=o[r],u=[];for(var c in s.userdata)u.push({element:c,value:s.userdata[c]});t.push(a.saveTracks(e,s.scoid,n,u,o,i.id,l))}return Promise.all(t)}).finally(function(){a.syncProvider.unblockOperation(d.a.COMPONENT,e.id,"createNewAttempt",i.id)})})},e.prototype.deleteAttempt=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId(),i.logger.debug("Delete offline attempt "+n+" in SCORM "+e);var l=[],a=o.getDb();return l.push(a.deleteRecords(t.ATTEMPTS_TABLE,{scormid:e,userid:r,attempt:n})),l.push(a.deleteRecords(t.TRACKS_TABLE,{scormid:e,userid:r,attempt:n})),Promise.all(l)})},e.prototype.formatInteractions=function(e){var t={};t.score_raw="",t.status="",t.total_time="00:00:00",t.session_time="00:00:00";for(var n in e){var o=e[n];if("score_raw"==n||"status"==n||"total_time"==n||"session_time"==n)return;switch(t[n]=o,n){case"cmi.core.lesson_status":case"cmi.completion_status":"not attempted"==o&&(o="notattempted"),t.status=o;break;case"cmi.core.score.raw":case"cmi.score.raw":t.score_raw=this.textUtils.roundToDecimals(o,2);break;case"cmi.core.session_time":case"cmi.session_time":t.session_time=o;break;case"cmi.core.total_time":case"cmi.total_time":t.total_time=o}}return t},e.prototype.getAllAttempts=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(t.ATTEMPTS_TABLE)}).then(function(e){return e.forEach(function(e){e.snapshot=n.textUtils.parseJSON(e.snapshot)}),e})},e.prototype.getAttempt=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){return r=r||o.getUserId(),o.getDb().getRecord(t.ATTEMPTS_TABLE,{scormid:e,userid:r,attempt:n})}).then(function(e){return e.snapshot=i.textUtils.parseJSON(e.snapshot),e})},e.prototype.getAttemptCreationTime=function(e,t,n,o){return this.getAttempt(e,t,n,o).catch(function(){return{}}).then(function(e){return e.timecreated})},e.prototype.getAttempts=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.getDb().getRecords(t.ATTEMPTS_TABLE,{scormid:e,userid:o})}).then(function(e){return e.forEach(function(e){e.snapshot=r.textUtils.parseJSON(e.snapshot)}),e})},e.prototype.getAttemptSnapshot=function(e,t,n,o){return this.getAttempt(e,t,n,o).catch(function(){return{}}).then(function(e){return e.snapshot})},e.prototype.getLaunchUrlsFromScos=function(e){var t={};return(e=e||[]).forEach(function(e){t[e.id]=e.launch}),t},e.prototype.getScormStoredData=function(e,n,o,r,i,l){var a=this;return o&&r?Promise.resolve([]):this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId();var a={scormid:e,userid:l,attempt:n};return o?a.synced=0:r&&(a.synced=1),i.getDb().getRecords(t.TRACKS_TABLE,a)}).then(function(e){return e.forEach(function(e){e.value=a.textUtils.parseJSON(e.value)}),e})},e.prototype.getScormUserData=function(e,t,n,o,r){var i=this;n=n||[];var l="",a="";return this.sitesProvider.getSite(o).then(function(e){if((r=r||e.getUserId())!=e.getUserId())return i.userProvider.getProfile(r).then(function(e){l=e.fullname,a=e.username||""}).catch(function(){});l=e.getInfo().fullname,a=e.getInfo().username}).then(function(){return i.getScormStoredData(e,t,!1,!1,o,r).then(function(e){var t={},o=i.getLaunchUrlsFromScos(n);e.forEach(function(e){var n=e.scoid;t[n]||(t[n]={scoid:n,userdata:{userid:r,scoid:n,timemodified:0}}),t[n].userdata[e.element]=e.value,e.timemodified>t[n].userdata.timemodified&&(t[n].userdata.timemodified=e.timemodified)});for(var s in t){(u=t[s]).userdata=i.formatInteractions(u.userdata)}n.forEach(function(e){t[e.id]||(t[e.id]={scoid:e.id,userdata:{status:"",score_raw:""}})});for(var s in t){var u;(u=t[s]).defaultdata={},u.defaultdata["cmi.core.student_id"]=a,u.defaultdata["cmi.core.student_name"]=l,u.defaultdata["cmi.core.lesson_mode"]="normal",u.defaultdata["cmi.core.credit"]="credit",u.defaultdata["cmi.core.entry"]=""===u.userdata.status?"ab-initio":"suspend"===u.userdata["cmi.core.exit"]?"resume":"",u.defaultdata["cmi.student_data.mastery_score"]=i.scormIsset(u.userdata,"masteryscore"),u.defaultdata["cmi.student_data.max_time_allowed"]=i.scormIsset(u.userdata,"max_time_allowed"),u.defaultdata["cmi.student_data.time_limit_action"]=i.scormIsset(u.userdata,"time_limit_action"),u.defaultdata["cmi.core.total_time"]=i.scormIsset(u.userdata,"cmi.core.total_time","00:00:00"),u.defaultdata["cmi.launch_data"]=o[u.scoid],u.defaultdata["cmi.core.lesson_location"]=i.scormIsset(u.userdata,"cmi.core.lesson_location"),u.defaultdata["cmi.core.lesson_status"]=i.scormIsset(u.userdata,"cmi.core.lesson_status"),u.defaultdata["cmi.core.score.raw"]=i.scormIsset(u.userdata,"cmi.core.score.raw"),u.defaultdata["cmi.core.score.max"]=i.scormIsset(u.userdata,"cmi.core.score.max"),u.defaultdata["cmi.core.score.min"]=i.scormIsset(u.userdata,"cmi.core.score.min"),u.defaultdata["cmi.core.exit"]=i.scormIsset(u.userdata,"cmi.core.exit"),u.defaultdata["cmi.suspend_data"]=i.scormIsset(u.userdata,"cmi.suspend_data"),u.defaultdata["cmi.comments"]=i.scormIsset(u.userdata,"cmi.comments"),u.defaultdata["cmi.student_preference.language"]=i.scormIsset(u.userdata,"cmi.student_preference.language"),u.defaultdata["cmi.student_preference.audio"]=i.scormIsset(u.userdata,"cmi.student_preference.audio","0"),u.defaultdata["cmi.student_preference.speed"]=i.scormIsset(u.userdata,"cmi.student_preference.speed","0"),u.defaultdata["cmi.student_preference.text"]=i.scormIsset(u.userdata,"cmi.student_preference.text","0"),u.userdata.student_id=a,u.userdata.student_name=l,u.userdata.mode=u.defaultdata["cmi.core.lesson_mode"],u.userdata.credit=u.defaultdata["cmi.core.credit"],u.userdata.entry=u.defaultdata["cmi.core.entry"]}return t})})},e.prototype.insertTrack=function(e,t,n,o,r,i,l,a,s){var u=this;return this.sitesProvider.getSite(a).then(function(a){s=s||a.getUserId();var c=[],d=(l=l||{}).userdata||{},f=a.getDb(),p=!1;return i&&("cmi.core.lesson_status"==o&&"incomplete"==r&&d["cmi.core.score.raw"]&&(r="completed"),"cmi.core.score.raw"==o&&"incomplete"==d["cmi.core.lesson_status"]&&(p=!0,c.push(u.insertTrackToDB(f,s,e,t,n,"cmi.core.lesson_status","completed")))),Promise.all(c).then(function(){if(!d[o]||"x.start.time"!=o){var i=u.insertTrackToDB(f,s,e,t,n,o,r);return i.catch(function(o){return p?(i=u.insertTrackToDB(f,s,e,t,n,"cmi.core.lesson_status","incomplete")).then(function(){return Promise.reject(o)}):Promise.reject(null)})}})})},e.prototype.insertTrackToDB=function(e,n,o,r,i,l,a,s){var u={userid:n,scormid:o,scoid:r,attempt:i,element:l,value:void 0===a?null:JSON.stringify(a),timemodified:this.timeUtils.timestamp(),synced:0};return s?(e.insertRecord(t.TRACKS_TABLE,u),!0):e.insertRecord(t.TRACKS_TABLE,u)},e.prototype.insertTrackSync=function(e,t,n,o,r,i,l,a){if(l=l||{},a=a||this.sitesProvider.getCurrentSiteUserId(),!this.sitesProvider.isLoggedIn())return!1;var s=l.userdata||{},u=this.sitesProvider.getCurrentSite().getDb(),c=!1;return!(i&&("cmi.core.lesson_status"==o&&"incomplete"==r&&s["cmi.core.score.raw"]&&(r="completed"),"cmi.core.score.raw"==o&&"incomplete"==s["cmi.core.lesson_status"]&&(c=!0,!this.insertTrackToDB(u,a,e,t,n,"cmi.core.lesson_status","completed",!0))))&&(s[o]&&"x.start.time"==o?void 0:!!this.insertTrackToDB(u,a,e,t,n,o,r,!0)||(c&&this.insertTrackToDB(u,a,e,t,n,"cmi.core.lesson_status","incomplete",!0),!1))},e.prototype.markAsSynced=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(r).then(function(r){return i=i||r.getUserId(),l.logger.debug("Mark SCO "+o+" as synced for attempt "+n+" in SCORM "+e),r.getDb().updateRecords(t.TRACKS_TABLE,{synced:1},{scormid:e,userid:i,attempt:n,scoid:o,synced:0})})},e.prototype.removeDefaultData=function(e){var t=this.utils.clone(e);for(var n in t)delete t[n].defaultdata;return t},e.prototype.saveTracks=function(e,t,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(i).then(function(s){l=l||s.getUserId(),a.syncProvider.blockOperation(d.a.COMPONENT,e.id,"saveTracksOffline",i);var u=[];return o.forEach(function(o){u.push(a.insertTrack(e.id,t,n,o.element,o.value,e.forcecompleted,r[t],i,l))}),Promise.all(u).finally(function(){a.syncProvider.unblockOperation(d.a.COMPONENT,e.id,"saveTracksOffline",i)})})},e.prototype.saveTracksSync=function(e,t,n,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteUserId();var a=!0;return o.forEach(function(o){l.insertTrackSync(e.id,t,n,o.element,o.value,e.forcecompleted,r[t],i)||(a=!1)}),a},e.prototype.scormIsset=function(e,t,n){return void 0===n&&(n=""),void 0!==e[t]?e[t]:n},e.prototype.setAttemptSnapshot=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(r).then(function(r){i=i||r.getUserId(),l.logger.debug("Set snapshot for attempt "+n+" in SCORM "+e);var a={timemodified:l.timeUtils.timestamp(),snapshot:JSON.stringify(l.removeDefaultData(o))};return r.getDb().updateRecords(t.ATTEMPTS_TABLE,a,{scormid:e,userid:i,attempt:n})})},e.ATTEMPTS_TABLE="addon_mod_scorm_offline_attempts",e.TRACKS_TABLE="addon_mod_scorm_offline_scos_tracks",e=t=f([Object(o.A)(),p("design:paramtypes",[r.a,i.a,s.a,l.a,u.a,a.a,c.a])],e);var t}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(3),l=n(6),a=n(4),s=n(11),u=n(38),c=n(61),d=n(1572),f=n(15),p=n(206),h=n(40),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t){void 0===t&&(t="CoreCourseModuleMainResourceComponent"),this.fetchContentDefaultError="core.course.errorgetmodule",this.textUtils=e.get(s.a),this.courseHelper=e.get(u.a),this.translate=e.get(i.c),this.domUtils=e.get(a.a),this.moduleDelegate=e.get(c.a),this.courseSectionPage=e.get(d.a,null),this.linkHelper=e.get(f.a),this.navCtrl=e.get(r.s,null),this.blogProvider=e.get(p.a,null),this.dataRetrieved=new o.v;var n=e.get(l.a);this.logger=n.getInstance(t)}return e.prototype.ngOnInit=function(){var e=this;this.description=this.module.description,this.componentId=this.module.id,this.externalUrl=this.module.url,this.loaded=!1,this.refreshIcon="spinner",this.blogProvider.isPluginEnabled().then(function(t){e.blog=t})},e.prototype.doRefresh=function(e,t,n){var o=this;if(void 0===n&&(n=!1),this.loaded&&this.module){return(this.courseSectionPage&&!this.moduleDelegate.displayRefresherInSingleActivity(this.module.modname)?this.courseSectionPage.doRefresh():Promise.resolve()).finally(function(){return o.refreshContent(!0,n).finally(function(){e&&e.complete(),t&&t()})})}return Promise.resolve()},e.prototype.refreshContent=function(e,t){var n=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),!this.module)return Promise.resolve();this.refreshIcon="spinner";var o;try{o=this.invalidateContent()}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(){}).then(function(){return n.loadContent(!0)}).finally(function(){n.refreshIcon="refresh"})},e.prototype.invalidateContent=function(){return Promise.resolve()},e.prototype.fetchContent=function(e){return Promise.resolve()},e.prototype.loadContent=function(e){var t=this;if(!this.module)return Promise.resolve();var n;try{n=this.fetchContent(e)}catch(e){this.logger.error(e),n=Promise.resolve()}return n.catch(function(e){t.domUtils.showErrorModalDefault(e,t.fetchContentDefaultError,!0)}).finally(function(){t.loaded=!0,t.refreshIcon="refresh"})},e.prototype.fillContextMenu=function(e){void 0===e&&(e=!1),this.courseHelper.fillContextMenu(this,this.module,this.courseId,e,this.component)},e.prototype.isPrefetched=function(){return this.prefetchStatus!=h.a.NOT_DOWNLOADABLE&&this.prefetchStatus!=h.a.NOT_DOWNLOADED},e.prototype.expandDescription=function(){this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,[],!0,"module",this.module.id,this.courseId)},e.prototype.gotoBlog=function(e){this.linkHelper.goInSite(this.navCtrl,"AddonBlogEntriesPage",{cmId:this.module.id})},e.prototype.prefetch=function(e){this.courseHelper.contextMenuPrefetch(this,this.module,this.courseId,e)},e.prototype.removeFiles=function(){this.courseHelper.confirmAndRemoveFiles(this.module,this.courseId)},e.prototype.showErrorDownloadingSomeFiles=function(e){var t=this.textUtils.buildSeveralParagraphsMessage([this.translate.instant("core.errordownloadingsomefiles"),e]);this.domUtils.showErrorModal(t)},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.contextMenuStatusObserver&&this.contextMenuStatusObserver.off()},e.prototype.ionViewDidEnter=function(){this.isCurrentView=!0},e.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},m([Object(o.D)(),_("design:type",Object)],e.prototype,"module",void 0),m([Object(o.D)(),_("design:type",Number)],e.prototype,"courseId",void 0),m([Object(o.O)(),_("design:type",o.v)],e.prototype,"dataRetrieved",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e,t){this.sitePluginsProvider=e,this.utils=t,this.content="",this.jsData={}}return e.prototype.componentCreated=function(e){e&&this.handlerSchema&&this.handlerSchema.methodJSResult&&this.handlerSchema.methodJSResult.componentInit&&this.handlerSchema.methodJSResult.componentInit.apply(e)},e.prototype.getHandlerData=function(e){var t=this.sitePluginsProvider.getSitePluginHandler(e);this.handlerSchema=t&&t.handlerSchema,this.handlerSchema&&(this.handlerSchema.methodTemplates&&this.handlerSchema.methodTemplates.length&&(this.content=t.handlerSchema.methodTemplates[0].html,this.jsData.CONTENT_TEMPLATES=this.utils.objectToKeyValueMap(t.handlerSchema.methodTemplates,"id","html")),this.handlerSchema.methodOtherdata&&(this.jsData.CONTENT_OTHERDATA=this.handlerSchema.methodOtherdata),this.handlerSchema.methodJSResult&&(this.jsData.CONTENT_JS_RESULT=this.handlerSchema.methodJSResult))},e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(31),s=n(390),u=n(226),c=n(157),d=n(384),f=n(26),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=function(){function e(){}return e=p([Object(o.I)({declarations:[s.a,u.a,c.a,d.a],imports:[r.b,i.k,a.a,l.b.forChild(),f.a],providers:[],exports:[s.a,u.a,c.a,d.a],entryComponents:[u.a,c.a,d.a]})],e)}()},function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,5,"div",[["class","core-rte-info-message"]],null,null,null,null,null)),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(3,147456,null,0,u.a,[c.a,s.t,s.V],{name:[0,"name"]},null),(e()(),s._55(4,null,["\n        ","\n    "])),s._47(131072,d.a,[f.a,s.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,s._44(t,3)._hidden);e(t,4,0,s._56(t,4,0,s._44(t,5).transform(n.infoMessage)))})}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,4,"button",[["class","toolbar-arrow"]],[[2,"toolbar-arrow-hidden",null]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.toolbarPrev(n)&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(2,0,null,null,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(3,147456,null,0,u.a,[c.a,s.t,s.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),s._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,"arrow-back","ios-arrow-back")},function(e,t){e(t,0,0,t.component.toolbarPrevHidden);e(t,2,0,s._44(t,3)._hidden)})}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(1,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(3,0,null,0,4,"button",[],null,[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.hideToolbar(n)&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(5,0,null,null,1,"core-icon",[["name","fa-close"]],null,null,null,_.b,_.a)),s._30(6,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "]))],function(e,t){e(t,6,0,"fa-close")},null)}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,4,"button",[["class","toolbar-arrow"]],[[2,"toolbar-arrow-hidden",null]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.toolbarNext(n)&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(2,0,null,null,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(3,147456,null,0,u.a,[c.a,s.t,s.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),s._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,0,0,t.component.toolbarNextHidden);e(t,2,0,s._44(t,3)._hidden)})}function a(e){return s._57(0,[s._52(402653184,1,{editor:0}),s._52(402653184,2,{textarea:0}),s._52(402653184,3,{toolbar:0}),s._52(402653184,4,{toolbarSlides:0}),(e()(),s._31(4,0,null,null,10,"div",[["class","core-rte-editor-container"]],[[2,"toolbar-hidden",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.focusRTE()&&o}return o},null,null)),(e()(),s._55(-1,null,["\n    "])),(e()(),s._31(6,0,[[1,0],["editor",1]],null,1,"div",[["class","core-rte-editor"],["contenteditable","true"],["role","textbox"],["tappable",""]],[[8,"hidden",0],[1,"data-placeholder-text",0]],[[null,"focus"],[null,"longPress"],[null,"blur"]],function(e,t,n){var o=!0,r=e.component;if("focus"===t){o=!1!==r.showToolbar()&&o}if("longPress"===t){o=!1!==r.showToolbar()&&o}if("blur"===t){o=!1!==r.hideToolbar(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n    "])),(e()(),s._55(-1,null,["\n\n    "])),(e()(),s._31(9,0,null,null,1,"ion-textarea",[["class","core-textarea"],["ngControl","control"],["role","textbox"]],[[8,"hidden",0],[1,"name",0]],[[null,"ionChange"],[null,"focus"],[null,"longPress"],[null,"blur"]],function(e,t,n){var o=!0,r=e.component;if("ionChange"===t){o=!1!==r.onChange(n)&&o}if("focus"===t){o=!1!==r.showToolbar()&&o}if("longPress"===t){o=!1!==r.showToolbar()&&o}if("blur"===t){o=!1!==r.hideToolbar(n)&&o}return o},v.b,v.a)),s._30(10,5423104,[[2,4],["textarea",4]],0,y.a,[c.a,b.a,P.a,O.a,s.t,s.V,[2,E.a],[2,C.a],[2,I.m],R.a],{placeholder:[0,"placeholder"]},{ionChange:"ionChange",blur:"blur",focus:"focus"}),(e()(),s._55(-1,null,["\n\n    "])),(e()(),s._26(16777216,null,null,1,null,o)),s._30(13,16384,null,0,S.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._55(-1,null,["\n\n"])),(e()(),s._31(16,0,[[3,0],["toolbar",1]],null,135,"div",[["class","core-rte-toolbar"]],[[2,"toolbar-hidden",null]],null,null,null,null)),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,r)),s._30(19,16384,null,0,S.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._31(21,0,null,null,126,"ion-slides",[],null,[[null,"ionSlideDidChange"]],function(e,t,n){var o=!0;if("ionSlideDidChange"===t){o=!1!==e.component.updateToolbarArrows()&&o}return o},w.b,w.a)),s._30(22,1228800,[[4,4]],0,m.a,[c.a,b.a,s.M,[2,A.a],s.t,s.V],{slidesPerView:[0,"slidesPerView"]},{ionSlideDidChange:"ionSlideDidChange"}),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(25,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(26,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(28,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"bold")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(30,0,null,null,1,"core-icon",[["name","fa-bold"]],null,null,null,_.b,_.a)),s._30(31,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(35,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(36,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(38,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"italic")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(40,0,null,null,1,"core-icon",[["name","fa-italic"]],null,null,null,_.b,_.a)),s._30(41,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(45,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(46,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(48,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"underline")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(50,0,null,null,1,"core-icon",[["name","fa-underline"]],null,null,null,_.b,_.a)),s._30(51,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(55,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(56,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(58,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"strikeThrough")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(60,0,null,null,1,"core-icon",[["name","fa-strikethrough"]],null,null,null,_.b,_.a)),s._30(61,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(65,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(66,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(68,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"formatBlock|<p>")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(70,0,null,null,1,"core-icon",[["name","fa-paragraph"]],null,null,null,_.b,_.a)),s._30(71,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(75,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(76,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(78,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"formatBlock|<h3>")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(80,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,_.b,_.a)),s._30(81,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["3\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(85,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(86,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(88,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"formatBlock|<h4>")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(90,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,_.b,_.a)),s._30(91,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["4\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(95,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(96,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(98,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"formatBlock|<h5>")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(100,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,_.b,_.a)),s._30(101,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["5\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(105,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(106,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(108,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"insertUnorderedList")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(110,0,null,null,1,"core-icon",[["name","fa-list-ul"]],null,null,null,_.b,_.a)),s._30(111,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(115,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(116,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(118,0,null,0,4,"button",[],[[8,"disabled",0],[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"insertOrderedList")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(120,0,null,null,1,"core-icon",[["name","fa-list-ol"]],null,null,null,_.b,_.a)),s._30(121,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(125,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(126,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(128,0,null,0,4,"button",[],[[8,"disabled",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.buttonAction(n,"removeFormat")&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(130,0,null,null,1,"core-icon",[["name","fa-eraser"]],null,null,null,_.b,_.a)),s._30(131,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(135,0,null,0,8,"ion-slide",[],null,null,null,p.b,p.a)),s._30(136,180224,null,0,h.a,[s.t,s.V,m.a],null,null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(138,0,null,0,4,"button",[],[[1,"aria-pressed",0]],[[null,"click"],[null,"mousedown"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.toggleEditor(n)&&o}if("mousedown"===t){o=!1!==r.stopBubble(n)&&o}return o},null,null)),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(140,0,null,null,1,"core-icon",[["name","fa-code"]],null,null,null,_.b,_.a)),s._30(141,704512,null,0,g.a,[s.t,c.a],{name:[0,"name"]},null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n        "])),(e()(),s._26(16777216,null,0,1,null,i)),s._30(146,16384,null,0,S.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,0,["\n    "])),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,l)),s._30(150,16384,null,0,S.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,10,0,n.placeholder);e(t,13,0,n.infoMessage);e(t,19,0,n.toolbarArrows);e(t,22,0,n.numToolbarButtons);e(t,31,0,"fa-bold");e(t,41,0,"fa-italic");e(t,51,0,"fa-underline");e(t,61,0,"fa-strikethrough");e(t,71,0,"fa-paragraph");e(t,81,0,"fa-header");e(t,91,0,"fa-header");e(t,101,0,"fa-header");e(t,111,0,"fa-list-ul");e(t,121,0,"fa-list-ol");e(t,131,0,"fa-eraser");e(t,141,0,"fa-code");e(t,146,0,n.isPhone);e(t,150,0,n.toolbarArrows)},function(e,t){var n=t.component;e(t,4,0,n.toolbarHidden);e(t,6,0,!n.rteEnabled,n.placeholder);e(t,9,0,n.rteEnabled,n.name);e(t,16,0,n.toolbarHidden);e(t,28,0,!n.rteEnabled,n.toolbarStyles.b);e(t,38,0,!n.rteEnabled,n.toolbarStyles.i);e(t,48,0,!n.rteEnabled,n.toolbarStyles.u);e(t,58,0,!n.rteEnabled,n.toolbarStyles.strike);e(t,68,0,!n.rteEnabled,n.toolbarStyles.p);e(t,78,0,!n.rteEnabled,n.toolbarStyles.h3);e(t,88,0,!n.rteEnabled,n.toolbarStyles.h4);e(t,98,0,!n.rteEnabled,n.toolbarStyles.h5);e(t,108,0,!n.rteEnabled,n.toolbarStyles.ul);e(t,118,0,!n.rteEnabled,n.toolbarStyles.ol);e(t,128,0,!n.rteEnabled);e(t,138,0,n.rteEnabled?"false":"true")})}n.d(t,"b",function(){return F}),t.c=a,n.d(t,"a",function(){return L});var s=n(0),u=n(47),c=n(8),d=n(25),f=n(17),p=n(1052),h=n(356),m=n(267),_=n(80),g=n(75),v=n(110),y=n(90),b=n(16),P=n(19),O=n(35),E=n(29),C=n(20),I=n(23),R=n(34),S=n(7),w=n(1053),A=n(39),D=n(250),j=n(4),k=n(22),T=n(1),x=n(18),M=n(9),N=n(2),U=n(216),F=s._29({encapsulation:2,styles:[],data:{}}),L=s._27("core-rich-text-editor",D.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"core-rich-text-editor",[],null,null,null,a,F)),s._30(1,1228800,null,0,D.a,[j.a,k.a,T.a,x.a,[2,E.a],s.t,M.a,N.a,b.a,U.a],null,null)],null,null)},{placeholder:"placeholder",control:"control",name:"name",component:"component",componentId:"componentId",autoSave:"autoSave",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",elementId:"elementId",draftExtraParams:"draftExtraParams"},{contentChanged:"contentChanged"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(4),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},u=function(){function e(e,t){this.content=e,this.domUtils=t,this.error=!1,this.position="bottom",this.loadingMore=!1,this.action=new o.v}return e.prototype.ngOnChanges=function(e){var t=this;e.enabled&&this.enabled&&"bottom"==this.position&&setTimeout(function(){var e=new Event("scroll");t.content.ionScroll.emit(e)},400)},e.prototype.loadMore=function(e){this.loadingMore||(e&&(this.infiniteScroll=e),this.loadingMore=!0,this.action.emit(this.complete.bind(this)))},e.prototype.complete=function(){"top"==this.position?setTimeout(this.completeLoadMore.bind(this),400):this.completeLoadMore()},e.prototype.completeLoadMore=function(){var e=this;this.loadingMore=!1,this.infiniteScroll&&this.infiniteScroll.complete(),this.infiniteScroll=void 0,setTimeout(function(){var t=new Event("scroll");e.content.ionScroll.emit(t)})},e.prototype.getHeight=function(){return this.getElementHeight(this.topButton)+this.getElementHeight(this.infiniteEl)+this.getElementHeight(this.bottomButton)+this.getElementHeight(this.spinnerContainer)},e.prototype.getElementHeight=function(e){return e&&e.nativeElement?this.domUtils.getElementHeight(e.nativeElement,!0,!0,!0):0},l([Object(o.D)(),a("design:type",Boolean)],e.prototype,"enabled",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"error",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"position",void 0),l([Object(o.O)(),a("design:type",o.v)],e.prototype,"action",void 0),l([Object(o._9)("topbutton"),a("design:type",o.t)],e.prototype,"topButton",void 0),l([Object(o._9)("infinitescroll"),a("design:type",o.t)],e.prototype,"infiniteEl",void 0),l([Object(o._9)("bottombutton"),a("design:type",o.t)],e.prototype,"bottomButton",void 0),l([Object(o._9)("spinnercontainer"),a("design:type",o.t)],e.prototype,"spinnerContainer",void 0),e=l([Object(o.m)({selector:"core-infinite-loading",templateUrl:"core-infinite-loading.html"}),s(0,Object(o.N)()),a("design:paramtypes",[r.f,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(225),s=n(324),u=n(31),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e=c([Object(o.I)({declarations:[a.a,s.a],imports:[r.b,i.k,u.a,l.b.forChild()],providers:[],exports:[a.a,s.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,n){this.sitesProvider=e,this.utils=n,this.siteSchema={name:"AddonCalendarOfflineProvider",version:1,tables:[{name:t.EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"name",type:"TEXT",notNull:!0},{name:"timestart",type:"INTEGER",notNull:!0},{name:"eventtype",type:"TEXT",notNull:!0},{name:"categoryid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"groupcourseid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"description",type:"TEXT"},{name:"location",type:"TEXT"},{name:"duration",type:"INTEGER"},{name:"timedurationuntil",type:"INTEGER"},{name:"timedurationminutes",type:"INTEGER"},{name:"repeat",type:"INTEGER"},{name:"repeats",type:"INTEGER"},{name:"repeatid",type:"INTEGER"},{name:"repeateditall",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}]},{name:t.DELETED_EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"name",type:"TEXT",notNull:!0},{name:"repeat",type:"INTEGER"},{name:"timemodified",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteEvent=function(e,n){return this.sitesProvider.getSite(n).then(function(n){var o={id:e};return n.getDb().deleteRecords(t.EVENTS_TABLE,o)})},e.prototype.getAllEventsIds=function(e){var t=this,n=[];return n.push(this.getAllDeletedEventsIds(e)),n.push(this.getAllEditedEventsIds(e)),Promise.all(n).then(function(e){return t.utils.mergeArraysWithoutDuplicates(e[0],e[1])})},e.prototype.getAllDeletedEvents=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.DELETED_EVENTS_TABLE)})},e.prototype.getAllDeletedEventsIds=function(e){return this.getAllDeletedEvents(e).then(function(e){return e.map(function(e){return e.id})})},e.prototype.getAllEditedEvents=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.EVENTS_TABLE)})},e.prototype.getAllEditedEventsIds=function(e){return this.getAllEditedEvents(e).then(function(e){return e.map(function(e){return e.id})})},e.prototype.getDeletedEvent=function(e,n){return this.sitesProvider.getSite(n).then(function(n){var o={id:e};return n.getDb().getRecord(t.DELETED_EVENTS_TABLE,o)})},e.prototype.getEvent=function(e,n){return this.sitesProvider.getSite(n).then(function(n){var o={id:e};return n.getDb().getRecord(t.EVENTS_TABLE,o)})},e.prototype.hasEditedEvents=function(e){return this.getAllEditedEvents(e).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.hasOfflineData=function(e){return this.getAllEventsIds(e).then(function(e){return e.length>0})},e.prototype.isEventDeleted=function(e,t){return this.getDeletedEvent(e,t).then(function(e){return!!e}).catch(function(){return!1})},e.prototype.markDeleted=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={id:e,name:n||"",repeat:o?1:0,timemodified:Date.now()};return r.getDb().insertRecord(t.DELETED_EVENTS_TABLE,i)})},e.prototype.saveEvent=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){o=o||Date.now();var i={id:e||-o,name:n.name,timestart:n.timestart,eventtype:n.eventtype,categoryid:n.categoryid||null,courseid:n.courseid||null,groupcourseid:n.groupcourseid||null,groupid:n.groupid||null,description:n.description&&n.description.text,location:n.location,duration:n.duration,timedurationuntil:n.timedurationuntil,timedurationminutes:n.timedurationminutes,repeat:n.repeat?1:0,repeats:n.repeats,repeatid:n.repeatid,repeateditall:n.repeateditall?1:0,timecreated:o,userid:r.getUserId()};return r.getDb().insertRecord(t.EVENTS_TABLE,i).then(function(){return i})})},e.prototype.unmarkDeleted=function(e,n){return this.sitesProvider.getSite(n).then(function(n){var o={id:e};return n.getDb().deleteRecords(t.DELETED_EVENTS_TABLE,o)})},e.EVENTS_TABLE="addon_calendar_offline_events",e.DELETED_EVENTS_TABLE="addon_calendar_deleted_events",e=t=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(6),i=n(1),l=n(13),a=n(186),s=n(40),u=n(126),c=n(2),d=n(14),f=(n.n(d),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i){this.courseProvider=t,this.sitesProvider=n,this.calendarProvider=o,this.configProvider=r,this.utils=i,this.logger=e.getInstance("AddonCalendarHelperProvider")}return t=e,e.prototype.calculateDayData=function(e,t){e.hasevents=t.length>0,e.haslastdayofevent=!1;var n={};t.forEach(function(t){n[t.formattedType||t.eventtype]=!0,t.islastday&&(e.haslastdayofevent=!0)}),e.calendareventtypes=Object.keys(n)},e.prototype.canEditEvents=function(e,t){var n=this;return this.calendarProvider.canEditEvents(t).then(function(o){return!!o&&n.calendarProvider.getAllowedEventTypes(e,t).then(function(e){return Object.keys(e).length>0})}).catch(function(){return!1})},e.prototype.classifyIntoMonths=function(e){var t=this,n={};return e.forEach(function(e){for(var o=d(new Date(1e3*e.timestart)),r=d(new Date(1e3*(e.timestart+(e.timeduration||0))));!o.isAfter(r,"day");){var i=t.getMonthId(o.year(),o.month()+1),l=o.date();n[i]||(n[i]={}),n[i][l]||(n[i][l]=[]),n[i][l].push(e),o.add(1,"day")}}),n},e.prototype.formatEventData=function(e){e.eventIcon=t.EVENTICONS[e.eventtype]||"",e.eventIcon||(e.eventIcon=this.courseProvider.getModuleIconSrc(e.modulename),e.moduleIcon=e.eventIcon),e.formattedType=this.calendarProvider.getEventType(e);var n=e.category?e.category.id:e.categoryid,o=e.course?e.course.id:e.courseid;n>0?(e.contextLevel="coursecat",e.contextInstanceId=n):o>0?(e.contextLevel="course",e.contextInstanceId=o):(e.contextLevel="user",e.contextInstanceId=e.userid),void 0!==e.duration&&(e.format=1,e.visible=1,e.timeduration=1==e.duration?e.timedurationuntil-e.timestart:2==e.duration?e.timedurationminutes*s.a.SECONDS_MINUTE:0)},e.prototype.getEventTypeOptions=function(e){var t=[];return e.user&&t.push({name:"core.user",value:a.a.TYPE_USER}),e.group&&t.push({name:"core.group",value:a.a.TYPE_GROUP}),e.course&&t.push({name:"core.course",value:a.a.TYPE_COURSE}),e.category&&t.push({name:"core.category",value:a.a.TYPE_CATEGORY}),e.site&&t.push({name:"core.site",value:a.a.TYPE_SITE}),t},e.prototype.getMonthId=function(e,t){return e+"#"+t},e.prototype.getOfflineMonthWeeks=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(e){var t=e.getStoredConfig("calendar_startwday");return o.configProvider.get(a.a.STARTING_WEEK_DAY,t)}).then(function(n){for(var o=d(),r=o.year()==e&&o.month()==t-1,i=[],l=d({year:e,month:t-1,date:1}),a=1;a<=l.daysInMonth();a++){if(l=d({year:e,month:t-1,date:a}),!i.length||l.day()==n){for(var s=(l.day()-n+7)%7,u=[],c=0;c<s;c++)u.push(c);i.push({prepadding:u,postpadding:[],days:[]})}if(a==l.daysInMonth()){var f=(n-l.day()+6)%7,p=[];for(c=0;c<f;c++)p.push(c);i[i.length-1].postpadding=p}i[i.length-1].days.push({events:[],hasevents:!1,mday:l.date(),isweekend:0==l.day()||6==l.day(),istoday:r&&o.date()==l.date(),calendareventtypes:[]})}return{weeks:i,daynames:[{dayno:n}]}})},e.prototype.hasEventDataChanged=function(e,t){return!!t&&(e.name!=t.name||e.timestart!=t.timestart||e.eventtype!=t.eventtype||e.description!=t.description||e.location!=t.location||e.duration!=t.duration||e.repeat!=t.repeat||(e.eventtype==a.a.TYPE_CATEGORY&&e.categoryid!=t.categoryid||e.eventtype==a.a.TYPE_COURSE&&e.courseid!=t.courseid||e.eventtype==a.a.TYPE_GROUP&&e.groupcourseid!=t.groupcourseid&&e.groupid!=t.groupid||(1==e.duration&&e.timedurationuntil!=t.timedurationuntil||2==e.duration&&e.timedurationminutes!=t.timedurationminutes||!(!e.repeat||e.repeats==t.repeats))))},e.prototype.getFilteredEvents=function(e,t,n){var o=this;if(!t.filtered)return e;var r=t.courseId?Number(t.courseId):void 0;if(!r||r<0)return e.filter(function(e){return t[e.formattedType]});var i=t.categoryId?Number(t.categoryId):void 0;return e.filter(function(e){return t[e.formattedType]&&o.shouldDisplayEvent(e,r,i,n)})},e.prototype.shouldDisplayEvent=function(e,t,n,o){if("user"==e.eventtype||"site"==e.eventtype)return!0;if("category"==e.eventtype){if(!e.categoryid||!Object.keys(o).length)return!0;if(e.categoryid==n)return!0;for(var r=o[n];r&&r.parent;){if(e.categoryid==r.parent)return!0;r=o[r.parent]}return!1}var i=e.course&&e.course.id||e.courseid;return i&&(i==this.sitesProvider.getCurrentSiteHomeId()||i==t)},e.prototype.refreshAfterChangeEvents=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=[],r=[],i=n.calendarProvider.getUpcomingEvents(void 0,void 0,!0,t.id).catch(function(){});return n.utils.allPromises([i].concat(e.map(function(e){if(e.repeated>1){if(e.event.repeatid){o.push(e.event.timestart);for(var i=1;i<e.repeated;i++)r.push(e.event.timestart+7*s.a.SECONDS_DAY*i),r.push(e.event.timestart-7*s.a.SECONDS_DAY*i);return n.calendarProvider.getLocalEventsByRepeatIdFromLocalDb(e.event.repeatid,t.id).then(function(e){return n.utils.allPromises(e.map(function(e){return n.calendarProvider.invalidateEvent(e.id)}))})}var l=e.event.timestart;for(o.push(l);e.repeated>1;)l+=7*s.a.SECONDS_DAY,e.repeated--,r.push(l);return Promise.resolve()}return o.push(e.event.timestart),n.calendarProvider.invalidateEvent(e.event.id)}))).finally(function(){var e={},i={};return n.utils.allPromises([n.calendarProvider.invalidateAllUpcomingEvents(),n.utils.allPromises(o.concat(r).map(function(r,l){var a=[],s=d(new Date(1e3*r)),u=n.getMonthId(s.year(),s.month()+1),c=u+"#"+s.date();return e[u]||(e[u]=u,a.push(l<o.length?n.calendarProvider.getMonthlyEvents(s.year(),s.month()+1,void 0,void 0,!0,t.id).catch(function(){}):n.calendarProvider.invalidateMonthlyEvents(s.year(),s.month()+1,t.id))),i[c]||(i[c]=c,a.push(l<o.length?n.calendarProvider.getDayEvents(s.year(),s.month()+1,s.date(),void 0,void 0,!0,t.id).catch(function(){}):n.calendarProvider.invalidateDayEvents(s.year(),s.month()+1,s.date(),t.id))),n.utils.allPromises(a)}))])})})},e.prototype.refreshAfterChangeEvent=function(e,t,n){return this.refreshAfterChangeEvents([{event:e,repeated:t}],n)},e.EVENTICONS={course:"fa-graduation-cap",group:"people",site:"globe",user:"person",category:"fa-cubes"},e=t=f([Object(o.A)(),p("design:paramtypes",[r.a,l.a,i.a,a.a,u.a,c.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(293),d=n(1543),f=n(623),p=n(1544),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=function(){function e(){}return e=h([Object(o.I)({declarations:[c.a,d.a,f.a,p.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a,d.a,f.a,p.a],entryComponents:[f.a]})],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(3),i=n(1),l=n(46),a=n(65),s=n(2),u=n(53),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r){this.sitesProvider=e,this.userProvider=t,this.logHelper=n,this.utils=o,this.translate=r,this.ROOT_CACHE_KEY="AddonModChat:"}return t=e,e.prototype.getChat=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={courseids:[e]},i={cacheKey:o.getChatsCacheKey(e),updateFrequency:u.a.FREQUENCY_RARELY};return n.read("mod_chat_get_chats_by_courses",r,i).then(function(e){if(e.chats){var n=e.chats.find(function(e){return e.coursemodule==t});if(n)return n}return Promise.reject(null)})})},e.prototype.loginUser=function(e){var t={chatid:e};return this.sitesProvider.getCurrentSite().write("mod_chat_login_user",t).then(function(e){return e.chatsid?e.chatsid:Promise.reject(null)})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_chat_view_chat",{chatid:e},t.COMPONENT,e,n,"chat",{},o)},e.prototype.sendMessage=function(e,t,n){var o={chatsid:e,messagetext:t,beepid:n};return this.sitesProvider.getCurrentSite().write("mod_chat_send_chat_message",o).then(function(e){return e.messageid?e.messageid:Promise.reject(null)})},e.prototype.getLatestMessages=function(e,t){var n={chatsid:e,chatlasttime:t};return this.sitesProvider.getCurrentSite().write("mod_chat_get_chat_latest_messages",n)},e.prototype.getMessagesUserData=function(e,t){var n=this,o=e.map(function(e){return n.userProvider.getProfile(e.userid,t,!0).then(function(t){e.userfullname=t.fullname,e.userprofileimageurl=t.profileimageurl}).catch(function(){e.userfullname=n.translate.instant("core.deleteduser")+" "+e.userid})});return Promise.all(o).then(function(){return e})},e.prototype.getChatUsers=function(e){var t={chatsid:e};return this.sitesProvider.getCurrentSite().read("mod_chat_get_chat_users",t,{getFromCache:!1})},e.prototype.areSessionsAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_chat_get_sessions")&&e.wsAvailable("mod_chat_get_session_messages")})},e.prototype.getSessions=function(e,t,n,o,r){var i=this;return void 0===t&&(t=0),void 0===n&&(n=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={chatid:e,groupid:t,showall:n?1:0},a={cacheKey:i.getSessionsCacheKey(e,t,n),updateFrequency:u.a.FREQUENCY_SOMETIMES};return o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_chat_get_sessions",l,a).then(function(e){return e&&e.sessions?e.sessions:Promise.reject(null)})})},e.prototype.getSessionMessages=function(e,t,n,o,r,i){var l=this;return void 0===o&&(o=0),void 0===r&&(r=!1),this.sitesProvider.getSite(i).then(function(i){var a={chatid:e,sessionstart:t,sessionend:n,groupid:o},s={cacheKey:l.getSessionMessagesCacheKey(e,t,o),updateFrequency:u.a.FREQUENCY_RARELY};return r&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_chat_get_session_messages",a,s).then(function(e){return e&&e.messages?e.messages:Promise.reject(null)})})},e.prototype.invalidateChats=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getChatsCacheKey(e))},e.prototype.invalidateSessions=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getSessionsCacheKey(e,t,n))},e.prototype.invalidateAllSessions=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKeyStartingWith(this.getSessionsCacheKeyPrefix(e))},e.prototype.invalidateSessionMessages=function(e,t,n){void 0===n&&(n=0);return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getSessionMessagesCacheKey(e,t,n))},e.prototype.invalidateAllSessionMessages=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKeyStartingWith(this.getSessionMessagesCacheKeyPrefix(e))},e.prototype.getChatsCacheKey=function(e){return this.ROOT_CACHE_KEY+"chats:"+e},e.prototype.getSessionsCacheKey=function(e,t,n){return this.getSessionsCacheKeyPrefix(e)+t+":"+(n?1:0)},e.prototype.getSessionsCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"sessions:"+e+":"},e.prototype.getSessionMessagesCacheKey=function(e,t,n){return this.getSessionMessagesCacheKeyPrefix(e)+t+":"+n},e.prototype.getSessionMessagesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"sessionsMessages:"+e+":"},e.COMPONENT="mmaModChat",e.POLL_INTERVAL=4e3,e=t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a,r.c])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(10),l=n(57),a=n(72),s=n(1),u=n(24),c=n(2),d=n(46),f=n(135),p=n(233),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a,s,u){this.translate=e,this.fileProvider=t,this.sitesProvider=n,this.uploaderProvider=o,this.timeUtils=r,this.userProvider=i,this.appProvider=l,this.utils=a,this.forumProvider=s,this.forumOffline=u}return e.prototype.addNewDiscussion=function(e,t,n,o,r,i,l,a,s,u){var c=this;u=u||this.sitesProvider.getCurrentSiteId(),a=a&&a.length>0?a:[0];var d,p,h=!1,m=[],_=function(){var i=a.length>1?f.a.ALL_GROUPS:a[0];return d&&(l.attachmentsid=d),c.forumOffline.addNewDiscussion(e,t,n,o,r,l,i,s,u).then(function(){return null})};if(i&&i.length>0){var g=a.map(function(){return c.uploadOrStoreNewDiscussionFiles(e,s,i,!1).then(function(e){m.push(e)})});p=Promise.all(g).catch(function(){return h=!0,c.uploadOrStoreNewDiscussionFiles(e,s,i,!0).then(function(e){d=e})})}else p=Promise.resolve();return p.then(function(){return(s?c.forumOffline.deleteNewDiscussion(e,s,u):Promise.resolve()).then(function(){if(h||!c.appProvider.isOnline())return _();var t=[],n=[],s=a.map(function(i,a){var s=c.utils.clone(l);return m[a]&&(s.attachmentsid=m[a]),c.forumProvider.addNewDiscussionOnline(e,o,r,s,i,u).then(function(e){n.push(e)}).catch(function(e){t.push(e)})});return Promise.all(s).then(function(){if(t.length==a.length){for(var e=0;e<t.length;e++)if(c.utils.isWebServiceError(t[e])||i.length>0)return Promise.reject(t[e]);return _()}return n})})})},e.prototype.convertOfflineReplyToOnline=function(e,t){var n={attachments:[],canreply:!1,children:[],created:e.timecreated,discussion:e.discussionid,id:!1,mailed:0,mailnow:0,message:e.message,messageformat:1,messagetrust:0,modified:!1,parent:e.postid,postread:!1,subject:e.subject,totalscore:0,userid:e.userid,isprivatereply:e.options&&e.options.private},o=[];return e.options&&e.options.attachmentsid&&(n.attachments=e.options.attachmentsid.online||[],e.options.attachmentsid.offline&&o.push(this.getReplyStoredFiles(e.forumid,n.parent,t,n.userid).then(function(e){n.attachments=n.attachments.concat(e)}))),o.push(this.userProvider.getProfile(e.userid,e.courseid,!0).then(function(e){n.userfullname=e.fullname,n.userpictureurl=e.profileimageurl}).catch(function(){})),Promise.all(o).then(function(){return n.attachment=n.attachments.length>0?1:0,n})},e.prototype.deleteNewDiscussionStoredFiles=function(e,t,n){var o=this;return this.forumOffline.getNewDiscussionFolder(e,t,n).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},e.prototype.deleteReplyStoredFiles=function(e,t,n,o){var r=this;return this.forumOffline.getReplyFolder(e,t,n,o).then(function(e){return r.fileProvider.removeDir(e).catch(function(){})})},e.prototype.getAvailabilityMessage=function(e){if(this.isCutoffDateReached(e))return this.translate.instant("addon.mod_forum.cutoffdatereached");if(this.isDueDateReached(e)){var t=this.timeUtils.userDate(1e3*e.duedate);return this.translate.instant("addon.mod_forum.thisforumisdue",{$a:t})}if(e.duedate>0){t=this.timeUtils.userDate(1e3*e.duedate);return this.translate.instant("addon.mod_forum.thisforumhasduedate",{$a:t})}return null},e.prototype.getDiscussionById=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=function(i){return o.forumProvider.getDiscussions(e,void 0,i,!1,n).then(function(e){if(e.discussions&&e.discussions.length>0){var n=e.discussions.find(function(e){return e.discussion==t});if(n)return n;if(e.canLoadMore)return r(i+1)}return Promise.reject(null)})};return r(0)},e.prototype.getNewDiscussionStoredFiles=function(e,t,n){var o=this;return this.forumOffline.getNewDiscussionFolder(e,t,n).then(function(e){return o.uploaderProvider.getStoredFiles(e)})},e.prototype.getReplyStoredFiles=function(e,t,n,o){var r=this;return this.forumOffline.getReplyFolder(e,t,n,o).then(function(e){return r.uploaderProvider.getStoredFiles(e)})},e.prototype.hasPostDataChanged=function(e,t){return!(!t||null==t.subject)&&(e.subject!=t.subject||e.message!=t.message||(e.isprivatereply!=t.isprivatereply||this.uploaderProvider.areFileListDifferent(e.files,t.files)))},e.prototype.isCutoffDateReached=function(e){var t=Date.now()/1e3;return e.cutoffdate>0&&e.cutoffdate<t},e.prototype.isDueDateReached=function(e){var t=Date.now()/1e3;return e.duedate>0&&e.duedate<t},e.prototype.storeNewDiscussionFiles=function(e,t,n,o){var r=this;return this.forumOffline.getNewDiscussionFolder(e,t,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,n)})},e.prototype.storeReplyFiles=function(e,t,n,o,r){var i=this;return this.forumOffline.getReplyFolder(e,t,o,r).then(function(e){return i.uploaderProvider.storeFilesToUpload(e,n)})},e.prototype.uploadOrStoreNewDiscussionFiles=function(e,t,n,o,r){return o?this.storeNewDiscussionFiles(e,t,n,r):this.uploaderProvider.uploadOrReuploadFiles(n,f.a.COMPONENT,e,r)},e.prototype.uploadOrStoreReplyFiles=function(e,t,n,o,r,i){return o?this.storeReplyFiles(e,t,n,r,i):this.uploaderProvider.uploadOrReuploadFiles(n,f.a.COMPONENT,e,r)},e=h([Object(o.A)(),m("design:paramtypes",[r.c,l.a,s.a,a.a,u.a,d.a,i.a,c.a,f.a,p.a])],e)}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},u=function(){function e(e){this.sitesProvider=e,this.siteSchema={name:"CoreSearchHistoryProvider",version:1,tables:[{name:t.HISTORY_TABLE,columns:[{name:"searcharea",type:"TEXT",notNull:!0},{name:"lastused",type:"INTEGER",notNull:!0},{name:"times",type:"INTEGER",notNull:!0},{name:"searchedtext",type:"TEXT",notNull:!0}],primaryKeys:["searcharea","searchedtext"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getSearchHistory=function(e,n){return a(this,void 0,void 0,function(){var o,r,i;return s(this,function(l){switch(l.label){case 0:return[4,this.sitesProvider.getSite(n)];case 1:return o=l.sent(),r={searcharea:e},[4,o.getDb().getRecords(t.HISTORY_TABLE,r)];case 2:return i=l.sent(),[2,i.sort(function(e,t){return t.lastused-e.lastused})]}})})},e.prototype.controlSearchLimit=function(e,n){return a(this,void 0,void 0,function(){var o,r,i;return s(this,function(l){switch(l.label){case 0:return[4,this.getSearchHistory(e)];case 1:return(o=l.sent()).length>t.HISTORY_LIMIT?(r=o.pop(),i={searcharea:r.searcharea,searchedtext:r.searchedtext},[4,n.deleteRecords(t.HISTORY_TABLE,i)]):[3,3];case 2:l.sent(),l.label=3;case 3:return[2]}})})},e.prototype.updateExistingItem=function(e,n,o){return a(this,void 0,void 0,function(){var r,i;return s(this,function(l){switch(l.label){case 0:r={searcharea:e,searchedtext:n},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,o.getRecord(t.HISTORY_TABLE,r)];case 2:return i=l.sent(),i.lastused=Date.now(),i.times++,[4,o.updateRecords(t.HISTORY_TABLE,i,r)];case 3:return l.sent(),[2,!0];case 4:return l.sent(),[2,!1];case 5:return[2]}})})},e.prototype.insertOrUpdateSearchText=function(e,n,o){return a(this,void 0,void 0,function(){var r,i,l;return s(this,function(a){switch(a.label){case 0:return[4,this.sitesProvider.getSite(o)];case 1:return r=a.sent(),i=r.getDb(),[4,this.updateExistingItem(e,n,i)];case 2:return a.sent()?[3,5]:(l={searcharea:e,searchedtext:n,lastused:Date.now(),times:1},[4,r.getDb().insertRecord(t.HISTORY_TABLE,l)]);case 3:return a.sent(),[4,this.controlSearchLimit(e,i)];case 4:a.sent(),a.label=5;case 5:return[2]}})})},e.HISTORY_TABLE="seach_history",e.HISTORY_LIMIT=10,e=t=i([Object(o.A)(),l("design:paramtypes",[r.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(1),l=n(53),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.sitesProvider=t,this.ROOT_CACHE_KEY="mmaBadges:",this.logger=e.getInstance("AddonBadgesProvider")}return e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return!!e.canUseAdvancedFeature("enablebadges")&&!!e.wsAvailable("core_course_get_user_navigation_options")})},e.prototype.getBadgesCacheKey=function(e,t){return this.ROOT_CACHE_KEY+"badges:"+e+":"+t},e.prototype.getUserBadges=function(e,t,n){var o=this;return this.logger.debug("Get badges for course "+e),this.sitesProvider.getSite(n).then(function(n){var r={courseid:e,userid:t},i={cacheKey:o.getBadgesCacheKey(e,t),updateFrequency:l.a.FREQUENCY_RARELY};return n.read("core_badges_get_user_badges",r,i).then(function(e){return e&&e.badges?(e.badges.forEach(function(e){e.alignment=e.alignment||e.competencies,e.alignment&&e.alignment[0]&&void 0===e.alignment[0].targetname&&delete e.alignment}),e.badges):Promise.reject(null)})})},e.prototype.invalidateUserBadges=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(o.getBadgesCacheKey(e,t))})},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(6),i=n(1),l=n(10),a=n(2),s=n(11),u=n(24),c=n(297),d=n(134),f=n(9),p=n(3),h=n(13),m=n(311),_=n(65),g=n(50),v=n(81),y=n(647),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var _=e.call(this,"AddonModFeedbackSyncProvider",n,t,o,d,u,a,f,h,m)||this;return _.sitesProvider=t,_.loggerProvider=n,_.appProvider=o,_.feedbackOffline=r,_.eventsProvider=i,_.feedbackProvider=l,_.translate=a,_.utils=s,_.textUtils=u,_.courseProvider=c,_.logHelper=p,_.componentTranslate=c.translateModuleName("feedback"),_}return b(t,e),n=t,t.prototype.prefetchAfterUpdate=function(t,n,o,r){return o=o||/^.*files$|^timers/,e.prototype.prefetchAfterUpdate.call(this,t,n,o,r)},t.prototype.syncAllFeedbacks=function(e,t){return this.syncOnSites("all feedbacks",this.syncAllFeedbacksFunc.bind(this),[t],e)},t.prototype.syncAllFeedbacksFunc=function(e,t){var o=this;return this.feedbackOffline.getAllFeedbackResponses(e).then(function(r){var i={},l=function(l){var a=r[l];if(void 0!==i[a.feedbackid])return"continue";i[a.feedbackid]=t?o.syncFeedback(a.feedbackid,e):o.syncFeedbackIfNeeded(a.feedbackid,e),i[a.feedbackid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{feedbackId:a.feedbackid,userId:a.userid,warnings:t.warnings},e)})};for(var a in r)l(a);return Promise.all(o.utils.objectToArray(i))})},t.prototype.syncFeedbackIfNeeded=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.isSyncNeeded(e,t).then(function(o){if(o)return n.syncFeedback(e,t)})},t.prototype.syncFeedback=function(e,t){var n=this;t=t||this.sitesProvider.getCurrentSiteId();var o=e;if(this.isSyncing(o,t))return this.getOngoingSync(o,t);if(this.syncProvider.isBlocked(d.a.COMPONENT,o,t))return this.logger.debug("Cannot sync feedback '"+o+"' because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));var r,i,l={warnings:[],updated:!1};this.logger.debug("Try to sync feedback '"+e+"' in site "+t+"'");var a=this.logHelper.syncIfNeeded(d.a.COMPONENT,e,t).catch(function(){}).then(function(){return n.feedbackOffline.getFeedbackResponses(e,t).catch(function(){return[]})}).then(function(o){if(o.length)return n.appProvider.isOnline()?(r=o[0].courseid,n.feedbackProvider.getFeedbackById(r,e,t).then(function(t){return!(i=t).multiple_submit&&n.feedbackProvider.isCompleted(e)}).then(function(r){if(r){var a=[];return o.forEach(function(o){a.push(n.feedbackOffline.deleteFeedbackPageResponses(e,o.page,t))}),l.updated=!0,l.warnings.push(n.translate.instant("core.warningofflinedatadeleted",{component:n.componentTranslate,name:i.name,error:n.translate.instant("addon.mod_feedback.this_feedback_is_already_submitted")})),Promise.all(a)}return n.feedbackProvider.getCurrentCompletedTimeModified(e,!0,t).then(function(e){return o.sort(function(e,t){return e.page-t.page}),o=o.map(function(o){return{func:n.processPage.bind(n),params:[i,o,t,e,l],blocking:!0}}),n.utils.executeOrderedPromises(o)})})):Promise.reject(null)}).then(function(){if(l.updated)return n.courseProvider.getModuleBasicInfoByInstance(e,"feedback",t).then(function(e){return n.prefetchAfterUpdate(e,r,void 0,t)}).catch(function(){})}).then(function(){return n.setSyncTime(o,t)}).then(function(){return l});return this.addOngoingSync(o,a,t)},t.prototype.processPage=function(e,t,n,o,r){var i=this;return o>t.timemodified?this.feedbackOffline.deleteFeedbackPageResponses(e.id,t.page,n):this.feedbackProvider.processPageOnline(e.id,t.page,t.responses,!1,n).then(function(){return r.updated=!0,i.feedbackOffline.deleteFeedbackPageResponses(e.id,t.page,n)}).catch(function(o){return o&&o.wserror?(r.updated=!0,i.feedbackOffline.deleteFeedbackPageResponses(e.id,t.page,n).then(function(){r.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:i.textUtils.getErrorMessageFromError(o)}))})):Promise.reject(o)})},t.AUTO_SYNCED="addon_mod_feedback_autom_synced",t=n=P([Object(o.A)(),O("design:paramtypes",[i.a,r.a,l.a,c.a,f.a,d.a,p.c,a.a,s.a,h.a,v.a,u.a,_.a,g.a,y.a])],t);var n}(m.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(1),l=n(11),a=n(24),s=n(2),u=n(169),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,n,o,r,i){this.sitesProvider=n,this.timeUtils=o,this.textUtils=r,this.utils=i,this.siteSchema={name:"AddonModLessonOfflineProvider",version:1,tables:[{name:t.RETAKES_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"retake",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"finished",type:"INTEGER"},{name:"outoftime",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"lastquestionpage",type:"INTEGER"}]},{name:t.PAGE_ATTEMPTS_TABLE,columns:[{name:"lessonid",type:"INTEGER",notNull:!0},{name:"retake",type:"INTEGER",notNull:!0},{name:"pageid",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"data",type:"TEXT"},{name:"type",type:"INTEGER"},{name:"newpageid",type:"INTEGER"},{name:"correct",type:"INTEGER"},{name:"answerid",type:"INTEGER"},{name:"useranswer",type:"TEXT"}],primaryKeys:["lessonid","retake","pageid","timemodified"]}]},this.logger=e.getInstance("AddonModLessonOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteAttempt=function(e,n,o,r,i){return this.sitesProvider.getSite(i).then(function(i){return i.getDb().deleteRecords(t.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:n,pageid:o,timemodified:r})})},e.prototype.deleteRetake=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.RETAKES_TABLE,{lessonid:e})})},e.prototype.deleteRetakeAttemptsForPage=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(t.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:n,pageid:o})})},e.prototype.finishRetake=function(e,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(l).then(function(l){return a.getRetakeWithFallback(e,n,o,l.id).then(function(e){return e.finished=r?1:0,e.outoftime=i?1:0,e.timemodified=a.timeUtils.timestamp(),l.getDb().insertRecord(t.RETAKES_TABLE,e)})})},e.prototype.getAllAttempts=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(t.PAGE_ATTEMPTS_TABLE)}).then(function(e){return n.parsePageAttempts(e)})},e.prototype.getAllLessonsWithData=function(e){var t=this,n=[],o={};return n.push(this.getAllAttempts(e).then(function(e){t.getLessonsFromEntries(o,e)}).catch(function(){})),n.push(this.getAllRetakes(e).then(function(e){t.getLessonsFromEntries(o,e)}).catch(function(){})),Promise.all(n).then(function(){return t.utils.objectToArray(o)})},e.prototype.getAllRetakes=function(e){return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(t.RETAKES_TABLE)})},e.prototype.getLastQuestionPageAttempt=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getRetakeWithFallback(e,0,t,n).then(function(r){if(r.lastquestionpage)return o.getRetakeAttemptsForPage(e,t,r.lastquestionpage,n).then(function(e){return e.reduce(function(e,t){return e.timemodified>t.timemodified?e:t})})}).catch(function(){})},e.prototype.getLessonAttempts=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.PAGE_ATTEMPTS_TABLE,{lessonid:e})}).then(function(e){return o.parsePageAttempts(e)})},e.prototype.getLessonsFromEntries=function(e,t){t.forEach(function(t){e[t.lessonid]||(e[t.lessonid]={id:t.lessonid,courseId:t.courseid})})},e.prototype.getQuestionsAttempts=function(e,t,n,o,r){return(o?this.getRetakeAttemptsForPage(e,t,o,r):this.getRetakeAttemptsForType(e,t,u.a.TYPE_QUESTION,r)).then(function(e){return n?e.filter(function(e){return!!e.correct}):e})},e.prototype.getRetake=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.RETAKES_TABLE,{lessonid:e})})},e.prototype.getRetakeAttempts=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(t.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:n})}).then(function(e){return r.parsePageAttempts(e)})},e.prototype.getRetakeAttemptsForPage=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecords(t.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:n,pageid:o})}).then(function(e){return i.parsePageAttempts(e)})},e.prototype.getRetakeAttemptsForType=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecords(t.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:n,type:o})}).then(function(e){return i.parsePageAttempts(e)})},e.prototype.getRetakeWithFallback=function(e,t,n,o){return this.getRetake(e,o).then(function(e){return e.retake!=n?Promise.reject(null):e}).catch(function(){return{lessonid:e,retake:n,courseid:t,finished:0}})},e.prototype.hasFinishedRetake=function(e,t){return this.getRetake(e,t).then(function(e){return!!e.finished}).catch(function(){return!1})},e.prototype.hasOfflineData=function(e,t){var n=[],o=!1;return n.push(this.getRetake(e,t).then(function(){o=!0}).catch(function(){})),n.push(this.getLessonAttempts(e,t).then(function(e){o=o||!!e.length}).catch(function(){})),Promise.all(n).then(function(){return o})},e.prototype.hasRetakeAttempts=function(e,t,n){return this.getRetakeAttempts(e,t,n).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.parsePageAttempt=function(e){return e.data=this.textUtils.parseJSON(e.data),e.useranswer=this.textUtils.parseJSON(e.useranswer),e},e.prototype.parsePageAttempts=function(e){var t=this;return e.forEach(function(e){t.parsePageAttempt(e)}),e},e.prototype.processPage=function(e,n,o,r,i,l,a,s,c,d){var f=this;return this.sitesProvider.getSite(d).then(function(u){var d={lessonid:e,retake:o,pageid:r.id,timemodified:f.timeUtils.timestamp(),courseid:n,data:i?JSON.stringify(i):null,type:r.type,newpageid:l,correct:s?1:0,answerid:Number(a),useranswer:c?JSON.stringify(c):null};return u.getDb().insertRecord(t.PAGE_ATTEMPTS_TABLE,d)}).then(function(){if(r.type==u.a.TYPE_QUESTION)return f.setLastQuestionPageAttempted(e,n,o,r.id,d)})},e.prototype.setLastQuestionPageAttempted=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){return l.getRetakeWithFallback(e,n,o,i.id).then(function(e){return e.lastquestionpage=r,e.timemodified=l.timeUtils.timestamp(),i.getDb().insertRecord(t.RETAKES_TABLE,e)})})},e.RETAKES_TABLE="addon_mod_lesson_retakes",e.PAGE_ATTEMPTS_TABLE="addon_mod_lesson_page_attempts",e=t=c([Object(o.A)(),d("design:paramtypes",[r.a,i.a,a.a,l.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(6),s=n(1),u=n(81),c=n(11),d=n(24),f=n(22),p=n(2),h=n(13),m=n(65),_=n(50),g=n(311),v=n(169),y=n(286),b=n(330),P=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e){function t(t,o,r,i,l,a,s,u,c,d,f,p,h,m,_,g){var v=e.call(this,"AddonModLessonSyncProvider",t,o,r,i,l,a,p,g,f)||this;return v.courseProvider=s,v.eventsProvider=u,v.lessonProvider=c,v.lessonOfflineProvider=d,v.prefetchHandler=f,v.utils=h,v.urlUtils=m,v.logHelper=_,v.siteSchema={name:"AddonModLessonSyncProvider",version:1,tables:[{name:n.RETAKES_FINISHED_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"retake",type:"INTEGER"},{name:"pageid",type:"INTEGER"},{name:"timefinished",type:"INTEGER"}]}]},v.componentTranslate=s.translateModuleName("lesson"),v.sitesProvider.registerSiteSchema(v.siteSchema),v}return P(t,e),n=t,t.prototype.deleteRetakeFinishedInSync=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.RETAKES_FINISHED_TABLE,{lessonid:e})}).catch(function(){})},t.prototype.getRetakeFinishedInSync=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.RETAKES_FINISHED_TABLE,{lessonid:e})}).catch(function(){})},t.prototype.hasDataToSync=function(e,t,n){var o=[],r=!1;return o.push(this.lessonOfflineProvider.hasRetakeAttempts(e,t,n).then(function(e){r=r||e}).catch(function(){})),o.push(this.lessonOfflineProvider.hasFinishedRetake(e,n).then(function(e){r=r||e})),Promise.all(o).then(function(){return r})},t.prototype.setRetakeFinishedInSync=function(e,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().insertRecord(n.RETAKES_FINISHED_TABLE,{lessonid:e,retake:Number(t),pageid:Number(o),timefinished:i.timeUtils.timestamp()})})},t.prototype.syncAllLessons=function(e,t){return this.syncOnSites("all lessons",this.syncAllLessonsFunc.bind(this),[t],e)},t.prototype.syncAllLessonsFunc=function(e,t){var o=this;return this.lessonOfflineProvider.getAllLessonsWithData(e).then(function(r){return r.map(function(r){return(t?o.syncLesson(r.id,!1,!1,e):o.syncLessonIfNeeded(r.id,!1,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{lessonId:r.id,warnings:t.warnings},e)})}),Promise.all([])})},t.prototype.syncLessonIfNeeded=function(e,t,n){var o=this;return this.isSyncNeeded(e,n).then(function(r){if(r)return o.syncLesson(e,t,!1,n)})},t.prototype.syncLesson=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i,l,a,s,u,c={warnings:[],updated:!1};return this.isSyncing(e,o)?this.getOngoingSync(e,o):!n&&this.syncProvider.isBlocked(v.a.COMPONENT,e,o)?(this.logger.debug("Cannot sync lesson "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync lesson "+e+" in site "+o),i=this.logHelper.syncIfNeeded(v.a.COMPONENT,e,o).catch(function(){}).then(function(){return r.lessonOfflineProvider.getLessonAttempts(e,o)}).then(function(n){if(n.length)return r.appProvider.isOnline()?(a=n[0].courseid,r.lessonProvider.getLessonById(a,e,!1,!1,o).then(function(n){return l=n,r.prefetchHandler.getLessonPassword(e,!1,!0,t,o)}).then(function(e){var t=n.length,i=[];return u=e.accessInfo,s=e.password,l=e.lesson||l,(n=n.filter(function(e){return e.retake==u.attemptscount||(i.push(r.lessonOfflineProvider.deleteAttempt(l.id,e.retake,e.pageid,e.timemodified,o).catch(function(){})),!1)})).length!=t&&c.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:l.name,error:r.translate.instant("addon.mod_lesson.warningretakefinished")})),Promise.all(i)}).then(function(){if(n.length)return n.sort(function(e,t){return e.timemodified-t.timemodified}),n=n.map(function(e){return{func:r.sendAttempt.bind(r),params:[l,s,e,c,o],blocking:!0}}),r.utils.executeOrderedPromises(n)})):Promise.reject(null)}).then(function(){return r.lessonOfflineProvider.getRetake(e,o).then(function(i){if(!i.finished)return r.lessonOfflineProvider.deleteRetake(e,o);if(!r.appProvider.isOnline())return Promise.reject(null);return a=i.courseid||a,(l?Promise.resolve():r.lessonProvider.getLessonById(a,e,!1,!1,o).then(function(n){return l=n,r.prefetchHandler.getLessonPassword(e,!1,!0,t,o)}).then(function(e){u=e.accessInfo,s=e.password,l=e.lesson||l})).then(function(){return i.retake!=u.attemptscount?(c.warnings.length||c.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:l.name,error:r.translate.instant("addon.mod_lesson.warningretakefinished")})),r.lessonOfflineProvider.deleteRetake(e,o)):r.lessonProvider.finishRetakeOnline(e,s,!1,!1,o).then(function(t){if(c.updated=!0,!n&&t.data&&t.data.reviewlesson){var l=r.urlUtils.extractUrlParams(t.data.reviewlesson.value);l&&l.pageid&&r.setRetakeFinishedInSync(e,i.retake,l.pageid,o)}return r.lessonOfflineProvider.deleteRetake(e,o)}).catch(function(t){return t&&r.utils.isWebServiceError(t)?(c.updated=!0,r.lessonOfflineProvider.deleteRetake(e,o).then(function(){c.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:l.name,error:r.textUtils.getErrorMessageFromError(t)}))})):Promise.reject(t)})})},function(){})}).then(function(){if(c.updated&&a)return r.courseProvider.getModuleBasicInfoByInstance(e,"lesson",o).then(function(e){return r.prefetchAfterUpdate(e,a,void 0,o)}).catch(function(){})}).then(function(){return r.setSyncTime(e,o).catch(function(){})}).then(function(){return c}),this.addOngoingSync(e,i,o))},t.prototype.sendAttempt=function(e,t,n,o,r){var i=this;return this.lessonProvider.processPageOnline(e.id,n.pageid,n.data,t,!1,r).then(function(){return o.updated=!0,i.lessonOfflineProvider.deleteAttempt(e.id,n.retake,n.pageid,n.timemodified,r)}).catch(function(t){return t&&i.utils.isWebServiceError(t)?(o.updated=!0,i.lessonOfflineProvider.deleteAttempt(e.id,n.retake,n.pageid,n.timemodified,r).then(function(){o.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:i.textUtils.getErrorMessageFromError(t)}))})):Promise.reject(t)})},t.AUTO_SYNCED="addon_mod_lesson_autom_synced",t.RETAKES_FINISHED_TABLE="addon_mod_lesson_retakes_finished_sync",t=n=O([Object(o.A)(),E("design:paramtypes",[a.a,s.a,i.a,u.a,c.a,r.c,h.a,l.a,v.a,y.a,b.a,d.a,p.a,f.a,m.a,_.a])],t);var n}(g.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(6),s=n(1),u=n(81),c=n(11),d=n(24),f=n(2),p=n(13),h=n(65),m=n(50),_=n(311),g=n(234),v=n(264),y=n(333),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var _=e.call(this,"AddonModScormSyncProvider",t,n,o,r,i,l,s,p,d)||this;return _.eventsProvider=a,_.scormProvider=u,_.scormOfflineProvider=c,_.utils=f,_.courseProvider=h,_.logHelper=m,_.componentTranslate=h.translateModuleName("scorm"),_}return b(t,e),n=t,t.prototype.addToNewOrDelete=function(e,t,n,o,r,i,l,a,s){var u=this;return t==n?(o.push(t),Promise.resolve()):this.scormOfflineProvider.getAttemptCreationTime(e,t,s).then(function(n){if(n>i){if(l)return u.logger.debug("Try to delete attempt "+t+" because it cannot be created as a new attempt."),u.scormOfflineProvider.deleteAttempt(e,t,s).then(function(){a.push(u.translate.instant("addon.mod_scorm.warningofflinedatadeleted",{number:t}))}).catch(function(){});r[n]=t}else o.push(t)})},t.prototype.canRetrySync=function(e,t,n,o){var r=this;return this.scormProvider.getScormUserData(e,t,void 0,!1,n!=t,o).then(function(n){return r.scormOfflineProvider.getAttemptSnapshot(e,t,o).then(function(e){if(!e||!Object.keys(e).length||!r.snapshotEquals(e,n))return Promise.reject(null)})})},t.prototype.createNewAttemptsAtEnd=function(e,t,n,o){var r=this,i=Object.keys(t).sort(),l=[];return i.length?(i.forEach(function(i,a){l.push(r.scormOfflineProvider.changeAttemptNumber(e,t[i],n+a+1,o))}),this.utils.allPromises(l)):Promise.resolve()},t.prototype.finishSync=function(e,t,n,o,r,i,l){var a=this;return(l?this.courseProvider.getModuleBasicInfoByInstance(t.id,"scorm",e).then(function(n){return a.prefetchAfterUpdate(n,t.course,void 0,e)}).catch(function(){}):Promise.resolve()).then(function(){return a.setSyncTime(t.id,e).catch(function(){})}).then(function(){return!!i&&a.scormProvider.getAttemptCount(t.id,void 0,!1,e).then(function(n){return n.online.length>i.online.length||!r&&o>0&&a.scormProvider.isAttemptIncomplete(t.id,o,!1,!0,e).then(function(e){return!e})})}).then(function(e){return{warnings:n,attemptFinished:e,updated:l}})},t.prototype.getOfflineAttemptData=function(e,t,n){var o=this;return this.scormProvider.isAttemptIncomplete(e,t,!0,!1,n).then(function(r){return o.scormOfflineProvider.getAttemptCreationTime(e,t,n).then(function(e){return{incomplete:r,timecreated:e}})})},t.prototype.moveNewAttempts=function(e,t,n,o,r,i){var l=this;if(!t.length)return Promise.resolve();var a,s=Promise.resolve();return(r=r.sort(function(e,t){return Number(e)<=Number(t)?1:-1})).forEach(function(n){n>o&&(s=s.then(function(){return l.scormOfflineProvider.changeAttemptNumber(e,n,n+t.length,i).then(function(){a=n})}))}),s.then(function(){var o=[],r=[];return(t=t.sort(function(e,t){return Number(e)>=Number(t)?1:-1})).forEach(function(t,a){r.push(l.scormOfflineProvider.changeAttemptNumber(e,t,n+a+1,i).then(function(){o.push(t)}))}),Promise.all(r).catch(function(a){return r=[],o.forEach(function(o){var a=n+t.indexOf(o)+1;r.push(l.scormOfflineProvider.changeAttemptNumber(e,a,o,i))}),l.utils.allPromises(r).then(function(){return Promise.reject(a)})})}).catch(function(n){if(!a)return Promise.reject(n);for(var o=[],s=Promise.resolve(),u=a;-1!=r.indexOf(u);u++)o.push(u);return o.forEach(function(n){s=s.then(function(){return l.scormOfflineProvider.changeAttemptNumber(e,n+t.length,n,i)})}),s.then(function(){return Promise.reject(n)})})},t.prototype.saveSyncSnapshot=function(e,t,n){var o=this;return this.scormProvider.getScormUserData(e,t,void 0,!1,!0,n).then(function(r){return o.scormOfflineProvider.setAttemptSnapshot(e,t,r,n)},function(){return o.scormProvider.getScormUserData(e,t,void 0,!1,!1,n).catch(function(){return{}}).then(function(r){return o.scormOfflineProvider.getScormStoredData(e,t,!1,!0,n).then(function(i){return i.forEach(function(e){r[e.scoid]||(r[e.scoid]={scoid:e.scoid,userdata:{}}),r[e.scoid].userdata[e.element]=e.value}),o.scormOfflineProvider.setAttemptSnapshot(e,t,r,n)})})})},t.prototype.snapshotEquals=function(e,t){for(var n in t){var o=t[n],r=e[n];for(var i in o.userdata)if(i.indexOf(".")>-1&&(!r||o.userdata[i]!==r.userdata[i]))return!1}for(var n in e){o=t[n],r=e[n];for(var i in r.userdata)if(i.indexOf(".")>-1&&(!o||o.userdata[i]!==r.userdata[i]))return!1}return!0},t.prototype.syncAllScorms=function(e,t){return this.syncOnSites("all SCORMs",this.syncAllScormsFunc.bind(this),[t],e)},t.prototype.syncAllScormsFunc=function(e,t){var o=this;return this.scormOfflineProvider.getAllAttempts(e).then(function(r){var i=[],l=[],a=[];return r.forEach(function(e){-1==l.indexOf(e.scormid)&&(l.push(e.scormid),i.push({id:e.scormid,courseId:e.courseid}))}),i.forEach(function(r){o.syncProvider.isBlocked(g.a.COMPONENT,r.id,e)||a.push(o.scormProvider.getScormById(r.courseId,r.id,"",!1,e).then(function(r){return(t?o.syncScorm(r,e):o.syncScormIfNeeded(r,e)).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{scormId:r.id,attemptFinished:t.attemptFinished,warnings:t.warnings,updated:t.updated},e)})}))}),Promise.all(a)})},t.prototype.syncAttempt=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Try to sync attempt "+t+" in SCORM "+e+" and site "+n),this.scormOfflineProvider.getScormStoredData(e,t,!0,!1,n).then(function(r){var i={},l=[],a=!1;r.forEach(function(e){e.element.indexOf(".")>-1&&(i[e.scoid]||(i[e.scoid]=[]),i[e.scoid].push({element:e.element,value:e.value}))});var s=function(r){var s=Number(r);l.push(o.scormProvider.saveTracksOnline(e,s,t,i[s],n).then(function(){return o.scormOfflineProvider.markAsSynced(e,t,s,n).catch(function(){}).then(function(){a=!0})}))};for(var u in i)s(u);return o.utils.allPromises(l).then(function(){return o.scormOfflineProvider.deleteAttempt(e,t,n).catch(function(){return o.scormOfflineProvider.deleteAttempt(e,t,n).catch(function(){o.logger.error("After sync: error deleting attempt "+t+" in SCORM "+e)})})}).catch(function(r){return a?(o.logger.error("Error synchronizing some SCOs for attempt "+t+" in SCORM "+e+". Saving snapshot."),o.saveSyncSnapshot(e,t,n).then(function(){return Promise.reject(r)})):(o.logger.error("Error synchronizing attempt "+t+" in SCORM "+e),Promise.reject(r))})})},t.prototype.syncScormIfNeeded=function(e,t){var n=this;return this.isSyncNeeded(e.id,t).then(function(o){if(o)return n.syncScorm(e,t)})},t.prototype.syncScorm=function(e,t){var n=this;t=t||this.sitesProvider.getCurrentSiteId();var o,r,i=[],l=0,a=!1;return this.isSyncing(e.id,t)?this.getOngoingSync(e.id,t):this.syncProvider.isBlocked(g.a.COMPONENT,e.id,t)?(this.logger.debug("Cannot sync SCORM "+e.id+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync SCORM "+e.id+" in site "+t),o=this.logHelper.syncIfNeeded(g.a.COMPONENT,e.id,t).catch(function(){}).then(function(){return n.scormProvider.getAttemptCount(e.id,!1,!0,t)}).then(function(o){if(!o.offline||!o.offline.length)return n.finishSync(t,e,i,l,a);r=o;var s=[];o.online.forEach(function(e){l=Math.max(l,e),o.offline.indexOf(e)>-1&&s.push(e)});return(l>0?n.scormProvider.isAttemptIncomplete(e.id,l,!1,!0,t):Promise.resolve(!1)).then(function(u){if(a=!u,s.length||u)return s.length?n.treatCollisions(e.id,s,l,o.offline,t).then(function(o){return i=i.concat(o),n.scormOfflineProvider.getAttempts(e.id,t).then(function(o){var s=[],c=!1;return o=o.map(function(e){return e.attempt}),u&&o.indexOf(l)>-1&&(u=!1),o.forEach(function(o){!u||o<=l?(0==e.maxattempt||o<=e.maxattempt)&&s.push(n.syncAttempt(e.id,o,t)):c=!0}),Promise.all(s).then(function(){return c&&i.push(n.translate.instant("addon.mod_scorm.warningsynconlineincomplete")),n.finishSync(t,e,i,l,a,r,!0)})})}):(i.push(n.translate.instant("addon.mod_scorm.warningsynconlineincomplete")),n.finishSync(t,e,i,l,a,r,!1));var c=[];return o.offline.forEach(function(o){(0==e.maxattempt||o<=e.maxattempt)&&c.push(n.syncAttempt(e.id,o,t))}),Promise.all(c).then(function(){return n.finishSync(t,e,i,l,a,r,!0)})})}),this.addOngoingSync(e.id,o,t))},t.prototype.treatCollisions=function(e,t,n,o,r){var i=this,l=[],a=[],s={},u=Math.max.apply(Math,t),c=Math.max.apply(Math,o);return this.getOfflineAttemptData(e,c,r).then(function(d){var f=[];return t.forEach(function(t){f.push(i.scormOfflineProvider.getScormStoredData(e,t,!1,!0,r).then(function(o){return o&&o.length?i.scormOfflineProvider.getScormStoredData(e,t,!0,!1,r).then(function(o){var u=!1;for(var f in o){if(o[f].element.indexOf(".")>-1){u=!0;break}}return u?i.canRetrySync(e,t,n,r).catch(function(){return i.addToNewOrDelete(e,t,c,a,s,d.timecreated,d.incomplete,l,r)}):i.scormOfflineProvider.deleteAttempt(e,t,r).catch(function(){})}):i.scormOfflineProvider.getAttemptSnapshot(e,t,r).then(function(o){if(o&&Object.keys(o).length){return i.scormProvider.getScormUserData(e,t,void 0,!1,n!=t,r).then(function(n){if(!i.snapshotEquals(o,n))return i.addToNewOrDelete(e,t,c,a,s,d.timecreated,d.incomplete,l,r)})}a.push(t)})}))}),Promise.all(f).then(function(){return i.moveNewAttempts(e,a,n,u,o,r).then(function(){return c+=a.length,i.createNewAttemptsAtEnd(e,s,c,r).then(function(){return l})})})})},t.AUTO_SYNCED="addon_mod_scorm_autom_synced",t=n=P([Object(o.A)(),O("design:paramtypes",[a.a,s.a,i.a,u.a,c.a,r.c,l.a,d.a,g.a,v.a,y.a,f.a,m.a,p.a,h.a])],t);var n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(6),i=n(1),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,n){this.sitesProvider=n,this.siteSchema={name:"AddonModWikiOfflineProvider",version:1,tables:[{name:t.NEW_PAGES_TABLE,columns:[{name:"wikiid",type:"INTEGER"},{name:"subwikiid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"title",type:"TEXT"},{name:"cachedcontent",type:"TEXT"},{name:"contentformat",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"caneditpage",type:"INTEGER"}],primaryKeys:["wikiid","subwikiid","userid","groupid","title"]}]},this.logger=e.getInstance("AddonModWikiOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.convertToPositiveNumber=function(e){return(e=parseInt(e,10))>0?e:0},e.prototype.deleteNewPage=function(e,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(l).then(function(l){return n=a.convertToPositiveNumber(n),o=a.convertToPositiveNumber(o),r=a.convertToPositiveNumber(r),i=a.convertToPositiveNumber(i),l.getDb().deleteRecords(t.NEW_PAGES_TABLE,{subwikiid:n,wikiid:o,userid:r,groupid:i,title:e})})},e.prototype.getAllNewPages=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(t.NEW_PAGES_TABLE)})},e.prototype.getNewPage=function(e,n,o,r,i,l){var a=this;return this.sitesProvider.getSite(l).then(function(l){return n=a.convertToPositiveNumber(n),o=a.convertToPositiveNumber(o),r=a.convertToPositiveNumber(r),i=a.convertToPositiveNumber(i),l.getDb().getRecord(t.NEW_PAGES_TABLE,{subwikiid:n,wikiid:o,userid:r,groupid:i,title:e})})},e.prototype.getSubwikiNewPages=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){return e=l.convertToPositiveNumber(e),n=l.convertToPositiveNumber(n),o=l.convertToPositiveNumber(o),r=l.convertToPositiveNumber(r),i.getDb().getRecords(t.NEW_PAGES_TABLE,{subwikiid:e,wikiid:n,userid:o,groupid:r})})},e.prototype.getSubwikisNewPages=function(e,t){var n=this,o=[],r=[];return e.forEach(function(e){o.push(n.getSubwikiNewPages(e.id,e.wikiid,e.userid,e.groupid,t).then(function(e){r=r.concat(e)}))}),Promise.all(o).then(function(){return r})},e.prototype.saveNewPage=function(e,n,o,r,i,l,a){var s=this;return this.sitesProvider.getSite(a).then(function(a){var u=(new Date).getTime(),c={title:e,cachedcontent:n,subwikiid:s.convertToPositiveNumber(o),wikiid:s.convertToPositiveNumber(r),userid:s.convertToPositiveNumber(i),groupid:s.convertToPositiveNumber(l),contentformat:"html",timecreated:u,timemodified:u,caneditpage:1};return a.getDb().insertRecord(t.NEW_PAGES_TABLE,c)})},e.prototype.subwikisHaveOfflineData=function(e,t){return this.getSubwikisNewPages(e,t).then(function(e){return!!e.length}).catch(function(){return!1})},e.NEW_PAGES_TABLE="addon_mod_wiki_new_pages_store",e=t=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(71),s=n(6),u=n(1),c=n(81),d=n(11),f=n(24),p=n(2),h=n(13),m=n(65),_=n(148),g=n(235),v=n(289),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h){var m=e.call(this,"AddonModWikiSyncProvider",t,n,o,r,i,l,p)||this;return m.eventsProvider=s,m.wikiProvider=u,m.wikiOfflineProvider=c,m.utils=d,m.groupsProvider=f,m.logHelper=h,m.componentTranslate=a.translateModuleName("wiki"),m}return y(t,e),n=t,t.prototype.getSubwikiBlockId=function(e,t,n,o){return(e=this.wikiOfflineProvider.convertToPositiveNumber(e))&&e>0?String(e):(t=this.wikiOfflineProvider.convertToPositiveNumber(t))?(n=this.wikiOfflineProvider.convertToPositiveNumber(n),o=this.wikiOfflineProvider.convertToPositiveNumber(o),t+":"+n+":"+o):void 0},t.prototype.syncAllWikis=function(e,t){return this.syncOnSites("all wikis",this.syncAllWikisFunc.bind(this),[t],e)},t.prototype.syncAllWikisFunc=function(e,t){var o=this;return this.wikiOfflineProvider.getAllNewPages(e).then(function(r){var i=[],l={};r.forEach(function(e){var t=o.getSubwikiBlockId(e.subwikiid,e.wikiid,e.userid,e.groupid);l[t]=e});var a=function(r){var a=l[r],s=t?o.syncSubwiki(a.subwikiid,a.wikiid,a.userid,a.groupid,e):o.syncSubwikiIfNeeded(a.subwikiid,a.wikiid,a.userid,a.groupid,e);i.push(s.then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{siteId:e,subwikiId:a.subwikiid,wikiId:a.wikiid,userId:a.userid,groupId:a.groupid,created:t.created,discarded:t.discarded,warnings:t.warnings})}))};for(var s in l)a(s);return Promise.all(i)})},t.prototype.syncSubwikiIfNeeded=function(e,t,n,o,r){var i=this,l=this.getSubwikiBlockId(e,t,n,o);return this.isSyncNeeded(l,r).then(function(l){if(l)return i.syncSubwiki(e,t,n,o,r)})},t.prototype.syncSubwiki=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l={warnings:[],updated:!1,created:[],discarded:[]},a=this.getSubwikiBlockId(e,t,n,o);if(this.isSyncing(a,r))return this.getOngoingSync(a,r);if(this.syncProvider.isBlocked(g.a.COMPONENT,a,r))return this.logger.debug("Cannot sync subwiki "+a+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync subwiki "+a);var s=this.wikiOfflineProvider.getSubwikiNewPages(e,t,n,o,r).catch(function(){return[]}).then(function(a){if(a&&a.length){if(!i.appProvider.isOnline())return Promise.reject(i.translate.instant("core.networkerrormsg"));var s=[];return a.forEach(function(a){s.push(i.wikiProvider.newPageOnline(a.title,a.cachedcontent,e,t,n,o,r).then(function(s){return l.updated=!0,l.created.push({pageId:s,title:a.title}),i.wikiOfflineProvider.deleteNewPage(a.title,e,t,n,o,r)}).catch(function(s){return i.utils.isWebServiceError(s)?i.wikiOfflineProvider.deleteNewPage(a.title,e,t,n,o,r).then(function(){l.updated=!0;var e=i.translate.instant("core.warningofflinedatadeleted",{component:i.translate.instant("addon.mod_wiki.wikipage"),name:a.title,error:i.textUtils.getErrorMessageFromError(s)});l.discarded.push({title:a.title,warning:e}),l.warnings.push(e)}):Promise.reject(s)}))}),Promise.all(s)}}).then(function(){return i.setSyncTime(a,r).catch(function(){})}).then(function(){return l});return this.addOngoingSync(a,s,r)},t.prototype.syncWiki=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.logHelper.syncIfNeeded(g.a.COMPONENT,e,o).catch(function(){}).then(function(){return r.wikiProvider.getSubwikis(e)}).then(function(i){var l=[],a={warnings:[],updated:!1,subwikis:{},siteId:o};return i.forEach(function(e){l.push(r.syncSubwiki(e.id,e.wikiid,e.userid,e.groupid,o).then(function(t){t&&t.updated&&(a.warnings=a.warnings.concat(t.warnings),a.updated=!0,a.subwikis[e.id]={created:t.created,discarded:t.discarded})}))}),Promise.all(l).then(function(){var o=[];return a.updated&&(e&&(o.push(r.wikiProvider.invalidateSubwikis(e)),o.push(r.wikiProvider.invalidateSubwikiPages(e)),o.push(r.wikiProvider.invalidateSubwikiFiles(e))),t&&o.push(r.wikiProvider.invalidateWikiData(t)),n&&(o.push(r.groupsProvider.invalidateActivityAllowedGroups(n)),o.push(r.groupsProvider.invalidateActivityGroupMode(n)))),Promise.all(o).catch(function(){}).then(function(){return a})})})},t.AUTO_SYNCED="addon_mod_wiki_autom_synced",t.MANUAL_SYNCED="addon_mod_wiki_manual_synced",t=n=b([Object(o.A)(),P("design:paramtypes",[s.a,u.a,i.a,c.a,d.a,r.c,h.a,l.a,g.a,v.a,p.a,a.a,f.a,m.a])],t);var n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(3),i=n(148),l=n(13),a=n(10),s=n(6),u=n(9),c=n(1),d=n(81),f=n(11),p=n(24),h=n(2),m=n(65),_=n(175),g=n(202),v=n(189),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h){var m=e.call(this,"AddonModWorkshopSyncProvider",i,l,n,a,s,t,u)||this;return m.eventsProvider=r,m.utils=c,m.workshopProvider=d,m.workshopHelper=f,m.workshopOffline=p,m.logHelper=h,m.componentTranslate=o.translateModuleName("workshop"),m}return y(t,e),n=t,t.prototype.hasDataToSync=function(e,t){return this.workshopOffline.hasWorkshopOfflineData(e,t)},t.prototype.syncAllWorkshops=function(e,t){return this.syncOnSites("all workshops",this.syncAllWorkshopsFunc.bind(this),[t],e)},t.prototype.syncAllWorkshopsFunc=function(e,t){var o=this;return this.workshopOffline.getAllWorkshops(e).then(function(r){var i=r.map(function(r){return(t?o.syncWorkshop(r,e):o.syncWorkshopIfNeeded(r,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{workshopId:r,warnings:t.warnings},e)})});return Promise.all(i)})},t.prototype.syncWorkshopIfNeeded=function(e,t){var n=this;return this.isSyncNeeded(e,t).then(function(o){if(o)return n.syncWorkshop(e,t)})},t.prototype.syncWorkshop=function(e,t){var n=this;if(t=t||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,t))return this.getOngoingSync(e,t);if(this.syncProvider.isBlocked(_.a.COMPONENT,e,t))return this.logger.debug("Cannot sync workshop "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync workshop "+e);var o=[];o.push(this.workshopOffline.getSubmissions(e,t).catch(function(){return[]})),o.push(this.workshopOffline.getAssessments(e,t).catch(function(){return[]})),o.push(this.workshopOffline.getEvaluateSubmissions(e,t).catch(function(){return[]})),o.push(this.workshopOffline.getEvaluateAssessments(e,t).catch(function(){return[]})),o.push(this.logHelper.syncIfNeeded(_.a.COMPONENT,e,t));var r={warnings:[],updated:!1},i=Promise.all(o).then(function(o){var i;for(var l in o)if(o[l].length>0&&o[l][0].courseid){i=o[l][0].courseid;break}if(i)return n.appProvider.isOnline()?n.workshopProvider.getWorkshopById(i,e,t).then(function(e){var i=o[1],l=o[2],a=o[3],s=[],u={};return o[0].forEach(function(e){void 0===u[e.submissionid]&&(u[e.submissionid]=[]),u[e.submissionid].push(e)}),Object.keys(u).forEach(function(o){s.push(n.syncSubmission(e,u[o],r,t).then(function(){r.updated=!0}))}),i.forEach(function(o){s.push(n.syncAssessment(e,o,r,t).then(function(){r.updated=!0}))}),l.forEach(function(o){s.push(n.syncEvaluateSubmission(e,o,r,t).then(function(){r.updated=!0}))}),a.forEach(function(o){s.push(n.syncEvaluateAssessment(e,o,r,t).then(function(){r.updated=!0}))}),Promise.all(s)}).then(function(){if(r.updated)return n.workshopProvider.invalidateContentById(e,i,t).catch(function(){})}):Promise.reject(null)}).then(function(){return n.setSyncTime(e,t).catch(function(){})}).then(function(){return r});return this.addOngoingSync(e,i,t)},t.prototype.syncSubmission=function(e,t,n,o){var r,i=this,l=!1,a=null,s=(t=t.sort(function(e,t){return e.timemodified-t.timemodified}))[0].submissionid;return s>0?(l=!0,a=this.workshopProvider.getSubmission(e.id,s,o).then(function(e){return e.timemodified}).catch(function(){return-1})):a=Promise.resolve(0),a.then(function(a){if(a<0||a>=t[0].timemodified)return n.updated=!0,r=i.translate.instant("addon.mod_workshop.warningsubmissionmodified"),i.workshopOffline.deleteAllSubmissionActions(e.id,s,o);var u=Promise.resolve();return t.forEach(function(t){u=u.then(function(){s=t.submissionid>0?t.submissionid:s;return(t.attachmentsid?i.workshopHelper.getSubmissionFilesFromOfflineFilesObject(t.attachmentsid,e.id,s,l,o).then(function(t){return i.workshopHelper.uploadOrStoreSubmissionFiles(e.id,s,t,l,!1,o)}):i.workshopHelper.uploadOrStoreSubmissionFiles(e.id,s,[],l,!1,o)).then(function(n){switch(e.submissiontypefile==_.a.SUBMISSION_TYPE_DISABLED&&(n=null),t.action){case"add":return i.workshopProvider.addSubmissionOnline(e.id,t.title,t.content,n,o).then(function(e){s=e});case"update":return i.workshopProvider.updateSubmissionOnline(s,t.title,t.content,n,o);case"delete":return i.workshopProvider.deleteSubmissionOnline(s,o);default:return Promise.resolve()}}).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return n.updated=!0,i.workshopOffline.deleteSubmissionAction(t.workshopid,t.submissionid,t.action,o).then(function(){if("add"==t.action||"update"==t.action){return i.workshopHelper.deleteSubmissionStoredFiles(t.workshopid,t.submissionid,"update"==t.action,o)}})})})}),u.then(function(){if(r){var t=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==n.warnings.indexOf(t)&&n.warnings.push(t)}})})},t.prototype.syncAssessment=function(e,t,n,o){var r,i=this,l=t.assessmentid;return this.workshopProvider.getAssessment(e.id,l,o).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(a){if(a<0||a>=t.timemodified)return n.updated=!0,r=i.translate.instant("addon.mod_workshop.warningassessmentmodified"),i.workshopOffline.deleteAssessment(e.id,l,o);var s=t.inputdata;return(s.feedbackauthorattachmentsid?i.workshopHelper.getAssessmentFilesFromOfflineFilesObject(s.feedbackauthorattachmentsid,e.id,l,o).then(function(t){return i.workshopHelper.uploadOrStoreAssessmentFiles(e.id,l,t,!1,o)}):i.workshopHelper.uploadOrStoreAssessmentFiles(e.id,l,[],!1,o)).then(function(e){return s.feedbackauthorattachmentsid=e||0,i.workshopProvider.updateAssessmentOnline(l,s,o)}).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return n.updated=!0,i.workshopOffline.deleteAssessment(e.id,l,o).then(function(){i.workshopHelper.deleteAssessmentStoredFiles(e.id,l,o)})})}).then(function(){if(r){var t=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==n.warnings.indexOf(t)&&n.warnings.push(t)}})},t.prototype.syncEvaluateSubmission=function(e,t,n,o){var r,i=this,l=t.submissionid;return this.workshopProvider.getSubmission(e.id,l,o).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(a){return a<0||a>=t.timemodified?(n.updated=!0,r=i.translate.instant("addon.mod_workshop.warningsubmissionmodified"),i.workshopOffline.deleteEvaluateSubmission(e.id,l,o)):i.workshopProvider.evaluateSubmissionOnline(l,t.feedbacktext,t.published,t.gradeover,o).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return n.updated=!0,i.workshopOffline.deleteEvaluateSubmission(e.id,l,o)})}).then(function(){if(r){var t=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==n.warnings.indexOf(t)&&n.warnings.push(t)}})},t.prototype.syncEvaluateAssessment=function(e,t,n,o){var r,i=this,l=t.assessmentid;return this.workshopProvider.getAssessment(e.id,l,o).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(a){return a<0||a>=t.timemodified?(n.updated=!0,r=i.translate.instant("addon.mod_workshop.warningassessmentmodified"),i.workshopOffline.deleteEvaluateAssessment(e.id,l,o)):i.workshopProvider.evaluateAssessmentOnline(l,t.feedbacktext,t.weight,t.gradinggradeover,o).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return n.updated=!0,i.workshopOffline.deleteEvaluateAssessment(e.id,l,o)})}).then(function(){if(r){var t=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==n.warnings.indexOf(t)&&n.warnings.push(t)}})},t.AUTO_SYNCED="addon_mod_workshop_autom_synced",t.MANUAL_SYNCED="addon_mod_workshop_manual_synced",t=n=b([Object(o.A)(),P("design:paramtypes",[r.c,a.a,l.a,u.a,s.a,c.a,d.a,f.a,p.a,h.a,_.a,g.a,v.a,m.a])],t);var n}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(1),l=n(11),a=n(2),s=n(57),u=n(72),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,n,o,r,i,l){this.sitesProvider=n,this.textUtils=o,this.fileProvider=r,this.fileUploaderProvider=i,this.utils=l,this.siteSchema={name:"AddonModDataOfflineProvider",version:1,tables:[{name:t.DATA_ENTRY_TABLE,columns:[{name:"dataid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"action",type:"TEXT"},{name:"entryid",type:"INTEGER"},{name:"fields",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["dataid","entryid","action"]}],migrate:function(e,n,o){if(0==n){var r=t.DATA_ENTRY_TABLE,i="addon_mod_data_entry";return e.tableExists(i).then(function(){return e.insertRecordsFrom(r,i).then(function(){return e.dropTable(i)})}).catch(function(){})}}},this.logger=e.getInstance("AddonModDataOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteAllEntryActions=function(e,t,n){var o=this;return this.getEntryActions(e,t,n).then(function(r){var i=[];return r.forEach(function(r){i.push(o.deleteEntry(e,t,r.action,n))}),Promise.all(i)})},e.prototype.deleteEntry=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return i.deleteEntryFiles(e,n,o,r.id).then(function(){return r.getDb().deleteRecords(t.DATA_ENTRY_TABLE,{dataid:e,entryid:n,action:o})})})},e.prototype.deleteEntryFiles=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return r.getEntry(e,t,n,o.id).then(function(n){if(n.fields){var i=[];return n.fields.forEach(function(n){if(r.textUtils.parseJSON(n.value).offline){var l=r.getEntryFieldFolder(e,t,n.fieldid,o.id).then(function(e){return r.fileUploaderProvider.getStoredFiles(e)}).then(function(e){return r.fileUploaderProvider.clearTmpFiles(e)}).catch(function(){});i.push(l)}}),Promise.all(i)}}).catch(function(){})})},e.prototype.getAllEntries=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(t.DATA_ENTRY_TABLE)}).then(function(e){return e.map(n.parseRecord.bind(n))})},e.prototype.getDatabaseEntries=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.DATA_ENTRY_TABLE,{dataid:e},"timemodified")}).then(function(e){return e.map(o.parseRecord.bind(o))})},e.prototype.getEntry=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecord(t.DATA_ENTRY_TABLE,{dataid:e,entryid:n,action:o})}).then(function(e){return i.parseRecord(e)})},e.prototype.getEntryActions=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(t.DATA_ENTRY_TABLE,{dataid:e,entryid:n})}).then(function(e){return e.map(r.parseRecord.bind(r))})},e.prototype.hasOfflineData=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return o.utils.promiseWorks(n.getDb().recordExists(t.DATA_ENTRY_TABLE,{dataid:e}))})},e.prototype.getDatabaseFolder=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=n.fileProvider.getSiteFolder(t.getId());return n.textUtils.concatenatePaths(o,"offlinedatabase/"+e)})},e.prototype.getEntryFieldFolder=function(e,t,n,o){var r=this;return this.getDatabaseFolder(e,o).then(function(e){return r.textUtils.concatenatePaths(e,t+"_"+n)})},e.prototype.parseRecord=function(e){return e.fields=this.textUtils.parseJSON(e.fields),e},e.prototype.saveEntry=function(e,n,o,r,i,l,a,s){return this.sitesProvider.getSite(s).then(function(s){a=a||(new Date).getTime();var u={dataid:e,courseid:r,groupid:i,action:o,entryid:n=void 0===n||null===n?-a:n,fields:JSON.stringify(l||[]),timemodified:a};return s.getDb().insertRecord(t.DATA_ENTRY_TABLE,u)})},e.DATA_ENTRY_TABLE="addon_mod_data_entry_1",e=t=c([Object(o.A)(),d("design:paramtypes",[r.a,i.a,l.a,s.a,u.a,a.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(9),l=n(1),a=n(4),s=n(46),u=n(52),c=n(13),d=n(38),f=n(623),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},_=function(){function e(e,t,n,o,r,i,l,a,s){this.navCtrl=e,this.courseHelper=t,this.domUtils=n,this.courseProvider=o,this.eventsProvider=r,this.sitesProvider=i,this.coursesProvider=l,this.popoverCtrl=a,this.userProvider=s,this.showAll=!1,this.showDownload=!0,this.prefetchCourseData={downloadSucceeded:!1,prefetchCourseIcon:"spinner",title:"core.course.downloadcourse"},this.showSpinner=!1,this.isDestroyed=!1}return e.prototype.ngOnInit=function(){var e=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCourseEnabled&&this.initPrefetchCourse(),this.courseOptionMenuEnabled=this.showAll&&void 0!==this.course.isfavourite,this.siteUpdatedObserver=this.eventsProvider.on(i.a.SITE_UPDATED,function(){var t=e.downloadCourseEnabled;e.downloadCourseEnabled=!e.coursesProvider.isDownloadCourseDisabledInSite(),!t&&e.downloadCourseEnabled&&e.initPrefetchCourse()},this.sitesProvider.getCurrentSiteId())},e.prototype.initPrefetchCourse=function(){var e=this;void 0===this.courseStatusObserver&&(this.courseStatusObserver=this.eventsProvider.on(i.a.COURSE_STATUS_CHANGED,function(t){t.courseId!=e.course.id&&t.courseId!=c.a.ALL_COURSES_CLEARED||e.updateCourseStatus(t.status)},this.sitesProvider.getCurrentSiteId()),this.courseHelper.getCourseStatusIconAndTitle(this.course.id).then(function(t){if(e.prefetchCourseData.prefetchCourseIcon=t.icon,e.prefetchCourseData.title=t.title,"spinner"==t.icon){var n=e.courseHelper.getCourseDownloadPromise(e.course.id);n?n.catch(function(t){e.isDestroyed||e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0)}):e.courseProvider.setCoursePreviousStatus(e.course.id)}}))},e.prototype.openCourse=function(e){this.courseHelper.openCourse(this.navCtrl,e)},e.prototype.prefetchCourse=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData,this.course).catch(function(e){t.isDestroyed||t.domUtils.showErrorModalDefault(e,"core.course.errordownloadingcourse",!0)})},e.prototype.updateCourseStatus=function(e){var t=this.courseHelper.getCourseStatusIconAndTitleFromStatus(e);this.prefetchCourseData.prefetchCourseIcon=t.icon,this.prefetchCourseData.title=t.title},e.prototype.showCourseOptionsMenu=function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.popoverCtrl.create(f.a,{course:this.course,prefetch:this.prefetchCourseData});n.onDidDismiss(function(n){if(n)switch(n){case"download":"spinner"!=t.prefetchCourseData.prefetchCourseIcon&&t.prefetchCourse(e);break;case"hide":t.setCourseHidden(!0);break;case"show":t.setCourseHidden(!1);break;case"favourite":t.setCourseFavourite(!0);break;case"unfavourite":t.setCourseFavourite(!1)}}),n.present({ev:e})},e.prototype.setCourseHidden=function(e){var t=this;this.showSpinner=!0,this.userProvider.updateUserPreference("block_myoverview_hidden_course_"+this.course.id,e?1:null).then(function(){t.course.hidden=e,t.eventsProvider.trigger(u.a.EVENT_MY_COURSES_UPDATED,{course:t.course},t.sitesProvider.getCurrentSiteId())}).catch(function(e){t.isDestroyed||t.domUtils.showErrorModalDefault(e,"Error changing course visibility.")}).finally(function(){t.showSpinner=!1})},e.prototype.setCourseFavourite=function(e){var t=this;this.showSpinner=!0,this.coursesProvider.setFavouriteCourse(this.course.id,e).then(function(){t.course.isfavourite=e,t.eventsProvider.trigger(u.a.EVENT_MY_COURSES_UPDATED,{course:t.course},t.sitesProvider.getCurrentSiteId())}).catch(function(e){t.isDestroyed||t.domUtils.showErrorModalDefault(e,"Error changing course favourite attribute.")}).finally(function(){t.showSpinner=!1})},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.siteUpdatedObserver&&this.siteUpdatedObserver.off(),this.courseStatusObserver&&this.courseStatusObserver.off()},p([Object(o.D)(),h("design:type",Object)],e.prototype,"course",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"showAll",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"showDownload",void 0),e=p([Object(o.m)({selector:"core-courses-course-progress",templateUrl:"core-courses-course-progress.html"}),m(0,Object(o.N)()),h("design:paramtypes",[r.s,d.a,a.a,c.a,i.a,l.a,u.a,r.w,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(1),i=n(2),l=n(10),a=n(18),s=n(65),u=n(295),c=n(53),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.sitesProvider=e,this.appProvider=t,this.filepoolProvider=n,this.utils=o,this.choiceOffline=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModChoice:"}return t=e,e.prototype.canStudentSeeResults=function(e,n){var o=(new Date).getTime();return e.showresults===t.RESULTS_ALWAYS||e.showresults===t.RESULTS_AFTER_CLOSE&&0!==e.timeclose&&e.timeclose<=o||e.showresults===t.RESULTS_AFTER_ANSWER&&n},e.prototype.deleteResponses=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId(),o=o||[];var l=function(){return i.choiceOffline.saveResponse(e,t,n,o,!0,r).then(function(){return!1})};return this.appProvider.isOnline()?this.choiceOffline.deleteResponse(e,r).then(function(){return i.deleteResponsesOnline(e,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},e.prototype.deleteResponsesOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_choice_delete_choice_responses",{choiceid:e,responses:t}).then(function(t){if(!t||!1===t.status)return Promise.reject(o.utils.createFakeWSError(""));var r=[o.invalidateOptions(e,n.id),o.invalidateResults(e,n.id)];return Promise.all(r).catch(function(){})})})},e.prototype.getChoiceDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"choice:"+e},e.prototype.getChoiceOptionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"options:"+e},e.prototype.getChoiceResultsCacheKey=function(e){return this.ROOT_CACHE_KEY+"results:"+e},e.prototype.getChoiceByDataKey=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(e).then(function(e){var a={courseids:[t]},s={cacheKey:l.getChoiceDataCacheKey(t),omitExpires:r,updateFrequency:c.a.FREQUENCY_RARELY};return r?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),e.read("mod_choice_get_choices_by_courses",a,s).then(function(e){if(e&&e.choices){var t=e.choices.find(function(e){return e[n]==o});if(t)return t}return Promise.reject(null)})})},e.prototype.getChoice=function(e,t,n,o,r){return this.getChoiceByDataKey(n,e,"coursemodule",t,o,r)},e.prototype.getChoiceById=function(e,t,n,o,r){return this.getChoiceByDataKey(n,e,"id",t,o,r)},e.prototype.getOptions=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={choiceid:e},i={cacheKey:o.getChoiceOptionsCacheKey(e),updateFrequency:c.a.FREQUENCY_RARELY};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_choice_get_choice_options",r,i).then(function(e){return e.options?e.options:Promise.reject(null)})})},e.prototype.getResults=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={choiceid:e},i={cacheKey:o.getChoiceResultsCacheKey(e)};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_choice_get_choice_results",r,i).then(function(e){return e.options?e.options:Promise.reject(null)})})},e.prototype.invalidateChoiceData=function(e,t){var n=this;return this.sitesProvider.getSite(null).then(function(t){return t.invalidateWsCacheForKey(n.getChoiceDataCacheKey(e))})},e.prototype.invalidateContent=function(e,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.getChoice(n,e).then(function(e){return Promise.all([r.invalidateChoiceData(n),r.invalidateOptions(e.id),r.invalidateResults(e.id)])})),i.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e)),this.utils.allPromises(i)},e.prototype.invalidateOptions=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getChoiceOptionsCacheKey(e))})},e.prototype.invalidateResults=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getChoiceResultsCacheKey(e))})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_choice_view_choice",{choiceid:e},t.COMPONENT,e,n,"choice",{},o)},e.prototype.submitResponse=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.choiceOffline.saveResponse(e,t,n,o,!1,r).then(function(){return!1})};return this.appProvider.isOnline()?this.choiceOffline.deleteResponse(e,r).then(function(){return i.submitResponseOnline(e,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},e.prototype.submitResponseOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){return r.write("mod_choice_submit_choice_response",{choiceid:e,responses:t}).then(function(){var t=[o.invalidateOptions(e,n),o.invalidateResults(e,n)];return Promise.all(t).catch(function(){})})})},e.COMPONENT="mmaModChoice",e.RESULTS_NOT=0,e.RESULTS_AFTER_ANSWER=1,e.RESULTS_AFTER_CLOSE=2,e.RESULTS_ALWAYS=3,e.PUBLISH_ANONYMOUS=!1,e.PUBLISH_NAMES=!0,e=t=d([Object(o.A)(),f("design:paramtypes",[r.a,l.a,a.a,i.a,u.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.sitesProvider=e,this.siteSchema={name:"AddonModChoiceOfflineProvider",version:1,tables:[{name:t.CHOICE_TABLE,columns:[{name:"choiceid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"responses",type:"TEXT"},{name:"deleting",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["choiceid","userid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteResponse=function(e,n,o){return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.getDb().deleteRecords(t.CHOICE_TABLE,{choiceid:e,userid:o})})},e.prototype.getResponses=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.CHOICE_TABLE).then(function(e){return e.forEach(function(e){e.responses=JSON.parse(e.responses)}),e})})},e.prototype.hasResponse=function(e,t,n){return this.getResponse(e,t,n).then(function(e){return!!e.choiceid}).catch(function(e){return!1})},e.prototype.getResponse=function(e,n,o){return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.getDb().getRecord(t.CHOICE_TABLE,{choiceid:e,userid:o}).then(function(e){return e.responses=JSON.parse(e.responses),e})})},e.prototype.saveResponse=function(e,n,o,r,i,l,a){return this.sitesProvider.getSite(l).then(function(l){var s={choiceid:e,name:n,courseid:o,userid:a||l.getUserId(),responses:JSON.stringify(r),deleting:i?1:0,timecreated:(new Date).getTime()};return l.getDb().insertRecord(t.CHOICE_TABLE,s)})},e.CHOICE_TABLE="addon_mod_choice_responses",e=t=i([Object(o.A)(),l("design:paramtypes",[r.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(6),i=n(1),l=n(10),a=n(2),s=n(11),u=n(24),c=n(295),d=n(294),f=n(9),p=n(3),h=n(13),m=n(65),_=n(50),g=n(311),v=n(81),y=n(591),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var _=e.call(this,"AddonModChoiceSyncProvider",n,t,o,d,u,a,f,m,h)||this;return _.sitesProvider=t,_.appProvider=o,_.choiceOffline=r,_.eventsProvider=i,_.choiceProvider=l,_.utils=s,_.textUtils=u,_.courseProvider=c,_.logHelper=p,_.componentTranslate=c.translateModuleName("choice"),_}return b(t,e),n=t,t.prototype.getSyncId=function(e,t){return e+"#"+t},t.prototype.syncAllChoices=function(e,t){return this.syncOnSites("choices",this.syncAllChoicesFunc.bind(this),[t],e)},t.prototype.syncAllChoicesFunc=function(e,t){var o=this;return this.choiceOffline.getResponses(e).then(function(r){var i=r.map(function(r){return(t?o.syncChoice(r.choiceid,r.userid,e):o.syncChoiceIfNeeded(r.choiceid,r.userid,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{choiceId:r.choiceid,userId:r.userid,warnings:t.warnings},e)})});return Promise.all(i)})},t.prototype.syncChoiceIfNeeded=function(e,t,n){var o=this,r=this.getSyncId(e,t);return this.isSyncNeeded(r,n).then(function(r){if(r)return o.syncChoice(e,t,n)})},t.prototype.syncChoice=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){t=t||r.getUserId(),n=r.getId();var i=o.getSyncId(e,t);if(o.isSyncing(i,n))return o.getOngoingSync(i,n);o.logger.debug("Try to sync choice '"+e+"' for user '"+t+"'");var l,a={warnings:[],updated:!1},s=o.logHelper.syncIfNeeded(d.a.COMPONENT,e,n).catch(function(){}).then(function(){return o.choiceOffline.getResponse(e,n,t).catch(function(){return{}})}).then(function(r){if(r.choiceid){if(!o.appProvider.isOnline())return Promise.reject(null);l=r.courseid;return(r.deleting?o.choiceProvider.deleteResponsesOnline(e,r.responses,n):o.choiceProvider.submitResponseOnline(e,r.responses,n)).then(function(){return a.updated=!0,o.choiceOffline.deleteResponse(e,n,t)}).catch(function(i){return o.utils.isWebServiceError(i)?(a.updated=!0,o.choiceOffline.deleteResponse(e,n,t).then(function(){a.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:r.name,error:o.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)})}}).then(function(){if(l)return o.courseProvider.getModuleBasicInfoByInstance(e,"choice",n).then(function(e){return o.prefetchAfterUpdate(e,l,void 0,n)}).catch(function(){})}).then(function(){return o.setSyncTime(i,n)}).then(function(){return a});return o.addOngoingSync(i,s,n)})},t.AUTO_SYNCED="addon_mod_choice_autom_synced",t=n=P([Object(o.A)(),O("design:paramtypes",[i.a,r.a,l.a,c.a,f.a,d.a,p.c,a.a,s.a,h.a,v.a,u.a,m.a,y.a,_.a])],t);var n}(g.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(11),a=n(24),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,n,o,r){this.sitesProvider=n,this.textUtils=o,this.timeUtils=r,this.siteSchema={name:"AddonModFeedbackOfflineProvider",version:1,tables:[{name:t.FEEDBACK_TABLE,columns:[{name:"feedbackid",type:"INTEGER"},{name:"page",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"responses",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["feedbackid","page"]}]},this.logger=e.getInstance("AddonModFeedbackOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteFeedbackPageResponses=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(t.FEEDBACK_TABLE,{feedbackid:e,page:n})})},e.prototype.getAllFeedbackResponses=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(t.FEEDBACK_TABLE).then(function(e){return e.forEach(function(e){e.responses=n.textUtils.parseJSON(e.responses)}),e})})},e.prototype.getFeedbackResponses=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.FEEDBACK_TABLE,{feedbackid:e})}).then(function(e){return e.forEach(function(e){e.responses=o.textUtils.parseJSON(e.responses)}),e})},e.prototype.getFeedbackPageResponses=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(t.FEEDBACK_TABLE,{feedbackid:e,page:n})}).then(function(e){return e.responses=r.textUtils.parseJSON(e.responses),e})},e.prototype.hasFeedbackOfflineData=function(e,t){return this.getFeedbackResponses(e,t).then(function(e){return!!e.length})},e.prototype.saveResponses=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a={feedbackid:e,page:n,courseid:r,responses:JSON.stringify(o),timemodified:l.timeUtils.timestamp()};return i.getDb().insertRecord(t.FEEDBACK_TABLE,a)})},e.FEEDBACK_TABLE="addon_mod_feedback_answers",e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(3),i=n(10),l=n(57),a=n(1),s=n(11),u=n(2),c=n(22),d=n(65),f=n(53),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,i,l,a){this.fileProvider=e,this.sitesProvider=t,this.textUtils=n,this.urlUtils=o,this.utils=r,this.translate=i,this.appProvider=l,this.logHelper=a,this.ROOT_CACHE_KEY="mmaModLti:",this.LAUNCHER_FILE_NAME="lti_launcher.html"}return t=e,e.prototype.deleteLauncher=function(){return this.fileProvider.removeFile(this.LAUNCHER_FILE_NAME)},e.prototype.generateLauncher=function(e,t){var n=this;if(!this.fileProvider.isAvailable())return Promise.resolve(e);var o='<form action="'+e+'" name="ltiLaunchForm" method="post" encType="application/x-www-form-urlencoded">\n';return t.forEach(function(e){o+="ext_submit"==e.name?'    <input type="submit"':'    <input type="hidden" name="'+n.textUtils.escapeHTML(e.name)+'"',o+=' value="'+n.textUtils.escapeHTML(e.value)+'"/>\n'}),o+="</form>\n",o+='<script type="text/javascript"> \n    window.onload = function() { \n        document.ltiLaunchForm.submit(); \n    }; \n<\/script> \n',this.fileProvider.writeFile(this.LAUNCHER_FILE_NAME,o).then(function(e){return n.appProvider.isDesktop()?e.toInternalURL():e.toURL()})},e.prototype.getLti=function(e,t){var n={courseids:[e]},o={cacheKey:this.getLtiCacheKey(e),updateFrequency:f.a.FREQUENCY_RARELY};return this.sitesProvider.getCurrentSite().read("mod_lti_get_ltis_by_courses",n,o).then(function(e){if(e.ltis){var n=e.ltis.find(function(e){return e.coursemodule==t});if(n)return n}return Promise.reject(null)})},e.prototype.getLtiCacheKey=function(e){return this.ROOT_CACHE_KEY+"lti:"+e},e.prototype.getLtiLaunchData=function(e){var t={toolid:e},n={getFromCache:!1,saveToCache:!0,emergencyCache:!0,cacheKey:this.getLtiLaunchDataCacheKey(e)};return this.sitesProvider.getCurrentSite().read("mod_lti_get_tool_launch_data",t,n).then(function(e){return e.endpoint?e:Promise.reject(null)})},e.prototype.getLtiLaunchDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"launch:"+e},e.prototype.invalidateLti=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getLtiCacheKey(e))},e.prototype.invalidateLtiLaunchData=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getLtiLaunchDataCacheKey(e))},e.prototype.launch=function(e,t){var n=this;return this.urlUtils.isHttpURL(e)?this.generateLauncher(e,t).then(function(e){n.appProvider.isMobile()?n.utils.openInApp(e):n.utils.openInBrowser(e)}):Promise.reject(this.translate.instant("addon.mod_lti.errorinvalidlaunchurl"))},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_lti_view_lti",{ltiid:e},t.COMPONENT,e,n,"lti",{},o)},e.COMPONENT="mmaModLti",e=t=p([Object(o.A)(),h("design:paramtypes",[l.a,a.a,s.a,c.a,u.a,r.c,i.a,d.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(4),i=n(13),l=n(38),a=n(223),s=n(1),u=n(18),c=n(57),d=n(115),f=n(10),p=n(66),h=n(11),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n,o,r,i,l,a,s,u,c){this.courseProvider=e,this.domUtils=t,this.resourceProvider=n,this.courseHelper=o,this.textUtils=r,this.mimetypeUtils=i,this.fileProvider=l,this.appProvider=a,this.filepoolProvider=s,this.sitesProvider=u,this.fileHelper=c,this.DISPLAY_AUTO=0,this.DISPLAY_EMBED=1}return e.prototype.getEmbeddedHtml=function(e,t){var n=this;return this.courseHelper.downloadModuleWithMainFileIfNeeded(e,t,a.a.COMPONENT,e.id,e.contents).then(function(t){return n.mimetypeUtils.getEmbeddedHtml(e.contents[0],t.path)})},e.prototype.getIframeSrc=function(e){var t=this;if(!e.contents.length)return Promise.reject(null);var n=e.contents[0],o=n.filename;return"/"!==n.filepath&&(o=n.filepath.substr(1)+o),this.filepoolProvider.getPackageDirUrlByUrl(this.sitesProvider.getCurrentSiteId(),e.url).then(function(e){return t.textUtils.concatenatePaths(e,o)}).catch(function(){return t.appProvider.isOnline()&&n.fileurl?t.sitesProvider.getCurrentSite().checkAndFixPluginfileURL(n.fileurl):Promise.reject(null)})},e.prototype.isDisplayedEmbedded=function(e,t){if(!e.contents.length&&!e.contentsinfo||!this.fileProvider.isAvailable()||!this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.7")&&this.isNextcloudFile(e))return!1;var n;return n=e.contentsinfo?this.mimetypeUtils.getExtension(e.contentsinfo.mimetypes[0]):this.mimetypeUtils.getFileExtension(e.contents[0].filename),(t==this.DISPLAY_EMBED||t==this.DISPLAY_AUTO)&&this.mimetypeUtils.canBeEmbedded(n)},e.prototype.isDisplayedInIframe=function(e){if(!e.contents.length&&!e.contentsinfo||!this.fileProvider.isAvailable())return!1;var t;if(e.contentsinfo)t=e.contentsinfo.mimetypes[0];else{var n=this.mimetypeUtils.getFileExtension(e.contents[0].filename);t=this.mimetypeUtils.getMimeType(n)}return"text/html"==t},e.prototype.isMainFileDownloadable=function(e,t){t=t||this.sitesProvider.getCurrentSiteId();var n=e.contents[0],o=this.fileHelper.getFileUrl(n),r=this.fileHelper.getFileTimemodified(n);return this.filepoolProvider.isFileDownloadable(t,o,r)},e.prototype.isNextcloudFile=function(e){return e.contentsinfo?"nextcloud"==e.contentsinfo.repositorytype:e.contents&&e.contents[0]&&"nextcloud"==e.contents[0].repositorytype},e.prototype.openModuleFile=function(e,t){var n=this,o=this.domUtils.showModalLoading();return this.courseHelper.downloadModuleAndOpenFile(e,t,a.a.COMPONENT,e.id,e.contents).then(function(){n.resourceProvider.logView(e.instance,e.name).then(function(){n.courseProvider.checkModuleCompletion(t,e.completiondata)}).catch(function(){})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.mod_resource.errorwhileloadingthecontent",!0)}).finally(function(){o.dismiss()})},e=m([Object(o.A)(),_("design:paramtypes",[i.a,r.a,a.a,l.a,h.a,p.a,c.a,f.a,u.a,s.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(10),s=n(18),u=n(65),c=n(301),d=n(53),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.sitesProvider=t,this.appProvider=n,this.filepoolProvider=o,this.utils=r,this.surveyOffline=i,this.logHelper=l,this.ROOT_CACHE_KEY="mmaModSurvey:",this.logger=e.getInstance("AddonModSurveyProvider")}return t=e,e.prototype.getQuestions=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r={surveyid:e},i={cacheKey:o.getQuestionsCacheKey(e),updateFrequency:d.a.FREQUENCY_RARELY};return t&&(i.getFromCache=!1,i.emergencyCache=!1),n.read("mod_survey_get_questions",r,i).then(function(e){return e.questions?e.questions:Promise.reject(null)})})},e.prototype.getQuestionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"questions:"+e},e.prototype.getSurveyCacheKey=function(e){return this.ROOT_CACHE_KEY+"survey:"+e},e.prototype.getSurveyDataByKey=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e]},a={cacheKey:i.getSurveyCacheKey(e),updateFrequency:d.a.FREQUENCY_RARELY};return o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_survey_get_surveys_by_courses",l,a).then(function(e){if(e&&e.surveys){var o=e.surveys.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getSurvey=function(e,t,n,o){return this.getSurveyDataByKey(e,"coursemodule",t,n,o)},e.prototype.getSurveyById=function(e,t,n,o){return this.getSurveyDataByKey(e,"id",t,n,o)},e.prototype.invalidateContent=function(e,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.getSurvey(n,e).then(function(e){var t=[];return t.push(r.invalidateSurveyData(n,o)),t.push(r.invalidateQuestions(e.id,o)),Promise.all(t)})),i.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e)),this.utils.allPromises(i)},e.prototype.invalidateQuestions=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getQuestionsCacheKey(e))})},e.prototype.invalidateSurveyData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getSurveyCacheKey(e))})},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_survey_view_survey",{surveyid:e},t.COMPONENT,e,n,"survey",{},o)},e.prototype.submitAnswers=function(e,t,n,o,r){var i=this,l=function(){return i.surveyOffline.saveAnswers(e,t,n,o,r).then(function(){return!1})};return r=r||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.surveyOffline.deleteSurveyAnswers(e,r).then(function(){return i.submitAnswersOnline(e,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},e.prototype.submitAnswersOnline=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_survey_submit_answers",{surveyid:e,answers:t}).then(function(e){if(!e.status)return Promise.reject(o.utils.createFakeWSError(""))})})},e.COMPONENT="mmaModSurvey",e=t=f([Object(o.A)(),p("design:paramtypes",[r.a,i.a,a.a,s.a,l.a,c.a,u.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(1),l=n(11),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,n,o){this.sitesProvider=n,this.textUtils=o,this.siteSchema={name:"AddonModSurveyOfflineProvider",version:1,tables:[{name:t.SURVEY_TABLE,columns:[{name:"surveyid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"answers",type:"TEXT"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["surveyid","userid"]}]},this.logger=e.getInstance("AddonModSurveyOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteSurveyAnswers=function(e,n,o){return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.getDb().deleteRecords(t.SURVEY_TABLE,{surveyid:e,userid:o})})},e.prototype.getAllData=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(t.SURVEY_TABLE).then(function(e){return e.forEach(function(e){e.answers=n.textUtils.parseJSON(e.answers)}),e})})},e.prototype.getSurveyAnswers=function(e,t,n){return this.getSurveyData(e,t,n).then(function(e){return e.answers||[]}).catch(function(){return[]})},e.prototype.getSurveyData=function(e,n,o){var r=this;return this.sitesProvider.getSite(n).then(function(n){return o=o||n.getUserId(),n.getDb().getRecord(t.SURVEY_TABLE,{surveyid:e,userid:o})}).then(function(e){return e.answers=r.textUtils.parseJSON(e.answers),e})},e.prototype.hasAnswers=function(e,t,n){return this.getSurveyAnswers(e,t,n).then(function(e){return!!e.length})},e.prototype.saveAnswers=function(e,n,o,r,i,l){return this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId();var a={surveyid:e,name:n,courseid:o,userid:l,answers:JSON.stringify(r),timecreated:(new Date).getTime()};return i.getDb().insertRecord(t.SURVEY_TABLE,a)})},e.SURVEY_TABLE="addon_mod_survey_answers",e=t=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(6),i=n(1),l=n(10),a=n(2),s=n(11),u=n(24),c=n(301),d=n(300),f=n(9),p=n(3),h=n(13),m=n(65),_=n(50),g=n(311),v=n(81),y=n(665),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var _=e.call(this,"AddonModSurveySyncProvider",t,n,o,r,i,l,f,h,m)||this;return _.courseProvider=a,_.surveyOffline=s,_.eventsProvider=u,_.surveyProvider=c,_.utils=d,_.logHelper=p,_.componentTranslate=a.translateModuleName("survey"),_}return b(t,e),n=t,t.prototype.getSyncId=function(e,t){return e+"#"+t},t.prototype.syncAllSurveys=function(e,t){return this.syncOnSites("all surveys",this.syncAllSurveysFunc.bind(this),[t],e)},t.prototype.syncAllSurveysFunc=function(e,t){var o=this;return this.surveyOffline.getAllData(e).then(function(r){var i=r.map(function(r){return(t?o.syncSurvey(r.surveyid,r.userid,e):o.syncSurveyIfNeeded(r.surveyid,r.userid,e)).then(function(t){t&&t.answersSent&&o.eventsProvider.trigger(n.AUTO_SYNCED,{surveyId:r.surveyid,userId:r.userid,warnings:t.warnings},e)})});return Promise.all(i)})},t.prototype.syncSurveyIfNeeded=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getSyncId(e,t);return this.isSyncNeeded(r,n).then(function(r){if(r)return o.syncSurvey(e,t,n)})},t.prototype.syncSurvey=function(e,t,n){var o=this;return this.sitesProvider.getSite(n).then(function(r){t=t||r.getUserId(),n=r.getId();var i=o.getSyncId(e,t);if(o.isSyncing(i,n))return o.getOngoingSync(i,n);o.logger.debug("Try to sync survey '"+e+"' for user '"+t+"'");var l,a={warnings:[],answersSent:!1},s=o.logHelper.syncIfNeeded(d.a.COMPONENT,e,n).catch(function(){}).then(function(){return o.surveyOffline.getSurveyData(e,n,t).catch(function(){return{}})}).then(function(r){if(r.answers&&r.answers.length)return o.appProvider.isOnline()?(l=r.courseid,o.surveyProvider.submitAnswersOnline(e,r.answers,n).then(function(){return a.answersSent=!0,o.surveyOffline.deleteSurveyAnswers(e,n,t)}).catch(function(i){return o.utils.isWebServiceError(i)?(a.answersSent=!0,o.surveyOffline.deleteSurveyAnswers(e,n,t).then(function(){a.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:r.name,error:o.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)})):Promise.reject(null)}).then(function(){if(l)return o.surveyProvider.invalidateSurveyData(l,n).then(function(){return o.courseProvider.getModuleBasicInfoByInstance(e,"survey",n).then(function(e){return o.prefetchAfterUpdate(e,l,void 0,n)})}).catch(function(){})}).then(function(){return o.setSyncTime(i,n)}).then(function(){return a});return o.addOngoingSync(i,s,n)})},t.AUTO_SYNCED="addon_mod_survey_autom_synced",t=n=P([Object(o.A)(),O("design:paramtypes",[r.a,i.a,l.a,v.a,s.a,p.c,h.a,c.a,f.a,d.a,a.a,u.a,m.a,_.a,y.a])],t);var n}(g.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(6),i=n(1),l=n(66),a=n(2),s=n(13),u=n(65),c=n(40),d=n(53),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i){this.sitesProvider=t,this.courseProvider=n,this.utils=o,this.mimeUtils=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModUrl:",this.logger=e.getInstance("AddonModUrlProvider")}return t=e,e.prototype.getFinalDisplayType=function(e){if(!e)return-1;var t=this.mimeUtils.guessExtensionFromUrl(e.externalurl);if(e.display==c.a.RESOURCELIB_DISPLAY_EMBED&&"pdf"==t)return c.a.RESOURCELIB_DISPLAY_DOWNLOAD;if(e.display!=c.a.RESOURCELIB_DISPLAY_AUTO)return e.display;var n=this.sitesProvider.getCurrentSite();if(n&&n.containsUrl(e.externalurl)&&-1==e.externalurl.indexOf("file.php")&&-1!=e.externalurl.indexOf(".php"))return c.a.RESOURCELIB_DISPLAY_OPEN;var o=this.mimeUtils.getMimeType(t);return(-1!=e.externalurl.indexOf(".php")||"/"===e.externalurl.substr(-1)||-1!=e.externalurl.indexOf("//")&&2==e.externalurl.match(/\//g).length)&&(o="text/html"),-1!=["application/zip","application/x-tar","application/g-zip","application/pdf","text/html"].indexOf(o)?c.a.RESOURCELIB_DISPLAY_DOWNLOAD:this.mimeUtils.canBeEmbedded(t)?c.a.RESOURCELIB_DISPLAY_EMBED:c.a.RESOURCELIB_DISPLAY_OPEN},e.prototype.getUrlCacheKey=function(e){return this.ROOT_CACHE_KEY+"url:"+e},e.prototype.getUrlDataByKey=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={courseids:[e]},l={cacheKey:r.getUrlCacheKey(e),updateFrequency:d.a.FREQUENCY_RARELY};return o.read("mod_url_get_urls_by_courses",i,l).then(function(e){if(e&&e.urls){var o=e.urls.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getUrl=function(e,t,n){return this.getUrlDataByKey(e,"coursemodule",t,n)},e.prototype.guessIcon=function(e){var t=(e=e||"").match(/\//g),n=this.mimeUtils.getFileExtension(e);if(!t||t.length<3||"/"===e.substr(-1)||"php"==n)return"";var o=this.mimeUtils.getFileIcon(e);return o===this.mimeUtils.getFileIconForType("unknown")||o===this.mimeUtils.getFileIconForType("html")?"":o},e.prototype.invalidateContent=function(e,t,n){n=n||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.invalidateUrlData(t,n)),o.push(this.courseProvider.invalidateModule(e,n,"url")),this.utils.allPromises(o)},e.prototype.invalidateUrlData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getUrlCacheKey(e))})},e.prototype.isGetUrlWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_url_get_urls_by_courses")},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_url_view_url",{urlid:e},t.COMPONENT,e,n,"url",{},o)},e.COMPONENT="mmaModUrl",e=t=f([Object(o.A)(),p("design:paramtypes",[r.a,i.a,s.a,a.a,l.a,u.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(1),l=n(24),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,n,o){this.sitesProvider=n,this.timeUtils=o,this.siteSchema={name:"AddonNotesOfflineProvider",version:2,tables:[{name:t.NOTES_TABLE,columns:[{name:"userid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"publishstate",type:"TEXT"},{name:"content",type:"TEXT"},{name:"format",type:"INTEGER"},{name:"created",type:"INTEGER"},{name:"lastmodified",type:"INTEGER"}],primaryKeys:["userid","content","created"]},{name:t.NOTES_DELETED_TABLE,columns:[{name:"noteid",type:"INTEGER",primaryKey:!0},{name:"deleted",type:"INTEGER"},{name:"courseid",type:"INTEGER"}]}]},this.logger=e.getInstance("AddonNotesOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteOfflineNote=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(t.NOTES_TABLE,{userid:e,content:n,created:o})})},e.prototype.getAllDeletedNotes=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.NOTES_DELETED_TABLE)})},e.prototype.getCourseDeletedNotes=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.NOTES_DELETED_TABLE,{courseid:e})})},e.prototype.getAllNotes=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.NOTES_TABLE)})},e.prototype.getNote=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecord(t.NOTES_TABLE,{userid:e,content:n,created:o})})},e.prototype.getNotesForCourseAndUser=function(e,n,o){return n?this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(t.NOTES_TABLE,{userid:n,courseid:e})}):this.getNotesForCourse(e,o)},e.prototype.getNotesForCourse=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.NOTES_TABLE,{courseid:e})})},e.prototype.getNotesForUser=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.NOTES_TABLE,{userid:e})})},e.prototype.getNotesWithPublishState=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.NOTES_TABLE,{publishstate:e})})},e.prototype.hasNotesForCourse=function(e,t){return this.getNotesForCourse(e,t).then(function(e){return!!e.length})},e.prototype.hasNotesForUser=function(e,t){return this.getNotesForUser(e,t).then(function(e){return!!e.length})},e.prototype.hasNotesWithPublishState=function(e,t){return this.getNotesWithPublishState(e,t).then(function(e){return!!e.length})},e.prototype.saveNote=function(e,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var a=l.timeUtils.timestamp(),s={userid:e,courseid:n,publishstate:o,content:r,format:1,created:a,lastmodified:a};return i.getDb().insertRecord(t.NOTES_TABLE,s).then(function(){return s})})},e.prototype.deleteNote=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=r.timeUtils.timestamp(),l={noteid:e,courseid:n,deleted:i};return o.getDb().insertRecord(t.NOTES_DELETED_TABLE,l).then(function(){return l})})},e.prototype.undoDeleteNote=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.NOTES_DELETED_TABLE,{noteid:e})})},e.NOTES_TABLE="addon_notes_offline_notes",e.NOTES_DELETED_TABLE="addon_notes_deleted_offline_notes",e=t=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a,l.a])],e);var t}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(57),i=n(2),l=n(309),a=n(354),s=n(10),u=n(154),c=n(6),d=n(1),f=n(151),p=n(24),h=n(1051),m=n(358),_=n(40),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,n,o,r,i,l,a,s,c){this.file=e,this.fileProvider=t,this.utils=n,this.sitesProvider=r,this.localNotif=i,this.captureHelper=l,this.timeUtils=a,this.appProvider=s,this.localNotifProvider=c,this.name="CoreEmulator",this.priority=u.a.MAX_RECOMMENDED_PRIORITY+500,this.blocking=!0,this.LAST_RECEIVED_NOTIFICATION_TABLE="core_emulator_last_received_notification",this.siteSchema={name:"CoreEmulatorHelperProvider",version:1,tables:[{name:this.LAST_RECEIVED_NOTIFICATION_TABLE,columns:[{name:"component",type:"TEXT"},{name:"id",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["component"]}]},this.logger=o.getInstance("CoreEmulatorHelper"),r.registerSiteSchema(this.siteSchema)}return e.prototype.load=function(){var e=this,t=[];return t.push(this.file.load().then(function(t){e.fileProvider.setHTMLBasePath(t)})),t.push(this.localNotif.load()),t.push(this.captureHelper.load()),window.FileTransferError=h.a,this.utils.allPromises(t)},e.prototype.checkNewNotifications=function(e,t,n,o){var r=this;if(!this.appProvider.isDesktop()||!this.localNotifProvider.isAvailable())return Promise.resolve(null);if(!this.appProvider.isOnline())return this.logger.debug("Cannot check push notifications because device is offline."),Promise.reject(null);return(o?Promise.resolve([o]):this.sitesProvider.getSitesIds()).then(function(o){var i=o.map(function(o){return r.checkNewNotificationsForSite(e,t,n,o)});return Promise.all(i)})},e.prototype.checkNewNotificationsForSite=function(e,t,n,o){var r=this;return this.getLastReceivedNotification(e,o).then(function(i){return t(o).then(function(t){if(i&&t.length){var l=t[0];if(!(l.id==i.id||l.timecreated<=i.timecreated||r.timeUtils.timestamp()-l.timecreated>_.a.SECONDS_DAY))return n(l).then(function(t){l.site=o,l.name=l.name||l.eventtype;return r.localNotifProvider.schedule({id:1,title:t.title,text:t.text,data:l},e,o)})}})})},e.prototype.getLastReceivedNotification=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.LAST_RECEIVED_NOTIFICATION_TABLE,{component:e})}).catch(function(){return!1})},e.prototype.storeLastReceivedNotification=function(e,t,n){var o=this;return t||(t={id:-1,timecreated:0}),this.sitesProvider.getSite(n).then(function(n){var r={component:e,id:t.id,timecreated:t.timecreated};return n.getDb().insertRecord(o.LAST_RECEIVED_NOTIFICATION_TABLE,r)})},e=g([Object(o.A)(),v("design:paramtypes",[l.a,r.a,i.a,c.a,d.a,a.a,m.a,p.a,s.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(148),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,t,n,o,r,i,l,a,s)||this;return d.sitesProvider=o,d.appProvider=r,d.syncProvider=i,d.textUtils=l,d.translate=a,d.timeUtils=s,d.prefetchDelegate=u,d.prefetchHandler=c,d}return r(t,e),t.prototype.prefetchAfterUpdate=function(e,t,n,o){var r=this;return n=n||/^.*files$/,this.prefetchDelegate.getModuleUpdates(e,t,!0,o).then(function(o){if(o&&o.updates&&o.updates.length>0){if(!o.updates.find(function(e){return e.name.match(n)}))return r.prefetchHandler.download(e,t)}})},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=n(391),l=n(14),a=(n.n(l),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.sitesProvider=e,this.dashboardProvider=t,this.ROOT_CACHE_KEY="myoverview:"}return t=e,e.prototype.getActionEventsByCourse=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=l().subtract(14,"days").unix(),a={timesortfrom:i,courseid:e,limitnum:t.EVENTS_LIMIT_PER_COURSE},s={cacheKey:r.getActionEventsByCourseCacheKey(e)};return n&&(a.aftereventid=n),o.read("core_calendar_get_action_events_by_course",a,s).then(function(e){return e&&e.events?r.treatCourseEvents(e,i):Promise.reject(null)})})},e.prototype.getActionEventsByCourseCacheKey=function(e){return this.getActionEventsByCoursesCacheKey()+":"+e},e.prototype.getActionEventsByCourses=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=l().subtract(14,"days").unix(),i={timesortfrom:r,courseids:e,limitnum:t.EVENTS_LIMIT_PER_COURSE},a={cacheKey:o.getActionEventsByCoursesCacheKey()};return n.read("core_calendar_get_action_events_by_courses",i,a).then(function(e){if(e&&e.groupedbycourse){var t={};return e.groupedbycourse.forEach(function(e){t[e.courseid]=o.treatCourseEvents(e,r)}),t}return Promise.reject(null)})})},e.prototype.getActionEventsByCoursesCacheKey=function(){return this.ROOT_CACHE_KEY+"bycourse"},e.prototype.getActionEventsByTimesort=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=l().subtract(14,"days").unix(),i={timesortfrom:r,limitnum:t.EVENTS_LIMIT},a={cacheKey:o.getActionEventsByTimesortCacheKey(e,i.limitnum),getCacheUsingCacheKey:!0,uniqueCacheKey:!0};return e&&(i.aftereventid=e),n.read("core_calendar_get_action_events_by_timesort",i,a).then(function(e){if(e&&e.events){var t=e.events.length>=i.limitnum?e.lastid:void 0;return{events:e.events.filter(function(e){return e.timesort>=r}),canLoadMore:t}}return Promise.reject(null)})})},e.prototype.getActionEventsByTimesortPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"bytimesort:"},e.prototype.getActionEventsByTimesortCacheKey=function(e,t){return e=e||0,t=t||0,this.getActionEventsByTimesortPrefixCacheKey()+e+":"+t},e.prototype.invalidateActionEventsByCourses=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getActionEventsByCoursesCacheKey())})},e.prototype.invalidateActionEventsByTimesort=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getActionEventsByTimesortPrefixCacheKey())})},e.prototype.isAvailable=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return!t.dashboardProvider.isDisabledInSite(e)&&(e.wsAvailable("core_calendar_get_action_events_by_courses")&&e.wsAvailable("core_calendar_get_action_events_by_timesort"))})},e.prototype.treatCourseEvents=function(e,n){var o=e.events.length>=t.EVENTS_LIMIT_PER_COURSE?e.lastid:void 0;return e.events=e.events.filter(function(e){return e.timesort>=n}),{events:e.events,canLoadMore:o}},e.EVENTS_LIMIT=20,e.EVENTS_LIMIT_PER_COURSE=10,e=t=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a])],e);var t}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(3),i=n(10),l=n(4),a=n(11),s=n(72),u=n(149),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.appProvider=e,this.domUtils=t,this.textUtils=n,this.fileUploaderProvider=o,this.translate=r,this.fileUploaderHelper=i}return e.prototype.ngOnInit=function(){this.maxSize=Number(this.maxSize),this.maxSize=!isNaN(this.maxSize)&&this.maxSize>0?this.maxSize:-1,this.maxSizeReadable=-1==this.maxSize?this.translate.instant("core.unknown"):this.textUtils.bytesToSize(this.maxSize,2),void 0===this.maxSubmissions||this.maxSubmissions<0?(this.maxSubmissionsReadable=this.translate.instant("core.unknown"),this.unlimitedFiles=!0):this.maxSubmissionsReadable=String(this.maxSubmissions),this.acceptedTypes=this.acceptedTypes&&this.acceptedTypes.trim(),this.acceptedTypes&&"*"!=this.acceptedTypes&&(this.fileTypes=this.fileUploaderProvider.prepareFiletypeList(this.acceptedTypes))},e.prototype.add=function(){var e=this,t=this.allowOffline&&"false"!==this.allowOffline;if(t||this.appProvider.isOnline()){this.fileUploaderHelper.selectFile(this.maxSize,t,void 0,this.fileTypes&&this.fileTypes.mimetypes).then(function(t){e.files.push(t)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"Error selecting file.")})}else this.domUtils.showErrorModal("core.fileuploader.errormustbeonlinetoupload",!0)},e.prototype.delete=function(e,t){var n=this;(t?this.domUtils.showDeleteConfirm("core.confirmdeletefile"):Promise.resolve()).then(function(){n.files.splice(e,1)}).catch(function(){})},e.prototype.renamed=function(e,t){this.files[e]=t.file},c([Object(o.D)(),d("design:type",Array)],e.prototype,"files",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"maxSize",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"maxSubmissions",void 0),c([Object(o.D)(),d("design:type",String)],e.prototype,"component",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"componentId",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"allowOffline",void 0),c([Object(o.D)(),d("design:type",String)],e.prototype,"acceptedTypes",void 0),c([Object(o.D)(),d("design:type",Boolean)],e.prototype,"required",void 0),e=c([Object(o.m)({selector:"core-attachments",templateUrl:"core-attachments.html"}),d("design:paramtypes",[i.a,l.a,a.a,s.a,r.c,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),r=n(3),i=n(10),l=n(9),a=n(6),s=n(1),u=n(81),c=n(11),d=n(24),f=n(2),p=n(13),h=n(65),m=n(184),_=n(148),g=n(77),v=n(133),y=n(166),b=n(152),P=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_){var g=e.call(this,"AddonModAssignSyncProvider",t,n,o,r,i,l,a)||this;return g.courseProvider=s,g.eventsProvider=u,g.assignProvider=c,g.assignOfflineProvider=d,g.utils=f,g.submissionDelegate=p,g.feedbackDelegate=h,g.gradesHelper=m,g.logHelper=_,g.componentTranslate=s.translateModuleName("assign"),g}return P(t,e),n=t,t.prototype.getSelectedScaleId=function(e,t){var n=e.split(",");(n=n.map(function(e){return e.trim()})).unshift("");var o=e.indexOf(t)||0;return o<0?0:o},t.prototype.hasDataToSync=function(e,t){return this.assignOfflineProvider.hasAssignOfflineData(e,t)},t.prototype.syncAllAssignments=function(e,t){return this.syncOnSites("all assignments",this.syncAllAssignmentsFunc.bind(this),[t],e)},t.prototype.syncAllAssignmentsFunc=function(e,t){var o=this;return this.assignOfflineProvider.getAllAssigns(e).then(function(r){var i=r.map(function(r){return(t?o.syncAssign(r,e):o.syncAssignIfNeeded(r,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{assignId:r,warnings:t.warnings},e)})});return Promise.all(i)})},t.prototype.syncAssignIfNeeded=function(e,t){var n=this;return this.isSyncNeeded(e,t).then(function(o){if(o)return n.syncAssign(e,t)})},t.prototype.syncAssign=function(e,t){var n=this;t=t||this.sitesProvider.getCurrentSiteId();var o,r,i,l=[],a={warnings:[],updated:!1};return this.isSyncing(e,t)?this.getOngoingSync(e,t):this.syncProvider.isBlocked(g.a.COMPONENT,e,t)?(this.logger.debug("Cannot sync assign "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync assign "+e+" in site "+t),l.push(this.assignOfflineProvider.getAssignSubmissions(e,t).catch(function(){return[]})),l.push(this.assignOfflineProvider.getAssignSubmissionsGrade(e,t).catch(function(){return[]})),l.push(this.logHelper.syncIfNeeded(g.a.COMPONENT,e,t)),i=Promise.all(l).then(function(i){var l=i[0],s=i[1];if(l.length||s.length)return n.appProvider.isOnline()?(r=l.length>0?l[0].courseid:s[0].courseid,n.assignProvider.getAssignmentById(r,e,!1,t).then(function(e){o=e;var i=[];return l.forEach(function(e){i.push(n.syncSubmission(o,e,a.warnings,t).then(function(){a.updated=!0}))}),s.forEach(function(e){i.push(n.syncSubmissionGrade(o,e,a.warnings,r,t).then(function(){a.updated=!0}))}),Promise.all(i)}).then(function(){if(a.updated)return n.assignProvider.invalidateContent(o.cmid,r,t).catch(function(){})})):Promise.reject(null)}).then(function(){return n.setSyncTime(e,t).catch(function(){})}).then(function(){return a}),this.addOngoingSync(e,i,t))},t.prototype.syncSubmission=function(e,t,n,o){var r,i,l=this,a=t.userid,s={};return this.assignProvider.getSubmissionStatus(e.id,a,void 0,!1,!0,!0,o).then(function(n){var u=[];if((i=l.assignProvider.getSubmissionObjectFromAttempt(e,n.lastattempt)).timemodified==t.onlinetimemodified)return i.plugins.forEach(function(n){u.push(l.submissionDelegate.preparePluginSyncData(e,i,n,t,s,o))}),Promise.all(u).then(function(){return(Object.keys(s).length?l.assignProvider.saveSubmissionOnline(e.id,s,o):Promise.resolve()).then(function(){if(e.submissiondrafts&&t.submitted)return l.assignProvider.submitForGradingOnline(e.id,t.submissionstatement,o)}).then(function(){l.assignProvider.getSubmissionStatus(e.id,a,void 0,!1,!0,!0,o)})}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);r=l.textUtils.getErrorMessageFromError(e)});r=l.translate.instant("addon.mod_assign.warningsubmissionmodified")}).then(function(){return l.assignOfflineProvider.deleteSubmission(e.id,a,o).then(function(){var n=[];return i.plugins.forEach(function(r){n.push(l.submissionDelegate.deletePluginOfflineData(e,i,r,t,o))}),Promise.all(n)})}).then(function(){if(r){var t=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:r});-1==n.indexOf(t)&&n.push(t)}})},t.prototype.syncSubmissionGrade=function(e,t,n,o,r){var i,l=this,a=t.userid;return this.assignProvider.getSubmissionStatus(e.id,a,void 0,!1,!0,!0,r).then(function(n){if(!((n.feedback&&(n.feedback.gradeddate||n.feedback.grade.timemodified))>t.timemodified))return l.gradesHelper.getGradeModuleItems(o,e.cmid,a,void 0,r,!0).then(function(n){return l.courseProvider.getModuleBasicGradeInfo(e.cmid,r).then(function(e){n.forEach(function(n){n.gradedategraded>=t.timemodified&&(n.outcomeid||n.scaleid?n.outcomeid&&l.assignProvider.isOutcomesEditEnabled()&&e.outcomes&&e.outcomes.forEach(function(e,o){e.scale&&n.itemnumber==o&&(t.outcomes[n.itemnumber]=l.getSelectedScaleId(e.scale,e.selected))}):t.grade=e&&e.scale?l.getSelectedScaleId(e.scale,n.gradeformatted):parseFloat(n.gradeformatted)||null)})})}).then(function(){return l.assignProvider.submitGradingFormOnline(e.id,a,t.grade,t.attemptnumber,t.addattempt,t.workflowstate,t.applytoall,t.outcomes,t.plugindata,r).then(function(){var t=[];return n.feedback&&n.feedback.plugins&&n.feedback.plugins.forEach(function(n){t.push(l.feedbackDelegate.discardPluginFeedbackData(e.id,a,n,r))}),t.push(l.assignProvider.getSubmissionStatus(e.id,a,void 0,!1,!0,!0,r)),Promise.all(t)}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);i=l.textUtils.getErrorMessageFromError(e)})});i=l.translate.instant("addon.mod_assign.warningsubmissiongrademodified")}).then(function(){return l.assignOfflineProvider.deleteSubmissionGrade(e.id,a,r)}).then(function(){if(i){var t=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:i});-1==n.indexOf(t)&&n.push(t)}})},t.AUTO_SYNCED="addon_mod_assign_autom_synced",t=n=O([Object(o.A)(),E("design:paramtypes",[a.a,s.a,i.a,u.a,c.a,r.c,d.a,p.a,l.a,g.a,v.a,f.a,y.a,b.a,m.a,h.a])],t);var n}(_.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(79),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.sanitizer=e,this.textSupplied=!1}return e.prototype.ngOnChanges=function(e){e.text&&void 0!==e.text.currentValue&&(this.textSupplied=!0),e.progress&&("string"==typeof this.progress&&(this.progress=parseInt(this.progress,10)),(this.progress<0||isNaN(this.progress))&&(this.progress=-1),-1!=this.progress&&(this.progress=Math.floor(this.progress),this.textSupplied||(this.text=String(this.progress)),this.width=this.sanitizer.bypassSecurityTrustStyle(this.progress+"%")))},i([Object(o.D)(),l("design:type",Object)],e.prototype,"progress",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"text",void 0),e=i([Object(o.m)({selector:"core-progress-bar",templateUrl:"core-progress-bar.html",changeDetection:o.i.OnPush}),l("design:paramtypes",[r.c])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(153),l=n(9),a=n(1),s=n(28),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},f=function(){function e(e,t,n,r,a){var s=this;this.navCtrl=e,this.commentsProvider=t,this.svComponent=a,this.area="",this.displaySpinner=!0,this.commentsLoaded=!1,this.countError=!1,this.disabled=!1,this.onLoading=new o.v,this.disabled=this.commentsProvider.areCommentsDisabledInSite(),this.updateSiteObserver=r.on(l.a.SITE_UPDATED,function(){var e=s.disabled;s.disabled=s.commentsProvider.areCommentsDisabledInSite(),e&&!s.disabled&&s.fetchData()},n.getCurrentSiteId()),this.refreshCommentsObserver=r.on(i.a.REFRESH_COMMENTS_EVENT,function(e){s.undefinedOrEqual(e,"contextLevel")&&s.undefinedOrEqual(e,"instanceId")&&s.undefinedOrEqual(e,"component")&&s.undefinedOrEqual(e,"itemId")&&s.undefinedOrEqual(e,"area")&&s.doRefresh().catch(function(){})},n.getCurrentSiteId()),this.commentsCountObserver=r.on(i.a.COMMENTS_COUNT_CHANGED_EVENT,function(e){if(!s.commentsCount.endsWith("+")&&s.undefinedOrEqual(e,"contextLevel")&&s.undefinedOrEqual(e,"instanceId")&&s.undefinedOrEqual(e,"component")&&s.undefinedOrEqual(e,"itemId")&&s.undefinedOrEqual(e,"area")&&!s.countError){var t=parseInt(s.commentsCount,10)+e.countChange;s.commentsCount=(t=t>=0?t:0)+""}},n.getCurrentSiteId())}return e.prototype.ngOnInit=function(){this.fetchData()},e.prototype.ngOnChanges=function(e){e&&this.commentsLoaded&&this.fetchData()},e.prototype.fetchData=function(){var e=this;this.disabled||(this.commentsLoaded=!1,this.onLoading.emit(!0),this.commentsProvider.getCommentsCount(this.contextLevel,this.instanceId,this.component,this.itemId,this.area).then(function(t){e.commentsCount=t,e.countError=parseInt(e.commentsCount,10)<0,e.commentsLoaded=!0,e.onLoading.emit(!1)}))},e.prototype.doRefresh=function(){var e=this;return this.invalidateComments().then(function(){return e.fetchData()})},e.prototype.invalidateComments=function(){return this.commentsProvider.invalidateCommentsData(this.contextLevel,this.instanceId,this.component,this.itemId,this.area)},e.prototype.openComments=function(e){if(e&&(e.preventDefault(),e.stopPropagation()),!this.disabled&&!this.countError){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreCommentsViewerPage",{contextLevel:this.contextLevel,instanceId:this.instanceId,componentName:this.component,itemId:this.itemId,area:this.area,title:this.title,courseId:this.courseId})}},e.prototype.ngOnDestroy=function(){this.updateSiteObserver&&this.updateSiteObserver.off(),this.refreshCommentsObserver&&this.refreshCommentsObserver.off(),this.commentsCountObserver&&this.commentsCountObserver.off()},e.prototype.undefinedOrEqual=function(e,t){return void 0===e[t]||e[t]==this[t]},u([Object(o.D)(),c("design:type",String)],e.prototype,"contextLevel",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"instanceId",void 0),u([Object(o.D)(),c("design:type",String)],e.prototype,"component",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"itemId",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"area",void 0),u([Object(o.D)(),c("design:type",String)],e.prototype,"title",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"displaySpinner",void 0),u([Object(o.O)(),c("design:type",o.v)],e.prototype,"onLoading",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"courseId",void 0),e=u([Object(o.m)({selector:"core-comments",templateUrl:"core-comments.html"}),d(4,Object(o.N)()),c("design:paramtypes",[r.s,i.a,a.a,l.a,s.a])],e)}()},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,l.b,l.a)),i._30(1,114688,null,0,a.a,[s.a,i.t,i.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,i._44(t,1)._paused)})}function r(e){return i._57(0,[i._52(402653184,1,{iframe:0}),(e()(),i._31(1,0,null,null,13,"div",[],[[2,"core-loading-container",null]],null,null,null,null)),i._30(2,278528,null,0,u.n,[i.F,i.t,i.W],{ngStyle:[0,"ngStyle"]},null),i._48(3,{width:0,height:1}),(e()(),i._55(-1,null,["\n    "])),(e()(),i._31(5,0,[[1,0],["iframe",1]],null,2,"iframe",[["class","core-iframe"]],[[8,"hidden",0],[8,"src",5],[1,"allowfullscreen",0]],null,null,null,null)),i._30(6,278528,null,0,u.n,[i.F,i.t,i.W],{ngStyle:[0,"ngStyle"]},null),i._48(7,{width:0,height:1}),(e()(),i._55(-1,null,["\n    "])),(e()(),i._31(9,0,null,null,4,"span",[["class","core-loading-spinner"]],null,null,null,null,null)),(e()(),i._55(-1,null,["\n        "])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(12,16384,null,0,u.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,["\n    "])),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,e(t,3,0,n.iframeWidth,n.iframeHeight));e(t,6,0,e(t,7,0,n.iframeWidth,n.iframeHeight));e(t,12,0,n.loading)},function(e,t){var n=t.component;e(t,1,0,n.loading);e(t,5,0,n.loading,n.safeUrl,n.allowFullscreen?"allowfullscreen":null)})}n.d(t,"a",function(){return y}),t.b=r;var i=n(0),l=n(121),a=n(101),s=n(8),u=n(7),c=n(257),d=n(6),f=n(44),p=n(4),h=n(79),m=n(21),_=n(22),g=n(2),v=n(28),y=i._29({encapsulation:2,styles:[],data:{}});i._27("core-iframe",c.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-iframe",[],null,null,null,r,y)),i._30(1,638976,null,0,c.a,[d.a,f.a,p.a,h.c,m.a,_.a,g.a,[2,v.a]],null,null)],function(e,t){e(t,1,0)},null)},{src:"src",iframeWidth:"iframeWidth",iframeHeight:"iframeHeight",allowFullscreen:"allowFullscreen"},{loaded:"loaded"},[])},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(28),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},u=function(){function e(e,t){this.navCtrl=e,this.svComponent=t}return e.prototype.openTag=function(e){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreTagIndexPage",{tagId:e.id,tagName:e.rawname,collectionId:e.tagcollid,fromContextId:e.taginstancecontextid})},l([Object(o.D)(),a("design:type",Array)],e.prototype,"tags",void 0),e=l([Object(o.m)({selector:"core-tag-list",templateUrl:"core-tag-list.html"}),s(1,Object(o.N)()),a("design:paramtypes",[r.s,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(98),i=n(9),l=n(6),a=n(1),s=n(2),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var l=e.call(this,"CoreSettingsDelegate",t,n,o)||this;return l.loggerProvider=t,l.sitesProvider=n,l.eventsProvider=o,l.utils=r,l.siteHandlers=[],o.on(i.a.LOGOUT,l.clearSiteHandlers.bind(l)),l}return u(t,e),t.prototype.clearSiteHandlers=function(){this.siteHandlers=[]},t.prototype.getHandlers=function(){return this.siteHandlers},t.prototype.updateData=function(){var e=[];for(var t in this.enabledHandlers){var n=this.enabledHandlers[t],o=n.getDisplayData();e.push({data:o,priority:n.priority})}e.sort(function(e,t){return t.priority-e.priority}),this.siteHandlers=e.map(function(e){return e.data})},t=c([Object(o.A)(),d("design:paramtypes",[l.a,a.a,i.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(66),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t,n){this.mimetypeUtils=e,this.utils=t,this.canDownload=!0,this.showSize=!0,this.showTime=!0,this.showInline=!1,this.differ=n.find([]).create()}return e.prototype.ngOnInit=function(){this.utils.isTrueOrOne(this.showInline)&&this.renderInlineFiles()},e.prototype.ngDoCheck=function(){if(this.utils.isTrueOrOne(this.showInline)){this.differ.diff(this.files)&&this.renderInlineFiles()}},e.prototype.renderInlineFiles=function(){var e=this;this.contentText=this.files.reduce(function(t,n){var o=e.mimetypeUtils.getEmbeddedHtml(n);return o?t+"<br>"+o:t},"")},l([Object(o.D)(),a("design:type",Array)],e.prototype,"files",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"component",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"componentId",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"alwaysDownload",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"canDownload",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"showSize",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"showTime",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"showInline",void 0),e=l([Object(o.m)({selector:"core-files",templateUrl:"core-files.html"}),a("design:paramtypes",[r.a,i.a,o.F])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(40),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.enabled=!1,this.loading=!0,this.canTrustDownload=!1,this.statusDownloaded=r.a.DOWNLOADED,this.statusNotDownloaded=r.a.NOT_DOWNLOADED,this.statusOutdated=r.a.OUTDATED,this.statusDownloading=r.a.DOWNLOADING,this.action=new o.v}return e.prototype.download=function(e,t){e.preventDefault(),e.stopPropagation(),this.action.emit(t)},i([Object(o.D)(),l("design:type",String)],e.prototype,"status",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"enabled",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"loading",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"canTrustDownload",void 0),i([Object(o.O)(),l("design:type",o.v)],e.prototype,"action",void 0),e=i([Object(o.m)({selector:"core-download-refresh",templateUrl:"core-download-refresh.html"}),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(6),i=n(1),l=n(148),a=n(10),s=n(2),u=n(11),c=n(24),d=n(292),f=n(97),p=n(217),h=n(9),m=n(3),_=n(13),g=n(65),v=n(81),y=n(236),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var _=e.call(this,"AddonModDataSyncProvider",n,t,o,c,d,a,f)||this;return _.sitesProvider=t,_.loggerProvider=n,_.appProvider=o,_.dataOffline=r,_.eventsProvider=i,_.dataProvider=l,_.translate=a,_.utils=s,_.textUtils=d,_.dataHelper=p,_.logHelper=h,_.ratingSync=m,_.componentTranslate=u.translateModuleName("data"),_}return b(t,e),n=t,t.prototype.hasDataToSync=function(e,t){return this.dataOffline.hasOfflineData(e,t)},t.prototype.syncAllDatabases=function(e,t){return this.syncOnSites("all databases",this.syncAllDatabasesFunc.bind(this),[t],e)},t.prototype.syncAllDatabasesFunc=function(e,t){var o=this;e=e||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.dataOffline.getAllEntries(e).then(function(r){var i={};return r.forEach(function(r){void 0===i[r.dataid]&&(i[r.dataid]=t?o.syncDatabase(r.dataid,e):o.syncDatabaseIfNeeded(r.dataid,e),i[r.dataid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{dataId:r.dataid,warnings:t.warnings},e)}))}),Promise.all(o.utils.objectToArray(i))})),r.push(this.syncRatings(void 0,t,e)),Promise.all(r)},t.prototype.syncDatabaseIfNeeded=function(e,t){var n=this;return this.isSyncNeeded(e,t).then(function(o){if(o)return n.syncDatabase(e,t)})},t.prototype.syncDatabase=function(e,t){var n=this;if(t=t||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,t))return this.getOngoingSync(e,t);if(this.syncProvider.isBlocked(f.a.COMPONENT,e,t))return this.logger.debug("Cannot sync database '"+e+"' because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync data '"+e+"' in site "+t+"'");var o,r,i={warnings:[],updated:!1},l=this.logHelper.syncIfNeeded(f.a.COMPONENT,e,t).catch(function(){}).then(function(){return n.dataOffline.getDatabaseEntries(e,t).catch(function(){return[]})}).then(function(l){if(l.length)return n.appProvider.isOnline()?(o=l[0].courseid,n.dataProvider.getDatabaseById(o,e,t).then(function(e){r=e;var o={};l.forEach(function(e){void 0===o[e.entryid]&&(o[e.entryid]=[]),o[e.entryid].push(e)});var a=n.utils.objectToArray(o).map(function(e){return n.syncEntry(r,e,i,t)});return Promise.all(a)}).then(function(){if(i.updated)return n.dataProvider.invalidateContent(r.cmid,o,t).catch(function(){})})):Promise.reject(null)}).then(function(){return n.setSyncTime(e,t)}).then(function(){return i});return this.addOngoingSync(e,l,t)},t.prototype.syncEntry=function(e,t,o,r){var i,l,a,s=this,u=t[0].entryid,c=!1,d=t.find(function(e){return"add"==e.action||"edit"==e.action}),f=t.find(function(e){return"approve"==e.action||"disapprove"==e.action}),p=t.find(function(e){return"delete"==e.action});return u>0?l=this.dataProvider.getEntry(e.id,u,!0,r).then(function(e){return e.entry.timemodified}).catch(function(e){return e&&s.utils.isWebServiceError(e)?Promise.resolve(-1):Promise.reject(e)}):d?(a=u,l=Promise.resolve(0)):l=Promise.resolve(-1),l.then(function(n){if(n<0||n>=t[0].timemodified)return o.updated=!0,i=s.translate.instant("addon.mod_data.warningsubmissionmodified"),s.dataOffline.deleteAllEntryActions(e.id,u,r);if(p)return s.dataProvider.deleteEntryOnline(u,r).then(function(){c=!0}).catch(function(e){if(!e||!s.utils.isWebServiceError(e))return Promise.reject(e);i=s.textUtils.getErrorMessageFromError(e)}).then(function(){return o.updated=!0,s.dataOffline.deleteAllEntryActions(p.dataid,p.entryid,r)});var l;return l=d?Promise.all(d.fields.map(function(e){var t=s.textUtils.parseJSON(e.value);if(t.online||t.offline){var n=t.online||[];return(t.offline?s.dataHelper.getStoredFiles(d.dataid,u,e.fieldid):Promise.resolve([])).then(function(t){return n=n.concat(t),s.dataHelper.uploadOrStoreFiles(d.dataid,0,u,e.fieldid,n,!1,r).then(function(t){e.value=JSON.stringify(t)})})}})).then(function(){return"add"==d.action?s.dataProvider.addEntryOnline(d.dataid,d.fields,d.groupid,r).then(function(e){u=e.newentryid}):s.dataProvider.editEntryOnline(u,d.fields,r)}).catch(function(e){if(!e||!s.utils.isWebServiceError(e))return Promise.reject(e);i=s.textUtils.getErrorMessageFromError(e)}).then(function(){return o.updated=!0,s.dataOffline.deleteEntry(d.dataid,d.entryid,d.action,r)}):Promise.resolve(),f&&(l=l.then(function(){return s.dataProvider.approveEntryOnline(u,"approve"==f.action,r)}).catch(function(e){if(!e||!s.utils.isWebServiceError(e))return Promise.reject(e);i=s.textUtils.getErrorMessageFromError(e)}).then(function(){return o.updated=!0,s.dataOffline.deleteEntry(f.dataid,f.entryid,f.action,r)})),l}).then(function(){if(i){var t=s.translate.instant("core.warningofflinedatadeleted",{component:s.componentTranslate,name:e.name,error:i});-1==o.warnings.indexOf(t)&&o.warnings.push(t)}s.eventsProvider.trigger(n.AUTO_SYNCED,{dataId:e.id,entryId:u,offlineEntryId:a,warnings:o.warnings,deleted:c},r)})},t.prototype.syncRatings=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.ratingSync.syncRatings("mod_data","entry","module",e,0,t,n).then(function(e){var t=!1,r=[],i=[];return e.forEach(function(e){i.push(o.dataProvider.getDatabase(e.itemSet.courseId,e.itemSet.instanceId,n).then(function(i){var l=[];return e.updated.length&&(t=!0,e.updated.forEach(function(e){l.push(o.dataProvider.invalidateEntryData(i.id,e,n))})),e.warnings.length&&e.warnings.forEach(function(e){r.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:i.name,error:e}))}),o.utils.allPromises(l)}))}),Promise.all(i).then(function(){return{updated:t,warnings:r}})})},t.AUTO_SYNCED="addon_mod_data_autom_synced",t=n=P([Object(o.A)(),O("design:paramtypes",[i.a,r.a,a.a,d.a,h.a,f.a,m.c,s.a,_.a,v.a,u.a,c.a,p.a,g.a,y.a])],t);var n}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(1),l=n(2),a=n(13),s=n(65),u=n(53),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r){this.sitesProvider=t,this.courseProvider=n,this.utils=o,this.logHelper=r,this.ROOT_CACHE_KEY="mmaModFolder:",this.logger=e.getInstance("AddonModFolderProvider")}return t=e,e.prototype.getFolder=function(e,t,n){return this.getFolderByKey(e,"coursemodule",t,n)},e.prototype.getFolderByKey=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={courseids:[e]},l={cacheKey:r.getFolderCacheKey(e),updateFrequency:u.a.FREQUENCY_RARELY};return o.read("mod_folder_get_folders_by_courses",i,l).then(function(e){if(e&&e.folders){var o=e.folders.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getFolderCacheKey=function(e){return this.ROOT_CACHE_KEY+"folder:"+e},e.prototype.invalidateContent=function(e,t,n){var o=[];return o.push(this.invalidateFolderData(t,n)),o.push(this.courseProvider.invalidateModule(e,n)),this.utils.allPromises(o)},e.prototype.invalidateFolderData=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getFolderCacheKey(e))})},e.prototype.isGetFolderWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_folder_get_folders_by_courses")},e.prototype.logView=function(e,n,o){return this.logHelper.logSingle("mod_folder_view_folder",{folderid:e},t.COMPONENT,e,n,"folder",{},o)},e.COMPONENT="mmaModFolder",e=t=c([Object(o.A)(),d("design:paramtypes",[r.a,i.a,a.a,l.a,s.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(5),i=n(3),l=n(10),a=n(18),s=n(1),u=n(4),c=n(2),d=n(13),f=n(71),p=n(142),h=n(169),m=n(287),_=n(32),g=n(56),v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p){var m=e.call(this,t,n,o,r,i,l,a,s,u)||this;return m.modalCtrl=c,m.groupsProvider=d,m.lessonProvider=f,m.injector=p,m.name="AddonModLesson",m.modName="lesson",m.component=h.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^grades$|^gradeitems$|^pages$|^answers$|^questionattempts$|^pagesviewed$/,m}return v(t,e),t.prototype.askUserPassword=function(e){var t=this,n=this.modalCtrl.create("AddonModLessonPasswordModalPage");return n.present(),new Promise(function(e,o){n.onDidDismiss(function(n){void 0!==n?e(n):o(t.domUtils.createCanceledError())})})},t.prototype.getDownloadSize=function(e,t,n){var o,r,i,l=this,a=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(t,e.id,!1,!1,a).then(function(e){return o=e,l.getLessonPassword(o.id,!1,!0,n,a)}).then(function(t){r=t.password;var n=(o=t.lesson||o).mediafiles||[];return n=n.concat(l.getIntroFilesFromInstance(e,o)),l.pluginFileDelegate.getFilesSize(n)}).then(function(e){return i=e,l.lessonProvider.getPages(o.id,r,!1,!1,a)}).then(function(e){return e.forEach(function(e){i.size+=e.filessizetotal}),i})},t.prototype.getLessonPassword=function(e,t,n,o,r){var i=this;return r=r||this.sitesProvider.getCurrentSiteId(),this.lessonProvider.getAccessInformation(e,t,n,r).then(function(l){if(l.preventaccessreasons&&l.preventaccessreasons.length){return 1==l.preventaccessreasons.length&&i.lessonProvider.isPasswordProtected(l)?i.lessonProvider.getStoredPassword(e).catch(function(){}).then(function(o){return o?i.validatePassword(e,l,o,t,n,r):Promise.reject(null)}).catch(function(){return o?i.askUserPassword(l).then(function(o){return i.validatePassword(e,l,o,t,n,r)}):Promise.reject(l.preventaccessreasons[0].message)}):Promise.reject(l.preventaccessreasons[0].message)}return{accessInfo:l}})},t.prototype.invalidateContent=function(e,t){var n=[];return n.push(this.lessonProvider.invalidateLessonData(t)),n.push(this.courseProvider.invalidateModule(e)),n.push(this.groupsProvider.invalidateActivityAllowedGroups(e)),Promise.all(n)},t.prototype.invalidateModule=function(e,t){var n=this,o=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(t,e.id,!0,!1,o).then(function(e){var r=[];return r.push(n.lessonProvider.invalidateLessonData(t,o)),r.push(n.lessonProvider.invalidateAccessInformation(e.id,o)),Promise.all(r)})},t.prototype.isDownloadable=function(e,t){var n=this,o=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(t,e.id,!1,!1,o).then(function(e){return n.lessonProvider.getAccessInformation(e.id,!1,!1,o).then(function(t){return!(!t.canviewreports&&!n.lessonProvider.isLessonOffline(e))&&(!t.preventaccessreasons||!t.preventaccessreasons.length||1==t.preventaccessreasons.length&&n.lessonProvider.isPasswordProtected(t))})})},t.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchLesson.bind(this))},t.prototype.prefetchLesson=function(e,t,n,o){var r,i,l,a=this;return this.lessonProvider.getLesson(t,e.id,!1,!0,o).then(function(e){return r=e,a.getLessonPassword(r.id,!1,!0,n,o)}).then(function(t){if(i=t.password,r=t.lesson||r,l=t.accessInfo,a.lessonProvider.isLessonOffline(r)&&!a.lessonProvider.leftDuringTimed(l))return a.lessonProvider.launchRetake(r.id,i,void 0,!1,o).then(function(){var t=[];return t.push(a.filepoolProvider.updatePackageDownloadTime(o,a.component,e.id).catch(function(){})),t.push(a.lessonProvider.getAccessInformation(r.id,!1,!0,o).then(function(e){l=e})),Promise.all(t)})}).then(function(){var t=[],n=l.attemptscount,s=r.mediafiles||[];return s=s.concat(a.getIntroFilesFromInstance(e,r)),t.push(a.filepoolProvider.addFilesToQueue(o,s,a.component,e.id)),a.lessonProvider.isLessonOffline(r)&&(t.push(a.lessonProvider.getPages(r.id,i,!1,!0,o).then(function(t){var n=[],l=!1;return t.forEach(function(t){if(!l)for(var s=0;s<t.jumps.length;s++)if(t.jumps[s]==h.a.LESSON_RANDOMBRANCH){l=!0;break}n.push(a.lessonProvider.getPageData(r,t.page.id,i,!1,!0,!1,!0,void 0,void 0,o).then(function(t){var n=t.contentfiles||[];return t.answers.forEach(function(e){e.answerfiles&&e.answerfiles.length&&(n=n.concat(e.answerfiles)),e.responsefiles&&e.responsefiles.length&&(n=n.concat(e.responsefiles))}),a.filepoolProvider.addFilesToQueue(o,n,a.component,e.id)}))}),n.push(a.lessonProvider.getPagesPossibleJumps(r.id,!1,!0,o).catch(function(e){return l?Promise.reject(a.translate.instant("addon.mod_lesson.errorprefetchrandombranch")):Promise.reject(e)})),Promise.all(n)})),t.push(a.lessonProvider.getTimers(r.id,!1,!0,o).catch(function(){})),t.push(a.lessonProvider.getContentPagesViewedOnline(r.id,n,!1,!0,o)),t.push(a.lessonProvider.getQuestionsAttemptsOnline(r.id,n,!1,void 0,!1,!0,o))),l.canviewreports&&t.push(a.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,o,!0).then(function(t){var n=[];return t.groups.forEach(function(e){n.push(a.lessonProvider.getRetakesOverview(r.id,e.id,!1,!0,o))}),n.push(a.lessonProvider.getRetakesOverview(r.id,0,!1,!0,o).then(function(t){if(t&&t.students){var n=[];return t.students.forEach(function(t){if(t.attempts&&t.attempts.length){var i=t.attempts[t.attempts.length-1];i&&n.push(a.lessonProvider.getUserRetake(r.id,i.try,t.id,!1,!0,o).then(function(t){if(t&&t.answerpages){var n=[];return t.answerpages.forEach(function(e){e.page.qtype==h.a.LESSON_PAGE_ESSAY&&e.answerdata.answers.forEach(function(e){n.push.apply(n,a.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e[0]))})}),a.filepoolProvider.addFilesToQueue(o,n,a.component,e.id)}}))}}),Promise.all(n)}})),Promise.all(n)})),Promise.all(t)})},t.prototype.validatePassword=function(e,t,n,o,r,i){var l=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.lessonProvider.getLessonWithPassword(e,n,!0,o,r,i).then(function(e){return l.lessonProvider.storePassword(e.id,n,i).then(function(){return{password:n,lesson:e,accessInfo:t}})})},t.prototype.sync=function(e,t,n){return this.syncProvider||(this.syncProvider=this.injector.get(m.a)),this.syncProvider.syncLesson(e.instance,!1,!1,n)},t=y([Object(o.A)(),b("design:paramtypes",[i.c,l.a,c.a,d.a,a.a,s.a,u.a,_.a,g.a,r.q,f.a,h.a,o.C])],t)}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(6),i=n(4),l=n(11),a=n(18),s=n(222),u=n(57),c=n(1),d=n(171),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},_=function(){function e(e,t,n,o,r,i,l){this.domUtils=t,this.filepoolProvider=n,this.fileProvider=o,this.textUtils=r,this.wsProvider=i,this.sitesProvider=l,this.logger=e.getInstance("AddonModPageHelperProvider")}return e.prototype.getPageHtml=function(e,t){var n,o,r=this,i={};return e.forEach(function(e){var t=e.fileurl;if(r.isMainPage(e))n=t;else{var o=e.filename;"/"!==e.filepath&&(o=e.filepath.substr(1)+o),i[r.textUtils.decodeURIComponent(o)]=t}}),n?o=this.fileProvider.isAvailable()?this.filepoolProvider.downloadUrl(this.sitesProvider.getCurrentSiteId(),n,!1,s.a.COMPONENT,t):this.sitesProvider.getCurrentSite().checkAndFixPluginfileURL(n):(this.logger.debug("Could not locate the index page"),o=Promise.reject(null)),o.then(function(e){return h(r,void 0,void 0,function(){var t;return m(this,function(n){switch(n.label){case 0:return[4,this.wsProvider.getText(e)];case 1:return t=n.sent(),[2,this.domUtils.restoreSourcesInHtml(t,i)]}})})})},e.prototype.isMainPage=function(e){var t=e.filename||"",n=e.fileurl||"",o="/mod_page/content/index.html",r=encodeURIComponent(o);return"index.html"===t&&(n.indexOf(o)>0||n.indexOf(r)>0)},e=f([Object(o.A)(),p("design:paramtypes",[r.a,i.a,a.a,u.a,l.a,d.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(11),f=n(138),p=n(142),h=n(167),m=n(253),_=n(129),g=n(259),v=n(40),y=n(32),b=n(56),P=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,m,_){var g=e.call(this,t,n,o,r,i,l,a,s,u)||this;return g.injector=c,g.quizProvider=d,g.textUtils=f,g.quizHelper=p,g.accessRuleDelegate=m,g.questionHelper=_,g.name="AddonModQuiz",g.modName="quiz",g.component=h.a.COMPONENT,g.updatesNames=/^configuration$|^.*files$|^grades$|^gradeitems$|^questions$|^attempts$/,g}return P(t,e),t.prototype.download=function(e,t,n,o,r){return void 0===r&&(r=!0),this.prefetch(e,t,o,n,r)},t.prototype.getFiles=function(e,t,n){var o=this;return this.quizProvider.getQuiz(t,e.id).then(function(t){var n=o.getIntroFilesFromInstance(e,t);return o.quizProvider.getUserAttempts(t.id,"all",!0,!1,!0).then(function(e){return o.getAttemptsFeedbackFiles(t,e).then(function(e){return n.concat(e)})})}).catch(function(){return[]})},t.prototype.getAttemptsFeedbackFiles=function(e,t){var n=this,o=[],r=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2"),i=[];return t.forEach(function(t){if(n.quizProvider.isAttemptFinished(t.state)){var l=n.quizProvider.rescaleGrade(t.sumgrades,e,!1);void 0!==l&&o.push(n.quizProvider.getFeedbackForGrade(e.id,Number(l),!0).then(function(e){r&&e.feedbackinlinefiles&&e.feedbackinlinefiles.length?i=i.concat(e.feedbackinlinefiles):e.feedbacktext&&!r&&(i=i.concat(n.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.feedbacktext)))}))}}),Promise.all(o).then(function(){return i})},t.prototype.getPreflightData=function(e,t,n,o,r,i){var l,a=this,s={};if(o)l=this.quizHelper.getAndCheckPreflightData(e,t,s,n,!1,!0,r,i);else{l=this.accessRuleDelegate.getFixedPreflightData(t.activerulenames,e,s,n,!0,i).then(function(){if(!n)return a.quizProvider.startAttempt(e.id,s,!1,i)})}return l.then(function(){return s})},t.prototype.invalidateContent=function(e,t){return this.quizProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.quizProvider.invalidateQuizData(t)),n.push(this.quizProvider.invalidateUserAttemptsForUser(e.instance)),Promise.all(n)},t.prototype.isDownloadable=function(e,t){var n=this;if(this.sitesProvider.getCurrentSite().isOfflineDisabled())return!1;var o=this.sitesProvider.getCurrentSiteId();return this.quizProvider.getQuiz(t,e.id,!1,!1,o).then(function(e){return 1===e.allowofflineattempts&&0!==e.hasquestions&&n.quizProvider.getUserAttempts(e.id,void 0,!0,!1,!1,o).then(function(t){var o=!t.length||n.quizProvider.isAttemptFinished(t[t.length-1].state);return 0===e.attempts||e.attempts>t.length||!o})})},t.prototype.isEnabled=function(){return this.quizProvider.isPluginEnabled()},t.prototype.prefetch=function(e,t,n,o,r){return void 0===r&&(r=!0),e.attemptFinished?(delete e.attemptFinished,Promise.resolve()):this.prefetchPackage(e,t,n,this.prefetchQuiz.bind(this),void 0,r)},t.prototype.prefetchQuiz=function(e,t,n,o,r){var i,l,a,s,u,c=this,d=!1;return this.quizProvider.getQuiz(t,e.id,!1,!0,o).then(function(t){var n=[],r=c.getIntroFilesFromInstance(e,l=t);return n.push(c.quizProvider.getQuizAccessInformation(l.id,!1,!0,o).then(function(e){a=e})),n.push(c.quizProvider.getQuizRequiredQtypes(l.id,!0,o)),n.push(c.quizProvider.getUserAttempts(l.id,"all",!0,!1,!0,o).then(function(t){return i=t,c.getAttemptsFeedbackFiles(l,i).then(function(t){return c.filepoolProvider.addFilesToQueue(o,t,h.a.COMPONENT,e.id)})})),n.push(c.quizProvider.getAttemptAccessInformation(l.id,0,!1,!0,o).then(function(e){s=e})),n.push(c.filepoolProvider.addFilesToQueue(o,r,h.a.COMPONENT,e.id)),Promise.all(n)}).then(function(){var e=i[i.length-1];if(r||e){if(r&&(!e||c.quizProvider.isAttemptFinished(e.state))){if(s.preventnewattemptreasons.length)return Promise.reject(c.textUtils.buildMessage(s.preventnewattemptreasons));d=!0,e=void 0}return c.getPreflightData(l,a,e,n,"core.download",o)}}).then(function(n){u=n;var r=[];return d&&(r.push(c.quizProvider.getUserAttempts(l.id,"all",!0,!1,!0,o).then(function(t){return i=t,c.getAttemptsFeedbackFiles(l,i).then(function(t){return c.filepoolProvider.addFilesToQueue(o,t,h.a.COMPONENT,e.id)})})),r.push(c.filepoolProvider.updatePackageDownloadTime(o,h.a.COMPONENT,e.id).catch(function(){}))),r.push(c.quizProvider.getCombinedReviewOptions(l.id,!0,o)),r.push(c.quizProvider.getUserBestGrade(l.id,!0,o)),r.push(c.quizProvider.getGradeFromGradebook(t,e.id,!0,o).then(function(e){if(void 0!==e.graderaw)return c.quizProvider.getFeedbackForGrade(l.id,e.graderaw,!0,o)}).catch(function(){})),r.push(c.quizProvider.getAttemptAccessInformation(l.id,0,!1,!0,o)),Promise.all(r)}).then(function(){var e=[];return i.forEach(function(t){e.push(c.prefetchAttempt(l,t,u,o))}),Promise.all(e)}).then(function(){r&&(c.syncProvider||(c.syncProvider=c.injector.get(g.a)),c.syncProvider.hasDataToSync(l.id,o).then(function(e){e||c.syncProvider.setSyncTime(l.id,o)}))})},t.prototype.prefetchAttempt=function(e,t,n,o){var r=this,i=this.quizProvider.getPagesFromLayout(t.layout),l=[],a=this.quizProvider.isNavigationSequential(e);if(this.quizProvider.isAttemptFinished(t.state)){var s=this.quizProvider.rescaleGrade(t.sumgrades,e,!1);void 0!==s&&l.push(this.quizProvider.getFeedbackForGrade(e.id,Number(s),!0,o)),i.forEach(function(e){l.push(r.quizProvider.getAttemptReview(t.id,e,!0,o).catch(function(){}))}),l.push(this.quizProvider.getAttemptReview(t.id,-1,!0,o).then(function(n){var i=[];return n.questions.forEach(function(n){i.push(r.questionHelper.prefetchQuestionFiles(n,r.component,e.coursemodule,o,t.uniqueid))}),Promise.all(i)},function(){}))}else l.push(this.quizProvider.getAttemptAccessInformation(e.id,t.id,!1,!0,o)),l.push(this.quizProvider.getAttemptSummary(t.id,n,!1,!0,!1,o)),t.state==h.a.ATTEMPT_IN_PROGRESS&&i.forEach(function(i){a&&i<t.currentpage||l.push(r.quizProvider.getAttemptData(t.id,i,n,!1,!0,o).then(function(n){var i=[];return n.questions.forEach(function(n){i.push(r.questionHelper.prefetchQuestionFiles(n,r.component,e.coursemodule,o,t.uniqueid))}),Promise.all(i)}))});return Promise.all(l)},t.prototype.prefetchQuizAndLastAttempt=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r,i,l,a,s=[];return s.push(this.quizProvider.getQuizAccessInformation(e.id,!1,!0,n).then(function(e){i=e})),s.push(this.quizProvider.getQuizRequiredQtypes(e.id,!0,n)),s.push(this.quizProvider.getCombinedReviewOptions(e.id,!0,n)),s.push(this.quizProvider.getUserBestGrade(e.id,!0,n)),s.push(this.quizProvider.getUserAttempts(e.id,"all",!0,!1,!0,n).then(function(e){r=e})),s.push(this.quizProvider.getGradeFromGradebook(e.course,e.coursemodule,!0,n).then(function(t){if(void 0!==t.graderaw)return o.quizProvider.getFeedbackForGrade(e.id,t.graderaw,!0,n)}).catch(function(){})),s.push(this.quizProvider.getAttemptAccessInformation(e.id,0,!1,!0,n)),Promise.all(s).then(function(){if(a=r[r.length-1])return o.getPreflightData(e,i,a,t,"core.download",n)}).then(function(t){if(l=t,a)return o.prefetchAttempt(e,a,l,n)}).then(function(){return o.setStatusAfterPrefetch(e,r,!0,!1,n)})},t.prototype.setStatusAfterPrefetch=function(e,t,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l,a=[];return t||a.push(this.quizProvider.getUserAttempts(e.id,"all",!0,n,o,r).then(function(e){t=e})),a.push(this.filepoolProvider.getPackageStatus(r,this.component,e.coursemodule).then(function(e){l=e})),Promise.all(a).then(function(){if(l!==v.a.NOT_DOWNLOADED){var n=t[t.length-1],o=!n||i.quizProvider.isAttemptFinished(n.state);return i.filepoolProvider.storePackageStatus(r,o?v.a.NOT_DOWNLOADED:v.a.DOWNLOADED,i.component,e.coursemodule)}})},t.prototype.sync=function(e,t,n){var o=this;return this.syncProvider||(this.syncProvider=this.injector.get(g.a)),this.quizProvider.getQuiz(t,e.id).then(function(t){return o.syncProvider.syncQuiz(t,!1,n).then(function(t){return e.attemptFinished=t&&t.attemptFinished||!1,t}).catch(function(){e.attemptFinished=!1})})},t=O([Object(o.A)(),E("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,y.a,b.a,o.C,h.a,d.a,m.a,_.a,f.a])],t)}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(57),f=n(11),p=n(142),h=n(234),m=n(288),_=n(32),g=n(56),v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p){var m=e.call(this,t,n,o,r,i,l,a,s,u)||this;return m.fileProvider=c,m.textUtils=d,m.scormProvider=f,m.injector=p,m.name="AddonModScorm",m.modName="scorm",m.component=h.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^tracks$/,m}return v(t,e),t.prototype.download=function(e,t,n,o){var r=this.sitesProvider.getCurrentSiteId();return this.prefetchPackage(e,t,!0,this.downloadOrPrefetchScorm.bind(this),r,!1,o)},t.prototype.downloadOrPrefetchScorm=function(e,t,n,o,r,i){var l,a=this;return this.scormProvider.getScorm(t,e.id,e.url,!1,o).then(function(t){var n=[],s=a.getIntroFilesFromInstance(e,l=t);return n.push(a.fetchWSData(l,o).catch(function(){})),n.push(a.downloadOrPrefetchMainFileIfNeeded(l,r,i,o)),n.push(a.filepoolProvider.downloadOrPrefetchFiles(o,s,r,!1,a.component,e.id).catch(function(){})),n.push(a.scormProvider.getAccessInformation(l.id)),Promise.all(n)}).then(function(){return l.sha1hash})},t.prototype.downloadOrPrefetchMainFile=function(e,t,n,o){var r,i=this,l=this.scormProvider.getPackageUrl(e);return this.scormProvider.getScormFolder(e.moduleurl).then(function(a){return r=a,n&&n({message:"core.downloading"}),t?i.filepoolProvider.addToQueueByUrl(o,l,i.component,e.coursemodule,void 0,void 0,i.downloadProgress.bind(i,!0,n)):i.filepoolProvider.downloadUrl(o,l,!0,i.component,e.coursemodule,void 0,i.downloadProgress.bind(i,!0,n))}).then(function(){return i.filepoolProvider.getFilePathByUrl(o,l)}).then(function(e){return n&&n({message:"core.unzipping"}),i.fileProvider.unzipFile(e,r,i.downloadProgress.bind(i,!1,n)).then(function(){return i.filepoolProvider.removeFileByUrl(o,l).catch(function(){})})})},t.prototype.downloadOrPrefetchMainFileIfNeeded=function(e,t,n,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=this.scormProvider.isScormUnsupported(e);return i?Promise.reject(this.translate.instant(i)):this.scormProvider.shouldDownloadMainFile(e,void 0,o).then(function(i){if(i)return r.downloadOrPrefetchMainFile(e,t,n,o)})},t.prototype.downloadProgress=function(e,t,n){t&&n&&n.loaded&&t({downloading:e,progress:n})},t.prototype.fetchWSData=function(e,t){var n=this;t=t||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.scormProvider.getAttemptCountOnline(e.id,void 0,!0,t).catch(function(){return 0}).then(function(o){if(o>0){for(var r=[],i=function(i){r.push(n.scormProvider.getScormUserDataOnline(e.id,i,!0,t).catch(function(e){if(i==o)return Promise.reject(e)}))},l=1;l<=o;l++)i(l);return Promise.all(r)}return n.scormProvider.getScormUserDataOnline(e.id,0,!0,t)})),o.push(this.scormProvider.getScos(e.id,void 0,!0,t)),Promise.all(o)},t.prototype.getDownloadSize=function(e,t,n){var o=this;return this.scormProvider.getScorm(t,e.id,e.url).then(function(e){return o.scormProvider.isScormUnsupported(e)?{size:-1,total:!1}:e.packagesize?{size:e.packagesize,total:!0}:o.scormProvider.calculateScormSize(e).then(function(e){return{size:e,total:!0}})})},t.prototype.getDownloadedSize=function(e,t){var n=this;return this.scormProvider.getScorm(t,e.id,e.url).then(function(e){return n.scormProvider.getScormFolder(e.moduleurl)}).then(function(e){return n.fileProvider.getDirectorySize(e)})},t.prototype.getFiles=function(e,t,n){var o=this;return this.scormProvider.getScorm(t,e.id,e.url).then(function(e){return o.scormProvider.getScormFileList(e)}).catch(function(){return[]})},t.prototype.invalidateContent=function(e,t){return this.scormProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){return this.scormProvider.invalidateScormData(t)},t.prototype.isDownloadable=function(e,t){var n=this;return this.scormProvider.getScorm(t,e.id,e.url).then(function(e){return!e.warningMessage&&!n.scormProvider.isScormUnsupported(e)})},t.prototype.prefetch=function(e,t,n,o,r){var i=this.sitesProvider.getCurrentSiteId();return this.prefetchPackage(e,t,n,this.downloadOrPrefetchScorm.bind(this),i,!0,r)},t.prototype.removeFiles=function(e,t){var n,o=this,r=this.sitesProvider.getCurrentSiteId();return this.scormProvider.getScorm(t,e.id,e.url,!1,r).then(function(e){return n=e,o.scormProvider.getScormFolder(n.moduleurl)}).then(function(e){var t=[];return t.push(o.fileProvider.removeDir(e).catch(function(e){if(!e||1!=e.code)return Promise.reject(e)})),t.push(o.filepoolProvider.removeFileByUrl(r,o.scormProvider.getPackageUrl(n)).catch(function(){})),Promise.all(t)})},t.prototype.sync=function(e,t,n){var o=this;return this.syncProvider||(this.syncProvider=this.injector.get(m.a)),this.scormProvider.getScorm(t,e.id,e.url,!1,n).then(function(e){return o.syncProvider.syncScorm(e,n)})},t=y([Object(o.A)(),b("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,_.a,g.a,d.a,f.a,h.a,o.C])],t)}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(3),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.translate=e}return e.prototype.commaStringToArray=function(e){return"string"==typeof e?e.length>0?e.split(","):[]:e},e.prototype.getParentQuestions=function(e){var t={};return e.forEach(function(e){0===e.parent&&(t[e.id]=e)}),t},e.prototype.formatQuestions=function(e){var t=this,n=this.translate.instant("addon.mod_survey.ipreferthat"),o=this.translate.instant("addon.mod_survey.ifoundthat"),r=this.translate.instant("core.choose"),i=[],l=this.getParentQuestions(e),a=1;return e.forEach(function(e){var s=Object.assign({},e),u=l[s.parent];if(s.multiArray=t.commaStringToArray(s.multi),s.optionsArray=t.commaStringToArray(s.options),u){if(s.required=!0,1!==u.type&&2!==u.type){var c=Object.assign({},s);return s.text=n+" "+s.text,s.name="qP"+s.id,s.num=a++,i.push(s),c.text=o+" "+c.text,c.name="q"+s.id,c.num=a++,void i.push(c)}s.name="q"+(2==u.type?"P":"")+s.id,s.num=a++}else s.multiArray&&0===s.multiArray.length&&(s.name="q"+s.id,s.num=a++,s.type>0&&s.optionsArray.unshift(r));i.push(s)}),i},e=i([Object(o.A)(),l("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=n(4),l=n(15),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.sitesProvider=e,this.domUtils=t,this.contentLinksHelper=n}return e.prototype.open=function(e){var t=this,n=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(e,void 0,void 0,!0,!0).then(function(n){if(!n)return t.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e)}).finally(function(){n.dismiss()})},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(6),i=n(1),l=n(148),a=n(10),s=n(304),u=n(260),c=n(52),d=n(9),f=n(11),p=n(24),h=n(2),m=n(3),_=n(81),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f){var p=e.call(this,"AddonNotesSync",t,n,o,r,i,l,f)||this;return p.notesOffline=a,p.utils=s,p.eventsProvider=u,p.notesProvider=c,p.coursesProvider=d,p}return g(t,e),n=t,t.prototype.syncAllNotes=function(e,t){return this.syncOnSites("all notes",this.syncAllNotesFunc.bind(this),[t],e)},t.prototype.syncAllNotesFunc=function(e,t){var o=this,r=[];return r.push(this.notesOffline.getAllNotes(e)),r.push(this.notesOffline.getAllDeletedNotes(e)),Promise.all(r).then(function(r){var i={};r.forEach(function(e){e.forEach(function(e){i[e.courseid]=e.courseid})});var l=Object.keys(i).map(function(r){var l=parseInt(i[r],10);return(t?o.syncNotes(l,e):o.syncNotesIfNeeded(l,e)).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{courseId:r,warnings:t},e)})});return Promise.all(l)})},t.prototype.syncNotesIfNeeded=function(e,t){var n=this;return this.isSyncNeeded(e,t).then(function(o){if(o)return n.syncNotes(e,t)})},t.prototype.syncNotes=function(e,t){var n=this;if(t=t||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,t))return this.getOngoingSync(e,t);this.logger.debug("Try to sync notes for course "+e);var o=[],r=[],i=[];i.push(this.notesOffline.getNotesForCourse(e,t).then(function(e){if(e.length){if(!n.appProvider.isOnline())return Promise.reject(n.translate.instant("core.networkerrormsg"));var o=[],r=e.map(function(e){return{userid:e.userid,publishstate:e.publishstate,courseid:e.courseid,text:e.content,format:e.format}});return n.notesProvider.addNotesOnline(r,t).then(function(e){e.forEach(function(e){-1===e.noteid&&-1==o.indexOf(e.errormessage)&&o.push(e.errormessage)})}).catch(function(e){if(!n.utils.isWebServiceError(e))return Promise.reject(e);o.push(e)}).then(function(){var o=e.map(function(e){return n.notesOffline.deleteOfflineNote(e.userid,e.content,e.created,t)});return Promise.all(o)})}})),i.push(this.notesOffline.getCourseDeletedNotes(e,t).then(function(o){if(o.length){if(!n.appProvider.isOnline())return Promise.reject(n.translate.instant("core.networkerrormsg"));var i=o.map(function(e){return e.noteid});return n.notesProvider.deleteNotesOnline(i,e,t).catch(function(e){if(!n.utils.isWebServiceError(e))return Promise.reject(e);r.push(e)}).then(function(){var e=o.map(function(e){return n.notesOffline.undoDeleteNote(e,t)});return Promise.all(e)})}}));var l=Promise.all(i).then(function(){return n.notesProvider.invalidateNotes(e,void 0,t).then(function(){return n.notesProvider.getNotes(e,void 0,!1,!0,t)}).catch(function(){})}).then(function(){if(r&&r.length)return n.coursesProvider.getUserCourse(e,!0,t).catch(function(){return{}}).then(function(t){r.forEach(function(r){o.push(n.translate.instant("addon.notes.warningnotenotsent",{course:t.fullname?t.fullname:e,error:r}))})})}).then(function(){return o});return this.addOngoingSync(e,l,t)},t.AUTO_SYNCED="addon_notes_autom_synced",t=n=v([Object(o.A)(),y("design:paramtypes",[r.a,i.a,a.a,_.a,f.a,m.c,s.a,h.a,d.a,u.a,c.a,p.a])],t);var n}(l.a)},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.sitesProvider=e,this.siteSchema={name:"CoreCourseOfflineProvider",version:1,tables:[{name:t.MANUAL_COMPLETION_TABLE,columns:[{name:"cmid",type:"INTEGER",primaryKey:!0},{name:"completed",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"coursename",type:"TEXT"},{name:"timecompleted",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteManualCompletion=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.MANUAL_COMPLETION_TABLE,{cmid:e})})},e.prototype.getAllManualCompletions=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.MANUAL_COMPLETION_TABLE)})},e.prototype.getCourseManualCompletions=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.MANUAL_COMPLETION_TABLE,{courseid:e})})},e.prototype.getManualCompletion=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.MANUAL_COMPLETION_TABLE,{cmid:e})})},e.prototype.markCompletedManually=function(e,n,o,r,i){return this.sitesProvider.getSite(i).then(function(i){var l={cmid:e,completed:n,courseid:o,coursename:r||"",timecompleted:Date.now()};return i.getDb().insertRecord(t.MANUAL_COMPLETION_TABLE,l)}).then(function(){return{status:!0,offline:!0}})},e.MANUAL_COMPLETION_TABLE="course_manual_completion",e=t=i([Object(o.A)(),l("design:paramtypes",[r.a])],e);var t}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(66),l=n(2),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.utils=e,this.mimeUtils=t,this.modalCtrl=n,this.possibleAudioMimeTypes={"audio/webm":"weba","audio/ogg":"ogg"},this.possibleVideoMimeTypes={"video/webm;codecs=vp9":"webm","video/webm;codecs=vp8":"webm","video/ogg":"ogv"},this.win=window}return e.prototype.captureMedia=function(e,t){t=t||{};try{var n=this.utils.promiseDefer(),o={type:e},r=void 0,i=void 0;if("video"==e)r=this.getMimeTypeAndExtension(e,t.mimetypes),o.mimetype=r.mimetype,o.extension=r.extension;else if("audio"==e)r=this.getMimeTypeAndExtension(e,t.mimetypes),o.mimetype=r.mimetype,o.extension=r.extension;else if("image"==e){if(void 0!==t.sourceType&&1!=t.sourceType)return Promise.reject("This source type is not supported in desktop.");1==t.cameraDirection&&(o.facingMode="user"),1==t.encodingType?(o.mimetype="image/png",o.extension="png"):(o.mimetype="image/jpeg",o.extension="jpeg"),t.quality>=0&&t.quality<=100&&(o.quality=t.quality/100),0==t.destinationType&&(o.returnDataUrl=!0)}return t.duration&&(o.maxTime=1e3*t.duration),(i=this.modalCtrl.create("CoreEmulatorCaptureMediaPage",o)).present(),i.onDidDismiss(function(e,t){"success"==t?n.resolve(e):n.reject(e)}),n.promise}catch(e){return Promise.reject(e.toString())}},e.prototype.getMimeTypeAndExtension=function(e,t){var n={};if(t&&t.length)for(var o=0;o<t.length;o++){var r=t[o],i=r.match(new RegExp("^"+e+"/"));if(i&&i.length&&this.win.MediaRecorder.isTypeSupported(r)){n.mimetype=r;break}}return n.mimetype?n.extension=this.mimeUtils.getExtension(n.mimetype):"video"==e?(n.mimetype=this.videoMimeType,n.extension=this.possibleVideoMimeTypes[n.mimetype]):"audio"==e&&(n.mimetype=this.audioMimeType,n.extension=this.possibleAudioMimeTypes[n.mimetype]),n},e.prototype.initGetUserMedia=function(){var e=this,t=navigator;if(void 0===t.mediaDevices&&(t.mediaDevices={}),!t.mediaDevices.getUserMedia){if(t.getUserMedia=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia,!t.getUserMedia)return!1;navigator.mediaDevices.getUserMedia=function(n){var o=e.utils.promiseDefer();return t.getUserMedia(n,o.resolve,o.reject),o.promise}}return!0},e.prototype.initMimeTypes=function(){for(var e in this.possibleVideoMimeTypes)if(this.win.MediaRecorder.isTypeSupported(e)){this.videoMimeType=e;break}for(var e in this.possibleAudioMimeTypes)if(this.win.MediaRecorder.isTypeSupported(e)){this.audioMimeType=e;break}},e.prototype.load=function(){return void 0!==this.win.MediaRecorder&&this.initGetUserMedia()&&this.initMimeTypes(),Promise.resolve()},e=a([Object(o.A)(),s("design:paramtypes",[l.a,i.a,r.q])],e)}()},function(e,t,n){"use strict";var o=n(0),r=n(57),i=n(18),l=n(6),a=n(1),s=n(53),u=n(11),c=n(66),d=n(22),f=n(2),p=n(605),h=function(){function e(e,t,n,o,r,i){this.h5pProvider=e,this.h5pUtils=t,this.textUtils=n,this.utils=o,this.translate=r,this.siteId=i,this.typeMap={text:"validateText",number:"validateNumber",boolean:"validateBoolean",list:"validateList",group:"validateGroup",file:"validateFile",image:"validateImage",video:"validateVideo",audio:"validateAudio",select:"validateSelect",library:"validateLibrary"},this.nextWeight=1,this.libraries={},this.dependencies={},this.relativePathRegExp=/^((\.\.\/){1,2})(.*content\/)?(\d+|editor)\/(.+)$/,this.allowedHtml={}}return e.prototype.addon=function(e){var t=this,n="preloaded-"+e.machineName;return this.dependencies[n]={library:e,type:"preloaded"},this.h5pProvider.findLibraryDependencies(this.dependencies,e,this.nextWeight).then(function(e){t.nextWeight=e,t.dependencies[n].weight=t.nextWeight++})},e.prototype.getDependencies=function(){return this.dependencies},e.prototype.validateMetadata=function(e){var t=this.getMetadataSemantics(),n=this.utils.clone(e||{});return void 0===n.license&&(n.license="U"),this.validateGroup(n,{type:"group",fields:t},!1)},e.prototype.validateText=function(e,t){if("string"!=typeof e&&(e=""),t.tags){var n=["div","span","p","br"].concat(t.tags);-1!=n.indexOf("table")&&(n=n.concat(["tr","td","th","colgroup","thead","tbody","tfoot"])),-1!=n.indexOf("b")&&n.push("strong"),-1!=n.indexOf("i")&&n.push("em"),-1==n.indexOf("ul")&&-1==n.indexOf("ol")||n.push("li"),-1==n.indexOf("del")&&-1==n.indexOf("strike")||n.push("s"),n=this.utils.uniqueArray(n);var o=[];t.font&&(t.font.size&&o.push(/^font-size: *[0-9.]+(em|px|%) *;?$/i),t.font.family&&o.push(/^font-family: *[-a-z0-9," ]+;?$/i),t.font.color&&o.push(/^color: *(#[a-f0-9]{3}[a-f0-9]{3}?|rgba?\([0-9, ]+\)) *;?$/i),t.font.background&&o.push(/^background-color: *(#[a-f0-9]{3}[a-f0-9]{3}?|rgba?\([0-9, ]+\)) *;?$/i),t.font.spacing&&o.push(/^letter-spacing: *[0-9.]+(em|px|%) *;?$/i),t.font.height&&o.push(/^line-height: *[0-9.]+(em|px|%|) *;?$/i)),o.push(/^text-align: *(center|left|right);?$/i),e=this.filterXss(e,n,o)}else e=this.textUtils.escapeHTML(e);return void 0!==t.maxLength&&(e=e.substr(0,t.maxLength)),e},e.prototype.validateContentFiles=function(e,t){return void 0===t&&(t=!1),!0},e.prototype.validateNumber=function(e,t){if(e=Number(e),isNaN(e)&&(e=0),void 0!==t.min&&e<t.min&&(e=t.min),void 0!==t.max&&e>t.max&&(e=t.max),void 0!==t.step){var n=(e-(void 0!==t.min?t.min:0))%t.step;0!==n&&(e-=n)}return void 0!==t.decimals&&(e=e.toFixed(t.decimals)),e},e.prototype.validateBoolean=function(e){return!!e},e.prototype.validateSelect=function(e,t){var n=t.optional,o={},r=!1;if(t.options&&t.options.length&&(r=!0,t.options.forEach(function(e){"optgroup"==e.type?e.options.forEach(function(e){o[e.value]=!0}):e.value&&(o[e.value]=!0)})),t.multiple)for(var i in e){var l=e[i];!r||n||o[l]?e[i]=this.textUtils.escapeHTML(l):delete e[i]}else Array.isArray(e)&&(e=e[0]),!r||n||o[e]||(e=t.options[0].value),e=this.textUtils.escapeHTML(e);return e},e.prototype.validateList=function(e,t){var n=this,o=t.field,r=this[this.typeMap[o.type]].bind(this),i=Promise.resolve(),l=Object.keys(e);return void 0!==t.max&&(l=l.slice(0,t.max)),l.forEach(function(t){isNaN(parseInt(t,10))?delete e[t]:i=i.then(function(){return Promise.resolve(r(e[t],o)).then(function(n){null===n?e.splice(t,1):e[t]=n})})}),i.then(function(){return Array.isArray(e)||(e=n.utils.objectToArray(e)),e.length?e:null})},e.prototype.validateFilelike=function(e,t,n){void 0===n&&(n=[]);var o=e.path.match(this.relativePathRegExp);o&&o.length&&(e.path=o[5]),"#tmp"===e.path.substr(-4,4)&&(e.path=e.path.substr(0,e.path.length-4)),e.path=this.textUtils.escapeHTML(e.path),e.mime&&(e.mime=this.textUtils.escapeHTML(e.mime));var r=["path","mime","copyright"].concat(n);return t.extraAttributes&&(r=r.concat(t.extraAttributes)),r=this.utils.uniqueArray(r),this.filterParams(e,r),void 0!==e.width&&(e.width=parseInt(e.width,10)),void 0!==e.height&&(e.height=parseInt(e.height,10)),e.codecs&&(e.codecs=this.textUtils.escapeHTML(e.codecs)),void 0!==e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)),void 0!==e.quality&&(null===e.quality||void 0===e.quality.level||void 0===e.quality.label?delete e.quality:(this.filterParams(e.quality,["level","label"]),e.quality.level=parseInt(e.quality.level),e.quality.label=this.textUtils.escapeHTML(e.quality.label))),void 0!==e.copyright?this.validateGroup(e.copyright,this.getCopyrightSemantics()).then(function(){return e}):Promise.resolve(e)},e.prototype.validateFile=function(e,t){return this.validateFilelike(e,t)},e.prototype.validateImage=function(e,t){return this.validateFilelike(e,t,["width","height","originalImage"])},e.prototype.validateVideo=function(e,t){var n=this,o=Promise.resolve(),r=function(r){o=o.then(function(){return n.validateFilelike(e[r],t,["width","height","codecs","quality","bitrate"])})};for(var i in e)r(i);return o.then(function(){return e})},e.prototype.validateAudio=function(e,t){var n=this,o=Promise.resolve(),r=function(r){o=o.then(function(){return n.validateFilelike(e[r],t)})};for(var i in e)r(i);return o.then(function(){return e})},e.prototype.validateGroup=function(e,t,n){void 0===n&&(n=!0);var o=!0===t.isSubContent;if(1==t.fields.length&&n&&!o){var r=t.fields[0],i=this[this.typeMap[r.type]].bind(this);return Promise.resolve(i(e,r))}var l=Promise.resolve(),a=function(n){if(o&&"subContentId"==n)return"continue";for(var r=!1,i=null,a=null,u=0;u<t.fields.length;u++)if((a=t.fields[u]).name==n){t.optional&&(a.optional=!0),i=s[s.typeMap[a.type]].bind(s),r=!0;break}r&&i?l=l.then(function(){return Promise.resolve(i(e[n],a)).then(function(t){e[n]=t,null===t&&delete e[n]})}):delete e.key},s=this;for(var u in e)a(u);return l.then(function(){return e})},e.prototype.validateLibrary=function(e,t){var n=this;if(!e.library)return Promise.resolve();var o;if(this.libraries[e.library])o=Promise.resolve(this.libraries[e.library]);else{var r=this.h5pUtils.libraryFromString(e.library);o=this.h5pProvider.loadLibrary(r.machineName,r.majorVersion,r.minorVersion,this.siteId).then(function(t){return n.libraries[e.library]=t,t})}return o.then(function(o){return n.validateGroup(e.params,{type:"group",fields:o.semantics},!1).then(function(t){if(e.params=t,e.metadata)return n.validateMetadata(e.metadata).then(function(t){e.metadata=t})}).then(function(){var r=["library","params","subContentId","metadata"];t.extraAttributes&&(r=n.utils.uniqueArray(r.concat(t.extraAttributes))),n.filterParams(e,r),e.subContentId&&!e.subContentId.match(/^\{?[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}\}?$/)&&delete e.subContentId;var i="preloaded-"+o.machineName;return n.dependencies[i]?e:(n.dependencies[i]={library:o,type:"preloaded"},n.h5pProvider.findLibraryDependencies(n.dependencies,o,n.nextWeight).then(function(t){return n.nextWeight=t,n.dependencies[i].weight=n.nextWeight++,e}))})})},e.prototype.filterParams=function(e,t){for(var n in e)-1==t.indexOf(n)&&delete e[n]},e.prototype.filterXss=function(e,t,n){var o=this;if(!e||"string"!=typeof e)return e;t=t||["a","em","strong","cite","blockquote","code","ul","ol","li","dl","dt","dd"],this.allowedStyles=n,this.filterXssSplit(t,!0);var r=(e=(e=(e=(e=(e=e.replace(/&\s*\{[^}]*(\}\s*;?|$)/g,"")).replace(/&/g,"&amp;")).replace(/&amp;#([0-9]+;)/g,"&#$1")).replace(/&amp;#[Xx]0*((?:[0-9A-Fa-f]{2})+;)/g,"&#x$1")).replace(/&amp;([A-Za-z][A-Za-z0-9]*;)/g,"&$1")).match(/(<(?=[^a-zA-Z!\/])|<!--.*?-->|<[^>]*(>|$)|>)/g);return r&&r.length&&r.forEach(function(t){e=e.replace(t,o.filterXssSplit([t]))}),e},e.prototype.filterXssSplit=function(t,n){if(void 0===n&&(n=!1),n)return this.allowedHtml=this.utils.arrayToObject(t),"";var o=t[0];if("<"!=o.substr(0,1))return"&gt;";if(1==o.length)return"&lt;";var r=o.match(/^<\s*(\/\s*)?([a-zA-Z0-9\-]+)([^>]*)>?|(<!--.*?-->)$/);if(!r)return"";var i=r[1]?r[1].trim():"",l=r[3]||"",a=r[4]||"",s=r[2]||"";if(a&&(s="!--"),!this.allowedHtml[s.toLowerCase()])return"";if(a)return a;if(""!=i)return"</"+s+">";var u=l.replace(/(\s?)\/\s*$/g,"$1"),c=l!=u?" /":"",d=this.filterXssAttributes(u,-1!=e.ALLOWED_STYLEABLE_TAGS.indexOf(s)?this.allowedStyles:null).join(" ");return d=d.replace(/[<>]/g,""),d=d.length?" "+d:"","<"+s+d+c+">"},e.prototype.filterXssAttributes=function(e,t){for(var n=[],o=0,r="",i=!1;0!=e.length;){var l=0,a=void 0,s=void 0;switch(o){case 0:(a=e.match(/^([-a-zA-Z]+)/))&&a.length>1&&(i="style"==(r=a[1].toLowerCase())||"on"==r.substr(0,2),l=o=1,e=e.replace(/^[-a-zA-Z]+/,""));break;case 1:if(e.match(/^\s*=\s*/)){l=1,o=2,e=e.replace(/^\s*=\s*/,"");break}e.match(/^\s+/)&&(l=1,o=0,i||n.push(r),e=e.replace(/^\s+/,""));break;case 2:if((a=e.match(/^"([^"]*)"(\s+|$)/))&&a.length>1){if(t&&"style"===r){for(var u=0;u<t.length;u++){if(a[1].match(t[u])){n.push('style="'+a[1]+'"');break}}break}s=this.filterXssBadProtocol(a[1]),i||n.push(r+'="'+s+'"'),l=1,o=0,e=e.replace(/^"[^"]*"(\s+|$)/,"");break}if((a=e.match(/^'([^']*)'(\s+|$)/))&&a.length>1){s=this.filterXssBadProtocol(a[1]),i||n.push(r+'="'+s+'"'),l=1,o=0,e=e.replace(/^'[^']*'(\s+|$)/,"");break}(a=e.match(/^([^\s\"']+)(\s+|$)/))&&a.length>1&&(s=this.filterXssBadProtocol(a[1]),i||n.push(r+'="'+s+'"'),l=1,o=0,e=e.replace(/^([^\s\"']+)(\s+|$)/,""))}0==l&&(e=e.replace(/^("[^"]*("|$)|\'[^\']*(\'|$)||\S)*\s*/,""),o=0)}return 1!=o||i||n.push(r),n},e.prototype.filterXssBadProtocol=function(e,t){return void 0===t&&(t=!0),t&&(e=this.textUtils.decodeHTMLEntities(e)),this.textUtils.escapeHTML(this.stripDangerousProtocols(e))},e.prototype.stripDangerousProtocols=function(e){var t,n={ftp:!0,http:!0,https:!0,mailto:!0};do{t=e;var o=e.indexOf(":");if(o>0){var r=e.substr(0,o);if(r.match(/[/?#]/))break;n[r.toLowerCase()]||(e=e.substr(o+1))}}while(t!=e);return e},e.prototype.getMetadataSemantics=function(){if(this.metadataSemantics)return this.metadataSemantics;var e=this.getCCVersions();return this.metadataSemantics=[{name:"title",type:"text",label:this.translate.instant("core.h5p.title"),placeholder:"La Gioconda"},{name:"license",type:"select",label:this.translate.instant("core.h5p.license"),default:"U",options:[{value:"U",label:this.translate.instant("core.h5p.undisclosed")},{type:"optgroup",label:this.translate.instant("core.h5p.creativecommons"),options:[{value:"CC BY",label:this.translate.instant("core.h5p.ccattribution"),versions:e},{value:"CC BY-SA",label:this.translate.instant("core.h5p.ccattributionsa"),versions:e},{value:"CC BY-ND",label:this.translate.instant("core.h5p.ccattributionnd"),versions:e},{value:"CC BY-NC",label:this.translate.instant("core.h5p.ccattributionnc"),versions:e},{value:"CC BY-NC-SA",label:this.translate.instant("core.h5p.ccattributionncsa"),versions:e},{value:"CC BY-NC-ND",label:this.translate.instant("core.h5p.ccattributionncnd"),versions:e},{value:"CC0 1.0",label:this.translate.instant("core.h5p.ccpdd")},{value:"CC PDM",label:this.translate.instant("core.h5p.pdm")}]},{value:"GNU GPL",label:this.translate.instant("core.h5p.gpl")},{value:"PD",label:this.translate.instant("core.h5p.pd")},{value:"ODC PDDL",label:this.translate.instant("core.h5p.pddl")},{value:"C",label:this.translate.instant("core.h5p.copyrightstring")}]},{name:"licenseVersion",type:"select",label:this.translate.instant("core.h5p.licenseversion"),options:e,optional:!0},{name:"yearFrom",type:"number",label:this.translate.instant("core.h5p.yearsfrom"),placeholder:"1991",min:"-9999",max:"9999",optional:!0},{name:"yearTo",type:"number",label:this.translate.instant("core.h5p.yearsto"),placeholder:"1992",min:"-9999",max:"9999",optional:!0},{name:"source",type:"text",label:this.translate.instant("core.h5p.source"),placeholder:"https://",optional:!0},{name:"authors",type:"list",field:{name:"author",type:"group",fields:[{label:this.translate.instant("core.h5p.authorname"),name:"name",optional:!0,type:"text"},{name:"role",type:"select",label:this.translate.instant("core.h5p.authorrole"),default:"Author",options:[{value:"Author",label:this.translate.instant("core.h5p.author")},{value:"Editor",label:this.translate.instant("core.h5p.editor")},{value:"Licensee",label:this.translate.instant("core.h5p.licensee")},{value:"Originator",label:this.translate.instant("core.h5p.originator")}]}]}},{name:"licenseExtras",type:"text",widget:"textarea",label:this.translate.instant("core.h5p.licenseextras"),optional:!0,description:this.translate.instant("core.h5p.additionallicenseinfo")},{name:"changes",type:"list",field:{name:"change",type:"group",label:this.translate.instant("core.h5p.changelog"),fields:[{name:"date",type:"text",label:this.translate.instant("core.h5p.date"),optional:!0},{name:"author",type:"text",label:this.translate.instant("core.h5p.changedby"),optional:!0},{name:"log",type:"text",widget:"textarea",label:this.translate.instant("core.h5p.changedescription"),placeholder:this.translate.instant("core.h5p.changeplaceholder"),optional:!0}]}},{name:"authorComments",type:"text",widget:"textarea",label:this.translate.instant("core.h5p.authorcomments"),description:this.translate.instant("core.h5p.authorcommentsdescription"),optional:!0},{name:"contentType",type:"text",widget:"none"},{name:"defaultLanguage",type:"text",widget:"none"}],this.metadataSemantics},e.prototype.getCopyrightSemantics=function(){if(this.copyrightSemantics)return this.copyrightSemantics;var e=this.getCCVersions();return this.copyrightSemantics={name:"copyright",type:"group",label:this.translate.instant("core.h5p.copyrightinfo"),fields:[{name:"title",type:"text",label:this.translate.instant("core.h5p.title"),placeholder:"La Gioconda",optional:!0},{name:"author",type:"text",label:this.translate.instant("core.h5p.author"),placeholder:"Leonardo da Vinci",optional:!0},{name:"year",type:"text",label:this.translate.instant("core.h5p.years"),placeholder:"1503 - 1517",optional:!0},{name:"source",type:"text",label:this.translate.instant("core.h5p.source"),placeholder:"http://en.wikipedia.org/wiki/Mona_Lisa",optional:!0,regexp:{pattern:"^http[s]?://.+",modifiers:"i"}},{name:"license",type:"select",label:this.translate.instant("core.h5p.license"),default:"U",options:[{value:"U",label:this.translate.instant("core.h5p.undisclosed")},{value:"CC BY",label:this.translate.instant("core.h5p.ccattribution"),versions:e},{value:"CC BY-SA",label:this.translate.instant("core.h5p.ccattributionsa"),versions:e},{value:"CC BY-ND",label:this.translate.instant("core.h5p.ccattributionnd"),versions:e},{value:"CC BY-NC",label:this.translate.instant("core.h5p.ccattributionnc"),versions:e},{value:"CC BY-NC-SA",label:this.translate.instant("core.h5p.ccattributionncsa"),versions:e},{value:"CC BY-NC-ND",label:this.translate.instant("core.h5p.ccattributionncnd"),versions:e},{value:"GNU GPL",label:this.translate.instant("core.h5p.licenseGPL"),versions:[{value:"v3",label:this.translate.instant("core.h5p.licenseV3")},{value:"v2",label:this.translate.instant("core.h5p.licenseV2")},{value:"v1",label:this.translate.instant("core.h5p.licenseV1")}]},{value:"PD",label:this.translate.instant("core.h5p.pd"),versions:[{value:"-",label:"-"},{value:"CC0 1.0",label:this.translate.instant("core.h5p.licenseCC010U")},{value:"CC PDM",label:this.translate.instant("core.h5p.pdm")}]},{value:"C",label:this.translate.instant("core.h5p.copyrightstring")}]},{name:"version",type:"select",label:this.translate.instant("core.h5p.licenseversion"),options:[]}]},this.copyrightSemantics},e.prototype.getCCVersions=function(){return[{value:"4.0",label:this.translate.instant("core.h5p.licenseCC40")},{value:"3.0",label:this.translate.instant("core.h5p.licenseCC30")},{value:"2.5",label:this.translate.instant("core.h5p.licenseCC25")},{value:"2.0",label:this.translate.instant("core.h5p.licenseCC20")},{value:"1.0",label:this.translate.instant("core.h5p.licenseCC10")}]},e.ALLOWED_STYLEABLE_TAGS=["span","p","div","h1","h2","h3","td"],e}(),m=n(3);n.d(t,"a",function(){return b});var _=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},b=function(){function e(e,t,n,o,r,i,l,a,s,u){this.sitesProvider=t,this.textUtils=n,this.fileProvider=o,this.mimeUtils=r,this.h5pUtils=i,this.filepoolProvider=l,this.utils=a,this.urlUtils=s,this.translate=u,this.CONTENT_TABLE="h5p_content",this.LIBRARIES_TABLE="h5p_libraries",this.LIBRARY_DEPENDENCIES_TABLE="h5p_library_dependencies",this.CONTENTS_LIBRARIES_TABLE="h5p_contents_libraries",this.LIBRARIES_CACHEDASSETS_TABLE="h5p_libraries_cachedassets",this.aggregateAssets=!0,this.siteSchema={name:"CoreH5PProvider",version:1,canBeCleared:[this.CONTENT_TABLE,this.LIBRARIES_TABLE,this.LIBRARY_DEPENDENCIES_TABLE,this.CONTENTS_LIBRARIES_TABLE,this.LIBRARIES_CACHEDASSETS_TABLE],tables:[{name:this.CONTENT_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"jsoncontent",type:"TEXT",notNull:!0},{name:"mainlibraryid",type:"INTEGER",notNull:!0},{name:"foldername",type:"TEXT",notNull:!0},{name:"fileurl",type:"TEXT",notNull:!0},{name:"filtered",type:"TEXT"},{name:"timecreated",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0}]},{name:this.LIBRARIES_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"machinename",type:"TEXT",notNull:!0},{name:"title",type:"TEXT",notNull:!0},{name:"majorversion",type:"INTEGER",notNull:!0},{name:"minorversion",type:"INTEGER",notNull:!0},{name:"patchversion",type:"INTEGER",notNull:!0},{name:"runnable",type:"INTEGER",notNull:!0},{name:"fullscreen",type:"INTEGER",notNull:!0},{name:"embedtypes",type:"TEXT",notNull:!0},{name:"preloadedjs",type:"TEXT"},{name:"preloadedcss",type:"TEXT"},{name:"droplibrarycss",type:"TEXT"},{name:"semantics",type:"TEXT"},{name:"addto",type:"TEXT"}]},{name:this.LIBRARY_DEPENDENCIES_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"libraryid",type:"INTEGER",notNull:!0},{name:"requiredlibraryid",type:"INTEGER",notNull:!0},{name:"dependencytype",type:"TEXT",notNull:!0}]},{name:this.CONTENTS_LIBRARIES_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"h5pid",type:"INTEGER",notNull:!0},{name:"libraryid",type:"INTEGER",notNull:!0},{name:"dependencytype",type:"TEXT",notNull:!0},{name:"dropcss",type:"INTEGER",notNull:!0},{name:"weight",type:"INTEGER",notNull:!0}]},{name:this.LIBRARIES_CACHEDASSETS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"libraryid",type:"INTEGER",notNull:!0},{name:"hash",type:"TEXT",notNull:!0},{name:"foldername",type:"TEXT",notNull:!0}]}]},this.ROOT_CACHE_KEY="CoreH5P:",this.logger=e.getInstance("CoreH5PProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.cacheAssets=function(e,t,n,o){var r=this,i=[],l=function(l){var s=e[l];if(!s||!s.length)return"continue";var u=t+"."+("scripts"==l?"js":"css"),c=a.textUtils.concatenatePaths(a.getCachedAssetsFolderPath(n,o),u);i.push(a.concatenateFiles(s,l).then(function(e){return r.fileProvider.writeFile(c,e)}).then(function(){e[l]=[{path:r.textUtils.concatenatePaths(r.getCachedAssetsFolderName(),u),version:""}]}))},a=this;for(var s in e)l(s);return Promise.all(i)},e.prototype.canGetTrustedH5PFile=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.canGetTrustedH5PFileInSite(e)})},e.prototype.canGetTrustedH5PFileInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_h5p_get_trusted_h5p_file")},e.prototype.clearFilteredParameters=function(e,t){var n=this;return e&&e.length?this.sitesProvider.getSiteDb(t).then(function(t){var o=t.getInOrEqual(e);return o[0]="mainlibraryid "+o[0],t.updateRecordsWhere(n.CONTENT_TABLE,{filtered:null},o[0],o[1])}):Promise.resolve()},e.prototype.concatenateFiles=function(e,t){var n=this,o=this.fileProvider.getBasePathInstant(),r="",i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return n.fileProvider.readFile(e.path)}).then(function(i){if("scripts"==t)r+=i+";\n";else{var l=i.match(/url\([\'"]?([^"\')]+)[\'"]?\)/gi),a=e.path.replace(/(^\/|\/$)/g,""),s={};l&&l.length&&l.forEach(function(e){var t=e.replace(/(url\(['"]?|['"]?\)$)/gi,"");if(!s[t]&&!t.match(/^(data:|([a-z0-9]+:)?\/)/i)){var r=a.split("/");if(s[t]=t,t.match(/^\.\.\//)){var l=t.split("/").filter(function(e){return e});r.pop(),l.shift(),r[r.length-1]=l[0],l.shift(),t=r.join("/")+"/"+l.join("/")}else r[r.length-1]=t,t=r.join("/");i=i.replace(new RegExp(n.textUtils.escapeForRegex(e),"g"),'url("'+n.textUtils.concatenatePaths(o,t)+'")')}}),r+=i+"\n"}})}),i.then(function(){return r})},e.prototype.createContentIndex=function(e,t,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var a=i.getContentId(e),s=i.fileProvider.getBasePathInstant(),u=i.textUtils.concatenatePaths(s,i.getContentFolderPath(n.folderName,l.getId())),c={library:i.libraryToString(n.library),fullScreen:n.library.fullscreen,exportUrl:"",embedCode:i.getEmbedCode(l.getURL(),t,!0),resizeCode:i.getResizeCode(),title:n.slug,displayOptions:{},url:i.getEmbedUrl(l.getURL(),t),contentUrl:u,metadata:n.metadata,contentUserData:[{state:"{}"}]};return i.getAssets(e,n,o,l.getId()).then(function(t){t.settings.contents[a]=Object.assign(t.settings.contents[a],c);var o=i.getContentIndexPath(n.folderName,r),l="<html><head><title>"+n.title+'</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8">';return t.cssRequires.forEach(function(e){l+='<link rel="stylesheet" type="text/css" href="'+e+'">'}),l+='<script type="text/javascript">var H5PIntegration = '+JSON.stringify(t.settings).replace(/\//g,"\\/")+"<\/script>",l+='<script type="text/javascript" src="'+i.textUtils.concatenatePaths(i.getCoreH5PPath(),"moodle/js/displayoptions.js")+'"><\/script>',l+="</head><body>",l+='<script type="text/javascript" src="'+i.textUtils.concatenatePaths(i.getCoreH5PPath(),"moodle/js/embed.js")+'"><\/script>',t.jsRequires.forEach(function(e){l+='<script type="text/javascript" src="'+e+'"><\/script>'}),l+='<div class="h5p-iframe-wrapper"><iframe id="h5p-iframe-'+e+'" class="h5p-iframe" data-content-id="'+e+'"style="height:1px; min-width: 100%" src="about:blank"></iframe></div></body>',i.fileProvider.writeFile(o,l)}).then(function(e){return e.toURL()})})},e.prototype.deleteCachedAssets=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=t.getDb();return o.getRecords(n.LIBRARIES_CACHEDASSETS_TABLE,{libraryid:e}).then(function(e){var r=[],i=[];return e.forEach(function(e){i.push(e.hash);var o=n.getCachedAssetsFolderPath(e.foldername,t.getId());["js","css"].forEach(function(t){var i=n.textUtils.concatenatePaths(o,e.hash+"."+t);r.push(n.fileProvider.removeFile(i).catch(function(){}))})}),Promise.all(r).then(function(){return o.deleteRecordsList(n.LIBRARIES_CACHEDASSETS_TABLE,"hash",i)})})})},e.prototype.deleteContentByUrl=function(e,t){var n=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getContentDataByUrl(e,t).then(function(e){var o=[];return o.push(n.deleteContentData(e.id,t)),o.push(n.deleteContentFolder(e.foldername,t)),n.utils.allPromises(o)})},e.prototype.deleteContentData=function(e,t){var n=this,o=[];return o.push(this.sitesProvider.getSiteDb(t).then(function(t){return t.deleteRecords(n.CONTENT_TABLE,{id:e})})),o.push(this.deleteLibraryUsage(e,t)),Promise.all(o)},e.prototype.deleteContentFolder=function(e,t){return this.fileProvider.removeDir(this.getContentFolderPath(e,t))},e.prototype.deleteContentIndexesForLibrary=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=t.getDb(),r="SELECT DISTINCT hc.foldername FROM "+n.CONTENTS_LIBRARIES_TABLE+" hcl JOIN "+n.CONTENT_TABLE+" hc ON hcl.h5pid = hc.id WHERE hcl.libraryid = ?",i=[];return i.push(e),o.execute(r,i).then(function(e){for(var o=[],r=0;r<e.rows.length;r++){var i=e.rows.item(r);o.push(n.fileProvider.removeFile(n.getContentIndexPath(i.foldername,t.getId())).catch(function(){}))}return Promise.all(o)})})},e.prototype.deleteLibraryData=function(e,t){var n=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.deleteRecords(n.LIBRARIES_TABLE,{id:e})})},e.prototype.deleteLibraryDependencies=function(e,t){var n=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.deleteRecords(n.LIBRARY_DEPENDENCIES_TABLE,{libraryid:e})})},e.prototype.deleteLibraryFolder=function(e,t,n){return this.fileProvider.removeDir(this.getLibraryFolderPath(e,n,t))},e.prototype.deleteLibraryUsage=function(e,t){var n=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.deleteRecords(n.CONTENTS_LIBRARIES_TABLE,{h5pid:e})})},e.prototype.extractH5PFile=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var i=this.mimeUtils.removeExtension(t.name),l=this.textUtils.concatenatePaths(r.a.TMPFOLDER,"h5p/"+i);return this.fileProvider.unzipFile(t.toURL(),l).then(function(){return o.fileProvider.getDirectoryContents(l)}).then(function(t){return o.processH5PFiles(l,t).then(function(t){var r={};return o.saveLibraries(t.librariesJsonData,i,n).then(function(){var e=function(e){var n=t.mainJsonData.preloadedDependencies[e];if(n.machineName===t.mainJsonData.mainLibrary)return{value:o.getLibraryIdByData(n).then(function(e){n.libraryId=e,r.library=n})}};for(var n in t.mainJsonData.preloadedDependencies){var i=e(n);if("object"==typeof i)return i.value}}).then(function(){return r.params=JSON.stringify(t.contentJsonData),o.saveContentData(r,i,e,n)}).then(function(){var e=o.textUtils.concatenatePaths(l,"content");return o.saveContentInFS(e,i,n).catch(function(e){return o.deleteContentData(r.id,n).catch(function(){}).then(function(){return Promise.reject(e)})})}).then(function(){return o.loadContentData(r.id,void 0,n).then(function(t){var i=o.h5pUtils.determineEmbedType(t.embedType,t.library.embedTypes);return o.createContentIndex(r.id,e,t,i,n)})}).finally(function(){return o.fileProvider.removeDir(l).catch(function(){})})})})},e.prototype.filterParameters=function(e,t){var n=this;if(t=t||this.sitesProvider.getCurrentSiteId(),e.filtered)return Promise.resolve(e.filtered);if(void 0===e.library||void 0===e.params)return Promise.resolve(null);var o={library:this.libraryToString(e.library),params:this.textUtils.parseJSON(e.params,!1)};if(!o.params)return null;var r=new h(this,this.h5pUtils,this.textUtils,this.utils,this.translate,t);return r.validateLibrary(o,{options:[o.library]}).then(function(){return n.loadAddons(t)}).then(function(e){var t=Promise.resolve();return e.forEach(function(e){var i=e.addTo;if(i&&i.content&&i.content.types&&i.content.types.length)for(var l=0;l<i.content.types.length;l++){var a=i.content.types[l];if(a&&a.text&&a.text.regex&&n.h5pUtils.textAddonMatches(o.params,a.text.regex)){t=t.then(function(){return r.addon(e)});break}}}),t}).then(function(){e.dependencies=r.getDependencies();var i=JSON.stringify(o.params);return e.id?n.deleteLibraryUsage(e.id,t).catch(function(){}).then(function(){return n.saveLibraryUsage(e.id,e.dependencies,t)}).then(function(){return e.slug||(e.slug=n.h5pUtils.slugify(e.title)),n.updateContentFields(e.id,{filtered:i},t).then(function(){return i})}):i}).catch(function(){return null})},e.prototype.findLibraryDependencies=function(e,t,n,o,r){var i=this;void 0===n&&(n=1),void 0===o&&(o=!1),r=r||this.sitesProvider.getCurrentSiteId();var l=Promise.resolve();return["dynamic","preloaded","editor"].forEach(function(a){var s=a+"Dependencies";t[s]&&("preloaded"===a&&o&&(a="editor"),t[s].forEach(function(t){l=l.then(function(){var o=a+"-"+t.machineName;if(!e[o])return i.loadLibrary(t.machineName,t.majorVersion,t.minorVersion,r).then(function(t){return e[o]={library:t,type:a},i.findLibraryDependencies(e,t,n,"editor"===a,r)}).then(function(t){n=t,e[o].weight=n++})})}))}),l.then(function(){return n})},e.prototype.fixDisplayOptions=function(e,n){e[t.DISPLAY_OPTION_DOWNLOAD]=!1;var o=this.getOption(t.DISPLAY_OPTION_EMBED,P.ALWAYS_SHOW);return o!=P.ALWAYS_SHOW&&o!=P.NEVER_SHOW||(e[t.DISPLAY_OPTION_EMBED]=o==P.ALWAYS_SHOW),this.getOption(t.DISPLAY_OPTION_FRAME,!0)?(e[t.DISPLAY_OPTION_EMBED]=this.setDisplayOptionOverrides(t.DISPLAY_OPTION_EMBED,O.EMBED_H5P,n,e[t.DISPLAY_OPTION_EMBED]),0==this.getOption(t.DISPLAY_OPTION_COPYRIGHT,!0)&&(e[t.DISPLAY_OPTION_COPYRIGHT]=!1)):e[t.DISPLAY_OPTION_FRAME]=!1,e[t.DISPLAY_OPTION_COPY]=this.hasPermission(O.COPY_H5P,n),e},e.prototype.getAssets=function(e,n,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l,a=[],s=[],u=this.getContentId(e);return this.getCoreSettings(e,r).then(function(e){(l=e).core={styles:[],scripts:[]},l.loadedJs=[],l.loadedCss=[];var o=i.getCoreH5PPath(),u=i.urlUtils.removeProtocolAndWWW(o);return t.STYLES.forEach(function(e){l.core.styles.push(u+e),a.push(o+e)}),i.getScripts().forEach(function(e){l.core.scripts.push(e),s.push(e)}),i.filterParameters(n,r)}).then(function(t){return l.contents=l.contents||{},l.contents[u]=l.contents[u]||{},l.contents[u].jsonContent=t,i.getContentDependencyFiles(e,n.folderName,r)}).then(function(e){return l.contents[u].scripts=i.h5pUtils.getAssetsUrls(e.scripts),l.contents[u].styles=i.h5pUtils.getAssetsUrls(e.styles),{settings:l,cssRequires:a,jsRequires:s}})},e.prototype.getCachedAssets=function(e,t,n){var o={},r=[],i=this.getCachedAssetsFolderName(),l=this.textUtils.concatenatePaths(i,e+".js"),a=this.textUtils.concatenatePaths(i,e+".css"),s=!1;return r.push(this.fileProvider.getFileSize(l).then(function(e){e>0&&(s=!0,o.scripts=[{path:l,version:""}])}).catch(function(){})),r.push(this.fileProvider.getFileSize(a).then(function(e){e>0&&(s=!0,o.styles=[{path:a,version:""}])}).catch(function(){})),Promise.all(r).then(function(){return s?o:null})},e.prototype.getCachedAssetsFolderName=function(){return"cachedassets"},e.prototype.getCachedAssetsFolderPath=function(e,t){return this.textUtils.concatenatePaths(this.getContentFolderPath(e,t),this.getCachedAssetsFolderName())},e.prototype.getContentId=function(e){return"cid-"+e},e.prototype.getContentData=function(e,t){var n=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecord(n.CONTENT_TABLE,{id:e})})},e.prototype.getContentDataByUrl=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o=t.getDb();return n.getContentFolderNameByUrl(e,t.getId()).then(function(e){return o.getRecord(n.CONTENT_TABLE,{foldername:e})},function(){return o.getRecord(n.CONTENT_TABLE,{fileurl:e})})})},e.prototype.getContentFolderPath=function(e,t){return this.textUtils.concatenatePaths(this.getExternalH5PFolderPath(t),"packages/"+e+"/content")},e.prototype.getContentIndexFileUrl=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getContentFolderNameByUrl(e,n).then(function(e){return o.fileProvider.getFile(o.getContentIndexPath(e,n))}).then(function(e){return e.toURL()}).then(function(r){return o.getContentDataByUrl(e,n).then(function(e){var n=o.fixDisplayOptions(o.getDisplayOptionsFromUrlParams(t),e.id);return o.urlUtils.addParamsToUrl(r,n,void 0,!0)})})},e.prototype.getContentIndexPath=function(e,t){return this.textUtils.concatenatePaths(this.getContentFolderPath(e,t),"index.html")},e.prototype.getContentFolderNameByUrl=function(e,t){var n=this;return this.filepoolProvider.getFilePathByUrl(t,e).then(function(e){var t=n.fileProvider.getFileAndDirectoryFromPath(e);return n.mimeUtils.removeExtension(t.name)})},e.prototype.getCoreH5PPath=function(){return this.textUtils.concatenatePaths(this.fileProvider.getWWWPath(),"/h5p/")},e.prototype.getCoreSettings=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(e){var t=n.fileProvider.getBasePathInstant(),o={};return o.xAPIResult="",o.contentUserData="",{baseUrl:n.fileProvider.getWWWPath(),url:n.textUtils.concatenatePaths(t,n.getExternalH5PFolderPath(e.getId())),urlLibraries:n.textUtils.concatenatePaths(t,n.getLibrariesFolderPath(e.getId())),postUserStatistics:!1,ajax:o,saveFreq:!1,siteUrl:e.getURL(),l10n:{H5P:n.h5pUtils.getLocalization()},user:[],hubIsEnabled:!1,reportingIsEnabled:!1,crossorigin:null,libraryConfig:null,pluginCacheBuster:"",libraryUrl:n.textUtils.concatenatePaths(n.getCoreH5PPath(),"js")}})},e.prototype.getContentDependencyFiles=function(e,t,n){var o=this;return this.loadContentDependencies(e,"preloaded",n).then(function(e){return o.getDependenciesFiles(e,t,o.getExternalH5PFolderPath(n),n)})},e.prototype.getDependencyAssets=function(e,t,n,o){if(void 0===o&&(o=""),e[t]&&""!==e[t][0]&&("preloadedCss"!==t||!this.utils.isTrueOrOne(e.dropCss)))for(var r in e[t]){var i=e[t][r];n.push({path:o+"/"+e.path+"/"+("string"!=typeof i?i.path:i).trim(),version:e.version})}},e.prototype.getDependenciesFiles=function(e,t,n,o){var r=this;void 0===n&&(n="");var i={scripts:[],styles:[]};if(!Object.keys(e).length)return Promise.resolve(i);var l,a;return this.aggregateAssets?(a=this.h5pUtils.getDependenciesHash(e),l=this.getCachedAssets(a,t,o)):l=Promise.resolve(null),l.then(function(l){if(l)return Object.assign(i,l);for(var s in e){var u=e[s];u.path||(u.path=r.getDependencyPath(u),u.preloadedJs=u.preloadedJs.split(","),u.preloadedCss=u.preloadedCss.split(",")),u.version="?ver="+u.majorVersion+"."+u.minorVersion+"."+u.patchVersion,r.getDependencyAssets(u,"preloadedJs",i.scripts,n),r.getDependencyAssets(u,"preloadedCss",i.styles,n)}return r.aggregateAssets?r.cacheAssets(i,a,t,o).then(function(){return r.saveCachedAssets(a,e,t,o)}).then(function(){return i}):i})},e.prototype.getDependencyPath=function(e){return"libraries/"+e.machineName+"-"+e.majorVersion+"."+e.minorVersion},e.prototype.getDependencyRoots=function(e,t){var n=this;t=t||this.sitesProvider.getCurrentSiteId();var o={};return this.loadContentDependencies(e,void 0,t).then(function(e){for(var r in e){var i=e[r],l=n.libraryToString(i,!0);o[l]=n.getLibraryFolderPath(i,t,l)}return o})},e.prototype.getDisplayOptionsAsObject=function(e){var n={};return n[t.DISPLAY_OPTION_FRAME]=!(e&t.DISABLE_FRAME),n[t.DISPLAY_OPTION_DOWNLOAD]=!(e&t.DISABLE_DOWNLOAD),n[t.DISPLAY_OPTION_EMBED]=!(e&t.DISABLE_EMBED),n[t.DISPLAY_OPTION_COPYRIGHT]=!(e&t.DISABLE_COPYRIGHT),n[t.DISPLAY_OPTION_ABOUT]=!!this.getOption(t.DISPLAY_OPTION_ABOUT,!0),n},e.prototype.getDisplayOptionsForView=function(e,t){return this.fixDisplayOptions(this.getDisplayOptionsAsObject(e),t)},e.prototype.getDisplayOptionsFromUrlParams=function(e){var n={};return e?(n[t.DISPLAY_OPTION_DOWNLOAD]=this.utils.isTrueOrOne(e[t.DISPLAY_OPTION_DOWNLOAD]),n[t.DISPLAY_OPTION_EMBED]=this.utils.isTrueOrOne(e[t.DISPLAY_OPTION_EMBED]),n[t.DISPLAY_OPTION_COPYRIGHT]=this.utils.isTrueOrOne(e[t.DISPLAY_OPTION_COPYRIGHT]),n[t.DISPLAY_OPTION_FRAME]=n[t.DISPLAY_OPTION_DOWNLOAD]||n[t.DISPLAY_OPTION_EMBED]||n[t.DISPLAY_OPTION_COPYRIGHT],n[t.DISPLAY_OPTION_ABOUT]=!!this.getOption(t.DISPLAY_OPTION_ABOUT,!0),n):n},e.prototype.getEmbedCode=function(e,t,n){return n?'<iframe src="'+this.getEmbedUrl(e,t)+'" allowfullscreen="allowfullscreen"></iframe>':""},e.prototype.getEmbedUrl=function(e,t){return this.textUtils.concatenatePaths(e,"/h5p/embed.php")+"?url="+t},e.prototype.getExternalH5PFolderPath=function(e){return this.textUtils.concatenatePaths(this.fileProvider.getSiteFolder(e),"h5p")},e.prototype.getLibraryData=function(e,t,n){var o,i,l,a,s=this,u=this.textUtils.concatenatePaths(t,"library.json"),c=this.textUtils.concatenatePaths(t,"semantics.json"),d=this.textUtils.concatenatePaths(t,"language"),f=this.textUtils.concatenatePaths(t,"icon.svg"),p=[];return p.push(this.fileProvider.readFile(u,r.a.FORMATJSON).then(function(e){o=e})),p.push(this.fileProvider.readFile(c,r.a.FORMATJSON).then(function(e){i=e}).catch(function(){})),p.push(this.fileProvider.getDirectoryContents(d).then(function(e){var t=[];l={},e.forEach(function(e){var n=s.textUtils.concatenatePaths(d,e.name);t.push(s.fileProvider.readFile(n,r.a.FORMATJSON).then(function(t){var n=e.name.split(".");l[n[0]]=t}))})}).catch(function(){})),p.push(this.fileProvider.getFile(f).then(function(){a=!0}).catch(function(){a=!1})),Promise.all(p).then(function(){return o.semantics=i,o.language=l,o.hasIcon=a,o})},e.prototype.getLibrary=function(e,t,n,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(o){var i={machinename:e};return void 0!==t&&(i.majorversion=t),void 0!==n&&(i.minorversion=n),o.getRecords(r.LIBRARIES_TABLE,i)}).then(function(e){return e.length?r.parseLibDBData(e[0]):Promise.reject(null)})},e.prototype.getLibraryByData=function(e,t){return this.getLibrary(e.machineName,e.majorVersion,e.minorVersion,t)},e.prototype.getLibraryById=function(e,t){var n=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecord(n.LIBRARIES_TABLE,{id:e}).then(function(e){return n.parseLibDBData(e)})})},e.prototype.getLibraryId=function(e,t,n,o){return this.getLibrary(e,t,n,o).then(function(e){return e&&e.id||null}).catch(function(){return null})},e.prototype.getLibraryIdByData=function(e,t){return this.getLibraryId(e.machineName,e.majorVersion,e.minorVersion,t)},e.prototype.getLibrariesFolderPath=function(e){return this.textUtils.concatenatePaths(this.getExternalH5PFolderPath(e),"libraries")},e.prototype.getLibraryFolderPath=function(e,t,n){return n||(n=this.libraryToString(e,!0)),this.textUtils.concatenatePaths(this.getLibrariesFolderPath(t),n)},e.prototype.getOption=function(e,t){return void 0===t&&(t=!1),P.CONTROLLED_BY_AUTHOR_DEFAULT_OFF},e.prototype.getResizeCode=function(){return'<script src="'+this.getResizerScriptUrl()+'"><\/script>'},e.prototype.getResizerScriptUrl=function(){return this.textUtils.concatenatePaths(this.getCoreH5PPath(),"js/h5p-resizer.js")},e.prototype.getScripts=function(){var e=this.getCoreH5PPath(),n=[];return t.SCRIPTS.forEach(function(t){n.push(e+t)}),n},e.prototype.getTrustedH5PFile=function(e,t,n,o){var r=this;return t=t||{},this.sitesProvider.getSite(o).then(function(o){var i={url:r.treatH5PUrl(e,o.getURL()),frame:t.frame?1:0,export:t.export?1:0,embed:t.embed?1:0,copyright:t.copyright?1:0},l={cacheKey:r.getTrustedH5PFileCacheKey(e),updateFrequency:s.a.FREQUENCY_RARELY};return n&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("core_h5p_get_trusted_h5p_file",i,l).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.files&&e.files.length?e.files[0]:Promise.reject(null)})})},e.prototype.getTrustedH5PFileCacheKey=function(e){return this.getTrustedH5PFilePrefixCacheKey()+e},e.prototype.getTrustedH5PFilePrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"trustedH5PFile:"},e.prototype.hasPermission=function(e,t){return null},e.prototype.invalidateAllGetTrustedH5PFile=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getTrustedH5PFilePrefixCacheKey())})},e.prototype.invalidateAvailableInContexts=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getTrustedH5PFileCacheKey(e))})},e.prototype.isOfflineDisabled=function(e){return v(this,void 0,void 0,function(){var t;return y(this,function(n){switch(n.label){case 0:return[4,this.sitesProvider.getSite(e)];case 1:return t=n.sent(),[2,this.isOfflineDisabledInSite(t)]}})})},e.prototype.isOfflineDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_H5POffline")},e.prototype.libraryInstalled=function(e,t){var n=[];return n.push(this.deleteContentIndexesForLibrary(e,t)),this.aggregateAssets&&n.push(this.deleteCachedAssets(e,t)),this.utils.allPromises(n)},e.prototype.libraryToString=function(e,t){return(e.machineName?e.machineName:e.name)+(t?"-":" ")+e.majorVersion+"."+e.minorVersion},e.prototype.loadAddons=function(e){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.execute("SELECT l1.id AS libraryId, l1.machinename AS machineName, l1.majorversion AS majorVersion, l1.minorversion AS minorVersion, l1.patchversion AS patchVersion, l1.addto AS addTo, l1.preloadedjs AS preloadedJs, l1.preloadedcss AS preloadedCss FROM "+t.LIBRARIES_TABLE+" l1 JOIN "+t.LIBRARIES_TABLE+" l2 ON l1.machinename = l2.machinename AND (l1.majorversion < l2.majorversion OR (l1.majorversion = l2.majorversion AND l1.minorversion < l2.minorversion)) WHERE l1.addto IS NOT NULL AND l2.machinename IS NULL").then(function(e){for(var n=[],o=0;o<e.rows.length;o++)n.push(t.parseLibAddonData(e.rows.item(o)));return n})})},e.prototype.loadContentData=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();return(e?this.getContentData(e,n):t?this.getContentDataByUrl(t,n):Promise.reject(null)).then(function(e){return o.getLibraryById(e.mainlibraryid,n).then(function(t){return new h(o,o.h5pUtils,o.textUtils,o.utils,o.translate,n).validateMetadata({}).then(function(n){return{id:e.id,params:e.jsoncontent,embedType:"iframe",disable:null,folderName:e.foldername,title:t.title,slug:o.h5pUtils.slugify(t.title)+"-"+e.id,filtered:e.filtered,libraryMajorVersion:t.majorversion,libraryMinorVersion:t.minorversion,metadata:n,library:{id:t.id,name:t.machinename,majorVersion:t.majorversion,minorVersion:t.minorversion,embedTypes:t.embedtypes,fullscreen:t.fullscreen}}})})})},e.prototype.loadContentDependencies=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(n).then(function(n){var r="SELECT hl.id AS libraryId, hl.machinename AS machineName, hl.majorversion AS majorVersion, hl.minorversion AS minorVersion, hl.patchversion AS patchVersion, hl.preloadedcss AS preloadedCss, hl.preloadedjs AS preloadedJs, hcl.dropcss AS dropCss, hcl.dependencytype as dependencyType FROM "+o.CONTENTS_LIBRARIES_TABLE+" hcl JOIN "+o.LIBRARIES_TABLE+" hl ON hcl.libraryid = hl.id WHERE hcl.h5pid = ?",i=[];return i.push(e),t&&(r+=" AND hcl.dependencytype = ?",i.push(t)),r+=" ORDER BY hcl.weight",n.execute(r,i).then(function(e){for(var t={},n=0;n<e.rows.length;n++){var o=e.rows.item(n);t[o.machineName]=o}return t})})},e.prototype.loadLibrary=function(e,t,n,o){var r=this;return this.getLibrary(e,t,n,o).then(function(e){var t={libraryId:e.id,title:e.title,machineName:e.machinename,majorVersion:e.majorversion,minorVersion:e.minorversion,patchVersion:e.patchversion,runnable:e.runnable,fullscreen:e.fullscreen,embedTypes:e.embedtypes,preloadedJs:e.preloadedjs,preloadedCss:e.preloadedcss,dropLibraryCss:e.droplibrarycss,semantics:e.semantics,preloadedDependencies:[],dynamicDependencies:[],editorDependencies:[]},n="SELECT hl.id, hl.machinename, hl.majorversion, hl.minorversion, hll.dependencytype FROM "+r.LIBRARY_DEPENDENCIES_TABLE+" hll JOIN "+r.LIBRARIES_TABLE+" hl ON hll.requiredlibraryid = hl.id WHERE hll.libraryid = ? ORDER BY hl.id ASC",i=[e.id];return r.sitesProvider.getSiteDb(o).then(function(e){return e.execute(n,i).then(function(e){for(var n=0;n<e.rows.length;n++){var o=e.rows.item(n);t[o.dependencytype+"Dependencies"].push({machineName:o.machinename,majorVersion:o.majorversion,minorVersion:o.minorversion})}return t})})})},e.prototype.parseLibAddonData=function(e){return e.addto=this.textUtils.parseJSON(e.addto,null),e},e.prototype.parseLibDBData=function(e){return e.semantics=this.textUtils.parseJSON(e.semantics,null),e.addto=this.textUtils.parseJSON(e.addto,null),e},e.prototype.processH5PFiles=function(e,t){var n,o,i=this,l=[],a={},s=this.textUtils.concatenatePaths(e,"h5p.json");l.push(this.fileProvider.readFile(s,r.a.FORMATJSON).then(function(e){o=e}));var u=this.textUtils.concatenatePaths(e,"content/content.json");return l.push(this.fileProvider.readFile(u,r.a.FORMATJSON).then(function(e){n=e})),t.forEach(function(t){if("."!=t.name[0]&&"_"!=t.name[0]&&"content"!=t.name&&!t.isFile){var n=i.textUtils.concatenatePaths(e,t.name);l.push(i.getLibraryData(t,n,e).then(function(e){e.uploadDirectory=n,a[i.libraryToString(e)]=e}))}}),Promise.all(l).then(function(){return{librariesJsonData:a,mainJsonData:o,contentJsonData:n}})},e.prototype.saveCachedAssets=function(e,t,n,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(e){var o=[];for(var i in t){o.push(e.insertRecord(r.LIBRARIES_CACHEDASSETS_TABLE,{hash:i,libraryid:t[i].libraryId,foldername:n}))}return Promise.all(o)})},e.prototype.saveContentData=function(e,t,n,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(o){var i={jsoncontent:e.params,mainlibraryid:e.library.libraryId,timemodified:Date.now(),filtered:null,foldername:t,fileurl:n};return void 0!==e.id?i.id=e.id:i.timecreated=i.timemodified,o.insertRecord(r.CONTENT_TABLE,i).then(function(){if(!i.id)return o.getRecord(r.CONTENT_TABLE,i).then(function(t){e.id=t.id})})}).then(function(){return e.id})},e.prototype.saveContentInFS=function(e,t,n){var o=this,r=this.getContentFolderPath(t,n);return this.fileProvider.removeDir(r).catch(function(){}).then(function(){return o.fileProvider.moveDir(e,r)})},e.prototype.saveLibraries=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=[];return this.fileProvider.createDir(this.getLibrariesFolderPath(n)).then(function(){var t=[],r=function(r){var i=e[r];t.push(o.getLibraryByData(i).catch(function(){}).then(function(e){if(!(e&&(i.libraryId=e.id,i.patchVersion<=e.patchversion)))return i.saveDependencies=!0,i.metadataSettings=i.metadataSettings?o.h5pUtils.boolifyAndEncodeMetadataSettings(i.metadataSettings):null,o.saveLibraryData(i,n).then(function(){return o.saveLibraryInFS(i,n).catch(function(e){return o.deleteLibraryData(i.libraryId,n).catch(function(){}).then(function(){return Promise.reject(e)})})}).then(function(){if(void 0!==i.libraryId)return o.libraryInstalled(i.libraryId,n)});i.saveDependencies=!1}))};for(var i in e)r(i);return Promise.all(t)}).then(function(){var t=[],n=function(n){var i=e[n];if(!i.saveDependencies)return"continue";r.push(i.libraryId),t.push(o.deleteLibraryDependencies(i.libraryId).then(function(){var e=[];return void 0!==i.preloadedDependencies&&e.push(o.saveLibraryDependencies(i.libraryId,i.preloadedDependencies,"preloaded")),void 0!==i.dynamicDependencies&&e.push(o.saveLibraryDependencies(i.libraryId,i.dynamicDependencies,"dynamic")),void 0!==i.editorDependencies&&e.push(o.saveLibraryDependencies(i.libraryId,i.editorDependencies,"editor")),Promise.all(e)}))};for(var i in e)n(i);return Promise.all(t)}).then(function(){if(r.length)return o.clearFilteredParameters(r,n)})},e.prototype.saveLibraryInFS=function(e,t){var n=this,o=this.getLibraryFolderPath(e,t);return this.fileProvider.removeDir(o).catch(function(){}).then(function(){return n.fileProvider.moveDir(e.uploadDirectory,o,!0)})},e.prototype.saveLibraryData=function(e,t){var n=this,o=this.h5pUtils.libraryParameterValuesToCsv(e,"preloadedJs","path"),r=this.h5pUtils.libraryParameterValuesToCsv(e,"preloadedCss","path"),i=this.h5pUtils.libraryParameterValuesToCsv(e,"dropLibraryCss","machineName");void 0===e.semantics&&(e.semantics=""),void 0===e.fullscreen&&(e.fullscreen=0);var l="";return void 0!==e.embedTypes&&(l=e.embedTypes.join(", ")),this.sitesProvider.getSite(t).then(function(t){var a=t.getDb(),s={title:e.title,machinename:e.machineName,majorversion:e.majorVersion,minorversion:e.minorVersion,patchversion:e.patchVersion,runnable:e.runnable,fullscreen:e.fullscreen,embedtypes:l,preloadedjs:o,preloadedcss:r,droplibrarycss:i,semantics:void 0!==e.semantics?JSON.stringify(e.semantics):null,addto:void 0!==e.addTo?JSON.stringify(e.addTo):null};return e.libraryId&&(s.id=e.libraryId),a.insertRecord(n.LIBRARIES_TABLE,s).then(function(){return s.id?n.deleteLibraryDependencies(s.id,t.getId()):a.getRecord(n.LIBRARIES_TABLE,s).then(function(t){e.libraryId=t.id})})})},e.prototype.saveLibraryDependencies=function(e,t,n,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(i){var l=[];return t.forEach(function(t){l.push(r.getLibraryIdByData(t,o).then(function(t){return i.insertRecord(r.LIBRARY_DEPENDENCIES_TABLE,{libraryid:e,requiredlibraryid:t,dependencytype:n})}))}),Promise.all(l)})},e.prototype.saveLibraryUsage=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(n).then(function(n){var r={},i=[];for(var l in t){if((a=t[l]).library.dropLibraryCss){a.library.dropLibraryCss.split(", ").forEach(function(e){r[e]=e})}}for(var l in t){var a;i.push(n.insertRecord(o.CONTENTS_LIBRARIES_TABLE,{h5pid:e,libraryId:(a=t[l]).library.libraryId,dependencytype:a.type,dropcss:r[a.library.machineName]?1:0,weight:a.weight}))}return Promise.all(i)})},e.prototype.setDisplayOptionOverrides=function(e,t,n,o){var r=this.getOption(e,P.ALWAYS_SHOW);return r==P.NEVER_SHOW?o=!1:r==P.ALWAYS_SHOW?o=!0:r==P.CONTROLLED_BY_PERMISSIONS&&(o=this.hasPermission(t,n)),o},e.prototype.treatH5PUrl=function(e,t){return 0===e.indexOf(this.textUtils.concatenatePaths(t,"/webservice/pluginfile.php"))&&(e=e.replace("/webservice/pluginfile","/pluginfile")),this.urlUtils.removeUrlParams(e)},e.prototype.updateContentFields=function(e,t,n){var o=this;return this.sitesProvider.getSiteDb(n).then(function(n){var r=Object.assign(t);return delete r.slug,n.updateRecords(o.CONTENT_TABLE,r,{id:e})})},e.STYLES=["styles/h5p.css","styles/h5p-confirmation-dialog.css","styles/h5p-core-button.css"],e.SCRIPTS=["js/jquery.js","js/h5p.js","js/h5p-event-dispatcher.js","js/h5p-x-api-event.js","js/h5p-x-api.js","js/h5p-content-type.js","js/h5p-confirmation-dialog.js","js/h5p-action-bar.js","js/request-queue.js"],e.ADMIN_SCRIPTS=["js/jquery.js","js/h5p-utils.js"],e.DISABLE_NONE=0,e.DISABLE_FRAME=1,e.DISABLE_DOWNLOAD=2,e.DISABLE_EMBED=4,e.DISABLE_COPYRIGHT=8,e.DISABLE_ABOUT=16,e.DISPLAY_OPTION_FRAME="frame",e.DISPLAY_OPTION_DOWNLOAD="export",e.DISPLAY_OPTION_EMBED="embed",e.DISPLAY_OPTION_COPYRIGHT="copyright",e.DISPLAY_OPTION_ABOUT="icon",e.DISPLAY_OPTION_COPY="copy",e=t=_([Object(o.A)(),g("design:paramtypes",[l.a,a.a,u.a,r.a,c.a,p.a,i.a,f.a,d.a,m.c])],e);var t}(),P=function(){function e(){}return e.NEVER_SHOW=0,e.CONTROLLED_BY_AUTHOR_DEFAULT_ON=1,e.CONTROLLED_BY_AUTHOR_DEFAULT_OFF=2,e.ALWAYS_SHOW=3,e.CONTROLLED_BY_PERMISSIONS=4,e}(),O=function(){function e(){}return e.DOWNLOAD_H5P=0,e.EMBED_H5P=1,e.CREATE_RESTRICTED=2,e.UPDATE_LIBRARIES=3,e.INSTALL_RECOMMENDED=4,e.COPY_H5P=4,e}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),r=n(3),i=n(148),l=n(13),a=n(65),s=n(72),u=n(10),c=n(6),d=n(9),f=n(1),p=n(81),h=n(11),m=n(24),_=n(2),g=n(203),v=n(507),y=n(258),b=n(236),P=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_){var g=e.call(this,"AddonModGlossarySyncProvider",i,l,n,a,s,t,u)||this;return g.eventsProvider=r,g.uploaderProvider=c,g.utils=d,g.glossaryProvider=f,g.glossaryHelper=p,g.glossaryOffline=h,g.logHelper=m,g.ratingSync=_,g.componentTranslate=o.translateModuleName("glossary"),g}return P(t,e),n=t,t.prototype.syncAllGlossaries=function(e,t){return this.syncOnSites("all glossaries",this.syncAllGlossariesFunc.bind(this),[t],e)},t.prototype.syncAllGlossariesFunc=function(e,t){var o=this;e=e||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.glossaryOffline.getAllNewEntries(e).then(function(r){var i={},l=function(l){var a=r[l];if(void 0!==i[a.glossaryid])return"continue";i[a.glossaryid]=t?o.syncGlossaryEntries(a.glossaryid,a.userid,e):o.syncGlossaryEntriesIfNeeded(a.glossaryid,a.userid,e),i[a.glossaryid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{glossaryId:a.glossaryid,userId:a.userid,warnings:t.warnings},e)})};for(var a in r)l(a);return Promise.all(o.utils.objectToArray(i))})),r.push(this.syncRatings(void 0,t,e)),Promise.all(r)},t.prototype.syncGlossaryEntriesIfNeeded=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getGlossarySyncId(e,t);return this.isSyncNeeded(r,n).then(function(r){if(r)return o.syncGlossaryEntries(e,t,n)})},t.prototype.syncGlossaryEntries=function(e,t,n){var o=this;t=t||this.sitesProvider.getCurrentSiteUserId(),n=n||this.sitesProvider.getCurrentSiteId();var r=this.getGlossarySyncId(e,t);if(this.isSyncing(r,n))return this.getOngoingSync(r,n);if(this.syncProvider.isBlocked(g.a.COMPONENT,r,n))return this.logger.debug("Cannot sync glossary "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync glossary "+e+" for user "+t);var i,l={warnings:[],updated:!1},a=this.logHelper.syncIfNeeded(g.a.COMPONENT,e,n).catch(function(){}).then(function(){return o.glossaryOffline.getGlossaryNewEntries(e,n,t).catch(function(){return[]})}).then(function(t){if(t.length){if(!o.appProvider.isOnline())return Promise.reject(null);var r=[];return t.forEach(function(t){var a;i=t.courseid,a=o.uploadAttachments(e,t,n).then(function(r){return o.glossaryProvider.addEntryOnline(e,t.concept,t.definition,t.options,r,n)}),r.push(a.then(function(){return l.updated=!0,o.deleteAddEntry(e,t.concept,t.timecreated,n)}).catch(function(r){return o.utils.isWebServiceError(r)?(l.updated=!0,o.deleteAddEntry(e,t.concept,t.timecreated,n).then(function(){l.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:t.concept,error:o.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)}))}),Promise.all(r)}}).then(function(){if(l.updated&&i)return o.glossaryProvider.getGlossaryById(i,e).then(function(e){return o.glossaryProvider.invalidateGlossaryEntries(e,!0)}).catch(function(){})}).then(function(){return o.setSyncTime(r,n).catch(function(){})}).then(function(){return l});return this.addOngoingSync(r,a,n)},t.prototype.syncRatings=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.ratingSync.syncRatings("mod_glossary","entry","module",e,0,t,n).then(function(e){var t=!1,r=[],i=[];return e.forEach(function(e){e.updated.length&&(t=!0,e.updated.forEach(function(e){i.push(o.glossaryProvider.invalidateEntry(e,n))})),e.warnings.length&&i.push(o.glossaryProvider.getGlossary(e.itemSet.courseId,e.itemSet.instanceId,n).then(function(t){e.warnings.forEach(function(e){r.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:t.name,error:e}))})}))}),o.utils.allPromises(i).then(function(){return{updated:t,warnings:r}})})},t.prototype.deleteAddEntry=function(e,t,n,o){var r=[];return r.push(this.glossaryOffline.deleteNewEntry(e,t,n,o)),r.push(this.glossaryHelper.deleteStoredFiles(e,t,n,o).catch(function(){})),Promise.all(r)},t.prototype.uploadAttachments=function(e,t,n){var o=this;if(t.attachments){var r=t.attachments.online||[];return(t.attachments.offline?this.glossaryHelper.getStoredFiles(e,t.concept,t.timecreated,n).then(function(e){r=r.concat(e)}).catch(function(){}):Promise.resolve(0)).then(function(){return o.uploaderProvider.uploadOrReuploadFiles(r,g.a.COMPONENT,e,n)})}return Promise.resolve(0)},t.prototype.getGlossarySyncId=function(e,t){return t=t||this.sitesProvider.getCurrentSiteUserId(),"glossary#"+e+"#"+t},t.AUTO_SYNCED="addon_mod_glossary_autom_synced",t=n=O([Object(o.A)(),E("design:paramtypes",[r.c,u.a,l.a,d.a,c.a,f.a,p.a,h.a,m.a,s.a,_.a,g.a,v.a,y.a,a.a,b.a])],t);var n}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(698),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModDataFieldTextHandler",this.type="text"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id;return!!t[n]&&[{name:n,value:t[n]}]},e.prototype.getFieldEditData=function(e,t,n){return[{fieldid:e.id,value:t["f_"+e.id]||""}]},e.prototype.hasFieldDataChanged=function(e,t,n){return n=n&&n.content||"",(t["f_"+e.id]||"")!=n},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return e.content=t[""]||"",e},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n){return e.call(this,t,"AddonQtypeMultichoiceComponent",n)||this}return l(t,e),t.prototype.ngOnInit=function(){this.initMultichoiceComponent()},t.prototype.clear=function(){this.question.singleChoiceModel=null},t=a([Object(o.m)({selector:"addon-qtype-multichoice",templateUrl:"addon-qtype-multichoice.html"}),s("design:paramtypes",[r.a,o.C])],t)}(i.a)},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(379),s=n(31),u=n(26),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e=c([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";function o(e){return p._57(0,[(e()(),p._31(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.loadMore()&&o}return o},h.b,h.a)),p._30(1,1097728,null,0,m.a,[[8,""],_.a,p.t,p.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._55(2,0,["\n            ","\n        "])),p._47(131072,g.a,[v.a,p.j])],function(e,t){e(t,1,0,"light","")},function(e,t){e(t,2,0,p._56(t,2,0,p._44(t,3).transform("core.loadmore")))})}function r(e){return p._57(0,[(e()(),p._31(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.loadMore()&&o}return o},h.b,h.a)),p._30(1,1097728,null,0,m.a,[[8,""],_.a,p.t,p.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._55(2,0,["\n            ","\n        "])),p._47(131072,g.a,[v.a,p.j])],function(e,t){e(t,1,0,"light","")},function(e,t){e(t,2,0,p._56(t,2,0,p._44(t,3).transform("core.tryagain")))})}function i(e){return p._57(0,[(e()(),p._31(0,0,[[3,0],["bottombutton",1]],null,7,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),p._55(-1,null,["\n        "])),(e()(),p._26(16777216,null,null,1,null,o)),p._30(3,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n        "])),(e()(),p._26(16777216,null,null,1,null,r)),p._30(6,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,!n.error);e(t,6,0,n.error)},null)}function l(e){return p._57(0,[(e()(),p._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),p._55(-1,null,["\n    "])),(e()(),p._26(16777216,null,null,1,null,i)),p._30(3,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.enabled||n.error)},null)}function a(e){return p._57(0,[(e()(),p._31(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.loadMore()&&o}return o},h.b,h.a)),p._30(1,1097728,null,0,m.a,[[8,""],_.a,p.t,p.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._55(2,0,["\n            ","\n        "])),p._47(131072,g.a,[v.a,p.j])],function(e,t){e(t,1,0,"light","")},function(e,t){e(t,2,0,p._56(t,2,0,p._44(t,3).transform("core.loadmore")))})}function s(e){return p._57(0,[(e()(),p._31(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.loadMore()&&o}return o},h.b,h.a)),p._30(1,1097728,null,0,m.a,[[8,""],_.a,p.t,p.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._55(2,0,["\n            ","\n        "])),p._47(131072,g.a,[v.a,p.j])],function(e,t){e(t,1,0,"light","")},function(e,t){e(t,2,0,p._56(t,2,0,p._44(t,3).transform("core.tryagain")))})}function u(e){return p._57(0,[(e()(),p._31(0,0,[[1,0],["topbutton",1]],null,7,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),p._55(-1,null,["\n        "])),(e()(),p._26(16777216,null,null,1,null,a)),p._30(3,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n        "])),(e()(),p._26(16777216,null,null,1,null,s)),p._30(6,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,!n.error);e(t,6,0,n.error)},null)}function c(e){return p._57(0,[(e()(),p._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),p._55(-1,null,["\n    "])),(e()(),p._26(16777216,null,null,1,null,u)),p._30(3,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.enabled||n.error)},null)}function d(e){return p._57(0,[(e()(),p._31(0,0,[[4,0],["spinnercontainer",1]],null,4,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(e()(),p._55(-1,null,["\n    "])),(e()(),p._31(2,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,b.b,b.a)),p._30(3,114688,null,0,P.a,[_.a,p.t,p.V],null,null),(e()(),p._55(-1,null,["\n"]))],function(e,t){e(t,3,0)},function(e,t){e(t,2,0,p._44(t,3)._paused)})}function f(e){return p._57(0,[p._52(671088640,1,{topButton:0}),p._52(402653184,2,{infiniteEl:0}),p._52(671088640,3,{bottomButton:0}),p._52(671088640,4,{spinnerContainer:0}),(e()(),p._26(16777216,null,null,1,null,l)),p._30(5,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n\n"])),(e()(),p._31(7,0,[[2,0],["infinitescroll",1]],null,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(e,t,n){var o=!0;if("ionInfinite"===t){o=!1!==e.component.loadMore(n)&&o}return o},null,null)),p._30(8,1196032,null,0,O.a,[E.a,p.M,p.t,C.a],{enabled:[0,"enabled"],position:[1,"position"]},{ionInfinite:"ionInfinite"}),(e()(),p._55(-1,null,["\n    "])),(e()(),p._31(10,0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,I.b,I.a)),p._30(11,114688,null,0,R.a,[O.a,_.a],null,null),(e()(),p._55(-1,null,["\n"])),(e()(),p._55(-1,null,["\n\n"])),(e()(),p._26(16777216,null,null,1,null,c)),p._30(15,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n\n"])),(e()(),p._26(16777216,null,null,1,null,d)),p._30(18,16384,null,0,y.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,5,0,!n.loadingMore&&"top"!=n.position);e(t,8,0,n.enabled&&!n.error&&!n.loadingMore,n.position),e(t,11,0);e(t,15,0,!n.loadingMore&&"top"==n.position);e(t,18,0,n.loadingMore)},function(e,t){e(t,10,0,p._44(t,11).inf.state)})}n.d(t,"a",function(){return A}),t.b=f;var p=n(0),h=n(45),m=n(42),_=n(8),g=n(25),v=n(17),y=n(7),b=n(121),P=n(101),O=n(343),E=n(29),C=n(34),I=n(1909),R=n(419),S=n(273),w=n(4),A=p._29({encapsulation:2,styles:[],data:{}});p._27("core-infinite-loading",S.a,function(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"core-infinite-loading",[],null,null,null,f,A)),p._30(1,573440,null,0,S.a,[[2,E.a],w.a],null,null)],null,null)},{enabled:"enabled",error:"error",position:"position"},{action:"action"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(321),s=n(26),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=function(){function e(){}return e=u([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(3),i=n(1),l=n(46),a=n(165),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.sitesProvider=e,this.userProvider=t,this.translate=n}return e.prototype.getProfile=function(e){return e&&e!=this.sitesProvider.getCurrentSiteUserId()?this.userProvider.getProfile(e,null,!0).then(function(e){return e.profileimageurl=e.profileimageurl||!0,e}):Promise.resolve(!1)},e.prototype.getCompetencyStatusName=function(e){var t;switch(e){case a.a.REVIEW_STATUS_IDLE:t="idle";break;case a.a.REVIEW_STATUS_IN_REVIEW:t="inreview";break;case a.a.REVIEW_STATUS_WAITING_FOR_REVIEW:t="waitingforreview";break;default:return String(e)}return this.translate.instant("addon.competency.usercompetencystatus_"+t)},e.prototype.getPlanStatusName=function(e){var t;switch(e){case a.a.STATUS_DRAFT:t="draft";break;case a.a.STATUS_ACTIVE:t="active";break;case a.a.STATUS_COMPLETE:t="complete";break;case a.a.STATUS_WAITING_FOR_REVIEW:t="waitingforreview";break;case a.a.STATUS_IN_REVIEW:t="inreview";break;default:return String(e)}return this.translate.instant("addon.competency.planstatus"+t)},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a,r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(4),l=n(2),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},c=function(){function e(e,t,n,o){this.domUtils=t,this.utils=n,this.navCtrl=o,this.coreAutoFocus=!0,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;if(this.navCtrl.isTransitioning())var t=this.navCtrl.viewDidEnter.subscribe(function(){e.autoFocus(),t.unsubscribe()});else this.autoFocus()},e.prototype.autoFocus=function(){var e=this;this.utils.isTrueOrOne(this.coreAutoFocus)&&setTimeout(function(){var t=e.element;"ION-INPUT"==e.element.tagName?t=e.element.querySelector("input")||t:"ION-TEXTAREA"==e.element.tagName&&(t=e.element.querySelector("textarea")||t),e.domUtils.focusElement(t)},200)},a([Object(o.D)("core-auto-focus"),s("design:type",Object)],e.prototype,"coreAutoFocus",void 0),e=a([Object(o.s)({selector:"[core-auto-focus]"}),u(3,Object(o.N)()),s("design:paramtypes",[o.t,i.a,l.a,r.s])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(3),i=n(6),l=n(24),a=n(14),s=(n.n(a),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.translate=t,this.timeUtils=n,this.logger=e.getInstance("CoreDateDayOrTimePipe")}return e.prototype.transform=function(e){if("string"==typeof e){var t=parseInt(e,10);if(isNaN(t))return this.logger.error("Invalid value received",e),e;e=t}return a(1e3*e).calendar(null,{sameDay:this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimetime")),lastDay:this.translate.instant("core.dflastweekdate"),lastWeek:this.translate.instant("core.dflastweekdate"),sameElse:this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimedatefullshort"))})},e=s([Object(o.S)({name:"coreDateDayOrTime"}),u("design:paramtypes",[i.a,r.c,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(4),i=n(2),l=n(5),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n,o){this.utils=t,this.domUtils=n,this.platform=o,this.selector="",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){this.shown=this.utils.isTrueOrOne(this.initialShown),this.selector='input[name="'+this.name+'"]',this.setData()},e.prototype.ngAfterViewInit=function(){this.searchInput()},e.prototype.searchInput=function(){this.input=this.element.querySelector(this.selector),this.input&&(this.input.type=this.shown?"text":"password",this.input.getAttribute("autocorrect")||this.input.setAttribute("autocorrect","off"),this.input.getAttribute("autocapitalize")||this.input.setAttribute("autocapitalize","none"))},e.prototype.setData=function(){this.label=this.shown?"core.hide":"core.show",this.iconName=this.shown?"eye-off":"eye",this.input&&(this.input.type=this.shown?"text":"password")},e.prototype.toggle=function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=document.activeElement===this.input;this.shown=!this.shown,this.setData(),n&&this.platform.is("android")&&setTimeout(function(){t.domUtils.focusElement(t.input)},400)},a([Object(o.D)(),s("design:type",String)],e.prototype,"name",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"initialShown",void 0),e=a([Object(o.m)({selector:"core-show-password",templateUrl:"core-show-password.html"}),s("design:paramtypes",[o.t,i.a,r.a,l.v])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(3),i=n(9),l=n(1),a=n(4),s=n(2),u=n(283),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},h=function(){function e(e,t,n,r,i,l){this.translate=e,this.utils=t,this.searchHistoryProvider=n,this.eventsProvider=r,this.sitesProvider=i,this.domUtils=l,this.autocorrect="on",this.spellcheck=!0,this.lengthCheck=3,this.showClear=!0,this.disabled=!1,this.searched="",this.searchText="",this.history=[],this.historyShown=!1,this.elementClicked="",this.onSubmit=new o.v,this.onClear=new o.v}return e.prototype.ngOnInit=function(){this.searchLabel=this.searchLabel||this.translate.instant("core.search"),this.placeholder=this.placeholder||this.translate.instant("core.search"),this.spellcheck=this.utils.isTrueOrOne(this.spellcheck),this.showClear=this.utils.isTrueOrOne(this.showClear),this.searchText=this.initialSearch||"",this.searchArea&&(this.loadHistory(),this.backdropMouseUpFunc=this.backdropMouseUp.bind(this))},e.prototype.submitForm=function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.searchText.length<this.lengthCheck||(this.searchArea&&this.saveSearchToHistory(this.searchText),this.domUtils.triggerFormSubmittedEvent(this.formElement.nativeElement,!1,this.sitesProvider.getCurrentSiteId()),this.searched=this.searchText,this.onSubmit.emit(this.searchText))},e.prototype.saveSearchToHistory=function(e){return f(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,this.searchHistoryProvider.insertOrUpdateSearchText(this.searchArea,e)];case 1:return t.sent(),[3,3];case 2:return this.loadHistory(),[7];case 3:return[2]}})})},e.prototype.loadHistory=function(){return f(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return e=this,[4,this.searchHistoryProvider.getSearchHistory(this.searchArea)];case 1:return e.history=t.sent(),[2]}})})},e.prototype.showHistory=function(){this.searchArea&&(this.historyShown=!0,this.elementClicked="",document.body.addEventListener("mouseup",this.backdropMouseUpFunc))},e.prototype.hideHistory=function(e){void 0===e&&(e=!1),this.searchArea&&(e||""==this.elementClicked)&&(this.historyShown=!1,this.elementClicked="",document.body.removeEventListener("mouseup",this.backdropMouseUpFunc))},e.prototype.itemMouseDown=function(e,t){this.elementClicked=t},e.prototype.itemMouseUp=function(e,t){this.elementClicked==t&&(this.hideHistory(!0),this.searched!=t&&(this.searchText=t,this.submitForm(e))),this.elementClicked=""},e.prototype.backdropMouseUp=function(e){document.activeElement.type&&"search"==document.activeElement.type||(this.hideHistory(),this.elementClicked="")},e.prototype.clearForm=function(){this.searched="",this.searchText="",this.hideHistory(!0),this.onClear.emit()},e.prototype.ngOnDestroy=function(){this.backdropMouseUpFunc&&document.body.removeEventListener("mouseup",this.backdropMouseUpFunc)},c([Object(o.D)(),d("design:type",String)],e.prototype,"searchLabel",void 0),c([Object(o.D)(),d("design:type",String)],e.prototype,"placeholder",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"autocorrect",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"spellcheck",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"autoFocus",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"lengthCheck",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"showClear",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"disabled",void 0),c([Object(o.D)(),d("design:type",String)],e.prototype,"initialSearch",void 0),c([Object(o.D)(),d("design:type",String)],e.prototype,"searchArea",void 0),c([Object(o.O)(),d("design:type",o.v)],e.prototype,"onSubmit",void 0),c([Object(o.O)(),d("design:type",o.v)],e.prototype,"onClear",void 0),c([Object(o._9)("searchForm"),d("design:type",o.t)],e.prototype,"formElement",void 0),e=c([Object(o.m)({selector:"core-search-box",templateUrl:"core-search-box.html"}),d("design:paramtypes",[r.c,s.a,u.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(10),a=n(11),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,n,o,r){this.sitesProvider=n,this.appProvider=o,this.textUtils=r,this.siteSchema={name:"AddonMessagesOfflineProvider",version:1,tables:[{name:t.MESSAGES_TABLE,columns:[{name:"touserid",type:"INTEGER"},{name:"useridfrom",type:"INTEGER"},{name:"smallmessage",type:"TEXT"},{name:"timecreated",type:"INTEGER"},{name:"deviceoffline",type:"INTEGER"}],primaryKeys:["touserid","smallmessage","timecreated"]},{name:t.CONVERSATION_MESSAGES_TABLE,columns:[{name:"conversationid",type:"INTEGER"},{name:"text",type:"TEXT"},{name:"timecreated",type:"INTEGER"},{name:"deviceoffline",type:"INTEGER"},{name:"conversation",type:"TEXT"}],primaryKeys:["conversationid","text","timecreated"]}]},this.logger=e.getInstance("AddonMessagesOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.deleteConversationMessage=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(t.CONVERSATION_MESSAGES_TABLE,{conversationid:e,text:n,timecreated:o})})},e.prototype.deleteConversationMessages=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.CONVERSATION_MESSAGES_TABLE,{conversationid:e})})},e.prototype.deleteMessage=function(e,n,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(t.MESSAGES_TABLE,{touserid:e,smallmessage:n,timecreated:o})})},e.prototype.getAllDeviceOfflineMessages=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var o=[];return o.push(e.getDb().getRecords(t.MESSAGES_TABLE,{deviceoffline:1})),o.push(e.getDb().getRecords(t.CONVERSATION_MESSAGES_TABLE,{deviceoffline:1})),Promise.all(o).then(function(e){return e[1]=n.parseConversationMessages(e[1]),e[0].concat(e[1])})})},e.prototype.getAllMessages=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var o=[];return o.push(e.getDb().getAllRecords(t.MESSAGES_TABLE)),o.push(e.getDb().getAllRecords(t.CONVERSATION_MESSAGES_TABLE)),Promise.all(o).then(function(e){return e[1]=n.parseConversationMessages(e[1]),e[0].concat(e[1])})})},e.prototype.getConversationMessages=function(e,n){var o=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.CONVERSATION_MESSAGES_TABLE,{conversationid:e}).then(function(e){return o.parseConversationMessages(e)})})},e.prototype.getMessages=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(t.MESSAGES_TABLE,{touserid:e})})},e.prototype.hasConversationMessages=function(e,t){return this.getConversationMessages(e,t).then(function(e){return!!e.length})},e.prototype.hasMessages=function(e,t){return this.getMessages(e,t).then(function(e){return!!e.length})},e.prototype.parseConversationMessages=function(e){var t=this;return e?(e.forEach(function(e){e.conversation&&(e.conversation=t.textUtils.parseJSON(e.conversation,{}))}),e):[]},e.prototype.saveConversationMessage=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={conversationid:e.id,text:n,timecreated:Date.now(),deviceoffline:r.appProvider.isOnline()?0:1,conversation:JSON.stringify({name:e.name||"",subname:e.subname||"",imageurl:e.imageurl||"",isfavourite:e.isfavourite?1:0,type:e.type})};return o.getDb().insertRecord(t.CONVERSATION_MESSAGES_TABLE,i).then(function(){return i})})},e.prototype.saveMessage=function(e,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={touserid:e,useridfrom:o.getUserId(),smallmessage:n,timecreated:(new Date).getTime(),deviceoffline:r.appProvider.isOnline()?0:1};return o.getDb().insertRecord(t.MESSAGES_TABLE,i).then(function(){return i})})},e.prototype.setMessagesDeviceOffline=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){var r=o.getDb(),i=[],l={deviceoffline:n?1:0};return e.forEach(function(e){i.push(e.conversationid?r.updateRecords(t.CONVERSATION_MESSAGES_TABLE,l,{conversationid:e.conversationid,text:e.text,timecreated:e.timecreated}):r.updateRecords(t.MESSAGES_TABLE,l,{touserid:e.touserid,smallmessage:e.smallmessage,timecreated:e.timecreated}))}),Promise.all(i)})},e.MESSAGES_TABLE="addon_messages_offline_messages",e.CONVERSATION_MESSAGES_TABLE="addon_messages_offline_conversation_messages",e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.element=e,this.height=0,this.onResize=new o.v}return e.prototype.onInput=function(){this.resize()},e.prototype.onChange=function(){var e=this;setTimeout(function(){e.resize()},300)},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.resize()},300)},e.prototype.resize=function(e){var t=this.element.nativeElement;"ION-TEXTAREA"==t.tagName&&(t=t.firstElementChild),t.style.height="1px",t.style.height=t.scrollHeight+"px",this.height!=t.scrollHeight&&(this.height=t.scrollHeight,this.onResize.emit())},r([Object(o.O)(),i("design:type",o.v)],e.prototype,"onResize",void 0),r([Object(o.y)("input"),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"onInput",null),r([Object(o.y)("change"),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"onChange",null),e=r([Object(o.s)({selector:"textarea[core-auto-rows], ion-textarea[core-auto-rows]"}),i("design:paramtypes",[o.t])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(9),i=n(57),l=n(1),a=n(4),s=n(66),u=n(11),c=n(24),d=n(2),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,r,i,l,a,s){this.mimeUtils=e,this.utils=t,this.textUtils=n,this.fileProvider=r,this.domUtils=i,this.timeUtils=l,this.sitesProvider=a,this.eventsProvider=s,this.newFileName="",this.onDelete=new o.v,this.onRename=new o.v,this.onClick=new o.v}return e.prototype.ngOnInit=function(){var e=this;this.manage=this.utils.isTrueOrOne(this.manage),this.loadFileBasicData(),this.fileProvider.getMetadata(this.file).then(function(t){t.size>=0&&(e.size=e.textUtils.bytesToSize(t.size,2)),e.timemodified=e.timeUtils.userDate(t.modificationTime,"core.strftimedatetimeshort")})},e.prototype.loadFileBasicData=function(){this.fileName=this.file.name,this.fileIcon=this.mimeUtils.getFileIcon(this.file.name),this.fileExtension=this.mimeUtils.getFileExtension(this.file.name),this.relativePath=this.fileProvider.removeBasePath(this.file.toURL()),this.relativePath||(this.relativePath=this.file.fullPath)},e.prototype.fileClicked=function(e){this.editMode||(e.preventDefault(),e.stopPropagation(),this.utils.isTrueOrOne(this.overrideClick)&&this.onClick.observers.length?this.onClick.emit():this.utils.openFile(this.file.toURL()))},e.prototype.activateEdit=function(e){e.preventDefault(),e.stopPropagation(),this.editMode=!0,this.newFileName=this.file.name},e.prototype.changeName=function(e,t){var n=this;if(t.preventDefault(),t.stopPropagation(),e==this.file.name)return this.editMode=!1,void this.domUtils.triggerFormCancelledEvent(this.formElement.nativeElement,this.sitesProvider.getCurrentSiteId());var o=this.domUtils.showModalLoading(),r=this.fileProvider.getFileAndDirectoryFromPath(this.relativePath),i=this.textUtils.concatenatePaths(r.directory,e);this.fileProvider.getFile(i).then(function(){n.domUtils.showErrorModal("core.errorfileexistssamename",!0)}).catch(function(){return n.fileProvider.moveFile(n.relativePath,i).then(function(e){n.domUtils.triggerFormSubmittedEvent(n.formElement.nativeElement,!1,n.sitesProvider.getCurrentSiteId()),n.editMode=!1,n.file=e,n.loadFileBasicData(),n.onRename.emit({file:n.file})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errorrenamefile",!0)})}).finally(function(){o.dismiss()})},e.prototype.deleteFile=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.domUtils.showDeleteConfirm("core.confirmdeletefile").then(function(){var e=t.domUtils.showModalLoading("core.deleting",!0);return t.fileProvider.removeFile(t.relativePath).then(function(){t.onDelete.emit()}).finally(function(){e.dismiss()})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordeletefile",!0)})},f([Object(o.D)(),p("design:type",Object)],e.prototype,"file",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"manage",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"overrideClick",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"onDelete",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"onRename",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"onClick",void 0),f([Object(o._9)("nameForm"),p("design:type",o.t)],e.prototype,"formElement",void 0),e=f([Object(o.m)({selector:"core-local-file",templateUrl:"core-local-file.html"}),p("design:paramtypes",[s.a,d.a,u.a,i.a,a.a,c.a,l.a,r.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(4),l=n(13),a=n(390),s=n(385),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o,r){this.domUtils=e,this.courseProvider=t,this.blockHelper=n,this.content=r,this.hideBlocks=!1,this.dataLoaded=!1,this.blocks=[],this.element=o.nativeElement}return e.prototype.ngOnInit=function(){var e=this;this.loadContent().finally(function(){e.dataLoaded=!0})},e.prototype.invalidateBlocks=function(){var e=[];return this.blockHelper.canGetCourseBlocks()&&e.push(this.courseProvider.invalidateCourseBlocks(this.courseId)),this.blocksComponents.forEach(function(t){e.push(t.invalidate().catch(function(){}))}),Promise.all(e)},e.prototype.loadContent=function(){var e=this;return this.blockHelper.getCourseBlocks(this.courseId).then(function(t){e.blocks=t}).catch(function(t){e.domUtils.showErrorModal(t),e.blocks=[]}).finally(function(){e.blocks.length>0?(e.element.classList.add("core-has-blocks"),e.element.classList.remove("core-no-blocks"),e.content.getElementRef().nativeElement.classList.add("core-course-block-with-blocks")):(e.element.classList.remove("core-has-blocks"),e.element.classList.add("core-no-blocks"),e.content.getElementRef().nativeElement.classList.remove("core-course-block-with-blocks"))})},u([Object(o.D)(),c("design:type",Number)],e.prototype,"courseId",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"hideBlocks",void 0),u([Object(o.D)(),c("design:type",Boolean)],e.prototype,"downloadEnabled",void 0),u([Object(o._10)(a.a),c("design:type",o.T)],e.prototype,"blocksComponents",void 0),e=u([Object(o.m)({selector:"core-block-course-blocks",templateUrl:"core-block-course-blocks.html"}),c("design:paramtypes",[i.a,l.a,s.a,o.t,r.f])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(13),i=n(60),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.courseProvider=e,this.blockDelegate=t}return e.prototype.canGetCourseBlocks=function(){return this.courseProvider.canGetCourseBlocks()&&!this.blockDelegate.areBlocksDisabledInCourses()},e.prototype.getCourseBlocks=function(e){var t=this;return this.canGetCourseBlocks()?this.courseProvider.getCourseBlocks(e).then(function(e){return t.blockDelegate.hasSupportedBlock(e)?e:[]}):Promise.resolve([])},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(3),i=n(1),l=n(4),a=n(2),s=n(234),u=n(264),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.sitesProvider=e,this.translate=t,this.domUtils=n,this.utils=o,this.scormProvider=r,this.scormOfflineProvider=i,this.elementsToIgnore=["status","score_raw","total_time","session_time","student_id","student_name","credit","mode","entry"]}return e.prototype.confirmDownload=function(e,t){var n=this;return this.scormProvider.shouldDownloadMainFile(e,t).then(function(t){if(t){return(e.packagesize?Promise.resolve(e.packagesize):n.scormProvider.calculateScormSize(e).then(function(t){return e.packagesize=t,t})).then(function(e){return n.domUtils.confirmDownloadSize({size:e,total:!0})})}})},e.prototype.convertAttemptToOffline=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.scormProvider.getScormUserData(e.id,t,void 0,!1,!1,n).then(function(r){return o.scormOfflineProvider.getScormUserData(e.id,t,void 0,n).catch(function(){}).then(function(i){var l=o.utils.clone(r),a=function(e){var t=l[e];if(o.elementsToIgnore.forEach(function(e){delete t.userdata[e]}),i&&i[t.scoid]&&i[t.scoid].userdata){var n={};for(var r in t.userdata)i[t.scoid].userdata[r]||(n[r]=t.userdata[r]);t.userdata=n}};for(var s in l)a(s);return o.scormOfflineProvider.createNewAttempt(e,t,l,r,n)})}).catch(function(){return Promise.reject(o.translate.instant("addon.mod_scorm.errorcreateofflineattempt"))})},e.prototype.createOfflineAttempt=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.searchOnlineAttemptUserData(e.id,n,o).then(function(n){for(var i in n){var l=n[i],a={};for(var s in l.userdata)-1==s.indexOf(".")&&-1==r.elementsToIgnore.indexOf(s)&&(a[s]=l.userdata[s]);l.userdata=a}return r.scormOfflineProvider.createNewAttempt(e,t,n,void 0,o)}).catch(function(){return Promise.reject(r.translate.instant("addon.mod_scorm.errorcreateofflineattempt"))})},e.prototype.determineAttemptToContinue=function(e,t,n){var o,r=this;if(t.online.length&&(o=Math.max.apply(Math,t.online)),o){var i=t.offline.indexOf(o)>-1;return this.scormProvider.isAttemptIncomplete(e.id,o,i,!1,n).then(function(n){return n?{number:o,offline:i}:r.getLastBeforeMax(e,t)})}return Promise.resolve(this.getLastBeforeMax(e,t))},e.prototype.getFirstSco=function(e,t,n,o,r,i,l){var a=this;r=r||s.a.MODENORMAL;return(n&&n.length?Promise.resolve(n):this.scormProvider.getScosWithData(e,t,o,i,!1,l)).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.isvisible&&n.launch&&n.prereq&&(r!=s.a.MODENORMAL||a.scormProvider.isStatusIncomplete(n.status)))return n}return e[0]})},e.prototype.getLastBeforeMax=function(e,t){return 0!=e.maxattempt&&t.lastAttempt.number>e.maxattempt?{number:e.maxattempt,offline:t.offline.indexOf(e.maxattempt)>-1}:{number:t.lastAttempt.number,offline:t.lastAttempt.offline}},e.prototype.getNextScoFromToc=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t){for(var o=n+1;o<e.length;o++)if(e[o].isvisible&&e[o].prereq&&e[o].launch)return e[o];break}},e.prototype.getPreviousScoFromToc=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t){for(var o=n-1;o>=0;o--)if(e[o].isvisible&&e[o].prereq&&e[o].launch)return e[o];break}},e.prototype.getScoFromToc=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t)return e[n]},e.prototype.searchOnlineAttemptUserData=function(e,t,n){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.scormProvider.getScormUserData(e,t,void 0,!1,!1,n).catch(function(){return t>0?o.searchOnlineAttemptUserData(e,t-1,n):Promise.reject(null)})},e=c([Object(o.A)(),d("design:paramtypes",[i.a,r.c,l.a,a.a,s.a,u.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(24),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,n){this.sitesProvider=e,this.timeUtils=n,this.siteSchema={name:"CoreCommentsOfflineProvider",version:1,tables:[{name:t.COMMENTS_TABLE,columns:[{name:"contextlevel",type:"TEXT"},{name:"instanceid",type:"INTEGER"},{name:"component",type:"TEXT"},{name:"itemid",type:"INTEGER"},{name:"area",type:"TEXT"},{name:"content",type:"TEXT"},{name:"lastmodified",type:"INTEGER"}],primaryKeys:["contextlevel","instanceid","component","itemid","area"]},{name:t.COMMENTS_DELETED_TABLE,columns:[{name:"commentid",type:"INTEGER",primaryKey:!0},{name:"contextlevel",type:"TEXT"},{name:"instanceid",type:"INTEGER"},{name:"component",type:"TEXT"},{name:"itemid",type:"INTEGER"},{name:"area",type:"TEXT"},{name:"deleted",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getAllComments=function(e){return this.sitesProvider.getSite(e).then(function(e){return Promise.all([e.getDb().getRecords(t.COMMENTS_TABLE),e.getDb().getRecords(t.COMMENTS_DELETED_TABLE)]).then(function(e){return[].concat.apply([],e)})})},e.prototype.getComment=function(e,n,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().getRecord(t.COMMENTS_TABLE,{contextlevel:e,instanceid:n,component:o,itemid:r,area:i})}).catch(function(){return!1})},e.prototype.getComments=function(e,t,n,o,r,i){var l=this;void 0===r&&(r="");var a=[];return i=i||this.sitesProvider.getCurrentSiteId(),this.getComment(e,t,n,o,r,i).then(function(s){return a=s?[s]:[],l.getDeletedComments(e,t,n,o,r,i)}).then(function(e){return a=a.concat(e)})},e.prototype.getAllDeletedComments=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(t.COMMENTS_DELETED_TABLE)})},e.prototype.getDeletedComments=function(e,n,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().getRecords(t.COMMENTS_DELETED_TABLE,{contextlevel:e,instanceid:n,component:o,itemid:r,area:i})}).catch(function(){return!1})},e.prototype.removeComment=function(e,n,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().deleteRecords(t.COMMENTS_TABLE,{contextlevel:e,instanceid:n,component:o,itemid:r,area:i})})},e.prototype.removeDeletedComments=function(e,n,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().deleteRecords(t.COMMENTS_DELETED_TABLE,{contextlevel:e,instanceid:n,component:o,itemid:r,area:i})})},e.prototype.saveComment=function(e,n,o,r,i,l,a){var s=this;return void 0===l&&(l=""),this.sitesProvider.getSite(a).then(function(a){var u=s.timeUtils.timestamp(),c={contextlevel:n,instanceid:o,component:r,itemid:i,area:l,content:e,lastmodified:u};return a.getDb().insertRecord(t.COMMENTS_TABLE,c).then(function(){return c})})},e.prototype.deleteComment=function(e,n,o,r,i,l,a){var s=this;return void 0===l&&(l=""),this.sitesProvider.getSite(a).then(function(a){var u=s.timeUtils.timestamp(),c={contextlevel:n,instanceid:o,component:r,itemid:i,area:l,commentid:e,deleted:u};return a.getDb().insertRecord(t.COMMENTS_DELETED_TABLE,c).then(function(){return c})})},e.prototype.undoDeleteComment=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.COMMENTS_DELETED_TABLE,{commentid:e})})},e.COMMENTS_TABLE="core_comments_offline_comments",e.COMMENTS_DELETED_TABLE="core_comments_deleted_offline_comments",e=t=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=n(66),l=n(53),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.sitesProvider=e,this.mimeUtils=t,this.ROOT_CACHE_KEY="mmaFiles:"}return e.prototype.canGetPrivateFilesInfo=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_user_get_private_files_info")},e.prototype.canViewPrivateFiles=function(){return this.sitesProvider.getCurrentSite().canAccessMyFiles()&&!this.isPrivateFilesDisabledInSite()},e.prototype.canViewSiteFiles=function(){return!this.isSiteFilesDisabledInSite()},e.prototype.canUploadFiles=function(){var e=this.sitesProvider.getCurrentSite();return e.canAccessMyFiles()&&e.canUploadFiles()&&!this.isUploadDisabledInSite()},e.prototype.getFiles=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={cacheKey:n.getFilesListCacheKey(e),updateFrequency:l.a.FREQUENCY_SOMETIMES};return t.read("core_files_get_files",e,o)}).then(function(e){var t=[];return e.files&&e.files.forEach(function(e){e.isdir&&(e.link={contextid:e.contextid||null,component:e.component||"",filearea:e.filearea||"",itemid:e.itemid||0,filepath:e.filepath||"",filename:e.filename||""},e.component&&(e.link.filename="")),e.imgPath=e.isdir?n.mimeUtils.getFolderIcon():n.mimeUtils.getFileIcon(e.filename),t.push(e)}),t})},e.prototype.getFilesListCacheKey=function(e){return this.ROOT_CACHE_KEY+"list:"+(e.component?"my":"site")+":"+e.contextid+":"+e.filepath},e.prototype.getPrivateFiles=function(){return this.getFiles(this.getPrivateFilesRootParams())},e.prototype.getPrivateFilesRootParams=function(){return{contextid:-1,component:"user",filearea:"private",contextlevel:"user",instanceid:this.sitesProvider.getCurrentSite().getUserId(),itemid:0,filepath:"",filename:""}},e.prototype.getPrivateFilesInfo=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={userid:e=e||t.getUserId()},r={cacheKey:n.getPrivateFilesInfoCacheKey(e),updateFrequency:l.a.FREQUENCY_SOMETIMES};return t.read("core_user_get_private_files_info",o,r)})},e.prototype.getPrivateFilesInfoCacheKey=function(e){return this.getPrivateFilesInfoCommonCacheKey()+":"+e},e.prototype.getPrivateFilesInfoCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"privateInfo"},e.prototype.getSiteFiles=function(){return this.getFiles(this.getSiteFilesRootParams())},e.prototype.getSiteFilesRootParams=function(){return{contextid:0,component:"",filearea:"",itemid:0,filepath:"",filename:""}},e.prototype.invalidateDirectory=function(e,t,n){var o,r=this;return t?o=t:"site"===e?o=this.getSiteFilesRootParams():"my"===e&&(o=this.getPrivateFilesRootParams()),this.sitesProvider.getSite(n).then(function(e){return e.invalidateWsCacheForKey(r.getFilesListCacheKey(o))})},e.prototype.invalidatePrivateFilesInfo=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(t.getPrivateFilesInfoCommonCacheKey())})},e.prototype.invalidatePrivateFilesInfoForUser=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return e=e||t.getUserId(),t.invalidateWsCacheForKey(n.getPrivateFilesInfoCacheKey(e))})},e.prototype.isDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isDisabledInSite(e)})},e.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_AddonFiles")},e.prototype.isPluginEnabled=function(){return this.canViewPrivateFiles()||this.canViewSiteFiles()||this.canUploadFiles()},e.prototype.isPrivateFilesDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isPrivateFilesDisabledInSite(e)})},e.prototype.isPrivateFilesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesPrivateFiles")},e.prototype.isSiteFilesDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isSiteFilesDisabledInSite(e)})},e.prototype.isSiteFilesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesSiteFiles")},e.prototype.isUploadDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isUploadDisabledInSite(e)})},e.prototype.isUploadDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesUpload")},e.prototype.moveFromDraftToPrivate=function(e,t){var n={draftid:e},o={responseExpected:!1};return this.sitesProvider.getSite(t).then(function(e){return e.write("core_user_add_user_private_files",n,o)})},e.prototype.versionCanUploadFiles=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.isVersionGreaterEqualThan("3.1.1")})},e.PRIVATE_FILES_COMPONENT="mmaFilesMy",e.SITE_FILES_COMPONENT="mmaFilesSite",e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(60),i=n(198),l=n(9),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n,o){this.injector=e,this.blockDelegate=t,this.eventsProvider=o,this.data={},this.loaded=!1,this.differ=n.find([]).create()}return e.prototype.ngOnInit=function(){this.block?this.block.visible&&this.initBlock():this.loaded=!0},e.prototype.ngDoCheck=function(){if(this.data){this.differ.diff(this.extraData)&&(this.data=Object.assign(this.data,this.extraData||{}))}},e.prototype.initBlock=function(){var e=this;this.blockDelegate.getBlockDisplayData(this.injector,this.block,this.contextLevel,this.instanceId).then(function(t){t?(e.class=t.class,e.componentClass=t.component,e.data=Object.assign({title:t.title,block:e.block,contextLevel:e.contextLevel,instanceId:e.instanceId,link:t.link||null,linkParams:t.linkParams||null},e.extraData||{},t.componentData||{})):e.blockSubscription=e.blockDelegate.blocksUpdateObservable.subscribe(function(){e.blockSubscription.unsubscribe(),delete e.blockSubscription,e.initBlock()})}).catch(function(){}).finally(function(){e.loaded=!0})},e.prototype.ngOnDestroy=function(){this.blockSubscription&&(this.blockSubscription.unsubscribe(),delete this.blockSubscription)},e.prototype.doRefresh=function(e,t,n){return void 0===n&&(n=!1),this.dynamicComponent?Promise.resolve(this.dynamicComponent.callComponentFunction("doRefresh",[e,t,n])):Promise.resolve()},e.prototype.invalidate=function(){return this.dynamicComponent?Promise.resolve(this.dynamicComponent.callComponentFunction("invalidateContent")):Promise.resolve()},a([Object(o._9)(i.a),s("design:type",i.a)],e.prototype,"dynamicComponent",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"block",void 0),a([Object(o.D)(),s("design:type",String)],e.prototype,"contextLevel",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"instanceId",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"extraData",void 0),e=a([Object(o.m)({selector:"core-block",templateUrl:"core-block.html"}),s("design:paramtypes",[o.C,r.a,o.F,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(53),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.sitesProvider=e,this.ROOT_CACHE_KEY="CoreCoursesDashboard:"}return e.prototype.getDashboardBlocksCacheKey=function(e){return void 0===e&&(e=0),this.ROOT_CACHE_KEY+"blocks:"+e},e.prototype.getDashboardBlocks=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){var o={returncontents:1},r={cacheKey:n.getDashboardBlocksCacheKey(e),updateFrequency:i.a.FREQUENCY_RARELY};return e&&(o.userid=e),t.read("core_block_get_dashboard_blocks",o,r).then(function(e){return e.blocks||[]})})},e.prototype.invalidateDashboardBlocks=function(e,t){var n=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(n.getDashboardBlocksCacheKey(e))})},e.prototype.isAvailable=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return!t.isDisabledInSite(e)&&e.wsAvailable("core_block_get_dashboard_blocks")})},e.prototype.isDisabled=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.isDisabledInSite(e)})},e.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreCoursesDashboard")},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(3),i=n(11),l=n(2),a=n(58),s=n(61),u=n(50),c=n(38),d=n(156),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.sitePluginsProvider=e,this.courseHelper=t,this.prefetchDelegate=n,this.textUtils=o,this.translate=r,this.utils=i,this.moduleDelegate=l,this.displayOpenInBrowser=!0,this.displayDescription=!0,this.displayRefresh=!0,this.displayPrefetch=!0,this.displaySize=!0,this.isDestroyed=!1}return e.prototype.ngOnInit=function(){if(this.refreshIcon="spinner",this.module){var e=this.moduleDelegate.getHandlerName(this.module.modname),t=this.sitePluginsProvider.getSitePluginHandler(e);t&&(this.component=t.plugin.component,this.method=t.handlerSchema.method,this.args={courseid:this.courseId,cmid:this.module.id},this.initResult=t.initResult,this.jsData={module:this.module,courseId:this.courseId},this.displayOpenInBrowser=!this.utils.isFalseOrZero(t.handlerSchema.displayopeninbrowser),this.displayDescription=!this.utils.isFalseOrZero(t.handlerSchema.displaydescription),this.displayRefresh=!this.utils.isFalseOrZero(t.handlerSchema.displayrefresh),this.displayPrefetch=!this.utils.isFalseOrZero(t.handlerSchema.displayprefetch),this.displaySize=!this.utils.isFalseOrZero(t.handlerSchema.displaysize)),this.description=this.module.description,this.externalUrl=this.module.url}},e.prototype.doRefresh=function(e,t){return this.content?(this.refreshIcon="spinner",Promise.resolve(this.content.refreshContent(!1)).finally(function(){e&&e.complete(),t&&t()})):(e&&e.complete(),t&&t(),Promise.resolve())},e.prototype.contentLoaded=function(e){this.refreshIcon="refresh",this.prefetchDelegate.getPrefetchHandlerFor(this.module)&&this.courseHelper.fillContextMenu(this,this.module,this.courseId,e,this.component)},e.prototype.contentLoading=function(e){this.refreshIcon="spinner"},e.prototype.expandDescription=function(){this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,[],!0,"module",this.module.id,this.courseId)},e.prototype.prefetch=function(){this.courseHelper.contextMenuPrefetch(this,this.module,this.courseId)},e.prototype.removeFiles=function(){this.courseHelper.confirmAndRemoveFiles(this.module,this.courseId)},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.statusObserver&&this.statusObserver.off()},e.prototype.callComponentFunction=function(e,t){return this.content.callComponentFunction(e,t)},f([Object(o.D)(),p("design:type",Object)],e.prototype,"module",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"courseId",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"pageTitle",void 0),f([Object(o._9)(d.a),p("design:type",d.a)],e.prototype,"content",void 0),e=f([Object(o.m)({selector:"core-site-plugins-module-index",templateUrl:"core-siteplugins-module-index.html"}),p("design:paramtypes",[a.a,c.a,u.a,i.a,r.c,l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(98),i=n(9),l=n(6),a=n(1),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,"AddonMessageOutputDelegate",t,n,o)||this;return r.loggerProvider=t,r.sitesProvider=n,r.eventsProvider=o,r.handlerNameProperty="processorName",r}return s(t,e),t.prototype.getDisplayData=function(e){return this.executeFunctionOnEnabled(e.name,"getDisplayData",e)},t=u([Object(o.A)(),c("design:paramtypes",[l.a,a.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";function o(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"img",[["alt",""],["core-external-content",""]],null,null,null,null,null)),b._30(1,4734976,null,0,P.a,[b.t,O.a,E.a,C.a,I.a,R.a,S.a,w.a,A.a],{src:[0,"src"]},null)],function(e,t){e(t,1,0,t.component.course.courseImage)},null)}function r(e){return b._57(0,[(e()(),b._31(0,0,null,null,2,"span",[["class","core-course-category"]],null,null,null,null,null)),(e()(),b._31(1,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),b._30(2,540672,null,0,D.a,[b.t,I.a,R.a,j.a,k.a,C.a,A.a,S.a,O.a,E.a,w.a,T.a,[2,x.a],[2,M.a],[2,N.a],U.a,F.a,L.a,H.a,B.a,b._11],{text:[0,"text"]},null)],function(e,t){e(t,2,0,t.component.course.categoryname)},null)}function i(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"span",[["class","core-course-category"]],null,null,null,null,null)),(e()(),b._55(-1,null,[" | "]))],null,null)}function l(e){return b._57(0,[(e()(),b._31(0,0,null,null,2,"span",[["class","core-course-shortname"]],null,null,null,null,null)),(e()(),b._31(1,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),b._30(2,540672,null,0,D.a,[b.t,I.a,R.a,j.a,k.a,C.a,A.a,S.a,O.a,E.a,w.a,T.a,[2,x.a],[2,M.a],[2,N.a],U.a,F.a,L.a,H.a,B.a,b._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null)],function(e,t){var n=t.component;e(t,2,0,n.course.shortname,"course",n.course.id)},null)}function a(e){return b._57(0,[(e()(),b._31(0,0,null,null,10,"p",[["class","core-course-additional-info"]],null,null,null,null,null)),(e()(),b._55(-1,null,["\n                "])),(e()(),b._26(16777216,null,null,1,null,r)),b._30(3,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n                "])),(e()(),b._26(16777216,null,null,1,null,i)),b._30(6,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n                "])),(e()(),b._26(16777216,null,null,1,null,l)),b._30(9,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,3,0,n.course.categoryname);e(t,6,0,n.course.categoryname&&n.course.displayname&&n.course.shortname&&n.course.fullname!=n.course.displayname);e(t,9,0,n.course.displayname&&n.course.shortname&&n.course.fullname!=n.course.displayname)},null)}function s(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"core-icon",[["name","fa-star"]],null,null,null,G.b,G.a)),b._30(1,704512,null,0,V.a,[b.t,K.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"fa-star")},null)}function u(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"core-icon",[],null,null,null,G.b,G.a)),b._30(1,704512,null,0,V.a,[b.t,K.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,t.component.prefetchCourseData.prefetchCourseIcon)},null)}function c(e){return b._57(0,[(e()(),b._31(0,0,null,null,2,"ion-icon",[["color","success"],["name","cloud-done"],["role","img"]],[[1,"aria-label",0],[2,"hide",null]],null,null,null,null)),b._30(1,147456,null,0,W.a,[K.a,b.t,b.V],{color:[0,"color"],name:[1,"name"]},null),b._47(131072,z.a,[k.a,b.j])],function(e,t){e(t,1,0,"success","cloud-done")},function(e,t){e(t,0,0,b._56(t,0,0,b._44(t,2).transform("core.downloaded")),b._44(t,1)._hidden)})}function d(e){return b._57(0,[(e()(),b._31(0,0,null,null,9,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.prefetchCourse(n)&&o}return o},$.b,$.a)),b._30(1,1097728,[[2,4]],0,Y.a,[[8,""],K.a,b.t,b.V],{color:[0,"color"],clear:[1,"clear"]},null),b._47(131072,z.a,[k.a,b.j]),(e()(),b._55(-1,0,["\n                "])),(e()(),b._26(16777216,null,0,1,null,u)),b._30(5,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,0,["\n                "])),(e()(),b._26(16777216,null,0,1,null,c)),b._30(8,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,0,["\n            "]))],function(e,t){var n=t.component;e(t,1,0,"dark","");e(t,5,0,!n.prefetchCourseData.downloadSucceeded);e(t,8,0,n.prefetchCourseData.downloadSucceeded)},function(e,t){var n=t.component;e(t,0,0,b._56(t,0,0,b._44(t,2).transform(n.prefetchCourseData.title)))})}function f(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Q.b,Q.a)),b._30(1,114688,null,0,X.a,[K.a,b.t,b.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,b._44(t,1)._paused)})}function p(e){return b._57(0,[(e()(),b._31(0,0,null,null,9,"div",[["class","core-button-spinner"]],null,null,null,null,null)),(e()(),b._55(-1,null,["\n            "])),(e()(),b._55(-1,null,["\n            "])),(e()(),b._26(16777216,null,null,1,null,d)),b._30(4,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n            "])),(e()(),b._55(-1,null,["\n            "])),(e()(),b._26(16777216,null,null,1,null,f)),b._30(8,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,4,0,"spinner"!=n.prefetchCourseData.prefetchCourseIcon);e(t,8,0,"spinner"==n.prefetchCourseData.prefetchCourseIcon)},null)}function h(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Q.b,Q.a)),b._30(1,114688,null,0,X.a,[K.a,b.t,b.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,b._44(t,1)._paused)})}function m(e){return b._57(0,[(e()(),b._31(0,0,null,null,2,"ion-icon",[["class","core-icon-downloaded"],["color","success"],["name","cloud-done"],["role","img"]],[[1,"aria-label",0],[2,"hide",null]],null,null,null,null)),b._30(1,147456,[[3,4]],0,W.a,[K.a,b.t,b.V],{color:[0,"color"],name:[1,"name"]},null),b._47(131072,z.a,[k.a,b.j])],function(e,t){e(t,1,0,"success","cloud-done")},function(e,t){e(t,0,0,b._56(t,0,0,b._44(t,2).transform("core.downloaded")),b._44(t,1)._hidden)})}function _(e){return b._57(0,[(e()(),b._31(0,0,null,null,6,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showCourseOptionsMenu(n)&&o}return o},$.b,$.a)),b._30(1,1097728,[[2,4]],0,Y.a,[[8,""],K.a,b.t,b.V],{color:[0,"color"],clear:[1,"clear"]},null),b._47(131072,z.a,[k.a,b.j]),(e()(),b._55(-1,0,["\n                "])),(e()(),b._31(4,0,null,0,1,"core-icon",[["name","more"]],null,null,null,G.b,G.a)),b._30(5,704512,null,0,V.a,[b.t,K.a],{name:[0,"name"]},null),(e()(),b._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"dark","");e(t,5,0,"more")},function(e,t){e(t,0,0,b._56(t,0,0,b._44(t,2).transform("core.displayoptions")))})}function g(e){return b._57(0,[(e()(),b._31(0,0,null,null,13,"div",[["class","core-button-spinner"]],null,null,null,null,null)),(e()(),b._55(-1,null,["\n            "])),(e()(),b._55(-1,null,["\n            "])),(e()(),b._26(16777216,null,null,1,null,h)),b._30(4,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n\n            "])),(e()(),b._55(-1,null,["\n             "])),(e()(),b._26(16777216,null,null,1,null,m)),b._30(8,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n\n            "])),(e()(),b._55(-1,null,["\n            "])),(e()(),b._26(16777216,null,null,1,null,_)),b._30(12,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,4,0,n.downloadCourseEnabled&&"spinner"==n.prefetchCourseData.prefetchCourseIcon||n.showSpinner);e(t,8,0,n.downloadCourseEnabled&&n.prefetchCourseData.downloadSucceeded&&!n.showSpinner);e(t,12,0,!n.showSpinner)},null)}function v(e){return b._57(0,[(e()(),b._31(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,J.b,J.a)),b._30(1,1097728,null,3,Z.a,[ee.a,K.a,b.t,b.V,[2,te.a]],null,null),b._52(335544320,4,{contentLabel:0}),b._52(603979776,5,{_buttons:1}),b._52(603979776,6,{_icons:1}),b._30(5,16384,null,0,ne.a,[],null,null),(e()(),b._55(-1,2,["\n        "])),(e()(),b._31(7,0,null,2,1,"core-progress-bar",[],null,null,null,oe.b,oe.a)),b._30(8,573440,null,0,re.a,[ie.c],{progress:[0,"progress"]},null),(e()(),b._55(-1,2,["\n    "]))],function(e,t){e(t,8,0,t.component.course.progress)},null)}function y(e){return b._57(0,[(e()(),b._31(0,0,null,null,42,"ion-card",[],[[1,"course-color",0]],null,null,null,null)),b._30(1,16384,null,0,le.a,[K.a,b.t,b.V],null,null),(e()(),b._55(-1,null,["\n    "])),(e()(),b._31(3,0,null,null,4,"div",[["class","core-course-thumb"]],[[2,"core-course-color-img",null],[4,"background-color",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.openCourse(r.course)&&o}return o},null,null)),(e()(),b._55(-1,null,["\n        "])),(e()(),b._26(16777216,null,null,1,null,o)),b._30(6,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n    "])),(e()(),b._55(-1,null,["\n    "])),(e()(),b._31(9,0,null,null,27,"ion-item",[["class","core-course-link item item-block"],["detail-none",""],["tappable",""],["text-wrap",""]],[[8,"title",0],[2,"item-disabled",null],[2,"core-course-more-than-title",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.openCourse(r.course)&&o}return o},J.b,J.a)),b._30(10,1097728,null,3,Z.a,[ee.a,K.a,b.t,b.V,[2,te.a]],null,null),b._52(335544320,1,{contentLabel:0}),b._52(603979776,2,{_buttons:1}),b._52(603979776,3,{_icons:1}),b._30(14,16384,null,0,ne.a,[],null,null),(e()(),b._55(-1,2,["\n        "])),(e()(),b._31(16,0,null,2,13,"div",[["class","core-course-title"]],[[2,"core-course-with-buttons",null]],null,null,null,null)),(e()(),b._55(-1,null,["\n            "])),(e()(),b._26(16777216,null,null,1,null,a)),b._30(19,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n            "])),(e()(),b._31(21,0,null,null,7,"h2",[],null,null,null,null,null)),(e()(),b._55(-1,null,["\n                "])),(e()(),b._26(16777216,null,null,1,null,s)),b._30(24,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n                "])),(e()(),b._31(26,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),b._30(27,540672,null,0,D.a,[b.t,I.a,R.a,j.a,k.a,C.a,A.a,S.a,O.a,E.a,w.a,T.a,[2,x.a],[2,M.a],[2,N.a],U.a,F.a,L.a,H.a,B.a,b._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),b._55(-1,null,["\n            "])),(e()(),b._55(-1,null,["\n        "])),(e()(),b._55(-1,2,["\n\n        "])),(e()(),b._26(16777216,null,2,1,null,p)),b._30(32,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,2,["\n\n        "])),(e()(),b._26(16777216,null,2,1,null,g)),b._30(35,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,2,["\n    "])),(e()(),b._55(-1,null,["\n    "])),(e()(),b._26(16777216,null,null,1,null,v)),b._30(39,16384,null,0,q.k,[b._11,b._6],{ngIf:[0,"ngIf"]},null),(e()(),b._55(-1,null,["\n    "])),b._43(null,0),(e()(),b._55(-1,null,["\n"])),(e()(),b._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,6,0,n.course.courseImage);e(t,19,0,n.course.categoryname||n.course.displayname&&n.course.shortname&&n.course.fullname!=n.course.displayname);e(t,24,0,n.course.isfavourite);e(t,27,0,n.course.fullname,"course",n.course.id);e(t,32,0,n.downloadCourseEnabled&&!n.courseOptionMenuEnabled&&n.showDownload);e(t,35,0,n.courseOptionMenuEnabled);e(t,39,0,n.showAll&&null!=n.course.progress&&n.course.progress>=0&&!1!==n.course.completionusertracked)},function(e,t){var n=t.component;e(t,0,0,n.course.color?null:n.course.colorNumber);e(t,3,0,n.course.courseImage,n.course.color);e(t,9,0,n.course.displayname||n.course.fullname,0==n.course.visible,null!=n.course.progress&&n.course.progress>=0);e(t,16,0,n.courseOptionMenuEnabled||n.downloadCourseEnabled&&n.showDownload)})}n.d(t,"a",function(){return pe}),t.b=y;var b=n(0),P=n(229),O=n(6),E=n(18),C=n(16),I=n(1),R=n(4),S=n(22),w=n(10),A=n(2),D=n(48),j=n(11),k=n(17),T=n(15),x=n(21),M=n(29),N=n(28),U=n(44),F=n(9),L=n(41),H=n(32),B=n(36),q=n(7),G=n(80),V=n(75),K=n(8),W=n(47),z=n(25),$=n(45),Y=n(42),Q=n(121),X=n(101),J=n(30),Z=n(20),ee=n(19),te=n(27),ne=n(33),oe=n(485),re=n(319),ie=n(79),le=n(89),ae=n(293),se=n(38),ue=n(13),ce=n(52),de=n(70),fe=n(46),pe=b._29({encapsulation:2,styles:[],data:{}});b._27("core-courses-course-progress",ae.a,function(e){return b._57(0,[(e()(),b._31(0,0,null,null,1,"core-courses-course-progress",[],null,null,null,y,pe)),b._30(1,245760,null,0,ae.a,[[2,x.a],se.a,R.a,ue.a,F.a,I.a,ce.a,de.a,fe.a],null,null)],function(e,t){e(t,1,0)},null)},{course:"course",showAll:"showAll",showDownload:"showDownload"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(11),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.textUtils=e,this.action=new o.v}return e.prototype.showInfo=function(){this.textUtils.expandText(this.title,this.info,this.component,this.componentId,[],!0,this.contextLevel,this.contextInstanceId,this.courseId)},i([Object(o.D)(),l("design:type",Object)],e.prototype,"previous",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"next",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"info",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"title",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"component",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"componentId",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"contextLevel",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"contextInstanceId",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"courseId",void 0),i([Object(o.O)(),l("design:type",o.v)],e.prototype,"action",void 0),e=i([Object(o.m)({selector:"core-navigation-bar",templateUrl:"core-navigation-bar.html"}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(13),i=n(61),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.courseProvider=e,this.moduleDelegate=t}return e.prototype.ngOnInit=function(){this.isDisabledInSite=this.moduleDelegate.isModuleDisabledInSite(this.module.modname),this.isSupportedByTheApp=this.moduleDelegate.hasHandler(this.module.modname),this.moduleName=this.courseProvider.translateModuleName(this.module.modname)},l([Object(o.D)(),a("design:type",Number)],e.prototype,"courseId",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"module",void 0),e=l([Object(o.m)({selector:"core-course-unsupported-module",templateUrl:"core-course-unsupported-module.html"}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(148),l=n(6),a=n(1),s=n(10),u=n(2),c=n(11),d=n(24),f=n(9),p=n(81),h=n(352),m=n(13),_=n(65),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f){var p=e.call(this,"CoreCourseSyncProvider",n,t,o,c,u,a,d)||this;return p.sitesProvider=t,p.appProvider=o,p.courseOffline=r,p.eventsProvider=i,p.courseProvider=l,p.utils=s,p.textUtils=u,p.logHelper=f,p}return g(t,e),n=t,t.prototype.syncAllCourses=function(e,t){return this.syncOnSites("courses",this.syncAllCoursesFunc.bind(this),[t],e)},t.prototype.syncAllCoursesFunc=function(e,t){var o=this,r=[];return r.push(this.logHelper.syncSite(e)),r.push(this.courseOffline.getAllManualCompletions(e).then(function(r){var i=r.map(function(r){return(t?o.syncCourse(r.courseid,e):o.syncCourseIfNeeded(r.courseid,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{courseId:r.courseid,warnings:t.warnings},e)})});return Promise.all(i)})),Promise.all(r)},t.prototype.syncCourseIfNeeded=function(e,t){return this.syncCourse(e,t)},t.prototype.syncCourse=function(e,t){var n=this;if(t=t||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,t))return this.getOngoingSync(e,t);this.logger.debug("Try to sync course '"+e+"'");var o={warnings:[],updated:!1},r=this.courseOffline.getCourseManualCompletions(e,t).catch(function(){return[]}).then(function(r){if(r&&r.length)return n.appProvider.isOnline()?n.courseProvider.getActivitiesCompletionStatus(e,t,void 0,!1,!0,!1).then(function(i){var l=[];return r.forEach(function(r){var a=i[r.cmid];l.push(a&&1e3*a.timecompleted>r.timecompleted?n.courseOffline.deleteManualCompletion(r.cmid,t).then(function(){a.state!=r.completed&&o.warnings.push(n.translate.instant("core.course.warningofflinemanualcompletiondeleted",{name:r.coursename||e,error:n.translate.instant("core.course.warningmanualcompletionmodified")}))}):n.courseProvider.markCompletedManuallyOnline(r.cmid,r.completed,t).then(function(){return o.updated=!0,n.courseOffline.deleteManualCompletion(r.cmid,t)}).catch(function(i){return n.utils.isWebServiceError(i)?(o.updated=!0,n.courseOffline.deleteManualCompletion(r.cmid,t).then(function(){o.warnings.push(n.translate.instant("core.course.warningofflinemanualcompletiondeleted",{name:r.coursename||e,error:n.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)}))}),Promise.all(l)}):Promise.reject(null)}).then(function(){if(o.updated)return n.courseProvider.invalidateSections(e,t).then(function(){return n.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")?n.courseProvider.getSections(e,!1,!0,void 0,t):n.courseProvider.getActivitiesCompletionStatus(e,t)}).catch(function(){})}).then(function(){return n.setSyncTime(e,t)}).then(function(){return o});return this.addOngoingSync(e,r,t)},t.AUTO_SYNCED="core_course_autom_synced",t=n=v([Object(o.A)(),y("design:paramtypes",[a.a,l.a,s.a,h.a,f.a,m.a,r.c,u.a,c.a,p.a,d.a,_.a])],t);var n}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(221),p=n(32),h=n(56),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,t,n,o,r,i,l,a,s,u)||this;return d.bookProvider=c,d.name="AddonModBook",d.modName="book",d.component=f.a.COMPONENT,d.updatesNames=/^configuration$|^.*files$|^entries$/,d}return m(t,e),t.prototype.downloadOrPrefetch=function(t,n,o,r){var i=[];return i.push(e.prototype.downloadOrPrefetch.call(this,t,n,o)),i.push(this.bookProvider.getBook(n,t.id).catch(function(){})),Promise.all(i)},t.prototype.getIntroFiles=function(e,t){var n=this;return this.bookProvider.getBook(t,e.id).catch(function(){}).then(function(t){return n.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.bookProvider.invalidateContent(e,t)},t.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},t=_([Object(o.A)(),g("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,p.a,h.a,f.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(71),d=n(24),f=n(153),p=n(13),h=n(142),m=n(97),_=n(328),g=n(217),v=n(32),y=n(56),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,_){var g=e.call(this,t,n,o,r,i,l,a,s,u)||this;return g.dataProvider=c,g.timeUtils=d,g.dataHelper=f,g.groupsProvider=p,g.commentsProvider=h,g.syncProvider=_,g.name="AddonModData",g.modName="data",g.component=m.a.COMPONENT,g.updatesNames=/^configuration$|^.*files$|^entries$|^gradeitems$|^outcomes$|^comments$|^ratings/,g}return b(t,e),t.prototype.getAllUniqueEntries=function(e,t,n,o,r){var i=this;void 0===n&&(n=!1),void 0===o&&(o=!1);var l=t.map(function(t){return i.dataProvider.fetchAllEntries(e,t.id,void 0,void 0,void 0,n,o,r)});return Promise.all(l).then(function(e){var t={};return e.forEach(function(e){e.forEach(function(e){t[e.id]=e})}),i.utils.objectToArray(t)})},t.prototype.getDatabaseInfoHelper=function(e,t,n,o,r,i){var l=this;void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r=!1);var a,s=[],u=[],c=[];return i=i||this.sitesProvider.getCurrentSiteId(),this.dataProvider.getDatabase(t,e.id,i,o).then(function(t){return c=l.getIntroFilesFromInstance(e,t),a=t,l.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,i).then(function(e){return e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),s=e.groups,l.getAllUniqueEntries(a.id,s,o,r,i)})}).then(function(e){return u=e,c=c.concat(l.getEntriesFiles(u)),{database:a,groups:s,entries:u,files:c}}).catch(function(e){return n?{database:a,groups:s,entries:u,files:c}:Promise.reject(e)})},t.prototype.getEntriesFiles=function(e){var t=this,n=[];return e.forEach(function(e){t.utils.objectToArray(e.contents).forEach(function(e){n=n.concat(e.files)})}),n},t.prototype.getFiles=function(e,t,n){return this.getDatabaseInfoHelper(e,t,!0).then(function(e){return e.files})},t.prototype.getIntroFiles=function(e,t){var n=this;return this.dataProvider.getDatabase(t,e.id).catch(function(){}).then(function(t){return n.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.dataProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.dataProvider.invalidateDatabaseData(t)),n.push(this.dataProvider.invalidateDatabaseAccessInformationData(e.instance)),Promise.all(n)},t.prototype.isDownloadable=function(e,t){var n=this;return this.dataProvider.getDatabase(t,e.id,void 0,!0).then(function(e){return n.dataProvider.getDatabaseAccessInformation(e.id).then(function(t){if(!t.timeavailable){var o=n.timeUtils.timestamp();if(e.timeavailablefrom&&o<e.timeavailablefrom)return!1;if(e.timeavailableto&&o>e.timeavailableto)return!1}return!0})})},t.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchDatabase.bind(this))},t.prototype.prefetchDatabase=function(e,t,n,o){var r=this;return this.getDatabaseInfoHelper(e,t,!1,!1,!0,o).then(function(t){var n=t.database,i=!r.commentsProvider.areCommentsDisabledInSite(),l=[];return l.push(r.dataProvider.getFields(n.id,!1,!0,o)),l.push(r.filepoolProvider.addFilesToQueue(o,t.files,r.component,e.id)),t.groups.forEach(function(e){l.push(r.dataProvider.getDatabaseAccessInformation(n.id,e.id,!1,!0,o))}),t.entries.forEach(function(e){l.push(r.dataProvider.getEntry(n.id,e.id,!0,o)),i&&n.comments&&l.push(r.commentsProvider.getComments("module",n.coursemodule,"mod_data",e.id,"database_entry",0,o))}),l.push(r.courseProvider.getModuleBasicInfoByInstance(n.id,"data",o)),Promise.all(l)})},t.prototype.sync=function(e,t,n){var o=[this.syncProvider.syncDatabase(e.instance,n),this.syncProvider.syncRatings(e.id,!0,n)];return Promise.all(o).then(function(e){return e.reduce(function(e,t){return{updated:e.updated||t.updated,warnings:(e.warnings||[]).concat(t.warnings||[])}},{updated:!1})})},t=P([Object(o.A)(),O("design:paramtypes",[r.c,i.a,u.a,p.a,l.a,a.a,s.a,v.a,y.a,m.a,d.a,g.a,c.a,f.a,_.a])],t)}(h.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(6),i=n(1),l=n(4),a=n(136),s=n(125),u=n(41),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.domUtils=e,this.filterProvider=t,this.sitesProvider=n,this.loginHelper=o,this.pushNotificationsProvider=i,this.logger=r.getInstance("CoreLoginSitesPage")}return e.prototype.ionViewDidLoad=function(){var e=this;this.sitesProvider.getSortedSites().then(function(t){0==t.length&&e.loginHelper.goToAddSite(!0),e.sites=t.map(function(t){return t.siteUrl=t.siteUrl.replace(/^https?:\/\//,""),t.badge=0,e.pushNotificationsProvider.getSiteCounter(t.id).then(function(e){t.badge=e}),t}),e.showDelete=!1}).catch(function(){})},e.prototype.add=function(){this.loginHelper.goToAddSite(!1,!0)},e.prototype.deleteSite=function(e,t){var n=this;e.stopPropagation();var o=this.sites[t];this.filterProvider.formatText(o.siteName,{clean:!0,singleLine:!0,filter:!1},[],o.id).then(function(e){n.domUtils.showDeleteConfirm("core.login.confirmdeletesite",{sitename:e}).then(function(){n.sitesProvider.deleteSite(o.id).then(function(){n.sites.splice(t,1),n.showDelete=!1,n.sitesProvider.hasSites().then(function(e){e||n.loginHelper.goToAddSite(!0,!0)})}).catch(function(e){n.logger.error("Error deleting site "+o.id,e),n.domUtils.showErrorModalDefault(e,"Delete site failed."),n.domUtils.showErrorModal("core.login.errordeletesite",!0)})}).catch(function(){})})},e.prototype.login=function(e){var t=this,n=this.domUtils.showModalLoading();this.sitesProvider.loadSite(e).then(function(e){if(e)return t.loginHelper.goToSiteInitialPage()}).catch(function(n){t.logger.error("Error loading site "+e,n),t.domUtils.showErrorModalDefault(n,"Error loading site.")}).finally(function(){n.dismiss()})},e.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},e=c([Object(o.m)({selector:"page-core-login-sites",templateUrl:"sites.html"}),d("design:paramtypes",[l.a,u.a,i.a,s.a,r.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(13),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.courseProvider=e}return e.prototype.formatContents=function(e){var t=[],n=[],o=this.courseProvider.getModuleIconSrc("folder");return e.forEach(function(e){if("/"!==e.filepath){var r=n,i=e.filepath,l="";"/"===i.substr(0,1)&&(i=i.substr(1)),"/"===i.substr(i.length-1)&&(i=i.slice(0,-1)),i.split("/").forEach(function(e){l=l+"/"+e;var t=r.find(function(t){return t.name===e});if(t)r=t.contents;else{var n={name:e,fileicon:o,contents:[],filepath:l,type:"folder"};r.push(n),r=n.contents}}),r.push(e)}else t.push(e)}),n.concat(t)},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(46),f=n(142),p=n(71),h=n(135),m=n(254),_=n(32),g=n(56),v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p){var m=e.call(this,t,n,o,r,i,l,a,s,u)||this;return m.userProvider=c,m.groupsProvider=d,m.forumProvider=f,m.syncProvider=p,m.name="AddonModForum",m.modName="forum",m.component=h.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^discussions$/,m}return v(t,e),t.prototype.getFiles=function(e,t,n){var o=this;return this.forumProvider.getForum(t,e.id).then(function(t){var n=o.getIntroFilesFromInstance(e,t);return o.getPostsForPrefetch(t).then(function(e){return n.concat(o.getPostsFiles(e))})}).catch(function(){return[]})},t.prototype.getPostsFiles=function(e){var t=this,n=[],o=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2");return e.forEach(function(e){e.attachments&&e.attachments.length&&(n=n.concat(e.attachments)),o&&e.messageinlinefiles&&e.messageinlinefiles.length?n=n.concat(e.messageinlinefiles):e.message&&!o&&(n=n.concat(t.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.message)))}),n},t.prototype.getPostsForPrefetch=function(e){var t=this,n=this.forumProvider.getAvailableSortOrders().map(function(n){return t.forumProvider.getDiscussionsInPages(e.id,n.value,!1,2).then(function(e){if(e.error)return Promise.reject(null);var n=[];return e.discussions.forEach(function(e){n.push(t.forumProvider.getDiscussionPosts(e.discussion))}),Promise.all(n)})});return Promise.all(n).then(function(e){var t=[],n={};return e.forEach(function(e){e.forEach(function(e){e.posts.forEach(function(e){n[e.id]||(n[e.id]=!0,t.push(e))})})}),t})},t.prototype.invalidateContent=function(e,t){return this.forumProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.forumProvider.invalidateForumData(t)),n.push(this.courseProvider.invalidateModule(e.id)),Promise.all(n)},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchForum.bind(this))},t.prototype.prefetchForum=function(e,t,n,o){var r=this;return this.forumProvider.getForum(t,e.id).then(function(n){var i=[];return i.push(r.getPostsForPrefetch(n).then(function(i){var l=[],a={};i.forEach(function(e){e.userpictureurl&&(a[e.userpictureurl]=!0)});var s=Object.keys(a).map(function(e){return{fileurl:e}}),u=r.getIntroFilesFromInstance(e,n).concat(r.getPostsFiles(i)).concat(s);return l.push(r.filepoolProvider.addFilesToQueue(o,u,r.component,e.id)),l.push(r.prefetchGroupsInfo(n,t,n.cancreatediscussions)),Promise.all(l)})),i.push(r.forumProvider.getAccessInformation(n.id)),r.forumProvider.isDiscussionListSortingAvailable()&&i.push(r.userProvider.getUserPreference(h.a.PREFERENCE_SORTORDER)),Promise.all(i)})},t.prototype.prefetchGroupsInfo=function(e,t,n){var o=this;return this.groupsProvider.getActivityGroupMode(e.cmid).then(function(t){return t!==p.a.SEPARATEGROUPS&&t!==p.a.VISIBLEGROUPS?o.forumProvider.canAddDiscussionToAll(e.id).catch(function(){}):o.groupsProvider.getActivityAllowedGroups(e.cmid).then(function(r){return t===p.a.SEPARATEGROUPS?o.forumProvider.canAddDiscussionToAll(e.id).catch(function(){}):n?o.forumProvider.canAddDiscussionToAll(e.id).catch(function(){return{status:!1}}).then(function(t){if(!t.status){var n=[];return r.groups.forEach(function(t){n.push(o.forumProvider.canAddDiscussion(e.id,t.id).catch(function(){}))}),Promise.all(n)}}):void 0})}).catch(function(e){if(n)return Promise.reject(e)})},t.prototype.sync=function(e,t,n){var o=[];return o.push(this.syncProvider.syncForumDiscussions(e.instance,void 0,n)),o.push(this.syncProvider.syncForumReplies(e.instance,void 0,n)),o.push(this.syncProvider.syncRatings(e.id,void 0,!0,n)),Promise.all(o).then(function(e){return e.reduce(function(e,t){return{updated:e.updated||t.updated,warnings:(e.warnings||[]).concat(t.warnings||[])}},{updated:!1})})},t=y([Object(o.A)(),b("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,_.a,g.a,d.a,p.a,h.a,m.a])],t)}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(153),f=n(142),p=n(203),h=n(362),m=n(32),_=n(56),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f){var h=e.call(this,t,n,o,r,i,l,a,s,u)||this;return h.glossaryProvider=c,h.commentsProvider=d,h.syncProvider=f,h.name="AddonModGlossary",h.modName="glossary",h.component=p.a.COMPONENT,h.updatesNames=/^configuration$|^.*files$|^entries$/,h}return g(t,e),t.prototype.getFiles=function(e,t,n){var o=this;return this.glossaryProvider.getGlossary(t,e.id).then(function(t){return o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByLetter,[t.id,"ALL"]).then(function(n){return o.getFilesFromGlossaryAndEntries(e,t,n)})}).catch(function(){return[]})},t.prototype.getFilesFromGlossaryAndEntries=function(e,t,n){var o=this,r=this.getIntroFilesFromInstance(e,t),i=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2");return n.forEach(function(e){r=r.concat(e.attachments),i&&e.definitioninlinefiles&&e.definitioninlinefiles.length?r=r.concat(e.definitioninlinefiles):e.definition&&!i&&(r=r.concat(o.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.definition)))}),r},t.prototype.invalidateContent=function(e,t){return this.glossaryProvider.invalidateContent(e,t)},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchGlossary.bind(this))},t.prototype.prefetchGlossary=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.glossaryProvider.getGlossary(t,e.id,o).then(function(t){var n=[];return t.browsemodes.forEach(function(e){switch(e){case"letter":break;case"cat":n.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByCategory,[t.id,p.a.SHOW_ALL_CATEGORIES],!1,!1,o));break;case"date":n.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByDate,[t.id,"CREATION","DESC"],!1,!1,o)),n.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByDate,[t.id,"UPDATE","DESC"],!1,!1,o));break;case"author":n.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByAuthor,[t.id,"ALL","LASTNAME","ASC"],!1,!1,o))}}),n.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByLetter,[t.id,"ALL"],!1,!1,o).then(function(n){var i=[],l=!r.commentsProvider.areCommentsDisabledInSite(),a={};n.forEach(function(e){e.userpictureurl&&(a[e.userpictureurl]=!0),t.allowcomments&&l&&i.push(r.commentsProvider.getComments("module",t.coursemodule,"mod_glossary",e.id,"glossary_entry",0,o))});var s=Object.keys(a).map(function(e){return{fileurl:e}}),u=r.getFilesFromGlossaryAndEntries(e,t,n).concat(s);return i.push(r.filepoolProvider.addFilesToQueue(o,u,r.component,e.id)),Promise.all(i)})),n.push(r.glossaryProvider.getAllCategories(t.id)),n.push(r.courseProvider.getModuleBasicInfo(e.id,o)),n.push(r.courseProvider.getModuleBasicInfoByInstance(t.id,"glossary",o)),Promise.all(n)})},t.prototype.sync=function(e,t,n){var o=[this.syncProvider.syncGlossaryEntries(e.instance,void 0,n),this.syncProvider.syncRatings(e.id,void 0,n)];return Promise.all(o).then(function(e){return e.reduce(function(e,t){return{updated:e.updated||t.updated,warnings:(e.warnings||[]).concat(t.warnings||[])}},{updated:!1})})},t=v([Object(o.A)(),y("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,m.a,_.a,p.a,d.a,h.a])],t)}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(237),p=n(32),h=n(56),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,t,n,o,r,i,l,a,s,u)||this;return d.imscpProvider=c,d.name="AddonModImscp",d.modName="imscp",d.component=f.a.COMPONENT,d}return m(t,e),t.prototype.downloadOrPrefetch=function(t,n,o,r){var i=this,l=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageDirPathByUrl(l,t.url).then(function(r){var a=[];return a.push(e.prototype.downloadOrPrefetch.call(i,t,n,o,r)),a.push(i.imscpProvider.getImscp(n,t.id,l)),Promise.all(a)})},t.prototype.getIntroFiles=function(e,t){var n=this;return this.imscpProvider.getImscp(t,e.id).catch(function(){}).then(function(t){return n.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.imscpProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.imscpProvider.invalidateImscpData(t)),n.push(this.courseProvider.invalidateModule(e.id)),Promise.all(n)},t.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},t.prototype.isFileDownloadable=function(e){return this.imscpProvider.isFileDownloadable(e)},t=_([Object(o.A)(),g("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,p.a,h.a,f.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(222),p=n(331),h=n(32),m=n(56),_=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e){function t(t,n,o,r,i,l,a,s,u,c,d){var p=e.call(this,t,n,o,r,i,l,a,s,u)||this;return p.pageProvider=c,p.pageHelper=d,p.name="AddonModPage",p.modName="page",p.component=f.a.COMPONENT,p.updatesNames=/^configuration$|^.*files$/,p}return _(t,e),t.prototype.downloadOrPrefetch=function(t,n,o,r){var i=[];return i.push(e.prototype.downloadOrPrefetch.call(this,t,n,o)),this.pageProvider.isGetPageWSAvailable()&&i.push(this.pageProvider.getPageData(n,t.id)),Promise.all(i)},t.prototype.invalidateContent=function(e,t){return this.pageProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.pageProvider.invalidatePageData(t)),n.push(this.courseProvider.invalidateModule(e.id)),this.utils.allPromises(n)},t=g([Object(o.A)(),v("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,h.a,m.a,f.a,p.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(223),p=n(299),h=n(40),m=n(32),_=n(56),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d){var p=e.call(this,t,n,o,r,i,l,a,s,u)||this;return p.resourceProvider=c,p.resourceHelper=d,p.name="AddonModResource",p.modName="resource",p.component=f.a.COMPONENT,p}return g(t,e),t.prototype.determineStatus=function(e,t,n){if(t==h.a.DOWNLOADED&&e)if(e.contentsinfo){if(e.contentsinfo.repositorytype)return h.a.OUTDATED}else if(e.contents){var o=e.contents[0];if(o&&o.isexternalfile)return h.a.OUTDATED}return t},t.prototype.downloadOrPrefetch=function(t,n,o,r){var i=this;return(this.resourceHelper.isDisplayedInIframe(t)?this.filepoolProvider.getPackageDirPathByUrl(this.sitesProvider.getCurrentSiteId(),t.url):Promise.resolve()).then(function(r){var l=[];return l.push(e.prototype.downloadOrPrefetch.call(i,t,n,o,r)),i.resourceProvider.isGetResourceWSAvailable()&&l.push(i.resourceProvider.getResourceData(n,t.id)),Promise.all(l)})},t.prototype.invalidateContent=function(e,t){return this.resourceProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.resourceProvider.invalidateResourceData(t)),n.push(this.courseProvider.invalidateModule(e.id,void 0,this.modName)),Promise.all(n)},t.prototype.isDownloadable=function(e,t){var n=this;return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.7")?Promise.resolve(!0):this.loadContents(e,t,!1).then(function(){return!n.resourceHelper.isNextcloudFile(e)})},t.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},t=v([Object(o.A)(),y("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,m.a,_.a,f.a,p.a])],t)}(d.a)},function(e,t,n){"use strict";function o(e){return r._57(0,[r._52(402653184,1,{compileComponent:0}),(e()(),r._31(1,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,i.b,i.a)),r._30(2,638976,null,0,l.a,[a.a,r.t,s.a,u.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._55(-1,0,["\n    "])),(e()(),r._31(4,0,null,0,1,"core-compile-html",[],null,null,null,c.b,c.a)),r._30(5,966656,[[1,4],["compile",4]],0,d.a,[f.a,r.j,r.t,[2,p.a],r.F,h.a,u.a],{text:[0,"text"],javascript:[1,"javascript"],jsData:[2,"jsData"],forceCompile:[3,"forceCompile"]},null),(e()(),r._55(-1,0,["\n"])),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.dataLoaded);e(t,5,0,n.content,n.javascript,n.jsData,n.forceCompile)},null)}n.d(t,"a",function(){return g}),t.b=o;var r=n(0),i=n(54),l=n(51),a=n(17),s=n(9),u=n(2),c=n(219),d=n(193),f=n(155),p=n(21),h=n(4),m=n(156),_=n(58),g=r._29({encapsulation:2,styles:[],data:{}});r._27("core-site-plugins-plugin-content",m.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,o,g)),r._30(1,376832,null,0,m.a,[h.a,_.a,[2,p.a],r.F],null,null)],function(e,t){e(t,1,0)},null)},{component:"component",method:"method",args:"args",initResult:"initResult",data:"data",preSets:"preSets",pageTitle:"pageTitle"},{onContentLoaded:"onContentLoaded",onLoadingContent:"onLoadingContent"},[])},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var o=n(0),r=n(555),i=n(5),l=function(){function e(e,t,n){this.name=e,this.sqlite=t,this.platform=n,this.init()}return e.prototype.buildCreateTableSql=function(e,t,n,o,r,i){var l=[],a="CREATE TABLE IF NOT EXISTS "+e+" (";for(var s in t){var u=t[s],c=u.name||"";u.type&&(c+=" "+u.type),u.primaryKey&&(c+=" PRIMARY KEY",u.autoIncrement&&(c+=" AUTOINCREMENT")),u.notNull&&(c+=" NOT NULL"),u.unique&&(c+=" UNIQUE"),u.check&&(c+=" CHECK ("+u.check+")"),void 0!==u.default&&(c+=" DEFAULT "+u.default),l.push(c)}if(a+=l.join(", "),n&&n.length&&(a+=", PRIMARY KEY ("+n.join(", ")+")"),o&&o.length)for(var s in o){var d=o[s];d&&d.length&&(a+=", UNIQUE ("+d.join(", ")+")")}i&&(a+=", CHECK ("+i+")");for(var s in r){var f=r[s];if(!f.columns||f.columns.length)return;a+=", FOREIGN KEY ("+f.columns.join(", ")+") REFERENCES "+f.table+" ",f.foreignColumns&&f.foreignColumns.length&&(a+="("+f.foreignColumns.join(", ")+")"),f.actions&&(a+=" "+f.actions)}return a+")"},e.prototype.close=function(){var e=this;return this.ready().then(function(){return e.db.close()})},e.prototype.countRecords=function(e,t){var n=this.whereClause(t);return this.countRecordsSelect(e,n[0],n[1])},e.prototype.countRecordsSelect=function(e,t,n,o){return void 0===t&&(t=""),void 0===o&&(o="COUNT('x')"),t&&(t="WHERE "+t),this.countRecordsSql("SELECT "+o+" FROM "+e+" "+t,n)},e.prototype.countRecordsSql=function(e,t){return this.getFieldSql(e,t).then(function(e){return"number"!=typeof e||e<0?0:e})},e.prototype.createTable=function(e,t,n,o,r,i){var l=this.buildCreateTableSql(e,t,n,o,r,i);return this.execute(l)},e.prototype.createTableFromSchema=function(e){return this.createTable(e.name,e.columns,e.primaryKeys,e.uniqueKeys,e.foreignKeys,e.tableCheck)},e.prototype.createTablesFromSchema=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.createTableFromSchema(e))}),Promise.all(n)},e.prototype.deleteRecords=function(e,t){if(null===t||void 0===t)return this.execute("DELETE FROM "+e);var n=this.whereClause(t);return this.deleteRecordsSelect(e,n[0],n[1])},e.prototype.deleteRecordsList=function(e,t,n){var o=this.whereClauseList(t,n);return this.deleteRecordsSelect(e,o[0],o[1])},e.prototype.deleteRecordsSelect=function(e,t,n){return void 0===t&&(t=""),t&&(t="WHERE "+t),this.execute("DELETE FROM "+e+" "+t,n)},e.prototype.dropTable=function(e){return this.execute("DROP TABLE IF EXISTS "+e)},e.prototype.execute=function(e,t){var n=this;return this.ready().then(function(){return n.db.executeSql(e,t)})},e.prototype.executeBatch=function(e){var t=this;return this.ready().then(function(){return t.db.sqlBatch(e)})},e.prototype.formatDataToInsert=function(e){if(e)for(var t in e){void 0===e[t]&&delete e[t]}},e.prototype.getAllRecords=function(e){return this.getRecords(e)},e.prototype.getField=function(e,t,n){var o=this.whereClause(n);return this.getFieldSelect(e,t,o[0],o[1])},e.prototype.getFieldSelect=function(e,t,n,o){return void 0===n&&(n=""),n&&(n="WHERE "+n),this.getFieldSql("SELECT "+t+" FROM "+e+" "+n,o)},e.prototype.getFieldSql=function(e,t){return this.getRecordSql(e,t).then(function(e){return e?e[Object.keys(e)[0]]:Promise.reject(null)})},e.prototype.getInOrEqual=function(e,t,n){void 0===t&&(t=!0);var o,r;if(void 0===n&&(n=!1),Array.isArray(e)&&!e.length&&!1===n)return["",[]];if(Array.isArray(e)&&!e.length){if(null===n)return o=t?" IS NULL":" IS NOT NULL",[o,[]];e=[n]}return Array.isArray(e)&&1!=e.length?(o=(t?"":"NOT ")+"IN ("+",?".repeat(e.length).substr(1)+")",r=e):(o=t?"= ?":"<> ?",r=Array.isArray(e)?e:[e]),[o,r]},e.prototype.getName=function(){return this.name},e.prototype.getRecord=function(e,t,n){void 0===n&&(n="*");var o=this.whereClause(t);return this.getRecordSelect(e,o[0],o[1],n)},e.prototype.getRecordSelect=function(e,t,n,o){return void 0===t&&(t=""),void 0===n&&(n=[]),void 0===o&&(o="*"),t&&(t=" WHERE "+t),this.getRecordSql("SELECT "+o+" FROM "+e+" "+t,n)},e.prototype.getRecordSql=function(e,t){return this.getRecordsSql(e,t,0,1).then(function(e){return e&&e.length?e[0]:Promise.reject(null)})},e.prototype.getRecords=function(e,t,n,o,r,i){void 0===n&&(n=""),void 0===o&&(o="*"),void 0===r&&(r=0),void 0===i&&(i=0);var l=this.whereClause(t);return this.getRecordsSelect(e,l[0],l[1],n,o,r,i)},e.prototype.getRecordsList=function(e,t,n,o,r,i,l){void 0===o&&(o=""),void 0===r&&(r="*"),void 0===i&&(i=0),void 0===l&&(l=0);var a=this.whereClauseList(t,n);return this.getRecordsSelect(e,a[0],a[1],o,r,i,l)},e.prototype.getRecordsSelect=function(e,t,n,o,r,i,l){void 0===t&&(t=""),void 0===n&&(n=[]),void 0===o&&(o=""),void 0===r&&(r="*"),void 0===i&&(i=0),void 0===l&&(l=0),t&&(t=" WHERE "+t),o&&(o=" ORDER BY "+o);return this.getRecordsSql("SELECT "+r+" FROM "+e+" "+t+" "+o,n,i,l)},e.prototype.getRecordsSql=function(e,t,n,o){var r=this.normaliseLimitFromNum(n,o);return(r[0]||r[1])&&(r[1]<1&&(r[1]=Number.MAX_VALUE),e+=" LIMIT "+r[0]+", "+r[1]),this.execute(e,t).then(function(e){for(var t=[],n=0;n<e.rows.length;n++)t.push(e.rows.item(n));return t})},e.prototype.getSqlInsertQuery=function(e,t){this.formatDataToInsert(t);var n=Object.keys(t);return["INSERT OR REPLACE INTO "+e+" ("+n.join(",")+") VALUES ("+",?".repeat(n.length).substr(1)+")",n.map(function(e){return t[e]})]},e.prototype.init=function(){var e=this;this.promise=this.platform.ready().then(function(){return e.sqlite.create({name:e.name,location:"default"})}).then(function(t){e.db=t})},e.prototype.insertRecord=function(e,t){var n=this.getSqlInsertQuery(e,t);return this.execute(n[0],n[1]).then(function(e){return e.insertId})},e.prototype.insertRecords=function(e,t){var n=this;if(!Array.isArray(t))return Promise.reject(null);var o=[];return t.forEach(function(t){o.push(n.getSqlInsertQuery(e,t))}),this.executeBatch(o)},e.prototype.insertRecordsFrom=function(e,t,n,o){void 0===o&&(o="*");var r=this.whereClause(n);return this.execute("INSERT INTO "+e+" SELECT "+o+" FROM "+t+" "+(r[0]?"WHERE "+r[0]:""),r[1])},e.prototype.normaliseLimitFromNum=function(e,t){return void 0!==e&&null!==e&&""!==e&&-1!==e||(e=0),void 0!==t&&null!==t&&""!==t&&-1!==t||(t=0),e=parseInt(e,10),t=parseInt(t,10),e=Math.max(0,e),t=Math.max(0,t),[e,t]},e.prototype.open=function(){var e=this;return this.ready().then(function(){return e.db.open()})},e.prototype.ready=function(){return this.promise},e.prototype.recordExists=function(e,t){return this.getRecord(e,t).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.recordExistsSelect=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=[]),this.getRecordSelect(e,t,n).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.recordExistsSql=function(e,t){return this.getRecordSql(e,t).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.tableExists=function(e){return this.recordExists("sqlite_master",{type:"table",tbl_name:e})},e.prototype.updateRecords=function(e,t,n){if(this.formatDataToInsert(t),!t||!Object.keys(t).length)return Promise.resolve();var o,r,i=this.whereClause(n),l=[];for(var a in t)l.push(a+" = ?");return o="UPDATE "+e+" SET "+l.join(", ")+" WHERE "+i[0],r=Object.keys(t).map(function(e){return t[e]}).concat(i[1]),this.execute(o,r)},e.prototype.updateRecordsWhere=function(e,t,n,o){if(!t||!Object.keys(t).length)return Promise.resolve();var r,i,l=[];for(var a in t)l.push(a+" = ?");return r="UPDATE "+e+" SET "+l.join(", "),n&&(r+=" WHERE "+n),i=Object.keys(t).map(function(e){return t[e]}),n&&o&&(i=i.concat(o)),this.execute(r,i)},e.prototype.whereClause=function(e){if(void 0===e&&(e={}),!e||!Object.keys(e).length)return["1 = 1",[]];var t=[],n=[];for(var o in e){var r=e[o];void 0===r||null===r?t.push(o+" IS NULL"):(t.push(o+" = ?"),n.push(r))}return[t.join(" AND "),n]},e.prototype.whereClauseList=function(e,t){if(!t||!t.length)return["1 = 2",[]];var n=[],o="";if(t.forEach(function(t){"boolean"==typeof t&&(t=Number(t)),void 0===t||null===t?o=e+" IS NULL":n.push(t)}),n&&n.length)if(""!==o&&(o+=" OR "),1==n.length)o=o+e+" = ?";else{var r=",?".repeat(n.length).substr(1);o=o+e+" IN ("+r+")"}return[o,n]},e}(),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(e){function t(t){var n=e.call(this,t,null,null)||this;return n.name=t,n}return a(t,e),t.prototype.close=function(){return Promise.resolve()},t.prototype.emptyDatabase=function(){var e=this;return new Promise(function(t,n){e.db.transaction(function(e){e.executeSql("SELECT * FROM sqlite_master\n                            WHERE name NOT LIKE 'sqlite\\_%' escape '\\' AND name NOT LIKE '\\_%' escape '\\'",[],function(e,o){if(o.rows.length<=0)t();else{for(var r=[],i=function(t){r.push(new Promise(function(n,r){var i=JSON.stringify(o.rows.item(t).name);e.executeSql("DROP TABLE "+i,[],n,r)}))},l=0;l<o.rows.length;l++)i(l);Promise.all(r).then(t,n)}},n)})})},t.prototype.execute=function(e,t){var n=this;return new Promise(function(o,r){n.db.transaction(function(n){n.executeSql(e,t,function(e,t){o(t)},function(n,o){console.error(e,t,o),r(o)})})})},t.prototype.executeBatch=function(e){var t=this;return new Promise(function(n,o){t.db.transaction(function(t){var r=[];e.forEach(function(e){r.push(new Promise(function(n,o){var r,i;Array.isArray(e)?(r=e[0],i=e[1]):(r=e,i=null),t.executeSql(r,i,function(e,t){n(t)},function(e,t){console.error(r,i,t),o(t)})}))}),Promise.all(r).then(n,o)})})},t.prototype.init=function(){this.db=window.openDatabase(this.name,"1.0",this.name,524288e3),this.promise=Promise.resolve()},t.prototype.open=function(){return Promise.resolve()},t}(l);n.d(t,"a",function(){return d});var u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){this.sqlite=e,this.platform=t,this.dbInstances={}}return e.prototype.getDB=function(e,t){return(void 0===this.dbInstances[e]||t)&&(this.dbInstances[e]=this.platform.is("cordova")?new l(e,this.sqlite,this.platform):new s(e)),this.dbInstances[e]},e.prototype.deleteDB=function(e){var t=this;return(void 0!==this.dbInstances[e]?this.dbInstances[e].close():Promise.resolve()).then(function(){var n=t.dbInstances[e];return delete t.dbInstances[e],t.platform.is("cordova")?t.sqlite.deleteDatabase({name:e,location:"default"}):n.emptyDatabase()})},e=u([Object(o.A)(),c("design:paramtypes",[r.a,i.v])],e)}()},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return t=e,e.prototype.intercept=function(e,n){var o=e.clone({headers:e.headers.set("Content-Type","application/x-www-form-urlencoded"),body:"object"==typeof e.body&&"[object File]"!=String(e.body)?t.serialize(e.body):e.body});return n.handle(o)},e.serialize=function(e,t){var n,o="";for(var r in e){var i=e[r];if(i instanceof Array)for(var l=0;l<i.length;++l)(n={})[r+"["+l+"]"]=i[l],o+=this.serialize(n)+"&";else if(i instanceof Object)for(var a in i)(n={})[r+"["+a+"]"]=i[a],o+=this.serialize(n)+"&";else(t||void 0!==i&&null!==i)&&(o+=encodeURIComponent(r)+"="+encodeURIComponent(i)+"&")}return o.length?o.substr(0,o.length-1):o},e=t=r([Object(o.A)(),i("design:paramtypes",[])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(53),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.injector=e}return e.prototype.makeSite=function(e,t,n,o,i,l,a){return new r.a(this.injector,e,t,n,o,i,l,a)},e.prototype.getSiteMethods=function(){var e=[];for(var t in r.a.prototype)e.push(t);return e},e=i([Object(o.A)(),l("design:paramtypes",[o.C])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(6),l=n(14),a=(n.n(l),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.translate=t,this.logger=e.getInstance("CoreTimeAgoPipe")}return e.prototype.transform=function(e){if("string"==typeof e){var t=parseInt(e,10);if(isNaN(t))return this.logger.error("Invalid value received",e),e;e=t}return this.translate.instant("core.ago",{$a:l(1e3*e).fromNow(!0)})},e=a([Object(o.S)({name:"coreTimeAgo"}),s("design:paramtypes",[i.a,r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(1907),i=(n.n(r),n(41)),l=n(32),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.filterProvider=e,this.utils=t,this.filterHelper=n,this.labels=[],this.height=300}return t=e,e.prototype.ngOnInit=function(){var e=this,t={};t=void 0===this.legend?{display:!1,labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.labels.length){var n=t.datasets[0];return t.labels.map(function(e,t){return{text:e+": "+n.data[t],fillStyle:n.backgroundColor[t]}})}return[]}}}:Object.assign({},this.legend),"bar"==this.type&&this.data.length>=5&&(this.type="horizontalBar"),this.formatLabels().then(function(){var n=e.canvas.nativeElement.getContext("2d");e.chart=new r.Chart(n,{type:e.type,data:{labels:e.labels,datasets:[{data:e.data,backgroundColor:e.getRandomColors(e.data.length)}]},options:{legend:t}})})},e.prototype.ngOnChanges=function(){var e=this;this.chart&&this.formatLabels().then(function(){e.chart.data.datasets[0]={data:e.data,backgroundColor:e.getRandomColors(e.data.length)},e.chart.data.labels=e.labels,e.chart.update()})},e.prototype.formatLabels=function(){var e=this;if(this.filter=void 0===this.filter?!(!this.contextLevel||!this.contextInstanceId):!!this.filter,!this.filter)return Promise.resolve();var t={clean:!0,singleLine:!0,courseId:this.courseId,wsNotFiltered:this.utils.isTrueOrOne(this.wsNotFiltered)};return this.filterHelper.getFilters(this.contextLevel,this.contextInstanceId,t).then(function(n){var o=[];return e.labels.forEach(function(r,i){o.push(e.filterProvider.formatText(r,t,n).then(function(t){e.labels[i]=t}))}),Promise.all(o)})},e.prototype.getRandomColors=function(e){for(;t.backgroundColors.length<e;){var n=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),r=Math.floor(255*Math.random());t.backgroundColors.push("rgba("+n+", "+o+", "+r+", 0.6)")}return t.backgroundColors.slice(0,e)},e.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=!1)},e.backgroundColors=["rgba(0,100,210, 0.6)","rgba(203,61,77, 0.6)","rgba(0,121,130, 0.6)","rgba(249,128,18, 0.6)","rgba(94,129,0, 0.6)","rgba(251,173,26, 0.6)"],s([Object(o.D)(),u("design:type",Array)],e.prototype,"data",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"labels",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"type",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"legend",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"height",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"filter",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"contextLevel",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"contextInstanceId",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"courseId",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"wsNotFiltered",void 0),s([Object(o._9)("canvas"),u("design:type",o.t)],e.prototype,"canvas",void 0),e=t=s([Object(o.m)({selector:"core-chart",templateUrl:"core-chart.html"}),u("design:paramtypes",[i.a,a.a,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(9),i=n(6),l=n(1),a=n(98),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var i=e.call(this,"CoreFileUploaderDelegate",t,n,o)||this;return i.sitesProvider=n,i.eventsProvider=o,o.on(r.a.LOGOUT,i.clearSiteHandlers.bind(i)),i}return s(t,e),t.prototype.clearSiteHandlers=function(){this.enabledHandlers={}},t.prototype.getHandlers=function(e){var t=[];for(var n in this.enabledHandlers){var o=this.enabledHandlers[n],r=void 0;if(e){if(!o.getSupportedMimetypes)continue;if(!(r=o.getSupportedMimetypes(e)).length)continue}var i=o.getData();i.priority=o.priority,i.mimetypes=r,t.push(i)}return t},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,r.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.sitesProvider=e,this.siteSchema={name:"CoreUserOfflineProvider",version:1,tables:[{name:t.PREFERENCES_TABLE,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value",type:"TEXT"},{name:"onlinevalue",type:"TEXT"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getChangedPreferences=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecordsSelect(t.PREFERENCES_TABLE,"value != onlineValue")})},e.prototype.getPreference=function(e,n){return this.sitesProvider.getSite(n).then(function(n){var o={name:e};return n.getDb().getRecord(t.PREFERENCES_TABLE,o)})},e.prototype.setPreference=function(e,n,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return(void 0===o?i.getPreference(e,r.id).then(function(e){return e.onlinevalue}):Promise.resolve(o)).then(function(o){var i={name:e,value:n,onlinevalue:o};return r.getDb().insertRecord(t.PREFERENCES_TABLE,i)})})},e.PREFERENCES_TABLE="user_preferences",e=t=i([Object(o.A)(),l("design:paramtypes",[r.a])],e);var t}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(61),i=n(396),l=n(198),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.moduleDelegate=e,this.injector=t,this.data={}}return e.prototype.ngOnChanges=function(e){var t=this;if(this.course&&this.sections&&this.sections.length){var n=this.sections[0]&&this.sections[0].modules&&this.sections[0].modules[0];n&&!this.componentClass&&this.moduleDelegate.getMainComponent(this.injector,this.course,n).then(function(e){t.componentClass=e||i.a}),this.data.courseId=this.course.id,this.data.module=n}},e.prototype.doRefresh=function(e,t,n){return n?Promise.resolve():Promise.resolve(this.dynamicComponent.callComponentFunction("doRefresh",[e,t]))},e.prototype.ionViewDidEnter=function(){this.dynamicComponent.callComponentFunction("ionViewDidEnter")},e.prototype.ionViewDidLeave=function(){this.dynamicComponent.callComponentFunction("ionViewDidLeave")},a([Object(o.D)(),s("design:type",Object)],e.prototype,"course",void 0),a([Object(o.D)(),s("design:type",Array)],e.prototype,"sections",void 0),a([Object(o.D)(),s("design:type",Boolean)],e.prototype,"downloadEnabled",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"initialSectionId",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"initialSectionNumber",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"moduleId",void 0),a([Object(o.O)(),s("design:type",o.v)],e.prototype,"completionChanged",void 0),a([Object(o._9)(l.a),s("design:type",l.a)],e.prototype,"dynamicComponent",void 0),e=a([Object(o.m)({selector:"core-course-format-single-activity",templateUrl:"core-course-format-single-activity.html"}),s("design:paramtypes",[r.a,o.C])],e)}()},function(e,t){e.exports=require("fs")},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(55),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(e){function t(t,n,o,r,i){var l=e.call(this)||this;return l.courseHelper=t,l.domUtils=n,l.sitesProvider=o,l.addon=r,l.modName=i,l.useModNameToGetModule=!1,l.pattern=new RegExp("/mod/"+i+"/grade.php.*([&?]id=\\d+)"),l.featureName="CoreCourseModuleDelegate_"+r,l}return r(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,i){var l=r.domUtils.showModalLoading();r.sitesProvider.getSite(e).then(function(l){n.userid&&n.userid!=l.getUserId()?r.canReview?r.goToReview(t,n,o,e,i):l.openInBrowserWithAutoLogin(t):r.courseHelper.navigateToModule(parseInt(n.id,10),e,o,void 0,r.useModNameToGetModule?r.modName:void 0,void 0,i)}).finally(function(){l.dismiss()})}}]},t.prototype.goToReview=function(e,t,n,o,r){return Promise.resolve()},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(58),i=n(156),l=n(196),a=n(60),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,"CoreSitePluginsBlockComponent")||this;return r.injector=t,r.sitePluginsProvider=n,r.blockDelegate=o,r}return s(t,e),t.prototype.ngOnChanges=function(){if(!this.component){var e=this.blockDelegate.getHandlerName(this.block.name),t=this.sitePluginsProvider.getSitePluginHandler(e);t&&(this.component=t.plugin.component,this.method=t.handlerSchema.method,this.args={contextlevel:this.contextLevel,instanceid:this.instanceId},this.initResult=t.initResult)}},t.prototype.invalidateContent=function(){return this.sitePluginsProvider.invalidateContent(this.component,this.method,this.args)},u([Object(o.D)(),c("design:type",Object)],t.prototype,"block",void 0),u([Object(o.D)(),c("design:type",String)],t.prototype,"contextLevel",void 0),u([Object(o.D)(),c("design:type",Number)],t.prototype,"instanceId",void 0),u([Object(o._9)(i.a),c("design:type",i.a)],t.prototype,"content",void 0),t=u([Object(o.m)({selector:"core-site-plugins-block",templateUrl:"core-siteplugins-block.html"}),c("design:paramtypes",[o.C,r.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(58),i=n(156),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.sitePluginsProvider=e}return e.prototype.ngOnInit=function(){if(this.handlerUniqueName){var e=this.sitePluginsProvider.getSitePluginHandler(this.handlerUniqueName);e&&(this.component=e.plugin.component,this.method=e.handlerSchema.method,this.args={courseid:this.courseId},this.initResult=e.initResult)}},e.prototype.refreshData=function(e){this.content.refreshContent(!1).finally(function(){e.complete()})},l([Object(o.D)(),a("design:type",Number)],e.prototype,"courseId",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"handlerUniqueName",void 0),l([Object(o._9)(i.a),a("design:type",i.a)],e.prototype,"content",void 0),e=l([Object(o.m)({selector:"core-site-plugins-course-option",templateUrl:"core-siteplugins-course-option.html"}),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(58),i=n(156),l=n(496),a=n(178),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.sitePluginsProvider=e,this.courseFormatDelegate=t}return e.prototype.ngOnChanges=function(){if(this.course&&this.course.format){if(!this.component){var e=this.courseFormatDelegate.getHandlerName(this.course.format),t=this.sitePluginsProvider.getSitePluginHandler(e);t&&(this.component=t.plugin.component,this.method=t.handlerSchema.method,this.args={courseid:this.course.id,downloadenabled:this.downloadEnabled},this.initResult=t.initResult)}this.data={course:this.course,sections:this.sections,downloadEnabled:this.downloadEnabled,initialSectionId:this.initialSectionId,initialSectionNumber:this.initialSectionNumber,moduleId:this.moduleId,completionChanged:this.completionChanged,coreCourseFormatComponent:this.coreCourseFormatComponent}}},e.prototype.doRefresh=function(e,t,n){return Promise.resolve(this.content.refreshContent(n))},s([Object(o.D)(),u("design:type",Object)],e.prototype,"course",void 0),s([Object(o.D)(),u("design:type",Array)],e.prototype,"sections",void 0),s([Object(o.D)(),u("design:type",Boolean)],e.prototype,"downloadEnabled",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"initialSectionId",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"initialSectionNumber",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"moduleId",void 0),s([Object(o.O)(),u("design:type",o.v)],e.prototype,"completionChanged",void 0),s([Object(o.D)(),u("design:type",l.a)],e.prototype,"coreCourseFormatComponent",void 0),s([Object(o._9)(i.a),u("design:type",i.a)],e.prototype,"content",void 0),e=s([Object(o.m)({selector:"core-site-plugins-course-format",templateUrl:"core-siteplugins-course-format.html"}),u("design:paramtypes",[r.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(73),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.questionDelegate=o,r}return s(t,e),t.prototype.ngOnInit=function(){this.jsData.question=this.question,this.jsData.component=this.component,this.jsData.componentId=this.componentId,this.jsData.attemptId=this.attemptId,this.jsData.offlineEnabled=this.offlineEnabled,this.jsData.buttonClicked=this.buttonClicked,this.jsData.onAbort=this.onAbort,this.question&&this.getHandlerData(this.questionDelegate.getHandlerName("qtype_"+this.question.type))},u([Object(o.D)(),c("design:type",Object)],t.prototype,"question",void 0),u([Object(o.D)(),c("design:type",String)],t.prototype,"component",void 0),u([Object(o.D)(),c("design:type",Number)],t.prototype,"componentId",void 0),u([Object(o.D)(),c("design:type",Number)],t.prototype,"attemptId",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"offlineEnabled",void 0),u([Object(o.O)(),c("design:type",o.v)],t.prototype,"buttonClicked",void 0),u([Object(o.O)(),c("design:type",o.v)],t.prototype,"onAbort",void 0),t=u([Object(o.m)({selector:"core-site-plugins-question",templateUrl:"core-siteplugins-question.html"}),c("design:paramtypes",[i.a,r.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(117),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.questionBehaviourDelegate=o,r}return s(t,e),t.prototype.ngOnInit=function(){this.jsData.question=this.question,this.jsData.component=this.component,this.jsData.componentId=this.componentId,this.jsData.attemptId=this.attemptId,this.jsData.offlineEnabled=this.offlineEnabled,this.jsData.buttonClicked=this.buttonClicked,this.jsData.onAbort=this.onAbort,this.question&&this.getHandlerData(this.questionBehaviourDelegate.getHandlerName(this.question.preferredBehaviour))},u([Object(o.D)(),c("design:type",Object)],t.prototype,"question",void 0),u([Object(o.D)(),c("design:type",String)],t.prototype,"component",void 0),u([Object(o.D)(),c("design:type",Number)],t.prototype,"componentId",void 0),u([Object(o.D)(),c("design:type",Number)],t.prototype,"attemptId",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"offlineEnabled",void 0),u([Object(o.O)(),c("design:type",o.v)],t.prototype,"buttonClicked",void 0),u([Object(o.O)(),c("design:type",o.v)],t.prototype,"onAbort",void 0),t=u([Object(o.m)({selector:"core-site-plugins-question-behaviour",templateUrl:"core-siteplugins-question-behaviour.html"}),c("design:paramtypes",[i.a,r.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(23),s=n(191),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.profileFieldDelegate=o,r.edit=!1,r.disabled=!1,r.signup=!1,r}return u(t,e),t.prototype.ngOnInit=function(){this.jsData.field=this.field,this.jsData.signup=this.signup,this.jsData.edit=this.edit,this.jsData.disabled=this.disabled,this.jsData.form=this.form,this.jsData.registerAuth=this.registerAuth,this.field&&this.getHandlerData(this.profileFieldDelegate.getHandlerName(this.field.type||this.field.datatype))},c([Object(o.D)(),d("design:type",Object)],t.prototype,"field",void 0),c([Object(o.D)(),d("design:type",Object)],t.prototype,"edit",void 0),c([Object(o.D)(),d("design:type",Object)],t.prototype,"disabled",void 0),c([Object(o.D)(),d("design:type",a.g)],t.prototype,"form",void 0),c([Object(o.D)(),d("design:type",Object)],t.prototype,"signup",void 0),c([Object(o.D)(),d("design:type",String)],t.prototype,"registerAuth",void 0),t=c([Object(o.m)({selector:"core-site-plugins-user-profile-field",templateUrl:"core-siteplugins-user-profile-field.html"}),d("design:paramtypes",[i.a,r.a,s.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(23),s=n(129),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.accessRulesDelegate=o,r}return u(t,e),t.prototype.ngOnInit=function(){this.jsData.rule=this.rule,this.jsData.quiz=this.quiz,this.jsData.attempt=this.attempt,this.jsData.prefetch=this.prefetch,this.jsData.siteId=this.siteId,this.jsData.form=this.form,this.rule&&this.getHandlerData(this.accessRulesDelegate.getHandlerName(this.rule))},c([Object(o.D)(),d("design:type",String)],t.prototype,"rule",void 0),c([Object(o.D)(),d("design:type",Object)],t.prototype,"quiz",void 0),c([Object(o.D)(),d("design:type",Object)],t.prototype,"attempt",void 0),c([Object(o.D)(),d("design:type",Boolean)],t.prototype,"prefetch",void 0),c([Object(o.D)(),d("design:type",String)],t.prototype,"siteId",void 0),c([Object(o.D)(),d("design:type",a.g)],t.prototype,"form",void 0),t=c([Object(o.m)({selector:"core-site-plugins-quiz-access-rule",templateUrl:"core-siteplugins-quiz-access-rule.html"}),d("design:paramtypes",[i.a,r.a,s.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(152),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.assignFeedbackDelegate=o,r}return s(t,e),t.prototype.ngOnInit=function(){this.jsData.assign=this.assign,this.jsData.submission=this.submission,this.jsData.plugin=this.plugin,this.jsData.userId=this.userId,this.jsData.configs=this.configs,this.jsData.edit=this.edit,this.jsData.canEdit=this.canEdit,this.plugin&&this.getHandlerData(this.assignFeedbackDelegate.getHandlerName(this.plugin.type))},t.prototype.invalidate=function(){return Promise.resolve()},u([Object(o.D)(),c("design:type",Object)],t.prototype,"assign",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"submission",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"plugin",void 0),u([Object(o.D)(),c("design:type",Number)],t.prototype,"userId",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"configs",void 0),u([Object(o.D)(),c("design:type",Boolean)],t.prototype,"canEdit",void 0),u([Object(o.D)(),c("design:type",Boolean)],t.prototype,"edit",void 0),t=u([Object(o.m)({selector:"core-site-plugins-assign-feedback",templateUrl:"core-siteplugins-assign-feedback.html"}),c("design:paramtypes",[i.a,r.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(166),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.assignSubmissionDelegate=o,r}return s(t,e),t.prototype.ngOnInit=function(){this.jsData.assign=this.assign,this.jsData.submission=this.submission,this.jsData.plugin=this.plugin,this.jsData.configs=this.configs,this.jsData.edit=this.edit,this.jsData.allowOffline=this.allowOffline,this.plugin&&this.getHandlerData(this.assignSubmissionDelegate.getHandlerName(this.plugin.type))},t.prototype.invalidate=function(){return Promise.resolve()},u([Object(o.D)(),c("design:type",Object)],t.prototype,"assign",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"submission",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"plugin",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"configs",void 0),u([Object(o.D)(),c("design:type",Boolean)],t.prototype,"edit",void 0),u([Object(o.D)(),c("design:type",Boolean)],t.prototype,"allowOffline",void 0),t=u([Object(o.m)({selector:"core-site-plugins-assign-submission",templateUrl:"core-siteplugins-assign-submission.html"}),c("design:paramtypes",[i.a,r.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",Number)],e.prototype,"workshopId",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"assessment",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"edit",void 0),r([Object(o.D)(),i("design:type",Array)],e.prototype,"selectedValues",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"fieldErrors",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"strategy",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"moduleId",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"courseId",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(3),i=n(10),l=n(154),a=n(6),s=n(1),u=n(4),c=n(11),d=n(22),f=n(2),p=n(125),h=n(15),m=n(62),_=n(58),g=n(116),v=n(40),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f){this.appProvider=t,this.utils=n,this.loginHelper=o,this.linksHelper=r,this.initDelegate=i,this.domUtils=l,this.urlUtils=a,this.sitesProvider=s,this.textUtils=u,this.linksDelegate=c,this.translate=d,this.sitePluginsProvider=f,this.lastUrls={},this.logger=e.getInstance("CoreCustomURLSchemesProvider")}return e.prototype.handleCustomURL=function(e){var t=this;if(!this.isCustomURL(e))return Promise.reject(null);var n,o,r=!1;if(!(this.lastUrls[e]&&Date.now()-this.lastUrls[e]<3e3))return this.lastUrls[e]=Date.now(),this.initDelegate.ready().then(function(){return e=t.textUtils.decodeURIComponent(e),e=e.replace(/\/?#?\/?$/,""),n=t.domUtils.showModalLoading(),t.isCustomURLToken(e)?(r=!0,t.getCustomURLTokenData(e)):t.isCustomURLLink(e)?(e=e.replace(/\/\/link=(https?)\/\//,"//link=$1://"),t.getCustomURLLinkData(e)):(e=e.replace(/\/\/(https?)\/\//,"//$1://"),t.getCustomURLData(e))}).then(function(e){if((o=e).redirect&&o.redirect.match(/^https?:\/\//)&&-1==o.redirect.indexOf(o.siteUrl))return Promise.reject(t.translate.instant("core.contentlinks.errorredirectothersite"));var n=t.sitesProvider.getCurrentSite();if(o.token){if(n&&n.getToken()==o.token)return t.sitesProvider.getCurrentSiteId();return(o.siteUrl.match(/^https?:\/\//)?Promise.resolve():t.sitesProvider.checkSite(o.siteUrl).then(function(e){o.siteUrl=e.siteUrl})).then(function(){return t.sitesProvider.newSite(o.siteUrl,o.token,o.privateToken,r,t.loginHelper.getOAuthIdFromParams(o.ssoUrlParams))})}}).then(function(e){if(!r){o.redirect&&!o.redirect.match(/^https?:\/\//)&&(o.redirect=t.textUtils.concatenatePaths(o.siteUrl,o.redirect));return(e?Promise.resolve([e]):t.sitesProvider.getSiteIdsFromUrl(o.siteUrl,!0,o.username)).then(function(e){if(!(e.length>1))return 1==e.length?t.sitesProvider.getSite(e[0]).then(function(e){if(o.redirect){n.dismiss();var r=e.getInfo().username||o.username;return t.linksHelper.handleLink(o.redirect,r).then(function(e){e||t.domUtils.showErrorModal("core.contentlinks.errornoactions",!0)})}return t.linksHelper.handleRootURL(e,!1,!0)}):t.sitesProvider.checkSite(o.siteUrl).then(function(e){var r,i=t.loginHelper.isSSOLoginNeeded(e.code),l="CoreLoginCredentialsPage",a={siteUrl:e.siteUrl,username:o.username,urlToOpen:o.redirect,siteConfig:e.config},s=!1;if(n.dismiss(),t.sitesProvider.isLoggedIn()){var u=t.translate.instant("core.contentlinks.confirmurlothersite");r=t.domUtils.showConfirm(u).then(function(){if(!i)return(s=t.sitePluginsProvider.hasSitePluginsLoaded)&&t.appProvider.storeRedirect(v.a.NO_SITE_ID,l,a),t.sitesProvider.logout().catch(function(){})})}else r=Promise.resolve();return r.then(function(){if(i)t.loginHelper.confirmAndOpenBrowserForSSOLogin(e.siteUrl,e.code,e.service,e.config&&e.config.launchurl);else if(!s)return t.loginHelper.goToNoSitePage(void 0,l,a)})});t.linksHelper.goToChooseSite(o.redirect||o.siteUrl)})}o.pageName?t.appProvider.getRootNavController().push(o.pageName,o.pageParams):t.loginHelper.goToSiteInitialPage()}).catch(function(e){"Duplicated"==e||(e&&r?(t.loginHelper.treatUserTokenError(o.siteUrl,e),t.sitesProvider.logout()):t.domUtils.showErrorModalDefault(e,t.translate.instant("core.login.invalidsite")))}).finally(function(){n.dismiss(),r&&t.appProvider.finishSSOAuthentication()})},e.prototype.getCustomURLData=function(e){var t=this,n=g.a.customurlscheme+"://";if(-1==e.indexOf(n))return Promise.reject(null);this.logger.debug("Treating custom URL scheme: "+e),e=e.replace(n,"");var o=this.urlUtils.getUsernameFromUrl(e);o&&(e=e.replace(o+"@",""));var r=this.urlUtils.extractUrlParams(e);-1!=e.indexOf("?")&&(e=e.substr(0,e.indexOf("?")));return(e.match(/https?:\/\//)?Promise.resolve(e):this.sitesProvider.getSiteIdsFromUrl(e,!0,o).then(function(n){return n.length?t.sitesProvider.getSite(n[0]).then(function(e){return e.getURL()}):e})).then(function(e){return{siteUrl:e,username:o,token:r.token,privateToken:r.privateToken,redirect:r.redirect}})},e.prototype.getCustomURLLinkData=function(e){var t=this,n=g.a.customurlscheme+"://link=";if(-1==e.indexOf(n))return Promise.reject(null);this.logger.debug("Treating custom URL scheme with link param: "+e),e=e.replace(n,"");var o=this.urlUtils.getUsernameFromUrl(e);return o&&(e=e.replace(o+"@","")),this.sitesProvider.isStoredRootURL(e,o).then(function(n){if(n.site)return{siteUrl:n.site.getURL(),username:o};if(n.siteIds.length>0)return t.sitesProvider.getSite(n.siteIds[0]).then(function(t){return{siteUrl:t.getURL(),username:o,redirect:e}});var r=t.linksDelegate.getSiteUrl(e),i=e;return r||(r=e,i=void 0),{siteUrl:r,username:o,redirect:i}})},e.prototype.getCustomURLTokenData=function(e){var t=g.a.customurlscheme+"://token=";if(-1==e.indexOf(t))return Promise.reject(null);if(this.appProvider.isSSOAuthenticationOngoing())return Promise.reject("Duplicated");this.appProvider.isDesktop()&&this.utils.closeInAppBrowser(!0),this.appProvider.startSSOAuthentication(),this.logger.debug("App launched by URL with an SSO"),e=(e=e.replace(t,"")).replace(/\/?#?\/?$/,"");try{e=atob(e)}catch(e){return this.logger.error("Error decoding parameter received for login SSO"),Promise.reject(null)}return this.loginHelper.validateBrowserSSOLogin(e)},e.prototype.isCustomURL=function(e){return!!e&&-1!=e.indexOf(g.a.customurlscheme+"://")},e.prototype.isCustomURLLink=function(e){return!!e&&-1!=e.indexOf(g.a.customurlscheme+"://link=")},e.prototype.isCustomURLToken=function(e){return!!e&&-1!=e.indexOf(g.a.customurlscheme+"://token=")},e=y([Object(o.A)(),b("design:paramtypes",[a.a,i.a,f.a,p.a,h.a,l.a,u.a,d.a,s.a,c.a,m.a,r.c,_.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=n(13),l=n(4),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.sitesProvider=e,this.courseProvider=t,this.domUtils=n,this.ROOT_CACHE_KEY="AddonBlockRecentlyAccessedItems:"}return e.prototype.getRecentItemsCacheKey=function(){return this.ROOT_CACHE_KEY+":recentitems"},e.prototype.getRecentItems=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n={cacheKey:t.getRecentItemsCacheKey()};return e.read("block_recentlyaccesseditems_get_recent_items",void 0,n).then(function(e){return e.map(function(e){var n=e.icon&&t.domUtils.getHTMLElementAttribute(e.icon,"src");return e.iconUrl=t.courseProvider.getModuleIconSrc(e.modname,n),e})})})},e.prototype.invalidateRecentItems=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getRecentItemsCacheKey())})},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",Object)],e.prototype,"question",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"component",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"componentId",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"attemptId",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"offlineEnabled",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"contextLevel",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"contextInstanceId",void 0),r([Object(o.O)(),i("design:type",o.v)],e.prototype,"buttonClicked",void 0),r([Object(o.O)(),i("design:type",o.v)],e.prototype,"onAbort",void 0),e=r([Object(o.m)({selector:"addon-qbehaviour-deferredcbm",templateUrl:"addon-qbehaviour-deferredcbm.html"}),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(4),i=n(2),l=n(470),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.utils=e,this.domUtils=t,this.name="AddonQtypeCalculated",this.type="qtype_calculated"}return e.prototype.getComponent=function(e,t){return l.a},e.prototype.isCompleteResponse=function(e,t){return 0!==this.isGradableResponse(e,t)&&this.validateUnits(t.answer)?this.requiresUnits(e)?this.isValidValue(t.unit)?1:0:-1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){var n=this.isValidValue(t.answer);return n&&this.requiresUnits(e)&&(n=this.isValidValue(t.unit)),n?1:0},e.prototype.isSameResponse=function(e,t,n){return this.utils.sameAtKeyMissingIsBlank(t,n,"answer")&&this.utils.sameAtKeyMissingIsBlank(t,n,"unit")},e.prototype.isValidValue=function(e){return!!e||"0"===e||0===e},e.prototype.requiresUnits=function(e){var t=this.domUtils.convertToElement(e.html);return!(!t.querySelector("select[name*=unit]")&&!t.querySelector('input[type="radio"]'))},e.prototype.validateUnits=function(e){if(!e)return!1;var t="[+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[-+]?\\d+)?";return e=e.replace(" ",""),e=e.replace(/(?:e|E|(?:x|\*|)10(?:\^|\*\*))([+-]?\d+)/,"e$1"),null!==(e=-1!=e.indexOf(".")||e.split(",").length-1>1?e.replace(",",""):e.replace(",",".")).match(new RegExp("^"+t))&&null!==e.match(new RegExp(t+"$"))},e=a([Object(o.A)(),s("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n){return e.call(this,t,"AddonQtypeCalculatedComponent",n)||this}return l(t,e),t.prototype.ngOnInit=function(){this.initCalculatedComponent()},t=a([Object(o.m)({selector:"addon-qtype-calculated",templateUrl:"addon-qtype-calculated.html"}),s("design:paramtypes",[r.a,o.C])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n){return e.call(this,t,"AddonQtypeMatchComponent",n)||this}return l(t,e),t.prototype.ngOnInit=function(){this.initMatchComponent()},t=a([Object(o.m)({selector:"addon-qtype-match",templateUrl:"addon-qtype-match.html"}),s("design:paramtypes",[r.a,o.C])],t)}(i.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(5),l=n(9),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n,o){this.host=e,this.platform=t,this.translate=n,this.eventsProvider=o}return e.prototype.ngOnInit=function(){var e=this;this.setTranslatedBackButtonText(),this.languageObserver=this.eventsProvider.on(l.a.LANGUAGE_CHANGED,function(){e.setTranslatedBackButtonText()})},e.prototype.ngOnDestroy=function(){this.languageObserver&&this.languageObserver.off()},e.prototype.setTranslatedBackButtonText=function(){this.host&&this.platform.is("ios")&&this.host.setBackButtonText(this.translate.instant("core.back"))},e=a([Object(o.s)({selector:"ion-navbar[core-back-button]"}),s("design:paramtypes",[i.u,i.v,r.c,l.a])],e)}()},function(e,t,n){"use strict";function o(e){return r._57(0,[r._52(402653184,1,{detailNav:0}),r._52(402653184,2,{menu:0}),(e()(),r._31(2,0,null,null,17,"ion-split-pane",[],null,[[null,"ionChange"]],function(e,t,n){var o=!0;if("ionChange"===t){o=!1!==e.component.onSplitPaneChanged(n._visible)&&o}return o},null,null)),r._30(3,4341760,null,1,i.b,[r.M,l.a,a.a,r.t,r.V],{when:[0,"when"]},{ionChange:"ionChange"}),r._52(603979776,3,{_setchildren:1}),r._50(2048,[[3,4]],i.a,null,[i.b]),(e()(),r._55(-1,null,["\n    "])),(e()(),r._31(7,0,null,null,7,"ion-menu",[["class","core-avoid-header"],["role","navigation"],["type","push"]],null,null,null,s.b,s.a)),r._30(8,245760,[[2,4],["menu",4]],2,u.a,[c.a,r.t,a.a,l.a,r.V,d.a,f.l,p.a,h.a],{content:[0,"content"],type:[1,"type"],side:[2,"side"]},null),r._52(335544320,4,{menuContent:0}),r._52(335544320,5,{menuNav:0}),r._50(2048,[[3,4]],i.a,null,[u.a]),(e()(),r._55(-1,0,["\n        "])),r._43(0,0),(e()(),r._55(-1,0,["\n    "])),(e()(),r._55(-1,null,["\n    "])),(e()(),r._31(16,0,null,null,2,"ion-nav",[["class","core-avoid-header"],["main",""]],null,null,null,m.b,m.a)),r._30(17,4374528,[[1,4],["detailNav",4]],0,_.a,[[2,g.a],[2,v.a],h.a,a.a,l.a,r.t,r.M,r.V,r.o,f.l,y.a,[2,b.a],p.a,r.u],{root:[0,"root"]},null),r._50(2048,[[3,4]],i.a,null,[_.a]),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.when);e(t,8,0,r._44(t,17),"push",n.side);e(t,17,0,n.detailPage)},null)}n.d(t,"a",function(){return C}),t.b=o;var r=n(0),i=n(220),l=n(16),a=n(8),s=n(1908),u=n(422),c=n(209),d=n(107),f=n(43),p=n(34),h=n(35),m=n(1050),_=n(308),g=n(39),v=n(21),y=n(205),b=n(59),P=n(28),O=n(72),E=n(17),C=r._29({encapsulation:2,styles:[],data:{}});r._27("core-split-view",P.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-split-view",[],null,null,null,o,C)),r._30(1,245760,null,0,P.a,[[2,v.a],r.t,O.a,l.a,E.a],null,null)],function(e,t){e(t,1,0)},null)},{when:"when"},{},["*"])},function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,6,"button",[["class","button-small"],["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0],[8,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.clearForm()&&o}return o},s.b,s.a)),a._30(1,1097728,[[3,4]],0,u.a,[[8,""],c.a,a.t,a.V],{clear:[0,"clear"]},null),a._47(131072,d.a,[f.a,a.j]),(e()(),a._55(-1,0,["\n                "])),(e()(),a._31(4,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._30(5,147456,null,0,p.a,[c.a,a.t,a.V],{name:[0,"name"]},null),(e()(),a._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"");e(t,5,0,"close")},function(e,t){var n=t.component;e(t,0,0,a._56(t,0,0,a._44(t,2).transform("core.clearsearch")),""==n.searched||n.disabled);e(t,4,0,a._44(t,5)._hidden)})}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,9,"ion-item",[["class","core-clickable item item-block"],["text-wrap",""]],null,[[null,"mousedown"],[null,"mouseup"]],function(e,t,n){var o=!0,r=e.component;if("mousedown"===t){o=!1!==r.itemMouseDown(n,e.context.$implicit.searchedtext)&&o}if("mouseup"===t){o=!1!==r.itemMouseUp(n,e.context.$implicit.searchedtext)&&o}return o},h.b,h.a)),a._30(1,1097728,null,3,m.a,[_.a,c.a,a.t,a.V,[2,g.a]],null,null),a._52(335544320,5,{contentLabel:0}),a._52(603979776,6,{_buttons:1}),a._52(603979776,7,{_icons:1}),a._30(5,16384,null,0,v.a,[],null,null),(e()(),a._55(-1,2,["\n                    "])),(e()(),a._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-history"]],null,null,null,y.b,y.a)),a._30(8,704512,null,0,b.a,[a.t,c.a],{name:[0,"name"]},null),(e()(),a._55(9,2,["\n                    ","\n                "]))],function(e,t){e(t,8,0,"fa-history")},function(e,t){e(t,9,0,t.context.$implicit.searchedtext)})}function i(e){return a._57(0,[(e()(),a._31(0,0,null,null,8,"div",[["class","core-search-history"]],null,null,null,null,null)),(e()(),a._55(-1,null,["\n            "])),(e()(),a._31(2,0,null,null,5,"ion-list",[["class","with-borders"]],null,null,null,null,null)),a._30(3,16384,null,0,P.a,[c.a,a.t,a.V,O.a,E.l,C.a],null,null),(e()(),a._55(-1,null,["\n                "])),(e()(),a._26(16777216,null,null,1,null,r)),a._30(6,802816,null,0,I.j,[a._11,a._6,a.E],{ngForOf:[0,"ngForOf"]},null),(e()(),a._55(-1,null,["\n            "])),(e()(),a._55(-1,null,["\n        "]))],function(e,t){e(t,6,0,t.component.history)},null)}function l(e){return a._57(0,[a._52(402653184,1,{formElement:0}),(e()(),a._31(1,0,null,null,37,"ion-card",[],null,null,null,null,null)),a._30(2,16384,null,0,R.a,[c.a,a.t,a.V],null,null),(e()(),a._55(-1,null,["\n    "])),(e()(),a._31(4,0,[[1,0],["searchForm",1]],null,33,"form",[["novalidate",""],["role","search"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0,r=e.component;if("submit"===t){o=!1!==a._44(e,6).onSubmit(n)&&o}if("reset"===t){o=!1!==a._44(e,6).onReset()&&o}if("ngSubmit"===t){o=!1!==r.submitForm(n)&&o}return o},null,null)),a._30(5,16384,null,0,S.w,[],null,null),a._30(6,4210688,[["f",4]],0,S.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),a._50(2048,null,S.b,null,[S.p]),a._30(8,16384,null,0,S.o,[S.b],null,null),(e()(),a._55(-1,null,["\n        "])),(e()(),a._31(10,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,h.b,h.a)),a._30(11,1097728,null,3,m.a,[_.a,c.a,a.t,a.V,[2,g.a]],null,null),a._52(335544320,2,{contentLabel:0}),a._52(603979776,3,{_buttons:1}),a._52(603979776,4,{_icons:1}),a._30(15,16384,null,0,v.a,[],null,null),(e()(),a._55(-1,2,["\n            "])),(e()(),a._31(17,0,null,3,5,"ion-input",[["name","search"],["role","searchbox"],["type","search"]],[[8,"spellcheck",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"],[null,"blur"]],function(e,t,n){var o=!0,r=e.component;if("ngModelChange"===t){o=!1!==(r.searchText=n)&&o}if("focus"===t){o=!1!==r.showHistory()&&o}if("blur"===t){o=!1!==r.hideHistory()&&o}return o},w.b,w.a)),a._30(18,671744,null,0,S.q,[[2,S.b],[8,null],[8,null],[8,null]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),a._50(2048,null,S.m,null,[S.q]),a._30(20,16384,null,0,S.n,[S.m],null,null),a._30(21,5423104,null,0,A.a,[c.a,O.a,_.a,D.a,a.t,a.V,[2,j.a],[2,m.a],[2,S.m],C.a],{disabled:[0,"disabled"],type:[1,"type"],autocorrect:[2,"autocorrect"],placeholder:[3,"placeholder"]},{blur:"blur",focus:"focus"}),a._30(22,81920,null,0,k.a,[a.t,T.a,x.a,[2,M.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),(e()(),a._55(-1,2,["\n            "])),(e()(),a._31(24,0,null,4,5,"button",[["class","button-small"],["clear",""],["icon-only",""],["ion-button",""],["item-end",""],["type","submit"]],[[1,"aria-label",0],[8,"disabled",0]],null,null,s.b,s.a)),a._30(25,1097728,[[3,4]],0,u.a,[[8,""],c.a,a.t,a.V],{clear:[0,"clear"]},null),(e()(),a._55(-1,0,["\n                "])),(e()(),a._31(27,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._30(28,147456,null,0,p.a,[c.a,a.t,a.V],{name:[0,"name"]},null),(e()(),a._55(-1,0,["\n            "])),(e()(),a._55(-1,2,["\n            "])),(e()(),a._26(16777216,null,4,1,null,o)),a._30(32,16384,null,0,I.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,2,["\n        "])),(e()(),a._55(-1,null,["\n        "])),(e()(),a._26(16777216,null,null,1,null,i)),a._30(36,16384,null,0,I.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n    "])),(e()(),a._55(-1,null,["\n"])),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,18,0,"search",n.disabled,n.searchText);e(t,21,0,n.disabled,"search",n.autocorrect,n.placeholder);e(t,22,0,n.autoFocus);e(t,25,0,"");e(t,28,0,"search");e(t,32,0,n.showClear);e(t,36,0,n.historyShown&&n.history.length)},function(e,t){var n=t.component;e(t,4,0,a._44(t,8).ngClassUntouched,a._44(t,8).ngClassTouched,a._44(t,8).ngClassPristine,a._44(t,8).ngClassDirty,a._44(t,8).ngClassValid,a._44(t,8).ngClassInvalid,a._44(t,8).ngClassPending);e(t,17,0,n.spellcheck,a._44(t,20).ngClassUntouched,a._44(t,20).ngClassTouched,a._44(t,20).ngClassPristine,a._44(t,20).ngClassDirty,a._44(t,20).ngClassValid,a._44(t,20).ngClassInvalid,a._44(t,20).ngClassPending);e(t,24,0,n.searchLabel,n.disabled||!n.searchText||n.searchText.length<n.lengthCheck);e(t,27,0,a._44(t,28)._hidden)})}n.d(t,"b",function(){return H}),t.c=l,n.d(t,"a",function(){return B});var a=n(0),s=n(45),u=n(42),c=n(8),d=n(25),f=n(17),p=n(47),h=n(30),m=n(20),_=n(19),g=n(27),v=n(33),y=n(80),b=n(75),P=n(86),O=n(16),E=n(43),C=n(34),I=n(7),R=n(89),S=n(23),w=n(110),A=n(90),D=n(35),j=n(29),k=n(376),T=n(4),x=n(2),M=n(21),N=n(379),U=n(283),F=n(9),L=n(1),H=a._29({encapsulation:2,styles:[],data:{}}),B=a._27("core-search-box",N.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-search-box",[],null,null,null,l,H)),a._30(1,245760,null,0,N.a,[f.a,x.a,U.a,F.a,L.a,T.a],null,null)],function(e,t){e(t,1,0)},null)},{searchLabel:"searchLabel",placeholder:"placeholder",autocorrect:"autocorrect",spellcheck:"spellcheck",autoFocus:"autoFocus",lengthCheck:"lengthCheck",showClear:"showClear",disabled:"disabled",initialSearch:"initialSearch",searchArea:"searchArea"},{onSubmit:"onSubmit",onClear:"onClear"},[])},function(e,t,n){"use strict";var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(74),d=n(500),f=n(23),p=n(97),h=n(127),m=n(198),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,n){this.injector=e,this.dataDelegate=t,this.dataProvider=n,this.gotoEntry=new o.v}return e.prototype.ngOnInit=function(){var e=this;this.field?this.dataDelegate.getComponentForField(this.injector,this.field).then(function(t){e.fieldComponent=t,t&&(e.data={mode:e.mode,field:e.field,value:e.value,database:e.database,error:e.error,gotoEntry:e.gotoEntry,form:e.form,search:e.search})}).finally(function(){e.fieldLoaded=!0}):this.fieldLoaded=!0},e.prototype.ngOnChanges=function(e){this.fieldLoaded&&this.data&&("edit"==this.mode&&e.error&&(this.data.error=e.error.currentValue),"show"!=this.mode&&"list"!=this.mode||!e.value||(this.data.value=e.value.currentValue))},_([Object(o._9)(m.a),g("design:type",m.a)],e.prototype,"dynamicComponent",void 0),_([Object(o.D)(),g("design:type",String)],e.prototype,"mode",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"field",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"value",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"database",void 0),_([Object(o.D)(),g("design:type",String)],e.prototype,"error",void 0),_([Object(o.O)(),g("design:type",o.v)],e.prototype,"gotoEntry",void 0),_([Object(o.D)(),g("design:type",f.g)],e.prototype,"form",void 0),_([Object(o.D)(),g("design:type",Object)],e.prototype,"search",void 0),e=_([Object(o.m)({selector:"addon-mod-data-field-plugin",templateUrl:"addon-mod-data-field-plugin.html"}),g("design:paramtypes",[o.C,h.a,p.a])],e)}(),y=n(9),b=n(217),P=n(292),O=n(1),E=n(15),C=n(46),I=n(163),R=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},S=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=function(){function e(e,t,n,o,r,i,l,a,s,u){this.injector=e,this.dataProvider=t,this.dataOffline=n,this.eventsProvider=o,this.userProvider=i,this.navCtrl=l,this.linkHelper=a,this.dataHelper=s,this.tagProvider=u,this.rootUrl=r.getCurrentSite().getURL(),this.siteId=r.getCurrentSiteId(),this.tagsEnabled=this.tagProvider.areTagsAvailableInSite()}return e.prototype.ngOnInit=function(){var e=this;"userpicture"==this.action&&this.userProvider.getProfile(this.entry.userid,this.database.courseid).then(function(t){e.userPicture=t.profileimageurl})},e.prototype.approveEntry=function(){this.dataHelper.approveOrDisapproveEntry(this.database.id,this.entry.id,!0,this.database.courseid)},e.prototype.deleteEntry=function(){this.dataHelper.showDeleteEntryModal(this.database.id,this.entry.id,this.database.courseid)},e.prototype.disapproveEntry=function(){this.dataHelper.approveOrDisapproveEntry(this.database.id,this.entry.id,!1,this.database.courseid)},e.prototype.editEntry=function(){this.linkHelper.goInSite(this.navCtrl,"AddonModDataEditPage",{courseId:this.database.course,module:this.module,entryId:this.entry.id})},e.prototype.viewEntry=function(){this.linkHelper.goInSite(this.navCtrl,"AddonModDataEntryPage",{courseId:this.database.course,module:this.module,entryId:this.entry.id,group:this.group,offset:this.offset})},e.prototype.undoDelete=function(){var e=this,t=this.database.id,n=this.entry.id;return this.dataOffline.getEntry(t,n,"delete",this.siteId).then(function(){return e.dataOffline.deleteEntry(t,n,"delete",e.siteId)}).then(function(){e.eventsProvider.trigger(p.a.ENTRY_CHANGED,{dataId:t,entryId:n},e.siteId)})},R([Object(o.D)(),S("design:type",String)],e.prototype,"mode",void 0),R([Object(o.D)(),S("design:type",String)],e.prototype,"action",void 0),R([Object(o.D)(),S("design:type",Object)],e.prototype,"entry",void 0),R([Object(o.D)(),S("design:type",Object)],e.prototype,"database",void 0),R([Object(o.D)(),S("design:type",Object)],e.prototype,"module",void 0),R([Object(o.D)(),S("design:type",Number)],e.prototype,"group",void 0),R([Object(o.D)(),S("design:type",Number)],e.prototype,"offset",void 0),e=R([Object(o.m)({selector:"addon-mod-data-action",templateUrl:"addon-mod-data-action.html"}),S("design:paramtypes",[o.C,p.a,P.a,y.a,O.a,C.a,i.s,E.a,b.a,I.a])],e)}(),A=n(477),D=n(374),j=n(274);n.d(t,"a",function(){return T});var k=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},T=function(){function e(){}return e=k([Object(o.I)({declarations:[d.a,v,w],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a,A.a,D.a,j.a],providers:[],exports:[d.a,v,w],entryComponents:[d.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(7),i=n(193),l=n(26),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=function(){function e(){}return e=a([Object(o.I)({declarations:[i.a],imports:[r.b,l.a],exports:[i.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(3),i=n(148),l=n(13),a=n(10),s=n(6),u=n(9),c=n(1),d=n(81),f=n(11),p=n(24),h=n(2),m=n(186),_=n(275),g=n(276),v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p){var h=e.call(this,"AddonCalendarSyncProvider",i,l,n,a,s,t,u)||this;return h.eventsProvider=r,h.utils=c,h.calendarProvider=d,h.calendarOffline=f,h.calendarHelper=p,h}return v(t,e),n=t,t.prototype.syncAllEvents=function(e,t){return this.syncOnSites("all calendar events",this.syncAllEventsFunc.bind(this),[t],e)},t.prototype.syncAllEventsFunc=function(e,t){var o=this;return(t?this.syncEvents(e):this.syncEventsIfNeeded(e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{warnings:t.warnings,events:t.events,deleted:t.deleted},e)})},t.prototype.syncEventsIfNeeded=function(e){var t=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.isSyncNeeded(n.SYNC_ID,e).then(function(n){if(n)return t.syncEvents(e)})},t.prototype.syncEvents=function(e){var t=this;if(e=e||this.sitesProvider.getCurrentSiteId(),this.isSyncing(n.SYNC_ID,e))return this.getOngoingSync(n.SYNC_ID,e);this.logger.debug("Try to sync calendar events for site "+e);var o,r={warnings:[],events:[],deleted:[],toinvalidate:[],updated:!1},i=this.calendarOffline.getAllEventsIds(e).catch(function(){return[]}).then(function(n){if(o=n,n.length){if(!t.appProvider.isOnline())return Promise.reject(null);var i=[];return o.forEach(function(n){i.push(t.syncOfflineEvent(n,r,e))}),t.utils.allPromises(i)}}).then(function(){if(r.updated){var n=[t.calendarProvider.invalidateEventsList(e),t.calendarHelper.refreshAfterChangeEvents(r.toinvalidate,e)];return Promise.all(n).catch(function(){})}}).then(function(){return t.setSyncTime(n.SYNC_ID,e).catch(function(){})}).then(function(){return r});return this.addOngoingSync(n.SYNC_ID,i,e)},t.prototype.syncOfflineEvent=function(e,t,n){var o=this;return this.syncProvider.isBlocked(m.a.COMPONENT,e,n)?(this.logger.debug("Cannot sync event "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.translate.instant("addon.calendar.calendarevent")}))):this.calendarOffline.getDeletedEvent(e,n).then(function(r){return o.calendarProvider.deleteEventOnline(r.id,r.repeat,n).then(function(){t.updated=!0,t.deleted.push(e);var i=[];return i.push(o.calendarOffline.unmarkDeleted(e,n)),i.push(o.calendarOffline.deleteEvent(e,n).catch(function(){})),i.push(o.calendarProvider.getEventFromLocalDb(e,n).then(function(e){t.toinvalidate.push({event:e,repeated:r.repeat?e.eventcount:1})}).catch(function(){})),Promise.all(i)}).catch(function(i){if(o.utils.isWebServiceError(i)){t.updated=!0;var l=[];return l.push(o.calendarOffline.unmarkDeleted(e,n)),l.push(o.calendarOffline.deleteEvent(e,n).catch(function(){})),Promise.all(l).then(function(){t.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.translate.instant("addon.calendar.calendarevent"),name:r.name,error:o.textUtils.getErrorMessageFromError(i)}))})}return Promise.reject(i)})},function(){return o.calendarOffline.getEvent(e,n).then(function(r){var i=o.utils.clone(r);return i.description={text:i.description,format:1},o.calendarProvider.submitEventOnline(e>0?e:void 0,i,n).then(function(e){t.updated=!0,t.events.push(e);return t.toinvalidate.push({event:e,repeated:i.repeat?i.repeats:i.repeateditall&&e.repeatid?e.eventcount:1}),o.calendarOffline.deleteEvent(r.id,n)}).catch(function(e){return o.utils.isWebServiceError(e)?(t.updated=!0,o.calendarOffline.deleteEvent(r.id,n).then(function(){t.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.translate.instant("addon.calendar.calendarevent"),name:r.name,error:o.textUtils.getErrorMessageFromError(e)}))})):Promise.reject(e)})})})},t.AUTO_SYNCED="addon_calendar_autom_synced",t.MANUAL_SYNCED="addon_calendar_manual_synced",t.SYNC_ID="calendar",t=n=y([Object(o.A)(),b("design:paramtypes",[r.c,a.a,l.a,u.a,s.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a])],t);var n}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(28),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},u=function(){function e(e,t,n){this.navCtrl=t,this.svComponent=n,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.element.addEventListener("click",function(t){if(!t.defaultPrevented){t.preventDefault(),t.stopPropagation();(e.svComponent?e.svComponent.getMasterNav():e.navCtrl).push("CoreUserProfilePage",{userId:e.userId,courseId:e.courseId})}})},l([Object(o.D)(),a("design:type",Number)],e.prototype,"userId",void 0),l([Object(o.D)(),a("design:type",Number)],e.prototype,"courseId",void 0),e=l([Object(o.s)({selector:"[core-user-link]"}),s(1,Object(o.N)()),s(2,Object(o.N)()),a("design:paramtypes",[o.t,r.s,i.a])],e)}()},function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,3,"div",[],[[2,"core-comments-clickable",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openComments(n)&&o}return o},null,null)),(e()(),a._55(1,null,["\n        ","\n    "])),a._48(2,{$a:0}),a._47(131072,s.a,[u.a,a.j])],null,function(e,t){var n=t.component;e(t,0,0,!n.disabled);e(t,1,0,a._56(t,1,0,a._44(t,3).transform("core.comments.commentscount",e(t,2,0,n.commentsCount))))})}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),a._55(1,null,["\n        ","\n    "])),a._47(131072,s.a,[u.a,a.j])],null,function(e,t){e(t,1,0,a._56(t,1,0,a._44(t,2).transform("core.comments.commentsnotworking")))})}function i(e){return a._57(0,[(e()(),a._31(0,0,null,null,8,"core-loading",[],null,null,null,c.b,c.a)),a._30(1,638976,null,0,d.a,[u.a,a.t,f.a,p.a],{hideUntil:[0,"hideUntil"]},null),(e()(),a._55(-1,0,["\n    "])),(e()(),a._26(16777216,null,0,1,null,o)),a._30(4,16384,null,0,h.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,0,["\n    "])),(e()(),a._26(16777216,null,0,1,null,r)),a._30(7,16384,null,0,h.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,0,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.commentsLoaded||!n.displaySpinner);e(t,4,0,!n.countError);e(t,7,0,n.countError)},null)}function l(e){return a._57(0,[(e()(),a._26(16777216,null,null,1,null,i)),a._30(1,16384,null,0,h.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n"]))],function(e,t){e(t,1,0,!t.component.disabled)},null)}n.d(t,"b",function(){return b}),t.c=l,n.d(t,"a",function(){return P});var a=n(0),s=n(25),u=n(17),c=n(54),d=n(51),f=n(9),p=n(2),h=n(7),m=n(321),_=n(21),g=n(153),v=n(1),y=n(28),b=a._29({encapsulation:2,styles:[],data:{}}),P=a._27("core-comments",m.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-comments",[],null,null,null,l,b)),a._30(1,770048,null,0,m.a,[_.a,g.a,v.a,f.a,[2,y.a]],null,null)],function(e,t){e(t,1,0)},null)},{contextLevel:"contextLevel",instanceId:"instanceId",component:"component",itemId:"itemId",area:"area",title:"title",displaySpinner:"displaySpinner",courseId:"courseId"},{onLoading:"onLoading"},[])},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),d._55(1,null,[""," "]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.name)})}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),d._55(-1,null,["\n            "])),(e()(),d._26(16777216,null,null,1,null,o)),d._30(3,16384,null,0,f.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(4,null,["","\n        "]))],function(e,t){e(t,3,0,t.context.$implicit.name)},function(e,t){e(t,4,0,t.context.$implicit.extlist)})}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,p.b,p.a)),d._30(1,1097728,null,3,h.a,[m.a,_.a,d.t,d.V,[2,g.a]],null,null),d._52(335544320,4,{contentLabel:0}),d._52(603979776,5,{_buttons:1}),d._52(603979776,6,{_icons:1}),d._30(5,16384,null,0,v.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),d._55(8,null,["",""])),d._47(131072,y.a,[b.a,d.j]),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(11,0,null,2,4,"ul",[["class","list-with-style"]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n        "])),(e()(),d._26(16777216,null,null,1,null,r)),d._30(14,802816,null,0,f.j,[d._11,d._6,d.E],{ngForOf:[0,"ngForOf"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._55(-1,2,["\n"]))],function(e,t){e(t,14,0,t.component.fileTypes.info)},function(e,t){e(t,8,0,d._56(t,8,0,d._44(t,9).transform("core.fileuploader.filesofthesetypes")))})}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-file",[],null,[[null,"onDelete"]],function(e,t,n){var o=!0;if("onDelete"===t){o=!1!==e.component.delete(e.parent.context.index,!0)&&o}return o},P.b,P.a)),d._30(1,245760,null,0,O.a,[E.a,C.a,I.a,R.a,S.a,w.a,A.a,D.a,j.a,k.a,T.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],canDelete:[3,"canDelete"],canDownload:[4,"canDownload"]},{onDelete:"onDelete"})],function(e,t){var n=t.component;e(t,1,0,t.parent.context.$implicit,n.component,n.componentId,!0,!t.parent.context.$implicit.offline)},null)}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-local-file",[],null,[[null,"onDelete"],[null,"onRename"]],function(e,t,n){var o=!0,r=e.component;if("onDelete"===t){o=!1!==r.delete(e.parent.context.index,!1)&&o}if("onRename"===t){o=!1!==r.renamed(e.parent.context.index,n)&&o}return o},x.b,x.a)),d._30(1,114688,null,0,M.a,[A.a,C.a,j.a,N.a,I.a,U.a,E.a,D.a],{file:[0,"file"],manage:[1,"manage"]},{onDelete:"onDelete",onRename:"onRename"})],function(e,t){e(t,1,0,t.parent.context.$implicit,!0)},null)}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),d._55(-1,null,["\n    "])),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,l)),d._30(4,16384,null,0,f.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n\n    "])),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,a)),d._30(8,16384,null,0,f.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"]))],function(e,t){e(t,4,0,!t.context.$implicit.name||t.context.$implicit.offline);e(t,8,0,t.context.$implicit.name&&!t.context.$implicit.offline)},null)}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,p.b,p.a)),d._30(1,1097728,null,3,h.a,[m.a,_.a,d.t,d.V,[2,g.a]],null,null),d._52(335544320,7,{contentLabel:0}),d._52(603979776,8,{_buttons:1}),d._52(603979776,9,{_icons:1}),d._30(5,16384,null,0,v.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(7,0,null,2,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.add()&&o}return o},F.b,F.a)),d._30(8,1097728,[[8,4]],0,L.a,[[8,""],_.a,d.t,d.V],{block:[0,"block"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._31(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(11,147456,null,0,H.a,[_.a,d.t,d.V],{name:[0,"name"]},null),(e()(),d._55(12,0,["\n        ","\n    "])),d._47(131072,y.a,[b.a,d.j]),(e()(),d._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"");e(t,11,0,"add")},function(e,t){e(t,10,0,d._44(t,11)._hidden);e(t,12,0,d._56(t,12,0,d._44(t,13).transform("core.fileuploader.addfiletext")))})}function c(e){return d._57(0,[(e()(),d._31(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,p.b,p.a)),d._30(1,1097728,null,3,h.a,[m.a,_.a,d.t,d.V,[2,g.a]],null,null),d._52(335544320,1,{contentLabel:0}),d._52(603979776,2,{_buttons:1}),d._52(603979776,3,{_icons:1}),d._30(5,16384,null,0,v.a,[],null,null),(e()(),d._55(6,2,["\n    ","\n    "])),d._48(7,{size:0,attachments:1}),d._48(8,{$a:0}),d._47(131072,y.a,[b.a,d.j]),(e()(),d._31(10,0,null,2,1,"span",[["class","core-mark-required"]],null,null,null,B.b,B.a)),d._30(11,4308992,null,0,q.a,[d.t,b.a,j.a,C.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),d._55(-1,2,["\n"])),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,i)),d._30(15,16384,null,0,f.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,s)),d._30(18,802816,null,0,f.j,[d._11,d._6,d.E],{ngForOf:[0,"ngForOf"]},null),(e()(),d._55(-1,null,["\n"])),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,u)),d._30(22,16384,null,0,f.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,11,0,n.required);e(t,15,0,n.fileTypes&&n.fileTypes.mimetypes&&n.fileTypes.mimetypes.length);e(t,18,0,n.files);e(t,22,0,n.unlimitedFiles||n.maxSubmissions>=0&&n.files&&n.files.length<n.maxSubmissions)},function(e,t){var n=t.component;e(t,6,0,d._56(t,6,0,d._44(t,9).transform("core.maxsizeandattachments",e(t,8,0,e(t,7,0,n.maxSizeReadable,n.maxSubmissionsReadable)))))})}n.d(t,"a",function(){return W}),t.b=c;var d=n(0),f=n(7),p=n(30),h=n(20),m=n(19),_=n(8),g=n(27),v=n(33),y=n(25),b=n(17),P=n(249),O=n(215),E=n(1),C=n(2),I=n(4),R=n(18),S=n(10),w=n(115),A=n(66),D=n(9),j=n(11),k=n(56),T=n(22),x=n(745),M=n(382),N=n(57),U=n(24),F=n(45),L=n(42),H=n(47),B=n(93),q=n(84),G=n(316),V=n(72),K=n(149),W=d._29({encapsulation:2,styles:[],data:{}});d._27("core-attachments",G.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-attachments",[],null,null,null,c,W)),d._30(1,114688,null,0,G.a,[S.a,I.a,j.a,V.a,b.a,K.a],null,null)],function(e,t){e(t,1,0)},null)},{files:"files",maxSize:"maxSize",maxSubmissions:"maxSubmissions",component:"component",componentId:"componentId",allowOffline:"allowOffline",acceptedTypes:"acceptedTypes",required:"required"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(9),l=n(1),a=n(4),s=n(38),u=n(13),c=n(50),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},h=function(){function e(e,t,n,r,i,l,a){this.navCtrl=e,this.prefetchDelegate=t,this.domUtils=n,this.courseHelper=r,this.eventsProvider=i,this.sitesProvider=l,this.courseProvider=a,this.statusCalculated=!1,this.isDestroyed=!1,this.completionChanged=new o.v,this.statusChanged=new o.v}return Object.defineProperty(e.prototype,"enabled",{set:function(e){this.downloadEnabled=e,this.module.handlerData.showDownloadButton&&this.downloadEnabled&&!this.statusCalculated&&(this.statusCalculated=!0,this.spinner=!0,this.prefetchDelegate.getModuleStatus(this.module,this.courseId).then(this.showStatus.bind(this)))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.module&&!this.module.handlerData&&(this.module.handlerData={}),this.module.handlerData.showDownloadButton&&(this.prefetchHandler=this.prefetchDelegate.getPrefetchHandlerFor(this.module),this.canCheckUpdates=this.prefetchDelegate.canCheckUpdates(),this.statusObserver=this.eventsProvider.on(i.a.PACKAGE_STATUS_CHANGED,function(t){if(t.componentId===e.module.id&&e.prefetchHandler&&t.component===e.prefetchHandler.component){var n=e.prefetchDelegate.determineModuleStatus(e.module,t.status);e.downloadEnabled?e.showStatus(n):e.module.handlerData.updateStatus&&e.module.handlerData.updateStatus(n)}},this.sitesProvider.getCurrentSiteId())),this.module.handlerData.a11yTitle=void 0!==this.module.handlerData.a11yTitle?this.module.handlerData.a11yTitle:this.module.handlerData.title,this.module.modnametranslated=this.courseProvider.translateModuleName(this.module.modname)||""},e.prototype.moduleClicked=function(e){!1!==this.module.uservisible&&this.module.handlerData.action&&this.module.handlerData.action(e,this.navCtrl,this.module,this.courseId)},e.prototype.buttonClicked=function(e,t){t&&t.action&&(e.preventDefault(),e.stopPropagation(),t.action(e,this.navCtrl,this.module,this.courseId))},e.prototype.download=function(e){var t=this;this.prefetchHandler&&(this.spinner=!0,this.prefetchHandler.getDownloadSize(this.module,this.courseId,!0).then(function(n){return t.courseHelper.prefetchModule(t.prefetchHandler,t.module,n,t.courseId,e)}).then(function(){t.statusChanged.emit({sectionId:t.section.id,moduleId:t.module.id,courseId:t.courseId})}).catch(function(e){t.spinner=!1,t.isDestroyed||t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}))},e.prototype.showStatus=function(e){e&&(this.spinner=!1,this.downloadStatus=e,this.module.handlerData.updateStatus&&this.module.handlerData.updateStatus(e))},e.prototype.ngOnDestroy=function(){this.statusObserver&&this.statusObserver.off(),this.module&&this.module.handlerData&&this.module.handlerData.onDestroy&&this.module.handlerData.onDestroy(),this.isDestroyed=!0},d([Object(o.D)(),f("design:type",Object)],e.prototype,"module",void 0),d([Object(o.D)(),f("design:type",Number)],e.prototype,"courseId",void 0),d([Object(o.D)(),f("design:type",Object)],e.prototype,"section",void 0),d([Object(o.D)("downloadEnabled"),f("design:type",Boolean),f("design:paramtypes",[Boolean])],e.prototype,"enabled",null),d([Object(o.O)(),f("design:type",o.v)],e.prototype,"completionChanged",void 0),d([Object(o.O)(),f("design:type",o.v)],e.prototype,"statusChanged",void 0),e=d([Object(o.m)({selector:"core-course-module",templateUrl:"core-course-module.html"}),p(0,Object(o.N)()),f("design:paramtypes",[r.s,c.a,a.a,s.a,i.a,l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(527),s=n(1558),u=n(614),c=n(26),d=n(31),f=n(106),p=n(372),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=function(){function e(){}return e=h([Object(o.I)({declarations:[a.a,s.a,u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a,f.a,p.a],providers:[],exports:[a.a,s.a,u.a],entryComponents:[a.a,u.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(74),d=n(519),f=n(528),p=n(1591),h=n(1552),m=n(214),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=function(){function e(){}return e=_([Object(o.I)({declarations:[d.a,f.a,p.a,h.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a,m.a],providers:[],exports:[d.a,f.a,p.a,h.a],entryComponents:[d.a]})],e)}()},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),i._55(-1,null,["\n    "])),(e()(),i._31(2,0,null,null,6,"progress",[["aria-valuemax","100"],["aria-valuemin","0"],["max","100"],["role","progressbar"]],[[8,"value",0],[1,"aria-valuenow",0]],null,null,null,null)),(e()(),i._55(-1,null,["\n        "])),(e()(),i._31(4,0,null,null,3,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["class","progress-bar-fallback"],["role","progressbar"]],[[1,"aria-valuenow",0]],null,null,null,null)),(e()(),i._55(-1,null,["\n            "])),(e()(),i._31(6,0,null,null,0,"span",[],[[4,"width",null]],null,null,null,null)),(e()(),i._55(-1,null,["\n        "])),(e()(),i._55(-1,null,["\n    "])),(e()(),i._55(-1,null,["\n    "])),(e()(),i._31(10,0,null,null,3,"span",[["class","core-progress-text"]],null,null,null,null,null)),(e()(),i._55(11,null,["",""])),i._48(12,{$a:0}),i._47(131072,l.a,[a.a,i.j]),(e()(),i._55(-1,null,["\n"]))],null,function(e,t){var n=t.component;e(t,2,0,n.progress,n.progress);e(t,4,0,n.progress);e(t,6,0,n.width);e(t,11,0,i._56(t,11,0,i._44(t,13).transform("core.percentagenumber",e(t,12,0,n.text))))})}function r(e){return i._57(2,[(e()(),i._26(16777216,null,null,1,null,o)),i._30(1,16384,null,0,s.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.progress>=0)},null)}n.d(t,"a",function(){return d}),t.b=r;var i=n(0),l=n(25),a=n(17),s=n(7),u=n(319),c=n(79),d=i._29({encapsulation:2,styles:[],data:{}});i._27("core-progress-bar",u.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-progress-bar",[],null,null,null,r,d)),i._30(1,573440,null,0,u.a,[c.c],null,null)],null,null)},{progress:"progress",text:"text"},{},[])},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(150),i=n(1),l=n(2),a=n(116),s=n(170),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.langProvider=e,this.sitesProvider=t,this.menuDelegate=n,this.utils=o,this.tablet=!1,this.tablet=window&&window.innerWidth&&window.innerWidth>=576&&window.innerHeight>=576}return t=e,e.prototype.getCurrentMainMenuHandlers=function(){var e=this,t=this.utils.promiseDefer(),n=this.menuDelegate.getHandlers().subscribe(function(o){n&&n.unsubscribe(),o=o.filter(function(e){return!e.onlyInMore}),t.resolve(o.slice(0,e.getNumItems()))});return t.promise},e.prototype.getCustomMenuItems=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var n=e.getStoredConfig("tool_mobile_custommenuitems"),o={},r=[],i=0;return n&&"string"==typeof n?(n.split(/(?:\r\n|\r|\n)/).forEach(function(e){var t,n=e.split("|"),r=n[0]?n[0].trim():n[0],l=n[1]?n[1].trim():n[1],a=n[2]?n[2].trim():n[2],s=(n[3]?n[3].trim():n[3])||"none",u=n[4]?n[4].trim():n[4];r&&l&&a&&(t=l+"#"+a,u||(u="embedded"==a?"qr-scanner":"link"),o[t]||(o[t]={url:l,type:a,position:i,labels:{}},i++),o[t].labels[s.toLowerCase()]={label:r,icon:u})}),i?t.langProvider.getCurrentLanguage().then(function(e){var t=a.a.default_lang||"en";for(var n in o){var i=o[n],l=i.labels[e]||i.labels[e+"_only"]||i.labels.none||i.labels[t];if(!l){for(var s in i.labels)if(-1==s.indexOf("_only")){l=i.labels[s];break}if(!l)continue}r[i.position]={url:i.url,type:i.type,label:l.label,icon:l.icon}}return r.filter(function(e){return void 0!==e})}):r):r})},e.prototype.getNumItems=function(){if(!this.isResponsiveMainMenuItemsDisabledInCurrentSite()&&window&&window.innerWidth){var e=void 0;return(e=this.tablet?Math.floor(window.innerHeight/t.ITEM_MIN_WIDTH):(e=Math.floor(window.innerWidth/t.ITEM_MIN_WIDTH))>=5?5:e)>1?e-1:1}return t.NUM_MAIN_HANDLERS},e.prototype.getTabPlacement=function(e){var t=window&&window.innerWidth&&window.innerWidth>=576&&window.innerHeight>=576;return t!=this.tablet&&(this.tablet=t,setTimeout(function(){e.resize()},500)),t?"side":"bottom"},e.prototype.isCurrentMainMenuHandler=function(e,t){return this.getCurrentMainMenuHandlers().then(function(t){return!!t.find(function(t,n){return t.page==e})})},e.prototype.isResponsiveMainMenuItemsDisabledInCurrentSite=function(){var e=this.sitesProvider.getCurrentSite();return e&&e.isFeatureDisabled("NoDelegate_ResponsiveMainMenuItems")},e.NUM_MAIN_HANDLERS=4,e.ITEM_MIN_WIDTH=72,e=t=u([Object(o.A)(),c("design:paramtypes",[r.a,i.a,s.a,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(10),i=n(9),l=n(57),a=n(6),s=n(1),u=n(66),c=n(11),d=n(194),f=(n.n(d),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},_=function(){function e(e,t,n,o,r,i,l){this.fileProvider=t,this.textUtils=o,this.mimeUtils=r,this.sitesProvider=i,this.eventsProvider=l,this.SHARED_FILES_TABLE="shared_files",this.tableSchema={name:"CoreSharedFilesProvider",version:1,tables:[{name:this.SHARED_FILES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0}]}]},this.logger=e.getInstance("CoreSharedFilesProvider"),this.appDB=n.getDB(),this.dbReady=n.createTablesFromSchema(this.tableSchema).catch(function(){})}return t=e,e.prototype.checkIOSNewFiles=function(){var e=this;return this.logger.debug("Search for new files on iOS"),this.fileProvider.getDirectoryContents("Inbox").then(function(t){if(t.length>0){var n,o=[];return t.forEach(function(t){var r=e.getFileId(t);o.push(e.isFileTreated(r).then(function(){e.deleteInboxFile(t)}).catch(function(){e.logger.debug("Found new file "+t.name+" shared with the app."),n||(n=t)}))}),Promise.all(o).then(function(){var t;return n?(t=e.getFileId(n),e.markAsTreated(t).then(function(){return e.logger.debug('File marked as "treated": '+n.name),n})):Promise.reject(null)})}return Promise.reject(null)})},e.prototype.deleteInboxFile=function(e){var t=this;return this.logger.debug("Delete inbox file: "+e.name),this.fileProvider.removeFileByFileEntry(e).catch(function(){}).then(function(){return t.unmarkAsTreated(t.getFileId(e)).then(function(){t.logger.debug('"Treated" mark removed from file: '+e.name)}).catch(function(n){return t.logger.debug('Error deleting "treated" mark from file: '+e.name,n),Promise.reject(n)})})},e.prototype.getFileId=function(e){return d.Md5.hashAsciiStr(e.name)},e.prototype.getSiteSharedFiles=function(e,t,n){var o=this,r=this.getSiteSharedFilesDirPath(e);return t&&(r=this.textUtils.concatenatePaths(r,t)),this.fileProvider.getDirectoryContents(r).then(function(e){return n&&(e=e.filter(function(e){var t=o.mimeUtils.getFileExtension(e.name),r=o.mimeUtils.getMimeType(t);return!r||n.indexOf(r)>-1})),e}).catch(function(){return[]})},e.prototype.getSiteSharedFilesDirPath=function(e){return e=e||this.sitesProvider.getCurrentSiteId(),this.fileProvider.getSiteFolder(e)+"/"+t.SHARED_FILES_FOLDER},e.prototype.isFileTreated=function(e){return h(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.getRecord(this.SHARED_FILES_TABLE,{id:e})]}})})},e.prototype.markAsTreated=function(e){return h(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.isFileTreated(e)];case 3:return t.sent(),[3,6];case 4:return t.sent(),[4,this.appDB.insertRecord(this.SHARED_FILES_TABLE,{id:e})];case 5:return t.sent(),[3,6];case 6:return[2]}})})},e.prototype.storeFileInSite=function(e,t,n){var o=this;if(n=n||this.sitesProvider.getCurrentSiteId(),!e||!n)return Promise.reject(null);t=t||e.name;var r=this.getSiteSharedFilesDirPath(n),l=this.textUtils.concatenatePaths(r,t);return this.fileProvider.createDir(r).then(function(){return o.fileProvider.moveExternalFile(e.toURL(),l).then(function(e){return o.eventsProvider.trigger(i.a.FILE_SHARED,{siteId:n,name:t}),e})})},e.prototype.unmarkAsTreated=function(e){return h(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.deleteRecords(this.SHARED_FILES_TABLE,{id:e})]}})})},e.SHARED_FILES_FOLDER="sharedfiles",e=t=f([Object(o.A)(),p("design:paramtypes",[a.a,l.a,r.a,c.a,u.a,s.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(5),i=n(185),l=n(10),a=n(9),s=n(150),u=n(6),c=n(1),d=n(22),f=n(2),p=n(465),h=n(125),m=n(348),_=n(466),g=n(400),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h){var m=this;this.platform=e,this.app=o,this.eventsProvider=r,this.loginHelper=i,this.zone=l,this.appProvider=a,this.langProvider=s,this.sitesProvider=u,this.screenOrientation=c,this.urlSchemesProvider=d,this.utils=f,this.urlUtils=p,this.network=h,this.rootPage="CoreLoginInitPage",this.lastUrls={},this.logger=t.getInstance("AppComponent"),e.ready().then(function(){m.appProvider.setStatusBarColor(),n.hideFormAccessoryBar(!1),m.appProvider.isDesktop()&&(o.setElementClass("platform-desktop",!0),m.appProvider.isMac()?o.setElementClass("platform-mac",!0):m.appProvider.isLinux()?o.setElementClass("platform-linux",!0):m.appProvider.isWindows()&&o.setElementClass("platform-windows",!0)),m.appProvider.registerBackButtonAction(function(){return m.closeModal()},2e3)})}return e.prototype.ngOnInit=function(){var e=this;this.eventsProvider.on(a.a.LOGOUT,function(){e.appProvider.getRootNavController().setRoot(g.a),e.langProvider.clearCustomStrings(),e.removeVersionClass()}),this.eventsProvider.on(a.a.SESSION_EXPIRED,function(t){e.loginHelper.sessionExpired(t)}),this.eventsProvider.on(a.a.PASSWORD_CHANGE_FORCED,function(t){e.loginHelper.passwordChangeForced(t.siteId)}),this.eventsProvider.on(a.a.USER_NOT_FULLY_SETUP,function(t){e.loginHelper.openInAppForEdit(t.siteId,"/user/edit.php","core.usernotfullysetup")}),this.eventsProvider.on(a.a.SITE_POLICY_NOT_AGREED,function(t){e.loginHelper.sitePolicyNotAgreed(t.siteId)}),this.platform.ready().then(function(){e.network.onchange().subscribe(function(){e.zone.run(function(){var t=e.appProvider.isOnline(),n=document.body.classList.contains("core-offline");document.body.classList.toggle("core-offline",!t),t&&n?(document.body.classList.add("core-online"),setTimeout(function(){document.body.classList.remove("core-online")},3e3)):t||document.body.classList.remove("core-online")})})}),this.eventsProvider.on(a.a.IAB_LOAD_START,function(t){var n=t.url.replace(/^https?:\/\//,"");if(e.urlSchemesProvider.isCustomURL(n))e.urlSchemesProvider.handleCustomURL(n),e.utils.closeInAppBrowser(!1);else if(e.platform.is("android")){var o=e.urlUtils.getUrlProtocol(n);o&&"file"!==o&&"cdvfile"!==o?(e.utils.openInBrowser(n),e.lastInAppUrl?e.utils.openInApp(e.lastInAppUrl):e.utils.closeInAppBrowser(!1)):e.lastInAppUrl=n}}),this.eventsProvider.on(a.a.IAB_EXIT,function(){e.loginHelper.waitingForBrowser=!1,e.lastInAppUrl="",e.loginHelper.checkLogout()}),this.platform.resume.subscribe(function(){setTimeout(function(){e.loginHelper.waitingForBrowser=!1,e.loginHelper.checkLogout()},1e3)}),window.handleOpenURL=function(t){e.zone.run(function(){e.lastUrls[t]&&Date.now()-e.lastUrls[t]<3e3||(e.logger.debug("App launched by URL ",t),e.lastUrls[t]=Date.now(),e.eventsProvider.trigger(a.a.APP_LAUNCHED_URL,t),e.urlSchemesProvider.handleCustomURL(t))})};var t=function(){var t=e.sitesProvider.getCurrentSite(),n=t&&t.getStoredConfig("tool_mobile_customlangstrings");void 0!==n&&e.langProvider.loadCustomStrings(n)};this.eventsProvider.on(a.a.LOGIN,function(n){n.siteId&&e.sitesProvider.getSite(n.siteId).then(function(t){var n=t.getInfo();n&&(e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(n.release||"")))}),t()}),this.eventsProvider.on(a.a.SITE_UPDATED,function(n){n.siteId==e.sitesProvider.getCurrentSiteId()&&(t(),e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(n.release||"")))}),this.eventsProvider.on(a.a.SITE_ADDED,function(n){n.siteId==e.sitesProvider.getCurrentSiteId()&&(t(),e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(n.release||"")))}),this.platform.pause.subscribe(function(){if(e.platform.is("android")){var t=function(e){for(var n=0;n<e.length;n++)t(e[n]);if(e.location.hostname.match(/^www\.youtube(-nocookie)?\.com$/)){var o=e.document.querySelectorAll("video");for(n=0;n<o.length;n++)o[n].pause()}};t(window)}}),this.screenOrientation.onChange().subscribe(function(){if(e.platform.is("ios")){var t=document.querySelector("meta[name=viewport]");t.setAttribute("content",t.getAttribute("content").replace("viewport-fit=cover,","")),setTimeout(function(){t.setAttribute("content","viewport-fit=cover,"+t.getAttribute("content"))})}e.eventsProvider.trigger(a.a.ORIENTATION_CHANGE)})},e.prototype.addVersionClass=function(e){var t=e.split(".");t[1]=t[1]||"0",t[2]=t[2]||"0",document.body.classList.add("version-"+t[0],"version-"+t[0]+"-"+t[1],"version-"+t[0]+"-"+t[1]+"-"+t[2])},e.prototype.removeVersionClass=function(){var e=[];Array.from(document.body.classList).forEach(function(t){"version-"==t.substring(0,8)&&e.push(t)}),e.forEach(function(e){document.body.classList.remove(e)})},e.prototype.closeModal=function(){var e=this.app._getActivePortal();return!!e&&(e.pop(),!0)},e=v([Object(o.m)({templateUrl:"app.html"}),y("design:paramtypes",[r.v,u.a,m.a,r.j,a.a,h.a,o.M,l.a,s.a,c.a,_.a,p.a,f.a,d.a,i.a])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.onClick=new o.v,this.element=e.nativeElement}return e.prototype.ngOnInit=function(){for(var e=this,t=0,n="all"==this.suppressEvents||void 0===this.suppressEvents||null===this.suppressEvents?["click","mousedown","touchdown","touchmove","touchstart"]:"string"==typeof this.suppressEvents?[this.suppressEvents]:Array.isArray(this.suppressEvents)?this.suppressEvents:[];t<n.length;t++){this.element.addEventListener(n[t],this.stopBubble.bind(this))}this.element.addEventListener("mouseup",function(t){e.onClick.emit(t)}),this.element.addEventListener("touchend",function(t){e.stopBubble(t),e.onClick.emit(t)})},e.prototype.stopBubble=function(e){e.preventDefault(),e.stopPropagation()},r([Object(o.D)("core-suppress-events"),i("design:type",Object)],e.prototype,"suppressEvents",void 0),r([Object(o.O)(),i("design:type",Object)],e.prototype,"onClick",void 0),e=r([Object(o.s)({selector:"[core-suppress-events]"}),i("design:paramtypes",[o.t])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.element=e}return e.prototype.ngOnChanges=function(e){if(this.element&&this.element.nativeElement){var t=document.createElement("style");t.innerText=this.prefixCSS(this.css,this.prefix),this.element.nativeElement.innerHTML="",this.element.nativeElement.appendChild(t)}},e.prototype.prefixCSS=function(e,t){if(!e)return"";if(!t)return e;var n=/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm;return e=e.replace(n,""),n=/([^]*?)({[^]*?}|,)/g,e.replace(n,t+" $1 $2")},r([Object(o.D)(),i("design:type",String)],e.prototype,"css",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"prefix",void 0),e=r([Object(o.m)({selector:"core-style",template:""}),i("design:paramtypes",[o.t])],e)}()},,function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),i._55(-1,null,["\n    "])),(e()(),i._31(2,0,null,null,2,"ion-badge",[["class","core-tag-list-tag"]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openTag(e.context.$implicit)&&o}return o},null,null)),i._30(3,16384,null,0,l.a,[a.a,i.t,i.V],null,null),(e()(),i._55(4,null,["",""])),(e()(),i._55(-1,null,["\n"]))],null,function(e,t){e(t,4,0,t.context.$implicit.rawname)})}function r(e){return i._57(0,[(e()(),i._26(16777216,null,null,1,null,o)),i._30(1,802816,null,0,s.j,[i._11,i._6,i.E],{ngForOf:[0,"ngForOf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.tags)},null)}n.d(t,"a",function(){return f}),t.b=r;var i=n(0),l=n(143),a=n(8),s=n(7),u=n(324),c=n(21),d=n(28),f=i._29({encapsulation:2,styles:[],data:{}});i._27("core-tag-list",u.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-tag-list",[],null,null,null,r,f)),i._30(1,49152,null,0,u.a,[c.a,[2,d.a]],null,null)],null,null)},{tags:"tags"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(1),l=n(116),a=n(53),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.sitesProvider=t,this.ROOT_CACHE_KEY="mmaMessageOutputAirnotifier:",this.logger=e.getInstance("AddonMessageOutputAirnotifier")}return e.prototype.enableDevice=function(e,t,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("message_airnotifier_enable_device",{deviceid:e,enable:t?1:0}).then(function(e){if(!e.success)return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0].message):Promise.reject(null)})})},e.prototype.getUserDevicesCacheKey=function(){return this.ROOT_CACHE_KEY+"userDevices"},e.prototype.getUserDevices=function(e){var t=this;return this.logger.debug("Get user devices"),this.sitesProvider.getSite(e).then(function(e){var n={appid:l.a.app_id},o={cacheKey:t.getUserDevicesCacheKey(),updateFrequency:a.a.FREQUENCY_RARELY};return e.read("message_airnotifier_get_user_devices",n,o).then(function(e){return e.devices})})},e.prototype.invalidateUserDevices=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(t.getUserDevicesCacheKey())})},e.prototype.isEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("message_airnotifier_enable_device")&&this.sitesProvider.wsAvailableInCurrentSite("message_airnotifier_get_user_devices")},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(3),l=n(9),a=n(1),s=n(4),u=n(13),c=n(38),d=n(178),f=n(50),p=n(384),h=n(198),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n,r,i,a,s,c,d,f,p){var h=this;this.cfDelegate=e,this.injector=n,this.courseHelper=r,this.domUtils=i,this.sitesProvider=s,this.content=c,this.modalCtrl=f,this.courseProvider=p,this.canLoadMore=!1,this.showSectionId=0,this.sectionSelectorExpanded=!1,this.data={},this.allSectionsId=u.a.ALL_SECTIONS_ID,this.stealthModulesSectionId=u.a.STEALTH_MODULES_SECTION_ID,this.selectOptions={},this.selectOptions.title=t.instant("core.course.sections"),this.completionChanged=new o.v,this.data.coreCourseFormatComponent=this,this.sectionStatusObserver=a.on(l.a.SECTION_STATUS_CHANGED,function(e){if(h.downloadEnabled&&h.sections&&h.sections.length&&h.course&&e.sectionId&&e.courseId==h.course.id){var t=h.courseHelper.getSectionDownloadId({id:e.sectionId});if(d.isBeingDownloaded(t))return;for(var n,o=0;o<h.sections.length;o++){var r=h.sections[o];if(r.id===e.sectionId){n=r;break}}if(!n)return;h.courseHelper.calculateSectionStatus(n,h.course.id,!1).then(function(){n.isDownloading&&!d.isBeingDownloaded(t)&&h.prefetch(n)})}},this.sitesProvider.getCurrentSiteId()),this.selectTabObserver=a.on(l.a.SELECT_COURSE_TAB,function(e){if(!e.name){var t=void 0;void 0!==e.sectionId&&null!=e.sectionId&&h.sections?t=h.sections.find(function(t){return t.id==e.sectionId}):void 0!==e.sectionNumber&&null!=e.sectionNumber&&h.sections&&(t=h.sections.find(function(t){return t.section==e.sectionNumber})),t&&h.sectionChanged(t)}})}return t=e,e.prototype.ngOnInit=function(){this.displaySectionSelector=this.cfDelegate.displaySectionSelector(this.course)},e.prototype.ngOnChanges=function(e){var t=this;if(this.setInputData(),e.course&&this.getComponents(),e.sections&&this.sections)if(this.selectedSection){var n=void 0;for(o=0;o<this.sections.length;o++){if(this.compareSections(r=this.sections[o],this.selectedSection)){n=r;break}}n?this.sectionChanged(n):this.cfDelegate.getCurrentSection(this.course,this.sections).then(function(e){t.sectionChanged(e)})}else{if(this.initialSectionId||this.initialSectionNumber)for(var o=0;o<this.sections.length;o++){var r;if((r=this.sections[o]).id&&r.id==this.initialSectionId||r.section&&r.section==this.initialSectionNumber){this.canViewSection(r)&&(this.loaded=!0,this.sectionChanged(r));break}}this.loaded||this.cfDelegate.getCurrentSection(this.course,this.sections).then(function(e){t.loaded=!0,t.sectionChanged(e)})}this.downloadEnabled&&(e.downloadEnabled||e.sections)&&this.calculateSectionsStatus(!1)},e.prototype.setInputData=function(){this.data.course=this.course,this.data.sections=this.sections,this.data.initialSectionId=this.initialSectionId,this.data.initialSectionNumber=this.initialSectionNumber,this.data.downloadEnabled=this.downloadEnabled,this.data.moduleId=this.moduleId,this.data.completionChanged=this.completionChanged},e.prototype.getComponents=function(){var e=this;this.course&&this.course.format!=this.lastCourseFormat&&(this.lastCourseFormat=this.course.format,this.cfDelegate.getCourseFormatComponent(this.injector,this.course).then(function(t){e.courseFormatComponent=t}),this.cfDelegate.getCourseSummaryComponent(this.injector,this.course).then(function(t){e.courseSummaryComponent=t}),this.cfDelegate.getSectionSelectorComponent(this.injector,this.course).then(function(t){e.sectionSelectorComponent=t}),this.cfDelegate.getSingleSectionComponent(this.injector,this.course).then(function(t){e.singleSectionComponent=t}),this.cfDelegate.getAllSectionsComponent(this.injector,this.course).then(function(t){e.allSectionsComponent=t}))},e.prototype.showSectionSelector=function(e){var t=this;if(!this.sectionSelectorExpanded){var n=this.modalCtrl.create("CoreCourseSectionSelectorPage",{course:this.course,sections:this.sections,selected:this.selectedSection});n.onDidDismiss(function(e){e&&t.sectionChanged(e),t.sectionSelectorExpanded=!1}),n.present({ev:e}),this.sectionSelectorExpanded=!0}},e.prototype.sectionChanged=function(e){var t=this,n=this.selectedSection;if(this.selectedSection=e,this.data.section=this.selectedSection,e.id!=this.allSectionsId){var o=this.sections.findIndex(function(e,n){return t.compareSections(e,t.selectedSection)}),r=void 0;for(r=o-1;r>=1&&!this.canViewSection(this.sections[r]);r--);for(this.previousSection=r>=1?this.sections[r]:null,r=o+1;r<this.sections.length&&!this.canViewSection(this.sections[r]);r++);this.nextSection=r<this.sections.length?this.sections[r]:null}else this.previousSection=null,this.nextSection=null,this.canLoadMore=!1,this.showSectionId=0,this.showMoreActivities(),this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,!1,!1);this.moduleId&&void 0===n?setTimeout(function(){t.domUtils.scrollToElementBySelector(t.content,"#core-course-module-"+t.moduleId)},200):this.domUtils.scrollToTop(this.content,0),n&&n.id==e.id||this.courseProvider.logView(this.course.id,e.section,void 0,this.course.fullname).catch(function(){})},e.prototype.compareSections=function(e,t){return e&&t?e.id===t.id:e===t},e.prototype.calculateSectionsStatus=function(e){this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,e).catch(function(){})},e.prototype.prefetch=function(e,t){var n=this;void 0===t&&(t=!1),e.isCalculating=!0,this.courseHelper.confirmDownloadSizeSection(this.course.id,e,this.sections).then(function(){n.prefetchSection(e,!0)},function(e){e&&n.domUtils.showErrorModal(e)}).finally(function(){e.isCalculating=!1})},e.prototype.prefetchSection=function(e,t){var n=this;this.courseHelper.prefetchSection(e,this.course.id,this.sections).catch(function(e){t&&n.domUtils.showErrorModalDefault(e,"core.course.errordownloadingsection",!0)})},e.prototype.doRefresh=function(e,t,n){var o=this,r=[];return this.dynamicComponents.forEach(function(o){r.push(Promise.resolve(o.callComponentFunction("doRefresh",[e,t,n])))}),r.push(this.courseBlocksComponent.invalidateBlocks().finally(function(){return o.courseBlocksComponent.loadContent()})),Promise.all(r)},e.prototype.showMoreActivities=function(e){this.canLoadMore=!1;var n,o=0;for(n=this.showSectionId+1;n<this.sections.length&&!(this.sections[n].hasContent&&this.sections[n].modules&&(o+=this.sections[n].modules.reduce(function(e,t){return 0!==t.visibleoncoursepage?e+1:e},0))>=t.LOAD_MORE_ACTIVITIES);n++);if(this.showSectionId=n,this.canLoadMore=n<this.sections.length,this.canLoadMore){var r=!1;for(n++;n<this.sections.length;n++)if(this.sections[n].hasContent&&this.sections[n].modules&&this.sections[n].modules.length>0){r=!0;break}this.canLoadMore=r}e&&e()},e.prototype.ngOnDestroy=function(){this.sectionStatusObserver&&this.sectionStatusObserver.off(),this.selectTabObserver&&this.selectTabObserver.off()},e.prototype.ionViewDidEnter=function(){this.dynamicComponents.forEach(function(e){e.callComponentFunction("ionViewDidEnter")}),this.downloadEnabled&&(this.selectedSection&&this.selectedSection.id!==u.a.ALL_SECTIONS_ID?this.courseHelper.calculateSectionStatus(this.selectedSection,this.course.id,!1,!1):this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,!1,!1))},e.prototype.ionViewDidLeave=function(){this.dynamicComponents.forEach(function(e){e.callComponentFunction("ionViewDidLeave")})},e.prototype.canViewSection=function(e){return!1!==e.uservisible&&!e.hiddenbynumsections&&e.id!=u.a.STEALTH_MODULES_SECTION_ID},e.prototype.onCompletionChange=function(e){if(e.hasOwnProperty("valueused")&&!e.valueused){var t=100/[].concat.apply([],this.sections.filter(function(e){return e.hasOwnProperty("modules")}).map(function(e){return e.modules})).map(function(e){return e.completion>0?1:e.completion}).reduce(function(e,t){return e+t});this.course.progress=e.state===u.a.COMPLETION_COMPLETE?Math.min(100,this.course.progress+t):Math.max(0,this.course.progress-t)}this.completionChanged.emit(e)},e.prototype.onModuleStatusChange=function(e){this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,!1,!1)},e.LOAD_MORE_ACTIVITIES=20,m([Object(o.D)(),_("design:type",Object)],e.prototype,"course",void 0),m([Object(o.D)(),_("design:type",Array)],e.prototype,"sections",void 0),m([Object(o.D)(),_("design:type",Boolean)],e.prototype,"downloadEnabled",void 0),m([Object(o.D)(),_("design:type",Number)],e.prototype,"initialSectionId",void 0),m([Object(o.D)(),_("design:type",Number)],e.prototype,"initialSectionNumber",void 0),m([Object(o.D)(),_("design:type",Number)],e.prototype,"moduleId",void 0),m([Object(o.O)(),_("design:type",o.v)],e.prototype,"completionChanged",void 0),m([Object(o._10)(h.a),_("design:type",o.T)],e.prototype,"dynamicComponents",void 0),m([Object(o._9)(p.a),_("design:type",p.a)],e.prototype,"courseBlocksComponent",void 0),e=t=m([Object(o.m)({selector:"core-course-format",templateUrl:"core-course-format.html"}),_("design:paramtypes",[d.a,i.c,o.C,c.a,s.a,l.a,a.a,r.f,f.a,r.q,u.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(5),i=n(10),l=n(13),a=n(268),s=n(221),u=n(398),c=n(163),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},m=function(e){function t(t,n,o,r,i,l,a,u){var c=e.call(this,t)||this;return c.bookProvider=n,c.courseProvider=o,c.appProvider=r,c.prefetchDelegate=i,c.modalCtrl=l,c.tagProvider=a,c.content=u,c.component=s.a.COMPONENT,c}return d(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.tagsEnabled=this.tagProvider.areTagsAvailableInSite(),this.loadContent()},t.prototype.showToc=function(e){var t=this,n=this.modalCtrl.create("AddonModBookTocPage",{moduleId:this.module.id,chapters:this.chapters,selected:this.currentChapter,courseId:this.courseId,book:this.book},{cssClass:"core-modal-lateral",showBackdrop:!0,enableBackdropDismiss:!0,enterAnimation:"core-modal-lateral-transition",leaveAnimation:"core-modal-lateral-transition"});n.onDidDismiss(function(e){e&&t.changeChapter(e)}),n.present({ev:e})},t.prototype.changeChapter=function(e){e&&e!=this.currentChapter&&(this.loaded=!1,this.refreshIcon="spinner",this.loadChapter(e,!0))},t.prototype.invalidateContent=function(){return this.bookProvider.invalidateContent(this.module.id,this.courseId)},t.prototype.fetchContent=function(e){var t,n=this,o=[],r=!1;return o.push(this.bookProvider.getBook(this.courseId,this.module.id).then(function(e){n.book=e,n.dataRetrieved.emit(e),n.description=e.intro}).catch(function(){})),o.push(this.prefetchDelegate.download(this.module,this.courseId).catch(function(e){if(r=!0,t=e,!n.module.contents.length)return n.courseProvider.loadModuleContents(n.module,n.courseId)})),Promise.all(o).then(function(){if(n.contentsMap=n.bookProvider.getContentsMap(n.module.contents),n.chapters=n.bookProvider.getTocList(n.module.contents),void 0===n.currentChapter&&void 0!==n.initialChapterId&&n.chapters){n.chapters.find(function(e){return e.id==n.initialChapterId})&&(n.currentChapter=n.initialChapterId)}return void 0===n.currentChapter&&(n.currentChapter=n.bookProvider.getFirstChapter(n.chapters)),n.loadChapter(n.currentChapter,e).then(function(){r&&n.appProvider.isOnline()&&n.showErrorDownloadingSomeFiles(t)}).catch(function(){})}).finally(function(){n.fillContextMenu(e)})},t.prototype.loadChapter=function(e,t){var n=this;return this.currentChapter=e,this.domUtils.scrollToTop(this.content),this.bookProvider.getChapterContent(this.contentsMap,e,this.module.id).then(function(o){n.chapterContent=o,n.previousChapter=n.bookProvider.getPreviousChapter(n.chapters,e),n.nextChapter=n.bookProvider.getNextChapter(n.chapters,e),n.bookProvider.logView(n.module.instance,t?e:void 0,n.module.name).then(function(){"0"==n.nextChapter&&n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})}).catch(function(e){return n.domUtils.showErrorModalDefault(e,"addon.mod_book.errorchapter",!0),Promise.reject(null)}).finally(function(){n.loaded=!0,n.refreshIcon="refresh"})},f([Object(o.D)(),p("design:type",String)],t.prototype,"initialChapterId",void 0),t=f([Object(o.m)({selector:"addon-mod-book-index",templateUrl:"addon-mod-book-index.html"}),h(7,Object(o.N)()),p("design:paramtypes",[o.C,s.a,l.a,i.a,u.a,r.q,c.a,r.f])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(158),l=n(24),a=n(279),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o,r){var i=e.call(this,t)||this;return i.chatProvider=n,i.timeUtils=o,i.navCtrl=r,i.component=a.a.COMPONENT,i.moduleName="chat",i.sessionsAvailable=!1,i}return s(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.loadContent().then(function(){t.chatProvider.logView(t.chat.id,t.chat.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})})},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.chatProvider.getChat(this.courseId,this.module.id).then(function(e){o.chat=e,o.description=e.intro;var t=o.timeUtils.timestamp(),n=e.chattime-t;return o.chatInfo=!!(e.chattime&&e.schedule>0&&n>0)&&{date:o.timeUtils.userDate(1e3*e.chattime),fromnow:o.timeUtils.formatTime(n)},o.dataRetrieved.emit(e),o.chatProvider.areSessionsAvailable().then(function(e){o.sessionsAvailable=e})}).finally(function(){o.fillContextMenu(e)})},t.prototype.enterChat=function(){this.navCtrl.push("AddonModChatChatPage",{chatId:this.chat.id,courseId:this.courseId,title:this.chat.name||this.moduleName,cmId:this.module.id})},t.prototype.viewSessions=function(){this.navCtrl.push("AddonModChatSessionsPage",{courseId:this.courseId,chatId:this.chat.id,cmId:this.module.id})},t=u([Object(o.m)({selector:"addon-mod-chat-index",templateUrl:"addon-mod-chat-index.html"}),c("design:paramtypes",[o.C,a.a,l.a,r.s])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(24),l=n(158),a=n(294),s=n(295),u=n(296),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},h=function(e){function t(t,n,o,r,i,l){var s=e.call(this,t,o)||this;return s.choiceProvider=n,s.choiceOffline=r,s.choiceSync=i,s.timeUtils=l,s.component=a.a.COMPONENT,s.moduleName="choice",s.options=[],s.choiceNotOpenYet=!1,s.choiceClosed=!1,s.canEdit=!1,s.canDelete=!1,s.canSeeResults=!1,s.data=[],s.labels=[],s.results=[],s.syncEventName=u.a.AUTO_SYNCED,s.hasAnsweredOnline=!1,s}return c(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){t.choice&&t.choiceProvider.logView(t.choice.id,t.choice.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(e){})})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.choiceProvider.invalidateChoiceData(this.courseId)),this.choice&&(e.push(this.choiceProvider.invalidateOptions(this.choice.id)),e.push(this.choiceProvider.invalidateResults(this.choice.id))),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return!(!this.choice||e.choiceId!=this.choice.id||e.userId!=this.userId)&&(this.domUtils.scrollToTop(this.content),!0)},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.now=(new Date).getTime(),this.choiceProvider.getChoice(this.courseId,this.module.id).then(function(e){if(o.choice=e,o.choice.timeopen=1e3*e.timeopen,o.choice.timeclose=1e3*e.timeclose,o.openTimeReadable=o.timeUtils.userDate(e.timeopen),o.closeTimeReadable=o.timeUtils.userDate(e.timeclose),o.description=e.intro,o.choiceNotOpenYet=e.timeopen&&e.timeopen>o.now,o.choiceClosed=e.timeclose&&e.timeclose<=o.now,o.dataRetrieved.emit(e),t)return o.syncActivity(n).then(function(e){if(e)return o.choiceProvider.getChoice(o.courseId,o.module.id).then(function(e){o.choice=e})})}).then(function(){return o.choiceOffline.hasResponse(o.choice.id)}).then(function(e){return o.hasOffline=e,o.fetchOptions(e).then(function(){return o.fetchResults()})}).finally(function(){o.fillContextMenu(e)})},t.prototype.fetchOptions=function(e){var t=this;return this.choiceProvider.getOptions(this.choice.id).then(function(n){t.hasAnsweredOnline=n.some(function(e){return e.checked}),(e?t.choiceOffline.getResponse(t.choice.id).then(function(e){var t={};return n.forEach(function(e){t[e.id]=e}),e.deleting?e.responses.length>0?e.responses.forEach(function(e){t[e]&&t[e].checked&&(t[e].checked=!1,t[e].countanswers--)}):Object.keys(t).forEach(function(e){t[e].checked&&(t[e].checked=!1,t[e].countanswers--)}):(Object.keys(t).forEach(function(e){t[e].checked&&(t[e].checked=!1,t[e].countanswers--)}),e.responses.forEach(function(e){t[e]&&(t[e].checked=!0,t[e].countanswers++)})),Object.keys(t).map(function(e){return t[e]})}):Promise.resolve(n)).then(function(e){var n=t.isChoiceOpen(),o=!1;if(t.selectedOption={id:-1},e.forEach(function(e){e.checked&&(o=!0,t.choice.allowmultiple||(t.selectedOption.id=e.id))}),t.canEdit=n&&(t.choice.allowupdate||!o),t.canDelete=n&&t.choice.allowupdate&&o,t.options=e,t.canEdit)switch(t.choice.showresults){case a.a.RESULTS_NOT:t.publishInfo="addon.mod_choice.publishinfonever";break;case a.a.RESULTS_AFTER_ANSWER:t.publishInfo=t.choice.publish==a.a.PUBLISH_ANONYMOUS?"addon.mod_choice.publishinfoanonafter":"addon.mod_choice.publishinfofullafter";break;case a.a.RESULTS_AFTER_CLOSE:t.publishInfo=t.choice.publish==a.a.PUBLISH_ANONYMOUS?"addon.mod_choice.publishinfoanonclose":"addon.mod_choice.publishinfofullclose";break;default:t.publishInfo=""}})})},t.prototype.fetchResults=function(){var e=this;return this.choiceNotOpenYet?(this.canSeeResults=!1,Promise.resolve()):this.choiceProvider.getResults(this.choice.id).then(function(t){var n=!1;e.data=[],e.labels=[],t.forEach(function(t){t.numberofuser>0&&(n=!0),t.percentageamountfixed=t.percentageamount.toFixed(1),e.data.push(t.numberofuser),e.labels.push(t.text)}),e.canSeeResults=n||e.choiceProvider.canStudentSeeResults(e.choice,e.hasAnsweredOnline),e.results=t})},t.prototype.isChoiceOpen=function(){return(0===this.choice.timeopen||this.choice.timeopen<=this.now)&&(0===this.choice.timeclose||this.choice.timeclose>this.now)},t.prototype.canSave=function(){return this.choice.allowmultiple?this.options.some(function(e){return e.checked}):-1!==this.selectedOption.id},t.prototype.save=function(){var e=this;(this.choice.allowupdate?Promise.resolve():this.domUtils.showConfirm(this.translate.instant("core.areyousure"))).then(function(){var t=[];e.choice.allowmultiple?e.options.forEach(function(e){e.checked&&t.push(e.id)}):t.push(e.selectedOption.id);var n=e.domUtils.showModalLoading("core.sending",!0);e.choiceProvider.submitResponse(e.choice.id,e.choice.name,e.courseId,t).then(function(t){return e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata),e.domUtils.scrollToTop(e.content),e.dataUpdated(t)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.mod_choice.cannotsubmit",!0)}).finally(function(){n.dismiss()})})},t.prototype.delete=function(){var e=this;this.domUtils.showDeleteConfirm().then(function(){var t=e.domUtils.showModalLoading("core.sending",!0);e.choiceProvider.deleteResponses(e.choice.id,e.choice.name,e.courseId).then(function(){return e.domUtils.scrollToTop(e.content),e.refreshContent(!1)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.mod_choice.cannotsubmit",!0)}).finally(function(){t.dismiss()})}).catch(function(){})},t.prototype.dataUpdated=function(e){var t=this;return e&&this.isPrefetched()?this.choiceSync.prefetchAfterUpdate(this.module,this.courseId).then(function(){t.showLoadingAndFetch(!1,!1)}).catch(function(){return t.refreshContent(!1)}):this.refreshContent(!1)},t.prototype.sync=function(){return this.choiceSync.syncChoice(this.choice.id,this.userId)},t.prototype.hasSyncSucceed=function(e){return e.updated},t=d([Object(o.m)({selector:"addon-mod-choice-index",templateUrl:"addon-mod-choice-index.html"}),p(2,Object(o.N)()),f("design:paramtypes",[o.C,a.a,r.f,s.a,u.a,i.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(5),i=n(24),l=n(2),a=n(71),s=n(158),u=n(153),c=n(231),d=n(236),f=n(97),p=n(217),h=n(328),m=n(476),_=n(399),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},P=function(e){function t(t,n,o,r,i,l,a,s,u,p){var _=e.call(this,t,n)||this;return _.dataProvider=o,_.dataHelper=r,_.prefetchHandler=i,_.timeUtils=l,_.groupsProvider=a,_.modalCtrl=s,_.utils=u,_.navCtrl=p,_.component=f.a.COMPONENT,_.moduleName="data",_.access={},_.data={},_.isEmpty=!0,_.entries=[],_.firstEntry=!1,_.canAdd=!1,_.canSearch=!1,_.search={sortBy:"0",sortDirection:"DESC",page:0,text:"",searching:!1,searchingAdvanced:!1,advanced:[]},_.hasNextPage=!1,_.entriesRendered="",_.extraImports=[m.a],_.syncEventName=h.a.AUTO_SYNCED,_.hasComments=!1,_.entryChangedObserver=_.eventsProvider.on(f.a.ENTRY_CHANGED,function(e){if(_.data.id==e.dataId)return _.loaded=!1,_.loadContent(!0)},_.siteId),_.ratingOfflineObserver=_.eventsProvider.on(c.a.RATING_SAVED_EVENT,function(e){_.data&&"mod_data"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==_.data.coursemodule&&(_.hasOfflineRatings=!0)}),_.ratingSyncObserver=_.eventsProvider.on(d.a.SYNCED_EVENT,function(e){_.data&&"mod_data"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==_.data.coursemodule&&(_.hasOfflineRatings=!1)}),_}return g(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.selectedGroup=this.group||0,this.loadContent(!1,!0).then(function(){return t.logView(!0)})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.dataProvider.invalidateDatabaseData(this.courseId)),this.data&&(e.push(this.dataProvider.invalidateDatabaseAccessInformationData(this.data.id)),e.push(this.groupsProvider.invalidateActivityGroupInfo(this.data.coursemodule)),e.push(this.dataProvider.invalidateEntriesData(this.data.id)),e.push(this.dataProvider.invalidateFieldsData(this.data.id)),this.hasComments&&this.eventsProvider.trigger(u.a.REFRESH_COMMENTS_EVENT,{contextLevel:"module",instanceId:this.data.coursemodule},this.sitesProvider.getCurrentSiteId())),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return!(!this.data||e.dataId!=this.data.id||void 0!==e.entryId)&&(this.loaded=!1,this.domUtils.scrollToTop(this.content),!0)},t.prototype.fetchContent=function(e,t,n){var o=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var r=!1,i=!1;return this.dataProvider.getDatabase(this.courseId,this.module.id).then(function(e){if(o.data=e,o.hasComments=e.comments,o.description=e.intro||e.description,o.dataRetrieved.emit(e),t)return o.syncActivity(n).catch(function(){})}).then(function(){return o.dataProvider.getDatabaseAccessInformation(o.data.id)}).then(function(e){if(o.access=e,!e.timeavailable){var t=o.timeUtils.timestamp();return o.timeAvailableFrom=!!(o.data.timeavailablefrom&&t<o.data.timeavailablefrom)&&1e3*parseInt(o.data.timeavailablefrom,10),o.timeAvailableFromReadable=!!o.timeAvailableFrom&&o.timeUtils.userDate(o.timeAvailableFrom),o.timeAvailableTo=!!(o.data.timeavailableto&&t>o.data.timeavailableto)&&1e3*parseInt(o.data.timeavailableto,10),o.timeAvailableToReadable=!!o.timeAvailableTo&&o.timeUtils.userDate(o.timeAvailableTo),o.isEmpty=!0,void(o.groupInfo=null)}return i=!0,r=e.canaddentry,o.groupsProvider.getActivityGroupInfo(o.data.coursemodule).then(function(e){o.groupInfo=e,o.selectedGroup=o.groupsProvider.validateGroupId(o.selectedGroup,e)})}).then(function(){return o.dataProvider.getFields(o.data.id).then(function(e){return 0==e.length&&(i=!1,r=!1),o.search.advanced=[],o.fields=o.utils.arrayToObject(e,"id"),o.fieldsArray=o.utils.objectToArray(o.fields),o.fetchEntriesData()})}).finally(function(){o.canAdd=r,o.canSearch=i,o.fillContextMenu(e)})},t.prototype.fetchEntriesData=function(){var e=this;return this.dataProvider.getDatabaseAccessInformation(this.data.id,this.selectedGroup).then(function(t){e.access.canaddentry=t.canaddentry;return e.dataHelper.fetchEntries(e.data,e.fieldsArray,e.selectedGroup,e.search.searching&&!e.search.searchingAdvanced?e.search.text:void 0,e.search.searching&&e.search.searchingAdvanced?e.search.advanced:void 0,e.search.sortBy,e.search.sortDirection,e.search.page)}).then(function(t){var n=t.entries.length,o=t.offlineEntries.length;if(e.isEmpty=!n&&!t.offlineEntries.length,e.hasNextPage=n>=f.a.PER_PAGE&&(e.search.page+1)*f.a.PER_PAGE<t.totalcount,e.hasOffline=t.hasOfflineActions,e.hasOfflineRatings=t.hasOfflineRatings,e.entriesRendered="",e.foundRecordsData=void 0!==t.maxcount?{num:t.totalcount,max:t.maxcount,reseturl:"#"}:void 0,e.isEmpty)e.search.searching||(e.canSearch=!1);else{e.entries=t.offlineEntries.concat(t.entries);var r=e.dataHelper.getTemplate(e.data,"listtemplateheader",e.fieldsArray);e.search.searching&&e.firstEntry||(e.firstEntry=e.entries[0].id);var i=e.dataHelper.getTemplate(e.data,"listtemplate",e.fieldsArray),l={};e.entries.forEach(function(t,n){l[t.id]=t;var a=e.dataHelper.getActions(e.data,e.access,t);r+=e.dataHelper.displayShowFields(i,e.fieldsArray,t,e.search.searching?void 0:e.search.page*f.a.PER_PAGE+n-o,"list",a)}),r+=e.dataHelper.getTemplate(e.data,"listtemplatefooter",e.fieldsArray),e.entriesRendered=e.domUtils.fixHtml(r),e.jsData={fields:e.fields,entries:l,data:e.data,module:e.module,group:e.selectedGroup,gotoEntry:e.gotoEntry.bind(e)}}e.firstEntry=!1})},t.prototype.showSearch=function(){var e=this,t=this.modalCtrl.create("AddonModDataSearchPage",{search:this.search,fields:this.fields,data:this.data});t.onDidDismiss(function(t){t&&(e.search=t,e.searchEntries(0))}),t.present()},t.prototype.searchEntries=function(e){var t=this;return this.loaded=!1,this.search.page=e,this.fetchEntriesData().then(function(){return t.logView()}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){t.loaded=!0})},t.prototype.searchReset=function(){this.search.sortBy="0",this.search.sortDirection="DESC",this.search.text="",this.search.advanced=[],this.search.searchingAdvanced=!1,this.search.searching=!1,this.searchEntries(0)},t.prototype.setGroup=function(e){var t=this;return this.selectedGroup=e,this.search.page=0,this.fetchEntriesData().then(function(){return t.logView()}).catch(function(e){return t.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})},t.prototype.gotoAddEntries=function(){this.navCtrl.push("AddonModDataEditPage",{module:this.module,courseId:this.courseId,group:this.selectedGroup})},t.prototype.gotoEntry=function(e){var t={module:this.module,courseId:this.courseId,entryId:e,group:this.selectedGroup,offset:null},n=this.entries.findIndex(function(t){return t.id==e});n>=0&&(t.offset=this.search.page*f.a.PER_PAGE+n),this.navCtrl.push("AddonModDataEntryPage",t)},t.prototype.sync=function(){return this.prefetchHandler.sync(this.module,this.courseId)},t.prototype.hasSyncSucceed=function(e){return e.updated},t.prototype.logView=function(e){var t=this;return this.data&&this.data.id?this.dataProvider.logView(this.data.id,this.data.name).then(function(){e&&t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){}):Promise.resolve()},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.entryChangedObserver&&this.entryChangedObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},t=v([Object(o.m)({selector:"addon-mod-data-index",templateUrl:"addon-mod-data-index.html"}),b(1,Object(o.N)()),y("design:paramtypes",[o.C,r.f,f.a,p.a,_.a,i.a,a.a,r.q,l.a,r.s])],t)}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(168),l=n(4),a=n(184),s=n(28),u=n(10),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},p=function(){function e(e,t,n,o,r,i,l){this.gradesProvider=e,this.domUtils=t,this.gradesHelper=o,this.navCtrl=r,this.appProvider=i,this.svComponent=l,this.gradesLoaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.fetchData().then(function(){return e.gradeId&&e.gotoGrade(e.gradeId),e.gradesProvider.logCourseGradesView(e.courseId,e.userId).catch(function(){})}).finally(function(){e.gradesLoaded=!0})},e.prototype.fetchData=function(e){var t=this;return void 0===e&&(e=!1),this.gradesProvider.getCourseGradesTable(this.courseId,this.userId).then(function(e){t.gradesTable=t.gradesHelper.formatGradesTable(e)}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error loading grades")})},e.prototype.refreshGrades=function(e){var t=this;this.gradesProvider.invalidateCourseGradesData(this.courseId,this.userId).finally(function(){t.fetchData().finally(function(){e.complete()})})},e.prototype.gotoGrade=function(e){if(e){this.gradeId=e;var t=void 0,n=void 0;this.svComponent?"CoreGradesCourseSplitPage"==this.svComponent.getMasterNav().getActive().component.name?(t=this.svComponent,n="CoreGradesGradePage"):(t=this.svComponent.getMasterNav(),n="CoreGradesCourseSplitPage"):this.appProvider.isWide()?(t=this.navCtrl,n="CoreGradesCourseSplitPage"):(t=this.navCtrl,n="CoreGradesGradePage"),t.push(n,{courseId:this.courseId,userId:this.userId,gradeId:e})}},c([Object(o._9)(r.f),d("design:type",r.f)],e.prototype,"content",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"courseId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"userId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"gradeId",void 0),e=c([Object(o.m)({selector:"core-grades-course",templateUrl:"core-grades-course.html"}),f(4,Object(o.N)()),f(6,Object(o.N)()),d("design:paramtypes",[i.a,l.a,r.t,a.a,r.s,u.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(3),l=n(10),a=n(57),s=n(6),u=n(154),c=n(1),d=n(4),f=n(2),p=n(488),h=n(72),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d){this.alertCtrl=t,this.translate=n,this.utils=o,this.sitesProvider=r,this.modalCtrl=i,this.fileUploaderProvider=l,this.initDelegate=a,this.sharedFilesProvider=s,this.domUtils=u,this.fileProvider=c,this.appProvider=d,this.logger=e.getInstance("CoreSharedFilesHelperProvider")}return e.prototype.askRenameReplace=function(e,t){var n=this.utils.promiseDefer();return this.alertCtrl.create({title:this.translate.instant("core.sharedfiles.sharedfiles"),message:this.translate.instant("core.sharedfiles.chooseactionrepeatedfile",{$a:t}),buttons:[{text:this.translate.instant("core.sharedfiles.rename"),handler:function(){n.resolve(t)}},{text:this.translate.instant("core.sharedfiles.replace"),handler:function(){n.resolve(e)}}]}).present(),n.promise},e.prototype.goToChooseSite=function(e,t){this.appProvider.getRootNavController().push("CoreSharedFilesChooseSitePage",{filePath:e,isInbox:t})},e.prototype.isChoosingSite=function(){var e=this.appProvider.getRootNavController();return e&&"CoreSharedFilesChooseSitePage"==e.getActive().id},e.prototype.pickSharedFile=function(e){var t=this;return new Promise(function(n,o){var r=t.modalCtrl.create("CoreSharedFilesListPage",{mimetypes:e,isModal:!0,pick:!0});r.present(),r.onDidDismiss(function(r){if(r){var i=t.fileUploaderProvider.isInvalidMimetype(e,r.fullPath);i?o(i):n({path:r.fullPath,treated:!1})}else o()})})},e.prototype.removeSharedFile=function(e,t){return t?this.sharedFilesProvider.deleteInboxFile(e):this.fileProvider.removeFileByFileEntry(e)},e.prototype.searchIOSNewSharedFiles=function(e){var t=this;return this.initDelegate.ready().then(function(){if(t.isChoosingSite())return Promise.reject(null);return(e?t.fileProvider.getExternalFile(e):t.sharedFilesProvider.checkIOSNewFiles()).then(function(n){return t.sitesProvider.getSitesIds().then(function(o){return o.length?1==o.length?t.storeSharedFileInSite(n,o[0],!e):void(t.isChoosingSite()||t.goToChooseSite(n.toURL(),!e)):(t.domUtils.showErrorModal("core.sharedfiles.errorreceivefilenosites",!0),t.removeSharedFile(n,!e))})}).catch(function(n){n&&t.logger.error("Error searching iOS new shared files",n,e)})})},e.prototype.storeSharedFileInSite=function(e,t,n){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.sharedFilesProvider.getSiteSharedFilesDirPath(t);return this.fileProvider.getUniqueNameInFolder(r,e.name).then(function(t){return t.toLowerCase()==e.name.toLowerCase()?t:o.askRenameReplace(e.name,t)}).then(function(r){return o.sharedFilesProvider.storeFileInSite(e,r,t).catch(function(e){o.domUtils.showErrorModal(e||"Error moving file.")}).finally(function(){o.removeSharedFile(e,n),o.domUtils.showAlertTranslated("core.success","core.sharedfiles.successstorefile")})})},e=m([Object(o.A)(),_("design:paramtypes",[s.a,r.b,i.c,f.a,c.a,r.q,h.a,u.a,p.a,d.a,a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(6),i=n(1),l=n(148),a=n(10),s=n(380),u=n(161),c=n(46),d=n(9),f=n(11),p=n(24),h=n(2),m=n(3),_=n(81),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f){var p=e.call(this,"AddonMessagesSync",t,n,o,i,l,r,f)||this;return p.messagesOffline=a,p.eventsProvider=s,p.messagesProvider=u,p.userProvider=c,p.utils=d,p}return g(t,e),n=t,t.prototype.getSyncId=function(e,t){return e?"conversationid:"+e:"userid:"+t},t.prototype.syncAllDiscussions=function(e,t){void 0===t&&(t=!1);return this.syncOnSites("all discussions"+(t?" (Only offline)":""),this.syncAllDiscussionsFunc.bind(this),[t],e)},t.prototype.syncAllDiscussionsFunc=function(e,t){var o=this;void 0===t&&(t=!1);return(t?this.messagesOffline.getAllDeviceOfflineMessages(e):this.messagesOffline.getAllMessages(e)).then(function(t){var r=[],i=[],l=[];return t.forEach(function(e){e.conversationid?-1==i.indexOf(e.conversationid)&&i.push(e.conversationid):-1==r.indexOf(e.touserid)&&r.push(e.touserid)}),i.forEach(function(t){l.push(o.syncDiscussion(t,void 0,e).then(function(r){void 0!==r&&o.eventsProvider.trigger(n.AUTO_SYNCED,{conversationId:t,warnings:r},e)}))}),r.forEach(function(t){l.push(o.syncDiscussion(void 0,t,e).then(function(r){void 0!==r&&o.eventsProvider.trigger(n.AUTO_SYNCED,{userId:t,warnings:r},e)}))}),Promise.all(l)})},t.prototype.syncDiscussion=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getSyncId(e,t),i=this.messagesProvider.isGroupMessagingEnabled();if(this.isSyncing(r,n))return this.getOngoingSync(r,n);var l=[];this.logger.debug(e?"Try to sync conversation '"+e+"'":"Try to sync discussion with user '"+t+"'");var a;return a=e?this.messagesOffline.getConversationMessages(e,n):this.messagesOffline.getMessages(t,n),a=a.then(function(r){if(!r.length)return[];if(!o.appProvider.isOnline())return o.messagesOffline.setMessagesDeviceOffline(r,!0),Promise.reject(null);var l=Promise.resolve(),a=[];return(r=o.messagesProvider.sortMessages(r)).forEach(function(s,u){l=l.then(function(){return(e?o.messagesProvider.sendMessageToConversationOnline(e,s.text,n):o.messagesProvider.sendMessageOnline(t,s.smallmessage,n)).catch(function(e){if(!o.utils.isWebServiceError(e))return o.appProvider.isOnline()&&o.messagesOffline.setMessagesDeviceOffline(r,!1),Promise.reject(e);-1==a.indexOf(e)&&a.push(e)}).then(function(){return e?o.messagesOffline.deleteConversationMessage(e,s.text,s.timecreated,n):o.messagesOffline.deleteMessage(t,s.smallmessage,s.timecreated,n)}).then(function(){if(!i&&u<r.length-1)return new Promise(function(e,t){setTimeout(e,1e3)})})})}),l}).then(function(n){return o.handleSyncErrors(e,t,n,l)}).then(function(){return l}),this.addOngoingSync(r,a,n)},t.prototype.handleSyncErrors=function(e,t,n,o){var r=this;if(n&&n.length)return e?this.messagesProvider.getConversation(e,!1,!1).catch(function(){return{}}).then(function(t){n.forEach(function(n){o.push(r.translate.instant("addon.messages.warningconversationmessagenotsent",{conversation:t.name?t.name:e,error:r.textUtils.getErrorMessageFromError(n)}))})}):this.userProvider.getProfile(t,void 0,!0).catch(function(){return{}}).then(function(e){n.forEach(function(n){o.push(r.translate.instant("addon.messages.warningmessagenotsent",{user:e.fullname?e.fullname:t,error:r.textUtils.getErrorMessageFromError(n)}))})})},t.prototype.waitForSyncConversation=function(e,t,n){var o=this.getSyncId(e,t);return this.waitForSync(o,n)},t.AUTO_SYNCED="addon_messages_autom_synced",t=n=v([Object(o.A)(),y("design:paramtypes",[r.a,i.a,a.a,m.c,_.a,f.a,s.a,d.a,u.a,c.a,h.a,p.a])],t);var n}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(71),l=n(24),a=n(158),s=n(134),u=n(252),c=n(297),d=n(285),f=n(200),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},g=function(e){function t(t,n,o,r,i,l,a,u,c){var f=e.call(this,t,o)||this;return f.feedbackProvider=n,f.feedbackOffline=r,f.groupsProvider=i,f.feedbackSync=l,f.navCtrl=a,f.feedbackHelper=u,f.timeUtils=c,f.tab="overview",f.group=0,f.component=s.a.COMPONENT,f.moduleName="feedback",f.access={canviewreports:!1,canviewanalysis:!1,isempty:!0},f.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},f.overview={timeopen:0,openTimeReadable:"",timeclose:0,closeTimeReadable:""},f.warning="",f.tabsLoaded={overview:!1,analysis:!1},f.showTabs=!1,f.tabsReady=!1,f.syncEventName=d.a.AUTO_SYNCED,f.submitObserver=f.eventsProvider.on(s.a.FORM_SUBMITTED,function(e){if(f.feedback&&e.feedbackId==f.feedback.id){f.tabsLoaded.analysis=!1,f.tabsLoaded.overview=!1,f.loaded=!1;(!e.offline&&f.isPrefetched()?f.feedbackSync.prefetchAfterUpdate(f.module,f.courseId).catch(function(){}):Promise.resolve()).then(function(){e.tab!=f.tab?f.tabChanged(e.tab):f.loadContent(!0)})}},f.siteId),f}return p(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){t.feedback&&t.feedbackProvider.logView(t.feedback.id,t.feedback.name).catch(function(){})}).finally(function(){t.tabsReady=!0})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.feedbackProvider.invalidateFeedbackData(this.courseId)),this.feedback&&(e.push(this.feedbackProvider.invalidateFeedbackAccessInformationData(this.feedback.id)),e.push(this.feedbackProvider.invalidateAnalysisData(this.feedback.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.feedback.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.feedback.coursemodule)),e.push(this.feedbackProvider.invalidateResumePageData(this.feedback.id))),this.tabsLoaded.analysis=!1,this.tabsLoaded.overview=!1,Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return!(!this.feedback||e.feedbackId!=this.feedback.id)&&(this.domUtils.scrollToTop(this.content),!0)},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.feedbackProvider.getFeedback(this.courseId,this.module.id).then(function(e){if(o.feedback=e,o.description=e.intro||e.description,o.dataRetrieved.emit(e),t)return o.syncActivity(n)}).then(function(){return o.feedbackProvider.getFeedbackAccessInformation(o.feedback.id)}).then(function(e){return o.access=e,o.showTabs=(e.canviewreports||e.canviewanalysis)&&!e.isempty,o.firstSelectedTab=0,"analysis"==o.tab?(o.firstSelectedTab=1,o.fetchFeedbackAnalysisData(o.access)):o.fetchFeedbackOverviewData(o.access)}).finally(function(){if(o.fillContextMenu(e),o.feedback)return o.feedbackOffline.hasFeedbackOfflineData(o.feedback.id).then(function(e){o.hasOffline=e})})},t.prototype.fetchFeedbackOverviewData=function(e){var t=this,n=[];return e.cancomplete&&e.cansubmit&&e.isopen&&n.push(this.feedbackProvider.getResumePage(this.feedback.id).then(function(e){t.goPage=e>0&&e})),e.canedititems&&(this.overview.timeopen=1e3*parseInt(this.feedback.timeopen)||0,this.overview.openTimeReadable=this.overview.timeopen?this.timeUtils.userDate(this.overview.timeopen):"",this.overview.timeclose=1e3*parseInt(this.feedback.timeclose)||0,this.overview.closeTimeReadable=this.overview.timeclose?this.timeUtils.userDate(this.overview.timeclose):""),e.canviewanalysis&&n.push(this.fetchGroupInfo(this.feedback.coursemodule)),Promise.all(n).finally(function(){t.tabsLoaded.overview=!0})},t.prototype.fetchFeedbackAnalysisData=function(e){var t,n=this;return e.canviewanalysis?t=this.fetchGroupInfo(this.feedback.coursemodule):(this.tabChanged("overview"),t=Promise.resolve()),t.finally(function(){n.tabsLoaded.analysis=!0})},t.prototype.fetchGroupInfo=function(e){var t=this;return this.groupsProvider.getActivityGroupInfo(e).then(function(e){return t.groupInfo=e,t.setGroup(t.groupsProvider.validateGroupId(t.group,e))})},t.prototype.parseAnalysisInfo=function(e){var t=this;switch(e.typ){case"numeric":e.average=e.data.reduce(function(e,t){return e+parseInt(t,10)},0)/e.data.length,e.template="numeric";break;case"info":e.data=e.data.map(function(e){return void 0!==(e=t.textUtils.parseJSON(e)).show&&e.show}).filter(function(e){return e});case"textfield":case"textarea":e.template="list";break;case"multichoicerated":case"multichoice":e.data=e.data.map(function(e){return void 0!==(e=t.textUtils.parseJSON(e)).answertext&&e}).filter(function(e){return e}),e.labels=e.data.map(function(e){e.quotient=(100*e.quotient).toFixed(2);var t="";return void 0!==e.value&&(t="("+e.value+") "),t+=e.answertext,t+=e.quotient>0?" ("+e.quotient+"%)":""}),e.chartData=e.data.map(function(e){return e.answercount}),"multichoicerated"==e.typ&&(e.average=e.data.reduce(function(e,t){return e+parseFloat(t.avg)},0));var n=e.presentation.charAt(0);e.chartType="c"!=n?"doughnut":"bar",e.template="chart"}return e},t.prototype.gotoAnswerQuestions=function(e){void 0===e&&(e=!1);this.navCtrl.push("AddonModFeedbackFormPage",{module:this.module,moduleId:this.module.id,courseId:this.courseId,preview:e})},t.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},t.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},t.prototype.openFeature=function(e){this.feedbackHelper.openFeature(e,this.navCtrl,this.module,this.courseId,this.group)},t.prototype.tabChanged=function(e){this.tab=e,this.tabsLoaded[this.tab]||this.loadContent(!1,!1,!0)},t.prototype.setGroup=function(e){var t=this;return this.group=e,this.feedbackProvider.getAnalysis(this.feedback.id,e).then(function(e){if(t.feedback.completedCount=e.completedcount,t.feedback.itemsCount=e.itemscount,"analysis"==t.tab){var n=1;if(t.items=e.itemsdata.map(function(e){return e.item.data=e.data,e=e.item,e.number=n++,!(!e.data||!e.data.length)&&t.parseAnalysisInfo(e)}).filter(function(e){return e}),t.warning="",e.warnings.length){var o=e.warnings.find(function(e){return"insufficientresponsesforthisgroup"==e.warningcode});t.warning=o&&o.message}}})},t.prototype.sync=function(){return this.feedbackSync.syncFeedback(this.feedback.id)},t.prototype.hasSyncSucceed=function(e){return e.updated},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.submitObserver&&this.submitObserver.off()},h([Object(o._9)(f.a),m("design:type",f.a)],t.prototype,"tabsComponent",void 0),h([Object(o.D)(),m("design:type",Object)],t.prototype,"tab",void 0),h([Object(o.D)(),m("design:type",Object)],t.prototype,"group",void 0),t=h([Object(o.m)({selector:"addon-mod-feedback-index",templateUrl:"addon-mod-feedback-index.html"}),_(2,Object(o.N)()),m("design:paramtypes",[o.C,s.a,r.f,c.a,i.a,d.a,r.s,u.a,l.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(10),i=n(13),l=n(268),a=n(329),s=n(401),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r,i){var l=e.call(this,t)||this;return l.folderProvider=n,l.courseProvider=o,l.appProvider=r,l.folderHelper=i,l.component=a.a.COMPONENT,l}return u(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.canGetFolder=this.folderProvider.isGetFolderWSAvailable(),this.path?(this.showModuleData(this.module,this.module.contents),this.loaded=!0,this.refreshIcon="refresh"):this.loadContent().then(function(){t.folderProvider.logView(t.module.instance,t.module.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})}).finally(function(){t.loaded=!0,t.refreshIcon="refresh"})},t.prototype.invalidateContent=function(){return this.folderProvider.invalidateContent(this.module.id,this.courseId)},t.prototype.showModuleData=function(e,t){this.description=e.intro||e.description,this.dataRetrieved.emit(e),this.contents=this.path?t:this.folderHelper.formatContents(t)},t.prototype.fetchContent=function(e){var t=this,n=this.module.contents;return(this.canGetFolder?this.folderProvider.getFolder(this.courseId,this.module.id).then(function(o){return t.courseProvider.loadModuleContents(t.module,t.courseId,void 0,!1,e).then(function(){return n=t.module.contents,o})}):this.courseProvider.getModule(this.module.id,this.courseId).then(function(e){return e.contents.length||!t.module.contents.length||t.appProvider.isOnline()||(e.contents=t.module.contents),t.module=e,n=e.contents,e})).then(function(e){t.showModuleData(e,n)}).finally(function(){t.fillContextMenu(e)})},c([Object(o.D)(),d("design:type",String)],t.prototype,"path",void 0),t=c([Object(o.m)({selector:"addon-mod-folder-index",templateUrl:"addon-mod-folder-index.html"}),d("design:paramtypes",[o.C,a.a,i.a,r.a,s.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(5),i=n(28),l=n(158),a=n(50),s=n(46),u=n(71),c=n(231),d=n(201),f=n(236),p=n(135),h=n(280),m=n(233),_=n(254),g=n(402),v=n(650),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,h){var m=e.call(this,t)||this;return m.content=n,m.modalCtrl=o,m.groupsProvider=r,m.userProvider=i,m.forumProvider=l,m.forumHelper=a,m.forumOffline=s,m.forumSync=u,m.prefetchDelegate=c,m.prefetchHandler=d,m.ratingOffline=f,m.popoverCtrl=h,m.component=p.a.COMPONENT,m.moduleName="forum",m.canLoadMore=!1,m.loadMoreError=!1,m.discussions=[],m.offlineDiscussions=[],m.selectedDiscussion=0,m.canAddDiscussion=!1,m.addDiscussionText=m.translate.instant("addon.mod_forum.addanewdiscussion"),m.sortOrders=[],m.selectedSortOrder=null,m.sortOrderSelectorExpanded=!1,m.syncEventName=_.a.AUTO_SYNCED,m.page=0,m.trackPosts=!1,m.usesGroups=!1,m.canPin=!1,m.sortingAvailable=m.forumProvider.isDiscussionListSortingAvailable(),m.sortOrders=m.forumProvider.getAvailableSortOrders(),m}return y(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.syncManualObserver=this.eventsProvider.on(_.a.MANUAL_SYNCED,function(e){t.autoSyncEventReceived(e)},this.siteId),this.newDiscObserver=this.eventsProvider.on(p.a.NEW_DISCUSSION_EVENT,this.eventReceived.bind(this,!0)),this.replyObserver=this.eventsProvider.on(p.a.REPLY_DISCUSSION_EVENT,this.eventReceived.bind(this,!1)),this.changeDiscObserver=this.eventsProvider.on(p.a.CHANGE_DISCUSSION_EVENT,function(e){(t.forum&&t.forum.id===e.forumId||e.cmId===t.module.id)&&t.forumProvider.invalidateDiscussionsList(t.forum.id).finally(function(){if(e.discussionId){var n=t.discussions.find(function(t){return e.discussionId==t.discussion});n&&(void 0!==e.locked&&(n.locked=e.locked),void 0!==e.pinned&&(n.pinned=e.pinned),void 0!==e.starred&&(n.starred=e.starred),t.showLoadingAndRefresh(!1))}void 0!==e.deleted&&e.deleted&&(0==e.post.parent&&t.splitviewCtrl&&t.splitviewCtrl.isOn()&&t.splitviewCtrl.emptyDetails(),t.showLoadingAndRefresh(!1))})}),this.viewDiscObserver=this.eventsProvider.on(p.a.VIEW_DISCUSSION_EVENT,function(e){if(t.forum&&t.forum.id==e.forumId){t.selectedDiscussion=t.splitviewCtrl.isOn()?e.discussion:0;var n=t.discussions.find(function(t){return t.discussion==e.discussion});n&&n.numunread>0&&t.forumProvider.invalidateDiscussionsList(t.forum.id)}},this.sitesProvider.getCurrentSiteId()),this.ratingOfflineObserver=this.eventsProvider.on(c.a.RATING_SAVED_EVENT,function(e){t.forum&&"mod_forum"==e.component&&"post"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==t.forum.cmid&&(t.hasOfflineRatings=!0)}),this.ratingSyncObserver=this.eventsProvider.on(f.a.SYNCED_EVENT,function(e){t.forum&&"mod_forum"==e.component&&"post"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==t.forum.cmid&&t.ratingOffline.hasRatings("mod_forum","post","module",t.forum.cmid).then(function(e){t.hasOfflineRatings=e})}),this.loadContent(!1,!0).then(function(){t.forum&&(t.splitviewCtrl.isOn()&&(t.offlineDiscussions.length>0?t.openNewDiscussion(t.offlineDiscussions[0].timecreated):t.discussions.length>0&&t.openDiscussion(t.discussions[0])),t.forumProvider.logView(t.forum.id,t.forum.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(e){}))})},t.prototype.fetchContent=function(e,t,n){var o=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.loadMoreError=!1;var r=[];return r.push(this.forumProvider.getForum(this.courseId,this.module.id).then(function(e){switch(o.forum=e,o.description=e.intro||o.description,o.descriptionNote=o.translate.instant("addon.mod_forum.numdiscussions",{numdiscussions:e.numdiscussions}),void 0!==e.istracked&&(o.trackPosts=e.istracked),o.availabilityMessage=o.forumHelper.getAvailabilityMessage(e),o.dataRetrieved.emit(e),e.type){case"news":case"blog":o.addDiscussionText=o.translate.instant("addon.mod_forum.addanewtopic");break;case"qanda":o.addDiscussionText=o.translate.instant("addon.mod_forum.addanewquestion");break;default:o.addDiscussionText=o.translate.instant("addon.mod_forum.addanewdiscussion")}if(t)return o.syncActivity(n).then(function(t){t&&o.eventsProvider.trigger(_.a.MANUAL_SYNCED,{forumId:e.id,userId:o.sitesProvider.getCurrentSiteUserId(),source:"index"},o.sitesProvider.getCurrentSiteId())})}).then(function(){var e=[];return e.push(o.groupsProvider.getActivityGroupMode(o.forum.cmid).then(function(e){o.usesGroups=e===u.a.SEPARATEGROUPS||e===u.a.VISIBLEGROUPS})),e.push(o.forumProvider.getAccessInformation(o.forum.id).then(function(e){var t=o.forumHelper.isCutoffDateReached(o.forum)&&!e.cancanoverridecutoff;o.canAddDiscussion=o.forum.cancreatediscussions&&!t})),o.forumProvider.isSetPinStateAvailableForSite()?e.push(o.forumProvider.canAddDiscussionToAll(o.forum.id).then(function(e){o.canPin=!!e.canpindiscussions}).catch(function(){o.canPin=!1})):o.canPin=!1,Promise.all(e)})),r.push(this.fetchSortOrderPreference()),Promise.all(r).then(function(){return Promise.all([o.fetchOfflineDiscussion(),o.fetchDiscussions(e),o.ratingOffline.hasRatings("mod_forum","post","module",o.forum.cmid).then(function(e){o.hasOfflineRatings=e})])}).catch(function(n){if(!e)return o.refreshContent(t);o.domUtils.showErrorModalDefault(n,"addon.mod_forum.errorgetforum",!0),o.loadMoreError=!0}).finally(function(){o.fillContextMenu(e)})},t.prototype.fetchOfflineDiscussion=function(){var e=this;return this.forumOffline.getNewDiscussions(this.forum.id).then(function(t){if(e.hasOffline=!!t.length,e.hasOffline){return(e.usesGroups?e.forumProvider.formatDiscussionsGroups(e.forum.cmid,t):Promise.resolve(t)).then(function(t){var n=[];return t.forEach(function(t){0==t.parent&&"single"==e.forum.type||n.push(e.userProvider.getProfile(t.userid,e.courseId,!0).then(function(e){t.userfullname=e.fullname,t.userpictureurl=e.profileimageurl}).catch(function(){}))}),Promise.all(n).then(function(){t.sort(function(e,t){return t.timecreated-e.timecreated}),e.offlineDiscussions=t})})}e.offlineDiscussions=[]})},t.prototype.fetchDiscussions=function(e){var t=this;return this.loadMoreError=!1,e&&(this.page=0),this.forumProvider.getDiscussions(this.forum.id,this.selectedSortOrder.value,this.page).then(function(e){return(t.usesGroups?t.forumProvider.formatDiscussionsGroups(t.forum.cmid,e.discussions):Promise.resolve(e.discussions)).then(function(n){if("single"==t.forum.type)for(var o in n)if(n[o].userfullname&&0==n[o].parent){n[o].userfullname=!1;break}if(void 0===t.forum.istracked&&!t.trackPosts)for(var r in n)if(n[r].numunread>0){t.trackPosts=!0;break}return t.discussions=0==t.page?n:t.discussions.concat(n),t.canLoadMore=e.canLoadMore,t.page++,t.forumOffline.hasForumReplies(t.forum.id).then(function(e){var o=[];return t.hasOffline=t.hasOffline||e,e&&n.forEach(function(e){o.push(t.forumOffline.getDiscussionReplies(e.discussion).then(function(t){e.numreplies=parseInt(e.numreplies,10)+t.length}))}),Promise.all(o)})})})},t.prototype.fetchMoreDiscussions=function(e){var t=this;return this.fetchDiscussions(!1).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.mod_forum.errorgetforum",!0),t.loadMoreError=!0}).finally(function(){e&&e()})},t.prototype.fetchSortOrderPreference=function(){var e=this;return(this.sortingAvailable?this.userProvider.getUserPreference(p.a.PREFERENCE_SORTORDER).then(function(e){return e?parseInt(e,10):null}):Promise.resolve(null)).then(function(t){e.selectedSortOrder=e.sortOrders.find(function(e){return e.value===t})||e.sortOrders[0]})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.forumProvider.invalidateForumData(this.courseId)),this.forum&&(e.push(this.forumProvider.invalidateDiscussionsList(this.forum.id)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.forum.cmid)),e.push(this.forumProvider.invalidateAccessInformation(this.forum.id))),this.sortingAvailable&&e.push(this.userProvider.invalidateUserPreference(p.a.PREFERENCE_SORTORDER)),Promise.all(e)},t.prototype.sync=function(){return this.prefetchHandler.sync(this.module,this.courseId)},t.prototype.hasSyncSucceed=function(e){return e.updated},t.prototype.isRefreshSyncNeeded=function(e){return this.forum&&"index"!=e.source&&e.forumId==this.forum.id&&e.userId==this.sitesProvider.getCurrentSiteUserId()},t.prototype.eventReceived=function(e,t){var n=this;(this.forum&&this.forum.id===t.forumId||t.cmId===this.module.id)&&(e&&this.splitviewCtrl.isOn()&&this.splitviewCtrl.emptyDetails(),this.showLoadingAndRefresh(!1).finally(function(){if(e&&n.splitviewCtrl.isOn())if(t.discussionIds){var o=n.discussions.find(function(e){return t.discussionIds.indexOf(e.discussion)>=0});o&&n.openDiscussion(o)}else t.discTimecreated&&n.openNewDiscussion(t.discTimecreated)}),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},t.prototype.openDiscussion=function(e){this.splitviewCtrl.push("AddonModForumDiscussionPage",{courseId:this.courseId,cmId:this.module.id,forumId:this.forum.id,discussion:e,trackPosts:this.trackPosts})},t.prototype.openNewDiscussion=function(e){void 0===e&&(e=0);this.splitviewCtrl.push("AddonModForumNewDiscussionPage",{courseId:this.courseId,cmId:this.module.id,forumId:this.forum.id,timeCreated:e}),this.selectedDiscussion=0},t.prototype.showSortOrderSelector=function(e){var t=this;if(this.sortingAvailable){var n=this.modalCtrl.create("AddonModForumSortOrderSelectorPage",{sortOrders:this.sortOrders,selected:this.selectedSortOrder.value});n.onDidDismiss(function(e){t.sortOrderSelectorExpanded=!1,e&&e.value!=t.selectedSortOrder.value&&(t.selectedSortOrder=e,t.page=0,t.userProvider.setUserPreference(p.a.PREFERENCE_SORTORDER,e.value.toFixed(0)).then(function(){t.showLoadingAndFetch()}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error updating preference.")}))}),n.present({ev:e}),this.sortOrderSelectorExpanded=!0}},t.prototype.showOptionsMenu=function(e,t){e.preventDefault(),e.stopPropagation();var n=this.popoverCtrl.create(v.a,{discussion:t,forumId:this.forum.id,cmId:this.module.id});n.onDidDismiss(function(e){if(e&&e.action)switch(e.action){case"lock":t.locked=e.value;break;case"pin":t.pinned=e.value;break;case"star":t.starred=e.value}}),n.present({ev:e})},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.syncManualObserver&&this.syncManualObserver.off(),this.newDiscObserver&&this.newDiscObserver.off(),this.replyObserver&&this.replyObserver.off(),this.viewDiscObserver&&this.viewDiscObserver.off(),this.changeDiscObserver&&this.changeDiscObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},b([Object(o._9)(i.a),P("design:type",i.a)],t.prototype,"splitviewCtrl",void 0),t=b([Object(o.m)({selector:"addon-mod-forum-index",templateUrl:"addon-mod-forum-index.html"}),O(1,Object(o.N)()),P("design:paramtypes",[o.C,r.f,r.q,u.a,s.a,p.a,h.a,m.a,_.a,a.a,g.a,d.a,r.w])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(72),i=n(57),l=n(203),a=n(258),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.fileProvider=e,this.uploaderProvider=t,this.glossaryOffline=n}return e.prototype.deleteStoredFiles=function(e,t,n,o){var r=this;return this.glossaryOffline.getEntryFolder(e,t,n,o).then(function(e){return r.fileProvider.removeDir(e).catch(function(){})})},e.prototype.getStoredFiles=function(e,t,n,o){var r=this;return this.glossaryOffline.getEntryFolder(e,t,n,o).then(function(e){return r.uploaderProvider.getStoredFiles(e)})},e.prototype.hasEntryDataChanged=function(e,t,n){return n&&void 0!==n.concept?n.definition!=e.definition||n.concept!=e.concept||this.uploaderProvider.areFileListDifferent(t,n.files):e.definition||e.concept||t.length>0},e.prototype.storeFiles=function(e,t,n,o,r){var i=this;return this.glossaryOffline.getEntryFolder(e,t,n,r).then(function(e){return i.uploaderProvider.storeFilesToUpload(e,o)})},e.prototype.uploadOrStoreFiles=function(e,t,n,o,r,i){return r?this.storeFiles(e,t,n,o,i):this.uploaderProvider.uploadOrReuploadFiles(o,l.a.COMPONENT,e,i)},e=s([Object(o.A)(),u("design:paramtypes",[i.a,r.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(5),i=n(28),l=n(158),a=n(231),s=n(201),u=n(236),c=n(203),d=n(258),f=n(362),p=n(653),h=n(403),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t)||this;return a.popoverCtrl=n,a.glossaryProvider=o,a.glossaryOffline=r,a.prefetchHandler=i,a.ratingOffline=l,a.component=c.a.COMPONENT,a.moduleName="glossary",a.isSearch=!1,a.entries=[],a.offlineEntries=[],a.canAdd=!1,a.canLoadMore=!1,a.loadMoreError=!1,a.loadingMessage=a.translate.instant("core.loading"),a.syncEventName=f.a.AUTO_SYNCED,a.fetchedEntriesCanLoadMore=!1,a.fetchedEntries=[],a}return m(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.addEntryObserver=this.eventsProvider.on(c.a.ADD_ENTRY_EVENT,this.eventReceived.bind(this)),this.ratingOfflineObserver=this.eventsProvider.on(a.a.RATING_SAVED_EVENT,function(e){t.glossary&&"mod_glossary"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==t.glossary.coursemodule&&(t.hasOfflineRatings=!0)}),this.ratingSyncObserver=this.eventsProvider.on(u.a.SYNCED_EVENT,function(e){t.glossary&&"mod_glossary"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==t.glossary.coursemodule&&(t.hasOfflineRatings=!1)}),this.loadContent(!1,!0).then(function(){t.glossary&&(t.splitviewCtrl.isOn()&&t.entries.length>0&&t.openEntry(t.entries[0].id),t.glossaryProvider.logView(t.glossary.id,t.viewMode,t.glossary.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(e){}))})},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.glossaryProvider.getGlossary(this.courseId,this.module.id).then(function(e){if(o.glossary=e,o.description=e.intro||o.description,o.canAdd=o.glossaryProvider.isPluginEnabledForEditing()&&e.canaddentry||!1,o.dataRetrieved.emit(o.glossary),o.fetchMode||o.switchMode("letter_all"),t)return o.syncActivity(n)}).then(function(){var e=[];return e.push(o.fetchEntries().then(function(){return o.glossaryOffline.getGlossaryNewEntries(o.glossary.id).then(function(e){e.sort(function(e,t){return e.concept.localeCompare(t.fullname)}),o.hasOffline=!!e.length,o.offlineEntries=e||[]})})),e.push(o.ratingOffline.hasRatings("mod_glossary","entry","module",o.glossary.coursemodule).then(function(e){o.hasOfflineRatings=e})),Promise.all(e)}).finally(function(){o.fillContextMenu(e)})},t.prototype.fetchEntries=function(e){var t=this;if(void 0===e&&(e=!1),this.loadMoreError=!1,!this.fetchFunction||!this.fetchArguments)return Promise.resolve({entries:[],count:0});return this.glossaryProvider.fetchEntries(this.fetchFunction,this.fetchArguments,e?this.entries.length:0,c.a.LIMIT_ENTRIES).then(function(n){e?Array.prototype.push.apply(t.entries,n.entries):t.entries=n.entries,t.canLoadMore=t.entries.length<n.count}).catch(function(e){return Promise.reject(e)})},t.prototype.invalidateContent=function(){var e=[];return this.fetchInvalidate&&this.fetchArguments&&e.push(this.fetchInvalidate.apply(this.glossaryProvider,this.fetchArguments)),e.push(this.glossaryProvider.invalidateCourseGlossaries(this.courseId)),this.glossary&&this.glossary.id&&e.push(this.glossaryProvider.invalidateCategories(this.glossary.id)),Promise.all(e)},t.prototype.sync=function(){return this.prefetchHandler.sync(this.module,this.courseId)},t.prototype.hasSyncSucceed=function(e){return e.updated},t.prototype.isRefreshSyncNeeded=function(e){return this.glossary&&e.glossaryId==this.glossary.id&&e.userId==this.sitesProvider.getCurrentSiteUserId()},t.prototype.switchMode=function(e){var t=this;switch(this.fetchMode=e,this.isSearch=!1,e){case"author_all":this.viewMode="author",this.fetchFunction=this.glossaryProvider.getEntriesByAuthor,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByAuthor,this.fetchArguments=[this.glossary.id,"ALL","LASTNAME","ASC"],this.getDivider=function(e){return e.userfullname},this.showDivider=function(e,t){return void 0===t||e.userid!=t.userid};break;case"cat_all":this.viewMode="cat",this.fetchFunction=this.glossaryProvider.getEntriesByCategory,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByCategory,this.fetchArguments=[this.glossary.id,c.a.SHOW_ALL_CATEGORIES],this.getDivider=function(e){return e.categoryname},this.showDivider=function(e,n){return!n||t.getDivider(e)!=t.getDivider(n)};break;case"newest_first":this.viewMode="date",this.fetchFunction=this.glossaryProvider.getEntriesByDate,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByDate,this.fetchArguments=[this.glossary.id,"CREATION","DESC"],this.getDivider=null,this.showDivider=function(){return!1};break;case"recently_updated":this.viewMode="date",this.fetchFunction=this.glossaryProvider.getEntriesByDate,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByDate,this.fetchArguments=[this.glossary.id,"UPDATE","DESC"],this.getDivider=null,this.showDivider=function(){return!1};break;case"letter_all":default:this.viewMode="letter",this.fetchMode="letter_all",this.fetchFunction=this.glossaryProvider.getEntriesByLetter,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByLetter,this.fetchArguments=[this.glossary.id,"ALL"],this.getDivider=function(e){return e.concept.substr(0,1).toUpperCase()},this.showDivider=function(e,n){return!n||t.getDivider(e)!=t.getDivider(n)}}},t.prototype.loadMoreEntries=function(e){var t=this;return this.fetchEntries(!0).catch(function(e){t.loadMoreError=!0,t.domUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentries",!0)}).finally(function(){e&&e()})},t.prototype.openModePicker=function(e){var t=this,n=this.popoverCtrl.create(p.a,{browsemodes:this.glossary.browsemodes,selectedMode:this.isSearch?"":this.fetchMode});n.onDidDismiss(function(e){e!==t.fetchMode?t.changeFetchMode(e):t.isSearch&&t.toggleSearch()}),n.present({ev:e})},t.prototype.toggleSearch=function(){this.isSearch?(this.isSearch=!1,this.entries=this.fetchedEntries,this.canLoadMore=this.fetchedEntriesCanLoadMore,this.switchMode(this.fetchMode)):(this.fetchFunction=this.glossaryProvider.getEntriesBySearch,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesBySearch,this.fetchArguments=null,this.getDivider=null,this.showDivider=function(){return!1},this.isSearch=!0,this.fetchedEntries=this.entries,this.fetchedEntriesCanLoadMore=this.canLoadMore,this.canLoadMore=!1,this.entries=[])},t.prototype.changeFetchMode=function(e){this.isSearch=!1,this.loadingMessage=this.translate.instant("core.loading"),this.domUtils.scrollToTop(this.content),this.switchMode(e),this.loaded=!1,this.loadContent()},t.prototype.openEntry=function(e){this.splitviewCtrl.push("AddonModGlossaryEntryPage",{courseId:this.courseId,entryId:e}),this.selectedEntry=e},t.prototype.openNewEntry=function(e){var t={courseId:this.courseId,module:this.module,glossary:this.glossary,entry:e};this.splitviewCtrl.getMasterNav().push("AddonModGlossaryEditPage",t),this.selectedEntry=0},t.prototype.search=function(e){this.loadingMessage=this.translate.instant("core.searching"),this.fetchArguments=[this.glossary.id,e,1,"CONCEPT","ASC"],this.loaded=!1,this.loadContent()},t.prototype.eventReceived=function(e){this.glossary&&this.glossary.id===e.glossaryId&&(this.showLoadingAndRefresh(!1),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.addEntryObserver&&this.addEntryObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},_([Object(o._9)(i.a),g("design:type",i.a)],t.prototype,"splitviewCtrl",void 0),_([Object(o._9)(r.f),g("design:type",r.f)],t.prototype,"content",void 0),t=_([Object(o.m)({selector:"addon-mod-glossary-index",templateUrl:"addon-mod-glossary-index.html"}),g("design:paramtypes",[o.C,r.w,c.a,d.a,h.a,s.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(10),l=n(13),a=n(268),s=n(237),u=n(404),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t)||this;return a.imscpProvider=n,a.courseProvider=o,a.appProvider=r,a.modalCtrl=i,a.imscpPrefetch=l,a.component=s.a.COMPONENT,a.items=[],a.src="",a.previousItem="",a.nextItem="",a}return c(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.loadContent().then(function(){t.imscpProvider.logView(t.module.instance,t.module.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})})},t.prototype.invalidateContent=function(){return this.imscpProvider.invalidateContent(this.module.id,this.courseId)},t.prototype.fetchContent=function(e){var t,n=this,o=!1,r=[];return r.push(this.imscpProvider.getImscp(this.courseId,this.module.id).then(function(e){n.description=e.intro,n.dataRetrieved.emit(e)})),r.push(this.imscpPrefetch.download(this.module,this.courseId).catch(function(e){return o=!0,t=e,n.courseProvider.loadModuleContents(n.module,n.courseId).catch(function(e){return n.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})})),Promise.all(r).then(function(){return n.items=n.imscpProvider.createItemList(n.module.contents),n.items.length&&void 0===n.currentItem&&(n.currentItem=n.items[0].href),n.loadItem(n.currentItem).catch(function(e){return n.domUtils.showErrorModalDefault(e,"addon.mod_imscp.deploymenterror",!0),Promise.reject(null)})}).then(function(){o&&n.appProvider.isOnline()&&n.showErrorDownloadingSomeFiles(t)}).finally(function(){n.fillContextMenu(e)})},t.prototype.loadItem=function(e){var t=this;return this.imscpProvider.getIframeSrc(this.module,e).then(function(n){t.currentItem=e,t.previousItem=t.imscpProvider.getPreviousItem(t.items,e),t.nextItem=t.imscpProvider.getNextItem(t.items,e),t.src&&n==t.src?(t.src="",setTimeout(function(){t.src=n})):t.src=n})},t.prototype.showToc=function(e){var t=this,n=this.modalCtrl.create("AddonModImscpTocPage",{items:this.items,selected:this.currentItem},{cssClass:"core-modal-lateral",showBackdrop:!0,enableBackdropDismiss:!0,enterAnimation:"core-modal-lateral-transition",leaveAnimation:"core-modal-lateral-transition"});n.onDidDismiss(function(e){e&&t.loadItem(e)}),n.present({ev:e})},t=d([Object(o.m)({selector:"addon-mod-imscp-index",templateUrl:"addon-mod-imscp-index.html"}),f("design:paramtypes",[o.C,s.a,l.a,i.a,r.q,u.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(5),i=n(71),l=n(24),a=n(2),s=n(158),u=n(46),c=n(169),d=n(286),f=n(287),p=n(330),h=n(40),m=n(200),_=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},b=function(e){function t(t,n,o,r,i,l,a,s,u,d,p){var h=e.call(this,t,o)||this;return h.lessonProvider=n,h.groupsProvider=r,h.lessonOffline=i,h.lessonSync=l,h.utils=a,h.prefetchHandler=s,h.navCtrl=u,h.timeUtils=d,h.userProvider=p,h.component=c.a.COMPONENT,h.moduleName="lesson",h.syncEventName=f.a.AUTO_SYNCED,h.dataSent=!1,h}return _(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.selectedTab="report"==this.action?1:0,this.loadContent(!1,!0).then(function(){!t.lesson||t.preventMessages&&t.preventMessages.length||t.logView()})},t.prototype.changeGroup=function(e){var t=this;this.reportLoaded=!1,this.setGroup(e).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error getting report.")}).finally(function(){t.reportLoaded=!0})},t.prototype.fetchContent=function(e,t,n){var o=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var r=!0;return this.askPassword=!1,this.lessonProvider.getLesson(this.courseId,this.module.id).then(function(e){if(o.lesson=e,o.dataRetrieved.emit(o.lesson),o.description=o.lesson.intro,t)return o.syncActivity(n)}).then(function(){return o.lessonProvider.getAccessInformation(o.lesson.id)}).then(function(t){var n=[];if(o.accessInfo=t,o.canManage=t.canmanage,o.canViewReports=t.canviewreports,o.preventMessages=[],o.lessonProvider.isLessonOffline(o.lesson)&&(o.setStatusListener(),n.push(o.lessonSync.hasDataToSync(o.lesson.id,t.attemptscount).then(function(e){o.hasOffline=e})),n.push(o.lessonSync.getRetakeFinishedInSync(o.lesson.id).then(function(e){e&&e.retake==t.attemptscount-1?o.retakeToReview=e:(o.retakeToReview=void 0,e&&o.lessonSync.deleteRetakeFinishedInSync(o.lesson.id))})),n.push(o.lessonOffline.hasFinishedRetake(o.lesson.id).then(function(e){o.finishedOffline=e})),n.push(o.lessonProvider.getContentPagesViewedOnline(o.lesson.id,t.attemptscount)),n.push(o.lessonProvider.getQuestionsAttemptsOnline(o.lesson.id,t.attemptscount))),t.preventaccessreasons&&t.preventaccessreasons.length){var i=o.lessonProvider.getPreventAccessReason(t,!1);if("passwordprotectedlesson"==i.reason){var l=o.password?Promise.resolve(o.password):o.lessonProvider.getStoredPassword(o.lesson.id);n.push(l.then(function(e){return o.validatePassword(e)}).then(function(){(i=o.lessonProvider.getPreventAccessReason(t,!0))&&(o.preventMessages=[i])}).catch(function(){o.askPassword=!0,o.preventMessages=[i],r=!1}))}else o.preventMessages=[i],r=!1}return 1==o.selectedTab&&o.canViewReports&&n.push(o.fetchReportData()),Promise.all(n).then(function(){r&&o.lessonReady(e)})}).finally(function(){o.fillContextMenu(e)})},t.prototype.fetchReportData=function(){var e=this;return this.groupsProvider.getActivityGroupInfo(this.module.id).then(function(t){return e.groupInfo=t,e.setGroup(e.groupsProvider.validateGroupId(e.group,t))}).finally(function(){e.reportLoaded=!0})},t.prototype.hasSyncSucceed=function(e){return(e.updated||this.dataSent)&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),this.dataSent=!1,e.updated},t.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidEnter(),this.hasPlayed&&(this.hasPlayed=!1,this.dataSentObserver&&this.dataSentObserver.off(),this.dataSentObserver=void 0,this.showLoadingAndRefresh(!0,!1))},t.prototype.ionViewDidLeave=function(){var t=this;e.prototype.ionViewDidLeave.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidLeave(),"AddonModLessonPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0,this.dataSentObserver&&this.dataSentObserver.off(),this.dataSentObserver=this.eventsProvider.on(c.a.DATA_SENT_EVENT,function(e){e.lessonId===t.lesson.id&&"launch"!=e.type&&(t.dataSent=!0)},this.siteId))},t.prototype.invalidateContent=function(){var e=[];return e.push(this.lessonProvider.invalidateLessonData(this.courseId)),this.lesson&&(e.push(this.lessonProvider.invalidateAccessInformation(this.lesson.id)),e.push(this.lessonProvider.invalidatePages(this.lesson.id)),e.push(this.lessonProvider.invalidateLessonWithPassword(this.lesson.id)),e.push(this.lessonProvider.invalidateTimers(this.lesson.id)),e.push(this.lessonProvider.invalidateContentPagesViewed(this.lesson.id)),e.push(this.lessonProvider.invalidateQuestionsAttempts(this.lesson.id)),e.push(this.lessonProvider.invalidateRetakesOverview(this.lesson.id)),e.push(this.groupsProvider.invalidateActivityGroupInfo(this.module.id))),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return this.lesson&&e.lessonId==this.lesson.id},t.prototype.lessonReady=function(e){this.askPassword=!1,this.leftDuringTimed=this.hasOffline||this.lessonProvider.leftDuringTimed(this.accessInfo),this.password&&this.lessonProvider.storePassword(this.lesson.id,this.password)},t.prototype.logView=function(){var e=this;this.lessonProvider.logViewLesson(this.lesson.id,this.password,this.lesson.name).then(function(){e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata)}).catch(function(e){})},t.prototype.playLesson=function(e){var t=this;return(this.hasOffline?e?this.lessonProvider.getLastPageSeen(this.lesson.id,this.accessInfo.attemptscount):Promise.resolve(this.accessInfo.firstpageid):this.leftDuringTimed&&!this.lesson.timelimit?Promise.resolve(e?this.accessInfo.lastpageseen:this.accessInfo.firstpageid):Promise.resolve()).then(function(e){t.navCtrl.push("AddonModLessonPlayerPage",{courseId:t.courseId,lessonId:t.lesson.id,pageId:e,password:t.password})})},t.prototype.indexSelected=function(){this.selectedTab=0},t.prototype.reportsSelected=function(){var e=this;this.selectedTab=1,this.groupInfo||this.fetchReportData().catch(function(t){e.domUtils.showErrorModalDefault(t,"Error getting report.")})},t.prototype.review=function(){this.retakeToReview&&this.navCtrl.push("AddonModLessonPlayerPage",{courseId:this.courseId,lessonId:this.lesson.id,pageId:this.retakeToReview.pageid,password:this.password,review:!0,retake:this.retakeToReview.retake})},t.prototype.setGroup=function(e){var t=this;if(this.group=e,this.selectedGroupName="",e&&this.groupInfo&&this.groupInfo.groups)for(var n=0;n<this.groupInfo.groups.length;n++){var o=this.groupInfo.groups[n];if(e==o.id){this.selectedGroupName=o.name;break}}return this.lessonProvider.getRetakesOverview(this.lesson.id,e).then(function(e){var n=[];return e&&null!=e.avetime&&e.numofattempts&&(e.avetime=Math.floor(e.avetime/e.numofattempts),e.avetimeReadable=t.timeUtils.formatTime(e.avetime)),e&&null!=e.hightime&&(e.hightimeReadable=t.timeUtils.formatTime(e.hightime)),e&&null!=e.lowtime&&(e.lowtimeReadable=t.timeUtils.formatTime(e.lowtime)),e&&e.lessonscored&&(e.numofattempts&&(e.avescore=t.textUtils.roundToDecimals(e.avescore,2)),null!=e.highscore&&(e.highscore=t.textUtils.roundToDecimals(e.highscore,2)),null!=e.lowscore&&(e.lowscore=t.textUtils.roundToDecimals(e.lowscore,2))),e&&e.students&&e.students.forEach(function(e){e.bestgrade=t.textUtils.roundToDecimals(e.bestgrade,2),n.push(t.userProvider.getProfile(e.id,t.courseId,!0).then(function(t){e.profileimageurl=t.profileimageurl}).catch(function(){}))}),t.utils.allPromises(n).catch(function(){}).then(function(){t.overview=e})})},t.prototype.showStatus=function(e,t){this.showSpinner=e==h.a.DOWNLOADING},t.prototype.start=function(e){var t=this;this.showSpinner||(this.lessonProvider.isLessonOffline(this.lesson)&&this.currentStatus!=h.a.DOWNLOADED?(this.showSpinner=!0,this.prefetchHandler.prefetch(this.module,this.courseId,!0).then(function(){t.playLesson(e)}).catch(function(n){t.hasOffline?t.playLesson(e):t.domUtils.showErrorModalDefault(n,"core.errordownloading",!0)}).finally(function(){t.showSpinner=!1})):this.playLesson(e))},t.prototype.submitPassword=function(e,t){var n=this;e.preventDefault(),e.stopPropagation();var o=t&&t.value;o?(this.loaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.validatePassword(o).then(function(){n.lessonReady(!1);var e=n.lessonProvider.getPreventAccessReason(n.accessInfo,!0);n.preventMessages=e?[e]:[],n.logView()}).catch(function(e){n.domUtils.showErrorModal(e)}).finally(function(){n.loaded=!0,n.refreshIcon="refresh",n.syncIcon="sync",n.domUtils.triggerFormSubmittedEvent(n.formElement.nativeElement,!0,n.siteId)})):this.domUtils.showErrorModal("addon.mod_lesson.emptypassword",!0)},t.prototype.sync=function(){var e=this;return this.lessonSync.syncLesson(this.lesson.id,!0).then(function(t){return!t.updated&&e.dataSent&&e.isPrefetched()?e.lessonSync.prefetchAfterUpdate(e.module,e.courseId).catch(function(){}).then(function(){return t}):t})},t.prototype.validatePassword=function(e){var t=this;return this.lessonProvider.getLessonWithPassword(this.lesson.id,e).then(function(n){t.lesson=n,t.password=e}).catch(function(e){return t.password="",Promise.reject(e)})},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.dataSentObserver&&this.dataSentObserver.off()},g([Object(o._9)(m.a),v("design:type",m.a)],t.prototype,"tabsComponent",void 0),g([Object(o._9)("passwordForm"),v("design:type",o.t)],t.prototype,"formElement",void 0),g([Object(o.D)(),v("design:type",Number)],t.prototype,"group",void 0),g([Object(o.D)(),v("design:type",String)],t.prototype,"action",void 0),t=g([Object(o.m)({selector:"addon-mod-lesson-index",templateUrl:"addon-mod-lesson-index.html"}),y(2,Object(o.N)()),v("design:paramtypes",[o.C,c.a,r.f,i.a,d.a,f.a,a.a,p.a,r.s,l.a,u.a])],t)}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(158),l=n(298),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},d=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.content=n,r.ltiProvider=o,r.component=l.a.COMPONENT,r.moduleName="lti",r.fetchContentDefaultError="addon.mod_lti.errorgetlti",r}return a(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.loadContent()},t.prototype.checkCompletion=function(){this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata)},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.ltiProvider.getLti(this.courseId,this.module.id).then(function(e){o.lti=e,o.description=o.lti.intro,o.dataRetrieved.emit(o.lti)}).finally(function(){o.fillContextMenu(e)})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.ltiProvider.invalidateLti(this.courseId)),this.lti&&e.push(this.ltiProvider.invalidateLtiLaunchData(this.lti.id)),Promise.all(e)},t.prototype.launch=function(){var e=this;this.ltiProvider.getLtiLaunchData(this.lti.id).then(function(t){return e.ltiProvider.logView(e.lti.id,e.lti.name).then(function(){e.checkCompletion()}).catch(function(e){}),e.ltiProvider.launch(t.endpoint,t.parameters)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.error",!0)})},t=s([Object(o.m)({selector:"addon-mod-lti-index",templateUrl:"addon-mod-lti-index.html"}),c(1,Object(o.N)()),u("design:paramtypes",[o.C,r.f,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(10),i=n(2),l=n(13),a=n(268),s=n(222),u=n(331),c=n(405),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l,a){var u=e.call(this,t)||this;return u.pageProvider=n,u.courseProvider=o,u.appProvider=r,u.pageHelper=i,u.pagePrefetch=l,u.utils=a,u.component=s.a.COMPONENT,u.displayDescription=!0,u.displayTimemodified=!0,u.fetchContentDefaultError="addon.mod_page.errorwhileloadingthepage",u}return d(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.canGetPage=this.pageProvider.isGetPageWSAvailable(),this.loadContent().then(function(){t.pageProvider.logView(t.module.instance,t.module.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})})},t.prototype.invalidateContent=function(){return this.pageProvider.invalidateContent(this.module.id,this.courseId)},t.prototype.fetchContent=function(e){var t,n=this,o=!1;return this.pagePrefetch.download(this.module,this.courseId).catch(function(e){o=!0,t=e}).then(function(){if(!n.module.contents.length)return n.courseProvider.loadModuleContents(n.module,n.courseId)}).then(function(){var e,r=[];return e=n.canGetPage?n.pageProvider.getPageData(n.courseId,n.module.id):n.courseProvider.getModule(n.module.id,n.courseId),r.push(e.then(function(e){if(e&&(n.description=e.intro||e.description,n.dataRetrieved.emit(e),n.canGetPage))if(n.page=e,n.page.displayoptions){var t=n.textUtils.unserialize(n.page.displayoptions)||{};n.displayDescription=void 0===t.printintro||n.utils.isTrueOrOne(t.printintro),n.displayTimemodified=void 0===t.printlastmodified||n.utils.isTrueOrOne(t.printlastmodified)}else n.displayDescription=!0,n.displayTimemodified=!0}).catch(function(){})),r.push(n.pageHelper.getPageHtml(n.module.contents,n.module.id).then(function(e){n.contents=e,o&&n.appProvider.isOnline()&&n.showErrorDownloadingSomeFiles(t)})),Promise.all(r)}).finally(function(){n.fillContextMenu(e)})},t=f([Object(o.m)({selector:"addon-mod-page-index",templateUrl:"addon-mod-page-index.html"}),p("design:paramtypes",[o.C,s.a,l.a,r.a,u.a,c.a,i.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(158),l=n(117),a=n(167),s=n(253),u=n(263),c=n(259),d=n(332),f=n(40),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},g=function(e){function t(t,n,o,r,i,l,s,u,d){var f=e.call(this,t,o)||this;return f.quizProvider=n,f.quizHelper=r,f.quizOffline=i,f.quizSync=l,f.behaviourDelegate=s,f.prefetchHandler=u,f.navCtrl=d,f.component=a.a.COMPONENT,f.moduleName="quiz",f.showStatusSpinner=!0,f.fetchContentDefaultError="addon.mod_quiz.errorgetquiz",f.syncEventName=c.a.AUTO_SYNCED,f.hasPlayed=!1,f}return p(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){t.quizData&&t.quizProvider.logViewQuiz(t.quizData.id,t.quizData.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(e){})}),this.finishedObserver=this.eventsProvider.on(a.a.ATTEMPT_FINISHED_EVENT,function(e){t.quizData&&e.quizId==t.quizData.id&&(t.autoReview=e)},this.siteId)},t.prototype.attemptQuiz=function(){var e=this;if(!this.showStatusSpinner)if(this.quizProvider.isQuizOffline(this.quizData)){var t=this.currentStatus==f.a.DOWNLOADED;t&&this.modulePrefetchDelegate.canCheckUpdates()?this.openQuiz():(this.showStatusSpinner=!0,this.prefetchHandler.prefetch(this.module,this.courseId,!0).then(function(){e.openQuiz()}).catch(function(n){e.hasOffline||t&&!e.modulePrefetchDelegate.canCheckUpdates()?e.openQuiz():e.domUtils.showErrorModalDefault(n,"core.errordownloading",!0)}).finally(function(){e.showStatusSpinner=!1}))}else this.openQuiz()},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.quizProvider.getQuiz(this.courseId,this.module.id).then(function(e){return o.quizData=e,o.quizData.gradeMethodReadable=o.quizProvider.getQuizGradeMethod(o.quizData.grademethod),o.now=(new Date).getTime(),o.dataRetrieved.emit(o.quizData),o.description=o.quizData.intro||o.description,o.quizSync.getSyncWarnings(o.quizData.id).then(function(e){if(e&&e.length)return o.domUtils.showErrorModal(o.textUtils.buildMessage(e)),o.quizSync.setSyncWarnings(o.quizData.id,[])})}).then(function(){if(o.quizProvider.isQuizOffline(o.quizData))return o.syncActivity(n).catch(function(){o.autoReview=void 0});o.autoReview=void 0,o.showStatusSpinner=!1}).then(function(){return o.quizProvider.isQuizOffline(o.quizData)&&(o.setStatusListener(),o.quizSync.getReadableSyncTime(o.quizData.id).then(function(e){o.syncTime=e}),o.quizSync.hasDataToSync(o.quizData.id).then(function(e){o.hasOffline=e})),o.quizProvider.getQuizAccessInformation(o.quizData.id).then(function(e){return o.quizAccessInfo=e,o.quizData.showReviewColumn=e.canreviewmyattempts,o.accessRules=e.accessrules,o.unsupportedRules=o.quizProvider.getUnsupportedRules(e.activerulenames),o.quizData.preferredbehaviour&&(o.behaviourSupported=o.behaviourDelegate.isBehaviourSupported(o.quizData.preferredbehaviour)),o.quizProvider.getQuizRequiredQtypes(o.quizData.id).then(function(e){return o.unsupportedQuestions=o.quizProvider.getUnsupportedQuestions(e),o.hasSupportedQuestions=!!e.find(function(e){return"random"!=e&&-1==o.unsupportedQuestions.indexOf(e)}),o.getAttempts()})})}).then(function(){o.quiz=o.quizData}).finally(function(){o.fillContextMenu(e)})},t.prototype.getAttempts=function(){var e=this;return this.quizProvider.getAttemptAccessInformation(this.quizData.id,0).then(function(t){return e.attemptAccessInfo=t,e.quizProvider.getUserAttempts(e.quizData.id).then(function(t){return e.treatAttempts(t).then(function(t){if(e.attempts=t,e.attempts.length){e.moreAttempts=!e.quizProvider.isAttemptFinished(e.attempts[e.attempts.length-1].state)||!e.attemptAccessInfo.isfinished}else e.moreAttempts=!e.attemptAccessInfo.isfinished;return e.getButtonText(),e.getResultInfo()})})})},t.prototype.getButtonText=function(){this.buttonText="",0!==this.quizData.hasquestions&&(this.attempts.length&&!this.quizProvider.isAttemptFinished(this.attempts[this.attempts.length-1].state)?this.quizAccessInfo.canattempt?this.buttonText="addon.mod_quiz.continueattemptquiz":this.quizAccessInfo.canpreview&&(this.buttonText="addon.mod_quiz.continuepreview"):this.quizAccessInfo.canattempt?(this.preventMessages=this.attemptAccessInfo.preventnewattemptreasons,this.preventMessages.length||(this.buttonText=this.attempts.length?"addon.mod_quiz.reattemptquiz":"addon.mod_quiz.attemptquiznow")):this.quizAccessInfo.canpreview&&(this.buttonText="addon.mod_quiz.previewquiznow")),this.buttonText&&(this.preventMessages=this.quizAccessInfo.preventaccessreasons,this.moreAttempts?this.quizAccessInfo.canattempt&&this.preventMessages.length?this.buttonText="":this.hasSupportedQuestions&&!this.unsupportedRules.length&&this.behaviourSupported||(this.buttonText=""):this.buttonText="")},t.prototype.getResultInfo=function(){var e=this;if(this.attempts.length&&this.quizData.showGradeColumn&&this.bestGrade.hasgrade&&void 0!==this.gradebookData.grade){var t=this.quizProvider.formatGrade(this.gradebookData.grade,this.quizData.decimalpoints),n=this.quizProvider.formatGrade(this.bestGrade.grade,this.quizData.decimalpoints),o=t;if(this.showResults=!0,this.gradeOverridden=t!=n,this.gradebookFeedback=this.gradebookData.feedback,this.bestGrade.grade>this.gradebookData.grade&&this.gradebookData.grade==this.quizData.grade&&(this.gradeOverridden=!1,o=n),this.overallStats)if(this.moreAttempts)this.gradeResult=this.translate.instant("addon.mod_quiz.gradesofar",{$a:{method:this.quizData.gradeMethodReadable,mygrade:o,quizgrade:this.quizData.gradeFormatted}});else{var r=this.translate.instant("addon.mod_quiz.outofshort",{$a:{grade:o,maxgrade:this.quizData.gradeFormatted}});this.gradeResult=this.translate.instant("addon.mod_quiz.yourfinalgradeis",{$a:r})}if(this.quizData.showFeedbackColumn)return this.quizProvider.getFeedbackForGrade(this.quizData.id,this.gradebookData.grade).then(function(t){e.overallFeedback=t.feedbacktext})}else this.showResults=!1;return Promise.resolve()},t.prototype.goToAutoReview=function(){var e=this;this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata);var t=this.autoReview.attemptId;return this.quizAccessInfo.canreviewmyattempts?this.quizProvider.getAttemptReview(t,-1).then(function(){e.navCtrl.push("AddonModQuizReviewPage",{courseId:e.courseId,quizId:e.quizData.id,attemptId:t})}).catch(function(){}):Promise.resolve()},t.prototype.hasSyncSucceed=function(e){return e.attemptFinished&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),e.answersSent},t.prototype.ionViewDidEnter=function(){var t=this;if(e.prototype.ionViewDidEnter.call(this),this.hasPlayed){this.hasPlayed=!1;var n=void 0;this.autoReview&&this.autoReview.synced?(n=this.goToAutoReview(),this.autoReview=void 0):n=Promise.resolve(),this.loaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.domUtils.scrollToTop(this.content),n.then(function(){t.refreshContent().finally(function(){t.loaded=!0,t.refreshIcon="refresh",t.syncIcon="sync"})})}else this.autoReview=void 0},t.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.autoReview=void 0,"AddonModQuizPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0)},t.prototype.invalidateContent=function(){var e=[];return e.push(this.quizProvider.invalidateQuizData(this.courseId)),this.quizData&&(e.push(this.quizProvider.invalidateUserAttemptsForUser(this.quizData.id)),e.push(this.quizProvider.invalidateQuizAccessInformation(this.quizData.id)),e.push(this.quizProvider.invalidateQuizRequiredQtypes(this.quizData.id)),e.push(this.quizProvider.invalidateAttemptAccessInformation(this.quizData.id)),e.push(this.quizProvider.invalidateCombinedReviewOptionsForUser(this.quizData.id)),e.push(this.quizProvider.invalidateUserBestGradeForUser(this.quizData.id)),e.push(this.quizProvider.invalidateGradeFromGradebook(this.courseId))),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return e.attemptFinished&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),!(!this.quizData||e.quizId!=this.quizData.id)&&(this.domUtils.scrollToTop(this.content),!0)},t.prototype.openQuiz=function(){this.navCtrl.push("AddonModQuizPlayerPage",{courseId:this.courseId,quizId:this.quiz.id,moduleUrl:this.module.url})},t.prototype.showStatus=function(e,t){this.showStatusSpinner=e==f.a.DOWNLOADING,e==f.a.DOWNLOADED&&t==f.a.DOWNLOADING&&(this.loaded=!1,this.loadContent())},t.prototype.sync=function(){return this.quizSync.syncQuiz(this.quizData,!0)},t.prototype.treatAttempts=function(e){var t=this;if(!e||!e.length)return Promise.resolve(e);var n=this.quizProvider.getLastFinishedAttemptFromList(e),o=[];return this.autoReview&&n&&n.id>=this.autoReview.attemptId&&(!this.isDestroyed&&this.isCurrentView&&o.push(this.goToAutoReview()),this.autoReview=void 0),o.push(this.quizProvider.loadFinishedOfflineData(e)),o.push(this.quizProvider.getCombinedReviewOptions(this.quizData.id).then(function(e){t.options=e})),o.push(this.quizProvider.getUserBestGrade(this.quizData.id).then(function(e){return t.bestGrade=e,t.quizProvider.getGradeFromGradebook(t.courseId,t.module.id).then(function(e){t.gradebookData={grade:e.graderaw,feedback:e.feedback}}).catch(function(){t.gradebookData={grade:t.bestGrade.grade}})})),Promise.all(o).then(function(){var o=t.quizProvider.formatGrade(void 0!==t.gradebookData.grade?t.gradebookData.grade:t.bestGrade.grade,t.quizData.decimalpoints);return t.quizHelper.setQuizCalculatedData(t.quizData,t.options),t.overallStats=n&&t.options.alloptions.marks>=a.a.QUESTION_OPTIONS_MARK_AND_MAX,e.forEach(function(n){t.quizHelper.setAttemptCalculatedData(t.quizData,n,t.overallStats&&t.quizData.grademethod==a.a.GRADEHIGHEST&&e.length>1,o)}),e})},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.finishedObserver&&this.finishedObserver.off()},t=h([Object(o.m)({selector:"addon-mod-quiz-index",templateUrl:"addon-mod-quiz-index.html"}),_(2,Object(o.N)()),m("design:paramtypes",[o.C,a.a,r.f,s.a,u.a,c.a,l.a,d.a,r.s])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(10),i=n(18),l=n(1),a=n(2),s=n(13),u=n(268),c=n(223),d=n(406),f=n(299),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},v=function(e){function t(t,n,o,r,i,l,a,s,u){var d=e.call(this,t)||this;return d.resourceProvider=n,d.courseProvider=o,d.appProvider=r,d.prefetchHandler=i,d.resourceHelper=l,d.sitesProvider=a,d.utils=s,d.filepoolProvider=u,d.component=c.a.COMPONENT,d.displayDescription=!0,d}return p(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.canGetResource=this.resourceProvider.isGetResourceWSAvailable(),this.loadContent().then(function(){t.resourceProvider.logView(t.module.instance,t.module.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})})},t.prototype.invalidateContent=function(){return this.resourceProvider.invalidateContent(this.module.id,this.courseId)},t.prototype.fetchContent=function(e){var t=this;return this.courseProvider.loadModuleContents(this.module,this.courseId,null,!1,e).then(function(){return t.module.contents&&t.module.contents.length?t.canGetResource?t.resourceProvider.getResourceData(t.courseId,t.module.id).catch(function(){}):t.courseProvider.getModule(t.module.id,t.courseId).catch(function(){}):Promise.reject(t.utils.createFakeWSError("core.filenotfound",!0))}).then(function(e){if(e){t.description=e.intro||e.description;var n=t.textUtils.unserialize(e.displayoptions)||{};t.displayDescription=void 0===n.printintro||!!n.printintro,t.dataRetrieved.emit(e)}if(t.resourceHelper.isDisplayedInIframe(t.module)){var o,r=!1;return t.prefetchHandler.download(t.module,t.courseId).catch(function(e){r=!0,o=e}).then(function(){return t.resourceHelper.getIframeSrc(t.module).then(function(e){t.mode="iframe",t.src&&e.toString()==t.src.toString()?(t.src="",setTimeout(function(){t.src=e})):t.src=e,r&&t.appProvider.isOnline()&&t.showErrorDownloadingSomeFiles(o)})})}if(t.resourceHelper.isDisplayedEmbedded(t.module,e&&e.display))return t.mode="embedded",t.resourceHelper.getEmbeddedHtml(t.module,t.courseId).then(function(e){t.contentText=e,t.mode=t.contentText.length>0?"embedded":"external"});t.mode="external"}).finally(function(){t.fillContextMenu(e)})},t.prototype.open=function(){return _(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this.prefetchHandler.isDownloadable(this.module,this.courseId)];case 1:return e.sent()?[4,this.resourceHelper.isMainFileDownloadable(this.module)]:[3,3];case 2:if(e.sent())return[2,this.resourceHelper.openModuleFile(this.module,this.courseId)];e.label=3;case 3:return[2,this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(this.module.url)]}})})},t=h([Object(o.m)({selector:"addon-mod-resource-index",templateUrl:"addon-mod-resource-index.html"}),m("design:paramtypes",[o.C,c.a,s.a,r.a,d.a,f.a,l.a,a.a,i.a])],t)}(u.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(5),i=n(2),l=n(158),a=n(50),s=n(234),u=n(386),c=n(264),d=n(288),f=n(333),p=n(40),h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},v=function(e){function t(t,n,o,r,i,l,a,u,c,f){var p=e.call(this,t,o)||this;return p.scormProvider=n,p.content=o,p.scormHelper=r,p.scormOffline=i,p.scormSync=l,p.prefetchHandler=a,p.navCtrl=u,p.prefetchDelegate=c,p.utils=f,p.component=s.a.COMPONENT,p.moduleName="scorm",p.currentOrganization={},p.scormOptions={mode:s.a.MODENORMAL,newAttempt:!1},p.modeNormal=s.a.MODENORMAL,p.modeBrowser=s.a.MODEBROWSE,p.fetchContentDefaultError="addon.mod_scorm.errorgetscorm",p.syncEventName=d.a.AUTO_SYNCED,p.hasPlayed=!1,p.dataSent=!1,p}return h(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){t.scorm&&(t.skip&&t.open(),t.scormProvider.logView(t.scorm.id,t.scorm.name).then(function(){t.checkCompletion()}).catch(function(e){}))})},t.prototype.checkCompletion=function(){this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata)},t.prototype.downloadScormPackage=function(){var e=this;return this.downloading=!0,this.prefetchHandler.download(this.module,this.courseId,void 0,function(t){t&&(t.downloading?e.scorm.packagesize&&t.progress&&(e.percentage=(100*Number(t.progress.loaded/e.scorm.packagesize)).toFixed(1)):t.message?(e.progressMessage=t.message,e.percentage=void 0):e.percentage=t.progress&&t.progress.loaded&&t.progress.total?(100*Number(t.progress.loaded/t.progress.total)).toFixed(1):void 0)}).finally(function(){e.progressMessage=void 0,e.percentage=void 0,e.downloading=!1})},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.scormProvider.getScorm(this.courseId,this.module.id,this.module.url).then(function(e){o.scorm=e,o.dataRetrieved.emit(o.scorm),o.description=o.scorm.intro||o.description;var r=o.scormProvider.isScormUnsupported(o.scorm);if(o.errorMessage=r||"",!o.scorm.warningMessage){return(t?o.syncActivity(n).catch(function(){}):Promise.resolve()).catch(function(){}).then(function(){o.scormSync.getReadableSyncTime(o.scorm.id).then(function(e){o.syncTime=e});var e=[];return e.push(o.scormProvider.getAccessInformation(o.scorm.id).then(function(e){o.accessInfo=e})),e.push(o.scormProvider.getAttemptCount(o.scorm.id).then(function(e){return o.attempts=e,o.hasOffline=!!o.attempts.offline.length,o.scormHelper.determineAttemptToContinue(o.scorm,o.attempts)}).then(function(e){return o.lastAttempt=e.number,o.lastIsOffline=e.offline,o.attemptToContinue=o.lastAttempt!=o.attempts.lastAttempt.number?o.lastAttempt:void 0,o.scormProvider.isAttemptIncomplete(o.scorm.id,o.lastAttempt,o.lastIsOffline)}).then(function(e){var t=[];return o.scorm.incomplete=e,o.scorm.numAttempts=o.attempts.total,o.scorm.gradeMethodReadable=o.scormProvider.getScormGradeMethod(o.scorm),o.scorm.attemptsLeft=o.scormProvider.countAttemptsLeft(o.scorm,o.attempts.lastAttempt.number),(o.scorm.forcenewattempt==s.a.SCORM_FORCEATTEMPT_ALWAYS||o.scorm.forcenewattempt&&!o.scorm.incomplete)&&(o.scormOptions.newAttempt=!0),t.push(o.getReportedGrades()),t.push(o.fetchStructure()),o.scorm.packagesize||""!==o.errorMessage||t.push(o.scormProvider.calculateScormSize(o.scorm).then(function(e){o.scorm.packagesize=e})),t.push(o.setStatusListener()),Promise.all(t)})),Promise.all(e).then(function(){void 0===o.skip&&(o.skip=!o.hasOffline&&!o.errorMessage&&(!o.scorm.lastattemptlock||o.scorm.attemptsLeft>0)&&o.accessInfo.canskipview&&!o.accessInfo.canviewreport&&o.scorm.skipview>=s.a.SKIPVIEW_FIRST&&(o.scorm.skipview==s.a.SKIPVIEW_ALWAYS||0==o.lastAttempt))})})}}).finally(function(){o.fillContextMenu(e)})},t.prototype.fetchStructure=function(){var e=this;return this.scormProvider.getOrganizations(this.scorm.id).then(function(t){return e.organizations=t,e.currentOrganization.identifier||(e.currentOrganization.identifier=t.length?t[0].identifier:""),e.loadOrganizationToc(e.currentOrganization.identifier)})},t.prototype.getAttemptGrade=function(e,t,n){return this.scormProvider.getAttemptGrade(this.scorm,e,t).then(function(t){n[e]={number:e,grade:t}})},t.prototype.getReportedGrades=function(){var e=this,t=[],n={},o={};return this.attempts.online.forEach(function(o){-1==e.attempts.offline.indexOf(o)&&t.push(e.getAttemptGrade(o,!1,n))}),this.attempts.offline.forEach(function(n){t.push(e.getAttemptGrade(n,!0,o))}),Promise.all(t).then(function(){e.scorm.grade=e.scormProvider.calculateScormGrade(e.scorm,n),e.scorm.onlineAttempts=e.utils.objectToArray(n),e.scorm.offlineAttempts=e.utils.objectToArray(o),e.scorm.onlineAttempts.sort(function(e,t){return e.number-t.number}),e.scorm.offlineAttempts.sort(function(e,t){return e.number-t.number}),e.scorm.onlineAttempts.forEach(function(t){t.grade=e.scormProvider.formatGrade(e.scorm,t.grade)}),e.scorm.offlineAttempts.forEach(function(t){t.grade=e.scormProvider.formatGrade(e.scorm,t.grade)}),e.scorm.grade=e.scormProvider.formatGrade(e.scorm,e.scorm.grade)})},t.prototype.hasSyncSucceed=function(e){return(e.updated||this.dataSent)&&this.checkCompletion(),this.dataSent=!1,!0},t.prototype.ionViewDidEnter=function(){var t=this;e.prototype.ionViewDidEnter.call(this),this.hasPlayed&&(this.hasPlayed=!1,this.scormOptions.newAttempt=!1,setTimeout(function(){t.dataSentObserver&&t.dataSentObserver.off(),t.dataSentObserver=void 0,t.showLoadingAndRefresh(!0,!1)},500))},t.prototype.ionViewDidLeave=function(){var t=this;e.prototype.ionViewDidLeave.call(this),this.skip=!1,"AddonModScormPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0,this.dataSentObserver&&this.dataSentObserver.off(),this.dataSentObserver=this.eventsProvider.on(s.a.DATA_SENT_EVENT,function(e){e.scormId===t.scorm.id&&(t.dataSent=!0)},this.siteId))},t.prototype.invalidateContent=function(){var e=[];return e.push(this.scormProvider.invalidateScormData(this.courseId)),this.scorm&&e.push(this.scormProvider.invalidateAllScormData(this.scorm.id)),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return!(!e.updated||!this.scorm||e.scormId!=this.scorm.id)&&(this.checkCompletion(),!0)},t.prototype.loadOrganization=function(){var e=this;this.loadOrganizationToc(this.currentOrganization.identifier).catch(function(t){e.domUtils.showErrorModalDefault(t,e.fetchContentDefaultError,!0)})},t.prototype.loadOrganizationToc=function(e){var t=this;return this.scorm.displaycoursestructure?(this.loadingToc=!0,this.scormProvider.getOrganizationToc(this.scorm.id,this.lastAttempt,e,this.lastIsOffline).then(function(n){t.toc=t.scormProvider.formatTocToArray(n),t.toc.forEach(function(e){e.image=t.scormProvider.getScoStatusIcon(e,t.scorm.incomplete)}),t.organizations.forEach(function(n){n.identifier==e&&(t.currentOrganization.title=n.title)})}).finally(function(){t.loadingToc=!1})):Promise.resolve()},t.prototype.open=function(e,t){var n=this;if(e&&(e.preventDefault(),e.stopPropagation()),!this.downloading){var o=this.currentStatus==p.a.OUTDATED;o||this.currentStatus==p.a.NOT_DOWNLOADED?this.scormHelper.confirmDownload(this.scorm,o).then(function(){(o?n.scormProvider.invalidateAllScormData(n.scorm.id):Promise.resolve()).finally(function(){n.downloadScormPackage().then(function(){n.isDestroyed||n.openScorm(t)}).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,n.translate.instant("addon.mod_scorm.errordownloadscorm",{name:n.scorm.name}))})})}):this.openScorm(t)}},t.prototype.openScorm=function(e){this.navCtrl.push("AddonModScormPlayerPage",{scorm:this.scorm,mode:this.scormOptions.mode,newAttempt:!!this.scormOptions.newAttempt,organizationId:this.currentOrganization.identifier,scoId:e})},t.prototype.showStatus=function(e,t){var n=this;e==p.a.OUTDATED&&this.scorm?this.scormProvider.shouldDownloadMainFile(this.scorm,!0).then(function(e){n.statusMessage=e?"addon.mod_scorm.scormstatusoutdated":""}):e==p.a.NOT_DOWNLOADED?this.statusMessage="addon.mod_scorm.scormstatusnotdownloaded":e==p.a.DOWNLOADING?this.downloading||this.downloadScormPackage():this.statusMessage=""},t.prototype.sync=function(){var e=this;return this.scormSync.syncScorm(this.scorm).then(function(t){return!t.updated&&e.dataSent?e.scormSync.prefetchAfterUpdate(e.module,e.courseId).catch(function(){}).then(function(){return t}):t})},t=m([Object(o.m)({selector:"addon-mod-scorm-index",templateUrl:"addon-mod-scorm-index.html"}),g(2,Object(o.N)()),_("design:paramtypes",[o.C,s.a,r.f,u.a,c.a,d.a,f.a,r.s,a.a,i.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(158),l=n(300),a=n(334),s=n(301),u=n(302),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},h=function(e){function t(t,n,o,r,i,a){var s=e.call(this,t,o)||this;return s.surveyProvider=n,s.surveyHelper=r,s.surveyOffline=i,s.surveySync=a,s.component=l.a.COMPONENT,s.moduleName="survey",s.answers={},s.syncEventName=u.a.AUTO_SYNCED,s}return c(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){t.surveyProvider.logView(t.survey.id,t.survey.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.surveyProvider.invalidateSurveyData(this.courseId)),this.survey&&e.push(this.surveyProvider.invalidateQuestions(this.survey.id)),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return!(!this.survey||e.surveyId!=this.survey.id||e.userId!=this.userId)},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.surveyProvider.getSurvey(this.courseId,this.module.id).then(function(e){if(o.survey=e,o.description=e.intro,o.dataRetrieved.emit(e),t)return o.syncActivity(n).then(function(e){if(e)return o.surveyProvider.getSurvey(o.courseId,o.module.id).then(function(e){o.survey=e})})}).then(function(){return o.surveyOffline.hasAnswers(o.survey.id)}).then(function(e){if(o.hasOffline=!o.survey.surveydone&&e,!o.survey.surveydone&&!o.hasOffline)return o.fetchQuestions()}).finally(function(){o.fillContextMenu(e)})},t.prototype.fetchQuestions=function(){var e=this;return this.surveyProvider.getQuestions(this.survey.id).then(function(t){e.questions=e.surveyHelper.formatQuestions(t),e.questions.forEach(function(t){if(t.name){e.answers[t.name]=t.required?-1:t.multiArray&&0===t.multiArray.length&&0===t.type?"":"0"}t.multiArray&&!t.multiArray.length&&0===t.parent&&t.type>0&&(t.optionsArray=t.optionsArray.map(function(t){return e.textUtils.cleanTags(t)}))})})},t.prototype.isValidResponse=function(){var e=this;return!this.questions.some(function(t){return t.required&&t.name&&(0===t.type?""==e.answers[t.name]:-1===parseInt(e.answers[t.name],10))})},t.prototype.submit=function(){var e=this;this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var t=[],n=e.domUtils.showModalLoading("core.sending",!0);for(var o in e.answers)t.push({key:o,value:e.answers[o]});return e.surveyProvider.submitAnswers(e.survey.id,e.survey.name,e.courseId,t).then(function(t){return t&&e.isPrefetched()?e.surveySync.prefetchAfterUpdate(e.module,e.courseId).then(function(){e.showLoadingAndFetch(!1,!1)}).catch(function(t){return e.showLoadingAndRefresh(!1)}):e.showLoadingAndRefresh(!1)}).finally(function(){n.dismiss()})}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.mod_survey.cannotsubmitsurvey",!0)})},t.prototype.sync=function(){return this.surveySync.syncSurvey(this.survey.id,this.userId)},t.prototype.hasSyncSucceed=function(e){return e.answersSent},t=d([Object(o.m)({selector:"addon-mod-survey-index",templateUrl:"addon-mod-survey-index.html"}),p(2,Object(o.N)()),f("design:paramtypes",[o.C,l.a,r.f,a.a,s.a,u.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(1),i=n(66),l=n(13),a=n(268),s=n(303),u=n(335),c=n(40),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t)||this;return a.urlProvider=n,a.courseProvider=o,a.urlHelper=r,a.mimeUtils=i,a.sitesProvider=l,a.component=s.a.COMPONENT,a.shouldEmbed=!1,a.shouldIframe=!1,a.isImage=!1,a.isAudio=!1,a.isVideo=!1,a.isOther=!1,a.displayDescription=!0,a}return d(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.canGetUrl=this.urlProvider.isGetUrlWSAvailable(),this.loadContent().then(function(){!(t.shouldIframe||t.shouldEmbed&&t.isOther)&&(t.shouldIframe||t.shouldEmbed&&t.isOther)||t.logView()})},t.prototype.invalidateContent=function(){return this.urlProvider.invalidateContent(this.module.id,this.courseId)},t.prototype.fetchContent=function(e){var t,n,o=this,r=this.canGetUrl;return(r?this.urlProvider.getUrl(this.courseId,this.module.id):Promise.reject(null)).catch(function(){return r=!1,o.courseProvider.getModule(o.module.id,o.courseId,void 0,!1,!1,void 0,"url")}).then(function(i){if(n=i,o.name=n.name||o.module.name,o.description=n.intro||n.description,o.dataRetrieved.emit(n),r&&n.displayoptions){var l=o.textUtils.unserialize(n.displayoptions);o.displayDescription=void 0===l.printintro||!!l.printintro}return r?(t=o.module,o.courseProvider.loadModuleContents(t,o.courseId,void 0,!1,e,void 0,"url")):(t=n,n.contents.length?void 0:Promise.reject(null))}).then(function(){if(o.url=t.contents&&t.contents[0]&&t.contents[0].fileurl?t.contents[0].fileurl:void 0,r)return o.calculateDisplayOptions(n)})},t.prototype.calculateDisplayOptions=function(e){var t=this,n=this.urlProvider.getFinalDisplayType(e);if(this.shouldEmbed=n==c.a.RESOURCELIB_DISPLAY_EMBED,this.shouldIframe=n==c.a.RESOURCELIB_DISPLAY_FRAME,this.shouldEmbed){var o=this.mimeUtils.guessExtensionFromUrl(e.externalurl);this.mimetype=this.mimeUtils.getMimeType(o),this.isImage=this.mimeUtils.isExtensionInGroup(o,["web_image"]),this.isAudio=this.mimeUtils.isExtensionInGroup(o,["web_audio"]),this.isVideo=this.mimeUtils.isExtensionInGroup(o,["web_video"]),this.isOther=!this.isImage&&!this.isAudio&&!this.isVideo}if(this.shouldIframe||this.shouldEmbed&&!this.isImage&&!this.isAudio&&!this.isVideo){var r=this.sitesProvider.getCurrentSite();if(r&&r.containsUrl(this.url))return r.getAutoLoginUrl(this.url,!1).then(function(e){t.url=e})}return Promise.resolve()},t.prototype.logView=function(){var e=this;return this.urlProvider.logView(this.module.instance,this.module.name).then(function(){e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata)}).catch(function(){})},t.prototype.go=function(){this.logView(),this.urlHelper.open(this.url)},t=f([Object(o.m)({selector:"addon-mod-url-index",templateUrl:"addon-mod-url-index.html"}),p("design:paramtypes",[o.C,s.a,l.a,u.a,i.a,r.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(5),i=n(71),l=n(2),a=n(158),s=n(46),u=n(235),c=n(289),d=n(290),f=n(668),p=n(163),h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},v=function(e){function t(t,n,o,r,i,l,a,s,c,f,p,h){var m=e.call(this,t,o)||this;return m.wikiProvider=n,m.content=o,m.wikiOffline=r,m.wikiSync=i,m.navCtrl=l,m.utils=a,m.groupsProvider=s,m.userProvider=c,m.popoverCtrl=f,m.tagProvider=p,m.modalCtrl=h,m.component=u.a.COMPONENT,m.moduleName="wiki",m.groupWiki=!1,m.canEdit=!1,m.pageStr="",m.loadedSubwikis=[],m.subwikiData={subwikiSelected:0,userSelected:0,groupSelected:0,subwikis:[],count:0},m.syncEventName=d.a.AUTO_SYNCED,m.hasEdited=!1,m.pageStr=m.translate.instant("addon.mod_wiki.wikipage"),m.tagsEnabled=m.tagProvider.areTagsAvailableInSite(),m}return h(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.isMainPage=!this.pageId&&!this.pageTitle,this.currentPage=this.pageId,this.loadContent(!1,!0).then(function(){t.wiki&&(t.pageId?t.wikiProvider.logPageView(t.pageId,t.wiki.id,t.wiki.name).catch(function(e){}):t.wikiProvider.logView(t.wiki.id,t.wiki.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(e){}))}).finally(function(){"map"==t.action&&t.openMap()}),this.manualSyncObserver=this.eventsProvider.on(d.a.MANUAL_SYNCED,function(e){if(e&&t.wiki&&e.wikiId==t.wiki.id){if(t.ignoreManualSyncEvent)return void(t.ignoreManualSyncEvent=!1);t.currentSubwiki&&t.checkPageCreatedOrDiscarded(e.subwikis[t.currentSubwiki.id]),t.pageWarning||t.showLoadingAndFetch(!1,!1)}},this.siteId)},t.prototype.checkPageCreatedOrDiscarded=function(e){var t=this;if(!this.currentPage&&e){var n=e.created.find(function(e){return e.title==t.pageTitle});if(n)this.currentPage=n.pageId,this.pageIsOffline=!1;else{var o=e.discarded.find(function(e){return e.title==t.pageTitle});o&&(this.pageWarning=o.warning,this.pageContent="",this.pageIsOffline=!1,this.hasOffline=!1)}}},t.prototype.fetchContent=function(e,t,n){var o=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);return(this.module.id?this.wikiProvider.getWiki(this.courseId,this.module.id):this.wikiProvider.getWikiById(this.courseId,this.wikiId)).then(function(e){if(o.wiki=e,o.dataRetrieved.emit(o.wiki),t)return o.syncActivity(n).catch(function(){})}).then(function(){if(o.pageWarning)return Promise.reject(null);return(o.module.id?Promise.resolve(o.module):o.courseProvider.getModule(o.wiki.coursemodule,o.wiki.course,void 0,!0)).then(function(e){return o.module=e,o.description=o.wiki.intro||o.module.description,o.externalUrl=o.module.url,o.componentId=o.module.id,o.groupsProvider.getActivityGroupInfo(o.wiki.coursemodule).then(function(e){return o.fetchSubwikis(o.wiki.id).then(function(){var t=o.wikiProvider.getSubwikiList(o.wiki.id);if(!t)return o.createSubwikiList(e.groups);o.subwikiData.count=t.count,o.setSelectedWiki(o.subwikiId,o.userId,o.groupId),o.isAnySubwikiSelected()||o.setSelectedWiki(t.subwikiSelected,t.userSelected,t.groupSelected),o.subwikiData.subwikis=t.subwikis})}).then(function(){if(!o.isAnySubwikiSelected()||o.subwikiData.count<=0)return Promise.reject(o.translate.instant("addon.mod_wiki.errornowikiavailable"))}).then(function(){return o.fetchWikiPage()})})}).finally(function(){o.fillContextMenu(e)}).catch(function(e){if(!o.pageWarning)return Promise.reject(e)})},t.prototype.fetchPageContents=function(e){var t=this;if(!e){var n=this.pageTitle||this.wiki.firstpagetitle;return this.wikiOffline.getNewPage(n,this.currentSubwiki.id,this.currentSubwiki.wikiid,this.currentSubwiki.userid,this.currentSubwiki.groupid).then(function(e){return t.pageIsOffline=!0,t.newPageObserver||(t.newPageObserver=t.eventsProvider.on(u.a.PAGE_CREATED_EVENT,function(e){e.subwikiId==t.currentSubwiki.id&&e.pageTitle==n&&(t.currentPage=e.pageId,t.showLoadingAndFetch(!0,!1).then(function(){t.currentPage&&t.wikiProvider.logPageView(t.currentPage,t.wiki.id,t.wiki.name).catch(function(){})}),t.newPageObserver.off(),t.newPageObserver=void 0)},t.sitesProvider.getCurrentSiteId())),e}).catch(function(){})}return this.pageIsOffline=!1,this.wikiProvider.getPageContents(e)},t.prototype.fetchSubwikiPages=function(e){var t,n=this;return this.wikiProvider.getSubwikiPages(e.wikiid,e.groupid,e.userid).then(function(o){if(t=o,!n.currentPage&&!n.pageTitle){var r=t.find(function(e){return e.firstpage});r&&(n.currentPage=r.id)}return n.wikiOffline.getSubwikiNewPages(e.id,e.wikiid,e.userid,e.groupid)}).then(function(e){if(!n.currentPage){var o=n.pageTitle?n.pageTitle:n.wiki.firstpagetitle;e.some(function(e){return e.title==o})&&(n.pageTitle=o)}if(n.subwikiPages=n.wikiProvider.sortPagesByTitle(t.concat(e)),!n.currentPage&&!n.pageTitle&&n.subwikiPages.length>0)return Promise.reject(null)})},t.prototype.fetchSubwikis=function(e){var t=this;return this.wikiProvider.getSubwikis(e).then(function(e){return t.loadedSubwikis=e,t.wikiOffline.subwikisHaveOfflineData(e).then(function(e){t.hasOffline=e})})},t.prototype.fetchWikiPage=function(){var e=this;return this.currentSubwiki=this.loadedSubwikis.find(function(t){return e.isSubwikiSelected(t)}),this.currentSubwiki?(this.setSelectedWiki(this.currentSubwiki.id,this.currentSubwiki.userid,this.currentSubwiki.groupid),this.fetchSubwikiPages(this.currentSubwiki).then(function(){return e.canEdit=e.currentSubwiki.canedit,e.fetchPageContents(e.currentPage).then(function(t){t&&(e.dataRetrieved.emit(t.title),e.setSelectedWiki(t.subwikiid,t.userid,t.groupid),e.pageContent=e.replaceEditLinks(t.cachedcontent),e.canEdit=t.caneditpage,e.currentPageObj=t)})})):Promise.reject(null)},t.prototype.getWikiHomeView=function(){if(this.wiki.id)for(var e=this.navCtrl.getViews(),t=e.length-2;t>=0;t--){var n=e[t];if("AddonModWikiIndexPage"!=n.component.name){if(t==e.length-2)return;return e[t+1]}var o=n.data.wikiId?n.data.wikiId:n.data.module.instance;if(!o||o!=this.wiki.id)return e[t+1]}},t.prototype.goToCreateFirstPage=function(){this.navCtrl.push("AddonModWikiEditPage",{module:this.module,courseId:this.courseId,pageTitle:this.wiki.firstpagetitle,wikiId:this.currentSubwiki.wikiid,userId:this.currentSubwiki.userid,groupId:this.currentSubwiki.groupid})},t.prototype.goToEditPage=function(){if(this.canEdit)if(this.currentPageObj){var e={module:this.module,courseId:this.courseId,pageId:this.currentPageObj.id,pageTitle:this.currentPageObj.title,subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(e.wikiId=this.currentSubwiki.wikiid,e.userId=this.currentSubwiki.userid,e.groupId=this.currentSubwiki.groupid),this.navCtrl.push("AddonModWikiEditPage",e)}else this.currentSubwiki&&this.goToCreateFirstPage()},t.prototype.goToNewPage=function(){if(this.canEdit)if(this.currentPageObj){var e={module:this.module,courseId:this.courseId,subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(e.wikiId=this.currentSubwiki.wikiid,e.userId=this.currentSubwiki.userid,e.groupId=this.currentSubwiki.groupid),this.navCtrl.push("AddonModWikiEditPage",e)}else this.currentSubwiki&&this.goToCreateFirstPage()},t.prototype.goToPage=function(e){var t=this;if(e.id){if(this.currentPage!=e.id)return void this.fetchPageContents(e.id).then(function(e){t.navCtrl.push("AddonModWikiIndexPage",{module:t.module,courseId:t.courseId,pageTitle:e.title,pageId:e.id,wikiId:e.wikiid,subwikiId:e.subwikiid})})}else if(this.currentPage||!this.pageTitle||e.title!=this.pageTitle)return void this.navCtrl.push("AddonModWikiIndexPage",{module:this.module,courseId:this.courseId,pageTitle:e.title,wikiId:this.wiki.id,subwikiId:e.subwikiid})},t.prototype.openMap=function(e){var t=this,n=this.modalCtrl.create("AddonModWikiMapPage",{pages:this.subwikiPages,selected:this.currentPageObj&&this.currentPageObj.id,homeView:this.getWikiHomeView(),moduleId:this.module.id,courseId:this.courseId},{cssClass:"core-modal-lateral",showBackdrop:!0,enableBackdropDismiss:!0,enterAnimation:"core-modal-lateral-transition",leaveAnimation:"core-modal-lateral-transition"});n.onDidDismiss(function(e){e&&("home"==e.type?t.navCtrl.popTo(e.goto):t.goToPage(e.goto))}),n.present({ev:e})},t.prototype.goToSubwiki=function(e,t,n,o){(e>0||o)&&(e==this.currentSubwiki.id&&t==this.currentSubwiki.userid&&n==this.currentSubwiki.groupid||this.navCtrl.push("AddonModWikiIndexPage",{module:this.module,courseId:this.courseId,wikiId:this.wiki.id,subwikiId:e,userId:t,groupId:n}))},t.prototype.isAnySubwikiSelected=function(){return this.subwikiData.subwikiSelected>0||this.subwikiData.userSelected>0||this.subwikiData.groupSelected>0},t.prototype.isSubwikiSelected=function(e){var t=parseInt(e.id,10)||0;if(t>0&&this.subwikiData.subwikiSelected>0)return t==this.subwikiData.subwikiSelected;var n=parseInt(e.userid,10)||0,o=parseInt(e.groupid,10)||0;return n==this.subwikiData.userSelected&&o==this.subwikiData.groupSelected},t.prototype.replaceEditLinks=function(e){if((e=e.trim()).length>0){var t=this.textUtils.concatenatePaths(this.sitesProvider.getCurrentSite().getURL(),"/mod/wiki/edit.php");e=e.replace(/href="edit\.php/g,'href="'+t)}return e},t.prototype.setSelectedWiki=function(e,t,n){this.subwikiData.subwikiSelected=this.wikiOffline.convertToPositiveNumber(e),this.subwikiData.userSelected=this.wikiOffline.convertToPositiveNumber(t),this.subwikiData.groupSelected=this.wikiOffline.convertToPositiveNumber(n)},t.prototype.hasSyncSucceed=function(e){return e.wikiId=this.wiki.id,e.updated&&(this.ignoreManualSyncEvent=!0,this.eventsProvider.trigger(d.a.MANUAL_SYNCED,e)),this.currentSubwiki&&this.checkPageCreatedOrDiscarded(e.subwikis[this.currentSubwiki.id]),e.updated},t.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.hasEdited&&(this.hasEdited=!1,this.showLoadingAndRefresh(!0,!1))},t.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),"AddonModWikiEditPage"==this.navCtrl.getActive().component.name&&(this.hasEdited=!0)},t.prototype.invalidateContent=function(){var e=[];return e.push(this.wikiProvider.invalidateWikiData(this.courseId)),this.wiki&&(e.push(this.wikiProvider.invalidateSubwikis(this.wiki.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.wiki.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.wiki.coursemodule))),this.currentSubwiki&&(e.push(this.wikiProvider.invalidateSubwikiPages(this.currentSubwiki.wikiid)),e.push(this.wikiProvider.invalidateSubwikiFiles(this.currentSubwiki.wikiid))),this.currentPage&&e.push(this.wikiProvider.invalidatePage(this.currentPage)),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return this.currentSubwiki&&e.subwikiId==this.currentSubwiki.id&&e.wikiId==this.currentSubwiki.wikiid&&e.userId==this.currentSubwiki.userid&&e.groupId==this.currentSubwiki.groupid&&(this.isCurrentView&&e.warnings&&e.warnings.length&&this.domUtils.showErrorModal(e.warnings[0]),this.checkPageCreatedOrDiscarded(e)),!this.pageWarning},t.prototype.showSubwikiPicker=function(e){var t=this,n=this.popoverCtrl.create(f.a,{subwikis:this.subwikiData.subwikis,currentSubwiki:this.currentSubwiki});n.onDidDismiss(function(e){e&&t.goToSubwiki(e.id,e.userid,e.groupid,e.canedit)}),n.present({ev:e})},t.prototype.sync=function(){return this.wikiSync.syncWiki(this.wiki.id,this.courseId,this.wiki.coursemodule)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.manualSyncObserver&&this.manualSyncObserver.off(),this.newPageObserver&&this.newPageObserver.off()},t.prototype.createSubwikiList=function(e){var t=this,n=[],o=[],r=[],i=!1,l=!1,a=!1;return this.subwikiData.subwikis=[],this.setSelectedWiki(this.subwikiId,this.userId,this.groupId),this.subwikiData.count=0,e.length>0&&(r=e.map(function(e){return e.id})),this.loadedSubwikis.forEach(function(s){var u=parseInt(s.groupid,10),c=parseInt(s.userid,10),d="";if(0==u&&0==c)i||(n.unshift({name:t.translate.instant("core.allparticipants"),id:s.id,userid:c,groupid:u,groupLabel:"",canedit:s.canedit}),i=!0);else{if(0!=u&&r.length>0){var f=r.indexOf(u);f>-1&&(d=e[f].name)}else d=t.translate.instant("addon.mod_wiki.notingroup");0!=c?(o.push(t.userProvider.getProfile(c,t.courseId,!0).then(function(e){n.push({name:e.fullname,id:s.id,userid:c,groupid:u,groupLabel:d,canedit:s.canedit})})),a||0==u||(a=!0)):(n.push({name:d,id:s.id,userid:c,groupid:u,groupLabel:d,canedit:s.canedit}),l=!0)}}),Promise.all(o).then(function(){t.fillSubwikiData(n,l,a)})},t.prototype.fillSubwikiData=function(e,t,n){var o,r=this,i=-1;if(e.sort(function(e,t){return e.groupid-t.groupid}),this.groupWiki=t,this.subwikiData.count=e.length,(!this.subwikiId||!this.userId&&!this.groupId)&&!this.isAnySubwikiSelected()&&e.length>0){var l=void 0,a=void 0,s=void 0;for(var u in e){var c=e[u];if(c.canedit){var d=void 0;if(c.userid>0?this.currentUserId==c.userid&&(d=c.id):c.groupid>0?t&&(d=c.id):c.id>0&&(d=c.id),void 0!==d){if(d>0){s=u;break}void 0===a&&(a=u)}else void 0===l&&(l=u)}}var f=e[void 0!==s?s:void 0!==a?a:void 0!==l?l:0];void 0!==f&&this.setSelectedWiki(f.id,f.userid,f.groupid)}if(n)e.forEach(function(e){e.groupid!==i&&(i=e.groupid,r.subwikiData.subwikis.push(o={label:e.groupLabel,subwikis:[]})),o.subwikis.push(e)});else if(t){var p={label:"",subwikis:[]},h={label:this.translate.instant("core.mygroups"),subwikis:[]},m={label:this.translate.instant("core.othergroups"),subwikis:[]};e.forEach(function(e){void 0===e.canedit?p.subwikis.push(e):e.canedit?h.subwikis.push(e):m.subwikis.push(e)}),p.subwikis.length>0&&this.subwikiData.subwikis.push(p),h.subwikis.length>0&&this.subwikiData.subwikis.push(h),m.subwikis.length>0&&this.subwikiData.subwikis.push(m)}else this.subwikiData.subwikis.push({label:"",subwikis:e});this.wikiProvider.setSubwikiList(this.wiki.id,this.subwikiData.subwikis,this.subwikiData.count,this.subwikiData.subwikiSelected,this.subwikiData.userSelected,this.subwikiData.groupSelected)},m([Object(o.D)(),_("design:type",String)],t.prototype,"action",void 0),m([Object(o.D)(),_("design:type",Number)],t.prototype,"pageId",void 0),m([Object(o.D)(),_("design:type",String)],t.prototype,"pageTitle",void 0),m([Object(o.D)(),_("design:type",Number)],t.prototype,"wikiId",void 0),m([Object(o.D)(),_("design:type",Number)],t.prototype,"subwikiId",void 0),m([Object(o.D)(),_("design:type",Number)],t.prototype,"userId",void 0),m([Object(o.D)(),_("design:type",Number)],t.prototype,"groupId",void 0),t=m([Object(o.m)({selector:"addon-mod-wiki-index",templateUrl:"addon-mod-wiki-index.html"}),g(2,Object(o.N)()),_("design:paramtypes",[o.C,u.a,r.f,c.a,d.a,r.s,l.a,i.a,s.a,r.w,p.a,r.q])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(71),l=n(2),a=n(158),s=n(175),u=n(202),c=n(291),d=n(189),f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},_=function(e){function t(t,n,o,r,i,l,a,u,d,f,p){var h=e.call(this,t,o)||this;return h.workshopProvider=n,h.workshopOffline=r,h.groupsProvider=i,h.navCtrl=l,h.modalCtrl=a,h.utils=u,h.workshopHelper=f,h.workshopSync=p,h.group=0,h.component=s.a.COMPONENT,h.moduleName="workshop",h.page=0,h.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},h.canSubmit=!1,h.showSubmit=!1,h.canAssess=!1,h.hasNextPage=!1,h.workshopPhases={PHASE_SETUP:s.a.PHASE_SETUP,PHASE_SUBMISSION:s.a.PHASE_SUBMISSION,PHASE_ASSESSMENT:s.a.PHASE_ASSESSMENT,PHASE_EVALUATION:s.a.PHASE_EVALUATION,PHASE_CLOSED:s.a.PHASE_CLOSED},h.offlineSubmissions=[],h.syncEventName=c.a.AUTO_SYNCED,h.obsSubmissionChanged=h.eventsProvider.on(s.a.SUBMISSION_CHANGED,function(e){h.eventReceived(e)},h.siteId),h.obsAssessmentSaved=h.eventsProvider.on(s.a.ASSESSMENT_SAVED,function(e){h.eventReceived(e)},h.siteId),h.appResumeSubscription=d.resume.subscribe(function(){h.showLoadingAndRefresh(!0)}),h.syncObserver=h.eventsProvider.on(c.a.AUTO_SYNCED,function(e){h.eventReceived(e)},h.siteId),h}return f(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){t.workshop&&t.workshopProvider.logView(t.workshop.id,t.workshop.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(e){})})},t.prototype.eventReceived=function(e){(this.workshop&&this.workshop.id===e.workshopId||e.cmId===this.module.id)&&(this.showLoadingAndRefresh(!0),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},t.prototype.invalidateContent=function(){var e=[];return e.push(this.workshopProvider.invalidateWorkshopData(this.courseId)),this.workshop&&(e.push(this.workshopProvider.invalidateWorkshopAccessInformationData(this.workshop.id)),e.push(this.workshopProvider.invalidateUserPlanPhasesData(this.workshop.id)),this.canSubmit&&e.push(this.workshopProvider.invalidateSubmissionsData(this.workshop.id)),this.access.canviewallsubmissions&&(e.push(this.workshopProvider.invalidateGradeReportData(this.workshop.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.workshop.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.workshop.coursemodule))),this.canAssess&&e.push(this.workshopProvider.invalidateReviewerAssesmentsData(this.workshop.id)),e.push(this.workshopProvider.invalidateGradesData(this.workshop.id)),e.push(this.workshopProvider.invalidateWorkshopWSData(this.workshop.id))),Promise.all(e)},t.prototype.isRefreshSyncNeeded=function(e){return!(!this.workshop||e.workshopId!=this.workshop.id)&&(this.domUtils.scrollToTop(this.content),!0)},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.workshopProvider.getWorkshop(this.courseId,this.module.id).then(function(e){if(o.workshop=e,o.description=e.intro||e.description,o.dataRetrieved.emit(e),t)return o.syncActivity(n)}).then(function(){return o.workshopProvider.getWorkshopAccessInformation(o.workshop.id)}).then(function(e){if(o.access=e,e.canviewallsubmissions)return o.groupsProvider.getActivityGroupInfo(o.workshop.coursemodule).then(function(e){o.groupInfo=e,o.group=o.groupsProvider.validateGroupId(o.group,e)})}).then(function(){return o.workshopProvider.getUserPlanPhases(o.workshop.id)}).then(function(e){return o.phases=e,e[o.workshop.phase].tasks.forEach(function(e){e.link||"examples"!=e.code&&"prepareexamples"!=e.code||(e.link=o.externalUrl)}),o.workshopOffline.hasWorkshopOfflineData(o.workshop.id).then(function(e){if(o.hasOffline=e,e)return o.workshopOffline.getSubmissions(o.workshop.id).then(function(e){o.offlineSubmissions=e});o.offlineSubmissions=[]})}).then(function(){return o.setPhaseInfo()}).finally(function(){o.fillContextMenu(e)})},t.prototype.gotoSubmissionsPage=function(e){var t=this;return this.workshopProvider.getGradesReport(this.workshop.id,this.group,e).then(function(n){var o=n&&n.grades&&n.grades.length||0;t.page=e,t.hasNextPage=o>=s.a.PER_PAGE&&(t.page+1)*s.a.PER_PAGE<n.totalcount,t.grades=n.grades||[],t.grades.forEach(function(e){var n=t.workshopHelper.filterSubmissionActions(t.offlineSubmissions,e.submissionid||!1);return e=t.workshopHelper.applyOfflineData(e,n),t.workshopHelper.applyOfflineData(e,n).then(function(t){e=t})})})},t.prototype.runTask=function(e){"submit"==e.code?this.gotoSubmit():e.link&&this.utils.openInBrowser(e.link)},t.prototype.gotoSubmit=function(){if(this.canSubmit&&(this.access.creatingsubmissionallowed&&!this.submission||this.access.modifyingsubmissionallowed&&this.submission)){this.navCtrl.push("AddonModWorkshopEditSubmissionPage",{module:this.module,access:this.access,courseId:this.courseId,submissionId:this.submission&&this.submission.id})}},t.prototype.viewPhaseInfo=function(){var e=this;if(this.phases){var t=this.modalCtrl.create("AddonModWorkshopPhaseInfoPage",{phases:this.utils.objectToArray(this.phases),workshopPhase:this.workshop.phase,externalUrl:this.externalUrl,showSubmit:this.showSubmit});t.onDidDismiss(function(t){t&&e.gotoSubmit()}),t.present()}},t.prototype.setGroup=function(e){return this.group=e,this.gotoSubmissionsPage(0)},t.prototype.setPhaseInfo=function(){var e=this;this.submission=!1,this.canAssess=!1,this.assessments=!1,this.userGrades=!1,this.publishedSubmissions=!1,this.canSubmit=this.workshopHelper.canSubmit(this.workshop,this.access,this.phases[s.a.PHASE_SUBMISSION].tasks),this.showSubmit=this.workshop.phase==s.a.PHASE_SUBMISSION&&this.canSubmit&&(this.access.creatingsubmissionallowed&&!this.submission||this.access.modifyingsubmissionallowed&&this.submission);var t=[];this.canSubmit&&t.push(this.workshopHelper.getUserSubmission(this.workshop.id).then(function(t){var n=e.workshopHelper.filterSubmissionActions(e.offlineSubmissions,t.id||!1);return e.workshopHelper.applyOfflineData(t,n).then(function(t){e.submission=t})})),this.access.canviewallsubmissions&&this.workshop.phase>=s.a.PHASE_SUBMISSION&&t.push(this.gotoSubmissionsPage(this.page));var n=Promise.resolve();return this.workshop.phase>=s.a.PHASE_ASSESSMENT&&(this.canAssess=this.workshopHelper.canAssess(this.workshop,this.access),this.canAssess&&(n=this.workshopHelper.getReviewerAssessments(this.workshop.id).then(function(t){var n=[];return t.forEach(function(t){t.strategy=e.workshop.strategy,e.hasOffline&&n.push(e.workshopOffline.getAssessment(e.workshop.id,t.id).then(function(e){t.offline=!0,t.timemodified=Math.floor(e.timemodified/1e3)}).catch(function(){}))}),Promise.all(n).then(function(){e.assessments=t})}),t.push(n))),this.workshop.phase==s.a.PHASE_CLOSED&&(t.push(this.workshopProvider.getGrades(this.workshop.id).then(function(t){e.userGrades=!(!t.submissionlongstrgrade&&!t.assessmentlongstrgrade)&&t})),this.access.canviewpublishedsubmissions&&t.push(n.then(function(){return e.workshopProvider.getSubmissions(e.workshop.id).then(function(t){e.publishedSubmissions=t.filter(function(t){return!!t.published&&(e.assessments.forEach(function(n){t.reviewedby=[],n.submissionid==t.id&&t.reviewedby.push(e.workshopHelper.realGradeValue(e.workshop,n))}),!0)})})}))),Promise.all(t)},t.prototype.sync=function(){return this.workshopSync.syncWorkshop(this.workshop.id)},t.prototype.hasSyncSucceed=function(e){return e.updated},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.obsSubmissionChanged&&this.obsSubmissionChanged.off(),this.obsAssessmentSaved&&this.obsAssessmentSaved.off(),this.appResumeSubscription&&this.appResumeSubscription.unsubscribe()},p([Object(o.D)(),h("design:type",Object)],t.prototype,"group",void 0),t=p([Object(o.m)({selector:"addon-mod-workshop-index",templateUrl:"addon-mod-workshop-index.html"}),m(2,Object(o.N)()),h("design:paramtypes",[o.C,s.a,r.f,d.a,i.a,r.s,r.q,l.a,r.v,u.a,c.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(256),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.notificationsProvider=e,this.sitesProvider=t}return e.prototype.getNotifications=function(e,t,n,o,r,l){var a=this;return void 0===n&&(n=!0),e=e||[],t=t||i.a.LIST_LIMIT,l=l||this.sitesProvider.getCurrentSiteId(),this.notificationsProvider.isPopupAvailable(l).then(function(i){if(i)return a.notificationsProvider.getPopupNotifications(e.length,t,n,o,r,l);var s=e.reduce(function(e,t){return e+(t.read?0:1)},0);return a.notificationsProvider.getUnreadNotifications(s,t,n,o,r,l).then(function(i){var u;if(i.length<t){u=a.notificationsProvider.getReadNotifications(e.length-s,t-i.length,n,o,r,l).then(function(e){return i.concat(e)}).catch(function(e){return i.length>0?i:Promise.reject(e)})}else u=Promise.resolve(i);return u.then(function(e){return{notifications:e,canLoadMore:e.length>=t}})})})},e=l([Object(o.A)(),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(6),i=n(1),l=n(148),a=n(10),s=n(388),u=n(153),c=n(9),d=n(11),f=n(24),p=n(2),h=n(3),m=n(81),_=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e){function t(t,n,o,r,i,l,a,s,u,c,d){var f=e.call(this,"CoreCommentsSync",t,n,o,r,i,l,d)||this;return f.commentsOffline=a,f.utils=s,f.eventsProvider=u,f.commentsProvider=c,f}return _(t,e),n=t,t.prototype.syncAllComments=function(e,t){return this.syncOnSites("all comments",this.syncAllCommentsFunc.bind(this),[t],e)},t.prototype.syncAllCommentsFunc=function(e,t){var o=this;return this.commentsOffline.getAllComments(e).then(function(r){r.forEach(function(e){e.syncId=o.getSyncId(e.contextlevel,e.instanceid,e.component,e.itemid,e.area)});var i=(r=o.utils.uniqueArray(r,"syncId")).map(function(r){return(t?o.syncComments(r.contextlevel,r.instanceid,r.component,r.itemid,r.area,e):o.syncCommentsIfNeeded(r.contextlevel,r.instanceid,r.component,r.itemid,r.area,e)).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{contextLevel:r.contextlevel,instanceId:r.instanceid,componentName:r.component,itemId:r.itemid,area:r.area,warnings:t},e)})});return Promise.all(i)})},t.prototype.syncCommentsIfNeeded=function(e,t,n,o,r,i){var l=this;void 0===r&&(r="");var a=this.getSyncId(e,t,n,o,r);return this.isSyncNeeded(a,i).then(function(a){if(a)return l.syncComments(e,t,n,o,r,i)})},t.prototype.syncComments=function(e,t,n,o,r,i){var l=this;void 0===r&&(r=""),i=i||this.sitesProvider.getCurrentSiteId();var a=this.getSyncId(e,t,n,o,r);if(this.isSyncing(a,i))return this.getOngoingSync(a,i);this.logger.debug("Try to sync comments "+a);var s=[],c=this.commentsOffline.getComments(e,t,n,o,r,i).then(function(a){if(a.length){if(!l.appProvider.isOnline())return Promise.reject(l.translate.instant("core.networkerrormsg"));var c=[],d=[],f=[],p=0;return a.forEach(function(a){a.commentid?f.push(a.commentid):d.push(l.commentsProvider.addCommentOnline(a.content,e,t,n,o,r,i).then(function(a){return p++,l.commentsOffline.removeComment(e,t,n,o,r,i)}))}),f.length>0&&d.push(l.commentsProvider.deleteCommentsOnline(f,e,t,n,o,r,i).then(function(a){return p--,l.commentsOffline.removeDeletedComments(e,t,n,o,r,i)})),Promise.all(d).then(function(){return l.eventsProvider.trigger(u.a.COMMENTS_COUNT_CHANGED_EVENT,{contextLevel:e,instanceId:t,component:n,itemId:o,area:r,countChange:p},l.sitesProvider.getCurrentSiteId()),l.commentsProvider.invalidateCommentsData(e,t,n,o,r,i).then(function(){return l.commentsProvider.getComments(e,t,n,o,r,0,i)}).catch(function(){})}).catch(function(e){if(!l.utils.isWebServiceError(e))return Promise.reject(e);c.push(e.message)}).then(function(){c&&c.length&&c.forEach(function(e){s.push(l.translate.instant("core.comments.warningcommentsnotsent",{error:e}))})})}}).then(function(){return s});return this.addOngoingSync(a,c,i)},t.prototype.getSyncId=function(e,t,n,o,r){return void 0===r&&(r=""),e+"#"+t+"#"+n+"#"+o+"#"+r},t.AUTO_SYNCED="core_comments_autom_synced",t=n=g([Object(o.A)(),v("design:paramtypes",[r.a,i.a,a.a,m.a,d.a,h.c,s.a,p.a,c.a,u.a,f.a])],t);var n}(l.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(4),l=n(2),a=n(1),s=n(46),u=n(206),c=n(153),d=n(163),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.blogProvider=e,this.domUtils=t,this.userProvider=n,this.utils=r,this.commentsProvider=i,this.tagProvider=l,this.filter={},this.pageLoaded=0,this.userPageLoaded=0,this.canLoadMoreEntries=!1,this.canLoadMoreUserEntries=!0,this.loaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.entries=[],this.showMyEntriesToggle=!1,this.onlyMyEntries=!1,this.component=u.a.COMPONENT,this.currentUserId=o.getCurrentSiteUserId(),this.siteHomeId=o.getCurrentSiteHomeId()}return e.prototype.ngOnInit=function(){var e=this;this.userId&&(this.filter.userid=this.userId),this.showMyEntriesToggle=!this.userId,this.courseId&&(this.filter.courseid=this.courseId),this.cmId&&(this.filter.cmid=this.cmId),this.entryId&&(this.filter.entryid=this.entryId),this.groupId&&(this.filter.groupid=this.groupId),this.tagId&&(this.filter.tagid=this.tagId),!this.userId||this.courseId||this.cmId?this.courseId&&this.courseId!=this.siteHomeId?(this.contextLevel="course",this.contextInstanceId=this.courseId):(this.contextLevel="system",this.contextInstanceId=0):(this.contextLevel="user",this.contextInstanceId=this.userId),this.commentsEnabled=!this.commentsProvider.areCommentsDisabledInSite(),this.tagsEnabled=this.tagProvider.areTagsAvailableInSite(),this.fetchEntries().then(function(){e.blogProvider.logView(e.filter).catch(function(){})})},e.prototype.fetchEntries=function(e){var t=this;void 0===e&&(e=!1),this.loadMoreError=!1,e&&(this.pageLoaded=0,this.userPageLoaded=0);return this.blogProvider.getEntries(this.filter,this.onlyMyEntries?this.userPageLoaded:this.pageLoaded).then(function(n){var o=n.entries.map(function(e){switch(e.publishstate){case"draft":e.publishTranslated="publishtonoone";break;case"site":e.publishTranslated="publishtosite";break;case"public":e.publishTranslated="publishtoworld";break;default:e.publishTranslated="privacy:unknown"}return e.moduleid||e.coursemoduleid?(e.contextLevel="module",e.contextInstanceId=e.moduleid||e.coursemoduleid):e.courseid?(e.contextLevel="course",e.contextInstanceId=e.courseid):(e.contextLevel="user",e.contextInstanceId=e.userid),t.userProvider.getProfile(e.userid,e.courseid,!0).then(function(t){e.user=t}).catch(function(){})});if(t.entries=e?n.entries:t.utils.uniqueArray(t.entries.concat(n.entries),"id").sort(function(e,t){return t.created-e.created}),t.onlyMyEntries){var r=t.entries.filter(function(e){return e.userid==t.currentUserId}).length;t.canLoadMoreUserEntries=n.totalentries>r,t.canLoadMore=t.canLoadMoreUserEntries,t.userPageLoaded++}else t.canLoadMoreEntries=n.totalentries>t.entries.length,t.canLoadMore=t.canLoadMoreEntries,t.pageLoaded++;return Promise.all(o)}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.blog.errorloadentries",!0),t.loadMoreError=!0}).finally(function(){t.loaded=!0})},e.prototype.onlyMyEntriesToggleChanged=function(e){var t=this;if(e){var n=this.entries.filter(function(e){return e.userid==t.currentUserId}).length;this.userPageLoaded=Math.floor(n/u.a.ENTRIES_PER_PAGE),this.filter.userid=this.currentUserId,0==n&&this.canLoadMoreUserEntries&&this.loadMore()}else delete this.filter.userid;this.canLoadMore=e?this.canLoadMoreUserEntries:this.canLoadMoreEntries},e.prototype.loadMore=function(e){return this.fetchEntries().finally(function(){e&&e()})},e.prototype.refresh=function(e){var t=this,n=this.entries.map(function(e){return t.commentsProvider.invalidateCommentsData("user",e.userid,t.component,e.id,"format_blog")});n.push(this.blogProvider.invalidateEntries(this.filter)),this.showMyEntriesToggle&&(this.filter.userid=this.currentUserId,n.push(this.blogProvider.invalidateEntries(this.filter)),this.onlyMyEntries||delete this.filter.userid),this.utils.allPromises(n).finally(function(){t.fetchEntries(!0).finally(function(){e&&e.complete()})})},f([Object(o.D)(),p("design:type",Number)],e.prototype,"userId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"courseId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"cmId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"entryId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"groupId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"tagId",void 0),f([Object(o._9)(r.f),p("design:type",r.f)],e.prototype,"content",void 0),e=f([Object(o.m)({selector:"addon-blog-entries",templateUrl:"addon-blog-entries.html"}),p("design:paramtypes",[u.a,i.a,s.a,a.a,l.a,c.a,d.a])],e)}()},function(e,t,n){"use strict";function o(e){return u._57(0,[(e()(),u._31(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.download(n,!1)&&o}return o},c.b,c.a)),u._30(1,1097728,null,0,d.a,[[8,""],f.a,u.t,u.V],{color:[0,"color"],clear:[1,"clear"]},null),u._47(131072,p.a,[h.a,u.j]),(e()(),u._55(-1,0,["\n        "])),(e()(),u._31(4,0,null,0,1,"ion-icon",[["name","cloud-download"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._30(5,147456,null,0,m.a,[f.a,u.t,u.V],{name:[0,"name"]},null),(e()(),u._55(-1,0,["\n    "]))],function(e,t){e(t,1,0,"dark","");e(t,5,0,"cloud-download")},function(e,t){e(t,0,0,u._56(t,0,0,u._44(t,2).transform("core.download")));e(t,4,0,u._44(t,5)._hidden)})}function r(e){return u._57(0,[(e()(),u._31(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.download(n,!0)&&o}return o},c.b,c.a)),u._30(1,1097728,null,0,d.a,[[8,""],f.a,u.t,u.V],{color:[0,"color"],clear:[1,"clear"]},null),u._47(131072,p.a,[h.a,u.j]),(e()(),u._55(-1,0,["\n        "])),(e()(),u._31(4,0,null,0,1,"ion-icon",[["name","refresh"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._30(5,147456,null,0,m.a,[f.a,u.t,u.V],{name:[0,"name"]},null),(e()(),u._55(-1,0,["\n    "]))],function(e,t){e(t,1,0,"dark","");e(t,5,0,"refresh")},function(e,t){e(t,0,0,u._56(t,0,0,u._44(t,2).transform("core.refresh")));e(t,4,0,u._44(t,5)._hidden)})}function i(e){return u._57(0,[(e()(),u._31(0,0,null,null,2,"ion-icon",[["class","core-icon-downloaded"],["color","success"],["name","cloud-done"],["role","img"]],[[1,"aria-label",0],[2,"hide",null]],null,null,null,null)),u._30(1,147456,null,0,m.a,[f.a,u.t,u.V],{color:[0,"color"],name:[1,"name"]},null),u._47(131072,p.a,[h.a,u.j])],function(e,t){e(t,1,0,"success","cloud-done")},function(e,t){e(t,0,0,u._56(t,0,0,u._44(t,2).transform("core.downloaded")),u._44(t,1)._hidden)})}function l(e){return u._57(0,[(e()(),u._31(0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),u._55(-1,null,["\n    "])),(e()(),u._55(-1,null,["\n    "])),(e()(),u._26(16777216,null,null,1,null,o)),u._30(4,16384,null,0,_.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,null,["\n\n    "])),(e()(),u._55(-1,null,["\n    "])),(e()(),u._26(16777216,null,null,1,null,r)),u._30(8,16384,null,0,_.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,null,["\n\n    "])),(e()(),u._55(-1,null,["\n    "])),(e()(),u._26(16777216,null,null,1,null,i)),u._30(12,16384,null,0,_.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.status==n.statusNotDownloaded);e(t,8,0,n.status==n.statusOutdated||n.status==n.statusDownloaded&&!n.canTrustDownload);e(t,12,0,n.status==n.statusDownloaded&&n.canTrustDownload)},null)}function a(e){return u._57(0,[(e()(),u._31(0,0,null,null,1,"ion-spinner",[["class","core-animate-show-hide"]],[[2,"spinner-paused",null]],null,null,g.b,g.a)),u._30(1,114688,null,0,v.a,[f.a,u.t,u.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,u._44(t,1)._paused)})}function s(e){return u._57(0,[(e()(),u._26(16777216,null,null,1,null,l)),u._30(1,16384,null,0,_.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,null,["\n\n"])),(e()(),u._55(-1,null,["\n"])),(e()(),u._26(16777216,null,null,1,null,a)),u._30(5,16384,null,0,_.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.enabled&&!(n.loading||n.status===n.statusDownloading));e(t,5,0,n.loading||n.status===n.statusDownloading)},null)}n.d(t,"a",function(){return b}),t.b=s;var u=n(0),c=n(45),d=n(42),f=n(8),p=n(25),h=n(17),m=n(47),_=n(7),g=n(121),v=n(101),y=n(327),b=u._29({encapsulation:2,styles:[],data:{}});u._27("core-download-refresh",y.a,function(e){return u._57(0,[(e()(),u._31(0,0,null,null,1,"core-download-refresh",[],null,null,null,s,b)),u._30(1,49152,null,0,y.a,[],null,null)],null,null)},{status:"status",enabled:"enabled",loading:"loading",canTrustDownload:"canTrustDownload"},{action:"action"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(10),l=n(4),a=n(165),s=n(375),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o,r){this.navCtrl=e,this.appProvider=t,this.domUtils=n,this.competencyProvider=o,this.helperProvider=r,this.competenciesLoaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.fetchCourseCompetencies().finally(function(){e.competenciesLoaded=!0})},e.prototype.fetchCourseCompetencies=function(){var e=this;return this.competencyProvider.getCourseCompetencies(this.courseId,this.userId).then(function(t){e.competencies=t,e.helperProvider.getProfile(e.userId).then(function(t){e.user=t})}).catch(function(t){e.domUtils.showErrorModalDefault(t,"Error getting course competencies data.")})},e.prototype.openCompetency=function(e){this.appProvider.isWide()?this.navCtrl.push("AddonCompetencyCompetenciesPage",{competencyId:e,courseId:this.courseId,userId:this.userId}):this.navCtrl.push("AddonCompetencyCompetencyPage",{competencyId:e,courseId:this.courseId,userId:this.userId})},e.prototype.openCompetencySummary=function(e){this.navCtrl.push("AddonCompetencyCompetencySummaryPage",{competencyId:e,contextLevel:"course",contextInstanceId:this.courseId})},e.prototype.refreshCourseCompetencies=function(e){var t=this;this.competencyProvider.invalidateCourseCompetencies(this.courseId,this.userId).finally(function(){t.fetchCourseCompetencies().finally(function(){e.complete()})})},u([Object(o._9)(r.f),c("design:type",r.f)],e.prototype,"content",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"courseId",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"userId",void 0),e=u([Object(o.m)({selector:"addon-competency-course",templateUrl:"addon-competency-course.html"}),c("design:paramtypes",[r.s,i.a,l.a,a.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=n(4),l=n(172),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.sitesProvider=e,this.domUtils=t,this.courseCompletionProvider=n,this.completionLoaded=!1,this.tracked=!0}return e.prototype.ngOnInit=function(){var e=this;this.userId||(this.userId=this.sitesProvider.getCurrentSiteUserId()),this.fetchCompletion().finally(function(){e.completionLoaded=!0})},e.prototype.fetchCompletion=function(){var e=this;return this.courseCompletionProvider.getCompletion(this.courseId,this.userId).then(function(t){e.statusText=e.courseCompletionProvider.getCompletedStatusText(t),e.completion=t,e.showSelfComplete=e.courseCompletionProvider.canMarkSelfCompleted(e.userId,t),e.tracked=!0}).catch(function(t){t&&"notenroled"==t.errorcode?e.tracked=!1:e.domUtils.showErrorModalDefault(t,"addon.coursecompletion.couldnotloadreport",!0)})},e.prototype.refreshCompletion=function(e){var t=this;this.courseCompletionProvider.invalidateCourseCompletion(this.courseId,this.userId).finally(function(){t.fetchCompletion().finally(function(){e&&e.complete()})})},e.prototype.completeCourse=function(){var e=this,t=this.domUtils.showModalLoading("core.sending",!0);this.courseCompletionProvider.markCourseAsSelfCompleted(this.courseId).then(function(){return e.refreshCompletion()}).catch(function(t){e.domUtils.showErrorModal(t)}).finally(function(){t.dismiss()})},a([Object(o.D)(),s("design:type",Number)],e.prototype,"courseId",void 0),a([Object(o.D)(),s("design:type",Number)],e.prototype,"userId",void 0),e=a([Object(o.m)({selector:"addon-course-completion-report",templateUrl:"addon-course-completion-report.html"}),s("design:paramtypes",[r.a,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(46),l=n(4),a=n(28),s=n(10),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.userProvider=e,this.domUtils=t,this.appProvider=n,this.participants=[],this.canLoadMore=!1,this.loadMoreError=!1,this.participantsLoaded=!1,this.canSearch=!1,this.showSearchBox=!1,this.disableSearch=!1,this.displaySearchResults=!1,this.searchQuery="",this.searchPage=0}return e.prototype.ngOnInit=function(){var e=this;this.canSearch=this.userProvider.canSearchParticipantsInSite(),this.fetchData(!0).then(function(){!e.participantId&&e.splitviewCtrl.isOn()&&e.participants.length>0&&e.gotoParticipant(e.participants[0].id),e.userProvider.logParticipantsView(e.courseId).catch(function(){})}).finally(function(){e.content&&e.content.resize()})},e.prototype.fetchData=function(e){var t=this;void 0===e&&(e=!1);var n=e?0:this.participants.length;return this.loadMoreError=!1,this.userProvider.getParticipants(this.courseId,n).then(function(n){t.participants=e?n.participants:t.participants.concat(n.participants),t.canLoadMore=n.canLoadMore}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error loading participants"),t.loadMoreError=!0}).finally(function(){t.participantsLoaded=!0})},e.prototype.loadMoreData=function(e){return this.displaySearchResults?this.search(this.searchQuery,!0).finally(function(){e&&e()}):this.fetchData().finally(function(){e&&e()})},e.prototype.refreshParticipants=function(e){var t=this;this.userProvider.invalidateParticipantsList(this.courseId).finally(function(){t.fetchData(!0).finally(function(){e.complete()})})},e.prototype.gotoParticipant=function(e){this.participantId=e,this.splitviewCtrl.push("CoreUserProfilePage",{userId:e,courseId:this.courseId})},e.prototype.toggleSearch=function(){this.showSearchBox=!this.showSearchBox,!this.showSearchBox&&this.displaySearchResults&&this.clearSearch()},e.prototype.clearSearch=function(){var e=this;this.displaySearchResults&&(this.searchQuery="",this.displaySearchResults=!1,this.participants=[],this.searchPage=0,this.splitviewCtrl.emptyDetails(),this.participantsLoaded=!1,this.fetchData(!0).then(function(){e.splitviewCtrl.isOn()&&e.participants.length>0&&e.gotoParticipant(e.participants[0].id)}))},e.prototype.search=function(e,t){var n=this;return this.appProvider.closeKeyboard(),this.disableSearch=!0,this.participantsLoaded=t,this.loadMoreError=!1,t||(this.participantsLoaded=!1,this.searchQuery=e,this.searchPage=0,this.participants=[],this.splitviewCtrl.emptyDetails()),this.userProvider.searchParticipants(this.courseId,e,!0,this.searchPage).then(function(e){(o=n.participants).push.apply(o,e.participants),n.canLoadMore=e.canLoadMore,n.searchPage++,!t&&n.splitviewCtrl.isOn()&&n.participants.length>0&&n.gotoParticipant(n.participants[0].id);var o}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error searching users."),n.loadMoreError=!0}).finally(function(){n.disableSearch=!1,n.participantsLoaded=!0,n.displaySearchResults=!0})},u([Object(o._9)(r.f),c("design:type",r.f)],e.prototype,"content",void 0),u([Object(o._9)(a.a),c("design:type",a.a)],e.prototype,"splitviewCtrl",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"courseId",void 0),e=u([Object(o.m)({selector:"core-user-participants",templateUrl:"core-user-participants.html"}),c("design:paramtypes",[i.a,l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(1),l=n(46),a=n(175),s=n(202),u=n(189),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r){this.workshopOffline=e,this.workshopHelper=t,this.navCtrl=n,this.userProvider=o,this.component=a.a.COMPONENT,this.loaded=!1,this.offline=!1,this.viewDetails=!1,this.userId=r.getCurrentSiteUserId(),this.showGrade=this.workshopHelper.showGrade}return e.prototype.ngOnInit=function(){var e=this;this.componentId=this.module.instance,this.userId=this.submission.authorid||this.submission.userid||this.userId,this.submission.title=this.submission.title||this.submission.submissiontitle,this.submission.timemodified=this.submission.timemodified||this.submission.submissionmodified,this.submission.id=this.submission.id||this.submission.submissionid,this.workshop.phase==a.a.PHASE_ASSESSMENT&&(this.submission.reviewedby&&this.submission.reviewedby.length&&(this.submission.reviewedbycount=this.submission.reviewedby.reduce(function(e,t){return e+(t.grade?1:0)},0)),this.submission.reviewerof&&this.submission.reviewerof.length&&(this.submission.reviewerofcount=this.submission.reviewerof.reduce(function(e,t){return e+(t.grade?1:0)},0)));var t=[];this.offline=this.submission&&this.submission.offline||this.assessment&&this.assessment.offline,this.submission.id&&t.push(this.workshopOffline.getEvaluateSubmission(this.workshop.id,this.submission.id).then(function(t){e.submission.submissiongradeover=t.gradeover,e.offline=!0}).catch(function(){})),this.userId&&t.push(this.userProvider.getProfile(this.userId,this.courseId,!0).then(function(t){e.profile=t})),this.viewDetails=!this.summary&&this.workshop.phase==a.a.PHASE_CLOSED&&"AddonModWorkshopSubmissionPage"!==this.navCtrl.getActive().name,this.viewDetails&&this.submission.gradeoverby&&t.push(this.userProvider.getProfile(this.submission.gradeoverby,this.courseId,!0).then(function(t){e.evaluateByProfile=t})),Promise.all(t).finally(function(){e.loaded=!0})},e.prototype.gotoSubmission=function(){if(this.submission.timemodified){this.navCtrl.push("AddonModWorkshopSubmissionPage",{module:this.module,workshop:this.workshop,access:this.access,courseId:this.courseId,profile:this.profile,submission:this.submission,assessment:this.assessment})}},c([Object(o.D)(),d("design:type",Object)],e.prototype,"submission",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"module",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"workshop",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"access",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"courseId",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"assessment",void 0),c([Object(o.D)(),d("design:type",Boolean)],e.prototype,"summary",void 0),e=c([Object(o.m)({selector:"addon-mod-workshop-submission",templateUrl:"addon-mod-workshop-submission.html"}),d("design:paramtypes",[u.a,s.a,r.s,l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(4),l=n(9),a=n(1),s=n(11),u=n(46),c=n(742),d=n(260),f=n(304),p=n(336),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a,s){var u=this;this.domUtils=e,this.textUtils=t,this.modalCtrl=r,this.notesProvider=i,this.notesSync=l,this.userProvider=a,this.notesOffline=s,this.type="course",this.refreshIcon="spinner",this.syncIcon="spinner",this.hasOffline=!1,this.notesLoaded=!1,this.showDelete=!1,this.canDeleteNotes=!1,this.syncObserver=o.on(p.a.AUTO_SYNCED,function(e){e.courseId==u.courseId&&(u.showSyncWarnings(e.warnings),u.notesLoaded=!1,u.refreshIcon="spinner",u.syncIcon="spinner",u.domUtils.scrollToTop(u.content),u.fetchNotes(!1))},n.getCurrentSiteId()),this.currentUserId=n.getCurrentSiteUserId()}return e.prototype.ngOnInit=function(){var e=this;this.fetchNotes(!0).then(function(){e.notesProvider.logView(e.courseId,e.userId).catch(function(){})})},e.prototype.fetchNotes=function(e,t){var n=this;return(e?this.syncNotes(t):Promise.resolve()).catch(function(){}).then(function(){return n.notesProvider.getNotes(n.courseId,n.userId).then(function(e){var t=e[n.type+"notes"]||[];return t.forEach(function(e){e.content=n.textUtils.decodeHTML(e.content)}),n.notesProvider.setOfflineDeletedNotes(t,n.courseId).then(function(e){return n.hasOffline=e.some(function(e){return e.offline||e.deleted}),n.userId?(n.notes=e,n.userProvider.getProfile(n.userId,n.courseId,!0).then(function(e){n.user=e})):n.notesProvider.getNotesUserData(e,n.courseId).then(function(e){n.notes=e})})})}).catch(function(e){n.domUtils.showErrorModal(e)}).finally(function(){var e=n.notes&&n.notes.length>0;e&&"personal"==n.type&&(e=!!n.notes.find(function(e){return e.usermodified==n.currentUserId})),n.canDeleteNotes=e,n.notesLoaded=!0,n.refreshIcon="refresh",n.syncIcon="sync"})},e.prototype.refreshNotes=function(e,t){var n=this;this.refreshIcon="spinner",this.syncIcon="spinner",this.notesProvider.invalidateNotes(this.courseId,this.userId).finally(function(){n.fetchNotes(!0,e).finally(function(){t&&t.complete()})})},e.prototype.typeChanged=function(){var e=this;this.notesLoaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.fetchNotes(!0).then(function(){e.notesProvider.logView(e.courseId,e.userId).catch(function(){})})},e.prototype.addNote=function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.modalCtrl.create("AddonNotesAddPage",{userId:this.userId,courseId:this.courseId,type:this.type});n.onDidDismiss(function(e){e&&e.sent&&e.type?(e.type!=t.type&&(t.type=e.type,t.notesLoaded=!1),t.refreshNotes(!1)):e&&e.type&&e.type!=t.type&&(t.type=e.type,t.typeChanged())}),n.present()},e.prototype.deleteNote=function(e,t){var n=this;e.preventDefault(),e.stopPropagation(),this.domUtils.showDeleteConfirm("addon.notes.deleteconfirm").then(function(){n.notesProvider.deleteNote(t,n.courseId).then(function(){n.showDelete=!1,n.refreshNotes(!1),n.domUtils.showToast("addon.notes.eventnotedeleted",!0,3e3)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Delete note failed.")})}).catch(function(){})},e.prototype.undoDeleteNote=function(e,t){var n=this;e.preventDefault(),e.stopPropagation(),this.notesOffline.undoDeleteNote(t.id).then(function(){n.refreshNotes(!0)})},e.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},e.prototype.syncNotes=function(e){var t=this;return this.notesSync.syncNotes(this.courseId).then(function(e){t.showSyncWarnings(e)}).catch(function(n){return e&&t.domUtils.showErrorModalDefault(n,"core.errorsync",!0),Promise.reject(null)})},e.prototype.showSyncWarnings=function(e){var t=this.textUtils.buildMessage(e);t&&this.domUtils.showErrorModal(t)},e.prototype.ngOnDestroy=function(){this.syncObserver&&this.syncObserver.off()},h([Object(o.D)(),m("design:type",Number)],e.prototype,"courseId",void 0),h([Object(o.D)(),m("design:type",Number)],e.prototype,"userId",void 0),h([Object(o._9)(r.f),m("design:type",r.f)],e.prototype,"content",void 0),e=h([Object(o.m)({selector:"addon-notes-list",templateUrl:"addon-notes-list.html",animations:[c.b]}),m("design:paramtypes",[i.a,s.a,a.a,l.a,r.q,d.a,p.a,u.a,f.a])],e)}()},function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),s._55(-1,null,["\n    "])),(e()(),s._31(2,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),s._30(3,540672,null,0,u.a,[s.t,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,[2,P.a],[2,O.a],[2,E.a],C.a,I.a,R.a,S.a,w.a,s._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),s._55(-1,null,["\n"]))],function(e,t){e(t,3,0,t.component.contentText,!1)},null)}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"core-file",[],null,null,null,A.b,A.a)),s._30(1,245760,null,0,D.a,[c.a,m.a,d.a,v.a,y.a,j.a,k.a,I.a,f.a,T.a,_.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"],canDownload:[4,"canDownload"],showSize:[5,"showSize"],showTime:[6,"showTime"]},null)],function(e,t){var n=t.component;e(t,1,0,t.parent.context.$implicit,n.component,n.componentId,n.alwaysDownload,n.canDownload,n.showSize,n.showTime)},null)}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"core-local-file",[],null,null,null,x.b,x.a)),s._30(1,114688,null,0,M.a,[k.a,m.a,f.a,N.a,d.a,U.a,c.a,I.a],{file:[0,"file"]},null)],function(e,t){e(t,1,0,t.parent.context.$implicit)},null)}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),s._55(-1,null,["\n    "])),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,r)),s._30(4,16384,null,0,F.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,i)),s._30(8,16384,null,0,F.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"]))],function(e,t){e(t,4,0,!t.context.$implicit.name&&!t.context.$implicit.embedType);e(t,8,0,t.context.$implicit.name&&!t.context.$implicit.embedType)},null)}function a(e){return s._57(0,[(e()(),s._26(16777216,null,null,1,null,o)),s._30(1,16384,null,0,F.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._26(16777216,null,null,1,null,l)),s._30(4,802816,null,0,F.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.showInline&&n.contentText);e(t,4,0,n.files)},null)}n.d(t,"a",function(){return H}),t.b=a;var s=n(0),u=n(48),c=n(1),d=n(4),f=n(11),p=n(17),h=n(16),m=n(2),_=n(22),g=n(6),v=n(18),y=n(10),b=n(15),P=n(21),O=n(29),E=n(28),C=n(44),I=n(9),R=n(41),S=n(32),w=n(36),A=n(249),D=n(215),j=n(115),k=n(66),T=n(56),x=n(745),M=n(382),N=n(57),U=n(24),F=n(7),L=n(326),H=s._29({encapsulation:2,styles:[],data:{}});s._27("core-files",L.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"core-files",[],null,null,null,a,H)),s._30(1,376832,null,0,L.a,[k.a,m.a,s.F],null,null)],function(e,t){e(t,1,0)},null)},{files:"files",component:"component",componentId:"componentId",alwaysDownload:"alwaysDownload",canDownload:"canDownload",showSize:"showSize",showTime:"showTime",showInline:"showInline"},{},[])},,,,,function(e,t,n){"use strict";var o=n(79),r=n(787),i=n(0),l=n(5),a=n(37),s=n(262),u=n(593),c=n(7),d=n(1298),f=n(3),p=n(1956),h=n(466),m=n(489),_=n(440),g=n(141),v=n(241),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b="translateX",P="show-back-button",O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.init=function(){e.prototype.init.call(this);var t=this.plt,n=t.isRTL?"-99.5%":"99.5%",o=t.isRTL?"33%":"-33%",r=this.enteringView,i=this.leavingView,l=this.opts;this.duration(Object(a.m)(l.duration)?l.duration:500),this.easing(Object(a.m)(l.easing)?l.easing:"cubic-bezier(0.36,0.66,0.04,1)");var s="back"===l.direction,u=r&&r.hasNavbar(),c=i&&i.hasNavbar();if(r){var d=r.pageRef().nativeElement,f=new g.a(t,d);if(this.add(f),s?f.fromTo(b,o,"0%",!0).fromTo("opacity",.8,1,!0):f.beforeClearStyles(["opacity"]).fromTo(b,n,"0%",!0),u){var p=d.querySelector("ion-navbar"),h=new g.a(t,p);this.add(h);var m=new g.a(t,p.querySelector(".back-button"));if(h.add(m),s)r.enableBack()&&m.beforeAddClass(P).fromTo("opacity",.01,1,!0);else if(r.enableBack()){m.beforeAddClass(P).fromTo("opacity",.01,1,!0);var _=new g.a(t,p.querySelector(".back-button-text"));_.fromTo(b,t.isRTL?"-100px":"100px","0px"),h.add(_)}else m.beforeRemoveClass(P)}}if(i&&i.pageRef()){var v=i.pageRef().nativeElement,y=new g.a(t,v);if(this.add(y),s?y.beforeClearStyles(["opacity"]).fromTo(b,"0%",t.isRTL?"-100%":"100%"):y.fromTo(b,"0%",o).fromTo("opacity",1,.8).afterClearStyles(["transform","opacity"]),c){var O=v.querySelector("ion-navbar"),E=new g.a(t,O),C=new g.a(t,O.querySelector(".back-button"));if(E.add(C),this.add(E),C.fromTo("opacity",.99,0),s){var I=new g.a(t,O.querySelector(".back-button-text"));I.fromTo(b,"0%",(t.isRTL?-300:300)+"px"),E.add(I)}else C.afterClearStyles(["opacity"])}}},t}(v.a),E=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.init=function(){var e=this.enteringView,t=this.leavingView,n=this.plt.isRTL?"-100%":"100%";if(e&&e.pageRef()){var o=e.pageRef().nativeElement,r=new g.a(this.plt,o.querySelector(".modal-wrapper")),i=new g.a(this.plt,o.querySelector("ion-backdrop"));r.beforeStyles({transform:"translateX("+n+")",opacity:.8}),r.fromTo("transform","translateX("+n+")","translateX(0)"),r.fromTo("opacity",.8,1),i.fromTo("opacity",.01,.4),this.element(e.pageRef()).duration(300).easing("cubic-bezier(0.36,0.66,0.04,1)").add(r).add(i)}if(t&&t.pageRef()){o=this.leavingView.pageRef().nativeElement,r=new g.a(this.plt,o.querySelector(".modal-wrapper"));var l=new g.a(this.plt,o.querySelector(".wrapper"));i=new g.a(this.plt,o.querySelector("ion-backdrop"));r.beforeStyles({transform:"translateX(0)",opacity:1}),r.fromTo("transform","translateX(0)","translateX("+n+")"),r.fromTo("opacity",1,.8),l.fromTo("opacity",1,0),i.fromTo("opacity",.4,0),this.element(t.pageRef()).duration(300).easing("cubic-bezier(0.36,0.66,0.04,1)").add(l).add(r).add(i)}},t}(v.a),I=n(6),R=n(427),S=n(10),w=n(126),A=n(150),D=n(11),j=n(4),k=n(44),T=n(24),x=n(22),M=n(2),N=n(66),U=n(154),F=n(57),L=n(171),H=n(9),B=n(441),q=n(1),G=n(151),V=n(71),K=n(88),W=n(177),z=n(18),$=n(1299),Y=n(56),Q=n(81),X=n(115),J=n(465),Z=n(1300),ee=n(26),te=n(617),ne=n(606),oe=n(607),re=n(598),ie=n(600),le=n(611),ae=n(596),se=n(612),ue=n(595),ce=n(613),de=n(602),fe=n(1301),pe=n(1302),he=n(1304),me=n(608),_e=n(1305),ge=n(594),ve=n(1307),ye=n(1308),be=n(601),Pe=n(603),Oe=n(1312),Ee=n(1313),Ce=n(624),Ie=n(1314),Re=n(625),Se=n(626),we=n(1320),Ae=n(1323),De=n(627),je=n(1334),ke=n(1337),Te=n(1339),xe=n(1341),Me=n(1343),Ne=n(1345),Ue=n(1347),Fe=n(1349),Le=n(1351),He=n(1353),Be=n(1355),qe=n(1357),Ge=n(1360),Ve=n(1362),Ke=n(1364),We=n(1366),ze=n(1368),$e=n(1371),Ye=n(1374),Qe=n(1377),Xe=n(1380),Je=n(1382),Ze=n(1384),et=n(1387),tt=n(1389),nt=n(632),ot=n(643),rt=n(644),it=n(645),lt=n(1391),at=n(1425),st=n(656),ut=n(662),ct=n(646),dt=n(648),ft=n(649),pt=n(652),ht=n(655),mt=n(657),_t=n(658),gt=n(663),vt=n(666),yt=n(664),bt=n(669),Pt=n(654),Ot=n(667),Et=n(628),Ct=n(1429),It=n(629),Rt=n(674),St=n(616),wt=n(675),At=n(676),Dt=n(1431),jt=n(1451),kt=n(1481),Tt=n(1483);n.d(t,"b",function(){return Nt}),n.d(t,"c",function(){return Ut}),n.d(t,"a",function(){return Ht}),n.d(t,"d",function(){return Ft}),n.d(t,"e",function(){return Lt});var xt=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},Mt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Nt=[I.a,R.a,S.a,w.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,N.a,U.a,F.a,L.a,H.a,B.a,q.a,G.a,V.a,K.a,W.a,z.a,$.a,Y.a,Q.a,X.a,J.a],Ut=null,Ft=function(e){return new p.a(e,"./assets/lang/",".json")},Lt={},Ht=function(){function e(e,t,n,o,r,i,l,a,s){this.eventsProvider=l,t.registerProcess({name:"CorePlatformReady",priority:U.a.MAX_RECOMMENDED_PRIORITY+400,blocking:!0,load:e.ready}),t.registerProcess(n),t.registerProcess({name:"CoreRestoreSession",priority:U.a.MAX_RECOMMENDED_PRIORITY+200,blocking:!1,load:r.restoreSession.bind(r)}),t.registerProcess({name:"CoreClearTmpFolder",priority:U.a.MAX_RECOMMENDED_PRIORITY+150,blocking:!1,load:i.clearTmpFolder.bind(i)}),t.executeInitProcesses(),a.register(s),o.setTransition("core-page-transition",O),o.setTransition("core-modal-lateral-transition",C),this.decorateIonContent(),this.patchIonRefresher()}return e.prototype.decorateIonContent=function(){var e=function(e){return e.indexOf("px")>0?parseInt(e,10):0};l.f.prototype._readDimensions=function(){var t,n=this._pTop,o=this._pRight,r=this._pBottom,i=this._pLeft,l=this._hdrHeight,s=this._ftrHeight,u=this._tabsPlacement,c=0;if(this._pTop=0,this._pRight=0,this._pBottom=0,this._pLeft=0,this._hdrHeight=0,this._ftrHeight=0,this._tabsPlacement=null,this._tTop=0,this._fTop=0,this._fBottom=0,this._scroll){t=this._scroll.ev;var d=this.getNativeElement();if(d){for(var f,p,h=d.parentElement,m=h.children,_=m.length-1;_>=0;_--)"ION-CONTENT"===(p=(d=m[_]).tagName)?(t.contentElement=d,this._fullscreen&&(f=getComputedStyle(d),this._pTop=e(f.paddingTop),this._pBottom=e(f.paddingBottom),this._pRight=e(f.paddingRight),this._pLeft=e(f.paddingLeft))):"ION-HEADER"===p?(t.headerElement=d,this._hdrHeight=d.clientHeight):"ION-FOOTER"===p&&(t.footerElement=d,this._ftrHeight=d.clientHeight,this._footerEle=d);d=h;for(;d&&"ION-MODAL"!==d.tagName&&!d.classList.contains("tab-subpage");)-1!=d.tagName.indexOf("ION-TABS")&&(this._tabbarHeight=d.firstElementChild.clientHeight,null===this._tabsPlacement&&(this._tabsPlacement=d.getAttribute("tabsplacement"))),d=d.parentElement;this._tabs&&"top"===this._tabsPlacement&&(this._tTop=this._hdrHeight,c=this._tabs._top),this._cTop=this._hdrHeight,this._cBottom=this._ftrHeight,"top"===this._tabsPlacement?this._cTop+=this._tabbarHeight:"bottom"===this._tabsPlacement&&(this._cBottom+=this._tabbarHeight),this._hasRefresher&&(this._cTop-=1),this._fTop=this._cTop,this._fBottom=this._cBottom,this._fullscreen&&(this._cTop+=this._pTop,this._cBottom+=this._pBottom);var g=this.getContentDimensions();t.scrollHeight=g.scrollHeight,t.scrollWidth=g.scrollWidth,t.contentHeight=g.contentHeight,t.contentWidth=g.contentWidth,t.contentTop=g.contentTop,t.contentBottom=g.contentBottom,this._dirty=n!==this._pTop||r!==this._pBottom||i!==this._pLeft||o!==this._pRight||l!==this._hdrHeight||s!==this._ftrHeight||u!==this._tabsPlacement||c!==this._tTop||this._cTop!==this.contentTop||this._cBottom!==this.contentBottom,this._scroll.init(this.getScrollElement(),this._cTop,this._cBottom),this.imgsUpdate()}else Object(a.a)(!1,"ele should be valid")}};var t=this.eventsProvider;l.f.prototype.ngAfterViewInit=function(){var e=this;Object(a.a)(this.getFixedElement(),"fixed element was not found"),Object(a.a)(this.getScrollElement(),"scroll element was not found");var n=this._scroll;n.ev.fixedElement=this.getFixedElement(),n.ev.scrollElement=this.getScrollElement(),n.onScrollStart=function(t){e.ionScrollStart.emit(t)},n.onScroll=function(t){e.ionScroll.emit(t),e.imgsUpdate()},n.onScrollEnd=function(t){e.ionScrollEnd.emit(t),e.imgsUpdate()},this._orientationObs=t.on(H.a.ORIENTATION_CHANGE,this.resize.bind(this))},l.f.prototype.ngOnDestroy=function(){this._scLsn&&this._scLsn(),this._viewCtrlReadSub&&this._viewCtrlReadSub.unsubscribe(),this._viewCtrlWriteSub&&this._viewCtrlWriteSub.unsubscribe(),this._viewCtrlReadSub=this._viewCtrlWriteSub=null,this._scroll&&this._scroll.destroy(),this._footerEle=this._scLsn=this._scroll=null,this._orientationObs&&this._orientationObs.off()}},e.prototype.patchIonRefresher=function(){l.x.prototype._setCss=function(e,t,n,o){this._appliedStyles=e>0;var r=this._content,i=this._plt.Css;r.setScrollElementStyle(i.transform,e>0?"translateY("+e+"px)":""),r.setScrollElementStyle(i.transitionDuration,t),r.setScrollElementStyle(i.transitionDelay,o),r.setScrollElementStyle("overflow",n?"hidden":"")}},e=xt([Object(i.I)({declarations:[m.a],imports:[o.a,r.a,s.d,l.k.forRoot(m.a,{pageTransition:"core-page-transition"},{links:[{loadChildren:"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory#AddonBadgesIssuedBadgePageModuleNgFactory",name:"AddonBadgesIssuedBadgePage",segment:"addon-badges-issued-badge",priority:"low",defaultHistory:[]},{loadChildren:"../addon/badges/pages/user-badges/user-badges.module.ngfactory#AddonBadgesUserBadgesPageModuleNgFactory",name:"AddonBadgesUserBadgesPage",segment:"addon-badges-user-badges",priority:"low",defaultHistory:[]},{loadChildren:"../addon/blog/pages/entries/entries.module.ngfactory#AddonBlogEntriesPageModuleNgFactory",name:"AddonBlogEntriesPage",segment:"addon-blog-entries",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/settings/settings.module.ngfactory#AddonCalendarSettingsPageModuleNgFactory",name:"AddonCalendarSettingsPage",segment:"addon-calendar-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencies/competencies.module.ngfactory#AddonCompetencyCompetenciesPageModuleNgFactory",name:"AddonCompetencyCompetenciesPage",segment:"addon-competency-competencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competency/competency.module.ngfactory#AddonCompetencyCompetencyPageModuleNgFactory",name:"AddonCompetencyCompetencyPage",segment:"addon-competency-competency",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory#AddonCompetencyCompetencySummaryPageModuleNgFactory",name:"AddonCompetencyCompetencySummaryPage",segment:"addon-competency-competency-summary",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory#AddonCompetencyCourseCompetenciesPageModuleNgFactory",name:"AddonCompetencyCourseCompetenciesPage",segment:"addon-competency-coursecompetencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/plan/plan.module.ngfactory#AddonCompetencyPlanPageModuleNgFactory",name:"AddonCompetencyPlanPage",segment:"addon-competency-plan",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/planlist/planlist.module.ngfactory#AddonCompetencyPlanListPageModuleNgFactory",name:"AddonCompetencyPlanListPage",segment:"addon-competency-planlist",priority:"low",defaultHistory:[]},{loadChildren:"../addon/coursecompletion/pages/report/report.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonCourseCompletionReportPage",segment:"addon-course-completion-report",priority:"low",defaultHistory:[]},{loadChildren:"../addon/files/pages/list/list.module.ngfactory#AddonFilesListPageModuleNgFactory",name:"AddonFilesListPage",segment:"addon-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory#AddonMessageOutputAirnotifierDevicesPageModuleNgFactory",name:"AddonMessageOutputAirnotifierDevicesPage",segment:"addon-message-output-airnotifier-devices",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/contacts/contacts.module.ngfactory#AddonMessagesContactsPageModuleNgFactory",name:"AddonMessagesContactsPage",segment:"addon-messages-contacts",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory#AddonMessagesConversationInfoPageModuleNgFactory",name:"AddonMessagesConversationInfoPage",segment:"addon-messages-conversation-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/index/index.module.ngfactory#AddonMessagesIndexPageModuleNgFactory",name:"AddonMessagesIndexPage",segment:"addon-messages-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory#AddonModAssignEditFeedbackModalPageModuleNgFactory",name:"AddonModAssignEditFeedbackModalPage",segment:"addon-mod-assign-edit-feedback-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/index/index.module.ngfactory#AddonModAssignIndexPageModuleNgFactory",name:"AddonModAssignIndexPage",segment:"addon-mod-assign-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory#AddonModAssignSubmissionReviewPageModuleNgFactory",name:"AddonModAssignSubmissionReviewPage",segment:"addon-mod-assign-submission-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/index/index.module.ngfactory#AddonModBookIndexPageModuleNgFactory",name:"AddonModBookIndexPage",segment:"addon-mod-book-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/toc/toc.module.ngfactory#AddonModBookTocPageModuleNgFactory",name:"AddonModBookTocPage",segment:"addon-mod-book-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/index/index.module.ngfactory#AddonModChatIndexPageModuleNgFactory",name:"AddonModChatIndexPage",segment:"addon-mod-chat-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/session-messages/session-messages.module.ngfactory#AddonModChatSessionMessagesPageModuleNgFactory",name:"AddonModChatSessionMessagesPage",segment:"addon-mod-chat-session-messages",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/sessions/sessions.module.ngfactory#AddonModChatSessionsPageModuleNgFactory",name:"AddonModChatSessionsPage",segment:"addon-mod-chat-sessions",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/users/users.module.ngfactory#AddonModChatUsersPageModuleNgFactory",name:"AddonModChatUsersPage",segment:"addon-mod-chat-users",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/choice/pages/index/index.module.ngfactory#AddonModChoiceIndexPageModuleNgFactory",name:"AddonModChoiceIndexPage",segment:"addon-mod-choice-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/index/index.module.ngfactory#AddonModDataIndexPageModuleNgFactory",name:"AddonModDataIndexPage",segment:"addon-mod-data-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory#AddonModFeedbackAttemptPageModuleNgFactory",name:"AddonModFeedbackAttemptPage",segment:"addon-mod-feedback-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/index/index.module.ngfactory#AddonModFeedbackIndexPageModuleNgFactory",name:"AddonModFeedbackIndexPage",segment:"addon-mod-feedback-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory#AddonModFeedbackNonRespondentsPageModuleNgFactory",name:"AddonModFeedbackNonRespondentsPage",segment:"addon-mod-feedback-nonrespondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory#AddonModFeedbackRespondentsPageModuleNgFactory",name:"AddonModFeedbackRespondentsPage",segment:"addon-mod-feedback-respondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/folder/pages/index/index.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonModFolderIndexPage",segment:"addon-mod-folder-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/edit-post/edit-post.module.ngfactory#AddonModForumEditPostPageModuleNgFactory",name:"AddonModForumEditPostPage",segment:"addon-mod-edit-post",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/index/index.module.ngfactory#AddonModForumIndexPageModuleNgFactory",name:"AddonModForumIndexPage",segment:"addon-mod-forum-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/sort-order-selector/sort-order-selector.module.ngfactory#AddonModForumSortOrderSelectorPagePageModuleNgFactory",name:"AddonModForumSortOrderSelectorPage",segment:"addon-mod-forum-sort-order-selector",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/entry/entry.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModGlossaryEntryPage",segment:"addon-mod-glossary-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/index/index.module.ngfactory#AddonModGlossaryIndexPageModuleNgFactory",name:"AddonModGlossaryIndexPage",segment:"addon-mod-glossary-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/index/index.module.ngfactory#AddonModImscpIndexPageModuleNgFactory",name:"AddonModImscpIndexPage",segment:"addon-mod-imscp-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/toc/toc.module.ngfactory#AddonModImscpTocPageModuleNgFactory",name:"AddonModImscpTocPage",segment:"addon-mod-imscp-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/index/index.module.ngfactory#AddonModLessonIndexPageModuleNgFactory",name:"AddonModLessonIndexPage",segment:"addon-mod-lesson-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory#AddonModLessonMenuModalPageModuleNgFactory",name:"AddonModLessonMenuModalPage",segment:"addon-mod-lesson-menu-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory#AddonModLessonPasswordModalPageModuleNgFactory",name:"AddonModLessonPasswordModalPage",segment:"addon-mod-lesson-password-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lti/pages/index/index.module.ngfactory#AddonModLtiIndexPageModuleNgFactory",name:"AddonModLtiIndexPage",segment:"addon-mod-lti-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/page/pages/index/index.module.ngfactory#AddonModPageIndexPageModuleNgFactory",name:"AddonModPageIndexPage",segment:"addon-mod-page-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory#AddonModQuizAttemptPageModuleNgFactory",name:"AddonModQuizAttemptPage",segment:"addon-mod-quiz-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/index/index.module.ngfactory#AddonModQuizIndexPageModuleNgFactory",name:"AddonModQuizIndexPage",segment:"addon-mod-quiz-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory#AddonModQuizNavigationModalPageModuleNgFactory",name:"AddonModQuizNavigationModalPage",segment:"addon-mod-quiz-navigation-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory#AddonModQuizPreflightModalModuleNgFactory",name:"AddonModQuizPreflightModalPage",segment:"addon-mod-quiz-preflight-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/resource/pages/index/index.module.ngfactory#AddonModResourceIndexPageModuleNgFactory",name:"AddonModResourceIndexPage",segment:"addon-mod-resource-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/index/index.module.ngfactory#AddonModScormIndexPageModuleNgFactory",name:"AddonModScormIndexPage",segment:"addon-mod-scorm-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/toc/toc.module.ngfactory#AddonModScormTocPageModuleNgFactory",name:"AddonModScormTocPage",segment:"addon-mod-scorm-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/survey/pages/index/index.module.ngfactory#AddonModSurveyIndexPageModuleNgFactory",name:"AddonModSurveyIndexPage",segment:"addon-mod-survey-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/url/pages/index/index.module.ngfactory#AddonModUrlIndexPageModuleNgFactory",name:"AddonModUrlIndexPage",segment:"addon-mod-url-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/index/index.module.ngfactory#AddonModWikiIndexPageModuleNgFactory",name:"AddonModWikiIndexPage",segment:"addon-mod-wiki-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/map/map.module.ngfactory#AddonModWikiMapPageModuleNgFactory",name:"AddonModWikiMapPage",segment:"addon-mod-wiki-map",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/index/index.module.ngfactory#AddonModWorkshopIndexPageModuleNgFactory",name:"AddonModWorkshopIndexPage",segment:"addon-mod-workshop-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/phase/phase.module.ngfactory#AddonModWorkshopPhaseInfoPageModuleNgFactory",name:"AddonModWorkshopPhaseInfoPage",segment:"addon-mod-workshop-phase-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/add/add.module.ngfactory#AddonNotesAddPageModuleNgFactory",name:"AddonNotesAddPage",segment:"addon-notes-add",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/list/list.module.ngfactory#AddonNotesListPageModuleNgFactory",name:"AddonNotesListPage",segment:"addon-notes-list-page",priority:"low",defaultHistory:[]},{loadChildren:"../addon/storagemanager/pages/course-storage/course-storage.module.ngfactory#AddonStorageManagerCourseStoragePageModuleNgFactory",name:"AddonStorageManagerCourseStoragePage",segment:"addon-storagemanager-course-storage",priority:"low",defaultHistory:[]},{loadChildren:"../components/split-view/placeholder/placeholder.module.ngfactory#CorePlaceholderPageModuleNgFactory",name:"CoreSplitViewPlaceholderPage",segment:"core-placeholder",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/add/add.module.ngfactory#CoreCommentsAddPageModuleNgFactory",name:"CoreCommentsAddPage",segment:"core-comments-add",priority:"low",defaultHistory:[]},{loadChildren:"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory#CoreContentLinksChooseSitePageModuleNgFactory",name:"CoreContentLinksChooseSitePage",segment:"core-content-links-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory#CoreCourseListModTypePageModuleNgFactory",name:"CoreCourseListModTypePage",segment:"core-course-list-mod-type",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section-selector/section-selector.module.ngfactory#CoreCourseSectionSelectorPageModuleNgFactory",name:"CoreCourseSectionSelectorPage",segment:"core-course-section-selector",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory#CoreCourseUnsupportedModulePageModuleNgFactory",name:"CoreCourseUnsupportedModulePage",segment:"core-course-unsupported-module",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/available-courses/available-courses.module.ngfactory#CoreCoursesAvailableCoursesPageModuleNgFactory",name:"CoreCoursesAvailableCoursesPage",segment:"core-courses-available-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/categories/categories.module.ngfactory#CoreCoursesCategoriesPageModuleNgFactory",name:"CoreCoursesCategoriesPage",segment:"core-courses-categories",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/my-courses/my-courses.module.ngfactory#CoreCoursesMyCoursesPageModuleNgFactory",name:"CoreCoursesMyCoursesPage",segment:"core-courses-my-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/search/search.module.ngfactory#CoreCoursesSearchPageModuleNgFactory",name:"CoreCoursesSearchPage",segment:"core-courses-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory#CoreCoursesSelfEnrolPasswordPageModuleNgFactory",name:"CoreCoursesSelfEnrolPasswordPage",segment:"core-courses-self-enrol-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/course/course.module.ngfactory#CoreGradesCoursePageModuleNgFactory",name:"CoreGradesCoursePage",segment:"core-grades-course",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/courses/courses.module.ngfactory#CoreGradesCoursesPageModuleNgFactory",name:"CoreGradesCoursesPage",segment:"core-grades-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/coursesplit/coursesplit.module.ngfactory#CoreGradesCourseSplitPageModuleNgFactory",name:"CoreGradesCourseSplitPage",segment:"core-grades-course-split",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/grade/grade.module.ngfactory#CoreGradesGradePageModuleNgFactory",name:"CoreGradesGradePage",segment:"core-grades-grade",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/change-password/change-password.module.ngfactory#CoreLoginChangePasswordPageModuleNgFactory",name:"CoreLoginChangePasswordPage",segment:"core-login-change-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory#CoreLoginForgottenPasswordPageModuleNgFactory",name:"CoreLoginForgottenPasswordPage",segment:"core-login-forgotten-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/init/init.module.ngfactory#CoreLoginInitPageModuleNgFactory",name:"CoreLoginInitPage",segment:"core-login-init",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/reconnect/reconnect.module.ngfactory#CoreLoginReconnectPageModuleNgFactory",name:"CoreLoginReconnectPage",segment:"core-login-reconnect",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-error/site-error.module.ngfactory#CoreLoginSiteErrorPageModuleNgFactory",name:"CoreLoginSiteErrorPage",segment:"core-login-site-error",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-help/site-help.module.ngfactory#CoreLoginSiteHelpPageModuleNgFactory",name:"CoreLoginSiteHelpPage",segment:"core-login-site-help",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-policy/site-policy.module.ngfactory#CoreLoginSitePolicyPageModuleNgFactory",name:"CoreLoginSitePolicyPage",segment:"core-login-site-policy",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site/site.module.ngfactory#CoreLoginSitePageModuleNgFactory",name:"CoreLoginSitePage",segment:"core-login-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/sites/sites.module.ngfactory#CoreLoginSitesPageModuleNgFactory",name:"CoreLoginSitesPage",segment:"core-login-sites",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/more/more.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuMorePage",segment:"core-mainmenu-more",priority:"low",defaultHistory:[]},{loadChildren:"../core/rating/pages/ratings/ratings.module.ngfactory#CoreRatingRatingsPageModuleNgFactory",name:"CoreRatingRatingsPage",segment:"core-rating-ratings",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/about/about.module.ngfactory#CoreSettingsAboutPageModuleNgFactory",name:"CoreSettingsAboutPage",segment:"core-settings-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/app/app.module.ngfactory#CoreAppSettingsPageModuleNgFactory",name:"CoreAppSettingsPage",segment:"core-settings-app",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/general/general.module.ngfactory#CoreSettingsGeneralPageModuleNgFactory",name:"CoreSettingsGeneralPage",segment:"core-settings-general",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/licenses/licenses.module.ngfactory#CoreSettingsLicensesPageModuleNgFactory",name:"CoreSettingsLicensesPage",segment:"core-settings-licenses",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/site/site.module.ngfactory#CoreSitePreferencesPageModuleNgFactory",name:"CoreSitePreferencesPage",segment:"core-site-preferences",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/space-usage/space-usage.module.ngfactory#CoreSettingsSpaceUsagePageModuleNgFactory",name:"CoreSettingsSpaceUsagePage",segment:"core-settings-space-usage",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/synchronization/synchronization.module.ngfactory#CoreSettingsSynchronizationPageModuleNgFactory",name:"CoreSettingsSynchronizationPage",segment:"core-settings-synchronization",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory#CoreSharedFilesChooseSitePageModuleNgFactory",name:"CoreSharedFilesChooseSitePage",segment:"core-shared-files-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/list/list.module.ngfactory#CoreSharedFilesListPageModuleNgFactory",name:"CoreSharedFilesListPage",segment:"core-shared-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../core/sitehome/pages/index/index.module.ngfactory#CoreSiteHomeIndexPageModuleNgFactory",name:"CoreSiteHomeIndexPage",segment:"core-sitehome-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/module-index/module-index.module.ngfactory#CoreSitePluginsModuleIndexPageModuleNgFactory",name:"CoreSitePluginsModuleIndexPage",segment:"core-site-plugins-module-index-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory#CoreSitePluginsPluginPageModuleNgFactory",name:"CoreSitePluginsPluginPage",segment:"core-site-plugins-plugin-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/index-area/index-area.module.ngfactory#CoreTagIndexAreaPageModuleNgFactory",name:"CoreTagIndexAreaPage",segment:"core-tag-index-area",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/index/index.module.ngfactory#CoreTagIndexPageModuleNgFactory",name:"CoreTagIndexPage",segment:"core-tag-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/search/search.module.ngfactory#CoreTagSerchPageModuleNgFactory",name:"CoreTagSearchPage",segment:"core-tag-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/about/about.module.ngfactory#CoreUserAboutPageModuleNgFactory",name:"CoreUserAboutPage",segment:"core-user-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/participants/participants.module.ngfactory#CoreUserParticipantsPageModuleNgFactory",name:"CoreUserParticipantsPage",segment:"core-user-participants",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/iframe/iframe.module.ngfactory#CoreViewerIframePageModuleNgFactory",name:"CoreViewerIframePage",segment:"core-viewer-iframe",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/image/image.module.ngfactory#CoreViewerImagePageModuleNgFactory",name:"CoreViewerImagePage",segment:"core-viewer-image",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/text/text.module.ngfactory#CoreViewerTextPageModuleNgFactory",name:"CoreViewerTextPage",segment:"core-viewer-text",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/index/index.module.ngfactory#AddonCalendarIndexPageModuleNgFactory",name:"AddonCalendarIndexPage",segment:"addon-calendar-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/search/search.module.ngfactory#AddonMessagesSearchPageModuleNgFactory",name:"AddonMessagesSearchPage",segment:"addon-messages-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/settings/settings.module.ngfactory#AddonMessagesSettingsPageModuleNgFactory",name:"AddonMessagesSettingsPage",segment:"addon-messages-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit/edit.module.ngfactory#AddonModAssignEditPageModuleNgFactory",name:"AddonModAssignEditPage",segment:"addon-mod-assign-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory#AddonModAssignSubmissionListPageModuleNgFactory",name:"AddonModAssignSubmissionListPage",segment:"addon-mod-assign-submission-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/chat/chat.module.ngfactory#AddonModChatChatPageModuleNgFactory",name:"AddonModChatChatPage",segment:"addon-mod-chat-chat",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/edit/edit.module.ngfactory#AddonModDataEditPageModuleNgFactory",name:"AddonModDataEditPage",segment:"addon-mod-data-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/entry/entry.module.ngfactory#AddonModDataEntryPageModuleNgFactory",name:"AddonModDataEntryPage",segment:"addon-mod-data-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/search/search.module.ngfactory#AddonModDataSearchPageModuleNgFactory",name:"AddonModDataSearchPage",segment:"addon-mod-data-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/form/form.module.ngfactory#AddonModFeedbackFormPageModuleNgFactory",name:"AddonModFeedbackFormPage",segment:"addon-mod-feedback-form",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/edit/edit.module.ngfactory#AddonModGlossaryNewDiscussionPageModuleNgFactory",name:"AddonModGlossaryEditPage",segment:"addon-mod-glossary-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory#AddonModLessonUserRetakePageModuleNgFactory",name:"AddonModLessonUserRetakePage",segment:"addon-mod-lesson-user-retake",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/review/review.module.ngfactory#AddonModQuizReviewPageModuleNgFactory",name:"AddonModQuizReviewPage",segment:"addon-mod-quiz-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory#AddonModWorkshopAssessmentPageModuleNgFactory",name:"AddonModWorkshopAssessmentPage",segment:"addon-mod-workshop-assessment",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory#AddonModWorkshopEditSubmissionPageModuleNgFactory",name:"AddonModWorkshopEditSubmissionPage",segment:"addon-mod-workshop-edit-submission",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/list/list.module.ngfactory#AddonNotificationsListPageModuleNgFactory",name:"AddonNotificationsListPage",segment:"addon-notifications-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/settings/settings.module.ngfactory#AddonNotificationsSettingsPageModuleNgFactory",name:"AddonNotificationsSettingsPage",segment:"addon-notifications-settings",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/dashboard/dashboard.module.ngfactory#CoreCoursesDashboardPageModuleNgFactory",name:"CoreCoursesDashboardPage",segment:"core-courses-dashboard",priority:"low",defaultHistory:[]},{loadChildren:"../core/emulator/pages/capture-media/capture-media.module.ngfactory#CoreEmulatorCaptureMediaPageModuleNgFactory",name:"CoreEmulatorCaptureMediaPage",segment:"core-emulator-capture-media",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/credentials/credentials.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginCredentialsPage",segment:"core-login-credentials",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/email-signup/email-signup.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginEmailSignupPage",segment:"core-login-email-signup",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/menu/menu.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuPage",segment:"core-mainmenu",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/deviceinfo/deviceinfo.module.ngfactory#CoreSettingsDeviceInfoPageModuleNgFactory",name:"CoreSettingsDeviceInfoPage",segment:"core-settings-deviceinfo",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/profile/profile.module.ngfactory#CoreUserProfilePageModuleNgFactory",name:"CoreUserProfilePage",segment:"core-user-profile",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/edit-event/edit-event.module.ngfactory#AddonCalendarEditEventPageModuleNgFactory",name:"AddonCalendarEditEventPage",segment:"addon-calendar-edit-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/event/event.module.ngfactory#AddonCalendarEventPageModuleNgFactory",name:"AddonCalendarEventPage",segment:"addon-calendar-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory#AddonModForumNewDiscussionPageModuleNgFactory",name:"AddonModForumNewDiscussionPage",segment:"addon-mod-forum-new-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/player/player.module.ngfactory#AddonModScormPlayerPageModuleNgFactory",name:"AddonModScormPlayerPage",segment:"addon-mod-scorm-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/edit/edit.module.ngfactory#AddonModWikiEditPageModuleNgFactory",name:"AddonModWikiEditPage",segment:"addon-mod-wiki-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/submission/submission.module.ngfactory#AddonModWorkshopSubmissionPageModuleNgFactory",name:"AddonModWorkshopSubmissionPage",segment:"addon-mod-workshop-submission",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/viewer/viewer.module.ngfactory#CoreCommentsViewerPageModuleNgFactory",name:"CoreCommentsViewerPage",segment:"core-comments-viewer",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section/section.module.ngfactory#CoreCourseSectionPageModuleNgFactory",name:"CoreCourseSectionPage",segment:"core-course-section",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/course-preview/course-preview.module.ngfactory#CoreCoursesCoursePreviewPageModuleNgFactory",name:"CoreCoursesCoursePreviewPage",segment:"core-courses-course-preview",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/day/day.module.ngfactory#AddonCalendarDayPageModuleNgFactory",name:"AddonCalendarDayPage",segment:"addon-calendar-day",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/list/list.module.ngfactory#AddonCalendarListPageModuleNgFactory",name:"AddonCalendarListPage",segment:"addon-calendar-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory#AddonMessagesGroupConversationsPageModuleNgFactory",name:"AddonMessagesGroupConversationsPage",segment:"addon-messages-group-conversations",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/discussion/discussion.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModForumDiscussionPage",segment:"addon-mod-forum-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/player/player.module.ngfactory#AddonModLessonPlayerPageModuleNgFactory",name:"AddonModLessonPlayerPage",segment:"addon-mod-lesson-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/player/player.module.ngfactory#AddonModQuizPlayerPageModuleNgFactory",name:"AddonModQuizPlayerPage",segment:"addon-mod-quiz-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/discussion/discussion.module.ngfactory#AddonMessagesDiscussionPageModuleNgFactory",name:"AddonMessagesDiscussionPage",segment:"addon-messages-discussion",priority:"low",defaultHistory:[]}]}),f.b.forRoot({loader:{provide:f.a,useFactory:Ft,deps:[s.c]}}),ee.a,te.a,ne.b,oe.b,re.b,ie.b,le.b,ae.b,se.b,ue.b,ce.b,de.b,fe.a,pe.a,he.a,me.b,_e.a,ge.b,ve.a,St.b,ye.a,be.b,Pe.b,Oe.a,Ee.a,Ce.b,Ie.a,Re.b,Se.b,we.a,Ae.a,De.b,je.a,ke.a,Te.a,Me.a,xe.a,Ne.a,Ue.a,Fe.a,Le.a,He.a,Be.a,Ke.a,qe.a,Ge.a,Ve.a,We.a,ze.a,$e.a,Ye.a,Qe.a,Xe.a,Je.a,Ze.a,et.a,tt.a,nt.b,ot.b,rt.b,it.b,lt.a,at.a,ht.b,ut.b,ct.b,dt.b,ft.b,pt.b,st.b,mt.b,_t.b,gt.b,vt.b,yt.b,bt.b,Pt.b,Ot.b,Et.b,Ct.a,It.b,Rt.b,wt.b,At.b,Dt.a,jt.a,kt.a,Tt.a],bootstrap:[l.j],entryComponents:[m.a],providers:[I.a,R.a,S.a,w.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,N.a,U.a,F.a,L.a,H.a,B.a,q.a,G.a,V.a,K.a,W.a,z.a,$.a,Y.a,Q.a,X.a,J.a,Z.a,{provide:s.a,useClass:_.a,multi:!0},h.a,{provide:i.h,useValue:Lt,multi:!0},{provide:u.a,useClass:u.a,deps:[i.h]},{provide:c.g,useClass:d.a}]}),Mt("design:paramtypes",[l.v,U.a,$.a,l.e,q.a,F.a,H.a,K.a,Z.a])],e)}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){if(void 0===require("os")){var n=new Error("Cannot find module \"require('os')\"");throw n.code="MODULE_NOT_FOUND",n}e.exports=require("os")},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.content=e.get("content")||"",this.html=!!e.get("html")}return e=i([Object(o.m)({selector:"core-bs-tooltip",templateUrl:"core-bs-tooltip.html"}),l("design:paramtypes",[r.t])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(52),i=n(125),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.coursesProvider=e,this.injector=t,this.name="CoreCourseFormatDefault",this.format="default"}return e.prototype.isEnabled=function(){return!0},e.prototype.getCourseTitle=function(e){return e.displayname?e.displayname:e.fullname?e.fullname:""},e.prototype.canViewAllSections=function(e){return!0},e.prototype.displayEnableDownload=function(e){return!0},e.prototype.displaySectionSelector=function(e){return!0},e.prototype.displayRefresher=function(e,t){return!0},e.prototype.getCurrentSection=function(e,t){var n;if(void 0!==e.marker)n=Promise.resolve(e.marker);else{if(!this.coursesProvider.isGetCoursesByFieldAvailable())return t[0];n=this.coursesProvider.getCourseByField("id",e.id).catch(function(){}).then(function(e){return e&&e.marker})}return n.then(function(e){if(e>0){var n=t.find(function(t){return t.section==e});if(n)return n}return t[0]})},e.prototype.invalidateData=function(e,t){return this.coursesProvider.invalidateCoursesByField("id",e.id)},e.prototype.openCourse=function(e,t,n){return n=n||{},Object.assign(n,{course:t}),e?(e.push("CoreCourseSectionPage",n),Promise.resolve()):(this.loginHelper=this.loginHelper||this.injector.get(i.a),this.loginHelper.redirect("CoreCourseSectionPage",n))},e.prototype.shouldRefreshWhenCompletionChanges=function(e){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a,o.C])],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(5),i=n(6),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t,n){this.viewCtrl=t,this.title=e.get("title"),this.items=e.get("items")||[],this.uniqueId=e.get("id"),this.logger=n.getInstance("CoreContextMenuPopoverComponent")}return e.prototype.closeMenu=function(e){this.viewCtrl.dismiss(e)},e.prototype.itemClicked=function(e,t){if(t.action.observers.length>0){if(e.preventDefault(),e.stopPropagation(),"spinner"==t.iconAction)return!1;t.closeOnClick&&this.closeMenu(t),t.action.emit(this.closeMenu.bind(this,t))}else t.closeOnClick&&(t.href||t.onClosed.observers.length>0)&&this.closeMenu(t);return!0},e=l([Object(o.m)({selector:"core-context-menu-popover",templateUrl:"core-context-menu-popover.html"}),a("design:paramtypes",[r.t,r.G,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.viewCtrl=t,this.courseId=-1,this.courses=e.get("courses")||[],this.courseId=e.get("courseId")||-1}return e.prototype.coursePicked=function(e,t){return this.viewCtrl.dismiss(t),!0},e=i([Object(o.m)({selector:"core-course-picker-menu-popover",templateUrl:"core-course-picker-menu-popover.html"}),l("design:paramtypes",[r.t,r.G])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.viewCtrl=e,this.expired=!1,this.value="",this.src=t.get("src")}return e.prototype.closeModal=function(){this.viewCtrl.dismiss({expired:this.expired,value:this.value})},e.prototype.loaded=function(e){var t=this,n=e&&e.contentWindow;n&&(n.recaptchacallback=function(e){t.expired=!1,t.value=e,t.closeModal()},n.recaptchaexpiredcallback=function(){t.expired=!0,t.value=""})},e=i([Object(o.m)({selector:"core-recaptcha-modal",templateUrl:"core-recaptchamodal.html"}),l("design:paramtypes",[r.G,r.t])],e)}()},,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(1054),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.translate=t,n.name="AddonModAssignDefaultFeedbackHandler",n.type="default",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[r.c])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(82),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="CoreBlockDefault",t.blockName="default",t}return i(t,e),t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(13),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.sitesProvider=e,this.courseProvider=t,this.name="CoreCourseModuleDefault",this.modName="default"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){var o=this,r={icon:this.courseProvider.getModuleIconSrc(e.modname,e.modicon),title:e.name,class:"core-course-default-handler core-course-module-"+e.modname+"-handler",action:function(e,t,n,o,r){e.preventDefault(),e.stopPropagation(),t.push("CoreCourseUnsupportedModulePage",{module:n,courseId:o},r)}};return e.url&&(r.buttons=[{icon:"open",label:"core.openinbrowser",action:function(t){t.preventDefault(),t.stopPropagation(),o.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e.url)}}]),r},e.prototype.getMainComponent=function(e,t,n){},e.prototype.displayRefresherInSingleActivity=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(3),i=n(4),l=n(46),a=n(13),s=n(32),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,r,i){this.filterHelper=e,this.domUtils=t,this.translate=n,this.courseProvider=r,this.userProvider=i,this.completionChanged=new o.v}return e.prototype.ngOnChanges=function(e){e.completion&&this.completion&&this.showStatus()},e.prototype.completionClicked=function(e){var t=this;if(this.completion){if(void 0===this.completion.cmid||1!==this.completion.tracking)return;e.preventDefault(),e.stopPropagation();var n=this.domUtils.showModalLoading();this.completion.state=1===this.completion.state?0:1,this.courseProvider.markCompletedManually(this.completion.cmid,this.completion.state,this.completion.courseId,this.completion.courseName).then(function(e){if(!e.status)return Promise.reject(null);t.completion.hasOwnProperty("valueused")&&!t.completion.valueused&&(t.showStatus(),e.offline&&(t.completion.offline=!0)),t.completionChanged.emit(t.completion)}).catch(function(e){t.completion.state=1===t.completion.state?0:1,t.domUtils.showErrorModalDefault(e,"core.errorchangecompletion",!0)}).finally(function(){n.dismiss()})}},e.prototype.showStatus=function(){var e,t,n=this,o=this.moduleName||"";this.completion.tracking===a.a.COMPLETION_TRACKING_MANUAL&&this.completion.state===a.a.COMPLETION_INCOMPLETE?(t="completion-manual-n",e="core.completion-alt-manual-n"):this.completion.tracking===a.a.COMPLETION_TRACKING_MANUAL&&this.completion.state===a.a.COMPLETION_COMPLETE?(t="completion-manual-y",e="core.completion-alt-manual-y"):this.completion.tracking===a.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===a.a.COMPLETION_INCOMPLETE?(t="completion-auto-n",e="core.completion-alt-auto-n"):this.completion.tracking===a.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===a.a.COMPLETION_COMPLETE?(t="completion-auto-y",e="core.completion-alt-auto-y"):this.completion.tracking===a.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===a.a.COMPLETION_COMPLETE_PASS?(t="completion-auto-pass",e="core.completion-alt-auto-pass"):this.completion.tracking===a.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===a.a.COMPLETION_COMPLETE_FAIL&&(t="completion-auto-fail",e="core.completion-alt-auto-fail"),t&&(this.completion.overrideby>0&&(t+="-override"),this.completionImage="assets/img/completion/"+t+".svg"),o&&this.filterHelper.getFiltersAndFormatText(o,"module",this.moduleId,{clean:!0,singleLine:!0,shortenLength:50,courseId:this.completion.courseId}).then(function(t){var o;return n.completion.overrideby>0?(e+="-override",o=n.userProvider.getProfile(n.completion.overrideby,n.completion.courseId,!0).then(function(e){return{overrideuser:e.fullname,modname:t.text}})):o=Promise.resolve(t.text),o.then(function(t){n.completionDescription=n.translate.instant(e,{$a:t})})})},u([Object(o.D)(),c("design:type",Object)],e.prototype,"completion",void 0),u([Object(o.D)(),c("design:type",Number)],e.prototype,"moduleId",void 0),u([Object(o.D)(),c("design:type",String)],e.prototype,"moduleName",void 0),u([Object(o.O)(),c("design:type",o.v)],e.prototype,"completionChanged",void 0),e=u([Object(o.m)({selector:"core-course-module-completion",templateUrl:"core-course-module-completion.html"}),c("design:paramtypes",[s.a,i.a,r.c,a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(28),l=n(38),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},c=function(){function e(e,t,n){this.navCtrl=e,this.splitviewCtrl=t,this.courseHelper=n}return e.prototype.openCourse=function(e){var t=this.splitviewCtrl?this.splitviewCtrl.getMasterNav():this.navCtrl;this.courseHelper.getAndOpenCourse(t,e)},a([Object(o.D)(),s("design:type",Array)],e.prototype,"items",void 0),e=a([Object(o.m)({selector:"core-course-tag-area",templateUrl:"core-course-tag-area.html"}),u(1,Object(o.N)()),s("design:paramtypes",[r.s,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(1056),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.translate=t,n.name="AddonModAssignDefaultSubmissionHandler",n.type="default",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[r.c])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(142),f=n(46),p=n(296),h=n(294),m=n(32),_=n(56),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f){var p=e.call(this,t,n,o,r,i,l,a,s,u)||this;return p.choiceProvider=c,p.userProvider=d,p.injector=f,p.name="AddonModChoice",p.modName="choice",p.component=h.a.COMPONENT,p.updatesNames=/^configuration$|^.*files$|^answers$/,p}return g(t,e),t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchChoice.bind(this))},t.prototype.prefetchChoice=function(e,t,n,o){var r=this;return this.choiceProvider.getChoice(t,e.id,o,!1,!0).then(function(n){var i=[];i.push(r.choiceProvider.getOptions(n.id,!0,o)),i.push(r.choiceProvider.getResults(n.id,!0,o).then(function(e){var n=[];return e.forEach(function(e){e.userresponses.forEach(function(e){e.userid&&n.push(r.userProvider.getProfile(e.userid,t,!1,o)),e.profileimageurl&&n.push(r.filepoolProvider.addToQueueByUrl(o,e.profileimageurl).catch(function(){}))})}),Promise.all(n)}));var l=r.getIntroFilesFromInstance(e,n);return i.push(r.filepoolProvider.addFilesToQueue(o,l,h.a.COMPONENT,e.id)),Promise.all(i)})},t.prototype.getIntroFiles=function(e,t){var n=this;return this.choiceProvider.getChoice(t,e.id).catch(function(){}).then(function(t){return n.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.choiceProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){return this.choiceProvider.invalidateChoiceData(t)},t.prototype.sync=function(e,t,n){return this.syncProvider||(this.syncProvider=this.injector.get(p.a)),this.syncProvider.syncChoice(e.instance,void 0,n)},t=v([Object(o.A)(),y("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,m.a,_.a,h.a,f.a,o.C])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.name="AddonModDataDefaultFieldHandler",this.type="default"}return e.prototype.getFieldSearchData=function(e,t){return!1},e.prototype.getFieldEditData=function(e,t,n){return!1},e.prototype.hasFieldDataChanged=function(e,t,n){return!1},e.prototype.getFieldEditFiles=function(e,t,n){return[]},e.prototype.getFieldsNotifications=function(e,t){return!1},e.prototype.overrideData=function(e,t,n){return e},e.prototype.isEnabled=function(){return!0},e=r([Object(o.A)()],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var o=n(0),r=n(60),i=n(385),l=n(586),a=n(271),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=[r.a],c=function(){function e(){}return e=s([Object(o.I)({declarations:[],imports:[a.a],providers:[r.a,i.a,l.a],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var o=n(0),r=n(62),i=n(15),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=[r.a,i.a],s=function(){function e(){}return e=l([Object(o.I)({declarations:[],imports:[],providers:a,exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return A}),n.d(t,"b",function(){return D});var o=n(0),r=n(5),i=n(88),l=n(9),a=n(13),s=n(38),u=n(65),c=n(178),d=n(61),f=n(352),p=n(50),h=n(102),m=n(567),_=n(587),g=n(1059),v=n(1060),y=n(1062),b=n(1064),P=n(397),O=n(1066),E=n(1067),C=n(204),I=n(1068),R=n(1069),S=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=[a.a,s.a,u.a,c.a,d.a,p.a,h.a,f.a,P.a],D=function(){function e(e,t,n,o,r,i,a,s){e.register(t),e.register(n),i.registerHandler(a),i.registerHandler(s),o.resume.subscribe(function(){setTimeout(function(){e.forceCronHandlerExecution(n.name)},1e3)}),r.on(l.a.LOGIN,function(){setTimeout(function(){e.forceCronHandlerExecution(n.name).catch(function(e){})},1e3)})}return e=S([Object(o.I)({declarations:[],imports:[g.a,y.a,b.a,v.a],providers:[a.a,s.a,u.a,c.a,d.a,p.a,h.a,f.a,P.a,m.a,_.a,O.a,E.a,I.a,R.a],exports:[]}),w("design:paramtypes",[i.a,O.a,E.a,r.v,l.a,C.a,I.a,R.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(61),i=n(450),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.moduleDelegate=e,this.name="CoreCourseFormatSingleActivity",this.format="singleactivity"}return e.prototype.isEnabled=function(){return!0},e.prototype.canViewAllSections=function(e){return!1},e.prototype.getCourseTitle=function(e,t){return t&&t[0]&&t[0].modules&&t[0].modules[0]?t[0].modules[0].name:e.displayname?e.displayname:e.fullname?e.fullname:""},e.prototype.displayEnableDownload=function(e){return!1},e.prototype.displaySectionSelector=function(e){return!1},e.prototype.displayRefresher=function(e,t){return!(t&&t[0]&&t[0].modules&&t[0].modules[0])||this.moduleDelegate.displayRefresherInSingleActivity(t[0].modules[0].modname)},e.prototype.getCourseFormatComponent=function(e,t){return i.a},e.prototype.shouldRefreshWhenCompletionChanges=function(e){return!1},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return y});var o=n(0),r=n(52),i=n(188),l=n(599),a=n(391),s=n(1070),u=n(1071),c=n(1072),d=n(1073),f=n(1074),p=n(170),h=n(62),m=n(144),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=[r.a,a.a,i.a],y=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(n),t.registerHandler(o),t.registerHandler(r),t.registerHandler(i),l.registerClickHandler(a),l.registerClickHandler(s)}return e=_([Object(o.I)({declarations:[],imports:[],providers:[r.a,a.a,i.a,l.a,s.a,u.a,c.a,d.a,f.a],exports:[]}),g("design:paramtypes",[p.a,h.a,l.a,s.a,u.a,c.a,m.a,d.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(1),i=n(52),l=n(391),a=n(232),s=n(312),u=n(60),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.coursesProvider=e,this.dashboardProvider=t,this.siteHomeProvider=n,this.timelineProvider=o,this.blockDelegate=r,this.sitesProvider=i,this.name="CoreHome",this.priority=1100}return e.prototype.isEnabled=function(){return this.isEnabledForSite()},e.prototype.isEnabledForSite=function(e){var t=this;e=e||this.sitesProvider.getCurrentSiteId();var n,o,r=[];return r.push(this.blockDelegate.areBlocksDisabled(e).then(function(e){n=!e})),r.push(this.dashboardProvider.isAvailable().then(function(e){o=e})),Promise.all(r).then(function(){return!(!o||!n)||t.timelineProvider.isAvailable().then(function(e){return!(!e||!n)||t.siteHomeProvider.isAvailable().then(function(e){return!!e||!t.coursesProvider.isMyCoursesDisabledInSite()})})})},e.prototype.getDisplayData=function(){return{icon:"home",title:"core.courses.mymoodle",page:"CoreCoursesDashboardPage",class:"core-dashboard-handler"}},e=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a,u.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return m});var o=n(0),r=n(72),i=n(149),l=n(445),a=n(1075),s=n(1076),u=n(1077),c=n(1078),d=n(1079),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=[r.a,i.a,l.a],m=function(){function e(e,t,n,o,r,i){e.registerHandler(t),e.registerHandler(n),e.registerHandler(o),e.registerHandler(i),e.registerHandler(r)}return e=f([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a]}),p("design:paramtypes",[l.a,a.a,s.a,u.a,d.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var o=n(0),r=n(41),i=n(36),l=n(132),a=n(32),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=[r.a,i.a,a.a],c=function(){function e(){}return e=s([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,a.a,l.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P}),n.d(t,"b",function(){return O});var o=n(0),r=n(168),i=n(184),l=n(170),a=n(1080),s=n(1081),u=n(738),c=n(102),d=n(1082),f=n(1083),p=n(62),h=n(1084),m=n(104),_=n(9),g=n(1),v=n(46),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=[r.a,i.a],O=function(){function e(e,t,n,o,r,i,l,a,s,u,c){e.registerHandler(t),o.registerHandler(n),r.registerHandler(i),r.registerHandler(l),s.registerHandler(a),u.on(v.a.PROFILE_REFRESHED,function(e){a.clearViewGradesCache(e.courseId,e.userId)},c.getCurrentSiteId()),u.on(_.a.LOGOUT,function(){a.clearViewGradesCache()},c.getCurrentSiteId())}return e=y([Object(o.I)({declarations:[],imports:[u.a],providers:[r.a,i.a,a.a,s.a,d.a,f.a,h.a]}),b("design:paramtypes",[l.a,a.a,s.a,c.a,p.a,d.a,f.a,h.a,m.a,_.a,g.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var o=n(0),r=n(1085),i=n(359),l=n(605),a=n(1086),s=n(56),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=[i.a,l.a],f=function(){function e(e,t){e.registerHandler(t)}return e=u([Object(o.I)({declarations:[],imports:[r.a],providers:[i.a,l.a,a.a],exports:[]}),c("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(10),i=n(9),l=n(57),a=n(18),s=n(6),u=n(1),c=n(4),d=n(11),f=n(22),p=n(2),h=n(359),m=n(56),_=n(115),g=n(40),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p){this.elementRef=t,this.sitesProvider=n,this.urlUtils=o,this.utils=r,this.textUtils=i,this.h5pProvider=l,this.filepoolProvider=a,this.eventsProvider=s,this.appProvider=u,this.domUtils=c,this.pluginFileDelegate=d,this.fileProvider=f,this.fileHelper=p,this.showPackage=!1,this.loading=!1,this.calculating=!0,this.logger=e.getInstance("CoreH5PPlayerComponent"),this.site=n.getCurrentSite(),this.siteId=this.site.getId(),this.siteCanDownload=this.sitesProvider.getCurrentSite().canDownloadFiles()&&!this.h5pProvider.isOfflineDisabledInSite()}return e.prototype.ngOnInit=function(){this.checkCanDownload()},e.prototype.ngOnChanges=function(e){e.src&&!this.showPackage&&this.checkCanDownload()},e.prototype.play=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.loading=!0;(this.canDownload&&this.fileHelper.isStateDownloaded(this.state)?this.h5pProvider.getContentIndexFileUrl(this.urlParams.url,this.urlParams,this.siteId).catch(function(){return t.filepoolProvider.getInternalUrlByUrl(t.siteId,t.urlParams.url).then(function(e){return t.fileProvider.getFile(e)}).then(function(e){return t.h5pProvider.extractH5PFile(t.urlParams.url,e,t.siteId)}).then(function(){return t.h5pProvider.getContentIndexFileUrl(t.urlParams.url,t.urlParams,t.siteId)})}).catch(function(e){t.logger.error("Error loading downloaded index:",e,t.src)}):Promise.resolve()).then(function(e){if(!e){var n=t.src&&t.src.replace(h.a.DISPLAY_OPTION_DOWNLOAD+"=1",h.a.DISPLAY_OPTION_DOWNLOAD+"=0");return t.sitesProvider.getCurrentSite().getAutoLoginUrl(n,!1).then(function(e){t.playerSrc=t.urlUtils.addParamsToUrl(e,{preventredirect:!1})})}t.playerSrc=e}).finally(function(){t.addResizerScript(),t.loading=!1,t.showPackage=!0,!t.canDownload||t.state!=g.a.OUTDATED&&t.state!=g.a.NOT_DOWNLOADED||t.attemptDownloadInBg().catch(function(e){t.logger.error("Error downloading H5P in background",e)})})},e.prototype.download=function(e){var t=this;e&&e.preventDefault(),e&&e.stopPropagation(),this.appProvider.isOnline()?this.pluginFileDelegate.getFileSize({fileurl:this.urlParams.url},this.siteId).then(function(e){return t.domUtils.confirmDownloadSize({size:e,total:!0}).then(function(){return t.filepoolProvider.addToQueueByUrl(t.siteId,t.urlParams.url,t.component,t.componentId)},function(){})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0),t.calculateState()}):this.domUtils.showErrorModal("core.networkerrormsg",!0)},e.prototype.attemptDownloadInBg=function(){var e=this;return this.urlParams&&this.src&&this.siteCanDownload&&this.h5pProvider.canGetTrustedH5PFileInSite()&&this.appProvider.isOnline()?this.pluginFileDelegate.getFileSize({fileurl:this.urlParams.url},this.siteId).then(function(t){e.filepoolProvider.shouldDownload(t)&&e.filepoolProvider.addToQueueByUrl(e.siteId,e.urlParams.url,e.component,e.componentId)}):Promise.resolve()},e.prototype.addResizerScript=function(){if(null==document.head.querySelector("#core-h5p-resizer-script")){var e=document.createElement("script");e.id="core-h5p-resizer-script",e.type="text/javascript",e.src=this.h5pProvider.getResizerScriptUrl(),document.head.appendChild(e)}},e.prototype.checkCanDownload=function(){var e=this;this.observer&&this.observer.off(),this.urlParams=this.urlUtils.extractUrlParams(this.src),this.src&&this.siteCanDownload&&this.h5pProvider.canGetTrustedH5PFileInSite()&&this.site.containsUrl(this.src)?(this.calculateState(),this.filepoolProvider.getFileEventNameByUrl(this.siteId,this.urlParams.url).then(function(t){e.observer=e.eventsProvider.on(t,function(){e.calculateState()})}).catch(function(){})):(this.calculating=!1,this.canDownload=!1)},e.prototype.calculateState=function(){var e=this;this.calculating=!0,this.filepoolProvider.getFileStateByUrl(this.siteId,this.urlParams.url).then(function(t){e.canDownload=!0,e.state=t}).catch(function(t){e.canDownload=!1}).finally(function(){e.calculating=!1})},e.prototype.iframeLoaded=function(){window.dispatchEvent(new Event("resize"))},e.prototype.ngOnDestroy=function(){this.observer&&this.observer.off()},v([Object(o.D)(),y("design:type",String)],e.prototype,"src",void 0),v([Object(o.D)(),y("design:type",String)],e.prototype,"component",void 0),v([Object(o.D)(),y("design:type",Object)],e.prototype,"componentId",void 0),e=v([Object(o.m)({selector:"core-h5p-player",templateUrl:"core-h5p-player.html"}),y("design:paramtypes",[s.a,o.t,u.a,f.a,p.a,d.a,h.a,a.a,i.a,r.a,c.a,m.a,l.a,_.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(11),l=n(194),a=(n.n(l),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.translate=e,this.textUtils=t,this.SLUGIFY_MAP={"":"ae","":"oe","":"o","":"o","":"o","":"oe","":"o","":"o","":"y","":"y","":"y","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"c","":"c","":"c","":"c","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"u","":"n","":"u","":"u","":"u","":"es","":"d","":"d","":"e","":"e","":"e","":"e","":"e","":"g","":"g","":"g","":"g","":"h","":"h","":"i","":"i","":"i","":"i","":"i","":"ij","":"j","":"k","":"l","":"l","":"l","":"l","":"l","":"n","":"n","":"n","":"n","":"o","":"o","":"o","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"u","":"u","":"u","":"u","":"u","":"u","":"w","":"y","":"z","":"z","":"z","":"s","":"f","":"o","":"u","":"a","":"i","":"o","":"u","":"u","":"u","":"u","":"u","":"a","":"ae","":"oe"}}return e.prototype.boolifyAndEncodeMetadataSettings=function(e){return void 0!==e.disable&&(e.disable=1===e.disable),void 0!==e.disableExtraTitleField&&(e.disableExtraTitleField=1===e.disableExtraTitleField),JSON.stringify(e)},e.prototype.determineEmbedType=function(e,t){var n=-1!=e.toLowerCase().indexOf("div")?"div":"iframe";if(t){var o=t.toLowerCase();-1==o.indexOf(n)&&(n=-1!=o.indexOf("div")?"div":"iframe")}return n},e.prototype.getAssetsUrls=function(e,t){var n=this;void 0===t&&(t="");var o=[];return e.forEach(function(e){var r=e.path;-1==e.path.indexOf("://")&&t&&(r=n.textUtils.concatenatePaths(t,r)),e.version&&(r+=e.version),o.push(r)}),o},e.prototype.getDependenciesHash=function(e){var t=[];for(var n in e){var o=e[n];t.push(o.machineName+"-"+o.majorVersion+"."+o.minorVersion+"."+o.patchVersion)}return t.sort(function(e,t){return e.localeCompare(t)}),l.Md5.hashAsciiStr(t.join(""))},e.prototype.getLocalization=function(){return{fullscreen:this.translate.instant("core.h5p.fullscreen"),disableFullscreen:this.translate.instant("core.h5p.disablefullscreen"),download:this.translate.instant("core.h5p.download"),copyrights:this.translate.instant("core.h5p.copyright"),embed:this.translate.instant("core.h5p.embed"),size:this.translate.instant("core.h5p.size"),showAdvanced:this.translate.instant("core.h5p.showadvanced"),hideAdvanced:this.translate.instant("core.h5p.hideadvanced"),advancedHelp:this.translate.instant("core.h5p.resizescript"),copyrightInformation:this.translate.instant("core.h5p.copyright"),close:this.translate.instant("core.h5p.close"),title:this.translate.instant("core.h5p.title"),author:this.translate.instant("core.h5p.author"),year:this.translate.instant("core.h5p.year"),source:this.translate.instant("core.h5p.source"),license:this.translate.instant("core.h5p.license"),thumbnail:this.translate.instant("core.h5p.thumbnail"),noCopyrights:this.translate.instant("core.h5p.nocopyright"),reuse:this.translate.instant("core.h5p.reuse"),reuseContent:this.translate.instant("core.h5p.reuseContent"),reuseDescription:this.translate.instant("core.h5p.reuseDescription"),downloadDescription:this.translate.instant("core.h5p.downloadtitle"),copyrightsDescription:this.translate.instant("core.h5p.copyrighttitle"),embedDescription:this.translate.instant("core.h5p.embedtitle"),h5pDescription:this.translate.instant("core.h5p.h5ptitle"),contentChanged:this.translate.instant("core.h5p.contentchanged"),startingOver:this.translate.instant("core.h5p.startingover"),by:this.translate.instant("core.h5p.by"),showMore:this.translate.instant("core.h5p.showmore"),showLess:this.translate.instant("core.h5p.showless"),subLevel:this.translate.instant("core.h5p.sublevel"),confirmDialogHeader:this.translate.instant("core.h5p.confirmdialogheader"),confirmDialogBody:this.translate.instant("core.h5p.confirmdialogbody"),cancelLabel:this.translate.instant("core.h5p.cancellabel"),confirmLabel:this.translate.instant("core.h5p.confirmlabel"),licenseU:this.translate.instant("core.h5p.undisclosed"),licenseCCBY:this.translate.instant("core.h5p.ccattribution"),licenseCCBYSA:this.translate.instant("core.h5p.ccattributionsa"),licenseCCBYND:this.translate.instant("core.h5p.ccattributionnd"),licenseCCBYNC:this.translate.instant("core.h5p.ccattributionnc"),licenseCCBYNCSA:this.translate.instant("core.h5p.ccattributionncsa"),licenseCCBYNCND:this.translate.instant("core.h5p.ccattributionncnd"),licenseCC40:this.translate.instant("core.h5p.licenseCC40"),licenseCC30:this.translate.instant("core.h5p.licenseCC30"),licenseCC25:this.translate.instant("core.h5p.licenseCC25"),licenseCC20:this.translate.instant("core.h5p.licenseCC20"),licenseCC10:this.translate.instant("core.h5p.licenseCC10"),licenseGPL:this.translate.instant("core.h5p.licenseGPL"),licenseV3:this.translate.instant("core.h5p.licenseV3"),licenseV2:this.translate.instant("core.h5p.licenseV2"),licenseV1:this.translate.instant("core.h5p.licenseV1"),licensePD:this.translate.instant("core.h5p.pd"),licenseCC010:this.translate.instant("core.h5p.licenseCC010"),licensePDM:this.translate.instant("core.h5p.pdm"),licenseC:this.translate.instant("core.h5p.copyrightstring"),contentType:this.translate.instant("core.h5p.contenttype"),licenseExtras:this.translate.instant("core.h5p.licenseextras"),changes:this.translate.instant("core.h5p.changelog"),contentCopied:this.translate.instant("core.h5p.contentCopied"),connectionLost:this.translate.instant("core.h5p.connectionLost"),connectionReestablished:this.translate.instant("core.h5p.connectionReestablished"),resubmitScores:this.translate.instant("core.h5p.resubmitScores"),offlineDialogHeader:this.translate.instant("core.h5p.offlineDialogHeader"),offlineDialogBody:this.translate.instant("core.h5p.offlineDialogBody"),offlineDialogRetryMessage:this.translate.instant("core.h5p.offlineDialogRetryMessage"),offlineDialogRetryButtonLabel:this.translate.instant("core.h5p.offlineDialogRetryButtonLabel"),offlineSuccessfulSubmit:this.translate.instant("core.h5p.offlineSuccessfulSubmit")}},e.prototype.libraryFromString=function(e){var t=e.match(/^([\w0-9\-\.]{1,255})[\-\ ]([0-9]{1,5})\.([0-9]{1,5})$/i);return t&&t.length>=4?{machineName:t[1],majorVersion:Number(t[2]),minorVersion:Number(t[3])}:null},e.prototype.libraryParameterValuesToCsv=function(e,t,n){if(void 0===n&&(n="path"),void 0!==e[t]){var o=[];return e[t].forEach(function(e){for(var t in e)t===n&&o.push(e[t])}),o.join(",")}return""},e.prototype.slugify=function(e){e=(e=e||"").toLowerCase();for(var t="",n=0;n<e.length;n++){var o=e[n];t+=this.SLUGIFY_MAP[o]||o}return t=t.replace(/[^a-z0-9]/g,"-"),t=t.replace(/-{2,}/g,"-"),(t=t.replace(/(^-+|-+$)/g,"")).length>91&&(t=t.substr(0,92)),""===t&&(t="interactive"),t},e.prototype.textAddonMatches=function(e,t){if("string"==typeof e){if(e.match(t))return!0}else if("object"==typeof e)for(var n in e){if(this.textAddonMatches(e[n],t))return!0}return!1},e=a([Object(o.A)(),s("design:paramtypes",[r.c,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var o=n(0),r=n(88),i=n(125),l=n(1087),a=n(774),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=[i.a,l.a],d=function(){function e(e,t){e.register(t)}return e=s([Object(o.I)({declarations:[],imports:[a.a],providers:c}),u("design:paramtypes",[r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var o=n(0),r=n(170),i=n(487),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=[r.a,i.a],s=function(){function e(){}return e=l([Object(o.I)({declarations:[],imports:[],providers:a})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var o=n(0),r=n(128),i=n(73),l=n(117),a=n(609),s=n(610),u=n(138),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=[r.a,i.a,l.a,u.a],f=function(){function e(){}return e=c([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a,u.a,a.a,s.a],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1088),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="CoreQuestionDefault",t.type="default",t}return i(t,e),t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1089),i=n(128),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.questionProvider=t,n.name="CoreQuestionBehaviourDefault",n.type="default",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p});var o=n(0),r=n(5),i=n(488),l=n(502),a=n(1090),s=n(445),u=n(9),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=[i.a,l.a],p=function(){function e(e,t,n,o,r){if(t.registerHandler(n),e.is("ios")){var i=0;o.searchIOSNewSharedFiles(),e.resume.subscribe(function(){setTimeout(function(){Date.now()-i<1e3||(i=Date.now(),o.searchIOSNewSharedFiles())},200)}),r.on(u.a.APP_LAUNCHED_URL,function(e){e&&0===e.indexOf("file://")&&(i=Date.now(),o.searchIOSNewSharedFiles(e))})}}return e=c([Object(o.I)({declarations:[],imports:[],providers:[i.a,l.a,a.a]}),d("design:paramtypes",[r.v,s.a,a.a,l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var o=n(0),r=n(232),i=n(1091),l=n(62),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=[r.a],c=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a],exports:[]}),s("design:paramtypes",[l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return I}),n.d(t,"b",function(){return R});var o=n(0),r=n(104),i=n(191),l=n(46),a=n(739),s=n(1092),u=n(9),c=n(1),d=n(62),f=n(1093),p=n(1094),h=n(1095),m=n(102),_=n(483),g=n(88),v=n(446),y=n(615),b=n(1096),P=n(204),O=n(1097),E=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=[r.a,i.a,l.a,a.a,v.a,y.a],R=function(){function e(e,t,n,o,r,i,l,a,s,c,d,f,p,h){e.registerHandler(t),c.registerHandler(a),i.registerHandler(l),i.registerHandler(s),d.register(f),p.registerHandler(h),n.on(u.a.USER_DELETED,function(e){var t=e.params,n=0;t.userid?n=t.userid:t.userids?n=t.userids[0]:"id"===t.field&&t.values&&t.values.length?n=t.values[0]:t.userlist&&t.userlist.length&&(n=t.userlist[0].userid),n>0&&r.deleteStoredUser(n,e.siteId)},o.getCurrentSiteId())}return e=E([Object(o.I)({declarations:[],imports:[_.a],providers:[r.a,i.a,l.a,a.a,v.a,y.a,s.a,f.a,p.a,h.a,b.a,O.a]}),C("design:paramtypes",[r.a,s.a,u.a,c.a,l.a,d.a,f.a,p.a,h.a,m.a,g.a,b.a,P.a,O.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",Array)],e.prototype,"items",void 0),e=r([Object(o.m)({selector:"core-user-tag-area",templateUrl:"core-user-tag-area.html"})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(6),i=n(1),l=n(148),a=n(10),s=n(446),u=n(46),c=n(11),d=n(24),f=n(2),p=n(3),h=n(81),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,"CoreUserSync",t,n,o,i,l,r,c)||this;return d.userOffline=a,d.userProvider=s,d.utils=u,d}return m(t,e),t.prototype.syncPreferences=function(e){return this.syncOnSites("all user preferences",this.syncPreferencesFunc.bind(this),[],e)},t.prototype.syncPreferencesFunc=function(e){var t=this;e=e||this.sitesProvider.getCurrentSiteId();if(this.isSyncing("preferences",e))return this.getOngoingSync("preferences",e);var n=[];this.logger.debug("Try to sync user preferences");var o=this.userOffline.getChangedPreferences(e).then(function(o){return t.utils.allPromises(o.map(function(o){return t.userProvider.getUserPreferenceOnline(o.name,e).then(function(r){return o.onlinevalue!=r?t.userOffline.setPreference(o.name,r,r,e):t.userProvider.setUserPreference(o.name,o.value,e).catch(function(e){if(!t.utils.isWebServiceError(e))return Promise.reject(e);n.push(t.textUtils.getErrorMessageFromError(e))})})}))}).then(function(){return n});return this.addOngoingSync("preferences",o,e)},t.AUTO_SYNCED="core_user_autom_synced",t=_([Object(o.A)(),g("design:paramtypes",[r.a,i.a,a.a,p.c,h.a,c.a,s.a,u.a,f.a,d.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return _});var o=n(0),r=n(5),i=n(136),l=n(144),a=n(1098),s=n(1099),u=n(88),c=n(9),d=n(6),f=n(151),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=[i.a,l.a],_=function(){function e(e,t,n,o,r,l,a,s){var u=r.getInstance("CorePushNotificationsModule");l.register(a),l.register(s),e.ready().then(function(){t.registerDevice()}),n.on(c.a.NOTIFICATION_SOUND_CHANGED,function(){t.registerDevice()}),n.on(c.a.LOGIN,function(){t.registerDeviceOnMoodle().catch(function(e){u.warn("Can't register device",e)})}),n.on(c.a.SITE_DELETED,function(e){t.unregisterDeviceOnMoodle(e).catch(function(e){u.warn("Can't unregister device",e)}),t.cleanSiteCounters(e.id)}),o.registerClick(i.a.COMPONENT,function(e){t.logEvent("moodle_notification_open",e,!0),t.notificationClicked(e)}),o.registerObserver("clear",i.a.COMPONENT,function(e){t.logEvent("moodle_notification_dismiss",e,!0)})}return e=p([Object(o.I)({declarations:[],imports:[],providers:[i.a,l.a,a.a,s.a]}),h("design:paramtypes",[r.v,i.a,c.a,f.a,d.a,u.a,a.a,s.a])],e)}()},function(e,t,n){"use strict";var o=n(0),r=n(5),i=n(568),l=n(355),a=n(437),s=n(490),u=n(309),c=n(438),d=n(439),f=n(360),p=n(426),h=n(436),m=n(348),_=n(354),g=n(442),v=n(185),y=n(353),b=n(754),P=n(554),O=n(555),E=n(566),C=n(435),I=n(10),R=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},S=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=function(){function e(e){this.appProvider=e}return e.prototype.clear=function(){return Promise.reject("clear is only supported in mobile devices")},e.prototype.set=function(e){if(!this.appProvider.isDesktop())return Promise.reject("set is not supported in browser");try{return n(131).remote.app.setBadgeCount(e)?Promise.resolve():Promise.reject(null)}catch(e){return Promise.reject(e)}},e.prototype.get=function(){if(!this.appProvider.isDesktop())return Promise.reject("get is not supported in browser");try{var e=n(131).remote.app;return Promise.resolve(e.getBadgeCount())}catch(e){return Promise.reject(e)}},e.prototype.increase=function(e){return Promise.reject("increase is only supported in mobile devices")},e.prototype.decrease=function(e){return Promise.reject("decrease is only supported in mobile devices")},e.prototype.isSupported=function(){return Promise.reject("isSupported is only supported in mobile devices")},e.prototype.hasPermission=function(){return Promise.reject("hasPermission is only supported in mobile devices")},e.prototype.requestPermission=function(){return Promise.reject("requestPermission is only supported in mobile devices")},e=R([Object(o.A)(),S("design:paramtypes",[I.a])],e)}(),A=n(358),D=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),j=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},k=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T=function(e){function t(t){var n=e.call(this)||this;return n.captureHelper=t,n}return D(t,e),t.prototype.cleanup=function(){return Promise.resolve()},t.prototype.getPicture=function(e){return this.captureHelper.captureMedia("image",e)},t=j([Object(o.A)(),k("design:paramtypes",[A.a])],t)}(l.a),x=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},N=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},U=function(e){function t(t){var o=e.call(this)||this;return o.isDesktop=t.isDesktop(),o.isDesktop?o.clipboard=n(131).clipboard:(o.copyTextarea=document.createElement("textarea"),o.copyTextarea.className="core-browser-copy-area",o.copyTextarea.setAttribute("aria-hidden","true"),document.body.appendChild(o.copyTextarea)),o}return x(t,e),t.prototype.copy=function(e){var t=this;return new Promise(function(n,o){if(t.isDesktop)t.clipboard.writeText(e),n();else{t.copyTextarea.innerHTML=e,t.copyTextarea.select();try{document.execCommand("copy")?n():o()}catch(e){o()}t.copyTextarea.innerHTML=""}})},t.prototype.paste=function(){var e=this;return new Promise(function(t,n){if(e.isDesktop)t(e.clipboard.readText());else{e.copyTextarea.innerHTML="",e.copyTextarea.select();try{document.execCommand("paste")?t(e.copyTextarea.innerHTML):n()}catch(e){n()}e.copyTextarea.innerHTML=""}})},t=M([Object(o.A)(),N("design:paramtypes",[I.a])],t)}(a.a),F=n(66),L=n(11),H=n(116),B=n(1913),q=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},V=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},K=function(e){function t(t,n,o){var r=e.call(this)||this;return r.appProvider=t,r.textUtils=n,r.mimeUtils=o,r}return q(t,e),t.prototype.checkDir=function(e,t){var n=this.textUtils.concatenatePaths(e,t);return this.resolveDirectoryUrl(n).then(function(){return!0})},t.prototype.checkFile=function(e,t){return this.resolveLocalFilesystemUrl(this.textUtils.concatenatePaths(e,t)).then(function(e){if(e.isFile)return!0;var t=new u.FileError(13);return t.message="input is not a file",Promise.reject(t)})},t.prototype.copyMock=function(e,t,n){var o=this;return new Promise(function(r,i){n=n.replace(/%20/g," "),e.copyTo(t,n,function(e){r(e)},function(e){o.fillErrorMessageMock(e),i(e)})})},t.prototype.copyDir=function(e,t,n,o){var r=this;return this.resolveDirectoryUrl(e).then(function(e){return r.getDirectory(e,t,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(n).then(function(t){return r.copyMock(e,t,o)})})},t.prototype.copyFile=function(e,t,n,o){var r=this;return o=o||t,this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,t,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(n).then(function(t){return r.copyMock(e,t,o)})})},t.prototype.createDir=function(e,t,n){var o=this,r={create:!0};return n||(r.exclusive=!0),this.resolveDirectoryUrl(e).then(function(e){return o.getDirectory(e,t,r)})},t.prototype.createFile=function(e,t,n){var o=this,r={create:!0};return n||(r.exclusive=!0),this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,t,r)})},t.prototype.createWriterMock=function(e){var t=this;return new Promise(function(n,o){e.createWriter(function(e){n(e)},function(e){t.fillErrorMessageMock(e),o(e)})})},t.prototype.emulateCordovaFileForDesktop=function(e){var t=this;this.appProvider.isDesktop()&&(window.resolveLocalFileSystemURL=function(n,o,r){e.stat(n,function(e,i){if(e)r&&r(e);else{var l=i.isDirectory()?B.a:B.b,a=n.substr(n.lastIndexOf("/")+1);o&&o(new l(t.textUtils,t.mimeUtils,a,n))}})})},t.prototype.fillErrorMessageMock=function(e){try{e.message=this.cordovaFileError[e.code]}catch(e){}},t.prototype.getDirectory=function(e,t,n){var o=this;return new Promise(function(r,i){try{t=t.replace(/%20/g," "),e.getDirectory(t,n,function(e){r(e)},function(e){o.fillErrorMessageMock(e),i(e)})}catch(e){o.fillErrorMessageMock(e),i(e)}})},t.prototype.getFile=function(e,t,n){var o=this;return new Promise(function(r,i){try{t=t.replace(/%20/g," "),e.getFile(t,n,r,function(e){o.fillErrorMessageMock(e),i(e)})}catch(e){o.fillErrorMessageMock(e),i(e)}})},t.prototype.getFreeDiskSpace=function(){return window.requestFileSystem?new Promise(function(e,t){var n=0,o=50,r=function(e,t){return new Promise(function(i,l){window.requestFileSystem(LocalFileSystem.PERSISTENT,e,function(){++n>o?i(e):r(e*t,t).then(i)},function(){i(e/t)})})};r(1048576,1.3).then(function(t){n=0,o=10,r(t,1.1).then(function(t){e(t/1024)})})}):Promise.reject(null)},t.prototype.listDir=function(e,t){var n=this;return this.resolveDirectoryUrl(e).then(function(e){return n.getDirectory(e,t,{create:!1,exclusive:!1})}).then(function(e){var t=e.createReader();return n.readEntriesMock(t)})},t.prototype.load=function(){var e=this;return new Promise(function(t,o){var r,i=window;if(void 0===i.requestFileSystem&&(i.requestFileSystem=i.webkitRequestFileSystem),void 0===i.resolveLocalFileSystemURL&&(i.resolveLocalFileSystemURL=i.webkitResolveLocalFileSystemURL),i.LocalFileSystem={PERSISTENT:1},e.appProvider.isDesktop()){var l=n(451),a=n(131).remote.app;if(e.emulateCordovaFileForDesktop(l),!(r=a.getPath("documents")||a.getPath("home")))return void o("Cannot calculate base path for file system.");r=e.textUtils.concatenatePaths(r.replace(/\\/g,"/"),H.a.app_id)+"/",l.mkdir(r,function(e){!e||e&&"EEXIST"===e.code?t(r):o("Error creating base path.")})}else navigator.webkitPersistentStorage.requestQuota(524288e3,function(e){window.requestFileSystem(LocalFileSystem.PERSISTENT,e,function(e){r=e.root.toURL(),t(r)},o)},o)})},t.prototype.moveMock=function(e,t,n){var o=this;return new Promise(function(r,i){n=n.replace(/%20/g," "),e.moveTo(t,n,function(e){r(e)},function(e){o.fillErrorMessageMock(e),i(e)})})},t.prototype.moveDir=function(e,t,n,o){var r=this;return this.resolveDirectoryUrl(e).then(function(e){return r.getDirectory(e,t,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(n).then(function(t){return r.moveMock(e,t,o)})})},t.prototype.moveFile=function(e,t,n,o){var r=this;return o=o||t,this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,t,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(n).then(function(t){return r.moveMock(e,t,o)})})},t.prototype.readAsArrayBuffer=function(e,t){return this.readFileMock(e,t,"ArrayBuffer")},t.prototype.readAsBinaryString=function(e,t){return this.readFileMock(e,t,"BinaryString")},t.prototype.readAsDataURL=function(e,t){return this.readFileMock(e,t,"DataURL")},t.prototype.readAsText=function(e,t){return this.readFileMock(e,t,"Text")},t.prototype.readEntriesMock=function(e){var t=this;return new Promise(function(n,o){e.readEntries(function(e){n(e)},function(e){t.fillErrorMessageMock(e),o(e)})})},t.prototype.readFileMock=function(e,t,n){var o=this;return this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,t,{create:!1})}).then(function(e){var t=new FileReader;return new Promise(function(o,r){t.onloadend=function(){void 0!==t.result||null!==t.result?o(t.result):r(void 0!==t.error||null!==t.error?t.error:{code:null,message:"READER_ONLOADEND_ERR"})},e.file(function(e){t["readAs"+n].call(t,e)},function(e){r(e)})})})},t.prototype.removeMock=function(e){var t=this;return new Promise(function(n,o){e.remove(function(){n({success:!0,fileRemoved:e})},function(e){t.fillErrorMessageMock(e),o(e)})})},t.prototype.removeDir=function(e,t){var n=this;return this.resolveDirectoryUrl(e).then(function(e){return n.getDirectory(e,t,{create:!1})}).then(function(e){return n.removeMock(e)})},t.prototype.removeFile=function(e,t){var n=this;return this.resolveDirectoryUrl(e).then(function(e){return n.getFile(e,t,{create:!1})}).then(function(e){return n.removeMock(e)})},t.prototype.removeRecursively=function(e,t){var n=this;return this.resolveDirectoryUrl(e).then(function(e){return n.getDirectory(e,t,{create:!1})}).then(function(e){return n.rimrafMock(e)})},t.prototype.resolveDirectoryUrl=function(e){return this.resolveLocalFilesystemUrl(e).then(function(e){if(e.isDirectory)return e;var t=new u.FileError(13);return t.message="input is not a directory",Promise.reject(t)})},t.prototype.resolveLocalFilesystemUrl=function(e){var t=this;return new Promise(function(n,o){try{window.resolveLocalFileSystemURL(e,function(e){n(e)},function(e){t.fillErrorMessageMock(e),o(e)})}catch(e){t.fillErrorMessageMock(e),o(e)}})},t.prototype.rimrafMock=function(e){var t=this;return new Promise(function(n,o){e.removeRecursively(function(){n({success:!0,fileRemoved:e})},function(e){t.fillErrorMessageMock(e),o(e)})})},t.prototype.writeMock=function(e,t){return t instanceof Blob?this.writeFileInChunksMock(e,t):new Promise(function(n,o){e.onwriteend=function(t){e.error?o(e.error):n(t)},e.write(t)})},t.prototype.writeExistingFile=function(e,t,n){return this.writeFile(e,t,n,{replace:!0})},t.prototype.writeFile=function(e,t,n,o){var r=this;void 0===o&&(o={});var i={create:!o.append,exclusive:!o.replace};return this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,t,i)}).then(function(e){return r.writeFileEntryMock(e,n,o)})},t.prototype.writeFileEntryMock=function(e,t,n){var o=this;return this.createWriterMock(e).then(function(e){return n.append&&e.seek(e.length),n.truncate&&e.truncate(n.truncate),o.writeMock(e,t)}).then(function(){return e})},t.prototype.writeFileInChunksMock=function(e,t){var n=0,o=function(){var o=Math.min(1048576,t.size-n),r=t.slice(n,n+o);n+=o,e.write(r)};return new Promise(function(r,i){e.onerror=i,e.onwriteend=function(){n<t.size?o():r()},o()})},t=G([Object(o.A)(),V("design:paramtypes",[I.a,L.a,F.a])],t)}(u.a),W=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),z=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},$=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Y=function(e){function t(t){var n=e.call(this)||this;return n.appProvider=t,n}return W(t,e),t.prototype.appIsInstalled=function(e){return Promise.reject("appIsInstalled not supported in browser or dekstop.")},t.prototype.open=function(e,t){if(this.appProvider.isDesktop()){if(!n(131).ipcRenderer.sendSync("openItem",e))return Promise.reject("Error opening file")}else window.open(e,"_blank");return Promise.resolve()},t.prototype.uninstall=function(e){return Promise.reject("uninstall not supported in browser or dekstop.")},t=z([Object(o.A)(),$("design:paramtypes",[I.a])],t)}(c.a),Q=n(1051),X=n(146),J=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t.prototype.getCurrentPosition=function(e){return new Promise(function(t,n){return navigator.geolocation.getCurrentPosition(t,n,e)})},t.prototype.watchPosition=function(e){return new X.Observable(function(t){var n=navigator.geolocation.watchPosition(t.next.bind(t),t.error.bind(t),e);return function(){navigator.geolocation.clearWatch(n)}})},t=Z([Object(o.A)()],t)}(f.a),te=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ne=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},oe=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},re=function(){function e(e,t){this.code=e,this.message=t}return e.UNKNOWN_ERROR=0,e.FORMATTING_ERROR=1,e.PARSING_ERROR=2,e.PATTERN_ERROR=3,e}(),ie=function(e){function t(t){var n=e.call(this)||this;return n.appProvider=t,n}return te(t,e),t.prototype.dateToString=function(e,t){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.getCurrencyPattern=function(e){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.getCurrentlocale=function(){var e=navigator.userLanguage||navigator.language;try{return this.appProvider.isDesktop()?n(131).remote.app.getLocale()||e:e}catch(t){return e}},t.prototype.getDateNames=function(e){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.getDatePattern=function(e){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.getFirstDayOfWeek=function(){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.getLocaleName=function(){var e=this.getCurrentlocale();if(e)return Promise.resolve({value:e});var t=new re(re.UNKNOWN_ERROR,"Cannot get language");return Promise.reject(t)},t.prototype.getNumberPattern=function(e){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.getPreferredLanguage=function(){return this.getLocaleName()},t.prototype.isDayLightSavingsTime=function(e){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.numberToString=function(e,t){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.stringToDate=function(e,t){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t.prototype.stringToNumber=function(e,t){return Promise.reject(new re(re.UNKNOWN_ERROR,"Not supported."))},t=ne([Object(o.A)(),oe("design:paramtypes",[I.a])],t)}(p.a),le=n(57),ae=n(22),se=function(){function e(e,t,o,r,i,l){if(void 0===l&&(l="location=yes"),this.fileProvider=t,this.urlUtils=o,this.url=r,e.isDesktop()){this.browserWindow=n(131).remote.BrowserWindow,this.screen=n(131).screen,this.isSSO=!(!r||!r.match(/\/launch\.php\?service=.+&passport=/));var a,s=800,u=600,c={webPreferences:{}};try{c.webPreferences.session=n(131).remote.session.fromPartition("inappbrowsersession")}catch(e){}if(screen&&(a=this.screen.getPrimaryDisplay())&&a.workArea&&(s=a.workArea.width||s,u=a.workArea.height||u),c.width=s,c.height=u,-1!=l.indexOf("hidden=yes")&&(c.show=!1),-1!=l.indexOf("location=no")&&(c.frame=!1),-1!=l.indexOf("fullscreen=yes")&&(c.fullscreen=!0),-1!=l.indexOf("clearsessioncache=yes")&&c.webPreferences.session&&c.webPreferences.session.clearStorageData({storages:"cookies"}),this.window=new this.browserWindow(c),this.window.loadURL(r),this.isSSO){this.window.webContents.setUserAgent("Mozilla/5.0 (iPad) AppleWebKit/603.3.8 (KHTML, like Gecko) Mobile/14G60")}}}return e.prototype.close=function(){if(!this.window.isDestroyed())try{this.window.close()}catch(e){}},e.prototype.executeScript=function(e){var t=this;return new Promise(function(n,o){e.code?t.window.webContents.executeJavaScript(e.code,!1,n):e.file?t.fileProvider.readFile(e.file).then(function(e){t.window.webContents.executeJavaScript(e,!1,n)}).catch(o):o("executeScript requires exactly one of code or file to be specified")})},e.prototype.getLaunchUrl=function(e){var t=this;return void 0===e&&(e=0),this.window.isDestroyed()?Promise.reject(null):new Promise(function(n,o){var r=!1;t.window.webContents.executeJavaScript('var el = document.querySelector("#launchapp"); el && el.href;').then(function(e){r=!0,n(e)}),setTimeout(function(){r||(e>5?o():t.getLaunchUrl(e+1).then(n,o))},300)})},e.prototype.hide=function(){this.window.hide()},e.prototype.insertCSS=function(e){var t=this;return new Promise(function(n,o){e.code?(t.window.webContents.insertCSS(e.code),n()):e.file?t.fileProvider.readFile(e.file).then(function(e){t.window.webContents.insertCSS(e),n()}).catch(o):o("insertCSS requires exactly one of code or file to be specified")})},e.prototype.on=function(e){var t=this;return new X.Observable(function(n){var o=function(o,r){try{o.url=r||(t.window.isDestroyed()?"":t.window.getURL()),o.type=e,n.next(o)}catch(e){}},r=function(e){t.urlUtils.removeUrlParams(t.url)==t.urlUtils.removeUrlParams(t.window.getURL())&&t.getLaunchUrl().then(function(t){t&&o(e,t)})};if(!t.window.isDestroyed()&&!t.window.webContents.isDestroyed())switch(e){case"loadstart":t.window.webContents.on("did-start-loading",o),t.isSSO&&t.window.webContents.on("did-finish-load",r);break;case"loadstop":t.window.webContents.on("did-finish-load",o);break;case"loaderror":t.window.webContents.on("did-fail-load",o);break;case"exit":t.window.on("close",o)}return function(){if(!t.window.isDestroyed()&&!t.window.webContents.isDestroyed())switch(e){case"loadstart":t.window.webContents.removeListener("did-start-loading",o),t.window.webContents.removeListener("did-finish-load",r);break;case"loadstop":t.window.webContents.removeListener("did-finish-load",o);break;case"loaderror":t.window.webContents.removeListener("did-fail-load",o);break;case"exit":t.window.removeListener("close",o)}}})},e.prototype.show=function(){this.window.show()},e}(),ue=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ce=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},de=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},fe=function(e){function t(t,n,o){var r=e.call(this)||this;return r.appProvider=t,r.fileProvider=n,r.urlUtils=o,r}return ue(t,e),t.prototype.create=function(t,n,o){return void 0===o&&(o="location=yes"),o&&"string"!=typeof o&&(o=Object.keys(o).map(function(e){return e+"="+o[e]}).join(",")),this.appProvider.isDesktop()?new se(this.appProvider,this.fileProvider,this.urlUtils,t,n,o):e.prototype.create.call(this,t,n,o)},t=ce([Object(o.A)(),de("design:paramtypes",[I.a,le.a,ae.a])],t)}(h.a),pe=n(2),he=n(40),me=n(14),_e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ge=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},ve=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ye=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},be=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},Pe=function(e){function t(t,n,o){var r=e.call(this)||this;return r.appProvider=t,r.utils=n,r.textUtils=o,r.toastTemplate='<toast><visual><binding template="ToastText02"><text id="1" hint-wrap="true">%s</text><text id="2" hint-wrap="true">%s</text></binding></visual></toast>',r.tileBindingTemplate='<text hint-style="base" hint-wrap="true">%s</text><text hint-style="captionSubtle" hint-wrap="true">%s</text>',r.tileTemplate='<tile><visual branding="nameAndLogo"><binding template="TileMedium">'+r.tileBindingTemplate+'</binding><binding template="TileWide">'+r.tileBindingTemplate+'</binding><binding template="TileLarge">'+r.tileBindingTemplate+"</binding></visual></tile>",r.DESKTOP_NOTIFS_TABLE="desktop_local_notifications",r.tableSchema={name:"LocalNotificationsMock",version:1,tables:[{name:r.DESKTOP_NOTIFS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"title",type:"TEXT"},{name:"text",type:"TEXT"},{name:"at",type:"INTEGER"},{name:"data",type:"TEXT"},{name:"triggered",type:"INTEGER"}]}]},r.scheduled={},r.triggered={},r.defaults={actions:[],attachments:[],autoClear:!0,badge:null,channel:null,clock:!0,color:null,data:null,defaults:0,foreground:null,group:null,groupSummary:!1,icon:null,id:0,launch:!0,led:!0,lockscreen:!0,mediaSession:null,number:0,priority:0,progressBar:!1,silent:!1,smallIcon:"res://icon",sound:!0,sticky:!1,summary:null,text:"",timeoutAfter:!1,title:"",trigger:{type:"calendar"},vibrate:!1,wakeup:!0},r.appDB=t.getDB(),r.dbReady=t.createTablesFromSchema(r.tableSchema).catch(function(){}),r.observers={schedule:new X.Subject,trigger:new X.Subject,click:new X.Subject,update:new X.Subject,clear:new X.Subject,clearall:new X.Subject,cancel:new X.Subject,cancelall:new X.Subject},r}return _e(t,e),t.prototype.addActions=function(e,t){return Promise.reject("Not supported in desktop apps.")},t.prototype.cancel=function(e){var t=this,n=[];return e=Array.isArray(e)?e:[e],(e=this.convertIds(e)).forEach(function(e){t.scheduled[e]&&n.push(t.cancelNotification(e,!1,"cancel"))}),Promise.all(n)},t.prototype.cancelAll=function(){var e=this;return this.cancel(Object.keys(this.scheduled)).then(function(){e.fireEvent("cancelall",{event:"cancelall",foreground:!0,queued:!1})})},t.prototype.cancelNotification=function(e,t,n){if(this.scheduled[e]){var o=this.scheduled[e].notification;clearTimeout(this.scheduled[e].timeout),clearInterval(this.scheduled[e].interval),delete this.scheduled[e],delete this.triggered[e],this.removeNotification(e),t||this.fireEvent(n,o)}},t.prototype.clear=function(e){var t=this,n=[];return e=Array.isArray(e)?e:[e],(e=this.convertIds(e)).forEach(function(e){!t.scheduled[e]||!t.scheduled[e].notification||t.scheduled[e].notification.trigger&&t.scheduled[e].notification.trigger.every||n.push(t.cancelNotification(e,!1,"clear"))}),Promise.all(n)},t.prototype.clearAll=function(){var e=this;return this.clear(Object.keys(this.scheduled)).then(function(){e.fireEvent("clearall",{event:"clearall",foreground:!0,queued:!1})})},t.prototype.convertIds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Number(e[n]));return t},t.prototype.convertProperties=function(e){return e.id&&(e.id=this.parseToInt("id",e)),e.title&&(e.title=e.title.toString()),e.badge&&(e.badge=this.parseToInt("badge",e)),e.defaults&&(e.defaults=this.parseToInt("defaults",e)),"boolean"==typeof e.timeoutAfter&&(e.timeoutAfter=e.timeoutAfter?36e5:null),e.timeoutAfter&&(e.timeoutAfter=this.parseToInt("timeoutAfter",e)),this.convertPriority(e),this.convertTrigger(e),this.convertActions(e),this.convertProgressBar(e),e},t.prototype.parseToInt=function(e,t){return isNaN(t[e])?this.defaults[e]:Number(t[e])},t.prototype.convertPriority=function(e){var t=e.priority||e.prio||0;return"string"==typeof t&&(t={min:-2,low:-1,high:1,max:2}[t]||0),!0===e.foreground&&(t=Math.max(t,1)),!1===e.foreground&&(t=Math.min(t,0)),e.priority=t,e},t.prototype.convertActions=function(e){var t=[];if(!e.actions||"string"==typeof e.actions)return e;for(var n=0,o=e.actions.length;n<o;n++){var r=e.actions[n];r.id&&(r.id=r.id.toString(),t.push(r))}return e.actions=t,e},t.prototype.convertTrigger=function(e){var t=e.trigger||{},n=this.getValueFor(t,"at","firstAt","date"),o=function(e){var t="object"==typeof e?e.getTime():e;return Math.round(t)};if(!e.trigger)return e;t.type||(t.type=t.center?"location":"calendar");var r="calendar"==t.type;return r&&!n&&(n=this.getValueFor(e,"at","firstAt","date")),r&&!t.every&&e.every&&(t.every=e.every),r&&(t.in||t.every)&&(n=null),r&&n&&(t.at=o(n)),r&&t.firstAt&&(t.firstAt=o(t.firstAt)),r&&t.before&&(t.before=o(t.before)),r&&t.after&&(t.after=o(t.after)),t.count||(t.count=t.every?5:1),r||(t.notifyOnEntry=!!t.notifyOnEntry,t.notifyOnExit=!0===t.notifyOnExit,t.radius=t.radius||5,t.single=!!t.single),r&&!t.at||delete t.every,delete e.every,delete e.at,delete e.firstAt,delete e.date,e.trigger=t,e},t.prototype.convertProgressBar=function(e){var t=e.progressBar;return void 0===t?e:("boolean"==typeof t&&(t=e.progressBar={enabled:t}),"boolean"!=typeof t.enabled&&(t.enabled=!(!t.value&&!t.maxValue&&null===t.indeterminate)),t.value=t.value||0,t.enabled=!!t.enabled,t.enabled&&!0===e.clock&&(e.clock="chronometer"),e)},t.prototype.fireEvent=function(e,t){this.observers[e]&&this.observers[e].next(t)},t.prototype.fireQueuedEvents=function(){return Promise.resolve()},t.prototype.get=function(e){return Promise.resolve(this.getNotifications([Number(e)],!0,!0)[0])},t.prototype.getAll=function(){return Promise.resolve(this.getNotifications(void 0,!0,!0))},t.prototype.getDefaults=function(){return Promise.resolve(this.defaults)},t.prototype.getIds=function(){var e=this.utils.mergeArraysWithoutDuplicates(Object.keys(this.scheduled),Object.keys(this.triggered));return e=e.map(function(e){return Number(e)}),Promise.resolve(e)},t.prototype.getAllNotifications=function(){return ye(this,void 0,void 0,function(){var e,t=this;return be(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[4,this.appDB.getAllRecords(this.DESKTOP_NOTIFS_TABLE)];case 2:return(e=n.sent()).forEach(function(e){e.trigger={at:new Date(e.at)},e.data=t.textUtils.parseJSON(e.data),e.triggered=!!e.triggered,t.mergeWithDefaults(e)}),[2,e]}})})},t.prototype.getScheduled=function(){return Promise.resolve(this.getNotifications(void 0,!0,!1))},t.prototype.getTriggered=function(){return Promise.resolve(this.getNotifications(void 0,!1,!0))},t.prototype.getNotifications=function(e,t,n){var o=[];if(t)for(var r in this.scheduled)e&&-1==e.indexOf(Number(r))||o.push(this.scheduled[r].notification);if(n)for(var r in this.triggered)t&&this.scheduled[r]||e&&-1==e.indexOf(Number(r))||o.push(this.triggered[r].notification);return o},t.prototype.getNotificationTriggerAt=function(e){var t=e.trigger&&e.trigger.at||new Date;return"number"!=typeof t?t.getTime():t},t.prototype.getScheduledIds=function(){var e=Object.keys(this.scheduled).map(function(e){return Number(e)});return Promise.resolve(e)},t.prototype.getTriggeredIds=function(){var e=Object.keys(this.triggered).map(function(e){return Number(e)});return Promise.resolve(e)},t.prototype.getType=function(e){return this.scheduled[e]?Promise.resolve("scheduled"):this.triggered[e]?Promise.resolve("triggered"):Promise.resolve("unknown")},t.prototype.getValueFor=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o in t){var r=t[o];if(e.hasOwnProperty(r))return e[r]}},t.prototype.hasActions=function(e){return Promise.resolve(!1)},t.prototype.hasPermission=function(){return Promise.resolve(!0)},t.prototype.hasType=function(e,t){return this.getType(e).then(function(e){return t==e})},t.prototype.isPresent=function(e){return Promise.resolve(!!this.scheduled[e]||!!this.triggered[e])},t.prototype.isScheduled=function(e){return Promise.resolve(!!this.scheduled[e])},t.prototype.isTriggered=function(e){return Promise.resolve(!!this.triggered[e])},t.prototype.load=function(){var e=this;if(!this.appProvider.isDesktop())return Promise.resolve();if(this.appProvider.isWindows())try{this.winNotif=n(!function(){var e=new Error('Cannot find module "electron-windows-notifications"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}return this.getAllNotifications().catch(function(){return[]}).then(function(t){t.forEach(function(t){t.triggered?(delete t.triggered,e.scheduled[t.id]={notification:t},e.triggered[t.id]=t):(delete t.triggered,t.at=1e3*t.at,t.at-Date.now()>1e3*-he.a.SECONDS_HOUR&&e.schedule(t))})})},t.prototype.mergeWithDefaults=function(e){var t=this.getDefaults();t.hasOwnProperty("sticky")&&(e.sticky=this.getValueFor(e,"sticky","ongoing")),e.sticky&&!0!==e.autoClear&&(e.autoClear=!1),Object.assign(t,e);for(var n in t)null!==t[n]?e[n]=t[n]:delete e[n];return e},t.prototype.notificationClicked=function(e){this.fireEvent("click",e),n(131).ipcRenderer.send("focusApp")},t.prototype.on=function(e){return this.observers[e]},t.prototype.parseInterval=function(e){var t;return(e=String(e).toLowerCase())&&"undefined"!=e?"second"==e?t=1e3:"minute"==e?t=1e3*he.a.SECONDS_MINUTE:"hour"==e?t=1e3*he.a.SECONDS_HOUR:"day"==e?t=1e3*he.a.SECONDS_DAY:"week"==e?t=7*he.a.SECONDS_DAY*1e3:"month"==e?t=31*he.a.SECONDS_DAY*1e3:"quarter"==e?t=2190*he.a.SECONDS_HOUR*1e3:"year"==e?t=1e3*he.a.SECONDS_YEAR:(t=parseInt(e,10),isNaN(t)?t=0:t*=6e4):t=0,t},t.prototype.removeActions=function(e){return Promise.reject("Not supported in desktop apps.")},t.prototype.removeNotification=function(e){return ye(this,void 0,void 0,function(){return be(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.deleteRecords(this.DESKTOP_NOTIFS_TABLE,{id:e})]}})})},t.prototype.requestPermission=function(){return Promise.resolve(!0)},t.prototype.schedule=function(e){this.scheduleOrUpdate(e)},t.prototype.scheduleOrUpdate=function(e,t){var n=this;void 0===t&&(t="schedule"),(e=Array.isArray(e)?e:[e]).forEach(function(e){n.mergeWithDefaults(e),n.convertProperties(e),n.cancelNotification(e.id,!0,"cancel"),n.scheduled[e.id]={notification:e},n.storeNotification(e,!1);var o=n.getNotificationTriggerAt(e);if(!(Math.abs(me().diff(o,"days"))>15)){var r=o-Date.now();n.scheduled[e.id].timeout=setTimeout(function(){n.triggerNotification(e),n.triggered[e.id]=e,n.storeNotification(e,!0),n.fireEvent("trigger",e)},r),n.fireEvent(t,e)}})},t.prototype.setDefaults=function(e){return this.defaults=e,Promise.resolve()},t.prototype.storeNotification=function(e,t){return ye(this,void 0,void 0,function(){var n;return be(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:return o.sent(),n={id:e.id,title:e.title,text:e.text,at:this.getNotificationTriggerAt(e),data:e.data?JSON.stringify(e.data):"{}",triggered:t?1:0},[2,this.appDB.insertRecord(this.DESKTOP_NOTIFS_TABLE,n)]}})})},t.prototype.triggerNotification=function(e){var t=this;if(this.winNotif){(n=new this.winNotif.ToastNotification({appId:H.a.app_id,template:this.toastTemplate,strings:[e.title,e.text]})).on("activated",function(){t.notificationClicked(e)}),n.show();try{new this.winNotif.TileNotification({tag:e.id+"",template:this.tileTemplate,strings:[e.title,e.text,e.title,e.text,e.title,e.text],expirationTime:new Date(Date.now()+1e3*he.a.SECONDS_HOUR)}).show()}catch(e){console.warn("Error showing TileNotification. Please notice they only work with the app installed.",e)}}else{var n;(n=new Notification(e.title,{body:e.text})).onclick=function(){t.notificationClicked(e)}}},t.prototype.update=function(e){return this.scheduleOrUpdate(e,"update")},t=ge([Object(o.A)(),ve("design:paramtypes",[I.a,pe.a,L.a])],t)}(_.a),Oe=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ee=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},Ce=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ie=function(e){function t(t){var n=e.call(this)||this;return n.captureHelper=t,n}return Oe(t,e),t.prototype.captureAudio=function(e){return this.captureHelper.captureMedia("audio",e)},t.prototype.captureImage=function(e){return this.captureHelper.captureMedia("captureimage",e)},t.prototype.captureVideo=function(e){return this.captureHelper.captureMedia("video",e)},t=Ee([Object(o.A)(),Ce("design:paramtypes",[A.a])],t)}(g.a),Re=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Se=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},we=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ae=function(e){function t(){var t=e.call(this)||this;return window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"},t}return Re(t,e),t.prototype.onchange=function(){return X.Observable.merge(this.onConnect(),this.onDisconnect())},t.prototype.onConnect=function(){var e=new X.Subject;return window.addEventListener("online",function(t){e.next(t)},!1),e},t.prototype.onDisconnect=function(){var e=new X.Subject;return window.addEventListener("offline",function(t){e.next(t)},!1),e},t=Se([Object(o.A)(),we("design:paramtypes",[])],t)}(v.a),De=n(12),je=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},Te=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},xe=function(){function e(e){this.appProvider=e}return e.prototype.init=function(e){return new Me(this.appProvider)},e.prototype.hasPermission=function(){return Promise.reject("hasPermission is only supported in mobile devices")},e.prototype.createChannel=function(e){return Promise.reject("createChannel is only supported in mobile devices")},e.prototype.deleteChannel=function(e){return Promise.reject("deleteChannel is only supported in mobile devices")},e.prototype.listChannels=function(){return Promise.reject("listChannels is only supported in mobile devices")},e=ke([Object(o.A)(),Te("design:paramtypes",[I.a])],e)}(),Me=function(e){function t(t){var n=e.call(this,{})||this;return n.appProvider=t,n}return je(t,e),t.prototype.on=function(e){return De.Observable.empty()},t.prototype.unregister=function(){return Promise.reject("unregister is only supported in mobile devices")},t.prototype.setApplicationIconBadgeNumber=function(e){if(!this.appProvider.isDesktop())return Promise.reject("setApplicationIconBadgeNumber is not supported in browser");try{return n(131).remote.app.setBadgeCount(e)?Promise.resolve():Promise.reject(null)}catch(e){return Promise.reject(e)}},t.prototype.getApplicationIconBadgeNumber=function(){if(!this.appProvider.isDesktop())return Promise.reject("getApplicationIconBadgeNumber is not supported in browser");try{var e=n(131).remote.app;return Promise.resolve(e.getBadgeCount())}catch(e){return Promise.reject(e)}},t.prototype.finish=function(e){return Promise.reject("finish is only supported in mobile devices")},t.prototype.clearAllNotifications=function(){return Promise.reject("clearAllNotifications is only supported in mobile devices")},t.prototype.subscribe=function(e){return Promise.reject("subscribe is only supported in mobile devices")},t.prototype.unsubscribe=function(e){return Promise.reject("unsubscribe is only supported in mobile devices")},t}(y.b),Ne=n(1914),Ue=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fe=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},Le=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},He=function(e){function t(t,n){var o=e.call(this)||this;return o.file=t,o.textUtils=n,o}return Ue(t,e),t.prototype.createDir=function(e,t){for(var n=this,o=t.split("/"),r=Promise.resolve(),i=function(t){var i=o[t];r=r.then(function(){return n.file.createDir(e,i,!0).then(function(){e=n.textUtils.concatenatePaths(e,i)})})},l=0;l<o.length;l++)i(l);return r},t.prototype.unzip=function(e,t,n){var o=this;e=e.replace(/%20/g," "),t=t.replace(/%20/g," ");var r=e.substring(0,e.lastIndexOf("/")),i=e.substr(e.lastIndexOf("/")+1),l=new Ne;return this.file.readAsArrayBuffer(r,i).then(function(e){return l.loadAsync(e)}).then(function(){if(!l.files||!Object.keys(l.files).length)return 0;var e=t.substring(0,t.lastIndexOf("/")),n=t.substr(t.lastIndexOf("/")+1);return o.file.createDir(e,n,!0)}).then(function(){var e=[],r=Object.keys(l.files).length,i=0,a=function(a){var s=l.files[a],u=void 0;if(s.dir)u=o.createDir(t,a);else{var c,d=a.substring(0,a.lastIndexOf("/")),f=a.substr(a.lastIndexOf("/")+1),p=[];d&&p.push(o.createDir(t,d)),p.push(s.async("blob").then(function(e){c=e})),u=Promise.all(p).then(function(){var e=o.textUtils.concatenatePaths(t,d);return o.file.writeFile(e,f,c,{replace:!0})})}e.push(u.then(function(){i++,n&&n({loaded:i,total:r})}))};for(var s in l.files)a(s);return Promise.all(e).then(function(){return 0})}).catch(function(){return-1})},t=Fe([Object(o.A)(),Le("design:paramtypes",[u.a,L.a])],t)}(C.a),Be=n(310),qe=n(154);n.d(t,"b",function(){return Ke}),n.d(t,"a",function(){return lt}),n.d(t,"c",function(){return We}),n.d(t,"d",function(){return ze}),n.d(t,"i",function(){return $e}),n.d(t,"j",function(){return Ye}),n.d(t,"k",function(){return Qe}),n.d(t,"l",function(){return Xe}),n.d(t,"m",function(){return Je}),n.d(t,"n",function(){return Ze}),n.d(t,"o",function(){return et}),n.d(t,"p",function(){return tt}),n.d(t,"e",function(){return nt}),n.d(t,"f",function(){return ot}),n.d(t,"g",function(){return rt}),n.d(t,"h",function(){return it});var Ge=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},Ve=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ke=[i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a],We=function(e){return e.isMobile()?new i.a:new w(e)},ze=function(e,t){return e.isMobile()?new l.a:new T(t)},$e=function(e){return e.isMobile()?new a.a:new U(e)},Ye=function(e,t,n){return e.isMobile()?new u.a:new K(e,t,n)},Qe=function(e){return e.isMobile()?new c.a:new Y(e)},Xe=function(e,t){return e.isMobile()?new d.a:new Q.b(e,t)},Je=function(e){return e.isMobile()?new f.a:new ee},Ze=function(e){return e.isMobile()?new p.a:new ie(e)},et=function(e,t,n){return e.isDesktop()?new fe(e,t,n):new h.a},tt=function(e,t,n){return e.isMobile()?new _.a:new Pe(e,t,n)},nt=function(e,t){return e.isMobile()?new g.a:new Ie(t)},ot=function(e){return e.is("cordova")?new v.a:new Ae},rt=function(e){return e.isMobile()?new y.a:new xe(e)},it=function(e,t,n){return e.isMobile()?new C.a:new He(t,n)},lt=function(){function e(e,t,o,r){var i=window;e.isDesktop()&&(n(131).ipcRenderer.on("coreAppLaunched",function(e,t){void 0!==i.handleOpenURL&&i.handleOpenURL(t)}),n(131).ipcRenderer.on("coreAppFocused",function(){r.resume.emit()})),e.isMobile()||t.registerProcess(o)}return e=Ge([Object(o.I)({declarations:[],imports:[],providers:[{provide:i.a,deps:[I.a],useFactory:We},Be.a,A.a,{provide:l.a,deps:[I.a,A.a],useFactory:ze},{provide:a.a,deps:[I.a],useFactory:$e},s.a,{provide:u.a,deps:[I.a,L.a,F.a],useFactory:Ye},{provide:c.a,deps:[I.a],useFactory:Qe},{provide:d.a,deps:[I.a,le.a],useFactory:Xe},{provide:f.a,deps:[I.a],useFactory:Je},{provide:p.a,deps:[I.a],useFactory:Ze},{provide:h.a,deps:[I.a,le.a,ae.a],useFactory:et},m.a,{provide:_.a,deps:[I.a,pe.a,L.a],useFactory:tt},{provide:g.a,deps:[I.a,A.a],useFactory:nt},{provide:v.a,deps:[r.v],useFactory:ot},{provide:y.a,deps:[I.a],useFactory:rt},b.a,P.a,O.a,E.a,{provide:C.a,deps:[I.a,u.a,L.a],useFactory:it}]}),Ve("design:paramtypes",[I.a,qe.a,Be.a,r.v])],e)}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(5),i=n(52),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t,n){this.viewCtrl=t,this.coursesProvider=n,this.course=e.get("course")||{},this.prefetch=e.get("prefetch")||{}}return e.prototype.ngOnInit=function(){this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite()},e.prototype.action=function(e){this.viewCtrl.dismiss(e)},e=l([Object(o.m)({selector:"core-courses-course-options-menu",templateUrl:"core-courses-course-options-menu.html"}),a("design:paramtypes",[r.t,r.G,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return m});var o=n(0),r=n(284),i=n(1122),l=n(1123),a=n(1124),s=n(1125),u=n(62),c=n(104),d=n(144),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=[r.a],m=function(){function e(e,t,n,o,r,i,l){e.registerHandler(t),n.registerHandler(o),n.registerHandler(r),i.registerClickHandler(l)}return e=f([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a,a.a,s.a]}),p("design:paramtypes",[c.a,i.a,u.a,l.a,a.a,d.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return P});var o=n(0),r=n(186),i=n(275),l=n(276),a=n(478),s=n(1126),u=n(1127),c=n(1128),d=n(170),f=n(88),p=n(154),h=n(151),m=n(125),_=n(62),g=n(755),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=[r.a,i.a,l.a,a.a],P=function(){function e(e,t,n,o,i,l,a,s,u,c){e.registerHandler(t),a.register(s),u.registerHandler(c),n.ready().then(function(){o.scheduleAllSitesEventsNotifications()}),l.registerClick(r.a.COMPONENT,function(e){e.eventid&&n.ready().then(function(){o.isDisabled(e.siteId).then(function(t){t||o.canViewMonth(e.siteId).then(function(t){i.redirect(t?"AddonCalendarIndexPage":"AddonCalendarListPage",{eventId:e.eventid},e.siteId)})})})})}return e=v([Object(o.I)({declarations:[],imports:[g.a],providers:[r.a,i.a,l.a,a.a,s.a,u.a,c.a]}),y("design:paramtypes",[d.a,s.a,p.a,r.a,m.a,h.a,f.a,u.a,_.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return E});var o=n(0),r=n(165),i=n(375),l=n(1129),a=n(1130),s=n(1131),u=n(1132),c=n(1133),d=n(1134),f=n(1135),p=n(1136),h=n(749),m=n(102),_=n(170),g=n(104),v=n(62),y=n(144),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=[r.a,i.a],E=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u),l.registerHandler(c),d.registerClickHandler(f)}return e=b([Object(o.I)({declarations:[],imports:[h.a],providers:[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a]}),P("design:paramtypes",[_.a,a.a,m.a,l.a,g.a,s.a,v.a,u.a,c.a,d.a,f.a,y.a,p.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var o=n(0),r=n(389),i=n(751),l=n(1137),a=n(170),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=[r.a,i.a],d=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a]}),u("design:paramtypes",[a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return a});var o=n(0),r=n(393),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=[r.a],a=function(){function e(){}return e=i([Object(o.I)({declarations:[],imports:[],providers:[r.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return j}),n.d(t,"b",function(){return k});var o=n(0),r=n(185),i=n(161),l=n(380),a=n(503),s=n(1138),u=n(170),c=n(62),d=n(104),f=n(88),p=n(1139),h=n(630),m=n(631),_=n(1140),g=n(1141),v=n(1142),y=n(1143),b=n(1144),P=n(10),O=n(1),E=n(151),C=n(15),I=n(325),R=n(1145),S=n(144),w=n(2),A=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},D=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j=[i.a,l.a,a.a],k=function(){function e(e,t,n,o,r,l,a,s,u,c,d,f,p,h,m,_,g,v,y,b,P,O,E,C,I){e.registerHandler(t),n.registerHandler(o),n.registerHandler(r),n.registerHandler(C),a.registerHandler(l),a.registerHandler(O),a.registerHandler(E),s.register(u),s.register(t),y.registerHandler(v),b.registerClickHandler(I),c.onConnect().subscribe(function(){d.run(function(){f.syncAllDiscussions(void 0,!0)})});var R=function(e){m.isMessagingEnabledForSite(e.site).then(function(){_.isFeatureDisabled("CoreMainMenuDelegate_AddonMessages",e.site).then(function(t){t||m.invalidateDiscussionsCache(e.site).finally(function(){m.isGroupMessagingEnabledInSite(e.site).then(function(t){var n={},o="AddonMessagesIndexPage";t&&(o="AddonMessagesGroupConversationsPage"),e.convid&&t?n.conversationId=Number(e.convid):(e.userfromid||e.useridfrom)&&(n.discussionUserId=Number(e.userfromid||e.useridfrom)),g.goInSite(void 0,o,n,e.site)})})})})};p.isDesktop()&&h.registerClick(i.a.PUSH_SIMULATION_COMPONENT,R)}return e=A([Object(o.I)({declarations:[],imports:[],providers:[i.a,l.a,a.a,s.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,R.a,b.a]}),D("design:paramtypes",[u.a,s.a,c.a,v.a,g.a,p.a,d.a,f.a,y.a,r.a,o.M,a.a,P.a,E.a,i.a,O.a,C.a,R.a,I.a,S.a,w.a,h.a,m.a,_.a,b.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(104),i=n(1),l=n(161),a=n(631),s=n(9),u=n(4),c=n(3),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,i){var l=this;this.sitesProvider=e,this.messagesProvider=t,this.eventsProvider=n,this.domUtils=o,this.translate=i,this.name="AddonMessages:addContact",this.priority=800,this.type=r.a.TYPE_ACTION,this.disabled=!1,this.updateObs=n.on(a.a.UPDATED_EVENT,function(e){l.checkButton(e.userId)})}return t=e,e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){return e.id!=this.sitesProvider.getCurrentSiteUserId()},e.prototype.getDisplayData=function(e,n){var o=this;return this.checkButton(e.id),{icon:"",title:"",spinner:!1,class:"",action:function(e,n,r,i){e.preventDefault(),e.stopPropagation(),o.disabled||(o.disabled=!0,o.updateButton(r.id,{spinner:!0}),o.messagesProvider.isContact(r.id).then(function(e){if(e){var t=o.translate.instant("addon.messages.removecontactconfirm",{$a:r.fullname}),n=o.translate.instant("core.remove");return o.domUtils.showConfirm(t,void 0,n).then(function(){return o.messagesProvider.removeContact(r.id)})}return o.addContact(r)}).catch(function(e){o.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){o.eventsProvider.trigger(t.UPDATED_EVENT,{userId:r.id}),o.checkButton(r.id).finally(function(){o.disabled=!1})}))}}},e.prototype.checkButton=function(e){var t=this;this.updateButton(e,{spinner:!0});var n=this.messagesProvider.isGroupMessagingEnabled();return this.messagesProvider.isContact(e).then(function(o){t.updateButton(e,o?{title:n?"addon.messages.removefromyourcontacts":"addon.messages.removecontact",class:"addon-messages-removecontact-handler",icon:"remove",hidden:!1,spinner:!1}:{title:n?"addon.messages.addtoyourcontacts":"addon.messages.addcontact",class:"addon-messages-addcontact-handler",icon:"add",hidden:!1,spinner:!1})}).catch(function(){t.updateButton(e,{hidden:!0})})},e.prototype.updateButton=function(e,t){this.eventsProvider.trigger(r.a.UPDATE_HANDLER_EVENT,{handler:this.name,data:t,userId:e})},e.prototype.addContact=function(e){var t=this;return this.messagesProvider.isGroupMessagingEnabled()?this.messagesProvider.getMemberInfo(e.id).then(function(n){var o=t.sitesProvider.getCurrentSiteUserId();if(n.contactrequests.some(function(t){return t.userid==o&&t.requesteduserid==e.id})){var r=t.translate.instant("addon.messages.yourcontactrequestpending",{$a:e.fullname});return t.domUtils.showAlert(null,r)}var i=t.translate.instant("addon.messages.addcontactconfirm",{$a:e.fullname}),l=t.translate.instant("core.add");return t.domUtils.showConfirm(i,void 0,l).then(function(){return t.messagesProvider.createContactRequest(e.id)}).then(function(){var e=t.translate.instant("addon.messages.contactrequestsent");return t.domUtils.showAlert(null,e)})}):this.messagesProvider.addContact(e.id)},e.prototype.ngOnDestroy=function(){this.updateObs&&this.updateObs.off()},e.UPDATED_EVENT="AddonMessagesAddContactUserHandler_updated_event",e=t=d([Object(o.A)(),f("design:paramtypes",[i.a,l.a,s.a,u.a,c.c])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(104),i=n(1),l=n(161),a=n(630),s=n(9),u=n(4),c=n(3),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,i){var l=this;this.sitesProvider=e,this.messagesProvider=t,this.eventsProvider=n,this.domUtils=o,this.translate=i,this.name="AddonMessages:blockContact",this.priority=600,this.type=r.a.TYPE_ACTION,this.disabled=!1,this.updateObs=n.on(a.a.UPDATED_EVENT,function(e){l.checkButton(e.userId)})}return t=e,e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){return e.id!=this.sitesProvider.getCurrentSiteUserId()},e.prototype.getDisplayData=function(e,n){var o=this;return this.checkButton(e.id),{icon:"",title:"",spinner:!1,class:"",action:function(e,n,r,i){e.preventDefault(),e.stopPropagation(),o.disabled||(o.disabled=!0,o.updateButton(r.id,{spinner:!0}),o.messagesProvider.isBlocked(r.id).then(function(e){if(e){var t=o.translate.instant("addon.messages.unblockuserconfirm",{$a:r.fullname}),n=o.translate.instant("addon.messages.unblockuser");return o.domUtils.showConfirm(t,void 0,n).then(function(){return o.messagesProvider.unblockContact(r.id)})}t=o.translate.instant("addon.messages.blockuserconfirm",{$a:r.fullname}),n=o.translate.instant("addon.messages.blockuser");return o.domUtils.showConfirm(t,void 0,n).then(function(){return o.messagesProvider.blockContact(r.id)})}).catch(function(e){o.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){o.eventsProvider.trigger(t.UPDATED_EVENT,{userId:r.id}),o.checkButton(r.id).finally(function(){o.disabled=!1})}))}}},e.prototype.checkButton=function(e){var t=this;return this.updateButton(e,{spinner:!0}),this.messagesProvider.isBlocked(e).then(function(n){t.updateButton(e,n?{title:"addon.messages.unblockuser",class:"addon-messages-unblockcontact-handler",icon:"checkmark-circle",hidden:!1,spinner:!1}:{title:"addon.messages.blockuser",class:"addon-messages-blockcontact-handler",icon:"close-circle",hidden:!1,spinner:!1})}).catch(function(){t.updateButton(e,{hidden:!0})})},e.prototype.updateButton=function(e,t){this.eventsProvider.trigger(r.a.UPDATE_HANDLER_EVENT,{handler:this.name,data:t,userId:e})},e.prototype.ngOnDestroy=function(){this.updateObs&&this.updateObs.off()},e.UPDATED_EVENT="AddonMessagesBlockContactUserHandler_updated_event",e=t=d([Object(o.A)(),f("design:paramtypes",[i.a,l.a,s.a,u.a,c.c])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"b",function(){return w});var o=n(0),r=n(88),i=n(62),l=n(61),a=n(50),s=n(144),u=n(77),c=n(133),d=n(317),f=n(183),p=n(152),h=n(166),m=n(585),_=n(590),g=n(1146),v=n(1147),y=n(1148),b=n(1149),P=n(1150),O=n(1151),E=n(1152),C=n(1158),I=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},R=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=[u.a,c.a,d.a,f.a,p.a,h.a],w=function(){function e(e,t,n,o,r,i,l,a,s,u,c){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),u.registerClickHandler(c)}return e=I([Object(o.I)({declarations:[],imports:[E.a,C.a],providers:[u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a]}),R("design:paramtypes",[l.a,g.a,a.a,v.a,r.a,y.a,i.a,b.a,P.a,s.a,O.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(153),i=n(321),l=n(634),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t){var n=e.call(this)||this;return n.commentsProvider=t,n.commentsEnabled=!t.areCommentsDisabledInSite(),n}return a(t,e),t.prototype.invalidate=function(){return this.commentsProvider.invalidateCommentsData("module",this.assign.cmid,"assignsubmission_comments",this.submission.id,"submission_comments")},t.prototype.showComments=function(e){this.commentsComponent&&this.commentsComponent.openComments(e)},s([Object(o._9)(i.a),u("design:type",i.a)],t.prototype,"commentsComponent",void 0),t=s([Object(o.m)({selector:"addon-mod-assign-submission-comments",templateUrl:"addon-mod-assign-submission-comments.html"}),u("design:paramtypes",[r.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return e.prototype.invalidate=function(){return Promise.resolve()},r([Object(o.D)(),i("design:type",Object)],e.prototype,"assign",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"submission",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"plugin",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"configs",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"edit",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"allowOffline",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(177),i=n(115),l=n(2),a=n(72),s=n(77),u=n(133),c=n(183),d=n(636),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.assignProvider=e,this.assignOfflineProvider=t,this.assignHelper=n,this.fileSessionProvider=o,this.fileUploaderProvider=r,this.fileHelper=i,this.utils=l,this.name="AddonModAssignSubmissionFileHandler",this.type="file"}return t=e,e.prototype.canEditOffline=function(e,t,n){return!0},e.prototype.isEmpty=function(e,t){return 0===this.assignProvider.getSubmissionPluginAttachments(t).length},e.prototype.clearTmpData=function(e,t,n,o){var r=this.fileSessionProvider.getFiles(s.a.COMPONENT,e.id);this.fileSessionProvider.clearFiles(s.a.COMPONENT,e.id),this.fileUploaderProvider.clearTmpFiles(r)},e.prototype.copySubmissionData=function(e,t,n,o,r){var i=this.assignProvider.getSubmissionPluginAttachments(t);return this.assignHelper.uploadFiles(e.id,i).then(function(e){n.files_filemanager=e})},e.prototype.getComponent=function(e,t,n){return d.a},e.prototype.deleteOfflineData=function(e,n,o,r,i){return this.assignHelper.deleteStoredSubmissionFiles(e.id,t.FOLDER_NAME,n.userid,i).catch(function(){})},e.prototype.getPluginFiles=function(e,t,n,o){return this.assignProvider.getSubmissionPluginAttachments(n)},e.prototype.getSizeForCopy=function(e,t){var n=this.assignProvider.getSubmissionPluginAttachments(t);return this.fileHelper.getTotalFilesSize(n)},e.prototype.getSizeForEdit=function(e,t,n,o){if(this.hasDataChanged(e,t,n,o)){var r=this.fileSessionProvider.getFiles(s.a.COMPONENT,e.id);return this.fileHelper.getTotalFilesSize(r)}return 0},e.prototype.hasDataChanged=function(e,t,n,o){var r=this;return this.assignOfflineProvider.getSubmission(e.id,t.userid).catch(function(){}).then(function(e){if(e&&e.plugindata&&e.plugindata.files_filemanager)return e.plugindata.files_filemanager.offline+e.plugindata.files_filemanager.online.length;var t=r.assignProvider.getSubmissionPluginAttachments(n);return t&&t.length}).then(function(t){var n=r.fileSessionProvider.getFiles(s.a.COMPONENT,e.id);if(n.length!=t)return!0;for(var o=0;o<n.length;o++){var i=n[o];if(!i.filename&&void 0!==i.name&&!i.offline)return!0}return!1})},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){return!0},e.prototype.prepareSubmissionData=function(e,n,o,r,i,l,a,u){if(this.hasDataChanged(e,n,o,r)){var c=this.fileSessionProvider.getFiles(s.a.COMPONENT,e.id),d=this.utils.hasRepeatedFilenames(c);return d?Promise.reject(d):this.assignHelper.uploadOrStoreFiles(e.id,t.FOLDER_NAME,c,l,a,u).then(function(e){i.files_filemanager=e})}},e.prototype.prepareSyncData=function(e,n,o,r,i,l){var a=this,s=r&&r.plugindata&&r.plugindata.files_filemanager;if(s){var u=s.online||[];return(s.offline?this.assignHelper.getStoredSubmissionFiles(e.id,t.FOLDER_NAME,n.userid,l).then(function(e){u=u.concat(e)}).catch(function(){}):Promise.resolve()).then(function(){return a.assignHelper.uploadFiles(e.id,u,l).then(function(e){i.files_filemanager=e})})}},e.FOLDER_NAME="submission_file",e=t=f([Object(o.A)(),p("design:paramtypes",[s.a,u.a,c.a,r.a,a.a,i.a,l.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(177),i=n(72),l=n(77),a=n(183),s=n(133),u=n(635),c=n(634),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i){var a=e.call(this)||this;return a.fileSessionprovider=t,a.assignProvider=n,a.assignOfflineProvider=o,a.assignHelper=r,a.fileUploaderProvider=i,a.component=l.a.COMPONENT,a}return d(t,e),t.prototype.ngOnInit=function(){var e=this;this.assignOfflineProvider.getSubmission(this.assign.id).catch(function(){}).then(function(t){if(t&&t.plugindata&&t.plugindata.files_filemanager){return(t.plugindata.files_filemanager.offline?e.assignHelper.getStoredSubmissionFiles(e.assign.id,u.a.FOLDER_NAME):Promise.resolve([])).then(function(n){var o=t.plugindata.files_filemanager.online||[];n=e.fileUploaderProvider.markOfflineFiles(n),e.files=o.concat(n)})}e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin)}).finally(function(){e.fileSessionprovider.setFiles(e.component,e.assign.id,e.files)})},t=f([Object(o.m)({selector:"addon-mod-assign-submission-file",templateUrl:"addon-mod-assign-submission-file.html"}),p("design:paramtypes",[r.a,l.a,s.a,a.a,i.a])],t)}(c.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(23),i=n(1),l=n(4),a=n(11),s=n(77),u=n(133),c=n(634),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l,a){var u=e.call(this)||this;return u.fb=t,u.domUtils=n,u.textUtils=o,u.assignProvider=r,u.assignOfflineProvider=i,u.component=s.a.COMPONENT,u.element=l.nativeElement,u.currentUserId=a.getCurrentSiteUserId(),u}return d(t,e),t.prototype.ngOnInit=function(){var e=this;this.assignOfflineProvider.getSubmission(this.assign.id).catch(function(){}).then(function(t){return t&&t.plugindata&&t.plugindata.onlinetext_editor?t.plugindata.onlinetext_editor.text:e.assignProvider.getSubmissionPluginText(e.plugin)}).then(function(t){e.wordLimitEnabled=!!parseInt(e.configs.wordlimitenabled,10),e.text=t,e.edit?e.control=e.fb.control(t):e.element.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),t&&e.textUtils.expandText(e.plugin.name,t,e.component,e.assign.cmid,void 0,!0,"module",e.assign.cmid,e.assign.course)}),e.wordLimitEnabled&&(e.words=e.textUtils.countWords(t))}).finally(function(){e.loaded=!0})},t.prototype.onChange=function(e){var t=this;this.wordLimitEnabled&&(clearTimeout(this.wordCountTimeout),this.wordCountTimeout=setTimeout(function(){t.words=t.textUtils.countWords(e)},1500))},t=f([Object(o.m)({selector:"addon-mod-assign-submission-online-text",templateUrl:"addon-mod-assign-submission-onlinetext.html"}),p("design:paramtypes",[r.d,l.a,a.a,s.a,u.a,o.t,i.a])],t)}(c.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(1),i=n(11),l=n(77),a=n(133),s=n(639),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.sitesProvider=e,this.textUtils=t,this.assignProvider=n,this.assignOfflineProvider=o,this.name="AddonModAssignFeedbackCommentsHandler",this.type="comments",this.drafts={}}return t=e,e.prototype.discardDraft=function(e,t,n){var o=this.getDraftId(e,t,n);void 0!==this.drafts[o]&&delete this.drafts[o]},e.prototype.getComponent=function(e,t){return s.a},e.prototype.getDraft=function(e,t,n){var o=this.getDraftId(e,t,n);if(void 0!==this.drafts[o])return this.drafts[o]},e.prototype.getDraftId=function(e,t,n){return(n=n||this.sitesProvider.getCurrentSiteId())+"#"+e+"#"+t},e.prototype.getPluginFiles=function(e,t,n,o){return this.assignProvider.getSubmissionPluginAttachments(n)},e.getTextFromInputData=function(e,t,n){var o=n.assignfeedbackcomments_editor;return o&&o.text&&(o=o.text),e.restorePluginfileUrls(o,t.fileareas&&t.fileareas[0]?t.fileareas[0].files:[])},e.prototype.hasDataChanged=function(e,n,o,r,i){var l=this;return this.assignOfflineProvider.getSubmissionGrade(e.id,i).catch(function(){}).then(function(e){return e&&e.plugindata&&e.plugindata.assignfeedbackcomments_editor?e.plugindata.assignfeedbackcomments_editor.text:l.assignProvider.getSubmissionPluginText(o)}).then(function(e){var n=t.getTextFromInputData(l.textUtils,o,r);return void 0!==n&&e!=n})},e.prototype.hasDraftData=function(e,t,n){return!!this.getDraft(e,t,n)},e.prototype.isEnabled=function(){return!0},e.prototype.prepareFeedbackData=function(e,t,n,o,r){var i=this.getDraft(e,t,r);i&&(i.text=this.textUtils.formatHtmlLines(i.text),o.assignfeedbackcomments_editor=i)},e.prototype.saveDraft=function(e,t,n,o,r){o&&(this.drafts[this.getDraftId(e,t,r)]=o)},e=t=u([Object(o.A)(),c("design:paramtypes",[r.a,i.a,l.a,a.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(23),l=n(4),a=n(11),s=n(77),u=n(133),c=n(152),d=n(640),f=n(638),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(e){function t(t,n,o,r,i,l,a,u){var c=e.call(this,t)||this;return c.domUtils=o,c.textUtils=r,c.assignOfflineProvider=i,c.assignProvider=l,c.fb=a,c.feedbackDelegate=u,c.component=s.a.COMPONENT,c.element=n.nativeElement,c}return p(t,e),t.prototype.ngOnInit=function(){var e=this;this.getText().then(function(t){e.text=t,e.canEdit||e.edit?e.edit&&(e.control=e.fb.control(t)):e.element.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.text&&e.textUtils.expandText(e.plugin.name,e.text,e.component,e.assign.cmid,void 0,!0,"module",e.assign.cmid,e.assign.course)})}).finally(function(){e.loaded=!0})},t.prototype.editComment=function(){var e=this;this.editFeedback().then(function(t){var n=f.a.getTextFromInputData(e.textUtils,e.plugin,t);e.isSent=!1,e.text=e.replacePluginfileUrls(n),e.feedbackDelegate.saveFeedbackDraft(e.assign.id,e.userId,e.plugin,{text:n,format:1})}).catch(function(){})},t.prototype.getText=function(){var e=this;return this.feedbackDelegate.getPluginDraftData(this.assign.id,this.userId,this.plugin).then(function(t){return t?(e.isSent=!1,e.replacePluginfileUrls(t.text)):e.assignOfflineProvider.getSubmissionGrade(e.assign.id,e.userId).catch(function(){}).then(function(t){return t&&t.plugindata&&t.plugindata.assignfeedbackcomments_editor?(e.isSent=!1,e.feedbackDelegate.saveFeedbackDraft(e.assign.id,e.userId,e.plugin,t.plugindata.assignfeedbackcomments_editor),e.replacePluginfileUrls(t.plugindata.assignfeedbackcomments_editor.text)):(e.isSent=!0,e.assignProvider.getSubmissionPluginText(e.plugin))})})},t.prototype.replacePluginfileUrls=function(e){return this.textUtils.replacePluginfileUrls(e,this.plugin.fileareas&&this.plugin.fileareas[0]&&this.plugin.fileareas[0].files||[])},t=h([Object(o.m)({selector:"addon-mod-assign-feedback-comments",templateUrl:"addon-mod-assign-feedback-comments.html"}),m("design:paramtypes",[r.q,o.t,l.a,a.a,u.a,s.a,i.d,c.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.modalCtrl=e}return e.prototype.editFeedback=function(){var e=this;return this.canEdit?new Promise(function(t,n){var o=e.modalCtrl.create("AddonModAssignEditFeedbackModalPage",{assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId});o.present(),o.onDidDismiss(function(e){void 0===e?n():t(e)})}):Promise.reject(null)},e.prototype.invalidate=function(){return Promise.resolve()},r([Object(o.D)(),i("design:type",Object)],e.prototype,"assign",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"submission",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"plugin",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"userId",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"configs",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"canEdit",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"edit",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(77),l=n(640),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t)||this;return o.assignProvider=n,o.component=i.a.COMPONENT,o}return a(t,e),t.prototype.ngOnInit=function(){this.plugin&&(this.files=this.assignProvider.getSubmissionPluginAttachments(this.plugin))},t=s([Object(o.m)({selector:"addon-mod-assign-feedback-edit-pdf",templateUrl:"addon-mod-assign-feedback-editpdf.html"}),u("design:paramtypes",[r.q,i.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(77),l=n(640),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t)||this;return o.assignProvider=n,o.component=i.a.COMPONENT,o}return a(t,e),t.prototype.ngOnInit=function(){this.plugin&&(this.files=this.assignProvider.getSubmissionPluginAttachments(this.plugin))},t=s([Object(o.m)({selector:"addon-mod-assign-feedback-file",templateUrl:"addon-mod-assign-feedback-file.html"}),u("design:paramtypes",[r.q,i.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var o=n(0),r=n(752),i=n(221),l=n(1164),a=n(1165),s=n(1166),u=n(398),c=n(61),d=n(62),f=n(50),p=n(204),h=n(1167),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=[i.a],v=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),n.registerHandler(l),r.registerHandler(i),a.registerHandler(s)}return e=m([Object(o.I)({declarations:[],imports:[r.a],providers:[i.a,l.a,a.a,s.a,u.a,h.a]}),_("design:paramtypes",[c.a,l.a,d.a,a.a,f.a,u.a,s.a,p.a,h.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return g});var o=n(0),r=n(62),i=n(61),l=n(50),a=n(734),s=n(279),u=n(737),c=n(1168),d=n(1169),f=n(1170),p=n(1171),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=[s.a],g=function(){function e(e,t,n,o,r,i,l){e.registerHandler(t),n.registerHandler(o),n.registerHandler(l),r.registerHandler(i)}return e=h([Object(o.I)({declarations:[],imports:[a.a],providers:[s.a,u.a,c.a,d.a,f.a,p.a]}),m("design:paramtypes",[i.a,f.a,r.a,c.a,l.a,p.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"b",function(){return b});var o=n(0),r=n(88),i=n(62),l=n(61),a=n(50),s=n(753),u=n(1172),c=n(294),d=n(1173),f=n(1174),p=n(591),h=n(296),m=n(1175),_=n(295),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=[c.a,h.a,_.a],b=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),l.register(a)}return e=g([Object(o.I)({declarations:[],imports:[s.a],providers:[c.a,h.a,_.a,u.a,p.a,d.a,f.a,m.a]}),v("design:paramtypes",[l.a,u.a,a.a,p.a,i.a,d.a,r.a,m.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"b",function(){return w});var o=n(0),r=n(88),i=n(62),l=n(61),a=n(50),s=n(144),u=n(726),c=n(1176),d=n(134),f=n(1177),p=n(1178),h=n(1179),m=n(1180),_=n(1181),g=n(1182),v=n(1183),y=n(252),b=n(647),P=n(1184),O=n(285),E=n(1185),C=n(297),I=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},R=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=[d.a,y.a,O.a,C.a],w=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),r.registerHandler(u),r.registerHandler(c),r.registerHandler(d),r.registerHandler(f),r.registerHandler(p),l.register(a),h.registerClickHandler(m)}return e=I([Object(o.I)({declarations:[],imports:[u.a],providers:[d.a,y.a,O.a,C.a,c.a,b.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,E.a,P.a]}),R("design:paramtypes",[l.a,c.a,a.a,b.a,i.a,f.a,r.a,E.a,p.a,h.a,m.a,_.a,g.a,v.a,s.a,P.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(142),f=n(134),p=n(252),h=n(24),m=n(71),_=n(285),g=n(32),v=n(56),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,p,h,m){var _=e.call(this,t,n,o,r,i,l,a,s,u)||this;return _.feedbackProvider=c,_.feedbackHelper=d,_.timeUtils=p,_.groupsProvider=h,_.injector=m,_.name="AddonModFeedback",_.modName="feedback",_.component=f.a.COMPONENT,_.updatesNames=/^configuration$|^.*files$|^attemptsfinished|^attemptsunfinished$/,_}return y(t,e),t.prototype.getFiles=function(e,t,n){var o=this,r=[];return this.feedbackProvider.getFeedback(t,e.id).then(function(t){return r=t.pageaftersubmitfiles||[],r=r.concat(o.getIntroFilesFromInstance(e,t)),o.feedbackProvider.getItems(t.id)}).then(function(e){return e.items.forEach(function(e){r=r.concat(e.itemfiles)}),r}).catch(function(){return r})},t.prototype.getIntroFiles=function(e,t){var n=this;return this.feedbackProvider.getFeedback(t,e.id).catch(function(){}).then(function(t){return n.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.feedbackProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){return this.feedbackProvider.invalidateFeedbackData(t)},t.prototype.isDownloadable=function(e,t){var n=this;return this.feedbackProvider.getFeedback(t,e.id,void 0,!0).then(function(e){var t=n.timeUtils.timestamp();return!(e.timeopen&&e.timeopen>t)&&(!(e.timeclose&&e.timeclose<t)&&n.feedbackProvider.getFeedbackAccessInformation(e.id).then(function(e){return e.isopen}))})},t.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchFeedback.bind(this))},t.prototype.prefetchFeedback=function(e,t,n,o){var r=this;return this.feedbackProvider.getFeedback(t,e.id,o,!1,!0).then(function(t){var n=(t.pageaftersubmitfiles||[]).concat(r.getIntroFilesFromInstance(e,t));return r.feedbackProvider.getFeedbackAccessInformation(t.id,!1,!0,o).then(function(i){var l=[];return(i.canedititems||i.canviewreports)&&(l.push(r.feedbackProvider.getAnalysis(t.id,void 0,!0,o)),l.push(r.groupsProvider.getActivityGroupInfo(t.coursemodule,!0,void 0,o,!0).then(function(e){var n=[];return e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),e.groups.forEach(function(e){n.push(r.feedbackProvider.getAnalysis(t.id,e.id,!0,o)),n.push(r.feedbackProvider.getAllResponsesAnalysis(t.id,e.id,!0,o)),i.isanonymous||n.push(r.feedbackProvider.getAllNonRespondents(t.id,e.id,!0,o))}),Promise.all(n)}))),l.push(r.feedbackProvider.getItems(t.id,!0,o).then(function(t){return t.items.forEach(function(e){n=n.concat(e.itemfiles)}),r.filepoolProvider.addFilesToQueue(o,n,r.component,e.id)})),i.cancomplete&&i.cansubmit&&!i.isempty&&l.push(r.feedbackProvider.processPageOnline(t.id,0,{},void 0,o).finally(function(){var e=[];return e.push(r.feedbackProvider.getCurrentValues(t.id,!1,!0,o)),e.push(r.feedbackProvider.getResumePage(t.id,!1,!0,o)),Promise.all(e)})),Promise.all(l)})})},t.prototype.sync=function(e,t,n){return this.syncProvider||(this.syncProvider=this.injector.get(_.a)),this.syncProvider.syncFeedback(e.instance,n)},t=b([Object(o.A)(),P("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,g.a,v.a,f.a,p.a,h.a,m.a,o.C])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return y});var o=n(0),r=n(329),i=n(401),l=n(1186),a=n(61),s=n(756),u=n(1187),c=n(1188),d=n(1189),f=n(1190),p=n(62),h=n(50),m=n(56),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=[r.a,i.a],y=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),l.registerHandler(a)}return e=_([Object(o.I)({declarations:[],imports:[s.a],providers:[r.a,i.a,l.a,u.a,c.a,d.a,f.a]}),g("design:paramtypes",[a.a,l.a,h.a,u.a,p.a,c.a,m.a,f.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return R}),n.d(t,"b",function(){return S});var o=n(0),r=n(88),i=n(61),l=n(50),a=n(62),s=n(144),u=n(204),c=n(135),d=n(233),f=n(280),p=n(254),h=n(1191),m=n(402),_=n(1192),g=n(1193),v=n(1194),y=n(1195),b=n(1196),P=n(1197),O=n(1198),E=n(735),C=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},I=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},R=[c.a,d.a,f.a,p.a],S=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u),l.registerHandler(f),c.registerClickHandler(d),p.registerHandler(h)}return e=C([Object(o.I)({declarations:[],imports:[E.a],providers:[c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,y.a,b.a,v.a,P.a,O.a]}),I("design:paramtypes",[i.a,h.a,l.a,m.a,r.a,_.a,a.a,g.a,v.a,y.a,s.a,P.a,b.a,u.a,O.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(4),l=n(9),a=n(1),s=n(135),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o,r,i){this.viewCtrl=t,this.forumProvider=n,this.domUtils=o,this.eventsProvider=r,this.sitesProvider=i,this.canPin=!1,this.discussion=e.get("discussion"),this.forumId=e.get("forumId"),this.cmId=e.get("cmId")}return e.prototype.ngOnInit=function(){var e=this;this.forumProvider.isSetPinStateAvailableForSite()?this.forumProvider.canAddDiscussionToAll(this.forumId).then(function(t){e.canPin=!!t.canpindiscussions}).catch(function(){e.canPin=!1}):this.canPin=!1},e.prototype.setLockState=function(e){var t=this,n=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.setLockState(this.forumId,this.discussion.discussion,e).then(function(n){t.viewCtrl.dismiss({action:"lock",value:e});t.eventsProvider.trigger(s.a.CHANGE_DISCUSSION_EVENT,{forumId:t.forumId,discussionId:t.discussion.discussion,cmId:t.cmId,locked:n.locked},t.sitesProvider.getCurrentSiteId()),t.domUtils.showToast("addon.mod_forum.lockupdated",!0)}).catch(function(e){t.domUtils.showErrorModal(e),t.viewCtrl.dismiss()}).finally(function(){n.dismiss()})},e.prototype.setPinState=function(e){var t=this,n=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.setPinState(this.discussion.discussion,e).then(function(){t.viewCtrl.dismiss({action:"pin",value:e});t.eventsProvider.trigger(s.a.CHANGE_DISCUSSION_EVENT,{forumId:t.forumId,discussionId:t.discussion.discussion,cmId:t.cmId,pinned:e},t.sitesProvider.getCurrentSiteId()),t.domUtils.showToast("addon.mod_forum.pinupdated",!0)}).catch(function(e){t.domUtils.showErrorModal(e),t.viewCtrl.dismiss()}).finally(function(){n.dismiss()})},e.prototype.toggleFavouriteState=function(e){var t=this,n=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.toggleFavouriteState(this.discussion.discussion,e).then(function(){t.viewCtrl.dismiss({action:"star",value:e});t.eventsProvider.trigger(s.a.CHANGE_DISCUSSION_EVENT,{forumId:t.forumId,discussionId:t.discussion.discussion,cmId:t.cmId,starred:e},t.sitesProvider.getCurrentSiteId()),t.domUtils.showToast("addon.mod_forum.favouriteupdated",!0)}).catch(function(e){t.domUtils.showErrorModal(e),t.viewCtrl.dismiss()}).finally(function(){n.dismiss()})},e=u([Object(o.m)({selector:"addon-forum-discussion-options-menu",templateUrl:"addon-forum-discussion-options-menu.html"}),c("design:paramtypes",[r.t,r.G,s.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(4),l=n(1),a=n(135),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o,r){this.viewCtrl=t,this.domUtils=n,this.forumProvider=o,this.sitesProvider=r,this.canEdit=!1,this.canDelete=!1,this.loaded=!1,this.post=e.get("post"),this.forumId=e.get("forumId")}return e.prototype.ngOnInit=function(){var e=this;if(this.forumId)if(this.post.id){var t=this.sitesProvider.getCurrentSite();this.url=t.createSiteUrl("/mod/forum/discuss.php",{d:this.post.discussion},"p"+this.post.id),this.forumProvider.getDiscussionPost(this.forumId,this.post.discussion,this.post.id,!0).then(function(t){e.canDelete=t.capabilities.delete&&e.forumProvider.isDeletePostAvailable(),e.canEdit=t.capabilities.edit&&e.forumProvider.isUpdatePostAvailable(),e.wordCount=t.wordcount}).catch(function(t){e.domUtils.showErrorModalDefault(t,"Error getting discussion post.")}).finally(function(){e.loaded=!0})}else this.canEdit=!0,this.canDelete=!0,this.loaded=!0;else this.loaded=!0},e.prototype.dismiss=function(){this.viewCtrl.dismiss()},e.prototype.deletePost=function(){this.viewCtrl.dismiss(this.post.id?{action:"delete"}:{action:"deleteoffline"})},e.prototype.editPost=function(){this.viewCtrl.dismiss(this.post.id?{action:"edit"}:{action:"editoffline"})},e=s([Object(o.m)({selector:"addon-forum-post-options-menu",templateUrl:"addon-forum-post-options-menu.html"}),u("design:paramtypes",[r.t,r.G,i.a,a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return I});var o=n(0),r=n(88),i=n(61),l=n(50),a=n(62),s=n(204),u=n(203),c=n(258),d=n(507),f=n(362),p=n(1199),h=n(403),m=n(1200),_=n(1201),g=n(1202),v=n(1203),y=n(1204),b=n(1205),P=n(757),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=[u.a,c.a,d.a,f.a],I=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u),l.registerHandler(c),d.registerHandler(f)}return e=O([Object(o.I)({declarations:[],imports:[P.a],providers:[u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a]}),E("design:paramtypes",[i.a,p.a,l.a,h.a,r.a,m.a,a.a,_.a,g.a,v.a,y.a,s.a,b.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){var n=this;this.viewCtrl=t,this.modes=[],this.selectedMode=e.get("selectedMode")||"";e.get("browsemodes").forEach(function(e){switch(e){case"letter":n.modes.push({key:"letter_all",langkey:"addon.mod_glossary.byalphabet"});break;case"cat":n.modes.push({key:"cat_all",langkey:"addon.mod_glossary.bycategory"});break;case"date":n.modes.push({key:"newest_first",langkey:"addon.mod_glossary.bynewestfirst"}),n.modes.push({key:"recently_updated",langkey:"addon.mod_glossary.byrecentlyupdated"});break;case"author":n.modes.push({key:"author_all",langkey:"addon.mod_glossary.byauthor"})}})}return e.prototype.modePicked=function(e,t){return this.viewCtrl.dismiss(t),!0},e=i([Object(o.m)({selector:"addon-mod-glossary-mode-picker-popover",templateUrl:"addon-mod-glossary-mode-picker.html"}),l("design:paramtypes",[r.t,r.G])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var o=n(0),r=n(758),i=n(1206),l=n(237),a=n(404),s=n(1207),u=n(1208),c=n(1209),d=n(62),f=n(61),p=n(50),h=n(56),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=[l.a],v=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),l.registerHandler(a)}return e=m([Object(o.I)({declarations:[],imports:[r.a],providers:[l.a,i.a,a.a,s.a,u.a,c.a]}),_("design:paramtypes",[f.a,i.a,p.a,a.a,d.a,s.a,h.a,c.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return I});var o=n(0),r=n(88),i=n(61),l=n(50),a=n(62),s=n(144),u=n(759),c=n(169),d=n(286),f=n(287),p=n(740),h=n(1210),m=n(330),_=n(1211),g=n(1212),v=n(1213),y=n(1214),b=n(1215),P=n(1216),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=[c.a,d.a,f.a,p.a],I=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u),l.registerHandler(c),d.registerClickHandler(f)}return e=O([Object(o.I)({declarations:[],imports:[u.a],providers:[c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a]}),E("design:paramtypes",[i.a,h.a,l.a,m.a,r.a,_.a,a.a,g.a,v.a,y.a,b.a,s.a,P.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return _});var o=n(0),r=n(760),i=n(1217),l=n(298),a=n(1218),s=n(1219),u=n(1220),c=n(62),d=n(61),f=n(50),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=[l.a],_=function(){function e(e,t,n,o,r,i,l){e.registerHandler(t),n.registerHandler(o),n.registerHandler(r),i.registerHandler(l)}return e=p([Object(o.I)({declarations:[],imports:[r.a],providers:[l.a,i.a,a.a,s.a,u.a]}),h("design:paramtypes",[d.a,i.a,c.a,a.a,s.a,f.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return y});var o=n(0),r=n(761),i=n(1221),l=n(222),a=n(405),s=n(1222),u=n(1223),c=n(1224),d=n(331),f=n(62),p=n(61),h=n(50),m=n(56),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=[l.a,d.a],y=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),l.registerHandler(a)}return e=_([Object(o.I)({declarations:[],imports:[r.a],providers:[l.a,d.a,i.a,a.a,s.a,u.a,c.a]}),g("design:paramtypes",[p.a,i.a,h.a,a.a,f.a,s.a,m.a,c.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return x}),n.d(t,"b",function(){return M});var o=n(0),r=n(88),i=n(61),l=n(50),a=n(62),s=n(144),u=n(129),c=n(167),d=n(263),f=n(253),p=n(259),h=n(1225),m=n(332),_=n(1226),g=n(1227),v=n(1228),y=n(1229),b=n(1230),P=n(1231),O=n(762),E=n(1232),C=n(1234),I=n(1236),R=n(1238),S=n(1240),w=n(1242),A=n(1244),D=n(1246),j=n(1248),k=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},T=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=[u.a,c.a,d.a,f.a,p.a],M=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u),l.registerHandler(c),d.registerClickHandler(f)}return e=k([Object(o.I)({declarations:[],imports:[O.a,E.a,C.a,I.a,R.a,S.a,w.a,A.a,D.a,j.a],providers:[u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a]}),T("design:paramtypes",[i.a,h.a,l.a,m.a,r.a,_.a,a.a,g.a,v.a,y.a,b.a,s.a,P.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(23),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.fb=e}return e.prototype.ngOnInit=function(){this.form.addControl("confirmdatasaved",this.fb.control(1))},i([Object(o.D)(),l("design:type",String)],e.prototype,"rule",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"quiz",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"attempt",void 0),i([Object(o.D)(),l("design:type",Boolean)],e.prototype,"prefetch",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"siteId",void 0),i([Object(o.D)(),l("design:type",r.g)],e.prototype,"form",void 0),e=i([Object(o.m)({selector:"addon-mod-quiz-access-offline-attempts",templateUrl:"addon-mod-quiz-access-offline-attempts.html"}),l("design:paramtypes",[r.d])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(23),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.fb=e}return e.prototype.ngOnInit=function(){this.form.addControl("quizpassword",this.fb.control(""))},i([Object(o.D)(),l("design:type",String)],e.prototype,"rule",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"quiz",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"attempt",void 0),i([Object(o.D)(),l("design:type",Boolean)],e.prototype,"prefetch",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"siteId",void 0),i([Object(o.D)(),l("design:type",r.g)],e.prototype,"form",void 0),e=i([Object(o.m)({selector:"addon-mod-quiz-access-password",templateUrl:"addon-mod-quiz-access-password.html"}),l("design:paramtypes",[r.d])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(23),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return i([Object(o.D)(),l("design:type",String)],e.prototype,"rule",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"quiz",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"attempt",void 0),i([Object(o.D)(),l("design:type",Boolean)],e.prototype,"prefetch",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"siteId",void 0),i([Object(o.D)(),l("design:type",r.g)],e.prototype,"form",void 0),e=i([Object(o.m)({selector:"addon-mod-quiz-access-time-limit",templateUrl:"addon-mod-quiz-access-time-limit.html"}),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return y});var o=n(0),r=n(763),i=n(1250),l=n(223),a=n(406),s=n(1251),u=n(1252),c=n(1253),d=n(299),f=n(62),p=n(61),h=n(50),m=n(56),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=[l.a],y=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),l.registerHandler(a)}return e=_([Object(o.I)({declarations:[],imports:[r.a],providers:[l.a,i.a,d.a,a.a,s.a,u.a,c.a]}),g("design:paramtypes",[p.a,i.a,h.a,a.a,f.a,s.a,m.a,c.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P}),n.d(t,"b",function(){return O});var o=n(0),r=n(88),i=n(61),l=n(50),a=n(62),s=n(234),u=n(386),c=n(264),d=n(1254),f=n(333),p=n(1255),h=n(1256),m=n(1257),_=n(1258),g=n(288),v=n(764),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=[s.a,c.a,u.a,g.a],O=function(){function e(e,t,n,o,r,i,l,a,s,u){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u)}return e=y([Object(o.I)({declarations:[],imports:[v.a],providers:[s.a,c.a,u.a,g.a,d.a,f.a,p.a,h.a,m.a,_.a]}),b("design:paramtypes",[i.a,d.a,l.a,f.a,r.a,p.a,a.a,h.a,m.a,_.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return P});var o=n(0),r=n(88),i=n(62),l=n(61),a=n(50),s=n(765),u=n(1259),c=n(300),d=n(1260),f=n(1261),p=n(334),h=n(665),m=n(302),_=n(1262),g=n(301),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=[c.a,p.a,m.a,g.a],P=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),l.register(a)}return e=v([Object(o.I)({declarations:[],imports:[s.a],providers:[c.a,p.a,m.a,g.a,u.a,h.a,d.a,f.a,_.a]}),y("design:paramtypes",[l.a,u.a,a.a,h.a,i.a,d.a,r.a,_.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(142),f=n(300),p=n(302),h=n(334),m=n(32),_=n(56),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,p){var h=e.call(this,t,n,o,r,i,l,a,s,u)||this;return h.surveyProvider=c,h.surveyHelper=d,h.injector=p,h.name="AddonModSurvey",h.modName="survey",h.component=f.a.COMPONENT,h.updatesNames=/^configuration$|^.*files$|^answers$/,h}return g(t,e),t.prototype.getIntroFiles=function(e,t){var n=this;return this.surveyProvider.getSurvey(t,e.id).catch(function(){}).then(function(t){return n.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.surveyProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){return this.surveyProvider.invalidateSurveyData(t)},t.prototype.isEnabled=function(){return!0},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchSurvey.bind(this))},t.prototype.prefetchSurvey=function(e,t,n,o){var r=this;return this.surveyProvider.getSurvey(t,e.id,!0,o).then(function(t){var n=[],i=r.getIntroFilesFromInstance(e,t);return n.push(r.filepoolProvider.addFilesToQueue(o,i,f.a.COMPONENT,e.id)),t.surveydone||n.push(r.surveyProvider.getQuestions(t.id,!0,o)),Promise.all(n)})},t.prototype.sync=function(e,t,n){return this.syncProvider||(this.syncProvider=this.injector.get(p.a)),this.syncProvider.syncSurvey(e.instance,void 0,n)},t=v([Object(o.A)(),y("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,m.a,_.a,f.a,h.a,o.C])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return g});var o=n(0),r=n(766),i=n(1263),l=n(303),a=n(1264),s=n(1265),u=n(1266),c=n(335),d=n(62),f=n(61),p=n(50),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=[l.a,c.a],g=function(){function e(e,t,n,o,r,i,l){e.registerHandler(t),n.registerHandler(o),n.registerHandler(r),i.registerHandler(l)}return e=h([Object(o.I)({declarations:[],imports:[r.a],providers:[l.a,c.a,i.a,a.a,s.a,u.a]}),m("design:paramtypes",[f.a,i.a,d.a,a.a,s.a,p.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return I});var o=n(0),r=n(88),i=n(61),l=n(50),a=n(62),s=n(204),u=n(767),c=n(235),d=n(289),f=n(290),p=n(1267),h=n(1268),m=n(1269),_=n(1270),g=n(1271),v=n(1272),y=n(1273),b=n(1274),P=n(1275),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=[c.a,d.a,f.a],I=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p){e.registerHandler(t),n.registerHandler(o),r.register(i),l.registerHandler(a),l.registerHandler(s),l.registerHandler(u),l.registerHandler(c),l.registerHandler(d),f.registerHandler(p)}return e=O([Object(o.I)({declarations:[],imports:[u.a],providers:[c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a]}),E("design:paramtypes",[i.a,p.a,l.a,h.a,r.a,m.a,a.a,_.a,g.a,v.a,y.a,b.a,s.a,P.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(5),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.viewCtrl=t,this.subwikis=e.get("subwikis"),this.currentSubwiki=e.get("currentSubwiki")}return e.prototype.isSubwikiSelected=function(e){var t=parseInt(e.id,10)||0;if(t>0&&this.currentSubwiki.id>0)return t==this.currentSubwiki.id;var n=parseInt(e.userid,10)||0,o=parseInt(e.groupid,10)||0;return n==this.currentSubwiki.userid&&o==this.currentSubwiki.groupid},e.prototype.openSubwiki=function(e){(e.id>0||e.canedit)&&e!=this.currentSubwiki&&this.viewCtrl.dismiss(e)},e=i([Object(o.m)({selector:"addon-mod-wiki-subwiki-picker",templateUrl:"addon-mod-wiki-subwiki-picker.html"}),l("design:paramtypes",[r.t,r.G])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return E});var o=n(0),r=n(88),i=n(62),l=n(61),a=n(50),s=n(1276),u=n(484),c=n(1285),d=n(175),f=n(1286),p=n(1287),h=n(189),m=n(291),_=n(202),g=n(192),v=n(1288),y=n(1289),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=[d.a,h.a,m.a,_.a,g.a],E=function(){function e(e,t,n,o,r,i,l,a,s){e.registerHandler(t),n.registerHandler(o),n.registerHandler(s),r.registerHandler(i),l.register(a)}return e=b([Object(o.I)({declarations:[],imports:[u.a,s.a],providers:[d.a,c.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a]}),P("design:paramtypes",[l.a,c.a,i.a,f.a,a.a,v.a,r.a,y.a,p.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(464),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t=l([Object(o.m)({selector:"addon-mod-workshop-assessment-strategy-accumulative",templateUrl:"addon-mod-workshop-assessment-strategy-accumulative.html"})],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(464),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t=l([Object(o.m)({selector:"addon-mod-workshop-assessment-strategy-comments",templateUrl:"addon-mod-workshop-assessment-strategy-comments.html"})],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(464),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t=l([Object(o.m)({selector:"addon-mod-workshop-assessment-strategy-numerrors",templateUrl:"addon-mod-workshop-assessment-strategy-numerrors.html"})],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(464),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t=l([Object(o.m)({selector:"addon-mod-workshop-assessment-strategy-rubric",templateUrl:"addon-mod-workshop-assessment-strategy-rubric.html"})],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return g});var o=n(0),r=n(260),i=n(304),l=n(336),a=n(1290),s=n(1291),u=n(1292),c=n(768),d=n(102),f=n(88),p=n(104),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=[r.a,i.a,l.a],g=function(){function e(e,t,n,o,r,i){e.registerHandler(t),n.registerHandler(o),r.register(i)}return e=h([Object(o.I)({declarations:[],imports:[c.a],providers:[r.a,i.a,l.a,a.a,s.a,u.a]}),m("design:paramtypes",[d.a,a.a,p.a,u.a,f.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"b",function(){return b});var o=n(0),r=n(256),i=n(520),l=n(1293),a=n(1294),s=n(1295),u=n(1296),c=n(10),d=n(154),f=n(170),p=n(325),h=n(88),m=n(151),_=n(144),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=[r.a,i.a],b=function(){function e(e,t,n,o,i,l,a,s,u,c,d,f){e.registerHandler(t),n.registerHandler(o),i.register(l),d.registerClickHandler(f),s.isDesktop()&&u.registerClick(r.a.PUSH_SIMULATION_COMPONENT,function(e){c.ready().then(function(){d.clicked(e)})})}return e=g([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a,a.a,s.a,u.a]}),v("design:paramtypes",[f.a,l.a,p.a,a.a,h.a,s.a,o.M,c.a,m.a,d.a,_.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var o=n(0),r=n(1297),i=n(9),l=n(154),a=n(6),s=n(1),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=[r.a],f=function(){function e(e,t,n,o,r){var a=r.getInstance("AddonRemoteThemesModule");e.registerProcess({name:"AddonRemoteThemesPreloadCurrent",priority:l.a.MAX_RECOMMENDED_PRIORITY+250,blocking:!0,load:t.preloadCurrentSite.bind(t)}),e.registerProcess({name:"AddonRemoteThemesPreload",blocking:!0,load:t.preloadSites.bind(t)});var s;n.on(i.a.SITE_ADDED,function(e){s=e.siteId,t.addSite(e.siteId).catch(function(e){a.error("Error adding site",e)}).then(function(){s==e.siteId&&(s=!1),e.siteId==o.getCurrentSiteId()&&(t.unloadTmpStyles(),t.enable(e.siteId))})}),n.on(i.a.SITE_UPDATED,function(e){e.siteId===o.getCurrentSiteId()&&t.load(e.siteId).catch(function(e){a.error("Error loading site after site update",e)})}),n.on(i.a.LOGIN,function(e){t.unloadTmpStyles(),t.enable(e.siteId)}),n.on(i.a.LOGOUT,function(e){t.clear()}),n.on(i.a.SITE_DELETED,function(e){t.removeSite(e.id)}),n.on(i.a.LOGIN_SITE_CHECKED,function(e){t.loadTmpStyles(e.config.mobilecssurl).catch(function(e){a.error("Error loading tmp styles",e)})}),n.on(i.a.LOGIN_SITE_UNCHECKED,function(e){e.siteId&&e.siteId===s||t.unloadTmpStyles()})}return e=u([Object(o.I)({declarations:[],imports:[],providers:[r.a]}),c("design:paramtypes",[l.a,r.a,i.a,s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(2),i=n(58),l=n(269),a=n(192),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.workshopAssessmentStrategyDelegate=o,r}return s(t,e),t.prototype.ngOnInit=function(){this.jsData.workshopId=this.workshopId,this.jsData.assessment=this.assessment,this.jsData.edit=this.edit,this.jsData.selectedValues=this.selectedValues,this.jsData.fieldErrors=this.fieldErrors,this.jsData.strategy=this.strategy,this.getHandlerData(this.workshopAssessmentStrategyDelegate.getHandlerName(this.strategy))},u([Object(o.D)(),c("design:type",Number)],t.prototype,"workshopId",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"assessment",void 0),u([Object(o.D)(),c("design:type",Boolean)],t.prototype,"edit",void 0),u([Object(o.D)(),c("design:type",Array)],t.prototype,"selectedValues",void 0),u([Object(o.D)(),c("design:type",Object)],t.prototype,"fieldErrors",void 0),u([Object(o.D)(),c("design:type",String)],t.prototype,"strategy",void 0),t=u([Object(o.m)({selector:"core-siteplugins-workshop-assessment-strategy",templateUrl:"core-siteplugins-workshop-assessment-strategy.html"}),c("design:paramtypes",[i.a,r.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(196),l=n(58),a=n(60),s=n(28),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},p=function(e){function t(t,n,o,r,i){var l=e.call(this,t,"CoreSitePluginsOnlyTitleBlockComponent")||this;return l.sitePluginsProvider=n,l.blockDelegate=o,l.navCtrl=r,l.svComponent=i,l}return u(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.fetchContentDefaultError="Error getting "+this.block.contents.title+" data."},t.prototype.gotoBlock=function(){var e=this.blockDelegate.getHandlerName(this.block.name),t=this.sitePluginsProvider.getSitePluginHandler(e);if(t){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreSitePluginsPluginPage",{title:this.title,component:t.plugin.component,method:t.handlerSchema.method,initResult:t.initResult,args:{contextlevel:this.contextLevel,instanceid:this.instanceId}})}},t=c([Object(o.m)({selector:"core-siteplugins-only-title-block",templateUrl:"core-siteplugins-only-title-block.html"}),f(4,Object(o.N)()),d("design:paramtypes",[o.C,l.a,a.a,r.s,s.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(23),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.fb=e,this.utils=t,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname;var t={value:this.utils.isTrueOrOne(e.defaultdata),disabled:this.disabled};this.form.addControl(e.modelName,this.fb.control(t,e.required&&!e.locked?r.u.requiredTrue:null))}},l([Object(o.D)(),a("design:type",Object)],e.prototype,"field",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"edit",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"disabled",void 0),l([Object(o.D)(),a("design:type",r.g)],e.prototype,"form",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"contextLevel",void 0),l([Object(o.D)(),a("design:type",Number)],e.prototype,"contextInstanceId",void 0),e=l([Object(o.m)({selector:"addon-user-profile-field-checkbox",templateUrl:"addon-user-profile-field-checkbox.html"}),a("design:paramtypes",[r.d,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(23),i=n(3),l=n(24),a=n(2),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.fb=e,this.timeUtils=t,this.utils=n,this.translate=o,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e,t=this.field;if(t&&this.edit&&this.form){t.modelName="profile_field_"+t.shortname;var n=this.utils.isTrueOrOne(t.param3);t.format=this.timeUtils.fixFormatForDatetime(this.timeUtils.convertPHPToMoment(this.translate.instant("core."+(n?"strftimedatetime":"strftimedate")))),t.param1&&(e=parseInt(t.param1,10))&&(t.min=e),t.param2&&(e=parseInt(t.param2,10))&&(t.max=e);this.form.addControl(t.modelName,this.fb.control({value:t.defaultdata,disabled:this.disabled},t.required&&!t.locked?r.u.required:null))}},s([Object(o.D)(),u("design:type",Object)],e.prototype,"field",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"edit",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"disabled",void 0),s([Object(o.D)(),u("design:type",r.g)],e.prototype,"form",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"contextLevel",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"contextInstanceId",void 0),e=s([Object(o.m)({selector:"addon-user-profile-field-datetime",templateUrl:"addon-user-profile-field-datetime.html"}),u("design:paramtypes",[r.d,l.a,a.a,i.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(23),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.fb=e,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname,e.options=e.param1?e.param1.split(/\r\n|\r|\n/g):[];this.form.addControl(e.modelName,this.fb.control({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?r.u.required:null))}},i([Object(o.D)(),l("design:type",Object)],e.prototype,"field",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"edit",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"disabled",void 0),i([Object(o.D)(),l("design:type",r.g)],e.prototype,"form",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"contextLevel",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"contextInstanceId",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"courseId",void 0),e=i([Object(o.m)({selector:"addon-user-profile-field-menu",templateUrl:"addon-user-profile-field-menu.html"}),l("design:paramtypes",[r.d])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(23),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.fb=e,this.utils=t,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname,e.param2&&(e.maxlength=parseInt(e.param2,10)||""),e.inputType=this.utils.isTrueOrOne(e.param3)?"password":"text";this.form.addControl(e.modelName,this.fb.control({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?r.u.required:null))}},l([Object(o.D)(),a("design:type",Object)],e.prototype,"field",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"edit",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"disabled",void 0),l([Object(o.D)(),a("design:type",r.g)],e.prototype,"form",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"contextLevel",void 0),l([Object(o.D)(),a("design:type",Number)],e.prototype,"contextInstanceId",void 0),l([Object(o.D)(),a("design:type",Number)],e.prototype,"courseId",void 0),e=l([Object(o.m)({selector:"addon-user-profile-field-text",templateUrl:"addon-user-profile-field-text.html"}),a("design:paramtypes",[r.d,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(23),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname;this.control=new r.e({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?r.u.required:null),this.form.addControl(e.modelName,this.control)}},i([Object(o.D)(),l("design:type",Object)],e.prototype,"field",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"edit",void 0),i([Object(o.D)(),l("design:type",Object)],e.prototype,"disabled",void 0),i([Object(o.D)(),l("design:type",r.g)],e.prototype,"form",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"contextLevel",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"contextInstanceId",void 0),i([Object(o.D)(),l("design:type",Number)],e.prototype,"courseId",void 0),e=i([Object(o.m)({selector:"addon-user-profile-field-textarea",templateUrl:"addon-user-profile-field-textarea.html"}),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(13),i=n(61),l=n(196),a=n(40),s=n(3),u=n(1),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this,t,"AddonBlockActivityModulesComponent")||this;return l.courseProvider=n,l.translate=o,l.moduleDelegate=r,l.sitesProvider=i,l.entries=[],l.fetchContentDefaultError="Error getting activity modules data.",l}return c(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.invalidateContent=function(){return this.courseProvider.invalidateSections(this.instanceId)},t.prototype.fetchContent=function(){var e=this;return this.courseProvider.getSections(this.getCourseId(),!1,!0).then(function(t){e.entries=[];var n={},o={},r={};t.forEach(function(t){t.modules&&t.modules.forEach(function(t){!1!==t.uservisible&&e.courseProvider.moduleHasView(t)&&void 0===r[t.modname]&&(void 0===n[t.modname]&&(n[t.modname]=e.moduleDelegate.supportsFeature(t.modname,a.a.FEATURE_MOD_ARCHETYPE,a.a.MOD_ARCHETYPE_OTHER)),n[t.modname]==a.a.MOD_ARCHETYPE_RESOURCE?r.resources||(r.resources=e.translate.instant("core.resources")):r[t.modname]=t.modplural,o[t.modname]=t.modicon)})}),r=e.utils.sortValues(r);for(var i in r){var l=void 0;l="resources"===i?e.courseProvider.getModuleIconSrc("page",o.page):e.moduleDelegate.getModuleIconSrc(i,o[i]),e.entries.push({icon:l,name:r[i],modName:i})}})},t.prototype.getCourseId=function(){switch(this.contextLevel){case"course":return this.instanceId;default:return this.sitesProvider.getCurrentSiteHomeId()}},d([Object(o.D)(),f("design:type",Object)],t.prototype,"block",void 0),d([Object(o.D)(),f("design:type",String)],t.prototype,"contextLevel",void 0),d([Object(o.D)(),f("design:type",Number)],t.prototype,"instanceId",void 0),t=d([Object(o.m)({selector:"addon-block-activitymodules",templateUrl:"addon-block-activitymodules.html"}),f("design:paramtypes",[o.C,r.a,s.c,i.a,u.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(9),l=n(24),a=n(1),s=n(52),u=n(188),c=n(38),d=n(102),f=n(172),p=n(196),h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e){function t(t,n,o,r,i,l,a,s,u){var c=e.call(this,t,"AddonBlockMyOverviewComponent")||this;return c.coursesProvider=n,c.courseCompletionProvider=o,c.eventsProvider=r,c.courseHelper=i,c.courseOptionsDelegate=l,c.coursesHelper=a,c.sitesProvider=s,c.timeUtils=u,c.courses={filter:"",all:[],allincludinghidden:[],past:[],inprogress:[],future:[],favourite:[],hidden:[],custom:[]},c.customFilter=[],c.selectedFilter="inprogress",c.sort="fullname",c.filteredCourses=[],c.prefetchCoursesData={all:{},allincludinghidden:{},inprogress:{},past:{},future:{},favourite:{},hidden:{},custom:{}},c.showFilters={all:"show",allincludinghidden:"show",past:"show",inprogress:"show",future:"show",favourite:"show",hidden:"show",custom:"hidden"},c.showFilter=!1,c.showSelectorFilter=!1,c.showSortFilter=!1,c.prefetchIconsInitialized=!1,c.courseIds=[],c.fetchContentDefaultError="Error getting my overview data.",c}return h(t,e),t.prototype.ngOnInit=function(){var t=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.updateSiteObserver=this.eventsProvider.on(i.a.SITE_UPDATED,function(){t.downloadCourseEnabled=!t.coursesProvider.isDownloadCourseDisabledInSite(),t.downloadCoursesEnabled=!t.coursesProvider.isDownloadCoursesDisabledInSite()},this.sitesProvider.getCurrentSiteId()),this.coursesObserver=this.eventsProvider.on(s.a.EVENT_MY_COURSES_UPDATED,function(){t.refreshContent()},this.sitesProvider.getCurrentSiteId()),this.currentSite=this.sitesProvider.getCurrentSite();var n=[];n.push(this.currentSite.getLocalSiteConfig("AddonBlockMyOverviewSort",this.sort).then(function(e){t.sort=e})),n.push(this.currentSite.getLocalSiteConfig("AddonBlockMyOverviewFilter",this.selectedFilter).then(function(e){t.selectedFilter=e})),Promise.all(n).finally(function(){e.prototype.ngOnInit.call(t)})},t.prototype.ngOnChanges=function(e){e.downloadEnabled&&!e.downloadEnabled.previousValue&&this.downloadEnabled&&this.loaded&&this.initPrefetchCoursesIcons()},t.prototype.invalidateContent=function(){var e=this,t=[];return t.push(this.coursesProvider.invalidateUserCourses().finally(function(){t.push(e.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(t){return e.courseCompletionProvider.invalidateCourseCompletion(t)}))}))})),t.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&t.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(t).finally(function(){e.prefetchIconsInitialized=!1})},t.prototype.fetchContent=function(){var e=this,t=this.block.configs;return this.coursesHelper.getUserCoursesWithOptions(this.sort,null,null,t&&t.displaycategories&&"1"==t.displaycategories.value).then(function(n){e.courseIds=n.map(function(e){return e.id}),e.showSortFilter=n.length>0&&void 0!==n[0].lastaccess,e.initCourseFilters(n),e.showSelectorFilter=n.length>0&&(e.courses.past.length>0||e.courses.future.length>0||void 0!==n[0].enddate),e.courses.filter="",e.showFilter=!1,e.showFilters.all=e.getShowFilterValue(!t||"1"==t.displaygroupingall.value,0===e.courses.all.length),e.showFilters.allincludinghidden=e.getShowFilterValue(t&&"1"==t.displaygroupingallincludinghidden.value,0===e.courses.allincludinghidden.length),e.showFilters.inprogress=e.getShowFilterValue(!t||"1"==t.displaygroupinginprogress.value,0===e.courses.inprogress.length),e.showFilters.past=e.getShowFilterValue(!t||"1"==t.displaygroupingpast.value,0===e.courses.past.length),e.showFilters.future=e.getShowFilterValue(!t||"1"==t.displaygroupingfuture.value,0===e.courses.future.length),e.showSelectorFilter=n.length>0&&(e.courses.past.length>0||e.courses.future.length>0||void 0!==n[0].enddate),e.showFilters.hidden=e.getShowFilterValue(e.showSelectorFilter&&void 0!==n[0].hidden&&(!t||"1"==t.displaygroupinghidden.value),0===e.courses.hidden.length),e.showFilters.favourite=e.getShowFilterValue(e.showSelectorFilter&&void 0!==n[0].isfavourite&&(!t||t.displaygroupingstarred&&"1"==t.displaygroupingstarred.value||t.displaygroupingfavourites&&"1"==t.displaygroupingfavourites.value),0===e.courses.favourite.length),e.showFilters.custom=e.getShowFilterValue(e.showSelectorFilter&&t&&"1"==t.displaygroupingcustomfield.value&&t.customfieldsexport&&t.customfieldsexport.value,!1),e.customFilter="show"==e.showFilters.custom?e.textUtils.parseJSON(t.customfieldsexport.value):[],e.showSelectorFilter&&(e.showSelectorFilter=Object.keys(e.showFilters).some(function(t){return"show"==e.showFilters[t]})),(!e.showSelectorFilter||"inprogress"===e.selectedFilter&&"disabled"==e.showFilters.inprogress)&&(e.selectedFilter="all"),e.setCourseFilter(e.selectedFilter),e.initPrefetchCoursesIcons()})},t.prototype.getShowFilterValue=function(e,t){return e?t?"disabled":"show":"hidden"},t.prototype.filterChanged=function(e){var t=e.target.value&&e.target.value.trim().toLowerCase();this.filteredCourses=!t||this.courses.allincludinghidden.length<=0?this.courses.allincludinghidden:this.courses.allincludinghidden.filter(this.courses.allincludinghidden.length>0&&void 0!==this.courses.allincludinghidden[0].displayname?function(e){return e.displayname.toLowerCase().indexOf(t)>-1}:function(e){return e.fullname.toLowerCase().indexOf(t)>-1})},t.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,Object.keys(this.prefetchCoursesData).forEach(function(t){e.courseHelper.initPrefetchCoursesIcons(e.courses[t],e.prefetchCoursesData[t]).then(function(n){e.prefetchCoursesData[t]=n})}))},t.prototype.prefetchCourses=function(){var e=this,t=this.selectedFilter,n=this.prefetchCoursesData[t].icon;return this.courseHelper.prefetchCourses(this.courses[t],this.prefetchCoursesData[t]).catch(function(o){e.isDestroyed||(e.domUtils.showErrorModalDefault(o,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData[t].icon=n)})},t.prototype.selectedChanged=function(){this.setCourseFilter(this.selectedFilter)},t.prototype.setCourseFilter=function(e){var t=this;if(this.selectedFilter=e,"show"==this.showFilters.custom&&e.startsWith("custom-")&&void 0!==this.customFilter[e.substr(7)]){var n=this.block.configs.customfiltergrouping.value,o=this.customFilter[e.substr(7)].value;this.loaded=!1,this.coursesProvider.getEnrolledCoursesByCustomField(n,o).then(function(e){var n=e.map(function(e){return e.id});t.filteredCourses=t.courses.allincludinghidden.filter(function(e){return-1!==n.indexOf(e.id)})}).catch(function(e){t.domUtils.showErrorModalDefault(e,t.fetchContentDefaultError)}).finally(function(){t.loaded=!0})}else if(this.currentSite.setLocalSiteConfig("AddonBlockMyOverviewFilter",e),"show"==this.showFilters[e])this.filteredCourses=this.courses[e];else{var r=Object.keys(this.showFilters).find(function(e){return"show"==t.showFilters[e]});r&&this.setCourseFilter(r)}},t.prototype.initCourseFilters=function(e){var t=this;this.courses.allincludinghidden=e,this.showSortFilter&&("lastaccess"==this.sort?e.sort(function(e,t){return t.lastaccess-e.lastaccess}):"fullname"==this.sort&&e.sort(function(e,t){var n=e.fullname.toLowerCase(),o=t.fullname.toLowerCase();return n.localeCompare(o)})),this.courses.all=[],this.courses.past=[],this.courses.inprogress=[],this.courses.future=[],this.courses.favourite=[],this.courses.hidden=[];var n=this.timeUtils.timestamp();e.forEach(function(e){e.hidden?t.courses.hidden.push(e):(t.courses.all.push(e),e.enddate&&e.enddate<n||e.completed?t.courses.past.push(e):e.startdate>n?t.courses.future.push(e):t.courses.inprogress.push(e),e.isfavourite&&t.courses.favourite.push(e))}),this.setCourseFilter(this.selectedFilter)},t.prototype.switchSort=function(e){this.sort=e,this.currentSite.setLocalSiteConfig("AddonBlockMyOverviewSort",this.sort),this.initCourseFilters(this.courses.allincludinghidden)},t.prototype.switchFilter=function(){this.showFilter=!this.showFilter,this.courses.filter="",this.showFilter?this.filteredCourses=this.courses.allincludinghidden:this.setCourseFilter(this.selectedFilter)},t.prototype.switchFilterClosed=function(){var e=this;this.showFilter&&setTimeout(function(){e.searchbar.setFocus()})},t.prototype.showFilterSwitchButton=function(){return this.loaded&&this.courses.allincludinghidden&&this.courses.allincludinghidden.length>5},t.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},m([Object(o._9)("searchbar"),_("design:type",r.z)],t.prototype,"searchbar",void 0),m([Object(o.D)(),_("design:type",Boolean)],t.prototype,"downloadEnabled",void 0),t=m([Object(o.m)({selector:"addon-block-myoverview",templateUrl:"addon-block-myoverview.html"}),_("design:paramtypes",[o.C,s.a,f.a,i.a,c.a,d.a,u.a,a.a,l.a])],t)}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(1),i=n(13),l=n(38),a=n(232),s=n(50),u=n(196),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t,"AddonBlockSiteMainMenuComponent")||this;return a.sitesProvider=n,a.courseProvider=o,a.courseHelper=r,a.siteHomeProvider=i,a.prefetchDelegate=l,a.component="AddonBlockSiteMainMenu",a.fetchContentDefaultError="Error getting main menu data.",a.siteHomeId=n.getCurrentSite().getSiteHomeId(),a}return c(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.invalidateContent=function(){var e=[];return e.push(this.courseProvider.invalidateSections(this.siteHomeId)),e.push(this.siteHomeProvider.invalidateNewsForum(this.siteHomeId)),this.mainMenuBlock&&this.mainMenuBlock.modules&&e.push(this.prefetchDelegate.invalidateModules(this.mainMenuBlock.modules,this.siteHomeId)),Promise.all(e)},t.prototype.fetchContent=function(){var e=this;return this.courseProvider.getSections(this.siteHomeId,!1,!0).then(function(t){if(e.mainMenuBlock=t.find(function(e){return 0==e.section}),e.mainMenuBlock){e.mainMenuBlock.hasContent=e.courseHelper.sectionHasContent(e.mainMenuBlock),e.courseHelper.addHandlerDataForModules([e.mainMenuBlock],e.siteHomeId,void 0,void 0,!0);var n=e.sitesProvider.getCurrentSite(),o=n?n.getStoredConfig()||{}:{},r=!1;if(o.frontpageloggedin){r=o.frontpageloggedin.split(",").find(function(e){return"0"==e})}if(r&&e.mainMenuBlock.modules)return e.siteHomeProvider.getNewsForum(e.siteHomeId).then(function(t){for(var n=0;n<e.mainMenuBlock.modules.length;n++){var o=e.mainMenuBlock.modules[n];if("forum"==o.modname&&o.instance==t.id){e.mainMenuBlock.modules.splice(n,1);break}}}).catch(function(){})}})},d([Object(o.D)(),f("design:type",Boolean)],t.prototype,"downloadEnabled",void 0),t=d([Object(o.m)({selector:"addon-block-sitemainmenu",templateUrl:"addon-block-sitemainmenu.html"}),f("design:paramtypes",[o.C,r.a,i.a,l.a,a.a,s.a])],t)}(u.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(24),i=n(1),l=n(52),a=n(188),s=n(102),u=n(196),c=n(312),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l,a){var s=e.call(this,t,"AddonBlockTimelineComponent")||this;return s.coursesProvider=n,s.timelineProvider=o,s.courseOptionsDelegate=r,s.coursesHelper=i,s.sitesProvider=l,s.timeUtils=a,s.sort="sortbydates",s.filter="next30days",s.timeline={events:[],loaded:!1,canLoadMore:void 0},s.timelineCourses={courses:[],loaded:!1,canLoadMore:!1},s.courseIds=[],s.fetchContentDefaultError="Error getting timeline data.",s}return d(t,e),t.prototype.ngOnInit=function(){var t=this;this.currentSite=this.sitesProvider.getCurrentSite(),this.currentSite.getLocalSiteConfig("AddonBlockTimelineFilter",this.filter).then(function(e){t.filter=e,t.switchFilter()}),this.currentSite.getLocalSiteConfig("AddonBlockTimelineSort",this.sort).then(function(n){t.sort=n,e.prototype.ngOnInit.call(t)})},t.prototype.invalidateContent=function(){var e=[];return e.push(this.timelineProvider.invalidateActionEventsByTimesort()),e.push(this.timelineProvider.invalidateActionEventsByCourses()),e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&e.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(e)},t.prototype.fetchContent=function(){var e=this;return"sortbydates"==this.sort?this.fetchMyOverviewTimeline().finally(function(){e.timeline.loaded=!0}):"sortbycourses"==this.sort?this.fetchMyOverviewTimelineByCourses().finally(function(){e.timelineCourses.loaded=!0}):void 0},t.prototype.loadMoreTimeline=function(){var e=this;return this.fetchMyOverviewTimeline(this.timeline.canLoadMore).catch(function(t){e.domUtils.showErrorModalDefault(t,e.fetchContentDefaultError)})},t.prototype.loadMoreCourse=function(e){var t=this;return this.timelineProvider.getActionEventsByCourse(e.id,e.canLoadMore).then(function(t){e.events=e.events.concat(t.events),e.canLoadMore=t.canLoadMore}).catch(function(e){t.domUtils.showErrorModalDefault(e,t.fetchContentDefaultError)})},t.prototype.fetchMyOverviewTimeline=function(e){var t=this;return this.timelineProvider.getActionEventsByTimesort(e).then(function(e){t.timeline.events=e.events,t.timeline.canLoadMore=e.canLoadMore})},t.prototype.fetchMyOverviewTimelineByCourses=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions().then(function(t){var n=e.timeUtils.timestamp();if(t=t.filter(function(e){return e.startdate<=n&&(!e.enddate||e.enddate>=n)}),e.timelineCourses.courses=t,t.length>0)return e.courseIds=t.map(function(e){return e.id}),e.timelineProvider.getActionEventsByCourses(e.courseIds).then(function(t){e.timelineCourses.courses.forEach(function(e){e.events=t[e.id].events,e.canLoadMore=t[e.id].canLoadMore})})})},t.prototype.switchFilter=function(){switch(this.currentSite.setLocalSiteConfig("AddonBlockTimelineFilter",this.filter),this.filter){case"overdue":this.dataFrom=-14,this.dataTo=0;break;case"next7days":this.dataFrom=0,this.dataTo=7;break;case"next30days":this.dataFrom=0,this.dataTo=30;break;case"next3months":this.dataFrom=0,this.dataTo=90;break;case"next6months":this.dataFrom=0,this.dataTo=180;break;default:case"all":this.dataFrom=-14,this.dataTo=void 0}},t.prototype.switchSort=function(e){this.sort=e,this.currentSite.setLocalSiteConfig("AddonBlockTimelineSort",this.sort),this.timeline.loaded||"sortbydates"!=this.sort?this.timelineCourses.loaded||"sortbycourses"!=this.sort||this.fetchContent():this.fetchContent()},t=f([Object(o.m)({selector:"addon-block-timeline",templateUrl:"addon-block-timeline.html"}),p("design:paramtypes",[o.C,l.a,c.a,s.a,a.a,i.a,r.a])],t)}(u.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(5),i=n(1),l=n(4),a=n(11),s=n(24),u=n(2),c=n(13),d=n(15),f=n(14),p=(n.n(f),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},_=function(){function e(e,t,n,r,i,l,a,s){this.navCtrl=e,this.utils=t,this.textUtils=n,this.domUtils=r,this.sitesProvider=i,this.courseProvider=l,this.contentLinksHelper=a,this.timeUtils=s,this.events=[],this.filteredEvents=[],this.loadMore=new o.v}return e.prototype.ngOnChanges=function(e){var t=this;if(this.showCourse=this.utils.isTrueOrOne(this.showCourse),e.events||e.from||e.to)if(this.events&&this.events.length>0){var n=this.filterEventsByTime(this.from,this.to);this.empty=!n||n.length<=0;var o={};n.forEach(function(e){var n=t.timeUtils.getMidnightForTimestamp(e.timesort);o[n]?o[n].push(e):o[n]=[e]});var r=this.timeUtils.getMidnightForTimestamp();this.filteredEvents=[],Object.keys(o).forEach(function(e){var n=parseInt(e);t.filteredEvents.push({color:n<r?"danger":"light",dayTimestamp:n,events:o[n]})})}else this.empty=!0},e.prototype.filterEventsByTime=function(e,t){var n=this;return e=f().add(e,"days").startOf("day").unix(),t=void 0!==t?f().add(t,"days").startOf("day").unix():t,this.events.filter(function(n){return t?e<=n.timesort&&n.timesort<t:e<=n.timesort}).map(function(e){return e.iconUrl=n.courseProvider.getModuleIconSrc(e.icon.component),e})},e.prototype.loadMoreEvents=function(){this.loadingMore=!0,this.loadMore.emit()},e.prototype.action=function(e,t){var n=this;e.preventDefault(),e.stopPropagation(),t=this.textUtils.decodeHTMLEntities(t);var o=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(t,void 0,this.navCtrl).then(function(e){if(!e)return n.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(t)}).finally(function(){o.dismiss()})},p([Object(o.D)(),h("design:type",Object)],e.prototype,"events",void 0),p([Object(o.D)(),h("design:type",Object)],e.prototype,"showCourse",void 0),p([Object(o.D)(),h("design:type",Number)],e.prototype,"from",void 0),p([Object(o.D)(),h("design:type",Number)],e.prototype,"to",void 0),p([Object(o.D)(),h("design:type",Boolean)],e.prototype,"canLoadMore",void 0),p([Object(o.O)(),h("design:type",o.v)],e.prototype,"loadMore",void 0),e=p([Object(o.m)({selector:"addon-block-timeline-events",templateUrl:"addon-block-timeline-events.html"}),m(0,Object(o.N)()),h("design:paramtypes",[r.s,u.a,a.a,l.a,i.a,c.a,d.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(9),i=n(1),l=n(52),a=n(188),s=n(38),u=n(102),c=n(172),d=n(196),f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e){function t(t,n,o,r,i,l,a,s){var u=e.call(this,t,"AddonBlockRecentlyAccessedCoursesComponent")||this;return u.coursesProvider=n,u.courseCompletionProvider=o,u.eventsProvider=r,u.courseHelper=i,u.courseOptionsDelegate=l,u.coursesHelper=a,u.sitesProvider=s,u.courses=[],u.prefetchCoursesData={icon:"",badge:""},u.prefetchIconsInitialized=!1,u.courseIds=[],u.fetchContentDefaultError="Error getting recent courses data.",u}return f(t,e),t.prototype.ngOnInit=function(){var t=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.updateSiteObserver=this.eventsProvider.on(r.a.SITE_UPDATED,function(){t.downloadCourseEnabled=!t.coursesProvider.isDownloadCourseDisabledInSite(),t.downloadCoursesEnabled=!t.coursesProvider.isDownloadCoursesDisabledInSite()},this.sitesProvider.getCurrentSiteId()),this.coursesObserver=this.eventsProvider.on(l.a.EVENT_MY_COURSES_UPDATED,function(){t.refreshContent()},this.sitesProvider.getCurrentSiteId()),e.prototype.ngOnInit.call(this)},t.prototype.ngOnChanges=function(e){e.downloadEnabled&&!e.downloadEnabled.previousValue&&this.downloadEnabled&&this.loaded&&this.initPrefetchCoursesIcons()},t.prototype.invalidateContent=function(){var e=this,t=[];return t.push(this.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(t){return e.courseCompletionProvider.invalidateCourseCompletion(t)}))})),t.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&t.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(t).finally(function(){e.prefetchIconsInitialized=!1})},t.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions("lastaccess",10,null,this.block.configs&&this.block.configs.displaycategories&&"1"==this.block.configs.displaycategories.value).then(function(t){e.courses=t,e.initPrefetchCoursesIcons()})},t.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,this.courseHelper.initPrefetchCoursesIcons(this.courses,this.prefetchCoursesData).then(function(t){e.prefetchCoursesData=t}))},t.prototype.prefetchCourses=function(){var e=this,t=this.prefetchCoursesData.icon;return this.courseHelper.prefetchCourses(this.courses,this.prefetchCoursesData).catch(function(n){e.isDestroyed||(e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=t)})},t.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},p([Object(o.D)(),h("design:type",Boolean)],t.prototype,"downloadEnabled",void 0),t=p([Object(o.m)({selector:"addon-block-recentlyaccessedcourses",templateUrl:"addon-block-recentlyaccessedcourses.html"}),h("design:paramtypes",[o.C,l.a,c.a,r.a,s.a,u.a,a.a,i.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(1),l=n(196),a=n(467),s=n(15),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},p=function(e){function t(t,n,o,r,i){var l=e.call(this,t,"AddonBlockRecentlyAccessedItemsComponent")||this;return l.navCtrl=n,l.sitesProvider=o,l.recentItemsProvider=r,l.contentLinksHelper=i,l.items=[],l.fetchContentDefaultError="Error getting recently accessed items data.",l}return u(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.invalidateContent=function(){return this.recentItemsProvider.invalidateRecentItems()},t.prototype.fetchContent=function(){var e=this;return this.recentItemsProvider.getRecentItems().then(function(t){e.items=t})},t.prototype.action=function(e,t){var n=this;e.preventDefault(),e.stopPropagation();var o=this.textUtils.decodeHTMLEntities(t.viewurl),r=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(o,void 0,this.navCtrl).then(function(e){if(!e)return n.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(o)}).finally(function(){r.dismiss()})},t=c([Object(o.m)({selector:"addon-block-recentlyaccesseditems",templateUrl:"addon-block-recentlyaccesseditems.html"}),f(1,Object(o.N)()),d("design:paramtypes",[o.C,r.s,i.a,a.a,s.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(9),i=n(1),l=n(52),a=n(188),s=n(38),u=n(102),c=n(172),d=n(196),f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e){function t(t,n,o,r,i,l,a,s){var u=e.call(this,t,"AddonBlockStarredCoursesComponent")||this;return u.coursesProvider=n,u.courseCompletionProvider=o,u.eventsProvider=r,u.courseHelper=i,u.courseOptionsDelegate=l,u.coursesHelper=a,u.sitesProvider=s,u.courses=[],u.prefetchCoursesData={icon:"",badge:""},u.prefetchIconsInitialized=!1,u.courseIds=[],u.fetchContentDefaultError="Error getting starred courses data.",u}return f(t,e),t.prototype.ngOnInit=function(){var t=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.updateSiteObserver=this.eventsProvider.on(r.a.SITE_UPDATED,function(){t.downloadCourseEnabled=!t.coursesProvider.isDownloadCourseDisabledInSite(),t.downloadCoursesEnabled=!t.coursesProvider.isDownloadCoursesDisabledInSite()},this.sitesProvider.getCurrentSiteId()),this.coursesObserver=this.eventsProvider.on(l.a.EVENT_MY_COURSES_UPDATED,function(){t.refreshContent()},this.sitesProvider.getCurrentSiteId()),e.prototype.ngOnInit.call(this)},t.prototype.ngOnChanges=function(e){e.downloadEnabled&&!e.downloadEnabled.previousValue&&this.downloadEnabled&&this.loaded&&this.initPrefetchCoursesIcons()},t.prototype.invalidateContent=function(){var e=this,t=[];return t.push(this.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(t){return e.courseCompletionProvider.invalidateCourseCompletion(t)}))})),t.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&t.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(t).finally(function(){e.prefetchIconsInitialized=!1})},t.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions("timemodified",0,"isfavourite",this.block.configs&&this.block.configs.displaycategories&&"1"==this.block.configs.displaycategories.value).then(function(t){e.courses=t,e.initPrefetchCoursesIcons()})},t.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,this.courseHelper.initPrefetchCoursesIcons(this.courses,this.prefetchCoursesData).then(function(t){e.prefetchCoursesData=t}))},t.prototype.prefetchCourses=function(){var e=this,t=this.prefetchCoursesData.icon;return this.courseHelper.prefetchCourses(this.courses,this.prefetchCoursesData).catch(function(n){e.isDestroyed||(e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=t)})},t.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},p([Object(o.D)(),h("design:type",Boolean)],t.prototype,"downloadEnabled",void 0),t=p([Object(o.m)({selector:"addon-block-starredcourses",templateUrl:"addon-block-starredcourses.html"}),h("design:paramtypes",[o.C,l.a,c.a,r.a,s.a,u.a,a.a,i.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n.options=[],n}return l(t,e),t.prototype.init=function(){var e=this;if(this.isShowOrListMode())this.updateValue(this.value);else{this.options=this.field.param1.split(/\r?\n/).map(function(e){return{key:e,value:e}});var t=[];"edit"==this.mode&&this.value&&this.value.content&&this.value.content.split("##").forEach(function(n){e.options.findIndex(function(e){return n==e.key})>=0&&t.push(n)}),"search"==this.mode&&this.addControl("f_"+this.field.id+"_allreq"),this.addControl("f_"+this.field.id,t)}},t.prototype.updateValue=function(e){this.value=e||{},this.value.content=e&&e.content&&e.content.split("##").join("<br>")},t=a([Object(o.m)({selector:"addon-mod-data-field-checkbox",templateUrl:"addon-mod-data-field-checkbox.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(23),i=n(3),l=n(24),a=n(180),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t)||this;return r.fb=t,r.timeUtils=n,r.translate=o,r}return s(t,e),t.prototype.init=function(){if(!this.isShowOrListMode()){var e;this.format=this.timeUtils.fixFormatForDatetime(this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimedate"))),"search"==this.mode?(this.addControl("f_"+this.field.id+"_z"),e=this.search["f_"+this.field.id+"_y"]?new Date(this.search["f_"+this.field.id+"_y"]+"-"+this.search["f_"+this.field.id+"_m"]+"-"+this.search["f_"+this.field.id+"_d"]):new Date,this.search["f_"+this.field.id]=this.timeUtils.toDatetimeFormat(e.getTime())):(e=this.value&&this.value.content?new Date(1e3*parseInt(this.value.content,10)):new Date,e=this.timeUtils.toDatetimeFormat(e.getTime())),this.addControl("f_"+this.field.id,e)}},t=u([Object(o.m)({selector:"addon-mod-data-field-date",templateUrl:"addon-mod-data-field-date.html"}),c("design:paramtypes",[r.d,l.a,i.c])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(23),i=n(180),l=n(177),a=n(97),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n){var o=e.call(this,t)||this;return o.fb=t,o.fileSessionprovider=n,o.files=[],o}return s(t,e),t.prototype.getFiles=function(e){var t=e&&e.files||[];return t.length>0&&(t=[t[0]]),t},t.prototype.init=function(){"search"!=this.mode?(this.component=a.a.COMPONENT,this.componentId=this.database.coursemodule,this.updateValue(this.value),"edit"==this.mode&&(this.maxSizeBytes=parseInt(this.field.param3,10),this.fileSessionprovider.setFiles(this.component,this.database.id+"_"+this.field.id,this.files))):this.addControl("f_"+this.field.id)},t.prototype.updateValue=function(e){this.value=e,this.files=this.getFiles(e)},t=u([Object(o.m)({selector:"addon-mod-data-field-file",templateUrl:"addon-mod-data-field-file.html"}),c("design:paramtypes",[r.d,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(23),i=n(79),l=n(5),a=n(360),s=n(180),u=n(10),c=n(4),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t)||this;return a.fb=t,a.platform=n,a.geolocation=o,a.domUtils=r,a.sanitizer=i,a.appProvider=l,a.showGeolocation=!a.appProvider.isDesktop(),a}return d(t,e),t.prototype.formatLatLong=function(e,t){if(null!==e||null!==t){var n=e?Math.abs(e).toFixed(4):"0.0000",o=t?Math.abs(t).toFixed(4):"0.0000";return n+(e<0?"S":"N")+" "+o+(t<0?"W":"E")}},t.prototype.getLatLongLink=function(e,t){if(null!==e||null!==t){var n=e?e.toFixed(4):"0.0000",o=t?t.toFixed(4):"0.0000",r=void 0;return r=this.platform.is("ios")?"http://maps.apple.com/?ll="+n+","+o+"&near="+n+","+o:"geo:"+n+","+o,this.sanitizer.bypassSecurityTrustUrl(r)}},t.prototype.init=function(){this.value&&this.updateValue(this.value),"edit"==this.mode?(this.addControl("f_"+this.field.id+"_0",this.north),this.addControl("f_"+this.field.id+"_1",this.east)):"search"==this.mode&&this.addControl("f_"+this.field.id)},t.prototype.updateValue=function(e){this.value=e,this.north=e&&parseFloat(e.content)||null,this.east=e&&parseFloat(e.content1)||null},t.prototype.getLocation=function(e){var t=this;e.preventDefault();var n=this.domUtils.showModalLoading("addon.mod_data.gettinglocation",!0);this.geolocation.getCurrentPosition({enableHighAccuracy:!0,timeout:3e4}).then(function(e){t.form.controls["f_"+t.field.id+"_0"].setValue(e.coords.latitude),t.form.controls["f_"+t.field.id+"_1"].setValue(e.coords.longitude)}).catch(function(e){t.isPermissionDeniedError(e)?t.domUtils.showErrorModal("addon.mod_data.locationpermissiondenied",!0):t.domUtils.showErrorModalDefault(e,"Error getting location")}).finally(function(){n.dismiss()})},t.prototype.isPermissionDeniedError=function(e){return e&&"code"in e&&"PERMISSION_DENIED"in e&&e.code===e.PERMISSION_DENIED},t=f([Object(o.m)({selector:"addon-mod-data-field-latlong",templateUrl:"addon-mod-data-field-latlong.html"}),p("design:paramtypes",[r.d,l.v,a.a,c.a,i.c,u.a])],t)}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n.options=[],n}return l(t,e),t.prototype.init=function(){if(!this.isShowOrListMode()){this.options=this.field.param1.split("\n");var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},t=a([Object(o.m)({selector:"addon-mod-data-field-menu",templateUrl:"addon-mod-data-field-menu.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n.options=[],n}return l(t,e),t.prototype.init=function(){var e=this;if(this.isShowOrListMode())this.updateValue(this.value);else{this.options=this.field.param1.split(/\r?\n/).map(function(e){return{key:e,value:e}});var t=[];"edit"==this.mode&&this.value&&this.value.content&&this.value.content.split("##").forEach(function(n){e.options.findIndex(function(e){return n==e.key})>=0&&t.push(n)}),"search"==this.mode&&this.addControl("f_"+this.field.id+"_allreq"),this.addControl("f_"+this.field.id,t)}},t.prototype.updateValue=function(e){this.value=e||{},this.value.content=e&&e.content&&e.content.split("##").join("<br>")},t=a([Object(o.m)({selector:"addon-mod-data-field-multimenu",templateUrl:"addon-mod-data-field-multimenu.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n}return l(t,e),t.prototype.init=function(){if(!this.isShowOrListMode()){var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},t=a([Object(o.m)({selector:"addon-mod-data-field-text",templateUrl:"addon-mod-data-field-text.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n}return l(t,e),t.prototype.init=function(){if(!this.isShowOrListMode()){var e;if("edit"==this.mode&&this.value){var t=parseFloat(this.value.content);e=isNaN(t)?"":t}this.addControl("f_"+this.field.id,e)}},t=a([Object(o.m)({selector:"addon-mod-data-field-number",templateUrl:"addon-mod-data-field-number.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(23),i=n(177),l=n(4),a=n(180),s=n(97),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o){var r=e.call(this,t)||this;return r.fb=t,r.fileSessionprovider=n,r.domUtils=o,r.files=[],r}return u(t,e),t.prototype.getFiles=function(e){var t=e&&e.files||[];return t.length>0&&(t=[t[0]]),t},t.prototype.findFile=function(e,t){return e.find(function(e){return e.filename==t})||!1},t.prototype.init=function(){if("search"!=this.mode){if(this.component=s.a.COMPONENT,this.componentId=this.database.coursemodule,this.updateValue(this.value),"edit"==this.mode){this.maxSizeBytes=parseInt(this.field.param3,10),this.fileSessionprovider.setFiles(this.component,this.database.id+"_"+this.field.id,this.files);this.addControl("f_"+this.field.id+"_alttext",this.value&&this.value.content1||"")}}else this.addControl("f_"+this.field.id)},t.prototype.updateValue=function(e){var t=this;this.value=e;var n=e&&e.files||[];if(n.length>0){this.image=this.findFile(n,"list"==this.mode?"thumb_"+e.content:e.content),this.image||"list"!=this.mode||(this.image=this.findFile(n,e.content)),this.files=[this.image]}else this.image=!1,this.files=[];"edit"!=this.mode&&(this.entryId=e&&e.recordid||null,this.title=e&&e.content1||"",this.imageUrl=null,setTimeout(function(){t.image&&(t.imageUrl=t.image.offline?t.image.toURL():t.image.fileurl)},1),this.width=this.domUtils.formatPixelsSize(this.field.param1),this.height=this.domUtils.formatPixelsSize(this.field.param2))},t=c([Object(o.m)({selector:"addon-mod-data-field-picture",templateUrl:"addon-mod-data-field-picture.html"}),d("design:paramtypes",[r.d,i.a,l.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n.options=[],n}return l(t,e),t.prototype.init=function(){if(!this.isShowOrListMode()){this.options=this.field.param1.split("\n");var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},t=a([Object(o.m)({selector:"addon-mod-data-field-radiobutton",templateUrl:"addon-mod-data-field-radiobutton.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(23),i=n(11),l=n(97),a=n(180),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n){var o=e.call(this,t)||this;return o.fb=t,o.textUtils=n,o}return s(t,e),t.prototype.format=function(e){return e?this.textUtils.replacePluginfileUrls(e.content,e&&e.files||[]):""},t.prototype.init=function(){if(this.component=l.a.COMPONENT,this.componentId=this.database.coursemodule,!this.isShowOrListMode()){var e;if("edit"==this.mode){e=this.value?this.textUtils.replacePluginfileUrls(this.value.content,this.value&&this.value.files||[]):""}this.addControl("f_"+this.field.id,e)}},t=u([Object(o.m)({selector:"addon-mod-data-field-textarea",templateUrl:"addon-mod-data-field-textarea.html"}),c("design:paramtypes",[r.d,i.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(23),i=n(180),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t)||this;return n.fb=t,n}return l(t,e),t.prototype.init=function(){if(!this.isShowOrListMode()){var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},t=a([Object(o.m)({selector:"addon-mod-data-field-url",templateUrl:"addon-mod-data-field-url.html"}),s("design:paramtypes",[r.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(1),i=n(2),l=n(18),a=n(53),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.sitesProvider=e,this.filepoolProvider=t,this.utils=n,this.ROOT_CACHE_KEY="mmaModLabel:"}return t=e,e.prototype.getLabelDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"label:"+e},e.prototype.getLabelByField=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={courseids:[e]},u={cacheKey:l.getLabelDataCacheKey(e),updateFrequency:a.a.FREQUENCY_RARELY};return o?u.omitExpires=!0:r&&(u.getFromCache=!1,u.emergencyCache=!1),i.read("mod_label_get_labels_by_courses",s,u).then(function(e){if(e&&e.labels){var o=e.labels.find(function(e){return e[t]==n});if(o)return o}return Promise.reject(null)})})},e.prototype.getLabel=function(e,t,n,o,r){return this.getLabelByField(e,"coursemodule",t,n,o,r)},e.prototype.getLabelById=function(e,t,n,o,r){return this.getLabelByField(e,"id",t,n,o,r)},e.prototype.invalidateLabelData=function(e,t){var n=this;return this.sitesProvider.getSite(null).then(function(t){return t.invalidateWsCacheForKey(n.getLabelDataCacheKey(e))})},e.prototype.invalidateContent=function(e,n,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateLabelData(n,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,t.COMPONENT,e,!0)),this.utils.allPromises(r)},e.prototype.isGetLabelAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_label_get_labels_by_courses")})},e.prototype.isGetLabelAvailableForSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("mod_label_get_labels_by_courses")},e.COMPONENT="mmaModLabel",e=t=s([Object(o.A)(),u("design:paramtypes",[r.a,l.a,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(128),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.questionDelegate=e,this.questionProvider=t,this.name="AddonQbehaviourDeferredFeedback",this.type="deferredfeedback"}return e.prototype.determineNewState=function(e,t,n,o){return this.determineNewStateDeferred(e,t,n,o)},e.prototype.determineNewStateDeferred=function(e,t,n,o,r,i){var l=this;return this.questionProvider.getQuestion(e,t,n.slot,o).catch(function(){return n}).then(function(a){var s=l.questionProvider.getState(a.state);return s.finished||!s.active?s:l.questionProvider.getQuestionAnswers(e,t,n.slot,!1,o).then(function(e){var t=l.questionProvider.getBasicAnswers(n.answers);e=l.questionProvider.convertAnswersArrayToObject(e,!0);var o=l.questionProvider.getBasicAnswers(e);if(i){if(i(n,e,o,n.answers,t))return s}else if(l.questionDelegate.isSameResponse(n,o,t))return s;var a,u;if((a=r?r(n,n.answers):l.questionDelegate.isCompleteResponse(n,t))<0)u="cannotdeterminestatus";else if(a>0)u="complete";else{var c=l.questionDelegate.isGradableResponse(n,t);u=c<0?"cannotdeterminestatus":c>0?"invalid":"todo"}return l.questionProvider.getState(u)})})},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return r([Object(o.D)(),i("design:type",Object)],e.prototype,"question",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"component",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"componentId",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"attemptId",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"offlineEnabled",void 0),r([Object(o.D)(),i("design:type",String)],e.prototype,"contextLevel",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"contextInstanceId",void 0),r([Object(o.O)(),i("design:type",o.v)],e.prototype,"buttonClicked",void 0),r([Object(o.O)(),i("design:type",o.v)],e.prototype,"onAbort",void 0),e=r([Object(o.m)({selector:"addon-qbehaviour-informationitem",templateUrl:"addon-qbehaviour-informationitem.html"}),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(2),i=n(364),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.utils=e,this.name="AddonQtypeMultichoice",this.type="qtype_multichoice"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){var n=!0,o=!1;for(var r in t)-1!=r.indexOf("choice")&&(n=!1,t[r]&&(o=!0));return n?this.isCompleteResponseSingle(t):o?1:0},e.prototype.isCompleteResponseSingle=function(e){return e.answer&&""!==e.answer?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.isCompleteResponse(e,t)},e.prototype.isGradableResponseSingle=function(e){return this.isCompleteResponseSingle(e)},e.prototype.isSameResponse=function(e,t,n){var o=!0,r=!0;for(var i in n)-1!=i.indexOf("choice")&&(o=!1,this.utils.sameAtKeyMissingIsBlank(t,n,i)||(r=!1));return o?this.isSameResponseSingle(t,n):r},e.prototype.isSameResponseSingle=function(e,t){return this.utils.sameAtKeyMissingIsBlank(e,t,"answer")},e.prototype.prepareAnswers=function(e,t,n,o){!e||e.multi||void 0===t[e.optionsName]||t[e.optionsName]||delete t[e.optionsName]},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";var o=n(0),r=n(6),i=n(197),l=function(){function e(e,t,n,o,r,i){this.domUtils=t,this.container=n,this.question=o,this.readOnly=r,this.drops=i,this.toLoad=0,this.afterImageLoadDone=!1,this.proportion=1,this.logger=e.getInstance("AddonQtypeDdImageOrTextQuestion"),this.initializer(o)}return e.prototype.calculateImgProportion=function(){var e=this.doc.bgImg();this.proportion=1,e.width!=e.naturalWidth&&(this.proportion=e.width/e.naturalWidth)},e.prototype.convertToWindowXY=function(e){var t=this.doc.bgImg(),n=this.domUtils.getElementXY(t,null,"ddarea");return e[0]*=this.proportion,e[1]*=this.proportion,[Number(e[0])+n[0]+1,Number(e[1])+n[1]+1]},e.prototype.createAllDragAndDrops=function(){this.initDrops();this.doc.dragItemsArea().classList.add("clearfix"),this.makeDragAreaClickable();for(var e=this.doc.dragItemHomes(),t=0,n=0;n<e.length;n++){var o=e[n],r=this.doc.getClassnameNumericSuffix(o,"dragitemhomes"),i=this.doc.getClassnameNumericSuffix(o,"choice"),l=this.doc.getClassnameNumericSuffix(o,"group");if("IMG"==o.tagName){var a=document.createElement("div");a.className=o.className,o.className="",o.parentNode.insertBefore(a,o),a.appendChild(o)}var s=this.doc.cloneNewDragItem(t,r);if(t++,this.readOnly||this.draggableForQuestion(s,l,i),s.classList.contains("infinite"))for(var u=this.doc.dropZoneGroup(l).length-1;u>0;){var c=this.doc.cloneNewDragItem(t,r);t++,this.readOnly||this.draggableForQuestion(c,l,i),u--}}if(this.repositionDragsForQuestion(),!this.readOnly){this.doc.dropZones().forEach(function(e){e.setAttribute("tabIndex","0")})}},e.prototype.deselectDrags=function(){this.doc.dragItems().forEach(function(e){e.classList.remove("beingdragged")}),this.selected=null},e.prototype.destroy=function(){this.stopPolling(),this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.prototype.docStructure=function(e){var t=this,n=this.container.querySelector(".addon-qtype-ddimageortext-container"),o={},r=n.querySelector("div.draghomes");if(r){n.querySelector("div.dragitems").remove();var i=n.querySelector("div.ddarea");i.appendChild(n.querySelector("div.dropzones")),i.appendChild(r),r.classList.remove("draghomes"),r.classList.add("dragitems"),Array.from(r.querySelectorAll(".draghome")).forEach(function(e,t){e.classList.add("dragitemhomes"+t)})}else r=n.querySelector("div.dragitems");return o.topNode=function(){return n},o.dragItemsArea=function(){return r},o.dragItems=function(){return Array.from(r.querySelectorAll(".drag"))},o.dropZones=function(){return Array.from(n.querySelectorAll("div.dropzones div.dropzone"))},o.dropZoneGroup=function(e){return Array.from(n.querySelectorAll("div.dropzones div.group"+e))},o.dragItemsClonedFrom=function(e){return Array.from(r.querySelectorAll(".dragitems"+e))},o.dragItem=function(e){return r.querySelector(".draginstance"+e)},o.dragItemsInGroup=function(e){return Array.from(r.querySelectorAll(".drag.group"+e))},o.dragItemHomes=function(){return Array.from(r.querySelectorAll(".draghome"))},o.bgImg=function(){return n.querySelector(".dropbackground")},o.dragItemHome=function(e){return r.querySelector(".dragitemhomes"+e)},o.getClassnameNumericSuffix=function(e,n){if(e.classList&&e.classList.length)for(var o=new RegExp("^"+n+"([0-9])+$"),r=new RegExp("([0-9])+$"),i=0;i<e.classList.length;i++)if(o.test(e.classList[i])){var l=r.exec(e.classList[i]);return Number(l[0])}t.logger.warn('Prefix "'+n+'" not found in class names.')},o.cloneNewDragItem=function(e,t){var n=o.dragItemHome(t);if(null===n)return null;var r,i=n.querySelector("img");if(i){var l=i.cloneNode(!0);(r=document.createElement("div")).appendChild(l),r.className=n.className,l.className=""}else r=n.cloneNode(!0);return r.classList.remove("dragitemhomes"+t),r.classList.remove("draghome"),r.classList.add("dragitems"+t),r.classList.add("draginstance"+e),r.classList.add("drag"),r.style.visibility="inherit",r.style.position="absolute",r.setAttribute("draginstanceno",String(e)),r.setAttribute("dragitemno",String(t)),n.parentElement.insertBefore(r,n.nextSibling),r},o},e.prototype.draggableForQuestion=function(e,t,n){var o=this;e.setAttribute("group",String(t)),e.setAttribute("choice",String(n)),e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.classList.contains("beingdragged")?o.deselectDrags():o.selectDrag(e)})},e.prototype.dropClick=function(e){var t=this.selected;t&&(this.deselectDrags(),Number(e.getAttribute("group"))===Number(t.getAttribute("group"))&&this.placeDragInDrop(t,e))},e.prototype.getChoicesForDrop=function(e,t){return Array.from(this.doc.topNode().querySelectorAll("div.dragitemgroup"+t.getAttribute("group")+" .choice"+e+".drag"))},e.prototype.getUnplacedChoiceForDrop=function(e,t){for(var n=this.getChoicesForDrop(e,t),o=0;o<n.length;o++){var r=n[o];if(this.readOnly||!r.classList.contains("placed")&&!r.classList.contains("beingdragged"))return r}return null},e.prototype.initDrops=function(){for(var e=this,t=this.doc.topNode().querySelector("div.dropzones"),n={},o=1;o<=8;o++){var r=document.createElement("div");r.className="dropzonegroup"+o,t.appendChild(r),n[o]=r}var i=function(t){var o=l.drops[t],r="dropzone group"+o.group+" place"+t,i=o.text.replace('"','"'),a=document.createElement("div");a.setAttribute("title",i),a.className=r,n[o.group].appendChild(a),a.style.opacity="0.5",a.setAttribute("xy",o.xy),a.setAttribute("aria-label",o.text),a.setAttribute("place",t),a.setAttribute("inputid",o.fieldname.replace(":","_")),a.setAttribute("group",o.group),a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.dropClick(a)})},l=this;for(var a in this.drops)i(a)},e.prototype.initializer=function(e){var t=this;if(this.doc=this.docStructure(e.slot),this.readOnly){this.doc.topNode().classList.add("readonly")}setTimeout(function(){var e=t.doc.bgImg();e.complete&&e.naturalWidth||(t.toLoad++,e.addEventListener("load",function(){t.toLoad--}));t.doc.dragItemHomes().forEach(function(e){if("IMG"==e.tagName){var n=e;n.complete&&n.naturalWidth||(t.toLoad++,n.addEventListener("load",function(){t.toLoad--}))}}),t.pollForImageLoad()}),this.resizeFunction=this.repositionDragsForQuestion.bind(this),window.addEventListener("resize",this.resizeFunction)},e.prototype.makeDragAreaClickable=function(){var e=this;if(!this.readOnly){this.doc.dragItemsArea().addEventListener("click",function(t){var n=e.selected;if(!n)return!1;e.deselectDrags(),e.removeDragFromDrop(n),t.preventDefault(),t.stopPropagation()})}},e.prototype.placeDragInDrop=function(e,t){var n=t.getAttribute("inputid"),o=this.doc.topNode().querySelector("input#"+n),r=e.getAttribute("inputid");if(r&&r!=n){this.doc.topNode().querySelector("input#"+r).setAttribute("value","")}var i=this.domUtils.getElementXY(t,null,"ddarea");e.style.left=i[0]-1+"px",e.style.top=i[1]-1+"px",e.classList.add("placed"),o.setAttribute("value",e.getAttribute("choice")),e.setAttribute("inputid",n)},e.prototype.pollForImageLoad=function(){var e=this;this.afterImageLoadDone||(this.toLoad<=0&&(this.createAllDragAndDrops(),this.afterImageLoadDone=!0,this.question.loaded=!0),setTimeout(function(){e.pollForImageLoad()},1e3))},e.prototype.removeDragFromDrop=function(e){var t=e.getAttribute("inputid");if(t){this.doc.topNode().querySelector("input#"+t).setAttribute("value","")}var n=this.doc.dragItemHome(Number(e.getAttribute("dragitemno"))),o=this.domUtils.getElementXY(n,null,"ddarea");e.style.left=o[0]+"px",e.style.top=o[1]+"px",e.classList.remove("placed"),e.setAttribute("inputid","")},e.prototype.repositionDragsForQuestion=function(){var e=this.doc.dragItems();e.forEach(function(e){e.classList.remove("placed"),e.setAttribute("inputid","")}),this.calculateImgProportion();for(var t=this.doc.dragItemHomes(),n=function(e){var n=t[e],r=n.querySelector("img");if(r&&r.naturalWidth>0){var i=[Math.round(r.naturalWidth*o.proportion),Math.round(r.naturalHeight*o.proportion)];r.style.width=i[0]+"px",r.style.height=i[1]+"px";var l=o.doc.getClassnameNumericSuffix(n,"dragitemhomes"),a=o.doc.getClassnameNumericSuffix(n,"group");Array.from(o.doc.topNode().querySelectorAll(".drag.group"+a+".dragitems"+l+"  img")).forEach(function(e){e.style.width=i[0]+"px",e.style.height=i[1]+"px"})}},o=this,r=0;r<t.length;r++)n(r);this.updatePaddingSizesAll();var i=this.doc.dropZones();for(r=0;r<i.length;r++){var l=i[r],a=l.getAttribute("xy").split(",").map(function(e){return Number(e)}),s=this.convertToWindowXY(a);l.style.left=s[0]+"px",l.style.top=s[1]+"px";var u="input#"+l.getAttribute("inputid"),c=this.doc.topNode().querySelector(u),d=Number(c.value);if(d>0){null!==(f=this.getUnplacedChoiceForDrop(d,l))&&this.placeDragInDrop(f,l)}}for(r=0;r<e.length;r++){var f;(f=e[r]).classList.contains("placed")||f.classList.contains("beingdragged")||this.removeDragFromDrop(f)}},e.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("beingdragged")},e.prototype.stopPolling=function(){this.afterImageLoadDone=!0},e.prototype.updatePaddingSizeForGroup=function(e){var t=Array.from(this.doc.topNode().querySelectorAll(".draghome.group"+e));if(0!==t.length){for(var n=0,o=0,r=0;r<t.length;r++){var i=t[r],l=i.querySelector("img");if(l)n=Math.max(n,Math.round(this.proportion*l.naturalWidth)),o=Math.max(o,Math.round(this.proportion*l.naturalHeight));else{var a=i.style.padding;i.style.padding="",n=Math.max(n,Math.round(i.clientWidth)),o=Math.max(o,Math.round(i.clientHeight)),i.style.padding=a}}if(n<=0||o<=0)return;n=Math.round(n+8*this.proportion),o=Math.round(o+8*this.proportion);var s=function(r){var i=t[r],l=i.querySelector("img"),a=void 0,s=void 0;if(l)a=Math.round(l.naturalWidth*u.proportion),s=Math.round(l.naturalHeight*u.proportion);else{var c=i.style.padding;i.style.padding="",a=Math.round(i.clientWidth),s=Math.round(i.clientHeight),i.style.padding=c}var d=Math.round((o-s)/2),f=Math.round((n-a)/2),p=n-(a+2*f),h=o-(s+2*d);i.style.padding=d+"px "+f+"px "+(d+h)+"px "+(f+p)+"px";var m=u.doc.getClassnameNumericSuffix(i,"dragitemhomes");Array.from(u.doc.topNode().querySelectorAll(".drag.group"+e+".dragitems"+m)).forEach(function(e){e.style.padding=d+"px "+f+"px "+(d+h)+"px "+(f+p)+"px"})},u=this;for(r=0;r<t.length;r++)s(r);this.doc.dropZoneGroup(e).forEach(function(e){e.style.width=n+2+"px ",e.style.height=o+2+"px "})}},e.prototype.updatePaddingSizesAll=function(){for(var e=1;e<=8;e++)this.updatePaddingSizeForGroup(e)},e}();n.d(t,"a",function(){return c});var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n,o){var r=e.call(this,t,"AddonQtypeDdImageOrTextComponent",n)||this;return r.loggerProvider=t,r.destroyed=!1,r.textIsRendered=!1,r.ddAreaisRendered=!1,r.element=o.nativeElement,r}return a(t,e),t.prototype.ngOnInit=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html),t=e.querySelector(".ddarea");if(this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),!t||void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.ddArea=t.outerHTML,this.question.readOnly=!1,this.question.initObjects?(void 0!==this.question.initObjects.drops&&(this.drops=this.question.initObjects.drops),void 0!==this.question.initObjects.readonly&&(this.question.readOnly=this.question.initObjects.readonly)):this.question.amdArgs&&(void 0!==this.question.amdArgs[1]&&(this.question.readOnly=this.question.amdArgs[1]),void 0!==this.question.amdArgs[2]&&(this.drops=this.question.amdArgs[2])),this.question.loaded=!1},t.prototype.ddAreaRendered=function(){this.ddAreaisRendered=!0,this.textIsRendered&&this.questionRendered()},t.prototype.textRendered=function(){this.textIsRendered=!0,this.ddAreaisRendered&&this.questionRendered()},t.prototype.questionRendered=function(){this.destroyed||(this.questionInstance=new l(this.loggerProvider,this.domUtils,this.element,this.question,this.question.readOnly,this.drops))},t.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},t=s([Object(o.m)({selector:"addon-qtype-ddimageortext",templateUrl:"addon-qtype-ddimageortext.html"}),u("design:paramtypes",[r.a,o.C,o.t])],t)}(i.a)},function(e,t,n){"use strict";var o=n(0),r=n(6),i=n(197),l=n(18),a=n(1),s=n(22),u=function(){function e(e,t){this.instance=e,this.domUtils=t,this.NS="http://www.w3.org/2000/svg"}return e.prototype.addShape=function(e,t){var n=document.createElementNS(this.NS,e.type);n.setAttribute("fill",e.color),n.setAttribute("fill-opacity","0.5"),n.setAttribute("stroke","black");for(var o in t)n.setAttribute(o,String(t[o]));return this.dropZone.appendChild(n),n},e.prototype.clear=function(){var e=this.instance.doc.bgImg(),t=this.domUtils.getElementXY(e,null,"ddarea"),n=this.instance.doc.topNode().querySelector("div.ddarea div.dropzones");n.style.left=t[0]+"px",n.style.top=t[1]+"px",n.style.width=e.width+"px",n.style.height=e.height+"px";var o=this.instance.doc.markerTexts();if(o.style.left=t[0]+"px",o.style.top=t[1]+"px",o.style.width=e.width+"px",o.style.height=e.height+"px",this.dropZone)for(;this.dropZone.firstChild;)this.dropZone.removeChild(this.dropZone.firstChild);else this.dropZone=document.createElementNS(this.NS,"svg"),n.appendChild(this.dropZone);this.dropZone.style.width=e.width+"px",this.dropZone.style.height=e.height+"px",this.instance.shapes=[]},e}(),c=function(){function e(e,t,n,o,r,i,l,a){this.domUtils=t,this.textUtils=n,this.container=o,this.question=r,this.readOnly=i,this.dropZones=l,this.imgSrc=a,this.COLOURS=["#FFFFFF","#B0C4DE","#DCDCDC","#D8BFD8","#87CEFA","#DAA520","#FFD700","#F0E68C"],this.afterImageLoadDone=!1,this.nextColourIndex=0,this.proportion=1,this.shapes=[],this.logger=e.getInstance("AddonQtypeDdMarkerQuestion"),this.graphics=new u(this,this.domUtils),this.initializer(r)}return e.prototype.calculateImgProportion=function(){var e=this.doc.bgImg();this.proportion=1,e.width!=e.naturalWidth&&(this.proportion=e.width/e.naturalWidth)},e.prototype.cloneNewDragItem=function(e,t){e.querySelector("span.markertext").style.opacity="0.6";var n=e.cloneNode(!0);return n.classList.remove("draghome"),n.classList.add("dragitem"),n.classList.add("item"+t),e.parentElement.insertBefore(n,e.nextSibling),this.readOnly||this.draggable(n),n},e.prototype.convertToWindowXY=function(e){var t=this.doc.bgImg(),n=this.domUtils.getElementXY(t,null,"ddarea");return e[0]*=this.proportion,e[1]*=this.proportion,[Number(e[0])+n[0],Number(e[1])+n[1]]},e.prototype.coordsInImg=function(e){var t=this.doc.bgImg();return e[0]*this.proportion<=t.width&&e[1]*this.proportion<=t.height},e.prototype.deselectDrags=function(){this.doc.dragItems().forEach(function(e){e.classList.remove("beingdragged")}),this.selected=null},e.prototype.destroy=function(){this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.prototype.docStructure=function(e){var t=this,n=this.container.querySelector(".addon-qtype-ddmarker-container"),o=n.querySelector("div.dragitems");return{topNode:function(){return n},bgImg:function(){return n.querySelector(".dropbackground")},dragItemsArea:function(){return o},dragItems:function(){return Array.from(o.querySelectorAll(".dragitem"))},dragItemsForChoice:function(e){return Array.from(o.querySelectorAll("span.dragitem.choice"+e))},dragItemForChoice:function(e,t){return o.querySelector("span.dragitem.choice"+e+".item"+t)},dragItemBeingDragged:function(e){return o.querySelector("span.dragitem.beingdragged.choice"+e)},dragItemHome:function(e){return o.querySelector("span.draghome.choice"+e)},dragItemHomes:function(){return Array.from(o.querySelectorAll("span.draghome"))},getClassnameNumericSuffix:function(e,n){if(e.classList&&e.classList.length)for(var o=new RegExp("^"+n+"([0-9])+$"),r=new RegExp("([0-9])+$"),i=0;i<e.classList.length;i++)if(o.test(e.classList[i])){var l=r.exec(e.classList[i]);return Number(l[0])}t.logger.warn('Prefix "'+n+'" not found in class names.')},inputsForChoices:function(){return Array.from(n.querySelectorAll("input.choices"))},inputForChoice:function(e){return n.querySelector("input.choice"+e)},markerTexts:function(){return n.querySelector("div.markertexts")}}},e.prototype.draggable=function(e){var t=this;e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var o=t.selected;if(o&&!e.classList.contains("unplaced")){var r=t.domUtils.getElementXY(e,null,"ddarea"),i=t.doc.bgImg(),l=t.domUtils.getElementXY(i,null,"ddarea");if(r[0]=r[0]-l[0]+n.offsetX,r[1]=r[1]-l[1]+n.offsetY,r[0]<=i.width&&r[1]<=i.height)return t.deselectDrags(),void t.dropDrag(o,r)}e.classList.contains("beingdragged")?t.deselectDrags():t.selectDrag(e)})},e.prototype.dragHomeXY=function(e){var t=this.doc.dragItemHome(e),n=this.domUtils.getElementXY(t,null,"ddarea");return[n[0],n[1]]},e.prototype.drawDropZone=function(e,t,n,o,r){var i,l=this,a=this.doc.markerTexts();if(i=a.querySelector("span.markertext"+e))""!==t?i.innerHTML=t:i.remove();else if(""!==t){var s="markertext markertext"+e,u=document.createElement("span");u.className=s,u.innerHTML=t,a.appendChild(u)}var c="drawShape"+this.textUtils.ucFirst(n);if(this[c]instanceof Function){var d=this[c](e,o,r);if(null!==d){var f=this.doc.topNode().querySelector("div.ddarea div.markertexts span.markertext"+e);if(null!==f){d[0]=(d[0]-f.offsetWidth/2)*this.proportion,d[1]=(d[1]-f.offsetHeight/2)*this.proportion,f.style.opacity="0.6",f.style.left=d[0]+"px",f.style.top=d[1]+"px";var p=f.querySelector("a");null!==p&&(p.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),l.shapes.forEach(function(e){e.css("fill-opacity",.5)}),l.shapes[e].css("fill-opacity",1),setTimeout(function(){l.shapes[e].css("fill-opacity",.5)},2e3)}),p.setAttribute("tabIndex","0"))}}}},e.prototype.drawShapeCircle=function(e,t,n){var o=t.match(/(\d+),(\d+);(\d+)/);if(o&&4===o.length){o.shift();var r=o.map(function(e){return Number(e)});if(this.coordsInImg([r[0]-r[2],r[1]-r[2]]))return this.shapes[e]=this.graphics.addShape({type:"circle",color:n},{cx:r[0]*this.proportion,cy:r[1]*this.proportion,r:r[2]*this.proportion}),[r[0],r[1]]}return null},e.prototype.drawShapeRectangle=function(e,t,n){var o=t.match(/(\d+),(\d+);(\d+),(\d+)/);if(o&&5===o.length){o.shift();var r=o.map(function(e){return Number(e)});if(this.coordsInImg([r[0]+r[2],r[1]+r[3]]))return this.shapes[e]=this.graphics.addShape({type:"rect",color:n},{x:r[0]*this.proportion,y:r[1]*this.proportion,width:r[2]*this.proportion,height:r[3]*this.proportion}),[r[0]+r[2]/2,r[1]+r[3]/2]}return null},e.prototype.drawShapePolygon=function(e,t,n){var o=t.split(";"),r=[],i=this.doc.bgImg(),l=[0,0],a=[i.width,i.height];for(var s in o){var u=o[s].match(/^(\d+),(\d+)$/),c=u&&u.map(function(e){return Number(e)});null!==c&&this.coordsInImg([c[1],c[2]])&&(c[1]*=this.proportion,c[2]*=this.proportion,a[0]=Math.min(c[1],a[0]),a[1]=Math.min(c[2],a[1]),l[0]=Math.max(c[1],l[0]),l[1]=Math.max(c[2],l[1]),r.push(c[1]+","+c[2]))}return r.length>2?(this.shapes[e]=this.graphics.addShape({type:"polygon",color:n},{points:r.join(" ")}),[(a[0]+l[0])/2,(a[1]+l[1])/2]):null},e.prototype.dropDrag=function(e,t){var n=this.getChoiceNoForNode(e);t&&(this.proportion<1&&(t[0]=Math.round(t[0]/this.proportion)),this.proportion<1&&(t[1]=Math.round(t[1]/this.proportion))),this.saveAllXYForChoice(n,e,t),this.redrawDragsAndDrops()},e.prototype.getCoords=function(e){var t=this.getChoiceNoForNode(e),n=e.getAttribute("value"),o=e.classList.contains("infinite"),r=this.getNoOfDragsForNode(e),i=null!==this.doc.dragItemBeingDragged(t),l=[];if(""!==n&&void 0!==n&&null!==n)for(var a=n.split(";"),s=0;s<a.length;s++){var u=a[s].split(",").map(function(e){return Number(e)});l[l.length]=this.convertToWindowXY(u)}return(o||l.length+(i?1:0)<r)&&(l[l.length]=this.dragHomeXY(t)),l},e.prototype.getChoiceNoForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"choice"))},e.prototype.getDragXY=function(e){var t=this.domUtils.getElementXY(e,null,"ddarea"),n=this.doc.bgImg(),o=this.domUtils.getElementXY(n,null,"ddarea");return t[0]-=o[0],t[1]-=o[1],this.proportion<1&&(t[0]=Math.round(t[0]/this.proportion)),this.proportion<1&&(t[1]=Math.round(t[1]/this.proportion)),t},e.prototype.getItemNoForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"item"))},e.prototype.getNextColour=function(){var e=this.COLOURS[this.nextColourIndex];return this.nextColourIndex++,this.nextColourIndex===this.COLOURS.length&&(this.nextColourIndex=0),e},e.prototype.getNoOfDragsForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"noofdrags"))},e.prototype.initializer=function(e){var t=this;this.doc=this.docStructure(e.slot),setTimeout(function(){t.pollForImageLoad()}),this.resizeFunction=this.redrawDragsAndDrops.bind(this),window.addEventListener("resize",this.resizeFunction)},e.prototype.makeImageDropable=function(){var e=this;if(!this.readOnly){this.doc.bgImg().addEventListener("click",function(t){var n=e.selected;if(!n)return!1;var o=[t.offsetX,t.offsetY];e.deselectDrags(),e.dropDrag(n,o),t.preventDefault(),t.stopPropagation()});this.doc.dragItemsArea().addEventListener("click",function(t){var n=e.selected;return!!n&&(n.classList.contains("unplaced")?(e.deselectDrags(),!1):(e.deselectDrags(),e.dropDrag(n,null),t.preventDefault(),void t.stopPropagation()))})}},e.prototype.pollForImageLoad=function(){var e=this;if(!this.afterImageLoadDone){var t=this.doc.bgImg();!t.src&&this.imgSrc&&(t.src=this.imgSrc);var n=function(){t.removeEventListener("load",n),e.makeImageDropable(),setTimeout(function(){e.redrawDragsAndDrops()}),e.afterImageLoadDone=!0,e.question.loaded=!0};t.addEventListener("load",n),setTimeout(function(){e.pollForImageLoad()},500)}},e.prototype.redrawDragsAndDrops=function(){var e=this.doc.dragItems();e.forEach(function(e){e.classList.add("unneeded","unplaced")}),this.calculateImgProportion();for(var t=this.doc.inputsForChoices(),n=0;n<t.length;n++)for(var o=t[n],r=this.getChoiceNoForNode(o),i=this.getCoords(o),l=this.doc.dragItemHome(r),a=this.dragHomeXY(r),s=0;s<i.length;s++){var u=this.doc.dragItemForChoice(r,s);!u||u.classList.contains("beingdragged")?u=this.cloneNewDragItem(l,s):u.classList.remove("unneeded"),a[0]==i[s][0]&&a[1]==i[s][1]||u.classList.remove("unplaced"),u.style.left=i[s][0]+"px",u.style.top=i[s][1]+"px"}for(var c=0;c<e.length;c++){var d=e[c];d.classList.contains("unneeded")&&!d.classList.contains("beingdragged")&&d.remove()}if(this.dropZones&&0!==this.dropZones.length){this.graphics.clear(),this.restartColours();for(var f in this.dropZones){var p=this.getNextColour(),h=this.dropZones[f],m=Number(f);this.drawDropZone(m,h.markertext,h.shape,h.coords,p)}}},e.prototype.resetDragXY=function(e){this.setFormValue(e,"")},e.prototype.restartColours=function(){this.nextColourIndex=0},e.prototype.saveAllXYForChoice=function(e,t,n){for(var o,r=[],i=this.doc.dragItemsForChoice(e),l=0;l<i.length;l++){var a=this.doc.dragItemForChoice(e,l);a&&(a.classList.remove("item"+l),o=this.getDragXY(a),a.classList.add("item"+r.length),r.push(o))}null!==n?(t.classList.remove("unplaced"),t.classList.add("item"+r.length),r.push(n)):t.classList.add("unplaced"),r.length>0?this.setFormValue(e,r.join(";")):this.resetDragXY(e)},e.prototype.setFormValue=function(e,t){this.doc.inputForChoice(e).setAttribute("value",t)},e.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("beingdragged");var t=this.getItemNoForNode(e);null!==t&&e.classList.remove("item"+t)},e}();n.d(t,"a",function(){return h});var d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t,"AddonQtypeDdMarkerComponent",n)||this;return a.loggerProvider=t,a.sitesProvider=r,a.urlUtils=i,a.filepoolProvider=l,a.destroyed=!1,a.textIsRendered=!1,a.ddAreaisRendered=!1,a.element=o.nativeElement,a}return d(t,e),t.prototype.ngOnInit=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html),t=e.querySelector(".ddarea"),n=e.querySelector(".ddform");if(this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),!t||!n||void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.ddArea=t.outerHTML;var o=e.querySelector(".wrongparts");o&&(this.question.ddArea+=o.outerHTML),this.question.ddArea+=n.outerHTML,this.question.readOnly=!1,this.question.initObjects?(void 0!==this.question.initObjects.dropzones&&(this.dropZones=this.question.initObjects.dropzones),void 0!==this.question.initObjects.readonly&&(this.question.readOnly=this.question.initObjects.readonly)):this.question.amdArgs&&(void 0!==this.question.amdArgs[1]&&(this.imgSrc=this.question.amdArgs[1]),void 0!==this.question.amdArgs[2]&&(this.question.readOnly=this.question.amdArgs[2]),void 0!==this.question.amdArgs[3]&&(this.dropZones=this.question.amdArgs[3])),this.question.loaded=!1},t.prototype.ddAreaRendered=function(){this.ddAreaisRendered=!0,this.textIsRendered&&this.questionRendered()},t.prototype.textRendered=function(){this.textIsRendered=!0,this.ddAreaisRendered&&this.questionRendered()},t.prototype.questionRendered=function(){var e=this;if(!this.destroyed){var t=this.sitesProvider.getCurrentSite();(this.imgSrc&&t.canDownloadFiles()&&this.urlUtils.isPluginFileUrl(this.imgSrc)?this.filepoolProvider.getSrcByUrl(t.id,this.imgSrc,this.component,this.componentId,0,!0,!0):Promise.resolve(this.imgSrc)).then(function(t){e.domUtils.waitForImages(e.questionTextEl.nativeElement).then(function(){e.questionInstance=new c(e.loggerProvider,e.domUtils,e.textUtils,e.element,e.question,e.question.readOnly,e.dropZones,t)})})}},t.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},f([Object(o._9)("questiontext"),p("design:type",o.t)],t.prototype,"questionTextEl",void 0),t=f([Object(o.m)({selector:"addon-qtype-ddmarker",templateUrl:"addon-qtype-ddmarker.html"}),p("design:paramtypes",[r.a,o.C,o.t,a.a,s.a,l.a])],t)}(i.a)},function(e,t,n){"use strict";var o=n(0),r=n(6),i=n(197),l=function(){function e(e,t,n,o,r,i,l){this.domUtils=t,this.container=n,this.question=o,this.readOnly=r,this.inputIds=i,this.textUtils=l,this.nextDragItemNo=1,this.logger=e.getInstance("AddonQtypeDdwtosQuestion"),this.initializer(o)}return e.prototype.cloneDragItem=function(e){var t=e.cloneNode(!0);t.classList.remove("draghome"),t.classList.add("drag"),t.classList.add("no"+this.nextDragItemNo),this.nextDragItemNo++,t.style.visibility="visible",t.style.position="absolute";this.container.querySelector(this.selectors.dragContainer()).appendChild(t),this.readOnly||this.makeDraggable(t)},e.prototype.cloneDragItems=function(){for(var e=Array.from(this.container.querySelectorAll(this.selectors.dragHomes())),t=0;t<e.length;t++)this.cloneDragItemsForOneChoice(e[t])},e.prototype.cloneDragItemsForOneChoice=function(e){if(e.classList.contains("infinite"))for(var t=this.getGroup(e),n=this.container.querySelectorAll(this.selectors.dropsInGroup(t)).length,o=0;o<n;o++)this.cloneDragItem(e);else this.cloneDragItem(e)},e.prototype.cssSelectors=function(e){var t=".addon-qtype-ddwtos-container",n={};return n.topNode=function(){return t},n.dragContainer=function(){return t+" div.drags"},n.drags=function(){return n.dragContainer()+" span.drag"},n.drag=function(e){return n.drags()+".no"+e},n.dragsInGroup=function(e){return n.drags()+".group"+e},n.unplacedDragsInGroup=function(e){return n.dragsInGroup(e)+".unplaced"},n.dragsForChoiceInGroup=function(e,t){return n.dragsInGroup(t)+".choice"+e},n.unplacedDragsForChoiceInGroup=function(e,t){return n.unplacedDragsInGroup(t)+".choice"+e},n.drops=function(){return t+" span.drop"},n.dropForPlace=function(e){return n.drops()+".place"+e},n.dropsInGroup=function(e){return n.drops()+".group"+e},n.dragHomes=function(){return t+" span.draghome"},n.dragHomesGroup=function(e){return t+" .draggrouphomes"+e+" span.draghome"},n.dragHome=function(e,n){return t+" .draggrouphomes"+e+" span.draghome.choice"+n},n.dropsGroup=function(e){return t+" span.drop.group"+e},n},e.prototype.deselectDrags=function(){Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(e){e.classList.remove("selected")}),this.selected=null},e.prototype.destroy=function(){this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.prototype.getChoice=function(e){return this.getClassnameNumericSuffix(e,"choice")},e.prototype.getClassnameNumericSuffix=function(e,t){if(e.classList&&e.classList.length)for(var n=new RegExp("^"+t+"([0-9])+$"),o=new RegExp("([0-9])+$"),r=0;r<e.classList.length;r++)if(n.test(e.classList[r])){var i=o.exec(e.classList[r]);return Number(i[0])}this.logger.warn('Prefix "'+t+'" not found in class names.')},e.prototype.getGroup=function(e){return this.getClassnameNumericSuffix(e,"group")},e.prototype.getNo=function(e){return this.getClassnameNumericSuffix(e,"no")},e.prototype.getPlace=function(e){return this.getClassnameNumericSuffix(e,"place")},e.prototype.initializer=function(e){var t=this;this.selectors=this.cssSelectors(e.slot);var n=this.container.querySelector(this.selectors.topNode());n.classList.add(this.readOnly?"readonly":"notreadonly"),this.setPaddingSizesAll(),this.cloneDragItems(),this.initialPlaceOfDragItems(),this.makeDropZones(),setTimeout(function(){t.positionDragItems()}),this.resizeFunction=this.positionDragItems.bind(this),window.addEventListener("resize",this.resizeFunction)},e.prototype.initialPlaceOfDragItems=function(){Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(e){e.classList.add("unplaced")}),this.placed={};for(var e in this.inputIds){var t=this.container.querySelector("input#"+this.inputIds[e]),n=Number(t.getAttribute("value"));if(0!==n){var o=this.container.querySelector(this.selectors.dropForPlace(parseInt(e,10)+1)),r=this.getGroup(o),i=this.container.querySelector(this.selectors.unplacedDragsForChoiceInGroup(n,r));this.placeDragInDrop(i,o),this.positionDragItem(i)}}},e.prototype.makeDraggable=function(e){var t=this;e.addEventListener("click",function(){e.classList.contains("selected")?t.deselectDrags():t.selectDrag(e)})},e.prototype.makeDropZone=function(e){var t=this;e.addEventListener("click",function(){var n=t.selected;if(!n)return!1;t.getGroup(n)===t.getGroup(e)&&(t.placeDragInDrop(n,e),t.deselectDrags(),t.positionDragItem(n))})},e.prototype.makeDropZones=function(){var e=this;if(!this.readOnly){Array.from(this.container.querySelectorAll(this.selectors.drops())).forEach(function(t){e.makeDropZone(t)});this.container.querySelector(this.selectors.topNode()+" .answercontainer").addEventListener("click",function(){var t=e.selected;t&&(t.classList.contains("unplaced")?e.deselectDrags():(e.removeDragFromDrop(t),e.deselectDrags(),e.positionDragItem(t)))})}},e.prototype.padToWidthHeight=function(e,t,n){e.style.width=t+"px",e.style.height=n+"px"},e.prototype.placeDragInDrop=function(e,t){var n=this.getPlace(t),o=this.container.querySelector("input#"+this.inputIds[n-1]);o.setAttribute("value",null!==e?String(this.getChoice(e)):"0");for(var r in this.placed)this.placed[r]===n&&delete this.placed[r];null!==e&&(this.placed[this.getNo(e)]=n)},e.prototype.positionDragItem=function(e){var t,n=this.placed[this.getNo(e)];if(n)t=this.domUtils.getElementXY(this.container,this.selectors.dropForPlace(n),"addon-qtype-ddwtos-container"),e.classList.remove("unplaced");else{var o=this.getGroup(e),r=this.getChoice(e);t=this.domUtils.getElementXY(this.container,this.selectors.dragHome(o,r),"answercontainer"),e.classList.add("unplaced")}t&&(e.style.left=t[0]+"px",e.style.top=t[1]+"px")},e.prototype.positionDragItems=function(){var e=this;Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(t){e.positionDragItem(t)})},e.prototype.removeDragFromDrop=function(e){var t=this.placed[this.getNo(e)],n=this.container.querySelector(this.selectors.dropForPlace(t));this.placeDragInDrop(null,n)},e.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("selected")},e.prototype.setPaddingSizesAll=function(){for(var e=1;e<=8;e++)this.setPaddingSizeForGroup(e)},e.prototype.setPaddingSizeForGroup=function(e){var t=this,n=Array.from(this.container.querySelectorAll(this.selectors.dragHomesGroup(e)));if(0!==n.length){var o=0,r=0;n.forEach(function(e){e.innerHTML=t.textUtils.decodeHTML(e.innerHTML),o=Math.max(o,Math.ceil(e.offsetWidth)),r=Math.max(r,Math.ceil(e.offsetHeight))}),o+=8,r+=2,n.forEach(function(e){t.padToWidthHeight(e,o,r)});Array.from(this.container.querySelectorAll(this.selectors.dropsGroup(e))).forEach(function(e){t.padToWidthHeight(e,o+2,r+2)})}},e}();n.d(t,"a",function(){return c});var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n,o){var r=e.call(this,t,"AddonQtypeDdwtosComponent",n)||this;return r.loggerProvider=t,r.inputIds=[],r.destroyed=!1,r.textIsRendered=!1,r.answerAreRendered=!1,r.element=o.nativeElement,r}return a(t,e),t.prototype.ngOnInit=function(){var e=this;if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var t=this.domUtils.convertToElement(this.question.html);this.questionHelper.replaceCorrectnessClasses(t),this.questionHelper.replaceFeedbackClasses(t),this.questionHelper.treatCorrectnessIcons(t);var n=t.querySelector(".answercontainer");if(!n)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);if(this.question.readOnly=n.classList.contains("readonly"),this.question.answers=n.outerHTML,this.question.text=this.domUtils.getContentsOfElement(t,".qtext"),void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);Array.from(t.querySelectorAll('input[type="hidden"]:not([name*=sequencecheck])')).forEach(function(t){e.question.text+=t.outerHTML,e.inputIds.push(t.getAttribute("id"))}),this.question.loaded=!1},t.prototype.answersRendered=function(){this.answerAreRendered=!0,this.textIsRendered&&this.questionRendered()},t.prototype.textRendered=function(){this.textIsRendered=!0,this.answerAreRendered&&this.questionRendered()},t.prototype.questionRendered=function(){var e=this;this.destroyed||this.domUtils.waitForImages(this.questionTextEl.nativeElement).then(function(){e.questionInstance=new l(e.loggerProvider,e.domUtils,e.element,e.question,e.question.readOnly,e.inputIds,e.textUtils),e.questionHelper.treatCorrectnessIconsClicks(e.element,e.component,e.componentId,e.contextLevel,e.contextInstanceId,e.courseId),e.question.loaded=!0})},t.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},s([Object(o._9)("questiontext"),u("design:type",o.t)],t.prototype,"questionTextEl",void 0),t=s([Object(o.m)({selector:"addon-qtype-ddwtos",templateUrl:"addon-qtype-ddwtos.html"}),u("design:paramtypes",[r.a,o.C,o.t])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n){return e.call(this,t,"AddonQtypeDescriptionComponent",n)||this}return l(t,e),t.prototype.ngOnInit=function(){var e=this.initComponent();if(e){var t=e.querySelector('input[type="hidden"][name*=seen]');t&&(this.question.seenInput={name:t.name,value:t.value})}},t=a([Object(o.m)({selector:"addon-qtype-description",templateUrl:"addon-qtype-description.html"}),s("design:paramtypes",[r.a,o.C])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(6),i=n(197),l=n(23),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n,o){var r=e.call(this,t,"AddonQtypeEssayComponent",n)||this;return r.fb=o,r}return a(t,e),t.prototype.ngOnInit=function(){this.initEssayComponent(),this.formControl=this.fb.control(this.question.textarea&&this.question.textarea.text)},t=s([Object(o.m)({selector:"addon-qtype-essay",templateUrl:"addon-qtype-essay.html"}),u("design:paramtypes",[r.a,o.C,l.d])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n,o){var r=e.call(this,t,"AddonQtypeGapSelectComponent",n)||this;return r.element=o.nativeElement,r}return l(t,e),t.prototype.ngOnInit=function(){this.initOriginalTextComponent(".qtext")},t.prototype.questionRendered=function(){this.questionHelper.treatCorrectnessIconsClicks(this.element,this.component,this.componentId,this.contextLevel,this.contextInstanceId,this.courseId)},t=a([Object(o.m)({selector:"addon-qtype-gapselect",templateUrl:"addon-qtype-gapselect.html"}),s("design:paramtypes",[r.a,o.C,o.t])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(128),i=n(471),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeMatch",this.type="qtype_match"}return e.prototype.getBehaviour=function(e,t){return"interactive"===t?"interactivecountback":t},e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){for(var n in t){var o=t[n];if(!o||"0"===o)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){for(var n in t){var o=t[n];if(o&&"0"!==o)return 1}return 0},e.prototype.isSameResponse=function(e,t,n){return this.questionProvider.compareAllAnswers(t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n,o){var r=e.call(this,t,"AddonQtypeMultiAnswerComponent",n)||this;return r.element=o.nativeElement,r}return l(t,e),t.prototype.ngOnInit=function(){this.initOriginalTextComponent(".formulation")},t.prototype.questionRendered=function(){this.questionHelper.treatCorrectnessIconsClicks(this.element,this.component,this.componentId,this.contextLevel,this.contextInstanceId,this.courseId)},t=a([Object(o.m)({selector:"addon-qtype-multianswer",templateUrl:"addon-qtype-multianswer.html"}),s("design:paramtypes",[r.a,o.C,o.t])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(197),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t,n){return e.call(this,t,"AddonQtypeShortAnswerComponent",n)||this}return l(t,e),t.prototype.ngOnInit=function(){this.initInputTextComponent()},t=a([Object(o.m)({selector:"addon-qtype-shortanswer",templateUrl:"addon-qtype-shortanswer.html"}),s("design:paramtypes",[r.a,o.C])],t)}(i.a)},,,,,,,function(e,t,n){"use strict";function o(e){return i._57(0,[i._43(null,0),(e()(),i._26(0,null,null,0))],null,null)}function r(e){return i._57(0,[i._52(402653184,1,{dynamicComponent:0}),(e()(),i._55(-1,null,["\n"])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(3,16384,null,0,l.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,["\n\n"])),(e()(),i._55(-1,null,["\n"])),(e()(),i._31(6,16777216,[[1,3],["dynamicComponent",1]],null,0,null,null,null,null,null,null,null)),(e()(),i._55(-1,null,["\n"]))],function(e,t){e(t,3,0,!t.component.instance)},null)}n.d(t,"a",function(){return d}),t.b=r;var i=n(0),l=n(7),a=n(198),s=n(6),u=n(21),c=n(4),d=i._29({encapsulation:2,styles:[],data:{}});i._27("core-dynamic-component",a.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-dynamic-component",[],null,null,null,r,d)),i._30(1,901120,null,0,a.a,[s.a,i.o,i.F,[2,u.a],i.j,i.t,c.a],null,null)],function(e,t){e(t,1,0)},null)},{component:"component",data:"data"},{},["*"])},,function(e,t,n){"use strict";n.d(t,"a",function(){return A});var o=n(0),r=n(5),i=n(3),l=n(10),a=n(9),s=n(71),u=n(150),c=n(1),d=n(81),f=n(4),p=n(11),h=n(24),m=n(2),_=n(13),g=n(149),v=n(184),y=n(46),b=n(77),P=n(183),O=n(133),E=n(200),C=n(28),I=n(728),R=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},S=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},A=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_,g,v,y){this.navCtrl=e,this.appProvider=t,this.domUtils=n,this.syncProvider=r,this.timeUtils=i,this.textUtils=l,this.translate=a,this.utils=s,this.eventsProvider=u,this.courseProvider=c,this.fileUploaderHelper=d,this.gradesHelper=f,this.userProvider=p,this.groupsProvider=h,this.langProvider=m,this.assignProvider=_,this.assignHelper=g,this.assignOfflineProvider=v,this.splitviewCtrl=y,this.submitModel={},this.statusNew=b.a.SUBMISSION_STATUS_NEW,this.statusReopened=b.a.SUBMISSION_STATUS_REOPENED,this.attemptReopenMethodNone=b.a.ATTEMPT_REOPEN_METHOD_NONE,this.unlimitedAttempts=b.a.UNLIMITED_ATTEMPTS,this.originalGrades={},this.siteId=o.getCurrentSiteId(),this.currentUserId=o.getCurrentSiteUserId()}return e.prototype.ngOnInit=function(){this.selectedTab=this.showGrade&&"false"!==this.showGrade?1:0,this.isSubmittedForGrading=!!this.submitId,this.loadData()},e.prototype.calculateTimeRemaining=function(e){if(this.assign.duedate>0){var t=this.timeUtils.timestamp(),n=e.lastattempt&&e.lastattempt.extensionduedate?e.lastattempt.extensionduedate:this.assign.duedate,o=n-t;if(o<=0)if(this.userSubmission&&this.userSubmission.status==b.a.SUBMISSION_STATUS_SUBMITTED){var r=this.userSubmission.timemodified-n;r>0?(this.timeRemaining=this.translate.instant("addon.mod_assign.submittedlate",{$a:this.timeUtils.formatDuration(r,2)}),this.timeRemainingClass="latesubmission"):(this.timeRemaining=this.translate.instant("addon.mod_assign.submittedearly",{$a:this.timeUtils.formatDuration(-r,2)}),this.timeRemainingClass="earlysubmission")}else e.lastattempt&&e.lastattempt.submissionsenabled||e.gradingsummary&&e.gradingsummary.submissionsenabled?(this.timeRemaining=this.translate.instant("addon.mod_assign.overdue",{$a:this.timeUtils.formatDuration(-o,3)}),this.timeRemainingClass="overdue"):(this.timeRemaining=this.translate.instant("addon.mod_assign.duedatereached"),this.timeRemainingClass="");else this.timeRemaining=this.timeUtils.formatDuration(o,3),this.timeRemainingClass=""}else this.timeRemaining="",this.timeRemainingClass=""},e.prototype.canLeave=function(){var e=this;return this.hasDataToSave().then(function(t){if(t)return e.domUtils.showConfirm(e.translate.instant("core.confirmcanceledit")).then(function(){return e.discardDrafts().catch(function(){})})})},e.prototype.copyPrevious=function(){var e=this;if(this.appProvider.isOnline()){if(!this.previousAttempt)return this.goToEdit();var t=this.previousAttempt.submission,n=this.domUtils.showModalLoading();this.assignHelper.getSubmissionSizeForCopy(this.assign,t).catch(function(){return-1}).then(function(t){return n.dismiss(),e.fileUploaderHelper.confirmUploadFile(t,!0)}).then(function(){n=e.domUtils.showModalLoading("core.sending",!0),e.assignHelper.copyPreviousAttempt(e.assign,t).then(function(){e.goToEdit(),e.assign.submissiondrafts?e.invalidateAndRefresh():e.eventsProvider.trigger(b.a.SUBMITTED_FOR_GRADING_EVENT,{assignmentId:e.assign.id,submissionId:e.userSubmission.id,userId:e.currentUserId},e.siteId)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.error",!0)}).finally(function(){n.dismiss()})}).catch(function(){})}else this.domUtils.showErrorModal("core.networkerrormsg",!0)},e.prototype.discardDrafts=function(){return this.feedback&&this.feedback.plugins?this.assignHelper.discardFeedbackPluginData(this.assign.id,this.submitId,this.feedback):Promise.resolve()},e.prototype.goToEdit=function(){this.navCtrl.push("AddonModAssignEditPage",{moduleId:this.moduleId,courseId:this.courseId,userId:this.submitId,blindId:this.blindId})},e.prototype.hasDataToSave=function(){if(!this.canSaveGrades||!this.loaded)return Promise.resolve(!1);if(this.originalGrades.grade!=this.grade.grade||this.originalGrades.addAttempt!=this.grade.addAttempt||this.originalGrades.applyToAll!=this.grade.applyToAll)return Promise.resolve(!0);if(this.gradeInfo&&this.gradeInfo.outcomes)for(var e in this.gradeInfo.outcomes){var t=this.gradeInfo.outcomes[e];if("undefined"==this.originalGrades.outcomes[t.id]||this.originalGrades.outcomes[t.id]!=t.selectedId)return Promise.resolve(!0)}return this.feedback&&this.feedback.plugins?this.assignHelper.hasFeedbackDataChanged(this.assign,this.userSubmission,this.feedback,this.submitId).catch(function(){return!1}):Promise.resolve(!1)},e.prototype.ionViewDidEnter=function(){this.tabs&&this.tabs.ionViewDidEnter()},e.prototype.ionViewDidLeave=function(){this.tabs&&this.tabs.ionViewDidLeave()},e.prototype.invalidateAndRefresh=function(){var e=this;this.loaded=!1;var t=[];return t.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(t.push(this.assignProvider.invalidateSubmissionStatusData(this.assign.id,this.submitId,void 0,!!this.blindId)),t.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),t.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),t.push(this.gradesHelper.invalidateGradeModuleItems(this.courseId,this.submitId)),t.push(this.courseProvider.invalidateModule(this.moduleId)),this.submissionComponents&&this.submissionComponents.length&&this.submissionComponents.forEach(function(e){t.push(e.invalidate())}),Promise.all(t).catch(function(){}).then(function(){return e.loadData()})},e.prototype.loadData=function(){var e=this,t=!!this.blindId;return this.previousAttempt=void 0,this.isPreviousAttemptEmpty=!0,this.submitId||(this.submitId=this.currentUserId,t=!1),this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(t){var n=e.timeUtils.timestamp(),o=[];return e.assign=t,t.allowsubmissionsfromdate&&t.allowsubmissionsfromdate>=n&&(e.fromDate=e.timeUtils.userDate(1e3*t.allowsubmissionsfromdate)),e.currentAttempt=0,e.maxAttemptsText=e.translate.instant("addon.mod_assign.unlimitedattempts"),e.blindMarking=e.isSubmittedForGrading&&t.blindmarking&&!t.revealidentities,e.blindMarking||e.submitId==e.currentUserId||o.push(e.userProvider.getProfile(e.submitId,e.courseId).then(function(t){e.user=t})),o.push(e.assignOfflineProvider.getSubmission(t.id,e.submitId).then(function(t){e.hasOffline=t&&t.plugindata&&Object.keys(t.plugindata).length>0,e.submittedOffline=t&&t.submitted}).catch(function(){e.hasOffline=!1,e.submittedOffline=!1})),Promise.all(o)}).then(function(){return e.assignProvider.getSubmissionStatusWithRetry(e.assign,e.submitId,void 0,t)}).then(function(t){var n=[];if(e.submissionStatusAvailable=!0,e.lastAttempt=t.lastattempt,e.membersToSubmit=[],t.previousattempts&&t.previousattempts.length>0){var o=t.previousattempts.sort(function(e,t){return e.attemptnumber-t.attemptnumber});e.previousAttempt=o[o.length-1],e.isPreviousAttemptEmpty=e.assignHelper.isSubmissionEmpty(e.assign,e.previousAttempt.submission)}return e.treatLastAttempt(t,n),e.calculateTimeRemaining(t),n.push(e.loadFeedback(t.feedback)),e.userSubmission&&e.userSubmission.plugins||(e.userSubmission=e.assignHelper.createEmptySubmission(),e.userSubmission.plugins=e.assignHelper.getPluginsEnabled(e.assign,"assignsubmission")),n.push(e.assignProvider.getUnsupportedEditPlugins(e.userSubmission.plugins).then(function(t){e.unsupportedEditPlugins=t})),Promise.all(n)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"Error getting assigment data.")}).finally(function(){e.loaded=!0})},e.prototype.loadFeedback=function(e){var t=this;if(this.grade={method:!1,grade:!1,gradebookGrade:!1,modified:0,gradingStatus:!1,addAttempt:!1,applyToAll:!1,scale:!1,lang:!1,disabled:!1},this.originalGrades={grade:!1,addAttempt:!1,applyToAll:!1,outcomes:{}},e){if(this.feedback=e,e.grade&&e.grade.grader>0?this.userProvider.getProfile(e.grade.grader,this.courseId).then(function(e){t.grader=e}).catch(function(){}):delete this.grader,e.gradefordisplay){e.gradefordisplay.indexOf('class="advancedgrade"')>-1&&(this.feedback.advancedgrade=!0)}if(e.grade&&e.grade.grade&&!this.grade.grade){var n=parseFloat(e.grade.grade);this.grade.grade=n>=0?n:null,this.grade.gradebookGrade=this.utils.formatFloat(this.grade.grade),this.originalGrades.grade=this.grade.grade}}else this.selectedTab=0,this.tabs.selectTab(0);return this.grade.gradingStatus=this.lastAttempt&&this.lastAttempt.gradingstatus,this.courseProvider.getModuleBasicGradeInfo(this.moduleId).then(function(e){if(t.gradeInfo=e,e)return e.outcomes=e.outcomes||[],t.isDestroyed||t.syncProvider.blockOperation(b.a.COMPONENT,t.assign.id),t.treatGradeInfo()}).then(function(){if(t.isGrading){return t.allowAddAttempt=t.assign.attemptreopenmethod==b.a.ATTEMPT_REOPEN_METHOD_MANUAL&&(!t.userSubmission||t.assign.maxattempts==b.a.UNLIMITED_ATTEMPTS||t.userSubmission&&t.userSubmission.attemptnumber<t.assign.maxattempts-1),t.assign.teamsubmission&&(t.grade.applyToAll=!0,t.originalGrades.applyToAll=!0),t.assign.markingworkflow&&t.grade.gradingStatus&&(t.workflowStatusTranslationId=t.assignProvider.getSubmissionGradingStatusTranslationId(t.grade.gradingStatus)),t.isGrading&&"graded"==t.lastAttempt.gradingstatus&&!t.assign.markingworkflow&&t.feedback.gradeddate<t.lastAttempt.submission.timemodified&&(t.lastAttempt.gradingstatus=b.a.GRADED_FOLLOWUP_SUBMIT,t.gradingStatusTranslationId=t.assignProvider.getSubmissionGradingStatusTranslationId(t.lastAttempt.gradingstatus),t.gradingColor=t.assignProvider.getSubmissionGradingStatusColor(t.lastAttempt.gradingstatus)),t.feedback&&t.feedback.plugins||(t.feedback=t.assignHelper.createEmptyFeedback(),t.feedback.plugins=t.assignHelper.getPluginsEnabled(t.assign,"assignfeedback")),t.canSaveGrades?t.assignOfflineProvider.getSubmissionGrade(t.assign.id,t.submitId).catch(function(){}).then(function(n){n&&(!e||!e.gradeddate||e.gradeddate<n.timemodified)&&(t.grade.modified<n.timemodified&&(t.grade.grade=t.grade.scale?n.grade:t.utils.formatFloat(n.grade),t.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",t.gradingColor="",t.originalGrades.grade=t.grade.grade),t.grade.applyToAll=n.applytoall,t.grade.addAttempt=n.addattempt,t.originalGrades.applyToAll=t.grade.applyToAll,t.originalGrades.addAttempt=t.grade.addAttempt,n.outcomes&&Object.keys(n.outcomes).length&&t.gradeInfo.outcomes.forEach(function(e){void 0!==n.outcomes[e.itemNumber]&&e.modified<n.timemodified&&(e.selectedId=n.outcomes[e.itemNumber],t.originalGrades.outcomes[e.id]=e.selectedId)}))}):t.courseProvider.getModule(t.moduleId,t.courseId,void 0,!0).then(function(e){t.gradeUrl=e.url+"&action=grader&userid="+t.submitId})}})},e.prototype.setStatusNameAndClass=function(e){this.hasOffline||this.submittedOffline?(this.statusTranslated=this.translate.instant("core.notsent"),this.statusColor="warning"):this.assign.teamsubmission?!e.lastattempt.submissiongroup&&this.assign.preventsubmissionnotingroup?(this.statusTranslated=this.translate.instant("addon.mod_assign.nosubmission"),this.statusColor=this.assignProvider.getSubmissionStatusColor("nosubmission")):this.userSubmission&&this.userSubmission.status!=this.statusNew?(this.statusTranslated=this.translate.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=this.assignProvider.getSubmissionStatusColor(this.userSubmission.status)):e.lastattempt.submissionsenabled?(this.statusTranslated=this.translate.instant("addon.mod_assign.nosubmission"),this.statusColor=this.assignProvider.getSubmissionStatusColor("nosubmission")):(this.statusTranslated=this.translate.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noonlinesubmissions")):this.userSubmission&&this.userSubmission.status!=this.statusNew?(this.statusTranslated=this.translate.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=this.assignProvider.getSubmissionStatusColor(this.userSubmission.status)):e.lastattempt.submissionsenabled?(this.statusTranslated=this.translate.instant("addon.mod_assign.noattempt"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noattempt")):(this.statusTranslated=this.translate.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noonlinesubmissions"))},e.prototype.showAdvancedGrade=function(){this.feedback&&this.feedback.advancedgrade&&this.textUtils.expandText(this.translate.instant("core.grades.grade"),this.feedback.gradefordisplay,b.a.COMPONENT,this.moduleId)},e.prototype.submitForGrading=function(e){var t=this;!this.assign.requiresubmissionstatement||e?this.domUtils.showConfirm(this.translate.instant("addon.mod_assign.confirmsubmission")).then(function(){var n=t.domUtils.showModalLoading("core.sending",!0);t.assignProvider.submitForGrading(t.assign.id,t.courseId,e,t.userSubmission.timemodified,t.hasOffline).then(function(){t.eventsProvider.trigger(b.a.SUBMITTED_FOR_GRADING_EVENT,{assignmentId:t.assign.id,submissionId:t.userSubmission.id,userId:t.currentUserId},t.siteId)}).finally(function(){n.dismiss()})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.error",!0)}):this.domUtils.showErrorModal("addon.mod_assign.acceptsubmissionstatement",!0)},e.prototype.submitGrade=function(){var e=this;return this.hasDataToSave().then(function(t){if(t){var n=e.userSubmission?e.userSubmission.attemptnumber:-1,o={},r=e.grade.scale&&0==e.grade.grade?-1:e.utils.unformatFloat(e.grade.grade,!0);if(!1===r)return Promise.reject(e.translate.instant("core.grades.badgrade"));var i=e.domUtils.showModalLoading("core.sending",!0);return e.gradeInfo.outcomes.forEach(function(e){e.itemNumber&&(o[e.itemNumber]=e.selectedId)}),(e.feedback&&e.feedback.plugins?e.assignHelper.prepareFeedbackPluginData(e.assign.id,e.submitId,e.feedback):Promise.resolve({})).then(function(t){return e.assignProvider.submitGradingForm(e.assign.id,e.submitId,e.courseId,r,n,e.grade.addAttempt,e.grade.gradingStatus,e.grade.applyToAll,o,t).then(function(){return e.discardDrafts()}).finally(function(){e.invalidateAndRefresh(),e.eventsProvider.trigger(b.a.GRADED_EVENT,{assignmentId:e.assign.id,submissionId:e.submitId,userId:e.currentUserId},e.siteId)})}).finally(function(){e.tabs.selectTab(0),i.dismiss()})}})},e.prototype.treatGradeInfo=function(){var e=this;return this.grade.method=this.gradeInfo.advancedgrading&&this.gradeInfo.advancedgrading[0]&&void 0!==this.gradeInfo.advancedgrading[0].method?this.gradeInfo.advancedgrading[0].method||"simple":"simple",this.isGrading=!0,this.canSaveGrades="simple"==this.grade.method,this.gradeInfo.scale?this.grade.scale=this.utils.makeMenuFromList(this.gradeInfo.scale,this.translate.instant("core.nograde")):(this.grade.grade=this.utils.formatFloat(this.grade.grade),this.originalGrades.grade=this.grade.grade,this.langProvider.getCurrentLanguage().then(function(t){e.grade.lang=t})),this.assignProvider.isOutcomesEditEnabled()&&this.gradeInfo.outcomes.forEach(function(t){t.scale&&(t.options=e.utils.makeMenuFromList(t.scale,e.translate.instant("core.grades.nooutcome"))),t.selectedId=0,e.originalGrades.outcomes[t.id]=t.selectedId}),this.gradesHelper.getGradeModuleItems(this.courseId,this.moduleId,this.submitId).then(function(t){var n=[];t.forEach(function(t){if(t.outcomeid||t.scaleid)t.outcomeid&&(e.gradeInfo.outcomes.forEach(function(o){o.id==t.outcomeid&&(o.selected=t.gradeformatted,o.modified=t.gradedategraded,o.options&&(o.selectedId=e.gradesHelper.getGradeValueFromLabel(o.options,o.selected),e.originalGrades.outcomes[o.id]=o.selectedId,o.itemNumber=t.itemnumber),n.push(o))}),e.gradeInfo.disabled=t.gradeislocked||t.gradeisoverridden);else{if(e.grade.scale)e.grade.gradebookGrade=e.utils.formatFloat(e.gradesHelper.getGradeValueFromLabel(e.grade.scale,t.gradeformatted));else{var o=parseFloat(t.gradeformatted);e.grade.gradebookGrade=o||0==o?e.utils.formatFloat(o):null}e.grade.disabled=t.gradeislocked||t.gradeisoverridden,e.grade.modified=t.gradedategraded}}),e.gradeInfo.outcomes=n})},e.prototype.treatLastAttempt=function(e,t){var n=this;if(e.lastattempt){var o=this.assign.requiresubmissionstatement&&void 0===this.assign.submissionstatement;this.canSubmit=!this.isSubmittedForGrading&&!this.submittedOffline&&(e.lastattempt.cansubmit||this.hasOffline&&this.assignProvider.canSubmitOffline(this.assign,e)),this.canEdit=!this.isSubmittedForGrading&&e.lastattempt.canedit&&(!this.submittedOffline||!this.assign.submissiondrafts),this.assign.requiresubmissionstatement&&this.assign.submissiondrafts&&this.submitId==this.currentUserId?(this.submissionStatement=this.assign.submissionstatement,this.submitModel.submissionStatement=!1):(this.submissionStatement=void 0,this.submitModel.submissionStatement=!0),this.showErrorStatementEdit=o&&!this.assign.submissiondrafts&&this.submitId==this.currentUserId,this.showErrorStatementSubmit=o&&!!this.assign.submissiondrafts,this.userSubmission=this.assignProvider.getSubmissionObjectFromAttempt(this.assign,e.lastattempt),this.assign.attemptreopenmethod!=this.attemptReopenMethodNone&&this.userSubmission&&(this.currentAttempt=this.userSubmission.attemptnumber+1),this.setStatusNameAndClass(e),this.assign.teamsubmission&&(e.lastattempt.submissiongroup&&t.push(this.groupsProvider.getActivityAllowedGroups(this.assign.cmid).then(function(t){t.groups.forEach(function(t){t.id==e.lastattempt.submissiongroup&&(n.lastAttempt.submissiongroupname=t.name)})})),this.userSubmission&&this.userSubmission.status!=this.statusNew&&e.lastattempt.submissiongroupmemberswhoneedtosubmit.forEach(function(e){t.push(n.blindMarking?n.assignProvider.getAssignmentUserMappings(n.assign.id,e).then(function(e){n.membersToSubmit.push(e)}):n.userProvider.getProfile(e,n.courseId).then(function(e){n.membersToSubmit.push(e)}))})),this.gradingStatusTranslationId=this.assignProvider.getSubmissionGradingStatusTranslationId(e.lastattempt.gradingstatus),this.gradingColor=this.assignProvider.getSubmissionGradingStatusColor(e.lastattempt.gradingstatus),this.userSubmission&&(this.assign.teamsubmission&&e.lastattempt.submissiongroup&&this.assign.preventsubmissionnotingroup||(this.submissionPlugins=this.previousAttempt&&this.previousAttempt.submission.plugins&&this.userSubmission.status==this.statusReopened?this.previousAttempt.submission.plugins:this.userSubmission.plugins))}},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.assign&&this.isGrading&&this.syncProvider.unblockOperation(b.a.COMPONENT,this.assign.id)},R([Object(o._9)(E.a),S("design:type",E.a)],e.prototype,"tabs",void 0),R([Object(o._10)(I.a),S("design:type",o.T)],e.prototype,"submissionComponents",void 0),R([Object(o.D)(),S("design:type",Number)],e.prototype,"courseId",void 0),R([Object(o.D)(),S("design:type",Number)],e.prototype,"moduleId",void 0),R([Object(o.D)(),S("design:type",Number)],e.prototype,"submitId",void 0),R([Object(o.D)(),S("design:type",Number)],e.prototype,"blindId",void 0),R([Object(o.D)(),S("design:type",Object)],e.prototype,"showGrade",void 0),e=R([Object(o.m)({selector:"addon-mod-assign-submission",templateUrl:"addon-mod-assign-submission.html"}),w(19,Object(o.N)()),S("design:paramtypes",[r.s,l.a,f.a,c.a,d.a,h.a,p.a,i.c,m.a,a.a,_.a,g.a,v.a,y.a,s.a,u.a,b.a,P.a,O.a,C.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(504),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(10),i=n(88),l=n(9),a=n(18),s=n(6),u=n(1),c=n(2),d=n(40),f=n(126),p=n(41),h=n(4),m=n(13),_=n(116),g=n(3),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},P=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},O=function(){function e(e,t,n,o,r,i,a,s,u,c,d,f){var p=this;if(this.appProvider=t,this.cronDelegate=n,this.domUtils=o,this.eventsProvider=r,this.filePoolProvider=i,this.sitesProvider=a,this.utils=s,this.translate=u,this.configProvider=c,this.filterProvider=d,this.courseProvider=f,this.syncPromises={},this.logger=e.getInstance("CoreSettingsHelper"),!_.a.forceColorScheme){var h=function(){p.isColorSchemeDisabledInSite()?p.setColorScheme("light"):p.initColorScheme()};r.on(l.a.LOGIN,h.bind(this)),r.on(l.a.SITE_UPDATED,h.bind(this)),r.on(l.a.LOGOUT,function(){p.initColorScheme()})}}return e.prototype.deleteSiteStorage=function(e,t){return b(this,void 0,void 0,function(){var n,o,r,i,a,s,u=this;return P(this,function(c){switch(c.label){case 0:return n={cacheEntries:0,spaceUsage:0},[4,this.filterProvider.formatText(e,{clean:!0,singleLine:!0,filter:!1},[],t)];case 1:return e=c.sent(),o=this.translate.instant("core.settings.deletesitefilestitle"),r=this.translate.instant("core.settings.deletesitefiles",{sitename:e}),[4,this.domUtils.showConfirm(r,o)];case 2:return c.sent(),[4,this.sitesProvider.getSite(t)];case 3:return i=c.sent(),a=this.sitesProvider.getSiteTableSchemasToClear(i),(s=a.map(function(e){return i.getDb().deleteRecords(e)})).push(i.deleteFolder().then(function(){u.filePoolProvider.clearAllPackagesStatus(i.id),u.filePoolProvider.clearFilepool(i.id),u.courseProvider.clearAllCoursesStatus(i.id),n.spaceUsage=0}).catch(function(e){return b(u,void 0,void 0,function(){var t;return P(this,function(o){switch(o.label){case 0:return e&&e.code===FileError.NOT_FOUND_ERR?(this.filePoolProvider.clearAllPackagesStatus(i.id),n.spaceUsage=0,[3,3]):[3,1];case 1:return this.domUtils.showErrorModal("core.settings.errordeletesitefiles",!0),t=n,[4,i.getSpaceUsage()];case 2:t.spaceUsage=o.sent(),o.label=3;case 3:return[2]}})})}).then(function(){return b(u,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return this.eventsProvider.trigger(l.a.SITE_STORAGE_DELETED,{},i.getId()),e=n,[4,this.calcSiteClearRows(i)];case 1:return e.cacheEntries=t.sent(),[2]}})})})),[4,Promise.all(s)];case 4:return c.sent(),[2,n]}})})},e.prototype.getSiteSpaceUsage=function(e){return b(this,void 0,void 0,function(){var t,n;return P(this,function(o){switch(o.label){case 0:return[4,this.sitesProvider.getSite(e)];case 1:return t=o.sent(),n={cacheEntries:0,spaceUsage:0},[4,Promise.all([this.calcSiteClearRows(t).then(function(e){return n.cacheEntries=e}),t.getSpaceUsage().then(function(e){return n.spaceUsage=e})])];case 2:return o.sent(),[2,n]}})})},e.prototype.calcSiteClearRows=function(e){return b(this,void 0,void 0,function(){var t,n,o=this;return P(this,function(r){switch(r.label){case 0:return t=this.sitesProvider.getSiteTableSchemasToClear(e),n=0,[4,Promise.all(t.map(function(t){return b(o,void 0,void 0,function(){var o;return P(this,function(r){switch(r.label){case 0:return o=n,[4,e.getDb().countRecords(t)];case 1:return[2,n=o+r.sent()]}})})}))];case 1:return r.sent(),[2,n]}})})},e.prototype.getProcessor=function(e,t,n){if(void 0===n&&(n=!0),e&&e.length){for(var o=0;o<e.length;o++)if(e[o].name==t)return e[o];return n?e[0]:void 0}},e.prototype.getProcessorComponents=function(e,t){var n=this,o=[];return t.forEach(function(t){var r=n.utils.clone(t);r.notifications=[],t.notifications.forEach(function(t){for(var n=!1,o=0;o<t.processors.length;o++){var i=t.processors[o];if(i.name==e){n=!0,t.currentProcessor=i;break}}n&&r.notifications.push(t)}),r.notifications.length&&o.push(r)}),o},e.prototype.getSiteSyncPromise=function(e){return this.syncPromises[e]?this.syncPromises[e]:null},e.prototype.synchronizeSite=function(e,t){var n=this;if(this.syncPromises[t])return this.syncPromises[t];var o=[],r=this.cronDelegate.hasManualSyncHandlers();if(r&&!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.settings.cannotsyncoffline"));if(r&&e&&this.appProvider.isNetworkAccessLimited())return Promise.reject(this.translate.instant("core.settings.cannotsyncwithoutwifi"));o.push(this.filePoolProvider.invalidateAllFiles(t).catch(function(){})),o.push(this.sitesProvider.getSite(t).then(function(e){return e.invalidateWsCache().then(function(){var o=[];return o.push(e.checkIfLocalMobileInstalledAndNotUsed().then(function(){return n.eventsProvider.trigger(l.a.SESSION_EXPIRED,{},t),Promise.reject(n.translate.instant("core.lostconnection"))},function(){return n.sitesProvider.updateSiteInfo(t)})),o.push(n.cronDelegate.forceSyncExecution(t)),Promise.all(o)})}));var i=Promise.all(o);return this.syncPromises[t]=i,i=i.finally(function(){delete n.syncPromises[t]})},e.prototype.initDomSettings=function(){var e=this;this.configProvider.get(d.a.SETTINGS_FONT_SIZE,_.a.font_sizes[0].toString()).then(function(t){e.setFontSize(t)}),this.initColorScheme()},e.prototype.initColorScheme=function(){var e=this;if(_.a.forceColorScheme)this.setColorScheme(_.a.forceColorScheme);else{var t="light";(window.matchMedia("(prefers-color-scheme: dark)").matches||window.matchMedia("(prefers-color-scheme: light)").matches)&&(t="auto"),this.configProvider.get(d.a.SETTINGS_COLOR_SCHEME,t).then(function(t){e.setColorScheme(t)})}},e.prototype.isColorSchemeDisabled=function(e){return b(this,void 0,void 0,function(){var t;return P(this,function(n){switch(n.label){case 0:return[4,this.sitesProvider.getSite(e)];case 1:return t=n.sent(),[2,this.isColorSchemeDisabledInSite(t)]}})})},e.prototype.isColorSchemeDisabledInSite=function(e){return!!(e=e||this.sitesProvider.getCurrentSite())&&e.isFeatureDisabled("NoDelegate_DarkMode")},e.prototype.setFontSize=function(e){document.documentElement.style.fontSize=e+"%"},e.prototype.setColorScheme=function(e){document.body.classList.remove("scheme-light"),document.body.classList.remove("scheme-dark"),document.body.classList.remove("scheme-auto"),document.body.classList.add("scheme-"+e)},e=v([Object(o.A)(),y("design:paramtypes",[s.a,r.a,i.a,h.a,l.a,a.a,u.a,c.a,g.c,f.a,p.a,m.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(77),i=n(183),l=n(166),a=n(198),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.injector=e,this.submissionDelegate=t,this.assignProvider=n,this.assignHelper=o,this.component=r.a.COMPONENT,this.text="",this.files=[]}return e.prototype.ngOnInit=function(){var e=this;this.plugin&&(this.plugin.name=this.submissionDelegate.getPluginName(this.plugin),this.plugin.name&&(this.edit=this.edit&&"false"!==this.edit,this.allowOffline=this.allowOffline&&"false"!==this.allowOffline,this.submissionDelegate.getComponentForPlugin(this.injector,this.plugin,this.edit).then(function(t){e.pluginComponent=t,t?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,configs:e.assignHelper.getPluginConfig(e.assign,"assignsubmission",e.plugin.type),edit:e.edit,allowOffline:e.allowOffline}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.submissionDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})))},e.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},s([Object(o._9)(a.a),u("design:type",a.a)],e.prototype,"dynamicComponent",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"assign",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"submission",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"plugin",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"edit",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"allowOffline",void 0),e=s([Object(o.m)({selector:"addon-mod-assign-submission-plugin",templateUrl:"addon-mod-assign-submission-plugin.html"}),u("design:paramtypes",[o.C,l.a,r.a,i.a])],e)}()},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(1,147456,null,0,f.a,[p.a,d.t,d.V],{name:[0,"name"],md:[1,"md"]},null)],function(e,t){e(t,1,0,"arrow-back","ios-arrow-back")},function(e,t){e(t,0,0,d._44(t,1)._hidden)})}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-icon",[],null,null,null,h.b,h.a)),d._30(1,704512,null,0,m.a,[d.t,p.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,t.parent.parent.context.$implicit.icon)},null)}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),d._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.parent.context.$implicit.title)})}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"ion-badge",[["class","tab-badge"]],null,null,null,null,null)),d._30(1,16384,null,0,_.a,[p.a,d.t,d.V],{color:[0,"color"]},null),(e()(),d._55(2,null,["",""]))],function(e,t){e(t,1,0,t.parent.parent.context.$implicit.badgeStyle)},function(e,t){e(t,2,0,t.parent.parent.context.$implicit.badge)})}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,11,"ion-slide",[["class","tab-slide"],["role","tab"]],[[1,"aria-selected",0],[1,"aria-label",0],[1,"aria-controls",0],[8,"id",0],[8,"tabIndex",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.selectTab(e.parent.context.index)&&o}return o},g.b,g.a)),d._30(1,180224,null,0,v.a,[d.t,d.V,y.a],null,null),(e()(),d._55(-1,0,["\n                            "])),(e()(),d._26(16777216,null,0,1,null,r)),d._30(4,16384,null,0,b.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n                            "])),(e()(),d._26(16777216,null,0,1,null,i)),d._30(7,16384,null,0,b.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n                            "])),(e()(),d._26(16777216,null,0,1,null,l)),d._30(10,16384,null,0,b.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n                        "]))],function(e,t){e(t,4,0,t.parent.context.$implicit.icon);e(t,7,0,t.parent.context.$implicit.title);e(t,10,0,t.parent.context.$implicit.badge)},function(e,t){var n=t.component;e(t,0,0,n.selected==t.parent.context.index,t.parent.context.$implicit.title||"",t.parent.context.$implicit.id,t.parent.context.$implicit.id+"-tab",n.selected==t.parent.context.index?null:-1)})}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),d._55(-1,null,["\n                       "])),(e()(),d._26(16777216,null,null,1,null,a)),d._30(3,16384,null,0,b.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n                    "]))],function(e,t){e(t,3,0,t.context.$implicit.show)},null)}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(1,147456,null,0,f.a,[p.a,d.t,d.V],{name:[0,"name"],md:[1,"md"]},null)],function(e,t){e(t,1,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,0,0,d._44(t,1)._hidden)})}function c(e){return d._57(0,[d._52(402653184,1,{originalTabsRef:0}),d._52(402653184,2,{topTabs:0}),d._52(402653184,3,{slides:0}),(e()(),d._31(3,0,null,null,39,"core-loading",[["class","core-loading-center"]],null,null,null,P.b,P.a)),d._30(4,638976,null,0,O.a,[E.a,d.t,C.a,I.a],{hideUntil:[0,"hideUntil"]},null),(e()(),d._55(-1,0,["\n    "])),(e()(),d._31(6,0,[[2,0],["topTabs",1]],0,30,"div",[["class","core-tabs-bar"],["id","core-tabs-bar"]],[[8,"hidden",0]],null,null,null,null)),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(8,0,null,null,27,"ion-row",[["class","row"]],null,null,null,null,null)),d._30(9,16384,null,0,R.a,[],null,null),(e()(),d._55(-1,null,["\n            "])),(e()(),d._31(11,0,null,null,5,"ion-col",[["class","col-with-arrow col"],["col-1",""],["no-padding",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.slidePrev()&&o}return o},null,null)),d._30(12,16384,null,0,S.a,[],null,null),(e()(),d._55(-1,null,["\n                "])),(e()(),d._26(16777216,null,null,1,null,o)),d._30(15,16384,null,0,b.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n            "])),(e()(),d._55(-1,null,["\n            "])),(e()(),d._31(18,0,null,null,9,"ion-col",[["class","col"],["col-10",""],["no-padding",""]],null,null,null,null,null)),d._30(19,16384,null,0,S.a,[],null,null),(e()(),d._55(-1,null,["\n                "])),(e()(),d._31(21,0,null,null,5,"ion-slides",[["aria-hidden","false"],["role","tablist"]],[[1,"aria-label",0]],[[null,"ionSlideDidChange"]],function(e,t,n){var o=!0;if("ionSlideDidChange"===t){o=!1!==e.component.slideChanged()&&o}return o},w.b,w.a)),d._30(22,1228800,[[3,4]],0,y.a,[p.a,A.a,d.M,[2,D.a],d.t,d.V],{dir:[0,"dir"],slidesPerView:[1,"slidesPerView"]},{ionSlideDidChange:"ionSlideDidChange"}),(e()(),d._55(-1,0,["\n                    "])),(e()(),d._26(16777216,null,0,1,null,s)),d._30(25,802816,null,0,b.j,[d._11,d._6,d.E],{ngForOf:[0,"ngForOf"]},null),(e()(),d._55(-1,0,["\n                "])),(e()(),d._55(-1,null,["\n            "])),(e()(),d._55(-1,null,["\n            "])),(e()(),d._31(29,0,null,null,5,"ion-col",[["class","col-with-arrow col"],["col-1",""],["no-padding",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.slideNext()&&o}return o},null,null)),d._30(30,16384,null,0,S.a,[],null,null),(e()(),d._55(-1,null,["\n                "])),(e()(),d._26(16777216,null,null,1,null,u)),d._30(33,16384,null,0,b.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n            "])),(e()(),d._55(-1,null,["\n        "])),(e()(),d._55(-1,null,["\n    "])),(e()(),d._55(-1,0,["\n    "])),(e()(),d._31(38,0,[[1,0],["originalTabs",1]],0,3,"div",[["class","core-tabs-content-container"]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n        "])),d._43(null,0),(e()(),d._55(-1,null,["\n    "])),(e()(),d._55(-1,0,["\n"])),(e()(),d._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.hideUntil);e(t,15,0,n.showPrevButton);e(t,22,0,n.direction,n.slidesShown);e(t,25,0,n.tabs);e(t,33,0,n.showNextButton)},function(e,t){var n=t.component;e(t,6,0,!n.tabs||n.numTabsShown<2);e(t,21,0,n.description)})}n.d(t,"a",function(){return N}),t.b=c;var d=n(0),f=n(47),p=n(8),h=n(80),m=n(75),_=n(143),g=n(1052),v=n(356),y=n(267),b=n(7),P=n(54),O=n(51),E=n(17),C=n(9),I=n(2),R=n(119),S=n(120),w=n(1053),A=n(16),D=n(39),j=n(200),k=n(29),T=n(4),x=n(10),M=n(126),N=d._29({encapsulation:2,styles:[],data:{}});d._27("core-tabs",j.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-tabs",[],null,null,null,c,N)),d._30(1,4964352,null,0,j.a,[d.t,k.a,T.a,x.a,M.a,A.a,E.a],null,null)],function(e,t){e(t,1,0)},null)},{selectedIndex:"selectedIndex",hideUntil:"hideUntil",parentScrollable:"parentScrollable"},{ionChange:"ionChange"},["*"])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,16777216,null,null,1,null,null,null,null,null,null,null)),i._30(1,540672,null,0,l.r,[i._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),i._26(0,null,null,0))],function(e,t){e(t,1,0,t.component.template)},null)}function r(e){return i._57(0,[(e()(),i._26(16777216,null,null,1,null,o)),i._30(1,16384,null,0,l.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,t.component.loaded)},null)}n.d(t,"a",function(){return d}),t.b=r;var i=n(0),l=n(7),a=n(76),s=n(200),u=n(4),c=n(2),d=i._29({encapsulation:2,styles:[],data:{}});i._27("core-tab",a.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,3,"core-tab",[],null,null,null,r,d)),i._30(1,245760,null,2,a.a,[s.a,i.t,u.a,c.a],null,null),i._52(335544320,1,{template:0}),i._52(335544320,2,{content:0})],function(e,t){e(t,1,0)},null)},{title:"title",icon:"icon",badge:"badge",badgeStyle:"badgeStyle",enabled:"enabled",show:"show",id:"id"},{ionSelect:"ionSelect"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1546),s=n(1547),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=function(){function e(){}return e=u([Object(o.I)({declarations:[a.a,s.a],imports:[r.b,i.k,l.b.forChild()],providers:[],exports:[a.a,s.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(2),l=n(10),a=n(4),s=n(3),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},p=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p){var h=e.call(this,o,r,i,l,a,s,u,c,p)||this;return h.utils=t,h.appProvider=n,h.domUtils=d,h.translate=f,h.hidden=!1,h.tabsNotInit=[],h.tabsIds=[],h.tabsNotInitIds=[],h.viewInit=!1,h.initialized=!1,h}return u(t,e),n=t,Object.defineProperty(t.prototype,"loaded",{set:function(e){var t=this;this._loaded=this.utils.isTrueOrOne(e),this.viewInit&&!this.initialized&&setTimeout(function(){t.initTabs()})},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.viewInit=!0,e.prototype.ngAfterViewInit.call(this),this.registerBackButtonAction()},t.prototype.add=function(e,t){var n=this._tabs.indexOf(e);if(-1!=n)return this.tabsIds[n];if(-1!=(n=this.tabsNotInit.indexOf(e))){if(!t)return this.tabsNotInitIds[n];var o=this.tabsNotInitIds[n];return this.tabsNotInit.splice(n,1),this.tabsNotInitIds.splice(n,1),this._tabs.push(e),this.tabsIds.push(o),this.sortTabs(),o}var r=this.id+"-"+ ++this._ids;return t?(this._tabs.push(e),this.tabsIds.push(r),this.sortTabs()):(this.tabsNotInit.push(e),this.tabsNotInitIds.push(r)),r},t.prototype.initTabs=function(){var t=this;return this.initialized||!this._loaded&&void 0!==this._loaded?(this.setTabbarPosition(-1,0),Promise.resolve()):(this.initialized=!0,e.prototype.initTabs.call(this).then(function(){if(t.selectedDisabled&&void 0!==t.selectedIndex){var e=t.getByIndex(t.selectedIndex);e&&!e.enabled&&t.select(e)}t.firstSelectedTab=t._selectHistory[0]||null}).finally(function(){t.selectTabPromiseDefer&&(t.selectTabPromiseDefer.resolve(),delete t.selectTabPromiseDefer)}))},t.prototype.registerBackButtonAction=function(){var e=this;this.unregisterBackButtonAction=this.appProvider.registerBackButtonAction(function(){var t=e.previousTab(!0);if(t){var n=e.getSelected();if(t.id==n.id&&(t=e.previousTab(!0)),t)return e._selectHistory=e._selectHistory.filter(function(e){return n.id!=e&&t.id!=e}),e.select(t),!0}else{var o=e.getSelected();if(o&&e.firstSelectedTab&&o.id!=e.firstSelectedTab&&(e._selectHistory=[],(t=e._tabs.find(function(t){return t.id===e.firstSelectedTab}))&&t.enabled))return e.select(t),!0}return!1},250)},t.prototype.remove=function(e){var t=this._tabs.indexOf(e);-1!=t?(this._tabs.splice(t,1),this.tabsIds.splice(t,1)):-1!=(t=this.tabsNotInit.indexOf(e))&&(this.tabsNotInit.splice(t,1),this.tabsNotInitIds.splice(t,1))},t.prototype.sortTabs=function(){var e=this;if(this.originalTabsRef){var t=[],n=[],o=this.originalTabsRef.nativeElement;this._tabs.forEach(function(r,i){var l=Array.prototype.indexOf.call(o.children,r.getNativeElement());-1!=l&&(t[l]=r,n[l]=e.tabsIds[i])}),this._tabs=t.filter(function(e){return void 0!==e}),this.tabsIds=n.filter(function(e){return void 0!==e})}},t.prototype.select=function(t,n,o,r){var i=this;if(void 0===n&&(n={}),this.initialized){if(r){var l="number"==typeof t?this.getByIndex(t):t;return this.confirmGoToRoot(l).then(function(){return e.prototype.select.call(i,t,n,o)},function(){})}return e.prototype.select.call(this,t,n,o)}return this.selectedIndex="number"==typeof t?t:this.getIndex(t),this.selectTabPromiseDefer=this.selectTabPromiseDefer||this.utils.promiseDefer(),this.selectTabPromiseDefer.promise},t.prototype.selectTabRootByIndex=function(e){var t=this;if(this.initialized){var n=this.getByIndex(e);return n?this.confirmGoToRoot(n).then(function(){return n.goToRoot({animate:n.isSelected,updateUrl:!0,isNavRoot:!0}).then(function(){if(!n.isSelected)return t.select(n,{animate:!1,updateUrl:!0,isNavRoot:!0})})},function(){}):Promise.reject(null)}return this.selectedIndex=e,this.selectTabPromiseDefer=this.selectTabPromiseDefer||this.utils.promiseDefer(),this.selectTabPromiseDefer.promise},t.prototype.changeVisibility=function(e){var t=this;this.hidden==e&&(this.hidden=!e,setTimeout(function(){t.viewCtrl.getContent().resize()}))},t.prototype.ngOnDestroy=function(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction()},t.prototype.confirmGoToRoot=function(e){return!e||!e.isSelected||e.getActive()&&e.getActive().isFirst()?Promise.resolve():this.domUtils.showConfirm(e.tabTitle?this.translate.instant("core.confirmgotabroot",{name:e.tabTitle}):this.translate.instant("core.confirmgotabrootdefault"))},c([Object(o.D)(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],t.prototype,"loaded",null),c([Object(o.D)(),d("design:type",Boolean)],t.prototype,"selectedDisabled",void 0),c([Object(o._9)("originalTabs"),d("design:type",o.t)],t.prototype,"originalTabsRef",void 0),t=n=c([Object(o.m)({selector:"core-ion-tabs",templateUrl:"core-ion-tabs.html",encapsulation:o._12.None,providers:[{provide:r.y,useExisting:Object(o._16)(function(){return n})}]}),f(2,Object(o.N)()),f(3,Object(o.N)()),d("design:paramtypes",[i.a,l.a,r.s,r.G,r.c,r.e,o.t,r.v,o.V,r.g,a.a,s.c,r.m])],t);var n}(r.D)},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(5),i=n(71),l=n(24),a=n(158),s=n(77),u=n(183),c=n(133),d=n(317),f=n(725),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},g=function(e){function t(t,n,o,r,i,l,a,u,c){var f=e.call(this,t,o)||this;return f.assignProvider=n,f.assignHelper=r,f.assignOffline=i,f.syncProvider=l,f.timeUtils=a,f.groupsProvider=u,f.navCtrl=c,f.component=s.a.COMPONENT,f.moduleName="assign",f.showNumbers=!0,f.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},f.submissionStatusSubmitted=s.a.SUBMISSION_STATUS_SUBMITTED,f.submissionStatusDraft=s.a.SUBMISSION_STATUS_DRAFT,f.needGrading=s.a.NEED_GRADING,f.syncEventName=d.a.AUTO_SYNCED,f}return p(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){t.assignProvider.logView(t.assign.id,t.assign.name).then(function(){t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){}),t.canViewAllSubmissions?t.assignProvider.logGradingView(t.assign.id,t.assign.name).catch(function(){}):t.canViewOwnSubmission&&t.assignProvider.logSubmissionView(t.assign.id,t.assign.name).catch(function(){})}),this.savedObserver=this.eventsProvider.on(s.a.SUBMISSION_SAVED_EVENT,function(e){t.assign&&e.assignmentId==t.assign.id&&e.userId==t.userId&&t.showLoadingAndRefresh(!0,!1)},this.siteId),this.submittedObserver=this.eventsProvider.on(s.a.SUBMITTED_FOR_GRADING_EVENT,function(e){t.assign&&e.assignmentId==t.assign.id&&e.userId==t.userId&&(t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata),t.showLoadingAndRefresh(!0,!1))},this.siteId),this.gradedObserver=this.eventsProvider.on(s.a.GRADED_EVENT,function(e){t.assign&&e.assignmentId==t.assign.id&&e.userId==t.userId&&t.showLoadingAndRefresh(!0,!1)},this.siteId)},t.prototype.expandDescription=function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.assign&&(this.description||this.assign.introattachments)&&this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,this.assign.introattachments,!0,"module",this.module.id,this.courseId)},t.prototype.fetchContent=function(e,t,n){var o=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.assignProvider.getAssignment(this.courseId,this.module.id).then(function(e){if(o.assign=e,o.dataRetrieved.emit(o.assign),o.description=o.assign.intro,t)return o.syncActivity(n).catch(function(){})}).then(function(){return o.assignOffline.hasAssignOfflineData(o.assign.id)}).then(function(e){return o.hasOffline=e,o.assignProvider.getSubmissions(o.assign.id).then(function(e){var t=o.timeUtils.timestamp();return o.canViewAllSubmissions=e.canviewsubmissions,e.canviewsubmissions?(o.assign.duedate>0?o.assign.duedate-t<=0?o.timeRemaining=o.translate.instant("addon.mod_assign.assignmentisdue"):(o.timeRemaining=o.timeUtils.formatDuration(o.assign.duedate-t,3),o.lateSubmissions=o.assign.cutoffdate?o.assign.cutoffdate>t?o.translate.instant("addon.mod_assign.latesubmissionsaccepted",{$a:o.timeUtils.userDate(1e3*o.assign.cutoffdate)}):o.translate.instant("addon.mod_assign.nomoresubmissionsaccepted"):""):(o.timeRemaining="",o.lateSubmissions=""),o.groupsProvider.getActivityGroupInfo(o.assign.cmid,!1).then(function(e){return o.groupInfo=e,o.showNumbers=0==e.groups.length||o.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.5"),o.setGroup(o.groupsProvider.validateGroupId(o.group,e))})):o.assignProvider.getSubmissionStatus(o.assign.id).then(function(){o.canViewOwnSubmission=!0}).catch(function(e){if(o.canViewOwnSubmission=!1,"nopermission"!==e.errorcode)return Promise.reject(e)})})}).finally(function(){o.fillContextMenu(e)})},t.prototype.setGroup=function(e){var t=this;return this.group=e,this.assignProvider.getSubmissionStatus(this.assign.id,void 0,this.group).then(function(e){if(t.summary=e.gradingsummary,"boolean"==typeof t.summary.warnofungroupedusers&&t.summary.warnofungroupedusers)t.summary.warnofungroupedusers="ungroupedusers";else switch(t.summary.warnofungroupedusers){case s.a.WARN_GROUPS_REQUIRED:t.summary.warnofungroupedusers="ungroupedusers";break;case s.a.WARN_GROUPS_OPTIONAL:t.summary.warnofungroupedusers="ungroupedusersoptional";break;default:t.summary.warnofungroupedusers=""}t.needsGradingAvalaible=e.gradingsummary&&e.gradingsummary.submissionsneedgradingcount>0&&t.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2")})},t.prototype.goToSubmissionList=function(e,t){void 0===e?this.navCtrl.push("AddonModAssignSubmissionListPage",{courseId:this.courseId,groupId:this.group||0,moduleId:this.module.id,moduleName:this.moduleName}):!t&&this.showNumbers||this.navCtrl.push("AddonModAssignSubmissionListPage",{status:e,courseId:this.courseId,groupId:this.group||0,moduleId:this.module.id,moduleName:this.moduleName})},t.prototype.hasSyncSucceed=function(e){return e.updated&&this.submissionComponent&&this.submissionComponent.invalidateAndRefresh(),e.updated},t.prototype.invalidateContent=function(){var e=this,t=[];return t.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(t.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),this.canViewAllSubmissions&&t.push(this.assignProvider.invalidateSubmissionStatusData(this.assign.id,void 0,this.group))),Promise.all(t).finally(function(){e.submissionComponent&&e.submissionComponent.invalidateAndRefresh()})},t.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.submissionComponent&&this.submissionComponent.ionViewDidEnter()},t.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.submissionComponent&&this.submissionComponent.ionViewDidLeave()},t.prototype.isRefreshSyncNeeded=function(e){return!(!this.assign||e.assignId!=this.assign.id)&&(e.warnings&&e.warnings.length&&this.domUtils.showErrorModal(e.warnings[0]),!0)},t.prototype.sync=function(){return this.syncProvider.syncAssign(this.assign.id)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.savedObserver&&this.savedObserver.off(),this.submittedObserver&&this.submittedObserver.off(),this.gradedObserver&&this.gradedObserver.off()},h([Object(o._9)(f.a),m("design:type",f.a)],t.prototype,"submissionComponent",void 0),t=h([Object(o.m)({selector:"addon-mod-assign-index",templateUrl:"addon-mod-assign-index.html"}),_(2,Object(o.N)()),m("design:paramtypes",[o.C,s.a,r.f,u.a,c.a,d.a,l.a,i.a,r.s])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(498),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(74),d=n(731),f=n(274),p=n(506),h=n(1590),m=n(650),_=n(651),g=n(214),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=function(){function e(){}return e=v([Object(o.I)({declarations:[p.a,h.a,m.a,_.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a,d.a,f.a,g.a],providers:[],exports:[p.a,h.a,m.a,_.a],entryComponents:[p.a,m.a,_.a]})],e)}()},function(e,t,n){"use strict";function o(e){return r._57(0,[r._43(null,0),(e()(),r._55(-1,null,["\n"])),(e()(),r._31(2,0,null,null,7,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"onClick"]],function(e,t,n){var o=!0;if("onClick"===t){o=!1!==e.component.toggle(n)&&o}return o},i.b,i.a)),r._30(3,1097728,null,0,l.a,[[8,""],a.a,r.t,r.V],{clear:[0,"clear"]},null),r._30(4,81920,null,0,s.a,[r.t],null,{onClick:"onClick"}),r._47(131072,u.a,[c.a,r.j]),(e()(),r._55(-1,0,["\n    "])),(e()(),r._31(7,0,null,0,1,"core-icon",[],null,null,null,d.b,d.a)),r._30(8,704512,null,0,f.a,[r.t,a.a],{name:[0,"name"]},null),(e()(),r._55(-1,0,["\n"])),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,""),e(t,4,0);e(t,8,0,n.iconName)},function(e,t){var n=t.component;e(t,2,0,r._56(t,2,0,r._44(t,5).transform(n.label)))})}n.d(t,"a",function(){return g}),t.b=o;var r=n(0),i=n(45),l=n(42),a=n(8),s=n(491),u=n(25),c=n(17),d=n(80),f=n(75),p=n(378),h=n(2),m=n(4),_=n(16),g=r._29({encapsulation:2,styles:[],data:{}});r._27("core-show-password",p.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-show-password",[],null,null,null,o,g)),r._30(1,4308992,null,0,p.a,[r.t,h.a,m.a,_.a],null,null)],function(e,t){e(t,1,0)},null)},{name:"name",initialShown:"initialShown"},{},["*"])},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(11),l=n(14),a=(n.n(l),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.translate=e,this.textUtils=t}return t=e,e.prototype.formatMessage=function(e,n,o){if(n.message=n.message.trim(),n.showDate=this.showDate(n,o),n.beep="beep "==n.message.substr(0,5)&&n.message.substr(5).trim(),n.special=n.issystem||n.system||!!n.beep,"/me "==n.message.substr(0,4)&&(n.special=!0,n.message=n.message.substr(4).trim()),!n.special&&n.message.match(t.patternto)){var r=n.message.match(t.patternto);n.message="<b>"+this.translate.instant("addon.mod_chat.saidto")+"</b> <i>"+r[1]+"</i>: "+r[2]}n.showUserData=this.showUserData(e,n,o),o&&(o.showTail=this.showTail(o,n))},e.prototype.showUserData=function(e,t,n){return t.userid!=e&&(!n||n.userid!=t.userid||t.showDate||n.special)},e.prototype.showTail=function(e,t){return!t||t.userid!=e.userid||t.showDate||t.special},e.prototype.showDate=function(e,t){return!t||!l(1e3*e.timestamp).isSame(1e3*t.timestamp,"day")},e.patternto=new RegExp(/^To\s([^:]+):(.*)/),e=t=a([Object(o.A)(),s("design:paramtypes",[r.c,i.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(501),s=n(26),u=n(31),c=n(106),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a,c.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(6),i=n(3),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.translate=t,this.logger=e.getInstance("CoreUserHelperProvider")}return e.prototype.formatAddress=function(e,t,n){var o=this.translate.instant("core.listsep"),r=[e,t,n];return(r=r.filter(function(e){return e&&e.length>0})).join(o+" ")},e.prototype.formatRoleList=function(e){var t=this;if(!e||e.length<=0)return"";var n=this.translate.instant("core.listsep");return e.map(function(e){var n=t.translate.instant("core.user."+e.shortname);return n.indexOf("core.user.")<0?n:e.shortname}).join(n+" ")},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(23),i=n(3),l=n(4),a=n(11),s=n(24),u=n(169),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.domUtils=e,this.fb=t,this.translate=n,this.textUtils=o,this.timeUtils=r,this.lessonProvider=i}return e.prototype.formatActivityLink=function(e){var t=this.domUtils.convertToElement(e).querySelector("a");return t?{formatted:!0,label:t.innerHTML,href:t.href}:{formatted:!1,label:e,href:""}},e.prototype.getContentPageAnswerDataFromHtml=function(e){var t={buttonText:"",content:""},n=this.domUtils.convertToElement(e),o=n.querySelector('input[type="button"]');return o&&(t.buttonText=o.value,o.remove()),t.content=n.innerHTML.trim(),t},e.prototype.getPageButtonsFromHtml=function(e){var t=[],n=this.domUtils.convertToElement(e),o=n.querySelector(".branchbuttoncontainer");if(!o){if(!n.querySelector('form input[type="submit"]'))return t;o=n}return Array.from(o.querySelectorAll("form")).forEach(function(e){var n=e.querySelector('input[type="submit"], button[type="submit"]'),o=Array.from(e.querySelectorAll("input"));if(n&&o&&o.length){var r={id:n.id,title:n.title||n.value,content:"INPUT"==n.tagName?n.value:n.innerHTML.trim(),data:{}};o.forEach(function(e){"submit"!=e.type&&(r.data[e.name]=e.value)}),t.push(r)}}),t},e.prototype.getPageContentsFromPageData=function(e){var t=this.domUtils.convertToElement(e.pagecontent).querySelector(".contents");return t?t.innerHTML.trim():this.lessonProvider.isQuestionPage(e.page.type)||e.page.qtype==u.a.LESSON_PAGE_BRANCHTABLE?e.page.contents:e.pagecontent},e.prototype.getQuestionFromPageData=function(e,t){var n=this,o={},r=this.domUtils.convertToElement(t.pagecontent),i=r.querySelector(".fcontainer");Array.from(r.querySelectorAll('input[type="hidden"]')).forEach(function(t){e.addControl(t.name,n.fb.control(t.value))});var l=r.querySelector('input[type="submit"]');if(o.submitLabel=l?l.value:this.translate.instant("addon.mod_lesson.submit"),!i)return o;var a;switch(t.page.qtype){case u.a.LESSON_PAGE_TRUEFALSE:case u.a.LESSON_PAGE_MULTICHOICE:o.template="multichoice",o.options=[];var s=Array.from(i.querySelectorAll('input[type="radio"]'));if(!(s&&s.length||(o.multi=!0,(s=Array.from(i.querySelectorAll('input[type="checkbox"]')))&&s.length)))return o;var c=!1;s.forEach(function(t){var r={id:t.id,name:t.name,value:t.value,checked:!!t.checked,disabled:!!t.disabled},i=t.parentElement;if(r.checked||o.multi){e.addControl(r.name,n.fb.control(o.multi?{value:r.checked,disabled:r.disabled}:r.value)),c=!0}t.remove(),r.text=i.innerHTML.trim(),o.options.push(r)}),o.multi||(o.controlName=s[0].name,c||e.addControl(o.controlName,this.fb.control("")));break;case u.a.LESSON_PAGE_NUMERICAL:a="number";case u.a.LESSON_PAGE_SHORTANSWER:o.template="shortanswer";var d=i.querySelector('input[type="text"], input[type="number"]');if(!d)return o;o.input={id:d.id,name:d.name,maxlength:d.maxLength,type:a||"text"},e.addControl(d.name,this.fb.control({value:d.value,disabled:d.readOnly}));break;case u.a.LESSON_PAGE_ESSAY:o.template="essay";var f=i.querySelector("textarea");if(f)o.textarea={id:f.id,name:f.name||"answer[text]"},o.control=this.fb.control(""),e.addControl(o.textarea.name,o.control);else{var p=i.querySelector(".reviewessay");if(!p)return o;o.useranswer=p.innerHTML}break;case u.a.LESSON_PAGE_MATCHING:o.template="matching";var h=Array.from(i.querySelectorAll(".answeroption"));o.rows=[],h.forEach(function(t){var r=t.querySelector("label"),i=t.querySelector("select"),l=Array.from(t.querySelectorAll("option")),a={};if(r&&i&&l&&l.length){a.text=r.innerHTML.trim(),a.id=i.id,a.name=i.name,a.options=[];var s=!1;l.forEach(function(t){if(void 0!==t.value){var o={value:t.value,label:t.innerHTML.trim(),selected:t.selected};o.selected&&(s=!0,e.addControl(a.name,n.fb.control({value:o.value,disabled:!!i.disabled}))),a.options.push(o)}}),s||e.addControl(a.name,n.fb.control({value:"",disabled:!!i.disabled})),o.rows.push(a)}})}return o},e.prototype.getQuestionPageAnswerDataFromHtml=function(e){var t={},n=this.domUtils.convertToElement(e),o=n.querySelector('input[type="checkbox"][name*="answer"]');if(o)return t.isCheckbox=!0,t.checked=!!o.checked,t.name=o.name,t.highlight=!!n.querySelector(".highlight"),o.remove(),t.content=n.innerHTML.trim(),t;if(o=n.querySelector('input[type="number"],input[type="text"]'))return t.isText=!0,t.value=o.value,t;var r=n.querySelector("select");if(r&&r.options){var i=r.options[r.selectedIndex];return t.isSelect=!0,t.id=r.id,t.value=i?i.value:"",r.remove(),t.content=n.innerHTML.trim(),t}return e},e.prototype.getRetakeLabel=function(e,t){var n={retake:e.try+1,grade:"",timestart:"",duration:""},o=null!=e.grade;return o||e.end?(o&&(n.grade=this.translate.instant("core.percentagenumber",{$a:e.grade})),n.timestart=this.timeUtils.userDate(1e3*e.timestart),t&&(n.duration=this.timeUtils.formatTime(e.timeend-e.timestart))):(n.grade=this.translate.instant("addon.mod_lesson.notcompleted"),e.timestart&&(n.timestart=this.timeUtils.userDate(1e3*e.timestart))),this.translate.instant("addon.mod_lesson.retakelabel"+(t?"full":"short"),n)},e.prototype.prepareQuestionData=function(e,t){if("essay"==e.template&&e.textarea)t[e.textarea.name]=this.textUtils.formatHtmlLines(t[e.textarea.name]);else if("multichoice"==e.template&&e.multi)for(var n in t)n.match(/answer\[\d+\]/)&&0==t[n]&&delete t[n];return t},e.prototype.removeQuestionFromFeedback=function(e){var t=this.domUtils.convertToElement(e);return this.domUtils.removeElement(t,".generalbox:not(.feedback):not(.correctanswer)"),t.innerHTML.trim()},e=c([Object(o.A)(),d("design:paramtypes",[l.a,r.d,i.c,a.a,s.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(477),u=n(156),c=n(392),d=n(456),f=n(457),p=n(460),h=n(458),m=n(459),_=n(461),g=n(462),v=n(463),y=n(677),b=n(455),P=n(678),O=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},E=function(){function e(){}return e=O([Object(o.I)({declarations:[u.a,c.a,b.a,P.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a],imports:[r.b,i.k,a.a,s.a,l.b.forChild()],providers:[],exports:[u.a,c.a,b.a,P.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a],entryComponents:[c.a,b.a,P.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var o=n(413),r=Object(o.j)("coreShowHideAnimation",[Object(o.i)(":enter",[Object(o.h)({opacity:0}),Object(o.e)("500ms ease-in-out",Object(o.h)({opacity:1}))]),Object(o.i)(":leave",[Object(o.h)({opacity:1}),Object(o.e)("500ms ease-in-out",Object(o.h)({opacity:0}))])]),i=Object(o.j)("coreSlideInOut",[Object(o.i)("void => fromLeft",[Object(o.h)({transform:"translateX(0)",opacity:1}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:0,transform:"translateX(-100%)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(5%)",offset:.7}),Object(o.h)({opacity:1,transform:"translateX(0)",offset:1})]))]),Object(o.i)("fromLeft => void",[Object(o.h)({transform:"translateX(-100%)",opacity:0}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:1,transform:"translateX(0)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(5%)",offset:.3}),Object(o.h)({opacity:0,transform:"translateX(-100%)",offset:1})]))]),Object(o.i)("void => fromRight",[Object(o.h)({transform:"translateX(0)",opacity:1}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:0,transform:"translateX(100%)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(-5%)",offset:.7}),Object(o.h)({opacity:1,transform:"translateX(0)",offset:1})]))]),Object(o.i)("fromRight => void",[Object(o.h)({transform:"translateX(-100%)",opacity:0}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:1,transform:"translateX(0)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(-5%)",offset:.3}),Object(o.h)({opacity:0,transform:"translateX(100%)",offset:1})]))])])},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(9),l=n(186),a=n(276),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){var n=this;this.eventsProvider=t,this.courseId=-1,this.types={},this.typeIcons={},this.typeKeys=[],this.courses=e.get("courses")||[];var o=e.get("filter")||{filtered:!1,courseId:null,categoryId:null,course:!0,group:!0,site:!0,user:!0,category:!0};this.courseId=o.courseId||-1,this.typeKeys=l.a.ALL_TYPES.map(function(e){return n.types[e]=o[e],n.typeIcons[e]=a.a.EVENTICONS[e],e})}return e.prototype.onChange=function(e){var t=this,n=this.types;if(this.courseId>0){var o=this.courses.find(function(e){return t.courseId==e.id});n.courseId=o&&o.id,n.categoryId=o&&o.category}else n.courseId=!1,n.categoryId=!1;n.filtered=n.courseId||l.a.ALL_TYPES.some(function(e){return!t.types[e]}),this.eventsProvider.trigger(l.a.FILTER_CHANGED_EVENT,n)},e=s([Object(o.m)({selector:"addon-calendar-filter-popover",templateUrl:"addon-calendar-filter-popover.html"}),u("design:paramtypes",[r.t,i.a])],e)}()},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),d._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.fileName)})}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),d._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.size)})}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),d._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.timemodified)})}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,6,"ion-input",[["autocapitalize","none"],["autocorrect","off"],["name","filename"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"ngModelChange"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==n.stopPropagation()&&o}if("ngModelChange"===t){o=!1!==(r.newFileName=n)&&o}return o},f.b,f.a)),d._30(1,671744,null,0,p.q,[[2,p.b],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),d._50(2048,null,p.m,null,[p.q]),d._30(3,16384,null,0,p.n,[p.m],null,null),d._30(4,5423104,null,0,h.a,[m.a,_.a,g.a,v.a,d.t,d.V,[2,y.a],[2,b.a],[2,p.m],P.a],{type:[0,"type"],autocorrect:[1,"autocorrect"],placeholder:[2,"placeholder"]},null),d._47(131072,O.a,[E.a,d.j]),d._30(6,81920,null,0,C.a,[d.t,I.a,R.a,[2,S.a]],null,null)],function(e,t){e(t,1,0,"filename",t.component.newFileName);e(t,4,0,"text","off",d._56(t,4,2,d._44(t,5).transform("core.filename"))),e(t,6,0)},function(e,t){e(t,0,0,d._44(t,3).ngClassUntouched,d._44(t,3).ngClassTouched,d._44(t,3).ngClassPristine,d._44(t,3).ngClassDirty,d._44(t,3).ngClassValid,d._44(t,3).ngClassInvalid,d._44(t,3).ngClassPending)})}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,7,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"onClick"]],function(e,t,n){var o=!0;if("onClick"===t){o=!1!==e.component.activateEdit(n)&&o}return o},w.b,w.a)),d._30(1,1097728,[[3,4]],0,A.a,[[8,""],m.a,d.t,d.V],{color:[0,"color"],clear:[1,"clear"]},null),d._30(2,81920,null,0,D.a,[d.t],null,{onClick:"onClick"}),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,0,["\n                "])),(e()(),d._31(5,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(6,147456,null,0,j.a,[m.a,d.t,d.V],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),d._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"dark",""),e(t,2,0);e(t,6,0,"create","md-create")},function(e,t){e(t,0,0,d._56(t,0,0,d._44(t,3).transform("core.edit")));e(t,5,0,d._44(t,6)._hidden)})}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,6,"button",[["clear",""],["color","success"],["icon-only",""],["ion-button",""],["type","submit"]],[[1,"aria-label",0]],null,null,w.b,w.a)),d._30(1,1097728,[[3,4]],0,A.a,[[8,""],m.a,d.t,d.V],{color:[0,"color"],clear:[1,"clear"]},null),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,0,["\n                "])),(e()(),d._31(4,0,null,0,1,"ion-icon",[["ios","md-checkmark"],["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(5,147456,null,0,j.a,[m.a,d.t,d.V],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),d._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"success","");e(t,5,0,"checkmark","md-checkmark")},function(e,t){e(t,0,0,d._56(t,0,0,d._44(t,2).transform("core.save")));e(t,4,0,d._44(t,5)._hidden)})}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,15,"div",[["class","buttons"],["item-end",""]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n            "])),(e()(),d._26(16777216,null,null,1,null,a)),d._30(3,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n\n            "])),(e()(),d._26(16777216,null,null,1,null,s)),d._30(6,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n\n            "])),(e()(),d._31(8,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.deleteFile(n)&&o}return o},w.b,w.a)),d._30(9,1097728,[[3,4]],0,A.a,[[8,""],m.a,d.t,d.V],{color:[0,"color"],clear:[1,"clear"]},null),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,0,["\n                "])),(e()(),d._31(12,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(13,147456,null,0,j.a,[m.a,d.t,d.V],{name:[0,"name"]},null),(e()(),d._55(-1,0,["\n            "])),(e()(),d._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,!n.editMode);e(t,6,0,n.editMode);e(t,9,0,"danger","");e(t,13,0,"trash")},function(e,t){e(t,8,0,d._56(t,8,0,d._44(t,10).transform("core.delete")));e(t,12,0,d._44(t,13)._hidden)})}function c(e){return d._57(0,[d._52(402653184,1,{formElement:0}),(e()(),d._31(1,0,[[1,0],["nameForm",1]],null,33,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0,r=e.component;if("submit"===t){o=!1!==d._44(e,3).onSubmit(n)&&o}if("reset"===t){o=!1!==d._44(e,3).onReset()&&o}if("ngSubmit"===t){o=!1!==r.changeName(r.newFileName,n)&&o}return o},null,null)),d._30(2,16384,null,0,p.w,[],null,null),d._30(3,4210688,null,0,p.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),d._50(2048,null,p.b,null,[p.p]),d._30(5,16384,null,0,p.o,[p.b],null,null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._31(7,0,null,null,26,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["stacked",""],["text-wrap",""]],[[2,"item-input",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.fileClicked(n)&&o}return o},T.b,T.a)),d._30(8,1097728,null,3,b.a,[g.a,m.a,d.t,d.V,[2,x.a]],null,null),d._52(335544320,2,{contentLabel:0}),d._52(603979776,3,{_buttons:1}),d._52(603979776,4,{_icons:1}),d._30(12,16384,null,0,M.a,[],null,null),(e()(),d._55(-1,2,["\n        "])),(e()(),d._31(14,0,null,0,0,"img",[["item-start",""],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),d._55(-1,2,["\n\n        "])),(e()(),d._55(-1,2,["\n        "])),(e()(),d._26(16777216,null,2,1,null,o)),d._30(18,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n        "])),(e()(),d._55(-1,2,["\n        "])),(e()(),d._26(16777216,null,2,1,null,r)),d._30(22,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n        "])),(e()(),d._26(16777216,null,2,1,null,i)),d._30(25,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n\n        "])),(e()(),d._55(-1,2,["\n        "])),(e()(),d._26(16777216,null,3,1,null,l)),d._30(29,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n\n        "])),(e()(),d._26(16777216,null,4,1,null,u)),d._30(32,16384,null,0,k.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._55(-1,null,["\n"])),(e()(),d._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,18,0,!n.editMode);e(t,22,0,n.size&&!n.editMode);e(t,25,0,n.timemodified&&!n.editMode);e(t,29,0,n.editMode);e(t,32,0,n.manage)},function(e,t){var n=t.component;e(t,1,0,d._44(t,5).ngClassUntouched,d._44(t,5).ngClassTouched,d._44(t,5).ngClassPristine,d._44(t,5).ngClassDirty,d._44(t,5).ngClassValid,d._44(t,5).ngClassInvalid,d._44(t,5).ngClassPending);e(t,7,0,n.editMode);e(t,14,0,n.fileIcon,d._34(1,"",n.fileExtension,""))})}n.d(t,"a",function(){return G}),t.b=c;var d=n(0),f=n(110),p=n(23),h=n(90),m=n(8),_=n(16),g=n(19),v=n(35),y=n(29),b=n(20),P=n(34),O=n(25),E=n(17),C=n(376),I=n(4),R=n(2),S=n(21),w=n(45),A=n(42),D=n(491),j=n(47),k=n(7),T=n(30),x=n(27),M=n(33),N=n(382),U=n(66),F=n(11),L=n(57),H=n(24),B=n(1),q=n(9),G=d._29({encapsulation:2,styles:[],data:{}});d._27("core-local-file",N.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-local-file",[],null,null,null,c,G)),d._30(1,114688,null,0,N.a,[U.a,R.a,F.a,L.a,I.a,H.a,B.a,q.a],null,null)],function(e,t){e(t,1,0)},null)},{file:"file",manage:"manage",overrideClick:"overrideClick"},{onDelete:"onDelete",onRename:"onRename",onClick:"onClick"},[])},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(374),d=n(274),f=n(523),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=function(){function e(){}return e=p([Object(o.I)({declarations:[f.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a,d.a],providers:[],exports:[f.a],entryComponents:[f.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(525),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(526),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(1),i=n(4),l=n(149),a=n(389),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.sitesProvider=e,this.fileUploaderHelper=t,this.filesProvider=n,this.domUtils=o}return e.prototype.uploadPrivateFile=function(e){var t=this,n=this.sitesProvider.getCurrentSite(),o=n.getInfo().usermaxuploadfilesize,r=n.getInfo().userquota;return 0===r?r=-1:r>0&&void 0!==e&&(r-=e.filesizewithoutreferences),void 0!==r&&(o=Math.min(o,r)),this.fileUploaderHelper.selectAndUploadFile(o).then(function(e){if(!e)return Promise.reject(null);var n=t.domUtils.showModalLoading("core.fileuploader.uploading",!0);return t.filesProvider.moveFromDraftToPrivate(e.itemid).catch(function(e){return t.domUtils.showErrorModalDefault(e,"core.fileuploader.errorwhileuploading",!0),Promise.reject(null)}).finally(function(){n.dismiss()})}).then(function(){t.domUtils.showToast("core.fileuploader.fileuploaded",!0,void 0,"core-toast-success")})},e=s([Object(o.A)(),u("design:paramtypes",[r.a,l.a,a.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(497),d=n(274),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=function(){function e(){}return e=f([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,d.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(499),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(1573),d=n(1574),f=n(744),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=function(){function e(){}return e=p([Object(o.I)({declarations:[c.a,d.a,f.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a,d.a,f.a],entryComponents:[f.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(74),u=n(505),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e=c([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a],providers:[],exports:[u.a],entryComponents:[u.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(74),d=n(372),f=n(508),p=n(653),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=function(){function e(){}return e=h([Object(o.I)({declarations:[f.a,p.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a,d.a],providers:[],exports:[f.a,p.a],entryComponents:[f.a,p.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(509),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(510),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(511),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(74),d=n(512),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=function(){function e(){}return e=f([Object(o.I)({declarations:[d.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a],providers:[],exports:[d.a],entryComponents:[d.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(513),d=n(775),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=function(){function e(){}return e=f([Object(o.I)({declarations:[c.a,d.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a,d.a],entryComponents:[c.a,d.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(514),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(515),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(516),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(517),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(274),d=n(518),f=n(668),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=function(){function e(){}return e=p([Object(o.I)({declarations:[d.a,f.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a],providers:[],exports:[d.a,f.a],entryComponents:[d.a,f.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(529),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[c.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a],providers:[],exports:[c.a],entryComponents:[c.a]})],e)}()},,,,,function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.action.emit(r.previous)&&o}return o},u.b,u.a)),s._30(1,1097728,null,0,c.a,[[8,""],d.a,s.t,s.V],{clear:[0,"clear"]},null),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,0,["\n                "])),(e()(),s._31(4,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(5,147456,null,0,h.a,[d.a,s.t,s.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),s._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"");e(t,5,0,"arrow-back","ios-arrow-back")},function(e,t){e(t,0,0,s._56(t,0,0,s._44(t,2).transform("core.previous")));e(t,4,0,s._44(t,5)._hidden)})}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,5,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showInfo()&&o}return o},u.b,u.a)),s._30(1,1097728,null,0,c.a,[[8,""],d.a,s.t,s.V],{clear:[0,"clear"]},null),(e()(),s._55(-1,0,["\n                "])),(e()(),s._31(3,0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(4,147456,null,0,h.a,[d.a,s.t,s.V],{name:[0,"name"]},null),(e()(),s._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"");e(t,4,0,"information-circle")},function(e,t){e(t,0,0,t.component.title);e(t,3,0,s._44(t,4)._hidden)})}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.action.emit(r.next)&&o}return o},u.b,u.a)),s._30(1,1097728,null,0,c.a,[[8,""],d.a,s.t,s.V],{clear:[0,"clear"]},null),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,0,["\n                "])),(e()(),s._31(4,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(5,147456,null,0,h.a,[d.a,s.t,s.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),s._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"");e(t,5,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,0,0,s._56(t,0,0,s._44(t,2).transform("core.next")));e(t,4,0,s._44(t,5)._hidden)})}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,27,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),s._30(1,16384,null,0,m.a,[],null,null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._31(3,0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),s._30(4,16384,null,0,_.a,[],null,null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(6,0,null,null,5,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),s._30(7,16384,null,0,g.a,[],null,null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._26(16777216,null,null,1,null,o)),s._30(10,16384,null,0,v.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(13,0,null,null,5,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),s._30(14,16384,null,0,g.a,[],null,null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._26(16777216,null,null,1,null,r)),s._30(17,16384,null,0,v.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(20,0,null,null,5,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),s._30(21,16384,null,0,g.a,[],null,null),(e()(),s._55(-1,null,["\n            "])),(e()(),s._26(16777216,null,null,1,null,i)),s._30(24,16384,null,0,v.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._55(-1,null,["\n    "])),(e()(),s._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,10,0,n.previous);e(t,17,0,n.info);e(t,24,0,n.next)},null)}function a(e){return s._57(0,[(e()(),s._26(16777216,null,null,1,null,l)),s._30(1,16384,null,0,v.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.previous||n.info||n.next)},null)}n.d(t,"a",function(){return P}),t.b=a;var s=n(0),u=n(45),c=n(42),d=n(8),f=n(25),p=n(17),h=n(47),m=n(164),_=n(119),g=n(120),v=n(7),y=n(395),b=n(11),P=s._29({encapsulation:2,styles:[],data:{}});s._27("core-navigation-bar",y.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"core-navigation-bar",[],null,null,null,a,P)),s._30(1,49152,null,0,y.a,[b.a],null,null)],null,null)},{previous:"previous",next:"next",info:"info",title:"title",component:"component",componentId:"componentId",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{action:"action"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(400),a=n(31),s=n(26),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=function(){function e(){}return e=u([Object(o.I)({declarations:[l.a],imports:[a.a,s.a,r.l.forChild(l.a),i.b.forChild()],entryComponents:[l.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return e=r([Object(o.m)({selector:"addon-mod-quiz-connection-error",template:'<ion-item text-wrap>{{ "addon.mod_quiz.connectionerror" | translate }}</ion-item>'}),i("design:paramtypes",[])],e)}()},,,,,,,,,,,function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=786},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function o(e){var t=r[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var r={"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory":[1974,145],"../addon/badges/pages/user-badges/user-badges.module.ngfactory":[1975,144],"../addon/blog/pages/entries/entries.module.ngfactory":[1976,143],"../addon/calendar/pages/day/day.module.ngfactory":[2113,142],"../addon/calendar/pages/edit-event/edit-event.module.ngfactory":[2104,141],"../addon/calendar/pages/event/event.module.ngfactory":[2105,140],"../addon/calendar/pages/index/index.module.ngfactory":[2080,139],"../addon/calendar/pages/list/list.module.ngfactory":[2114,138],"../addon/calendar/pages/settings/settings.module.ngfactory":[1977,137],"../addon/competency/pages/competencies/competencies.module.ngfactory":[1978,136],"../addon/competency/pages/competency/competency.module.ngfactory":[1979,135],"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory":[1980,134],"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory":[1981,133],"../addon/competency/pages/plan/plan.module.ngfactory":[1982,132],"../addon/competency/pages/planlist/planlist.module.ngfactory":[1983,131],"../addon/coursecompletion/pages/report/report.module.ngfactory":[1984,130],"../addon/files/pages/list/list.module.ngfactory":[1985,129],"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory":[1986,128],"../addon/messages/pages/contacts/contacts.module.ngfactory":[1987,3],"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory":[1988,127],"../addon/messages/pages/discussion/discussion.module.ngfactory":[2119,16],"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory":[2115,126],"../addon/messages/pages/index/index.module.ngfactory":[1989,2],"../addon/messages/pages/search/search.module.ngfactory":[2081,1],"../addon/messages/pages/settings/settings.module.ngfactory":[2082,0],"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory":[1990,7],"../addon/mod/assign/pages/edit/edit.module.ngfactory":[2083,6],"../addon/mod/assign/pages/index/index.module.ngfactory":[1991,5],"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory":[2084,125],"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory":[1992,4],"../addon/mod/book/pages/index/index.module.ngfactory":[1993,124],"../addon/mod/book/pages/toc/toc.module.ngfactory":[1994,123],"../addon/mod/chat/pages/chat/chat.module.ngfactory":[2085,15],"../addon/mod/chat/pages/index/index.module.ngfactory":[1995,122],"../addon/mod/chat/pages/session-messages/session-messages.module.ngfactory":[1996,121],"../addon/mod/chat/pages/sessions/sessions.module.ngfactory":[1997,120],"../addon/mod/chat/pages/users/users.module.ngfactory":[1998,119],"../addon/mod/choice/pages/index/index.module.ngfactory":[1999,118],"../addon/mod/data/pages/edit/edit.module.ngfactory":[2086,117],"../addon/mod/data/pages/entry/entry.module.ngfactory":[2087,14],"../addon/mod/data/pages/index/index.module.ngfactory":[2e3,116],"../addon/mod/data/pages/search/search.module.ngfactory":[2088,115],"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory":[2001,114],"../addon/mod/feedback/pages/form/form.module.ngfactory":[2089,26],"../addon/mod/feedback/pages/index/index.module.ngfactory":[2002,113],"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory":[2003,112],"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory":[2004,111],"../addon/mod/folder/pages/index/index.module.ngfactory":[2005,110],"../addon/mod/forum/pages/discussion/discussion.module.ngfactory":[2116,13],"../addon/mod/forum/pages/edit-post/edit-post.module.ngfactory":[2006,109],"../addon/mod/forum/pages/index/index.module.ngfactory":[2007,108],"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory":[2106,107],"../addon/mod/forum/pages/sort-order-selector/sort-order-selector.module.ngfactory":[2008,106],"../addon/mod/glossary/pages/edit/edit.module.ngfactory":[2090,105],"../addon/mod/glossary/pages/entry/entry.module.ngfactory":[2009,12],"../addon/mod/glossary/pages/index/index.module.ngfactory":[2010,104],"../addon/mod/imscp/pages/index/index.module.ngfactory":[2011,103],"../addon/mod/imscp/pages/toc/toc.module.ngfactory":[2012,102],"../addon/mod/lesson/pages/index/index.module.ngfactory":[2013,101],"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory":[2014,100],"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory":[2015,99],"../addon/mod/lesson/pages/player/player.module.ngfactory":[2117,25],"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory":[2091,98],"../addon/mod/lti/pages/index/index.module.ngfactory":[2016,97],"../addon/mod/page/pages/index/index.module.ngfactory":[2017,96],"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory":[2018,95],"../addon/mod/quiz/pages/index/index.module.ngfactory":[2019,94],"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory":[2020,93],"../addon/mod/quiz/pages/player/player.module.ngfactory":[2118,8],"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory":[2021,92],"../addon/mod/quiz/pages/review/review.module.ngfactory":[2092,24],"../addon/mod/resource/pages/index/index.module.ngfactory":[2022,91],"../addon/mod/scorm/pages/index/index.module.ngfactory":[2023,90],"../addon/mod/scorm/pages/player/player.module.ngfactory":[2107,89],"../addon/mod/scorm/pages/toc/toc.module.ngfactory":[2024,88],"../addon/mod/survey/pages/index/index.module.ngfactory":[2025,87],"../addon/mod/url/pages/index/index.module.ngfactory":[2026,86],"../addon/mod/wiki/pages/edit/edit.module.ngfactory":[2108,85],"../addon/mod/wiki/pages/index/index.module.ngfactory":[2027,84],"../addon/mod/wiki/pages/map/map.module.ngfactory":[2028,83],"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory":[2093,23],"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory":[2094,82],"../addon/mod/workshop/pages/index/index.module.ngfactory":[2029,81],"../addon/mod/workshop/pages/phase/phase.module.ngfactory":[2030,80],"../addon/mod/workshop/pages/submission/submission.module.ngfactory":[2109,9],"../addon/notes/pages/add/add.module.ngfactory":[2031,79],"../addon/notes/pages/list/list.module.ngfactory":[2032,78],"../addon/notifications/pages/list/list.module.ngfactory":[2095,77],"../addon/notifications/pages/settings/settings.module.ngfactory":[2096,76],"../addon/storagemanager/pages/course-storage/course-storage.module.ngfactory":[2033,75],"../components/split-view/placeholder/placeholder.module.ngfactory":[2034,74],"../core/comments/pages/add/add.module.ngfactory":[2035,73],"../core/comments/pages/viewer/viewer.module.ngfactory":[2110,72],"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory":[2036,71],"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory":[2037,70],"../core/course/pages/section-selector/section-selector.module.ngfactory":[2038,69],"../core/course/pages/section/section.module.ngfactory":[2111,68],"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory":[2039,67],"../core/courses/pages/available-courses/available-courses.module.ngfactory":[2040,22],"../core/courses/pages/categories/categories.module.ngfactory":[2041,21],"../core/courses/pages/course-preview/course-preview.module.ngfactory":[2112,66],"../core/courses/pages/dashboard/dashboard.module.ngfactory":[2097,10],"../core/courses/pages/my-courses/my-courses.module.ngfactory":[2042,19],"../core/courses/pages/search/search.module.ngfactory":[2043,20],"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory":[2044,65],"../core/emulator/pages/capture-media/capture-media.module.ngfactory":[2098,64],"../core/grades/pages/course/course.module.ngfactory":[2045,63],"../core/grades/pages/courses/courses.module.ngfactory":[2046,62],"../core/grades/pages/coursesplit/coursesplit.module.ngfactory":[2047,61],"../core/grades/pages/grade/grade.module.ngfactory":[2048,60],"../core/login/pages/change-password/change-password.module.ngfactory":[2049,59],"../core/login/pages/credentials/credentials.module.ngfactory":[2099,58],"../core/login/pages/email-signup/email-signup.module.ngfactory":[2100,11],"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory":[2050,57],"../core/login/pages/init/init.module.ngfactory":[2051,56],"../core/login/pages/reconnect/reconnect.module.ngfactory":[2052,55],"../core/login/pages/site-error/site-error.module.ngfactory":[2053,54],"../core/login/pages/site-help/site-help.module.ngfactory":[2054,53],"../core/login/pages/site-policy/site-policy.module.ngfactory":[2055,52],"../core/login/pages/site/site.module.ngfactory":[2056,51],"../core/login/pages/sites/sites.module.ngfactory":[2057,50],"../core/mainmenu/pages/menu/menu.module.ngfactory":[2101,49],"../core/mainmenu/pages/more/more.module.ngfactory":[2058,48],"../core/rating/pages/ratings/ratings.module.ngfactory":[2059,47],"../core/settings/pages/about/about.module.ngfactory":[2060,46],"../core/settings/pages/app/app.module.ngfactory":[2061,45],"../core/settings/pages/deviceinfo/deviceinfo.module.ngfactory":[2102,44],"../core/settings/pages/general/general.module.ngfactory":[2062,43],"../core/settings/pages/licenses/licenses.module.ngfactory":[2063,42],"../core/settings/pages/site/site.module.ngfactory":[2064,41],"../core/settings/pages/space-usage/space-usage.module.ngfactory":[2065,40],"../core/settings/pages/synchronization/synchronization.module.ngfactory":[2066,39],"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory":[2067,38],"../core/sharedfiles/pages/list/list.module.ngfactory":[2068,37],"../core/sitehome/pages/index/index.module.ngfactory":[2069,18],"../core/siteplugins/pages/module-index/module-index.module.ngfactory":[2070,36],"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory":[2071,35],"../core/tag/pages/index-area/index-area.module.ngfactory":[2072,34],"../core/tag/pages/index/index.module.ngfactory":[2073,33],"../core/tag/pages/search/search.module.ngfactory":[2074,32],"../core/user/pages/about/about.module.ngfactory":[2075,17],"../core/user/pages/participants/participants.module.ngfactory":[2076,31],"../core/user/pages/profile/profile.module.ngfactory":[2103,30],"../core/viewer/pages/iframe/iframe.module.ngfactory":[2077,29],"../core/viewer/pages/image/image.module.ngfactory":[2078,28],"../core/viewer/pages/text/text.module.ngfactory":[2079,27]};o.keys=function(){return Object.keys(r)},o.id=808,e.exports=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var o=n(0),r=n(439),i=n(10),l=n(57),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o,r,i){this.code=e,this.source=t,this.target=n,this.http_status=o,this.body=r,this.exception=i}return e.FILE_NOT_FOUND_ERR=1,e.INVALID_URL_ERR=2,e.CONNECTION_ERR=3,e.ABORT_ERR=4,e.NOT_MODIFIED_ERR=5,e}(),d=function(e){function t(t,n){var o=e.call(this)||this;return o.appProvider=t,o.fileProvider=n,o}return a(t,e),t.prototype.create=function(){return new f(this.appProvider,this.fileProvider)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a),f=function(t){function n(e,n){var o=t.call(this)||this;return o.appProvider=e,o.fileProvider=n,o}return a(n,t),n.prototype.abort=function(){this.xhr&&(this.xhr.abort(),this.reject(new c(c.ABORT_ERR,this.source,this.target,null,null,null)))},n.prototype.download=function(t,n,o,r){var i=this;return new Promise(function(o,l){var a=i.getBasicAuthHeader(t),s=new XMLHttpRequest,u=i.appProvider.isDesktop(),d=null;i.xhr=s,i.source=t,i.target=n,i.reject=l,a&&(t=t.replace(i.getUrlCredentials(t)+"@",""),(r=r||{}).headers=r.headers||{},r.headers[a.name]=a.value),r&&(d=r.headers||null),s.open("GET",t,!0),s.responseType=u?"arraybuffer":"blob";for(var f in d)s.setRequestHeader(f,d[f]);s.onprogress=function(e,t){i.progressListener&&i.progressListener(t)},s.onerror=function(e){l(new c(-1,t,n,s.status,s.statusText,null))},s.onload=function(){var r=s.response||s.responseText,a=Math.max(1223===s.status?204:s.status,0);if(a<200||a>=300)i.parseResponse(r).then(function(e){l(new c(-1,t,n,s.status,e||s.statusText,null))});else if(r){var d=i.fileProvider.getBasePathInstant();n=(n=n.replace(d,"")).replace(/%20/g," "),u&&(r=e.from(new Uint8Array(r))),i.fileProvider.writeFile(n,r).then(o,l)}else l()},s.send()})},n.prototype.getBasicAuthHeader=function(e){var t=null;if(window.btoa){var n=this.getUrlCredentials(e);if(n){t={name:"Authorization",value:"Basic "+window.btoa(n)}}}return t},n.prototype.getHeadersAsObject=function(e){var t=e.getAllResponseHeaders(),n={};if(t){var o=t.split("\n");for(var r in o){var i=o[r],l=i.indexOf(":");-1!=l&&(n[i.substr(0,l)]=i.substr(l+1).trim())}}return n},n.prototype.getUrlCredentials=function(e){var t=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/.exec(e);return t&&t[1]},n.prototype.onProgress=function(e){this.progressListener=e},n.prototype.parseJSON=function(e){try{return JSON.parse(e)}catch(e){}return e},n.prototype.parseResponse=function(e){var t=this;return new Promise(function(t,n){if(e)if(e.toString&&"[object Blob]"==e.toString()){var o=new FileReader;o.onloadend=function(){t(o.result)},o.readAsText(e)}else e.toString&&"[object ArrayBuffer]"==e.toString()?t(String.fromCharCode.apply(null,new Uint8Array(e))):t(e);else t("")}).then(function(e){return t.parseJSON(e)})},n.prototype.upload=function(e,t,n,o){var r=this;return new Promise(function(o,i){var l=r.getBasicAuthHeader(t),a=null,s=null,u=null,d=null,f=null;l&&(t=t.replace(r.getUrlCredentials(t)+"@",""),(n=n||{}).headers=n.headers||{},n.headers[l.name]=l.value),n&&(a=n.fileKey,s=n.fileName,d=n.headers,f="PUT"==(f=n.httpMethod||"POST").toUpperCase()?"PUT":"POST",u=n.params?n.params:{}),(d=d||{})["Content-Disposition"]||(d["Content-Disposition"]="form-data;"+(a?' name="'+a+'";':"")+(s?' filename="'+s+'"':"")),delete d["Content-Type"],r.fileProvider.getFile(e).then(function(e){return r.fileProvider.getFileObjectFromFileEntry(e)}).then(function(n){var l=new XMLHttpRequest;l.open(f||"POST",t);for(var a in d)"Connection"!=a&&l.setRequestHeader(a,d[a]);l.onprogress=function(e){r.progressListener&&r.progressListener(e)},r.xhr=l,r.source=e,r.target=t,r.reject=i,l.onerror=function(){i(new c(-1,e,t,l.status,l.statusText,null))},l.onload=function(){o({bytesSent:n.size,responseCode:l.status,response:l.response,headers:r.getHeadersAsObject(l)})};var p=new FormData;for(var h in u)p.append(h,u[h]);p.append("file",n,s),l.send(p)}).catch(i)})},n}(r.b)}).call(t,n(357).Buffer)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e){this.translate=e,this.name="AddonModAssignBaseFeedbackHandler",this.type="base"}return e.prototype.discardDraft=function(e,t,n){},e.prototype.getComponent=function(e,t){},e.prototype.getDraft=function(e,t,n){},e.prototype.getPluginFiles=function(e,t,n,o){return[]},e.prototype.getPluginName=function(e){var t="addon.mod_assign_feedback_"+e.type+".pluginname",n=this.translate.instant(t);return t!=n?n:e.name?e.name:void 0},e.prototype.hasDataChanged=function(e,t,n,o,r){return!1},e.prototype.hasDraftData=function(e,t,n){return!1},e.prototype.isEnabled=function(){return!0},e.prototype.prefetch=function(e,t,n,o){return Promise.resolve()},e.prototype.prepareFeedbackData=function(e,t,n,o,r){},e.prototype.saveDraft=function(e,t,n,o,r){},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){this.cacheStore={}}return e.prototype.clear=function(){this.cacheStore={}},e.prototype.getEntry=function(e){return this.cacheStore[e]||(this.cacheStore[e]={}),this.cacheStore[e]},e.prototype.getValue=function(e,t,n){var o=this.getEntry(e);if(o[t]&&void 0!==o[t].value){var r=Date.now();if(n||o[t].timemodified+3e5>=r)return o[t].value}},e.prototype.invalidate=function(e){var t=this.getEntry(e);for(var n in t)t[n].timemodified=0},e.prototype.setValue=function(e,t,n){return this.getEntry(e)[t]={value:n,timemodified:Date.now()},n},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e){this.translate=e,this.name="AddonModAssignBaseSubmissionHandler",this.type="base"}return e.prototype.canEditOffline=function(e,t,n){return!1},e.prototype.isEmpty=function(e,t){return!0},e.prototype.clearTmpData=function(e,t,n,o){},e.prototype.copySubmissionData=function(e,t,n,o,r){},e.prototype.deleteOfflineData=function(e,t,n,o,r){},e.prototype.getComponent=function(e,t,n){},e.prototype.getPluginFiles=function(e,t,n,o){return[]},e.prototype.getPluginName=function(e){var t="addon.mod_assign_submission_"+e.type+".pluginname",n=this.translate.instant(t);return t!=n?n:e.name?e.name:void 0},e.prototype.getSizeForCopy=function(e,t){return 0},e.prototype.getSizeForEdit=function(e,t,n,o){return 0},e.prototype.hasDataChanged=function(e,t,n,o){return!1},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){return!1},e.prototype.prefetch=function(e,t,n,o){return Promise.resolve()},e.prototype.prepareSubmissionData=function(e,t,n,o,r,i,l,a){},e.prototype.prepareSyncData=function(e,t,n,o,r,i){},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e,t,n,o,r,i,l,a,s){this.translate=e,this.appProvider=t,this.utils=n,this.courseProvider=o,this.filepoolProvider=r,this.sitesProvider=i,this.domUtils=l,this.filterHelper=a,this.pluginFileDelegate=s,this.name="CoreCourseModulePrefetchHandler",this.modName="default",this.component="core_module",this.updatesNames=/^.*files$/,this.skipListStatus=!1,this.downloadPromises={}}return e.prototype.addOngoingDownload=function(e,t,n){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueId(e);return this.downloadPromises[n]||(this.downloadPromises[n]={}),this.downloadPromises[n][r]=t.finally(function(){delete o.downloadPromises[n][r]}),this.downloadPromises[n][r]},e.prototype.download=function(e,t,n){return Promise.resolve()},e.prototype.getContentDownloadableFiles=function(e){var t=this,n=[];return e.contents&&e.contents.length&&e.contents.forEach(function(e){t.isFileDownloadable(e)&&n.push(e)}),n},e.prototype.getDownloadSize=function(e,t,n){var o=this;return this.getFiles(e,t).then(function(e){return o.pluginFileDelegate.getFilesSize(e)}).catch(function(){return{size:-1,total:!1}})},e.prototype.getDownloadedSize=function(e,t){var n=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getFilesSizeByComponent(n,this.component,e.id)},e.prototype.getFiles=function(e,t,n){return Promise.resolve([])},e.prototype.getIntroFiles=function(e,t,n){return Promise.resolve(this.getIntroFilesFromInstance(e))},e.prototype.getIntroFilesFromInstance=function(e,t){if(t){if(void 0!==t.introfiles)return t.introfiles;if(t.intro)return this.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(t.intro)}return e.description?this.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.description):[]},e.prototype.getOngoingDownload=function(e,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.isDownloading(e,t)?this.downloadPromises[t][this.getUniqueId(e)]:Promise.resolve()},e.prototype.getUniqueId=function(e){return this.component+"#"+e},e.prototype.invalidateContent=function(e,t){return Promise.resolve()},e.prototype.invalidateModule=function(e,t){return this.courseProvider.invalidateModule(e.id)},e.prototype.isDownloadable=function(e,t){return!0},e.prototype.isDownloading=function(e,t){return t=t||this.sitesProvider.getCurrentSiteId(),!(!this.downloadPromises[t]||!this.downloadPromises[t][this.getUniqueId(e)])},e.prototype.isEnabled=function(){return!0},e.prototype.isFileDownloadable=function(e){return"file"===e.type},e.prototype.loadContents=function(e,t,n){return Promise.resolve()},e.prototype.prefetch=function(e,t,n,o){return Promise.resolve()},e.prototype.removeFiles=function(e,t){return this.filepoolProvider.removeFilesByComponent(this.sitesProvider.getCurrentSiteId(),this.component,e.id)},e}()},function(e,t,n){"use strict";function o(e){return l._57(0,[(e()(),l._31(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,a.b,a.a)),l._30(1,1097728,null,3,s.a,[u.a,c.a,l.t,l.V,[2,d.a]],null,null),l._52(335544320,2,{contentLabel:0}),l._52(603979776,3,{_buttons:1}),l._52(603979776,4,{_icons:1}),l._30(5,16384,null,0,f.a,[],null,null),(e()(),l._55(-1,2,["\n        "])),(e()(),l._31(7,0,null,0,1,"ion-icon",[["item-start",""],["name","square"],["role","img"]],[[4,"color",null],[2,"hide",null]],null,null,null,null)),l._30(8,147456,[[4,4]],0,p.a,[c.a,l.t,l.V],{name:[0,"name"]},null),(e()(),l._55(9,2,["\n        ","\n    "]))],function(e,t){e(t,8,0,"square")},function(e,t){e(t,7,0,t.context.$implicit.fillStyle,l._44(t,8)._hidden);e(t,9,0,t.context.$implicit.text)})}function r(e){return l._57(0,[(e()(),l._31(0,0,null,null,5,"ion-list",[["inset",""]],null,null,null,null,null)),l._30(1,16384,null,0,h.a,[c.a,l.t,l.V,m.a,_.l,g.a],null,null),(e()(),l._55(-1,null,["\n    "])),(e()(),l._26(16777216,null,null,1,null,o)),l._30(4,802816,null,0,v.j,[l._11,l._6,l.E],{ngForOf:[0,"ngForOf"]},null),(e()(),l._55(-1,null,["\n"]))],function(e,t){e(t,4,0,t.component.chart.legend.legendItems)},null)}function i(e){return l._57(0,[l._52(402653184,1,{canvas:0}),(e()(),l._31(1,0,[[1,0],["canvas",1]],null,0,"canvas",[],[[1,"height",0]],null,null,null,null)),(e()(),l._55(-1,null,["\n\n"])),(e()(),l._26(16777216,null,null,1,null,r)),l._30(4,16384,null,0,v.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(e()(),l._55(-1,null,["\n"]))],function(e,t){e(t,4,0,t.component.chart)},function(e,t){e(t,1,0,t.component.height)})}n.d(t,"a",function(){return E}),t.b=i;var l=n(0),a=n(30),s=n(20),u=n(19),c=n(8),d=n(27),f=n(33),p=n(47),h=n(86),m=n(16),_=n(43),g=n(34),v=n(7),y=n(444),b=n(41),P=n(2),O=n(32),E=l._29({encapsulation:2,styles:[],data:{}});l._27("core-chart",y.a,function(e){return l._57(0,[(e()(),l._31(0,0,null,null,1,"core-chart",[],null,null,null,i,E)),l._30(1,770048,null,0,y.a,[b.a,P.a,O.a],null,null)],function(e,t){e(t,1,0)},null)},{data:"data",labels:"labels",type:"type",legend:"legend",height:"height",filter:"filter",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId",wsNotFiltered:"wsNotFiltered"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(450),i=n(597),l=n(178),a=n(26),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[r.a],imports:[a.a],providers:[i.a],exports:[r.a],entryComponents:[r.a]}),u("design:paramtypes",[l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1061),i=n(178),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],imports:[],providers:[r.a],exports:[]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(597),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="CoreCourseFormatSocial",t.format="social",t}return i(t,e),t=l([Object(o.A)()],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1063),i=n(178),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],imports:[],providers:[r.a],exports:[]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="CoreCourseFormatTopics",this.format="topics"}return e.prototype.isEnabled=function(){return!0},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1065),i=n(178),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],imports:[],providers:[r.a],exports:[]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(24),i=n(40),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.timeUtils=e,this.name="CoreCourseFormatWeeks",this.format="weeks"}return e.prototype.isEnabled=function(){return!0},e.prototype.getCurrentSection=function(e,t){var n=this.timeUtils.timestamp();if(n<e.startdate||e.enddate&&n>e.enddate)return t[0];for(var o=0;o<t.length;o++){var r=t[o];if(!(void 0===r.section||r.section<1)){var i=this.getSectionDates(r,e.startdate);if(n>=i.start&&n<i.end)return r}}return t[0]},e.prototype.getSectionDates=function(e,t){var n={start:(t+=7200)+i.a.SECONDS_WEEK*(e.section-1),end:0};return n.end=n.start+i.a.SECONDS_WEEK,n},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(397),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.courseSync=e,this.name="CoreCourseSyncCronHandler"}return e.prototype.execute=function(e,t){return this.courseSync.syncAllCourses(e)},e.prototype.getInterval=function(){return this.courseSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(13),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.courseProvider=e,this.sitesProvider=t,this.name="CoreCourseLogCronHandler"}return e.prototype.execute=function(e,t){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.courseProvider.logView(e.getSiteHomeId(),void 0,e.getId(),e.getInfo().sitename)})},e.prototype.isSync=function(){return!1},e.prototype.getInterval=function(){return 24e4},e=l([Object(o.A)(),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(4),i=n(589),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.domUtils=e,this.name="CoreCourseTagAreaHandler",this.type="core/course"}return e.prototype.isEnabled=function(){return!0},e.prototype.parseContent=function(e){var t=[],n=this.domUtils.convertToElement(e);return Array.from(n.querySelectorAll("div.coursebox")).forEach(function(e){var n=parseInt(e.getAttribute("data-courseid"),10),o=e.querySelector(".coursename > a"),r=e.querySelector(".coursecat > a");n>0&&o&&t.push({courseId:n,courseName:o.innerHTML,categoryName:r?r.innerHTML:null})}),t},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(227),i=n(225),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.tagHelper=e,this.name="CoreCourseModulesTagAreaHandler",this.type="core/course_modules"}return e.prototype.isEnabled=function(){return!0},e.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(1),l=n(4),a=n(11),s=n(55),u=n(13),c=n(38),d=n(52),f=n(6),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(e){function t(t,n,o,r,i,l,a,s){var u=e.call(this)||this;return u.sitesProvider=t,u.coursesProvider=n,u.domUtils=o,u.translate=r,u.courseProvider=i,u.textUtils=l,u.courseHelper=a,u.name="CoreCoursesCourseLinkHandler",u.pattern=/((\/enrol\/index\.php)|(\/course\/enrol\.php)|(\/course\/view\.php)).*([\?\&]id=\d+)/,u.waitStart=0,u.logger=s.getInstance("CoreCoursesCourseLinkHandler"),u}return p(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;o=parseInt(n.id,10);var i=n.sectionid?parseInt(n.sectionid,10):null,l={sectionId:i||null},a=void 0!==n.section?parseInt(n.section,10):NaN;if(!i&&!a){var s=t.match(/#section-(\d+)/);s&&s[1]&&(a=parseInt(s[1],10))}return isNaN(a)||(l.sectionNumber=a),[{action:function(e,n){if((e=e||r.sitesProvider.getCurrentSiteId())==r.sitesProvider.getCurrentSiteId()){if(r.courseProvider.currentViewIsCourse(n,o))return void r.courseProvider.selectCourseTab("",l);r.actionEnrol(o,t,l,n).catch(function(){})}else r.courseHelper.getAndOpenCourse(void 0,o,l,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return!!(o=parseInt(n.id,10))&&this.sitesProvider.getSiteHomeId(e).then(function(e){return o!=e})},t.prototype.actionEnrol=function(e,t,n,o){var r,i=this,l=this.domUtils.showModalLoading(),a=!!t.match(/(\/enrol\/index\.php)|(\/course\/enrol\.php)/);return this.coursesProvider.getUserCourse(e).then(function(e){r=e}).catch(function(){return i.canSelfEnrol(e).then(function(){l.dismiss();return(a?Promise.resolve():i.domUtils.showConfirm(i.translate.instant("core.courses.confirmselfenrol"))).then(function(){return i.selfEnrol(e).then(function(e){r=e}).catch(function(e){return e&&i.domUtils.showErrorModal(e),Promise.reject(null)})},function(){return i.courseProvider.getSections(e,!1,!0)})},function(n){return i.courseProvider.getSections(e,!1,!0).catch(function(){l.dismiss(),n&&(n=i.textUtils.getErrorMessageFromError(n)||n),n||(n=i.translate.instant("core.courses.notenroled"));var e=i.textUtils.buildSeveralParagraphsMessage([n,i.translate.instant("core.confirmopeninbrowser")]);return i.domUtils.showConfirm(e).then(function(){i.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(t)}).catch(function(){}),Promise.reject(null)})})}).then(function(){return r||i.courseHelper.getCourse(e).then(function(e){return e.course}).catch(function(){return{id:e}})}).then(function(e){l.dismiss(),void 0===o&&i.logger.warn("navCtrl was not passed to actionEnrol"),i.courseHelper.openCourse(o,e,n)})},t.prototype.canSelfEnrol=function(e){return this.coursesProvider.getCourseEnrolmentMethods(e).then(function(e){var t=!1,n=0;if(e.forEach(function(e){"self"==e.type&&e.status&&(t=!0,n++)}),!t||1!=n)return Promise.reject(null)})},t.prototype.selfEnrol=function(e,t){var n=this,o=this.domUtils.showModalLoading();return this.coursesProvider.selfEnrol(e,t).then(function(){return n.coursesProvider.invalidateUserCourses().catch(function(){}).then(function(){return n.waitForEnrolled(e,!0).finally(function(){o.dismiss()})})}).catch(function(r){if(o.dismiss(),r&&r.code===d.a.ENROL_INVALID_KEY){var i=n.translate.instant("core.courses.selfenrolment"),l=n.translate.instant("core.courses.password");return void 0!==t&&n.domUtils.showErrorModal(r),n.domUtils.showPrompt(" ",i,l).then(function(t){return n.selfEnrol(e,t)})}return Promise.reject(r)})},t.prototype.waitForEnrolled=function(e,t){var n=this;return t&&(this.waitStart=Date.now()),this.coursesProvider.invalidateUserCourses().catch(function(){}).then(function(){return n.coursesProvider.getUserCourse(e)}).catch(function(){if(!(Date.now()-n.waitStart>6e4))return new Promise(function(t,o){setTimeout(function(){n.waitForEnrolled(e).then(t)},5e3)})})},t=h([Object(o.A)(),m("design:paramtypes",[i.a,d.a,l.a,r.c,u.a,a.a,c.a,f.a])],t)}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(52),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.coursesProvider=t,o.linkHelper=n,o.name="CoreCoursesIndexLinkHandler",o.featureName="CoreMainMenuDelegate_CoreCourses",o.pattern=/\/course\/?(index\.php.*)?$/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o="CoreCoursesMyCoursesPage",i={};r.coursesProvider.isGetCoursesByFieldAvailable()&&(n.categoryid?(o="CoreCoursesCategoriesPage",i.categoryId=parseInt(n.categoryid,10)):o="CoreCoursesAvailableCoursesPage"),r.linkHelper.goInSite(t,o,i,e)}}]},t=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(125),l=n(599),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.loginHelper=t,o.mainMenuHandler=n,o.name="CoreCoursesMyOverviewLinkHandler",o.pattern=/\/my\/?$/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.loginHelper.redirect("CoreCoursesDashboardPage",void 0,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.mainMenuHandler.isEnabledForSite(e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(4),i=n(2),l=n(38),a=n(125),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.utils=e,this.domUtils=t,this.courseHelper=n,this.loginHelper=o,this.name="CoreCoursesEnrolPushClickHandler",this.priority=200}return e.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&0===e.moodlecomponent.indexOf("enrol_")&&"expiry_notification"==e.name},e.prototype.handleClick=function(e){var t=this,n=Number(e.courseid),o=this.domUtils.showModalLoading();return this.courseHelper.getCourse(n,e.site).then(function(n){var o,r={course:n.course};return e.contexturl&&-1!=e.contexturl.indexOf("user/index.php")?(o="CoreCourseSectionPage",r.selectedTab="CoreUserParticipants"):o=n.enrolled?"CoreCourseSectionPage":"CoreCoursesCoursePreviewPage",t.loginHelper.redirect(o,r,e.site)}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error getting course.")}).finally(function(){o.dismiss()})},e=s([Object(o.A)(),u("design:paramtypes",[i.a,r.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(1),i=n(4),l=n(11),a=n(2),s=n(52),u=n(38),c=n(125),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i,l){this.utils=e,this.domUtils=t,this.sitesProvider=n,this.courseHelper=o,this.loginHelper=r,this.textUtils=i,this.coursesProvider=l,this.name="CoreCoursesRequestPushClickHandler",this.priority=200,this.SUPPORTED_NAMES=["courserequested","courserequestapproved","courserequestrejected"]}return e.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"moodle"==e.moodlecomponent&&("courserequested"==e.name||"courserequestapproved"==e.name)},e.prototype.handleClick=function(e){var t=this,n=Number(e.courseid);if("courserequested"==e.name)return this.sitesProvider.getSite(e.site).then(function(e){var n=t.textUtils.concatenatePaths(e.getURL(),"course/pending.php");return e.openInBrowserWithAutoLogin(n)});var o=this.domUtils.showModalLoading();return this.coursesProvider.invalidateUserCourses(e.site).catch(function(){}).then(function(){return t.courseHelper.getCourse(n,e.site)}).then(function(n){var o;return o=n.enrolled?"CoreCourseSectionPage":"CoreCoursesCoursePreviewPage",t.loginHelper.redirect(o,{course:n.course},e.site)}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error getting course.")}).finally(function(){o.dismiss()})},e=d([Object(o.A)(),f("design:paramtypes",[a.a,i.a,r.a,u.a,c.a,l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(10),i=n(2),l=n(149),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.appProvider=e,this.utils=t,this.uploaderHelper=n,this.name="CoreFileUploaderAlbum",this.priority=2e3}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()},e.prototype.getSupportedMimetypes=function(e){return this.utils.filterByRegexp(e,/^(image|video)\//)},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.photoalbums",class:"core-fileuploader-album-handler",icon:"images",action:function(t,n,o,r){return e.uploaderHelper.uploadImage(!0,t,n,r).then(function(e){return{treated:!0,result:e}})}}},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(10),l=n(2),a=n(149),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.appProvider=e,this.utils=t,this.platform=n,this.uploaderHelper=o,this.name="CoreFileUploaderAudio",this.priority=1600}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()&&this.appProvider.canRecordMedia()},e.prototype.getSupportedMimetypes=function(e){if(this.platform.is("ios"))return this.utils.filterByRegexp(e,/^audio\/wav$/);if(this.platform.is("android"))return this.utils.filterByRegexp(e,/^audio\//);var t=window.MediaRecorder;return t?e.filter(function(e){var n=e.match(/^audio\//);return n&&n.length&&t.isTypeSupported(e)}):[]},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.audio",class:"core-fileuploader-audio-handler",icon:"microphone",action:function(t,n,o,r){return e.uploaderHelper.uploadAudioOrVideo(!0,t,n,r).then(function(e){return{treated:!0,result:e}})}}},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a,r.v,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(10),i=n(2),l=n(149),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.appProvider=e,this.utils=t,this.uploaderHelper=n,this.name="CoreFileUploaderCamera",this.priority=1800}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()},e.prototype.getSupportedMimetypes=function(e){return this.utils.filterByRegexp(e,/^image\/(jpeg|png)$/)},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.camera",class:"core-fileuploader-camera-handler",icon:"camera",action:function(t,n,o,r){return e.uploaderHelper.uploadImage(!1,t,n,r).then(function(e){return{treated:!0,result:e}})}}},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(10),l=n(4),a=n(24),s=n(149),u=n(72),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.appProvider=e,this.platform=t,this.timeUtils=n,this.uploaderHelper=o,this.uploaderProvider=r,this.domUtils=i,this.name="CoreFileUploaderFile",this.priority=1200}return e.prototype.isEnabled=function(){return this.platform.is("android")||!this.appProvider.isMobile()||this.platform.is("ios")&&this.platform.version().major>=9},e.prototype.getSupportedMimetypes=function(e){return e},e.prototype.getData=function(){var e=this,t=this.platform.is("ios");return{title:t?"core.fileuploader.more":"core.fileuploader.file",class:"core-fileuploader-file-handler",icon:t?"more":"folder",afterRender:function(n,o,r,i){var l=document.querySelector(".core-fileuploader-file-handler");if(l){var a=document.createElement("input");a.setAttribute("type","file"),a.classList.add("core-fileuploader-file-handler-input"),!i||!i.length||e.platform.is("android")&&1!=i.length||a.setAttribute("accept",i.join(", ")),a.addEventListener("change",function(l){var s,u=a.files[0];if(a.value="",u){var c=e.uploaderProvider.isInvalidMimetype(i,u.name,u.type);if(c)e.domUtils.showErrorModal(c);else{if(s=u.name,t){var d=s.match(/image\.(jpe?g|png)/);d&&(s="image_"+e.timeUtils.readableTimestamp()+"."+d[1])}e.uploaderHelper.uploadFileObject(u,n,o,r,s).then(function(t){e.uploaderHelper.fileUploaded(t)}).catch(function(t){t&&e.domUtils.showErrorModal(t)})}}}),e.platform.is("ios")?(l.parentElement.appendChild(a),a.addEventListener("mousedown",function(){l.classList.add("activated")}),a.addEventListener("mouseup",function(){e.platform.timeout(function(){l.classList.remove("activated")},80)})):l.appendChild(a)}}}},e=c([Object(o.A)(),d("design:paramtypes",[i.a,r.v,a.a,s.a,u.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(10),l=n(2),a=n(149),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.appProvider=e,this.utils=t,this.platform=n,this.uploaderHelper=o,this.name="CoreFileUploaderVideo",this.priority=1400}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()&&this.appProvider.canRecordMedia()},e.prototype.getSupportedMimetypes=function(e){if(this.platform.is("ios"))return this.utils.filterByRegexp(e,/^video\/quicktime$/);if(this.platform.is("android"))return this.utils.filterByRegexp(e,/^video\//);var t=window.MediaRecorder;return t?e.filter(function(e){var n=e.match(/^video\//);return n&&n.length&&t.isTypeSupported(e)}):[]},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.video",class:"core-fileuploader-video-handler",icon:"videocam",action:function(t,n,o,r){return e.uploaderHelper.uploadAudioOrVideo(!1,t,n,r).then(function(e){return{treated:!0,result:e}})}}},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a,r.v,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(168),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.gradesProvider=e,this.name="CoreGrades",this.priority=600}return e.prototype.isEnabled=function(){return this.gradesProvider.isCourseGradesEnabled()},e.prototype.getDisplayData=function(){return{icon:"stats",title:"core.grades.grades",page:"CoreGradesCoursesPage",class:"core-grades-coursesgrades-handler"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(13),i=n(168),l=n(52),a=n(501),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.gradesProvider=e,this.coursesProvider=t,this.name="CoreGrades",this.priority=400}return e.prototype.invalidateEnabledForCourse=function(e,t,n){return t&&void 0!==t.grades?Promise.resolve():this.coursesProvider.invalidateUserCourses()},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForCourse=function(e,t,n,o){return(!t||t.type!=r.a.ACCESS_GUEST)&&(n&&void 0!==n.grades?n.grades:this.gradesProvider.isPluginEnabledForCourse(e))},e.prototype.getDisplayData=function(e,t){return{title:"core.grades.grades",class:"core-grades-course-handler",component:a.a}},e.prototype.prefetch=function(e){return this.gradesProvider.getCourseGradesTable(e.id,void 0,void 0,!0)},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(168),l=n(184),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.gradesProvider=t,o.gradesHelper=n,o.name="CoreGradesUserLinkHandler",o.pattern=/\/grade\/report(\/user)?\/index.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o,r){var i=this;return o=o||n.id,r=r||{},[{action:function(e,t){var l=n.userid&&parseInt(n.userid,10),a=r.cmid&&parseInt(r.cmid,10);i.gradesHelper.goToGrades(o,l,a,t,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return!(!o&&!n.id)&&this.gradesProvider.isPluginEnabledForCourse(o||n.id,e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(168),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.gradesProvider=n,o.name="CoreGradesOverviewLinkHandler",o.pattern=/\/grade\/report\/overview\/index.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"CoreGradesCoursesPage",void 0,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.gradesProvider.isCourseGradesEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(104),i=n(1),l=n(15),a=n(168),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.linkHelper=e,this.sitesProvider=t,this.gradesProvider=n,this.name="CoreGrades:viewGrades",this.priority=400,this.type=r.a.TYPE_NEW_PAGE,this.viewGradesEnabledCache={}}return e.prototype.clearViewGradesCache=function(e,t){e&&t?delete this.viewGradesEnabledCache[this.getCacheKey(e,t)]:this.viewGradesEnabledCache={}},e.prototype.getCacheKey=function(e,t){return e+"#"+t},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForUser=function(e,t,n,o){var r=this,i=this.getCacheKey(t,e.id),l=this.viewGradesEnabledCache[i];return void 0!==l?l:this.gradesProvider.isPluginEnabledForCourse(t).then(function(){return r.gradesProvider.getCourseGradesTable(t,e.id).then(function(){return r.viewGradesEnabledCache[i]=!0,!0}).catch(function(){return r.viewGradesEnabledCache[i]=!1,!1})})},e.prototype.getDisplayData=function(e,t){var n=this;return{icon:"stats",title:"core.grades.grades",class:"core-grades-user-handler",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation();n.linkHelper.goInSite(t,"CoreGradesCoursePage",{courseId:r,userId:o.id})}}},e=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(31),s=n(604),u=n(26),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e=c([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,a.a,l.b.forChild(),u.a],providers:[],exports:[s.a],entryComponents:[s.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(57),i=n(66),l=n(11),a=n(22),s=n(2),u=n(359),c=n(3),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},m=function(){function e(e,t,n,o,r,i,l){this.urlUtils=e,this.mimeUtils=t,this.textUtils=n,this.utils=o,this.fileProvider=r,this.h5pProvider=i,this.translate=l,this.name="CoreH5PPluginFileHandler"}return e.prototype.fileDeleted=function(e,t,n){return this.h5pProvider.deleteContentByUrl(e,n)},e.prototype.getDownloadableFile=function(e,t){return this.h5pProvider.getTrustedH5PFile(e.fileurl,{},!1,t)},e.prototype.getDownloadableFilesFromHTML=function(e){for(var t=Array.from(e.querySelectorAll("iframe.h5p-iframe")),n=[],o=0;o<t.length;o++){var r=this.urlUtils.extractUrlParams(t[o].src);r.url&&n.push(r.url)}return n},e.prototype.getFileSize=function(e,t){var n=this;return this.h5pProvider.getTrustedH5PFile(e.fileurl,{},!1,t).then(function(e){return e.filesize}).catch(function(e){return n.utils.isWebServiceError(e)?0:Promise.reject(e)})},e.prototype.isEnabled=function(){return this.h5pProvider.canGetTrustedH5PFileInSite()},e.prototype.isFileDownloadable=function(e,t){return p(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.h5pProvider.isOfflineDisabled(t)];case 1:return e.sent()?[2,{downloadable:!1,reason:this.translate.instant("core.h5p.offlinedisabled")}]:[2,{downloadable:!0}]}})})},e.prototype.shouldHandleFile=function(e){return"h5p"==this.mimeUtils.guessExtensionFromUrl(e.fileurl)},e.prototype.treatDownloadedFile=function(e,t,n){return this.h5pProvider.extractH5PFile(e,t,n)},e=d([Object(o.A)(),f("design:paramtypes",[a.a,i.a,l.a,s.a,r.a,u.a,c.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.sitesProvider=e,this.name="CoreLoginCronHandler"}return e.prototype.execute=function(e){var t=this;return(e=e||this.sitesProvider.getCurrentSiteId())?this.sitesProvider.getSite(e).then(function(e){return e.getPublicConfig().catch(function(){return{}}).then(function(e){t.sitesProvider.checkRequiredMinimumVersion(e).catch(function(){})})}):Promise.resolve()},e.prototype.isSync=function(){return!0},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){this.name="CoreQuestionBase",this.type="base"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e,t){},e.prototype.getBehaviour=function(e,t){return t},e.prototype.getPreventSubmitMessage=function(e){return""},e.prototype.isCompleteResponse=function(e,t){return-1},e.prototype.isGradableResponse=function(e,t){return-1},e.prototype.isSameResponse=function(e,t,n){return!1},e.prototype.prepareAnswers=function(e,t,n,o){},e.prototype.validateSequenceCheck=function(e,t){return e.sequencecheck==t},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e){this.questionProvider=e,this.name="CoreQuestionBehaviourBase",this.type="base"}return e.prototype.determineNewState=function(e,t,n,o){return this.questionProvider.getState(n.state)},e.prototype.handleQuestion=function(e,t){},e.prototype.isEnabled=function(){return!0},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(5),i=n(502),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.sharedFilesHelper=e,this.platform=t,this.name="CoreSharedFilesUpload",this.priority=1300}return e.prototype.isEnabled=function(){return this.platform.is("ios")},e.prototype.getSupportedMimetypes=function(e){return e},e.prototype.getData=function(){var e=this;return{title:"core.sharedfiles.sharedfiles",class:"core-sharedfiles-fileuploader-handler",icon:"folder",action:function(t,n,o,r){return e.sharedFilesHelper.pickSharedFile(r)}}},e=l([Object(o.A)(),a("design:paramtypes",[i.a,r.v])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(1),i=n(55),l=n(15),a=n(232),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this)||this;return r.sitesProvider=t,r.siteHomeProvider=n,r.linkHelper=o,r.name="CoreSiteHomeIndexLinkHandler",r.featureName="CoreMainMenuDelegate_CoreSiteHome",r.pattern=/\/course\/view\.php.*([\?\&]id=\d+)/,r}return s(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"CoreSiteHomeIndexPage",void 0,e)}}]},t.prototype.isEnabled=function(e,t,n,o){var r=this;return!!(o=parseInt(n.id,10))&&this.sitesProvider.getSite(e).then(function(t){return o==t.getSiteHomeId()&&r.siteHomeProvider.isAvailable(e).then(function(){return!0}).catch(function(){return!1})})},t=u([Object(o.A)(),c("design:paramtypes",[r.a,a.a,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(104),i=n(1),l=n(2),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.sitesProvider=e,this.utils=t,this.name="CoreUserProfileMail",this.priority=700,this.type=r.a.TYPE_COMMUNICATION}return e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForUser=function(e,t,n,o){return e.id!=this.sitesProvider.getCurrentSite().getUserId()&&!!e.email},e.prototype.getDisplayData=function(e,t){var n=this;return{icon:"mail",title:"core.user.sendemail",class:"core-user-profile-mail",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),n.utils.openInBrowser("mailto:"+o.email)}}},e=a([Object(o.A)(),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(55),i=n(15),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this)||this;return n.linkHelper=t,n.name="CoreUserProfileLinkHandler",n.pattern=/((\/user\/view\.php)|(\/user\/profile\.php)).*([\?\&]id=\d+)/,n}return l(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o={courseId:n.course,userId:parseInt(n.id,10)};r.linkHelper.goInSite(t,"CoreUserProfilePage",o,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return-1==t.indexOf("/grade/report/")},t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(13),i=n(46),l=n(527),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.userProvider=e,this.name="CoreUserParticipants",this.priority=600}return e.prototype.invalidateEnabledForCourse=function(e,t,n){return t&&void 0!==t.participants?Promise.resolve():this.userProvider.invalidateParticipantsList(e)},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForCourse=function(e,t,n,o){return(!t||t.type!=r.a.ACCESS_GUEST)&&(n&&void 0!==n.participants?n.participants:this.userProvider.isPluginEnabledForCourse(e))},e.prototype.getDisplayData=function(e,t){return{title:"core.user.participants",class:"core-user-participants-handler",component:l.a}},e.prototype.prefetch=function(e){return this.getParticipantsPage(e.id,0)},e.prototype.getParticipantsPage=function(e,t){var n=this;return this.userProvider.getParticipants(e,t,void 0,void 0,!0).then(function(o){if(o.canLoadMore)return n.getParticipantsPage(e,t+o.participants.length)})},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(4),i=n(55),l=n(13),a=n(38),s=n(15),u=n(46),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this)||this;return l.userProvider=t,l.courseHelper=n,l.domUtils=o,l.linkHelper=r,l.courseProvider=i,l.name="CoreUserParticipants",l.featureName="CoreCourseOptionsDelegate_CoreUserParticipants",l.pattern=/\/user\/index\.php/,l}return c(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=parseInt(n.id,10)||o,[{action:function(e,t){if(r.courseProvider.currentViewIsCourse(t,o))r.courseProvider.selectCourseTab("CoreUserParticipants");else{var n=r.domUtils.showModalLoading();r.courseHelper.getCourse(o,e).then(function(n){return r.linkHelper.goInSite(t,"CoreCourseSectionPage",{course:n.course,selectedTab:"CoreUserParticipants"},e).catch(function(){})}).catch(function(){return r.linkHelper.goInSite(t,"CoreUserParticipantsPage",{courseId:o},e)}).finally(function(){n.dismiss()})}}}]},t.prototype.isEnabled=function(e,t,n,o){return!(!(o=parseInt(n.id,10)||o)||-1!=t.indexOf("/grade/report/"))&&this.userProvider.isPluginEnabledForCourse(o,e)},t=d([Object(o.A)(),f("design:paramtypes",[u.a,a.a,r.a,s.a,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(615),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.userSync=e,this.name="CoreUserSyncCronHandler"}return e.prototype.execute=function(e,t){return this.userSync.syncPreferences(e)},e.prototype.getInterval=function(){return 3e5},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(4),i=n(614),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.domUtils=e,this.name="CoreUserTagAreaHandler",this.type="core/user"}return e.prototype.isEnabled=function(){return!0},e.prototype.parseContent=function(e){var t=[],n=this.domUtils.convertToElement(e);return Array.from(n.querySelectorAll("div.user-box")).forEach(function(e){var n={},o=e.querySelector("a:first-child");if(o){var r=(o.getAttribute("href")||"").match(/.*\/user\/(?:profile|view)\.php\?id=(\d+)/);if(r){n.id=parseInt(r[1],10);var i=o.querySelector("img.userpicture");n.profileimageurl=i?i.getAttribute("src"):"",n.fullname=e.innerText,t.push(n)}}}),t},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(136),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.pushNotificationsProvider=e,this.name="CorePushNotificationsRegisterCronHandler"}return e.prototype.canManualSync=function(){return!0},e.prototype.execute=function(e){return e&&this.pushNotificationsProvider.canRegisterOnMoodle()?this.pushNotificationsProvider.registerDeviceOnMoodle(e,!0):Promise.resolve()},e.prototype.getInterval=function(){return 864e5},e.prototype.isSync=function(){return!1},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(136),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.pushNotificationsProvider=e,this.name="CorePushNotificationsUnregisterCronHandler"}return e.prototype.execute=function(e){return this.pushNotificationsProvider.retryUnregisters(e)},e.prototype.getInterval=function(){return 3e5},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(104),i=n(284),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.badgesProvider=e,this.name="AddonBadges",this.priority=50,this.type=r.a.TYPE_NEW_PAGE}return e.prototype.isEnabled=function(){return this.badgesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){return!n||void 0===n.badges||n.badges},e.prototype.getDisplayData=function(e,t){return{icon:"trophy",title:"addon.badges.badges",class:"",action:function(e,t,n,o){e.preventDefault(),e.stopPropagation(),t.push("AddonBadgesUserBadgesPage",{courseId:o,userId:n.id})}}},e=l([Object(o.A)(),a("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(284),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.badgesProvider=t,o.linkHelper=n,o.name="AddonBadgesMyBadgesLinkHandler",o.featureName="CoreUserDelegate_AddonBadges",o.pattern=/\/badges\/mybadges\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"AddonBadgesUserBadgesPage",{},e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.badgesProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(284),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.badgesProvider=t,o.linkHelper=n,o.name="AddonBadgesBadgeLinkHandler",o.pattern=/\/badges\/badge\.php.*([\?\&]hash=)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"AddonBadgesIssuedBadgePage",{courseId:0,badgeHash:n.hash},e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.badgesProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(2),i=n(125),l=n(284),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.utils=e,this.badgesProvider=t,this.loginHelper=n,this.name="AddonBadgesPushClickHandler",this.priority=200,this.featureName="CoreUserDelegate_AddonBadges"}return e.prototype.handles=function(e){var t=e.customdata||{};return!(!this.utils.isTrueOrOne(e.notif)||"moodle"!=e.moodlecomponent||!("badgerecipientnotice"==e.name||"badgecreatornotice"==e.name&&t.hash))&&this.badgesProvider.isPluginEnabled(e.site)},e.prototype.handleClick=function(e){var t=this,n=e.customdata||{};return n.hash?this.loginHelper.redirect("AddonBadgesIssuedBadgePage",{courseId:0,badgeHash:n.hash},e.site):this.badgesProvider.invalidateUserBadges(0,Number(e.usertoid),e.site).catch(function(){}).then(function(){return t.loginHelper.redirect("AddonBadgesUserBadgesPage",{},e.site)})},e=a([Object(o.A)(),s("design:paramtypes",[r.a,l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(186),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.calendarProvider=e,this.name="AddonCalendar",this.priority=900}return e.prototype.isEnabled=function(){return!this.calendarProvider.isCalendarDisabledInSite()},e.prototype.getDisplayData=function(){return{icon:"calendar",title:"addon.calendar.calendar",page:this.calendarProvider.canViewMonthInSite()?"AddonCalendarIndexPage":"AddonCalendarListPage",class:"addon-calendar-handler"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(478),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.calendarSync=e,this.name="AddonCalendarSyncCronHandler"}return e.prototype.execute=function(e,t){return this.calendarSync.syncAllEvents(e,t)},e.prototype.getInterval=function(){return this.calendarSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(186),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.calendarProvider=n,o.name="AddonCalendarViewLinkHandler",o.pattern=/\/calendar\/view\.php/,o.SUPPORTED_VIEWS=["month","mini","minithree","day","upcoming","upcoming_mini"],o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){if(n.view&&"month"!=n.view&&"mini"!=n.view&&"minithree"!=n.view){if("day"==n.view){o={courseId:n.course},i=n.time?1e3*n.time:Date.now(),l=new Date(i);o.year=l.getFullYear(),o.month=l.getMonth()+1,o.day=l.getDate(),r.linkHelper.goInSite(t,"AddonCalendarDayPage",o,e)}else if("upcoming"==n.view||"upcoming_mini"==n.view){r.linkHelper.goInSite(t,"AddonCalendarIndexPage",o={courseId:n.course,upcoming:!0},e)}}else{var o={courseId:n.course},i=n.time?1e3*n.time:Date.now(),l=new Date(i);o.year=l.getFullYear(),o.month=l.getMonth()+1,r.linkHelper.goInSite(t,"AddonCalendarIndexPage",o,e)}}}]},t.prototype.isEnabled=function(e,t,n,o){var r=this;return(!n.view||-1!=this.SUPPORTED_VIEWS.indexOf(n.view))&&this.calendarProvider.isDisabled(e).then(function(t){return!t&&r.calendarProvider.canViewMonth(e)})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(13),i=n(525),l=n(165),a=n(32),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.competencyProvider=e,this.filterHelper=t,this.name="AddonCompetency",this.priority=300}return e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForCourse=function(e,t,n,o){return(!t||t.type!=r.a.ACCESS_GUEST)&&(n&&void 0!==n.competencies?n.competencies:this.competencyProvider.isPluginForCourseEnabled(e).then(function(e){return!!e&&!e.canmanagecoursecompetencies}))},e.prototype.getDisplayData=function(e,t){return{title:"addon.competency.competencies",class:"addon-competency-course-handler",component:i.a}},e.prototype.invalidateEnabledForCourse=function(e,t,n){return t&&void 0!==t.competencies?Promise.resolve():this.competencyProvider.invalidateCourseCompetencies(e)},e.prototype.prefetch=function(e){var t=this;return this.competencyProvider.getCourseCompetencies(e.id,void 0,void 0,!0).then(function(n){var o=[];return n&&n.competencies&&n.competencies.forEach(function(n){o.push(t.competencyProvider.getCompetencyInCourse(e.id,n.competency.id,void 0,void 0,!0)),o.push(t.competencyProvider.getCompetencySummary(n.competency.id,void 0,void 0,!0)),n.coursemodules&&n.coursemodules.forEach(function(n){o.push(t.filterHelper.getFilters("module",n.id,{courseId:e.id}))}),n.plans&&n.plans.forEach(function(e){o.push(t.filterHelper.getFilters("user",e.userid))})}),Promise.all(o)})},e=s([Object(o.A)(),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(165),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.competencyProvider=e,this.name="AddonCompetency",this.priority=500}return e.prototype.isEnabled=function(){return this.competencyProvider.getLearningPlans().then(function(e){return e.length>0})},e.prototype.getDisplayData=function(){return{icon:"map",title:"addon.competency.myplans",page:"AddonCompetencyPlanListPage",class:"addon-competency-handler"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(104),i=n(1),l=n(15),a=n(9),s=n(46),u=n(165),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o){this.linkHelper=e,this.sitesProvider=t,this.competencyProvider=n,this.name="AddonCompetency:learningPlan",this.priority=900,this.type=r.a.TYPE_NEW_PAGE,this.participantsNavEnabledCache={},this.usersNavEnabledCache={},o.on(a.a.LOGOUT,this.clearUsersNavCache.bind(this)),o.on(s.a.PROFILE_REFRESHED,this.clearUsersNavCache.bind(this))}return e.prototype.clearUsersNavCache=function(){this.participantsNavEnabledCache={},this.usersNavEnabledCache={}},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForUser=function(e,t,n,o){var r=this;if(t){var i=t+"."+e.id;return void 0!==this.participantsNavEnabledCache[i]?this.participantsNavEnabledCache[i]:this.competencyProvider.getCourseCompetencies(t,e.id).then(function(e){var t=e.competencies.length>0;return r.participantsNavEnabledCache[i]=t,t}).catch(function(e){return r.participantsNavEnabledCache[i]=!1,!1})}return void 0!==this.usersNavEnabledCache[e.id]?this.usersNavEnabledCache[e.id]:this.competencyProvider.getLearningPlans(e.id).then(function(t){var n=t.length>0;return r.usersNavEnabledCache[e.id]=n,n})},e.prototype.getDisplayData=function(e,t){var n=this;return t?{icon:"ribbon",title:"addon.competency.competencies",class:"addon-competency-handler",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),n.linkHelper.goInSite(t,"AddonCompetencyCourseCompetenciesPage",{courseId:r,userId:o.id})}}:{icon:"map",title:"addon.competency.learningplans",class:"addon-competency-handler",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),n.linkHelper.goInSite(t,"AddonCompetencyPlanListPage",{userId:o.id})}}},e=c([Object(o.A)(),d("design:paramtypes",[l.a,i.a,u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(165),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.competencyProvider=n,o.name="AddonCompetencyCompetencyLinkHandler",o.pattern=/\/admin\/tool\/lp\/(user_competency_in_course|user_competency_in_plan)\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,t){r.linkHelper.goInSite(t,"AddonCompetencyCompetencyPage",{planId:n.planid,competencyId:n.competencyid,courseId:o,userId:n.userid},e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(165),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.competencyProvider=n,o.name="AddonCompetencyPlanLinkHandler",o.pattern=/\/admin\/tool\/lp\/plan\.php.*([\?\&]id=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"AddonCompetencyPlanPage",{planId:n.id},e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(165),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.competencyProvider=n,o.name="AddonCompetencyPlansLinkHandler",o.pattern=/\/admin\/tool\/lp\/plans\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"AddonCompetencyPlanListPage",{userId:n.userid},e,void 0===n.userid)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(165),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.competencyProvider=n,o.name="AddonCompetencyUserCompetencyLinkHandler",o.pattern=/\/admin\/tool\/lp\/user_competency\.php.*([\?\&]id=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"AddonCompetencyCompetencySummaryPage",{competencyId:n.id},e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(22),i=n(2),l=n(125),a=n(165),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.utils=e,this.urlUtils=t,this.competencyProvider=n,this.loginHelper=o,this.name="AddonCompetencyPushClickHandler",this.priority=200}return e.prototype.handles=function(e){return!(!this.utils.isTrueOrOne(e.notif)||"moodle"!=e.moodlecomponent||"competencyplancomment"!=e.name&&"competencyusercompcomment"!=e.name)&&this.competencyProvider.allCompetenciesDisabled(e.site).then(function(e){return!e})},e.prototype.handleClick=function(e){var t=this,n=this.urlUtils.extractUrlParams(e.contexturl);if("competencyplancomment"==e.name){var o=Number(n.id);return this.competencyProvider.invalidateLearningPlan(o,e.site).catch(function(){}).then(function(){return t.loginHelper.redirect("AddonCompetencyPlanPage",{planId:o},e.site)})}if(e.contexturl&&-1!=e.contexturl.indexOf("user_competency_in_plan.php")){var r=Number(e.course),i=Number(n.competencyid),l=Number(n.planid),a=Number(n.userid);return this.competencyProvider.invalidateCompetencyInPlan(l,i,e.site).catch(function(){}).then(function(){return t.loginHelper.redirect("AddonCompetencyCompetencyPage",{planId:l,competencyId:i,courseId:r,userId:a},e.site)})}var s=Number(n.userid);return this.competencyProvider.invalidateLearningPlans(s,e.site).catch(function(){}).then(function(){return t.loginHelper.redirect("AddonCompetencyPlanListPage",{userId:s},e.site)})},e=s([Object(o.A)(),u("design:paramtypes",[i.a,r.a,a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(389),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.filesProvider=e,this.name="AddonFiles",this.priority=400}return e.prototype.isEnabled=function(){return this.filesProvider.isPluginEnabled()},e.prototype.getDisplayData=function(){return{icon:"folder",title:"addon.files.files",page:"AddonFilesListPage",class:"addon-files-handler"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(161),i=n(1),l=n(9),a=n(10),s=n(2),u=n(151),c=n(136),d=n(144),f=n(310),p=n(32),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,i,a,s,u,c,d){var f=this;this.messagesProvider=e,this.sitesProvider=t,this.appProvider=o,this.localNotificationsProvider=i,this.filterHelper=a,this.pushNotificationsProvider=s,this.emulatorHelper=d,this.name="AddonMessages",this.priority=800,this.handler={icon:"chatbubbles",title:"addon.messages.messages",page:"AddonMessagesIndexPage",class:"addon-messages-handler",showBadge:!0,badge:"",loading:!0},this.unreadCount=0,this.contactRequestsCount=0,this.orMore=!1,n.on(r.a.UNREAD_CONVERSATION_COUNTS_EVENT,function(e){f.unreadCount=e.favourites+e.individual+e.group+e.self,f.orMore=e.orMore,f.updateBadge(e.siteId)}),n.on(r.a.CONTACT_REQUESTS_COUNT_EVENT,function(e){f.contactRequestsCount=e.count,f.updateBadge(e.siteId)}),n.on(l.a.LOGOUT,function(e){f.unreadCount=0,f.contactRequestsCount=0,f.orMore=!1,f.handler.badge="",f.handler.loading=!0}),c.on("receive").subscribe(function(e){(u.isFalseOrZero(e.notif)||"messagecontactrequests"==e.name)&&f.sitesProvider.isCurrentSite(e.site)&&f.refreshBadge(e.site)}),c.registerCounterHandler("AddonMessages")}return e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.getDisplayData=function(){return this.handler.page=this.messagesProvider.isGroupMessagingEnabled()?"AddonMessagesGroupConversationsPage":"AddonMessagesIndexPage",this.handler.loading&&this.refreshBadge(),this.handler},e.prototype.refreshBadge=function(e,t){var n=this;if(e=e||this.sitesProvider.getCurrentSiteId()){var o=[];return o.push(this.messagesProvider.refreshUnreadConversationCounts(e).catch(function(){n.unreadCount=0,n.orMore=!1})),!t&&this.messagesProvider.isGroupMessagingEnabled()&&o.push(this.messagesProvider.refreshContactRequestsCount(e).catch(function(){n.contactRequestsCount=0})),Promise.all(o).finally(function(){n.updateBadge(e),n.handler.loading=!1})}},e.prototype.updateBadge=function(e){var t=this.unreadCount+(this.contactRequestsCount||0);this.handler.badge=t>0?t+(this.orMore?"+":""):"",this.pushNotificationsProvider.updateAddonCounter("AddonMessages",t,e)},e.prototype.execute=function(e,t){return this.sitesProvider.isCurrentSite(e)&&this.refreshBadge(),this.appProvider.isDesktop()&&this.localNotificationsProvider.isAvailable()&&this.emulatorHelper.checkNewNotifications(r.a.PUSH_SIMULATION_COMPONENT,this.fetchMessages.bind(this),this.getTitleAndText.bind(this),e),Promise.resolve()},e.prototype.getInterval=function(){return this.appProvider.isDesktop()?6e4:this.messagesProvider.isGroupMessagingEnabled()||this.messagesProvider.isMessageCountEnabled()?3e5:6e5},e.prototype.isSync=function(){return!!this.appProvider.isDesktop()||!this.messagesProvider.isMessageCountEnabled()&&!this.messagesProvider.isGroupMessagingEnabled()},e.prototype.canManualSync=function(){return!0},e.prototype.fetchMessages=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(n){return n.isVersionGreaterEqualThan("3.7")?t.messagesProvider.getConversations(void 0,void 0,0,n.id,void 0,!1,!0).then(function(e){var t=e.conversations.find(function(e){return!e.ismuted});if(t.isread)return[];var o=n.getUserId(),r=t.messages[0];if(!r||r.useridfrom==o)return[];r.contexturl="",r.contexturlname="",r.convid=t.id,r.fullmessage=r.text,r.fullmessageformat=0,r.fullmessagehtml="",r.notification=0,r.read=0,r.smallmessage=r.smallmessage||r.text,r.subject=t.name,r.timecreated=1e3*r.timecreated,r.timeread=0,r.useridto=o,r.usertofullname=n.getInfo().fullname;var i=t.members.find(function(e){return e.id==r.useridfrom});return r.userfromfullname=i&&i.fullname,[r]}):t.messagesProvider.getUnreadReceivedMessages(!0,!1,!0,e).then(function(e){return e.messages})})},e.prototype.getTitleAndText=function(e){var t={title:e.name||e.userfromfullname};return this.filterHelper.getFiltersAndFormatText(e.text,"system",0,{clean:!0,singleLine:!0}).catch(function(){return{text:e.text}}).then(function(e){return t.text=e.text,t})},e=h([Object(o.A)(),m("design:paramtypes",[r.a,i.a,l.a,a.a,u.a,p.a,c.a,s.a,d.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(104),i=n(1),l=n(15),a=n(161),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.linkHelper=e,this.sitesProvider=t,this.messagesProvider=n,this.name="AddonMessages:sendMessage",this.priority=1e3,this.type=r.a.TYPE_COMMUNICATION}return e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){var r=this.sitesProvider.getCurrentSite();return!!r&&(e.id!=r.getUserId()||r.isVersionGreaterEqualThan("3.7"))},e.prototype.getDisplayData=function(e,t){var n=this;return{icon:"send",title:"addon.messages.message",class:"addon-messages-send-message-handler",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation();n.linkHelper.goInSite(t,"AddonMessagesDiscussionPage",{showKeyboard:!0,userId:o.id})}}},e=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(161),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.messagesProvider=n,o.name="AddonMessagesContactRequestLinkHandler",o.pattern=/\/message\/pendingcontactrequests\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.linkHelper.goInSite(t,"AddonMessagesContactsPage",{},e)}}]},t.prototype.isEnabled=function(e,t,n,o){var r=this;return this.messagesProvider.isPluginEnabled(e).then(function(e){return!!e&&r.messagesProvider.isGroupMessagingEnabled()})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(55),i=n(15),l=n(161),a=n(1),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this)||this;return r.linkHelper=t,r.messagesProvider=n,r.sitesProvider=o,r.name="AddonMessagesDiscussionLinkHandler",r.pattern=/\/message\/index\.php.*([\?\&](id|user1|user2)=\d+)/,r}return s(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o={userId:parseInt(n.id||n.user2,10)};r.linkHelper.goInSite(t,"AddonMessagesDiscussionPage",o,e)}}]},t.prototype.isEnabled=function(e,t,n,o){var r=this;return this.messagesProvider.isPluginEnabled(e).then(function(t){return!!t&&((void 0!==n.id||void 0!==n.user2)&&(void 0===n.user1||r.sitesProvider.getSite(e).then(function(e){return parseInt(n.user1,10)==e.getUserId()})))})},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(161),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.messagesProvider=n,o.name="AddonMessagesIndexLinkHandler",o.pattern=/\/message\/index\.php((?![\?\&](id|user1|user2)=\d+).)*$/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var n="AddonMessagesIndexPage";r.messagesProvider.isGroupMessagingEnabled()&&(n="AddonMessagesGroupConversationsPage"),r.linkHelper.goInSite(t,n,void 0,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.messagesProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(503),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.messagesSync=e,this.name="AddonMessagesSyncCronHandler"}return e.prototype.execute=function(e,t){return this.messagesSync.syncAllDiscussions(e)},e.prototype.getInterval=function(){return 3e5},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(2),i=n(125),l=n(161),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.utils=e,this.messagesProvider=t,this.loginHelper=n,this.name="AddonMessagesPushClickHandler",this.priority=200,this.featureName="CoreMainMenuDelegate_AddonMessages"}return e.prototype.handles=function(e){return(!this.utils.isTrueOrOne(e.notif)||"messagecontactrequests"==e.name)&&this.messagesProvider.isPluginEnabled(e.site)},e.prototype.handleClick=function(e){var t=this;return this.messagesProvider.invalidateDiscussionsCache(e.site).catch(function(){}).then(function(){return t.messagesProvider.isGroupMessagingEnabledInSite(e.site).then(function(n){var o={},r="AddonMessagesIndexPage";return n&&(r="AddonMessagesGroupConversationsPage"),e.convid&&n?o.conversationId=Number(e.convid):e.userfromid&&(o.discussionUserId=Number(e.userfromid)),t.loginHelper.redirect(r,o,e.site)})})},e=a([Object(o.A)(),s("design:paramtypes",[r.a,l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(161),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.messagesProvider=e,this.name="AddonMessages",this.priority=600}return e.prototype.isEnabled=function(){return this.messagesProvider.isMessagePreferencesEnabled()},e.prototype.getDisplayData=function(){return{icon:"chatbubbles",title:"addon.messages.messages",page:"AddonMessagesSettingsPage",class:"addon-messages-settings-handler"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(13),i=n(77),l=n(733),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.assignProvider=t,this.name="AddonModAssign",this.modName="assign",this.supportedFeatures=(n={},n[a.a.FEATURE_GROUPS]=!0,n[a.a.FEATURE_GROUPINGS]=!0,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!0,n[a.a.FEATURE_GRADE_OUTCOMES]=!0,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n[a.a.FEATURE_ADVANCED_GRADING]=!0,n[a.a.FEATURE_PLAGIARISM]=!0,n[a.a.FEATURE_COMMENT]=!0,n);var n}return e.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_assign-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModAssignIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return l.a},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(71),s=n(1),u=n(4),c=n(11),d=n(2),f=n(142),p=n(13),h=n(38),m=n(184),_=n(46),g=n(77),v=n(183),y=n(317),b=n(152),P=n(166),O=n(32),E=n(56),C=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},R=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=function(t){function n(e,n,o,r,i,l,a,s,u,c,d,f,p,h,m,_,v,y,b){var P=t.call(this,e,n,o,r,i,l,a,s,u)||this;return P.assignProvider=c,P.textUtils=d,P.feedbackDelegate=f,P.submissionDelegate=p,P.courseHelper=h,P.groupsProvider=m,P.gradesHelper=_,P.userProvider=v,P.assignHelper=y,P.syncProvider=b,P.name="AddonModAssign",P.modName="assign",P.component=g.a.COMPONENT,P.updatesNames=/^configuration$|^.*files$|^submissions$|^grades$|^gradeitems$|^outcomes$|^comments$/,P}return C(n,t),n.prototype.canUseCheckUpdates=function(e,t){var n=this;return this.assignProvider.getAssignment(t,e.id).then(function(e){return n.assignProvider.getSubmissions(e.id).then(function(t){return!t.canviewsubmissions&&n.assignProvider.getSubmissionStatus(e.id).then(function(){return!0})})}).catch(function(){return!1})},n.prototype.getFiles=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.assignProvider.getAssignment(t,e.id,!1,o).then(function(t){var n=t.introattachments||[];return n=n.concat(r.getIntroFilesFromInstance(e,t)),r.assignProvider.getSubmissions(t.id,!1,o).then(function(e){var i=t.blindmarking&&!t.revealidentities;if(e.canviewsubmissions)return r.assignHelper.getSubmissionsUserData(t,e.submissions,0,!1,o).then(function(e){var i=[];return e.forEach(function(e){i.push(r.getSubmissionFiles(t,e.submitid,!!e.blindid,o).then(function(e){n=n.concat(e)}).catch(function(e){return e&&"nopermission"==e.errorcode?Promise.resolve():Promise.reject(e)}))}),Promise.all(i).then(function(){return n})});var l=r.sitesProvider.getCurrentSiteUserId();return r.getSubmissionFiles(t,l,i,o).then(function(e){return n=n.concat(e)})})}).catch(function(){return[]})},n.prototype.getSubmissionFiles=function(e,t,n,o){var r=this;return this.assignProvider.getSubmissionStatusWithRetry(e,t,void 0,n,!0,!1,o).then(function(t){var n,i=[];return t.lastattempt&&(n=r.assignProvider.getSubmissionObjectFromAttempt(e,t.lastattempt))&&n.plugins&&n.plugins.forEach(function(t){i.push(r.submissionDelegate.getPluginFiles(e,n,t,o))}),t.feedback&&t.feedback.plugins&&t.feedback.plugins.forEach(function(t){i.push(r.feedbackDelegate.getPluginFiles(e,n,t,o))}),Promise.all(i)}).then(function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t})},n.prototype.invalidateContent=function(e,t){return this.assignProvider.invalidateContent(e,t)},n.prototype.invalidateModule=function(e,t){return this.assignProvider.invalidateAssignmentData(t)},n.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},n.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchAssign.bind(this))},n.prototype.prefetchAssign=function(e,t,n,o){var r=this,i=this.sitesProvider.getCurrentSiteUserId(),l=[];return o=o||this.sitesProvider.getCurrentSiteId(),l.push(this.assignProvider.getAssignment(t,e.id,!0,o).then(function(n){var l=[];n.blindmarking&&!n.revealidentities&&l.push(r.assignProvider.getAssignmentUserMappings(n.id,void 0,!0,o).catch(function(){})),l.push(r.prefetchSubmissions(n,t,e.id,i,o)),l.push(r.courseHelper.getModuleCourseIdByInstance(n.id,"assign",o));var a=n.introattachments||[];return a=a.concat(r.getIntroFilesFromInstance(e,n)),l.push(r.filepoolProvider.addFilesToQueue(o,a,r.component,e.id)),Promise.all(l)})),Promise.all(l)},n.prototype.prefetchSubmissions=function(e,t,n,o,r){var i=this;return this.assignProvider.getSubmissions(e.id,!0,r).then(function(l){var a=[];return a.push(i.groupsProvider.getActivityGroupInfo(e.cmid,!1,void 0,r).then(function(a){if(l.canviewsubmissions){var s=[];return a.groups&&0!=a.groups.length||(a.groups=[{id:0}]),a.groups.forEach(function(a){s.push(i.assignHelper.getSubmissionsUserData(e,l.submissions,a.id,!0,r).then(function(s){var u=[];return s.forEach(function(o){u.push(i.assignProvider.getSubmissionStatusWithRetry(e,o.submitid,a.id,!!o.blindid,!0,!0,r).then(function(l){return i.prefetchSubmission(e,t,n,l,o.submitid,r)}).catch(function(e){return e&&"nopermission"==e.errorcode?Promise.resolve():Promise.reject(e)}))}),e.markingworkflow||u.push(i.assignProvider.getAssignmentGrades(e.id,!0,r)),l.submissions&&l.submissions.find(function(e){return e.submitid==o})||u.push(i.assignProvider.getSubmissionStatusWithRetry(e,o,a.id,!1,!0,!0,r).then(function(l){return i.prefetchSubmission(e,t,n,l,o,r)})),Promise.all(u)}).then(function(){return i.assignHelper.getParticipants(e,a.id,!1,r).then(function(e){var t=[];return e.forEach(function(e){e.profileimageurl&&t.push(i.filepoolProvider.addToQueueByUrl(r,e.profileimageurl))}),Promise.all(t)}).catch(function(){})}))}),Promise.all(s)}})),a.push(i.assignProvider.getSubmissionStatusWithRetry(e,o,void 0,!1,!0,!0,r).then(function(l){return i.prefetchSubmission(e,t,n,l,o,r)}).catch(function(e){if("nopermission"!=e.errorcode)return Promise.reject(e)})),Promise.all(a)})},n.prototype.prefetchSubmission=function(t,n,o,r,i,l){var a,s=this,u=[],c=t.blindmarking&&!t.revealidentities,d=[];return r.lastattempt&&(a=this.assignProvider.getSubmissionObjectFromAttempt(t,r.lastattempt),!c&&r.lastattempt.submissiongroupmemberswhoneedtosubmit&&(d=d.concat(r.lastattempt.submissiongroupmemberswhoneedtosubmit)),a&&a.id&&(a.plugins&&a.plugins.forEach(function(n){u.push(s.submissionDelegate.prefetch(t,a,n,l)),u.push(s.submissionDelegate.getPluginFiles(t,a,n,l).then(function(t){return s.filepoolProvider.addFilesToQueue(l,t,s.component,e.i)}).catch(function(){}))}),a.userid&&d.push(a.userid))),i&&u.push(this.courseProvider.getModuleBasicGradeInfo(o,l).then(function(e){e&&u.push(s.gradesHelper.getGradeModuleItems(n,o,i,void 0,l,!0))})),r.feedback&&(r.feedback.grade&&r.feedback.grade.grader>0&&d.push(r.feedback.grade.grader),r.feedback.plugins&&r.feedback.plugins.forEach(function(n){u.push(s.feedbackDelegate.prefetch(t,a,n,l)),u.push(s.feedbackDelegate.getPluginFiles(t,a,n,l).then(function(t){return s.filepoolProvider.addFilesToQueue(l,t,s.component,e.i)}).catch(function(){}))})),u.push(this.userProvider.prefetchProfiles(d,n,l)),Promise.all(u)},n.prototype.sync=function(e,t,n){return this.syncProvider.syncAssign(e.instance,n)},n=I([Object(o.A)(),R("design:paramtypes",[r.c,i.a,d.a,p.a,l.a,s.a,u.a,O.a,E.a,g.a,c.a,b.a,P.a,h.a,a.a,m.a,_.a,v.a,y.a])],n)}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(317),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.assignSync=e,this.name="AddonModAssignSyncCronHandler"}return e.prototype.execute=function(e,t){return this.assignSync.syncAllAssignments(e,t)},e.prototype.getInterval=function(){return this.assignSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModAssign","assign")||this;return n.name="AddonModAssignIndexLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(77),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModAssign","assign")||this;return r.assignProvider=o,r.name="AddonModAssignListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(22),i=n(2),l=n(38),a=n(77),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.utils=e,this.assignProvider=t,this.urlUtils=n,this.courseHelper=o,this.name="AddonModAssignPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModAssign"}return e.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"mod_assign"==e.moodlecomponent&&"assign_notification"==e.name},e.prototype.handleClick=function(e){var t=this,n=this.urlUtils.extractUrlParams(e.contexturl),o=Number(e.courseid),r=Number(n.id);return this.assignProvider.invalidateContent(r,o,e.site).catch(function(){}).then(function(){return t.courseHelper.navigateToModule(r,e.site,o)})},e=s([Object(o.A)(),u("design:paramtypes",[i.a,a.a,r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1153),i=n(1155),l=n(1156),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=function(){function e(){}return e=a([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1154),s=n(633),u=n(166),c=n(374),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),c.a],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),f("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(153),i=n(633),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.commentsProvider=e,this.name="AddonModAssignSubmissionCommentsHandler",this.type="comments"}return e.prototype.canEditOffline=function(e,t,n){return!0},e.prototype.getComponent=function(e,t,n){return n?void 0:i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){return!0},e.prototype.prefetch=function(e,t,n,o){return this.commentsProvider.getComments("module",e.cmid,"assignsubmission_comments",t.id,"submission_comments",0,o).catch(function(){})},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(635),s=n(636),u=n(166),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),p("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1157),s=n(637),u=n(166),c=n(26),d=n(31),f=n(214),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t){e.registerHandler(t)}return e=p([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a,f.a],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),h("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(1),l=n(115),a=n(11),s=n(77),u=n(133),c=n(183),d=n(637),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},_=function(){function e(e,t,n,o,r,i,l){this.translate=e,this.sitesProvider=t,this.fileHelper=n,this.textUtils=o,this.assignProvider=r,this.assignOfflineProvider=i,this.assignHelper=l,this.name="AddonModAssignSubmissionOnlineTextHandler",this.type="onlinetext"}return e.prototype.canEditOffline=function(e,t,n){return!1},e.prototype.isEmpty=function(e,t){return 0===this.assignProvider.getSubmissionPluginText(t,!0).trim().length},e.prototype.copySubmissionData=function(e,t,n,o,r){var i=this.assignProvider.getSubmissionPluginText(t,!0),l=this.assignProvider.getSubmissionPluginAttachments(t);return(l.length?this.assignHelper.uploadFiles(e.id,l,r):Promise.resolve(0)).then(function(e){n.onlinetext_editor={text:i,format:1,itemid:e}})},e.prototype.getComponent=function(e,t,n){return d.a},e.prototype.getPluginFiles=function(e,t,n,o){return this.assignProvider.getSubmissionPluginAttachments(n)},e.prototype.getSizeForCopy=function(e,t){return h(this,void 0,void 0,function(){var e,n,o;return m(this,function(r){switch(r.label){case 0:return e=this.assignProvider.getSubmissionPluginText(t,!0),n=this.assignProvider.getSubmissionPluginAttachments(t),[4,this.fileHelper.getTotalFilesSize(n)];case 1:return o=r.sent(),[2,e.length+o]}})})},e.prototype.getSizeForEdit=function(e,t,n,o){return this.assignProvider.getSubmissionPluginText(n,!0).length},e.prototype.getTextToSubmit=function(e,t){return this.textUtils.restorePluginfileUrls(t.onlinetext_editor_text,e.fileareas&&e.fileareas[0]?e.fileareas[0].files:[])},e.prototype.hasDataChanged=function(e,t,n,o){var r=this;return this.assignOfflineProvider.getSubmission(e.id,t.userid).catch(function(){}).then(function(e){return e&&e.plugindata&&e.plugindata.onlinetext_editor?e.plugindata.onlinetext_editor.text:n.editorfields&&n.editorfields[0]?n.editorfields[0].text:""}).then(function(e){return e!=r.getTextToSubmit(n,o)})},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){var e=this.sitesProvider.getCurrentSite();return e.isVersionGreaterEqualThan("3.1.1")||e.checkIfAppUsesLocalMobile()},e.prototype.prepareSubmissionData=function(e,t,n,o,r,i,l,a){var s=this.getTextToSubmit(n,o),u=this.assignHelper.getPluginConfig(e,"assignsubmission",n.type);if(parseInt(u.wordlimitenabled,10)){var c=this.textUtils.countWords(s),d=parseInt(u.wordlimit,10);if(c>d){var f=this.translate.instant("addon.mod_assign_submission_onlinetext.wordlimitexceeded",{$a:{count:c,limit:d}});return Promise.reject(f)}}s=this.textUtils.formatHtmlLines(s),r.onlinetext_editor={text:s,format:1,itemid:0}},e.prototype.prepareSyncData=function(e,t,n,o,r,i){var l=o&&o.plugindata&&o.plugindata.onlinetext_editor;l&&(r.onlinetext_editor=l)},e=f([Object(o.A)(),p("design:paramtypes",[r.c,i.a,l.a,a.a,s.a,u.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1159),i=n(1160),l=n(1162),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=function(){function e(){}return e=a([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(638),s=n(639),u=n(152),c=n(26),d=n(31),f=n(214),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t){e.registerHandler(t)}return e=p([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a,f.a],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),h("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1161),s=n(641),u=n(152),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),p("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(77),i=n(641),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.assignProvider=e,this.name="AddonModAssignFeedbackEditPdfHandler",this.type="editpdf"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getPluginFiles=function(e,t,n,o){return this.assignProvider.getSubmissionPluginAttachments(n)},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1163),s=n(642),u=n(152),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),p("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(77),i=n(642),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.assignProvider=e,this.name="AddonModAssignFeedbackFileHandler",this.type="file"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getPluginFiles=function(e,t,n,o){return this.assignProvider.getSubmissionPluginAttachments(n)},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(221),i=n(497),l=n(13),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.bookProvider=e,this.courseProvider=t,this.name="AddonModBook",this.modName="book",this.supportedFeatures=(n={},n[a.a.FEATURE_MOD_ARCHETYPE]=a.a.MOD_ARCHETYPE_RESOURCE,n[a.a.FEATURE_GROUPS]=!1,n[a.a.FEATURE_GROUPINGS]=!1,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!1,n[a.a.FEATURE_GRADE_OUTCOMES]=!1,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_book-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModBookIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t,n){return i.a},e=s([Object(o.A)(),u("design:paramtypes",[r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(221),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModBook","book","b")||this;return o.bookProvider=n,o.name="AddonModBookLinkHandler",o}return a(t,e),t.prototype.getPageParams=function(e,t,n){return t.chapterid?{chapterId:parseInt(t.chapterid,10)}:void 0},t.prototype.isEnabled=function(e,t,n,o){return this.bookProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(221),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModBook","book")||this;return r.bookProvider=o,r.name="AddonModBookListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.bookProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(227),i=n(225),l=n(13),a=n(22),s=n(221),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.tagHelper=e,this.bookProvider=t,this.courseProvider=n,this.urlUtils=o,this.name="AddonModBookTagAreaHandler",this.type="mod_book/book_chapters"}return e.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},e.prototype.parseContent=function(e){var t=this,n=this.tagHelper.parseFeedContent(e);return Promise.all(n.map(function(e){var n=t.urlUtils.extractUrlParams(e.url);if(n.b&&!n.id){var o=parseInt(n.b,10);return t.courseProvider.getModuleBasicInfoByInstance(o,"book").then(function(t){e.url+="&id="+t.id})}})).then(function(){return n})},e.prototype.getComponent=function(e){return i.a},e=u([Object(o.A)(),c("design:paramtypes",[r.a,s.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModChat","chat","c")||this;return n.name="AddonModChatLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModChat","chat")||this;return o.name="AddonModChatListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(498),i=n(13),l=n(40),a=n(279),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.chatProvider=t,this.name="AddonModChat",this.modName="chat",this.supportedFeatures=(n={},n[l.a.FEATURE_GROUPS]=!0,n[l.a.FEATURE_GROUPINGS]=!0,n[l.a.FEATURE_MOD_INTRO]=!0,n[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[l.a.FEATURE_GRADE_HAS_GRADE]=!1,n[l.a.FEATURE_GRADE_OUTCOMES]=!0,n[l.a.FEATURE_BACKUP_MOODLE2]=!0,n[l.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){var o={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_chat-handler",action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModChatIndexPage",l,r)}};return this.chatProvider.areSessionsAvailable().then(function(e){o.showDownloadButton=e}),o},e.prototype.getMainComponent=function(e,t){return r.a},e=s([Object(o.A)(),u("design:paramtypes",[i.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(71),s=n(1),u=n(4),c=n(2),d=n(13),f=n(142),p=n(46),h=n(279),m=n(32),_=n(56),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f){var p=e.call(this,t,n,o,r,i,l,a,s,u)||this;return p.groupsProvider=c,p.userProvider=d,p.chatProvider=f,p.name="AddonModChat",p.modName="chat",p.component=h.a.COMPONENT,p}return g(t,e),t.prototype.isEnabled=function(){return this.chatProvider.areSessionsAvailable()},t.prototype.invalidateContent=function(e,t){var n=this;return this.chatProvider.getChat(t,e).then(function(e){var t=[n.chatProvider.invalidateAllSessions(e.id),n.chatProvider.invalidateAllSessionMessages(e.id)];return n.utils.allPromises(t)})},t.prototype.invalidateModule=function(e,t){var n=[this.chatProvider.invalidateChats(t),this.courseProvider.invalidateModule(e.id)];return this.utils.allPromises(n)},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchChat.bind(this))},t.prototype.prefetchChat=function(e,t,n,o){var r=this,i=[this.chatProvider.getChat(t,e.id,o),this.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,o)];return Promise.all(i).then(function(e){var n=e[0],i=e[1],l=[],a=[0];return i.groups&&i.groups.length>0&&(a=i.groups.map(function(e){return e.id})),a.forEach(function(e){l.push(r.chatProvider.getSessions(n.id,e,!1,!0,o).catch(function(e){if("notingroup"!=e.errorcode)return Promise.reject(e)})),l.push(r.chatProvider.getSessions(n.id,e,!0,!0,o).then(function(e){var i=e.map(function(e){return r.prefetchSession(n.id,e,0,t,o)});return Promise.all(i)}).catch(function(e){if("notingroup"!=e.errorcode)return Promise.reject(e)}))}),Promise.all(l)})},t.prototype.prefetchSession=function(e,t,n,o,r){var i=this;return this.chatProvider.getSessionMessages(e,t.sessionstart,t.sessionend,n,!0,r).then(function(e){var n={};t.sessionusers.forEach(function(e){n[e.userid]=!0}),e.forEach(function(e){n[e.userid]=!0});var l=Object.keys(n).map(Number);return i.userProvider.prefetchProfiles(l,o,r).catch(function(){})})},t=v([Object(o.A)(),y("design:paramtypes",[r.c,i.a,c.a,d.a,l.a,s.a,u.a,m.a,_.a,a.a,p.a,h.a])],t)}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(499),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModChoice",this.modName="choice",this.supportedFeatures=(t={},t[l.a.FEATURE_GROUPS]=!0,t[l.a.FEATURE_GROUPINGS]=!0,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!1,t[l.a.FEATURE_GRADE_OUTCOMES]=!1,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_choice-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModChoiceIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModChoice","choice")||this;return n.name="AddonModChoiceLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModChoice","choice")||this;return o.name="AddonModChoiceListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(296),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.choiceSync=e,this.name="AddonModChoiceSyncCronHandler"}return e.prototype.execute=function(e,t){return this.choiceSync.syncAllChoices(e,t)},e.prototype.getInterval=function(){return this.choiceSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(504),i=n(13),l=n(134),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.feedbackProvider=t,this.name="AddonModFeedback",this.modName="feedback",this.supportedFeatures=(n={},n[a.a.FEATURE_GROUPS]=!0,n[a.a.FEATURE_GROUPINGS]=!0,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!1,n[a.a.FEATURE_GRADE_OUTCOMES]=!1,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_feedback-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModFeedbackIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(134),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModFeedback","feedback")||this;return o.feedbackProvider=n,o.name="AddonModFeedbackLinkHandler",o}return a(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.feedbackProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(134),a=n(13),s=n(4),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.feedbackProvider=n,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackAnalysisLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/analysis\.php.*([\&\?]id=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(n.id,e).then(function(n){return r.linkHelper.goInSite(t,"AddonModFeedbackIndexPage",{module:n,courseId:n.course,tab:"analysis"},e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==n.id})},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(134),l=n(252),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.feedbackProvider=t,o.feedbackHelper=n,o.name="AddonModFeedbackShowEntriesLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModFeedback",o.pattern=/\/mod\/feedback\/show_entries\.php.*([\?\&](id|showcompleted)=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){r.feedbackHelper.handleShowEntriesLink(t,n,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==n.id})},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(134),a=n(13),s=n(4),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.feedbackProvider=n,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackShowNonRespondentsLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/show_nonrespondents\.php.*([\?\&](id)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(n.id,e).then(function(n){return r.linkHelper.goInSite(t,"AddonModFeedbackNonRespondentsPage",{module:n,moduleId:n.id,courseId:n.course},e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==n.id})},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(134),a=n(13),s=n(4),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.feedbackProvider=n,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackCompleteLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/complete\.php.*([\?\&](id|gopage)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(n.id,e).then(function(o){var i={module:o,moduleId:o.id,courseId:o.course};return void 0===n.gopage&&(i.page=parseInt(n.gopage,10)),r.linkHelper.goInSite(t,"AddonModFeedbackFormPage",i,e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.id&&this.feedbackProvider.isPluginEnabled(e)},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(134),a=n(13),s=n(4),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.feedbackProvider=n,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackPrintLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/print\.php.*([\?\&](id)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(n.id,e).then(function(n){return r.linkHelper.goInSite(t,"AddonModFeedbackFormPage",{module:n,moduleId:n.id,courseId:n.course,preview:!0},e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.id&&this.feedbackProvider.isPluginEnabled(e)},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(134),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModFeedback","feedback")||this;return r.feedbackProvider=o,r.name="AddonModFeedbackListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(22),i=n(2),l=n(38),a=n(134),s=n(252),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o,r){this.utils=e,this.feedbackHelper=t,this.urlUtils=n,this.courseHelper=o,this.feedbackProvider=r,this.name="AddonModFeedbackPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModFeedback"}return e.prototype.handles=function(e){return!(!this.utils.isTrueOrOne(e.notif)||"mod_feedback"!=e.moodlecomponent||"submission"!=e.name&&"message"!=e.name)&&this.feedbackProvider.isPluginEnabled(e.site)},e.prototype.handleClick=function(e){var t=this.urlUtils.extractUrlParams(e.contexturl),n=Number(e.courseid),o=Number(t.id);return"submission"==e.name?this.feedbackHelper.handleShowEntriesLink(void 0,t,e.site):this.courseHelper.navigateToModule(o,e.site,n)},e=u([Object(o.A)(),c("design:paramtypes",[i.a,s.a,r.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(285),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.feedbackSync=e,this.name="AddonModFeedbackSyncCronHandler"}return e.prototype.execute=function(e,t){return this.feedbackSync.syncAllFeedbacks(e,t)},e.prototype.getInterval=function(){return this.feedbackSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(505),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModFolder",this.modName="folder",this.supportedFeatures=(t={},t[l.a.FEATURE_MOD_ARCHETYPE]=l.a.MOD_ARCHETYPE_RESOURCE,t[l.a.FEATURE_GROUPS]=!1,t[l.a.FEATURE_GROUPINGS]=!1,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!1,t[l.a.FEATURE_GRADE_OUTCOMES]=!1,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_folder-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModFolderIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(329),p=n(32),h=n(56),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,t,n,o,r,i,l,a,s,u)||this;return d.folderProvider=c,d.name="AddonModFolder",d.modName="folder",d.component=f.a.COMPONENT,d}return m(t,e),t.prototype.downloadOrPrefetch=function(t,n,o,r){var i=[];return i.push(e.prototype.downloadOrPrefetch.call(this,t,n,o)),this.folderProvider.isGetFolderWSAvailable()&&i.push(this.folderProvider.getFolder(n,t.id)),Promise.all(i)},t.prototype.invalidateContent=function(e,t){return this.folderProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.folderProvider.invalidateFolderData(t)),n.push(this.courseProvider.invalidateModule(e.id)),Promise.all(n)},t=_([Object(o.A)(),g("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,p.a,h.a,f.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModFolder","folder","f")||this;return n.name="AddonModFolderLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModFolder","folder")||this;return o.name="AddonModFolderListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.name="AddonModFolderPluginFileHandler",this.component="mod_folder"}return e.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_folder/content/([0-9]+)/")},e.prototype.getComponentRevisionReplace=function(e){return"/mod_folder/content/0/"},e.prototype.isEnabled=function(){return!0},e=r([Object(o.A)()],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(3),i=n(9),l=n(1),a=n(13),s=n(135),u=n(506),c=n(40),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r){this.courseProvider=e,this.forumProvider=t,this.translate=n,this.eventsProvider=o,this.sitesProvider=r,this.name="AddonModForum",this.modName="forum",this.supportedFeatures=(i={},i[c.a.FEATURE_GROUPS]=!0,i[c.a.FEATURE_GROUPINGS]=!0,i[c.a.FEATURE_MOD_INTRO]=!0,i[c.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,i[c.a.FEATURE_COMPLETION_HAS_RULES]=!0,i[c.a.FEATURE_GRADE_HAS_GRADE]=!0,i[c.a.FEATURE_GRADE_OUTCOMES]=!0,i[c.a.FEATURE_BACKUP_MOODLE2]=!0,i[c.a.FEATURE_SHOW_DESCRIPTION]=!0,i[c.a.FEATURE_RATE]=!0,i[c.a.FEATURE_PLAGIARISM]=!0,i);var i}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){var o=this,r={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_forum-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModForumIndexPage",l,r)}};if(void 0!==e.afterlink){r.extraBadgeColor="";var i=/>(\d+)[^<]+/.exec(e.afterlink);r.extraBadge=i?this.translate.instant("addon.mod_forum.unreadpostsnumber",{$a:i[1]}):""}else this.updateExtraBadge(r,t,e.id);var l=this.eventsProvider.on(s.a.MARK_READ_EVENT,function(n){n.courseId==t&&n.moduleId==e.id&&o.updateExtraBadge(r,n.courseId,n.moduleId,n.siteId)},this.sitesProvider.getCurrentSiteId());return r.onDestroy=function(){l&&l.off()},r},e.prototype.getMainComponent=function(e,t){return u.a},e.prototype.displayRefresherInSingleActivity=function(){return!1},e.prototype.updateExtraBadge=function(e,t,n,o){var r=this;(o=o||this.sitesProvider.getCurrentSiteId())&&(e.extraBadge=this.translate.instant("core.loading"),e.extraBadgeColor="light",this.forumProvider.invalidateForumData(t).finally(function(){r.forumProvider.getForum(t,n,o).then(function(t){e.extraBadgeColor="",e.extraBadge=t.unreadpostscount?r.translate.instant("addon.mod_forum.unreadpostsnumber",{$a:t.unreadpostscount}):""}).catch(function(){e.extraBadgeColor="",e.extraBadge=""})}))},e=d([Object(o.A)(),f("design:paramtypes",[a.a,s.a,r.c,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(254),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.forumSync=e,this.name="AddonModForumSyncCronHandler"}return e.prototype.execute=function(e,t){return this.forumSync.syncAllForums(e,t)},e.prototype.getInterval=function(){return this.forumSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModForum","forum","f")||this;return n.name="AddonModForumIndexLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(4),i=n(55),l=n(15),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.domUtils=t,o.linkHelper=n,o.name="AddonModForumDiscussionLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModForum",o.pattern=/\/mod\/forum\/discuss\.php.*([\&\?]d=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o,r){var i=this;return r=r||{},[{action:function(e,t){var l={courseId:o||parseInt(n.courseid,10)||parseInt(n.cid,10)||void 0,discussionId:parseInt(n.d,10),cmId:r.cmid&&parseInt(r.cmid,10),forumId:r.instance&&parseInt(r.instance,10)};(r.postid||n.urlHash)&&(l.postId=parseInt(r.postid||n.urlHash.replace("p",""))),i.linkHelper.goInSite(t,"AddonModForumDiscussionPage",l,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return!0},t=s([Object(o.A)(),u("design:paramtypes",[r.a,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModForum","forum")||this;return o.name="AddonModForumListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(55),i=n(15),l=n(13),a=n(4),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this)||this;return r.linkHelper=t,r.courseProvider=n,r.domUtils=o,r.name="AddonModForumPostLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModForum",r.pattern=/\/mod\/forum\/post\.php.*([\?\&](forum)=\d+)/,r}return s(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading(),i=parseInt(n.forum,10);r.courseProvider.getModuleBasicInfoByInstance(i,"forum",e).then(function(n){return r.linkHelper.goInSite(t,"AddonModForumNewDiscussionPage",{courseId:n.course,cmId:n.id,forumId:n.instance,timeCreated:0},e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.forum},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.a,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(22),i=n(2),l=n(15),a=n(135),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.utils=e,this.forumProvider=t,this.urlUtils=n,this.linkHelper=o,this.name="AddonModForumPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModForum"}return e.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"mod_forum"==e.moodlecomponent&&"posts"==e.name},e.prototype.handleClick=function(e){var t=this,n=this.urlUtils.extractUrlParams(e.contexturl),o=e.customdata||{},r={courseId:Number(e.courseid),discussionId:Number(n.d||o.discussionid),cmId:Number(o.cmid),forumId:Number(o.instance)};return(o.postid||n.urlHash)&&(r.postId=Number(o.postid||n.urlHash.replace("p",""))),this.forumProvider.invalidateDiscussionPosts(r.discussionId,void 0,e.site).catch(function(){}).then(function(){return t.linkHelper.goInSite(void 0,"AddonModForumDiscussionPage",r,e.site)})},e=s([Object(o.A)(),u("design:paramtypes",[i.a,a.a,r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(227),i=n(225),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.tagHelper=e,this.name="AddonModForumTagAreaHandler",this.type="mod_forum/forum_posts"}return e.prototype.isEnabled=function(){return!0},e.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(508),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModGlossary",this.modName="glossary",this.supportedFeatures=(t={},t[l.a.FEATURE_GROUPS]=!1,t[l.a.FEATURE_GROUPINGS]=!1,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!0,t[l.a.FEATURE_GRADE_OUTCOMES]=!0,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t[l.a.FEATURE_RATE]=!0,t[l.a.FEATURE_PLAGIARISM]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_glossary-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModGlossaryIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e.prototype.displayRefresherInSingleActivity=function(){return!1},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(362),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.glossarySync=e,this.name="AddonModGlossarySyncCronHandler"}return e.prototype.execute=function(e,t){return this.glossarySync.syncAllGlossaries(e,t)},e.prototype.getInterval=function(){return this.glossarySync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(203),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModGlossary","glossary","g")||this;return o.glossaryProvider=n,o.name="AddonModGlossaryIndexLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(4),i=n(55),l=n(15),a=n(38),s=n(203),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.domUtils=t,i.linkHelper=n,i.glossaryProvider=o,i.courseHelper=r,i.name="AddonModGlossaryEntryLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModGlossary",i.pattern=/\/mod\/glossary\/(showentry|view)\.php.*([\&\?](eid|g|mode|hook)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var i,l=r.domUtils.showModalLoading();i="entry"==n.mode?parseInt(n.hook,10):parseInt(n.eid,10);return(o?Promise.resolve(o):r.glossaryProvider.getEntry(i,e).catch(function(e){return r.domUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentry",!0),Promise.reject(null)}).then(function(t){return r.courseHelper.getModuleCourseIdByInstance(t.entry.glossaryid,"glossary",e)})).then(function(n){r.linkHelper.goInSite(t,"AddonModGlossaryEntryPage",{courseId:n,entryId:i},e)}).finally(function(){l.dismiss()})}}]},t=c([Object(o.A)(),d("design:paramtypes",[r.a,l.a,s.a,a.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModGlossary","glossary")||this;return o.name="AddonModGlossaryListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(13),a=n(4),s=n(203),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.courseProvider=n,i.domUtils=o,i.glossaryProvider=r,i.name="AddonModGlossaryEditLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModGlossary",i.pattern=/\/mod\/glossary\/edit\.php.*([\?\&](cmid)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading(),i=parseInt(n.cmid,10);r.courseProvider.getModuleBasicInfo(i,e).then(function(n){return r.glossaryProvider.getGlossary(n.course,n.id).then(function(o){r.linkHelper.goInSite(t,"AddonModGlossaryEditPage",{courseId:n.course,module:n,glossary:o,entry:null},e)})}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.cmid},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(227),i=n(225),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.tagHelper=e,this.name="AddonModGlossaryTagAreaHandler",this.type="mod_glossary/glossary_entries"}return e.prototype.isEnabled=function(){return!0},e.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(13),i=n(509),l=n(237),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.imscpProvider=t,this.name="AddonModImscp",this.modName="imscp",this.supportedFeatures=(n={},n[a.a.FEATURE_MOD_ARCHETYPE]=a.a.MOD_ARCHETYPE_RESOURCE,n[a.a.FEATURE_GROUPS]=!1,n[a.a.FEATURE_GROUPINGS]=!1,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!1,n[a.a.FEATURE_GRADE_OUTCOMES]=!1,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_imscp-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModImscpIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return i.a},e=s([Object(o.A)(),u("design:paramtypes",[r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(237),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModImscp","imscp","i")||this;return o.imscpProvider=n,o.name="AddonModImscpLinkHandler",o}return a(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.imscpProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(237),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModImscp","imscp")||this;return r.imscpProvider=o,r.name="AddonModImscpListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.name="AddonModImscpPluginFileHandler",this.component="mod_imscp"}return e.prototype.getComponentRevisionRegExp=function(e){return"content"==e[2]?new RegExp("/mod_imscp/content/([0-9]+)/"):"backup"==e[2]?new RegExp("/mod_imscp/backup/([0-9]+)/"):null},e.prototype.getComponentRevisionReplace=function(e){return"/mod_imscp/"+e[2]+"/0/"},e.prototype.isEnabled=function(){return!0},e=r([Object(o.A)()],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(510),i=n(13),l=n(169),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.lessonProvider=t,this.name="AddonModLesson",this.modName="lesson",this.supportedFeatures=(n={},n[a.a.FEATURE_GROUPS]=!0,n[a.a.FEATURE_GROUPINGS]=!0,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!0,n[a.a.FEATURE_GRADE_OUTCOMES]=!0,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_lesson-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModLessonIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(287),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.lessonSync=e,this.name="AddonModLessonSyncCronHandler"}return e.prototype.execute=function(e,t){return this.lessonSync.syncAllLessons(e,t)},e.prototype.getInterval=function(){return this.lessonSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(4),i=n(99),l=n(13),a=n(38),s=n(169),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,t,"AddonModLesson","lesson")||this;return i.lessonProvider=n,i.domUtils=o,i.courseProvider=r,i.name="AddonModLessonIndexLinkHandler",i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,t){n.userpassword?r.navigateToModuleWithPassword(parseInt(n.id,10),o,n.userpassword,e,t):r.courseHelper.navigateToModule(parseInt(n.id,10),e,o,void 0,void 0,void 0,t)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.lessonProvider.isPluginEnabled()},t.prototype.navigateToModuleWithPassword=function(e,t,n,o,r){var i=this,l=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,o).then(function(l){return t=t||l.course,i.lessonProvider.storePassword(parseInt(l.instance,10),n,o).catch(function(){}).then(function(){return i.courseHelper.navigateToModule(e,o,t,l.section,void 0,void 0,r)})}).catch(function(){return i.courseHelper.navigateToModule(e,o,t,void 0,void 0,void 0,r)}).finally(function(){l.dismiss()})},t=c([Object(o.A)(),d("design:paramtypes",[a.a,s.a,r.a,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(1),i=n(4),l=n(454),a=n(15),s=n(13),u=n(38),c=n(169),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t,n,o,"AddonModLesson","lesson")||this;return a.lessonProvider=r,a.courseProvider=i,a.linkHelper=l,a.name="AddonModLessonGradeLinkHandler",a.canReview=!0,a}return d(t,e),t.prototype.goToReview=function(e,t,n,o,r){var i,l=this,a=parseInt(t.id,10),s=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(a,o).then(function(e){return i=e,n=i.course||n||t.courseid||t.cid,l.lessonProvider.getAccessInformation(i.instance)}).then(function(e){if(e.canviewreports){var s={courseId:Number(n),lessonId:i.instance,userId:parseInt(t.userid,10)};l.linkHelper.goInSite(r,"AddonModLessonUserRetakePage",s,o)}else l.courseHelper.navigateToModule(a,o,n,i.section,void 0,void 0,r)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){s.dismiss()})},t.prototype.isEnabled=function(e,t,n,o){return this.lessonProvider.isPluginEnabled()},t=f([Object(o.A)(),p("design:paramtypes",[u.a,i.a,r.a,c.a,s.a,a.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(4),i=n(55),l=n(15),a=n(13),s=n(38),u=n(169),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this)||this;return l.domUtils=t,l.lessonProvider=n,l.courseHelper=o,l.linkHelper=r,l.courseProvider=i,l.name="AddonModLessonReportLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModLesson",l.pattern=/\/mod\/lesson\/report\.php.*([\&\?]id=\d+)/,l}return c(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,t){n.action&&"reportoverview"!=n.action?"reportdetail"==n.action&&r.openUserRetake(parseInt(n.id,10),parseInt(n.userid,10),o,parseInt(n.try,10),e,t):r.openReportOverview(parseInt(n.id,10),o,parseInt(n.group,10),e,t)}}]},t.prototype.isEnabled=function(e,t,n,o){return!("reportdetail"==n.action&&!n.userid)&&this.lessonProvider.isPluginEnabled()},t.prototype.openReportOverview=function(e,t,n,o,r){var i=this,l=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,o).then(function(e){t=t||e.course;var l={module:e,courseId:Number(t),action:"report",group:isNaN(n)?null:n};i.linkHelper.goInSite(r,"AddonModLessonIndexPage",l,o)}).catch(function(e){i.domUtils.showErrorModalDefault(e,"Error processing link.")}).finally(function(){l.dismiss()})},t.prototype.openUserRetake=function(e,t,n,o,r,i){var l=this,a=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,r).then(function(e){n=n||e.course;var a={lessonId:e.instance,courseId:Number(n),userId:t,retake:o||0};l.linkHelper.goInSite(i,"AddonModLessonUserRetakePage",a,r)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"Error processing link.")}).finally(function(){a.dismiss()})},t=d([Object(o.A)(),f("design:paramtypes",[r.a,u.a,s.a,l.a,a.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(169),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModLesson","lesson")||this;return r.lessonProvider=o,r.name="AddonModLessonListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(2),i=n(168),l=n(184),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.utils=e,this.gradesHelper=t,this.gradesProvider=n,this.name="AddonModLessonPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModLesson"}return e.prototype.handles=function(e){return!(!this.utils.isTrueOrOne(e.notif)||"mod_lesson"!=e.moodlecomponent||"graded_essay"!=e.name)&&this.gradesProvider.isPluginEnabledForCourse(Number(e.courseid),e.site)},e.prototype.handleClick=function(e){var t=e.customdata||{},n=Number(e.courseid),o=Number(t.cmid);return this.gradesHelper.goToGrades(n,void 0,o,void 0,e.site)},e=a([Object(o.A)(),s("design:paramtypes",[r.a,l.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(79),i=n(10),l=n(13),a=n(4),s=n(18),u=n(1),c=n(511),d=n(298),f=n(40),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,o,r,i,l){this.appProvider=e,this.courseProvider=t,this.domUtils=n,this.filepoolProvider=o,this.sitesProvider=r,this.ltiProvider=i,this.sanitizer=l,this.name="AddonModLti",this.modName="lti",this.supportedFeatures=(a={},a[f.a.FEATURE_GROUPS]=!1,a[f.a.FEATURE_GROUPINGS]=!1,a[f.a.FEATURE_MOD_INTRO]=!0,a[f.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,a[f.a.FEATURE_GRADE_HAS_GRADE]=!0,a[f.a.FEATURE_GRADE_OUTCOMES]=!0,a[f.a.FEATURE_BACKUP_MOODLE2]=!0,a[f.a.FEATURE_SHOW_DESCRIPTION]=!0,a);var a}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){var o=this,r={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_lti-handler",action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModLtiIndexPage",l,r)},buttons:[{icon:"link",label:"addon.mod_lti.launchactivity",action:function(e,t,n,r){var i=o.domUtils.showModalLoading();o.ltiProvider.getLti(r,n.id).then(function(e){return o.ltiProvider.getLtiLaunchData(e.id).then(function(t){return o.ltiProvider.logView(e.id,e.name).then(function(){o.courseProvider.checkModuleCompletion(r,n.completiondata)}).catch(function(){}),o.ltiProvider.launch(t.endpoint,t.parameters)})}).catch(function(e){o.domUtils.showErrorModalDefault(e,"addon.mod_lti.errorgetlti",!0)}).finally(function(){i.dismiss()})}}]};return this.ltiProvider.getLti(t,e.id).then(function(t){var n=t.secureicon||t.icon;if(n){var i=o.sitesProvider.getCurrentSiteId();o.filepoolProvider.downloadUrl(i,n,!1,d.a.COMPONENT,e.id).then(function(){return o.filepoolProvider.getSrcByUrl(i,n,d.a.COMPONENT,e.id)}).then(function(e){r.icon=o.sanitizer.bypassSecurityTrustUrl(e)}).catch(function(){o.appProvider.isOnline()&&(r.icon=o.sanitizer.bypassSecurityTrustUrl(n))})}}).catch(function(){}),r},e.prototype.getMainComponent=function(e,t){return c.a},e=p([Object(o.A)(),h("design:paramtypes",[i.a,l.a,a.a,s.a,u.a,d.a,r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModLti","lti","l")||this;return n.name="AddonModLtiLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModLti","lti")||this;return o.name="AddonModLtiListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(142),f=n(298),p=n(32),h=n(56),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,t,n,o,r,i,l,a,s,u)||this;return d.ltiProvider=c,d.name="AddonModLti",d.modName="lti",d.component=f.a.COMPONENT,d}return m(t,e),t.prototype.download=function(e,t,n){return Promise.resolve()},t.prototype.invalidateModule=function(e,t){return this.ltiProvider.invalidateLti(t)},t.prototype.isDownloadable=function(e,t){return!1},t.prototype.prefetch=function(e,t,n,o){return Promise.resolve()},t=_([Object(o.A)(),g("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,p.a,h.a,f.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(222),i=n(512),l=n(13),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.pageProvider=t,this.name="AddonModPage",this.modName="page",this.supportedFeatures=(n={},n[a.a.FEATURE_MOD_ARCHETYPE]=a.a.MOD_ARCHETYPE_RESOURCE,n[a.a.FEATURE_GROUPS]=!1,n[a.a.FEATURE_GROUPINGS]=!1,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!1,n[a.a.FEATURE_GRADE_OUTCOMES]=!1,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return this.pageProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_page-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModPageIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return i.a},e=s([Object(o.A)(),u("design:paramtypes",[l.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(222),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModPage","page","p")||this;return o.pageProvider=n,o.name="AddonModPageLinkHandler",o}return a(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.pageProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(222),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModPage","page")||this;return r.pageProvider=o,r.name="AddonModPageListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.pageProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.name="AddonModPagePluginFileHandler",this.component="mod_page"}return e.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_page/content/([0-9]+)/")},e.prototype.getComponentRevisionReplace=function(e){return"/mod_page/content/0/"},e.prototype.isEnabled=function(){return!0},e=r([Object(o.A)()],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(513),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModQuiz",this.modName="quiz",this.supportedFeatures=(t={},t[l.a.FEATURE_GROUPS]=!0,t[l.a.FEATURE_GROUPINGS]=!0,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!0,t[l.a.FEATURE_GRADE_OUTCOMES]=!0,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t[l.a.FEATURE_CONTROLS_GRADE_VISIBILITY]=!0,t[l.a.FEATURE_USES_QUESTIONS]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_quiz-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModQuizIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(259),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.quizSync=e,this.name="AddonModQuizSyncCronHandler"}return e.prototype.execute=function(e,t){return this.quizSync.syncAllQuizzes(e,t)},e.prototype.getInterval=function(){return this.quizSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(167),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModQuiz","quiz","q")||this;return o.quizProvider=n,o.name="AddonModQuizIndexLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(1),i=n(4),l=n(454),a=n(38),s=n(167),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this,t,n,o,"AddonModQuiz","quiz")||this;return i.quizProvider=r,i.name="AddonModQuizGradeLinkHandler",i.canReview=!1,i}return u(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.quizProvider.isPluginEnabled()},t=c([Object(o.A)(),d("design:paramtypes",[a.a,i.a,r.a,s.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(167),l=n(253),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.quizProvider=t,o.quizHelper=n,o.name="AddonModQuizReviewLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModQuiz",o.pattern=/\/mod\/quiz\/review\.php.*([\&\?]attempt=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o,r){var i=this;return o=o||n.courseid||n.cid,r=r||{},[{action:function(e,t){var l=parseInt(n.attempt,10),a=parseInt(n.page,10),s=r.instance&&parseInt(r.instance,10);i.quizHelper.handleReviewLink(t,l,a,o,s,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.quizProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModQuiz","quiz")||this;return o.name="AddonModQuizListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(22),i=n(2),l=n(38),a=n(167),s=n(253),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o,r){this.utils=e,this.quizProvider=t,this.urlUtils=n,this.courseHelper=o,this.quizHelper=r,this.name="AddonModQuizPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModQuiz",this.SUPPORTED_NAMES=["submission","confirmation","attempt_overdue"]}return e.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"mod_quiz"==e.moodlecomponent&&-1!=this.SUPPORTED_NAMES.indexOf(e.name)},e.prototype.handleClick=function(e){var t=this,n=this.urlUtils.extractUrlParams(e.contexturl),o=e.customdata||{},r=Number(e.courseid);if("submission"==e.name)return this.quizHelper.handleReviewLink(void 0,Number(n.attempt),Number(n.page),r,Number(o.instance),e.site);var i=Number(n.id);return this.quizProvider.invalidateContent(i,r,e.site).catch(function(){}).then(function(){return t.courseHelper.navigateToModule(i,e.site,r)})},e=u([Object(o.A)(),c("design:paramtypes",[i.a,a.a,r.a,l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1233),i=n(129),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="AddonModQuizAccessDelayBetweenAttempts",this.ruleName="quizaccess_delaybetweenattempts"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!1},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1235),i=n(129),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="AddonModQuizAccessIpAddress",this.ruleName="quizaccess_ipaddress"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!1},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1237),i=n(129),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="AddonModQuizAccessNumAttempts",this.ruleName="quizaccess_numattempts"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!1},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1239),s=n(659),u=n(129),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild()],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),d("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(259),i=n(659),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.quizSync=e,this.name="AddonModQuizAccessOfflineAttempts",this.ruleName="quizaccess_offlineattempts"}return e.prototype.getFixedPreflightData=function(e,t,n,o,r){t.confirmdatasaved=1},e.prototype.getPreflightComponent=function(e){return i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!n&&(!t||Date.now()-this.quizSync.syncInterval>e.syncTime)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1241),i=n(129),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(167),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.name="AddonModQuizAccessOpenCloseDate",this.ruleName="quizaccess_openclosedate"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!1},e.prototype.shouldShowTimeLeft=function(e,t,n){return!(e.preview&&n>t)&&n>t-r.a.QUIZ_SHOW_TIME_BEFORE_DEADLINE},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(1243),u=n(660),c=n(129),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),a.a],providers:[s.a],exports:[u.a],entryComponents:[u.a]}),f("design:paramtypes",[c.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1),i=n(660),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.sitesProvider=e,this.siteSchema={name:"AddonModQuizAccessPasswordHandler",version:1,tables:[{name:t.PASSWORD_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"password",type:"TEXT"},{name:"timemodified",type:"INTEGER"}]}]},this.name="AddonModQuizAccessPassword",this.ruleName="quizaccess_password",this.sitesProvider.registerSiteSchema(this.siteSchema)}return t=e,e.prototype.getFixedPreflightData=function(e,t,n,o,r){if(e&&e.id&&void 0===t.quizpassword)return this.getPasswordEntry(e.id,r).then(function(e){t.quizpassword=e.password}).catch(function(){})},e.prototype.getPasswordEntry=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.PASSWORD_TABLE,{id:e})})},e.prototype.getPreflightComponent=function(e){return i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return this.getPasswordEntry(e.id,o).then(function(){return!1}).catch(function(){return!0})},e.prototype.notifyPreflightCheckPassed=function(e,t,n,o,r){if(e&&e.id&&void 0!==n.quizpassword)return this.storePassword(e.id,n.quizpassword,r)},e.prototype.notifyPreflightCheckFailed=function(e,t,n,o,r){if(e&&e.id)return this.removePassword(e.id,r)},e.prototype.removePassword=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.PASSWORD_TABLE,{id:e})})},e.prototype.storePassword=function(e,n,o){return this.sitesProvider.getSite(o).then(function(o){var r={id:e,password:n,timemodified:Date.now()};return o.getDb().insertRecord(t.PASSWORD_TABLE,r)})},e.PASSWORD_TABLE="addon_mod_quiz_access_password",e=t=l([Object(o.A)(),a("design:paramtypes",[r.a])],e);var t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1245),i=n(129),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="AddonModQuizAccessSafeBrowser",this.ruleName="quizaccess_safebrowser"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!1},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1247),i=n(129),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.name="AddonModQuizAccessSecureWindow",this.ruleName="quizaccess_securewindow"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!1},e=r([Object(o.A)(),i("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1249),s=n(661),u=n(129),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild()],providers:[a.a],exports:[s.a],entryComponents:[s.a]}),d("design:paramtypes",[u.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(661),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.name="AddonModQuizAccessTimeLimit",this.ruleName="quizaccess_timelimit"}return e.prototype.getPreflightComponent=function(e){return r.a},e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,t,n,o){return!t},e.prototype.shouldShowTimeLeft=function(e,t,n){return!(e.preview&&n>t)},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(3),i=n(223),l=n(299),a=n(514),s=n(13),u=n(66),c=n(11),d=n(24),f=n(50),p=n(40),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,n,o,r,i,l,a){this.resourceProvider=e,this.courseProvider=t,this.mimetypeUtils=n,this.resourceHelper=o,this.prefetchDelegate=r,this.textUtils=i,this.translate=l,this.timeUtils=a,this.name="AddonModResource",this.modName="resource",this.supportedFeatures=(s={},s[p.a.FEATURE_MOD_ARCHETYPE]=p.a.MOD_ARCHETYPE_RESOURCE,s[p.a.FEATURE_GROUPS]=!1,s[p.a.FEATURE_GROUPINGS]=!1,s[p.a.FEATURE_MOD_INTRO]=!0,s[p.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,s[p.a.FEATURE_GRADE_HAS_GRADE]=!1,s[p.a.FEATURE_GRADE_OUTCOMES]=!1,s[p.a.FEATURE_BACKUP_MOODLE2]=!0,s[p.a.FEATURE_SHOW_DESCRIPTION]=!0,s);var s}return e.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){var o=this,r={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_resource-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModResourceIndexPage",l,r)},updateStatus:function(t){r.buttons[0].hidden=t!==p.a.DOWNLOADED||o.resourceHelper.isDisplayedInIframe(e)}.bind(this),buttons:[{hidden:!0,icon:"document",label:"addon.mod_resource.openthefile",action:function(e,t,n,r){o.hideOpenButton(n,r).then(function(e){e||o.resourceHelper.openModuleFile(n,r)})}}]};return this.getResourceData(e,t,r).then(function(e){r.icon=e.icon,r.extraBadge=e.extra,r.extraBadgeColor="light"}),r},e.prototype.hideOpenButton=function(e,t){var n=this;return(e.contentsinfo?Promise.resolve():this.courseProvider.loadModuleContents(e,t,void 0,!1,!1,void 0,this.modName)).then(function(){return n.prefetchDelegate.getModuleStatus(e,t).then(function(t){return t!==p.a.DOWNLOADED||n.resourceHelper.isDisplayedInIframe(e)})})},e.prototype.getResourceData=function(e,t,n){var o=this,r=[],i=[],l={};return r.push(this.hideOpenButton(e,t).then(function(e){n.buttons[0].hidden=e})),void 0!==e.customdata?l=this.textUtils.unserialize(this.textUtils.parseJSON(e.customdata)):this.resourceProvider.isGetResourceWSAvailable()&&r.push(this.resourceProvider.getResourceData(t,e.id).then(function(e){i=e.contentfiles,l=o.textUtils.unserialize(e.displayoptions)})),Promise.all(r).then(function(){var t=e.contents&&e.contents.length?e.contents:i,n={icon:"",extra:""},r=[];if(e.contentsinfo){var a=e.contentsinfo.mimetypes[0];a&&(n.icon=o.mimetypeUtils.getMimetypeIcon(a)),n.extra=o.textUtils.cleanTags(e.afterlink)}else if(t&&t.length){var s=t[0];if(n.icon=o.mimetypeUtils.getFileIcon(s.filename),l.showsize){var u=void 0;u=l.filedetails?l.filedetails.size:t.reduce(function(e,t){return e+t.filesize},0),r.push(o.textUtils.bytesToSize(u,1))}l.showtype&&r.push(o.mimetypeUtils.getMimetypeDescription(s)),l.showdate&&r.push(l.filedetails&&l.filedetails.modifieddate?o.translate.instant("addon.mod_resource.modifieddate",{$a:o.timeUtils.userDate(1e3*l.filedetails.modifieddate,"core.strftimedatetimeshort")}):l.filedetails&&l.filedetails.uploadeddate?o.translate.instant("addon.mod_resource.uploadeddate",{$a:o.timeUtils.userDate(1e3*l.filedetails.uploadeddate,"core.strftimedatetimeshort")}):s.timemodified>s.timecreated+5*p.a.SECONDS_MINUTE?o.translate.instant("addon.mod_resource.modifieddate",{$a:o.timeUtils.userDate(1e3*s.timemodified,"core.strftimedatetimeshort")}):o.translate.instant("addon.mod_resource.uploadeddate",{$a:o.timeUtils.userDate(1e3*s.timecreated,"core.strftimedatetimeshort")})),n.extra+=r.join(" ")}return""==n.icon&&(n.icon=o.courseProvider.getModuleIconSrc(o.modName,e.modicon)),n})},e.prototype.getMainComponent=function(e,t){return a.a},e=h([Object(o.A)(),m("design:paramtypes",[i.a,s.a,u.a,l.a,f.a,c.a,r.c,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(223),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModResource","resource","r")||this;return o.resourceProvider=n,o.name="AddonModResourceLinkHandler",o}return a(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.resourceProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(223),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModResource","resource")||this;return r.resourceProvider=o,r.name="AddonModResourceListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.name="AddonModResourcePluginFileHandler",this.component="mod_resource"}return e.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_resource/content/([0-9]+)/")},e.prototype.getComponentRevisionReplace=function(e){return"/mod_resource/content/0/"},e.prototype.isEnabled=function(){return!0},e=r([Object(o.A)()],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(515),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModScorm",this.modName="scorm",this.supportedFeatures=(t={},t[l.a.FEATURE_GROUPS]=!0,t[l.a.FEATURE_GROUPINGS]=!0,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!0,t[l.a.FEATURE_GRADE_OUTCOMES]=!0,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_scorm-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModScormIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(288),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.scormSync=e,this.name="AddonModScormSyncCronHandler"}return e.prototype.execute=function(e,t){return this.scormSync.syncAllScorms(e,t)},e.prototype.getInterval=function(){return this.scormSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModScorm","scorm","a")||this;return n.name="AddonModScormIndexLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(1),i=n(4),l=n(454),a=n(38),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,o,"AddonModScorm","scorm")||this;return r.name="AddonModScormGradeLinkHandler",r.canReview=!1,r}return s(t,e),t=u([Object(o.A)(),c("design:paramtypes",[a.a,i.a,r.a])],t)}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModScorm","scorm")||this;return o.name="AddonModScormListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(516),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModSurvey",this.modName="survey",this.supportedFeatures=(t={},t[l.a.FEATURE_GROUPS]=!0,t[l.a.FEATURE_GROUPINGS]=!0,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!1,t[l.a.FEATURE_GRADE_OUTCOMES]=!1,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_survey-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModSurveyIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModSurvey","survey")||this;return n.name="AddonModSurveyLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModSurvey","survey")||this;return o.name="AddonModSurveyListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(302),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.surveySync=e,this.name="AddonModSurveySyncCronHandler"}return e.prototype.execute=function(e,t){return this.surveySync.syncAllSurveys(e,t)},e.prototype.getInterval=function(){return this.surveySync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(4),i=n(517),l=n(13),a=n(15),s=n(303),u=n(335),c=n(40),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r){this.courseProvider=e,this.urlProvider=t,this.urlHelper=n,this.domUtils=o,this.contentLinksHelper=r,this.name="AddonModUrl",this.modName="url",this.supportedFeatures=(i={},i[c.a.FEATURE_MOD_ARCHETYPE]=c.a.MOD_ARCHETYPE_RESOURCE,i[c.a.FEATURE_GROUPS]=!1,i[c.a.FEATURE_GROUPINGS]=!1,i[c.a.FEATURE_MOD_INTRO]=!0,i[c.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,i[c.a.FEATURE_GRADE_HAS_GRADE]=!1,i[c.a.FEATURE_GRADE_OUTCOMES]=!1,i[c.a.FEATURE_BACKUP_MOODLE2]=!0,i[c.a.FEATURE_SHOW_DESCRIPTION]=!0,i);var i}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){var o=this,r=this,i={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_url-handler",showDownloadButton:!1,action:function(e,t,n,o,i,l){var a=r.domUtils.showModalLoading();r.courseProvider.loadModuleContents(n,o,void 0,!1,!1,void 0,r.modName).then(function(){return r.contentLinksHelper.canHandleLink(n.contents[0].fileurl,o,void 0,!0)}).then(function(e){return!!e||!!r.urlProvider.isGetUrlWSAvailable()&&r.urlProvider.getUrl(o,n.id).catch(function(){}).then(function(e){var t=r.urlProvider.getFinalDisplayType(e);return t==c.a.RESOURCELIB_DISPLAY_OPEN||t==c.a.RESOURCELIB_DISPLAY_POPUP})}).then(function(e){if(e)r.openUrl(n,o);else{var a={module:n,courseId:o};l&&Object.assign(a,l),t.push("AddonModUrlIndexPage",a,i)}}).finally(function(){a.dismiss()})},buttons:[{hidden:!0,icon:"link",label:"core.openinbrowser",action:function(e,t,n,o){r.openUrl(n,o)}}]};return this.hideLinkButton(e,t).then(function(t){i.buttons[0].hidden=t,e.contents&&e.contents[0]&&(i.icon=o.urlProvider.guessIcon(e.contents[0].fileurl)||o.courseProvider.getModuleIconSrc(o.modName,e.modicon))}),i},e.prototype.hideLinkButton=function(e,t){return this.courseProvider.loadModuleContents(e,t,void 0,!1,!1,void 0,this.modName).then(function(){return!(e.contents&&e.contents[0]&&e.contents[0].fileurl)}).catch(function(){return!0})},e.prototype.getMainComponent=function(e,t){return i.a},e.prototype.openUrl=function(e,t){var n=this;this.urlProvider.logView(e.instance,e.name).then(function(){n.courseProvider.checkModuleCompletion(t,e.completiondata)}).catch(function(){}),this.urlHelper.open(e.contents[0].fileurl)},e=d([Object(o.A)(),f("design:paramtypes",[l.a,s.a,u.a,r.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModUrl","url","u")||this;return n.name="AddonModUrlLinkHandler",n.useModNameToGetModule=!0,n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModUrl","url")||this;return o.name="AddonModUrlListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(303),p=n(32),h=n(56),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u){var c=e.call(this,t,n,o,r,i,l,a,s,u)||this;return c.name="AddonModUrl",c.modName="url",c.component=f.a.COMPONENT,c}return m(t,e),t.prototype.download=function(e,t,n){return Promise.resolve()},t.prototype.invalidateModule=function(e,t){return this.courseProvider.invalidateModule(e.id,void 0,this.modName)},t.prototype.isDownloadable=function(e,t){return!1},t.prototype.prefetch=function(e,t,n,o){return Promise.resolve()},t=_([Object(o.A)(),g("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,p.a,h.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(518),i=n(13),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseProvider=e,this.name="AddonModWiki",this.modName="wiki",this.supportedFeatures=(t={},t[l.a.FEATURE_GROUPS]=!0,t[l.a.FEATURE_GROUPINGS]=!0,t[l.a.FEATURE_MOD_INTRO]=!0,t[l.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[l.a.FEATURE_GRADE_HAS_GRADE]=!1,t[l.a.FEATURE_GRADE_OUTCOMES]=!1,t[l.a.FEATURE_BACKUP_MOODLE2]=!0,t[l.a.FEATURE_SHOW_DESCRIPTION]=!0,t[l.a.FEATURE_RATE]=!1,t[l.a.FEATURE_COMMENT]=!0,t);var t}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_wiki-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModWikiIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=a([Object(o.A)(),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(71),f=n(11),p=n(142),h=n(38),m=n(46),_=n(235),g=n(290),v=n(32),y=n(56),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},O=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h,m){var g=e.call(this,t,n,o,r,i,l,a,s,u)||this;return g.wikiProvider=c,g.userProvider=d,g.textUtils=f,g.courseHelper=p,g.groupsProvider=h,g.syncProvider=m,g.name="AddonModWiki",g.modName="wiki",g.component=_.a.COMPONENT,g.updatesNames=/^.*files$|^pages$/,g}return b(t,e),t.prototype.getAllPages=function(e,t,n,o,r){var i=this;return r=r||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getWiki(t,e.id,n,r).then(function(e){return i.wikiProvider.getWikiPageList(e,n,o,r)}).catch(function(){return[]})},t.prototype.getDownloadSize=function(e,t,n){var o=this,r=[],i=this.sitesProvider.getCurrentSiteId();return r.push(this.getFiles(e,t,n,i).then(function(e){return o.pluginFileDelegate.getFilesSize(e)})),r.push(this.getAllPages(e,t,!1,!0,i).then(function(e){var t=0;return e.forEach(function(e){e.contentsize&&(t+=e.contentsize)}),{size:t,total:!0}})),Promise.all(r).then(function(e){return e.reduce(function(e,t){return{size:e.size+t.size,total:e.total&&t.total}},{size:0,total:!0})})},t.prototype.getFiles=function(e,t,n,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getWiki(t,e.id,!1,o).then(function(t){var n=r.getIntroFilesFromInstance(e,t);return r.wikiProvider.getWikiFileList(t,!1,!1,o).then(function(e){return n.concat(e)})}).catch(function(){return[]})},t.prototype.invalidateContent=function(e,t){return this.wikiProvider.invalidateContent(e,t)},t.prototype.prefetch=function(e,t,n,o){var r=this,i=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageData(i,this.component,e.id).catch(function(){}).then(function(o){var l=o&&o.downloadTime||0;return r.prefetchPackage(e,t,n,r.prefetchWiki.bind(r),i,[l])})},t.prototype.prefetchWiki=function(e,t,n,o,r){var i=this,l=this.sitesProvider.getCurrentSiteUserId();return this.getAllPages(e,t,!1,!0,o).then(function(a){var s=[];return a.forEach(function(e){e.timemodified>r&&s.push(i.wikiProvider.getPageContents(e.id,!1,!0,o))}),s.push(i.groupsProvider.getActivityGroupInfo(e.id,!1,l,o)),s.push(i.wikiProvider.getWiki(t,e.id,!1,o).then(function(e){return i.courseHelper.getModuleCourseIdByInstance(e.id,"wiki",o)})),s.push(i.getFiles(e,t,n,o).then(function(t){return i.filepoolProvider.addFilesToQueue(o,t,i.component,e.id)})),Promise.all(s)})},t.prototype.sync=function(e,t,n){return this.syncProvider.syncWiki(e.instance,e.course,e.id,n)},t=P([Object(o.A)(),O("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,v.a,y.a,_.a,m.a,f.a,h.a,d.a,g.a])],t)}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(290),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.wikiSync=e,this.name="AddonModWikiSyncCronHandler"}return e.prototype.execute=function(e,t){return this.wikiSync.syncAllWikis(e,t)},e.prototype.getInterval=function(){return this.wikiSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModWiki","wiki","wid")||this;return n.name="AddonModWikiIndexLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(4),i=n(55),l=n(15),a=n(38),s=n(235),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.domUtils=t,i.wikiProvider=n,i.courseHelper=o,i.linkHelper=r,i.name="AddonModWikiPageOrMapLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModWiki",i.pattern=/\/mod\/wiki\/(view|map)\.php.*([\&\?]pageid=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,i){var l=r.domUtils.showModalLoading(),a=parseInt(n.pageid,10),s=-1!=t.indexOf("mod/wiki/map.php")?"map":"page";r.wikiProvider.getPageContents(a,!1,!1,e).then(function(t){return(o?Promise.resolve(o):r.courseHelper.getModuleCourseIdByInstance(t.wikiid,"wiki",e)).then(function(n){r.linkHelper.goInSite(i,"AddonModWikiIndexPage",{courseId:n,pageId:t.id,pageTitle:t.title,wikiId:t.wikiid,subwikiId:t.subwikiid,action:s},e)})}).catch(function(e){r.domUtils.showErrorModalDefault(e,"addon.mod_wiki.errorloadingpage",!0)}).finally(function(){l.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){var r=-1!=t.indexOf("mod/wiki/map.php");return!(n.id&&!r)&&(!r||void 0===n.option||5==n.option)},t=c([Object(o.A)(),d("design:paramtypes",[r.a,s.a,a.a,l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(4),i=n(55),l=n(15),a=n(13),s=n(38),u=n(235),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,i){var l=e.call(this)||this;return l.domUtils=t,l.wikiProvider=n,l.courseHelper=o,l.linkHelper=r,l.courseProvider=i,l.name="AddonModWikiCreateLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModWiki",l.pattern=/\/mod\/wiki\/create\.php.*([\&\?]swid=\d+)/,l}return c(t,e),t.prototype.currentStateIsSameWiki=function(e,t,n){var o=this;if(e&&"AddonModWikiIndexPage"==e.component.name){if(e.data.subwikiId==t)return Promise.resolve(!0);if(e.data.pageId)return this.wikiProvider.getPageContents(e.data.pageId,!1,!1,n).then(function(e){return e.subwikiid==t}).catch(function(){return!1});if(e.data.wikiId)return this.wikiProvider.wikiHasSubwiki(e.data.wikiId,t,!1,!1,n);if(e.data.courseId&&e.data.module){var r=e.data.module&&e.data.module.id;if(r)return this.wikiProvider.getWiki(e.data.courseId,r,!1,n).then(function(e){return o.wikiProvider.wikiHasSubwiki(e.id,t,!1,!1,n)}).catch(function(){return!1})}}return Promise.resolve(!1)},t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,t){var i=r.domUtils.showModalLoading(),l=parseInt(n.swid,10),a=t&&t.getActive();r.currentStateIsSameWiki(a,l,e).then(function(t){if(t){if(a&&a.data.module&&a.data.module.id)return a.data.module;if(a&&a.data.wikiId)return r.courseProvider.getModuleBasicInfoByInstance(a.data.wikiId,"wiki",e).catch(function(){})}}).then(function(i){r.linkHelper.goInSite(t,"AddonModWikiEditPage",{module:i,courseId:o||i&&i.course||a&&a.data.courseId,pageTitle:n.title,subwikiId:l},e)}).finally(function(){i.dismiss()})}}]},t=d([Object(o.A)(),f("design:paramtypes",[r.a,u.a,s.a,l.a,a.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(11),i=n(55),l=n(15),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.linkHelper=t,o.textUtils=n,o.name="AddonModWikiEditLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModWiki",o.pattern=/\/mod\/wiki\/edit\.php.*([\&\?]pageid=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return o=o||n.courseid||n.cid,[{action:function(e,t){var i="";void 0!==n.section&&(i=n.section.replace(/\+/g," "));var l={courseId:o,section:i,pageId:parseInt(n.pageid,10)};r.linkHelper.goInSite(t,"AddonModWikiEditPage",l,e)}}]},t=s([Object(o.A)(),u("design:paramtypes",[l.a,r.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(113),i=n(15),l=n(3),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,n,"AddonModWiki","wiki")||this;return o.name="AddonModWikiListLinkHandler",o}return a(t,e),t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.c])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(227),i=n(225),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.tagHelper=e,this.name="AddonModWikiTagAreaHandler",this.type="mod_wiki/wiki_pages"}return e.prototype.isEnabled=function(){return!0},e.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1277),i=n(1279),l=n(1281),a=n(1283),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=function(){function e(){}return e=s([Object(o.I)({imports:[r.a,i.a,l.a,a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(670),c=n(1278),d=n(192),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a],providers:[c.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[d.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(184),l=n(670),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.translate=e,this.gradesHelper=t,this.name="AddonModWorkshopAssessmentStrategyAccumulative",this.strategyName="accumulative"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return l.a},e.prototype.getOriginalValues=function(e,t){var n=this,o=this.translate.instant("core.choosedots"),r=[],i=[];return e.fields.forEach(function(t,l){t.dimtitle=n.translate.instant("addon.mod_workshop_assessment_accumulative.dimensionnumber",{$a:t.number}),e.current[l]||(e.current[l]={}),r[l]={peercomment:e.current[l].peercomment||"",number:t.number},e.current[l].grade=e.current[l].grade?parseInt(e.current[l].grade,10):-1;var a=parseInt(t.grade,10),s=e.dimensionsinfo.find(function(e){return e.id==t.dimensionid});i.push(n.gradesHelper.makeGradesMenu(a,void 0,o,-1,s&&a<0?s.scale:null).then(function(n){t.grades=n,r[l].grade=e.current[l].grade}))}),Promise.all(i).then(function(){return r})},e.prototype.hasDataChanged=function(e,t){for(var n in e){if(e[n].grade!=t[n].grade)return!0;if(e[n].peercomment!=t[n].peercomment)return!0}return!1},e.prototype.prepareAssessmentData=function(e,t){var n=this,o={},r={},i=!1;return t.fields.forEach(function(l,a){if(a<t.dimenssionscount){var s=parseInt(e[a].grade,10);!isNaN(s)&&s>=0?o["grade__idx_"+a]=s:(r["grade_"+a]=n.translate.instant("addon.mod_workshop_assessment_accumulative.mustchoosegrade"),i=!0),e[a].peercomment&&(o["peercomment__idx_"+a]=e[a].peercomment),o["gradeid__idx_"+a]=parseInt(t.current[a].gradeid,10)||0,o["dimensionid__idx_"+a]=parseInt(l.dimensionid,10),o["weight__idx_"+a]=parseInt(l.weight,10)||0}}),i?Promise.reject(r):Promise.resolve(o)},e=a([Object(o.A)(),s("design:paramtypes",[r.c,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(671),c=n(1280),d=n(192),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a],providers:[c.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[d.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(671),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyComments",this.strategyName="comments"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,t){var n=this,o=[];return e.fields.forEach(function(t,r){t.dimtitle=n.translate.instant("addon.mod_workshop_assessment_comments.dimensionnumber",{$a:t.number}),e.current[r]||(e.current[r]={}),o[r]={peercomment:e.current[r].peercomment||"",number:t.number}}),Promise.resolve(o)},e.prototype.hasDataChanged=function(e,t){for(var n in e)if(e[n].peercomment!=t[n].peercomment)return!0;return!1},e.prototype.prepareAssessmentData=function(e,t){var n=this,o={},r={},i=!1;return t.fields.forEach(function(l,a){a<t.dimenssionscount&&(e[a].peercomment?o["peercomment__idx_"+a]=e[a].peercomment:(r["peercomment_"+a]=n.translate.instant("core.err_required"),i=!0),o["gradeid__idx_"+a]=parseInt(t.current[a].gradeid,10)||0,o["dimensionid__idx_"+a]=parseInt(l.dimensionid,10))}),i?Promise.reject(r):Promise.resolve(o)},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(672),c=n(1282),d=n(192),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a],providers:[c.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[d.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(672),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyNumErrors",this.strategyName="numerrors"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,t){var n=this,o=[];return e.fields.forEach(function(t,r){t.dimtitle=n.translate.instant("addon.mod_workshop_assessment_numerrors.dimensionnumber",{$a:t.number}),e.current[r]||(e.current[r]={}),o[r]={peercomment:e.current[r].peercomment||"",number:t.number,grade:e.current[r].grade||""}}),Promise.resolve(o)},e.prototype.hasDataChanged=function(e,t){for(var n in e){if(e[n].grade!=t[n].grade)return!0;if(e[n].peercomment!=t[n].peercomment)return!0}return!1},e.prototype.prepareAssessmentData=function(e,t){var n=this,o={},r={},i=!1;return t.fields.forEach(function(l,a){if(a<t.dimenssionscount){var s=parseInt(e[a].grade);isNaN(s)||1!=s&&-1!=s?(r["grade_"+a]=n.translate.instant("core.required"),i=!0):o["grade__idx_"+a]=s,e[a].peercomment&&(o["peercomment__idx_"+a]=e[a].peercomment),o["gradeid__idx_"+a]=parseInt(t.current[a].gradeid,10)||0,o["dimensionid__idx_"+a]=parseInt(l.dimensionid,10),o["weight__idx_"+a]=parseInt(l.weight,10)||0}}),i?Promise.reject(r):Promise.resolve(o)},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(673),c=n(1284),d=n(192),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a],providers:[c.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[d.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(673),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyRubric",this.strategyName="rubric"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,t){var n=this,o=[];return e.fields.forEach(function(t,r){t.dimtitle=n.translate.instant("addon.mod_workshop_assessment_rubric.dimensionnumber",{$a:t.number}),e.current[r]||(e.current[r]={}),o[r]={chosenlevelid:e.current[r].chosenlevelid||"",number:t.number}}),Promise.resolve(o)},e.prototype.hasDataChanged=function(e,t){for(var n in e)if(e[n].chosenlevelid!=(t[n].chosenlevelid||""))return!0;return!1},e.prototype.prepareAssessmentData=function(e,t){var n=this,o={},r={},i=!1;return t.fields.forEach(function(l,a){if(a<t.dimenssionscount){var s=parseInt(e[a].chosenlevelid,10);!isNaN(s)&&s>=0?o["chosenlevelid__idx_"+a]=s:(r["chosenlevelid_"+a]=n.translate.instant("addon.mod_workshop_assessment_rubric.mustchooseone"),i=!0),o["gradeid__idx_"+a]=parseInt(t.current[a].gradeid,10)||0,o["dimensionid__idx_"+a]=parseInt(l.dimensionid,10)}}),i?Promise.reject(r):Promise.resolve(o)},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(519),i=n(13),l=n(175),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.workshopProvider=t,this.name="AddonModWorkshop",this.modName="workshop",this.supportedFeatures=(n={},n[a.a.FEATURE_GROUPS]=!0,n[a.a.FEATURE_GROUPINGS]=!0,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!0,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n[a.a.FEATURE_PLAGIARISM]=!0,n);var n}return e.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_workshop-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModWorkshopIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(175),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,l.a.COMPONENT,"workshop","w")||this;return o.workshopProvider=n,o.name="AddonModWorkshopLinkHandler",o}return a(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.workshopProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(175),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModWorkshop","workshop")||this;return r.workshopProvider=o,r.name="AddonModWorkshopListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(142),f=n(71),p=n(46),h=n(175),m=n(291),_=n(202),g=n(32),v=n(56),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,m){var _=e.call(this,t,n,o,r,i,l,a,s,u)||this;return _.groupsProvider=c,_.userProvider=d,_.workshopProvider=f,_.workshopHelper=p,_.syncProvider=m,_.name="AddonModWorkshop",_.modName="workshop",_.component=h.a.COMPONENT,_.updatesNames=new RegExp("^configuration$|^.*files$|^completion|^gradeitems$|^outcomes$|^submissions$|^assessments$|^assessmentgrades$|^usersubmissions$|^userassessments$|^userassessmentgrades$|^userassessmentgrades$"),_}return y(t,e),t.prototype.getFiles=function(e,t,n){return this.getWorkshopInfoHelper(e,t,!0).then(function(e){return e.files})},t.prototype.getWorkshopInfoHelper=function(e,t,n,o,r,i){var l=this;void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r=!1);var a,s,u=[],c=[];return this.sitesProvider.getSite(i).then(function(n){var r=n.getUserId();return l.workshopProvider.getWorkshop(t,e.id,i,o).then(function(t){return c=l.getIntroFilesFromInstance(e,t),c=c.concat(t.instructauthorsfiles).concat(t.instructreviewersfiles),a=t,l.workshopProvider.getWorkshopAccessInformation(a.id,!1,!0,i).then(function(t){if((s=t).canviewallsubmissions)return l.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,i).then(function(e){e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),u=e.groups})})}).then(function(){return l.workshopProvider.getUserPlanPhases(a.id,!1,!0,i).then(function(e){var t=l.workshopHelper.canSubmit(a,s,e[h.a.PHASE_SUBMISSION].tasks),n=l.workshopHelper.canAssess(a,s),o=[];return t&&o.push(l.workshopHelper.getUserSubmission(a.id,r).then(function(e){e&&(c=c.concat(e.contentfiles).concat(e.attachmentfiles))})),s.canviewallsubmissions&&a.phase>=h.a.PHASE_SUBMISSION&&o.push(l.workshopProvider.getSubmissions(a.id).then(function(e){var t=[];return e.forEach(function(e){c=c.concat(e.contentfiles).concat(e.attachmentfiles),t.push(l.workshopProvider.getSubmissionAssessments(a.id,e.id).then(function(e){e.forEach(function(e){c=c.concat(e.feedbackattachmentfiles).concat(e.feedbackcontentfiles)})}))}),Promise.all(t)})),a.phase>=h.a.PHASE_ASSESSMENT&&n&&o.push(l.workshopHelper.getReviewerAssessments(a.id).then(function(e){e.forEach(function(e){c=c.concat(e.feedbackattachmentfiles).concat(e.feedbackcontentfiles)})})),Promise.all(o)})})}).then(function(){return{workshop:a,groups:u,files:c.filter(function(e){return void 0!==e})}}).catch(function(e){return n?{workshop:a,groups:u,files:c.filter(function(e){return void 0!==e})}:Promise.reject(e)})},t.prototype.invalidateContent=function(e,t){return this.workshopProvider.invalidateContent(e,t)},t.prototype.isDownloadable=function(e,t){var n=this;return this.workshopProvider.getWorkshop(t,e.id,void 0,!0).then(function(e){return n.workshopProvider.getWorkshopAccessInformation(e.id).then(function(t){return t.canswitchphase||e.phase>h.a.PHASE_SETUP})})},t.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,n,this.prefetchWorkshop.bind(this))},t.prototype.getAllGradesReport=function(e,t,n){var o=this,r=[];return t.forEach(function(t){r.push(o.workshopProvider.fetchAllGradeReports(e,t.id,void 0,!1,!1,n))}),Promise.all(r).then(function(e){var t={};return e.forEach(function(e){e.forEach(function(e){e.submissionid&&(t[e.submissionid]=e)})}),o.utils.objectToArray(t)})},t.prototype.prefetchWorkshop=function(e,t,n,o){var r=this,i=[];return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(n){var l=n.getUserId();return r.getWorkshopInfoHelper(e,t,!1,!1,!0,o).then(function(t){var n=t.workshop,a=[],s=[];return a.push(r.filepoolProvider.addFilesToQueue(o,t.files,r.component,e.id)),a.push(r.workshopProvider.getWorkshopAccessInformation(n.id,!1,!0,o).then(function(a){return r.workshopProvider.getUserPlanPhases(n.id,!1,!0,o).then(function(u){var c=r.workshopHelper.canSubmit(n,a,u[h.a.PHASE_SUBMISSION].tasks),d=r.workshopHelper.canAssess(n,a),f=[];c&&(f.push(r.workshopProvider.getSubmissions(n.id)),i.push(l));var p=Promise.resolve();return a.canviewallsubmissions&&n.phase>=h.a.PHASE_SUBMISSION&&(p=r.getAllGradesReport(n.id,t.groups,o).then(function(e){e.forEach(function(e){i.push(e.userid),i.push(e.gradeoverby),e.reviewedby&&e.reviewedby.forEach(function(e){i.push(e.userid),i.push(e.gradinggradeoverby),s[e.assessmentid]=e}),e.reviewerof&&e.reviewerof.forEach(function(e){i.push(e.userid),i.push(e.gradinggradeoverby),s[e.assessmentid]=e})})})),n.phase>=h.a.PHASE_ASSESSMENT&&d&&(p=p.finally(function(){return r.workshopHelper.getReviewerAssessments(n.id,l,void 0,void 0,o).then(function(t){var a=[],u=[];return t.forEach(function(e){e.submission.authorid==l&&a.push(r.workshopProvider.getAssessment(n.id,e.id)),i.push(e.reviewerid),i.push(e.gradinggradeoverby),s[e.id]=e,u=u.concat(e.submission.attachmentfiles||[]).concat(e.submission.contentfiles||[])}),a.push(r.filepoolProvider.addFilesToQueue(o,u,r.component,e.id)),Promise.all(a)})})),p=p.finally(function(){if(s.length>0)return Promise.all(s.map(function(e,t){return r.workshopProvider.getAssessmentForm(n.id,t,void 0,void 0,void 0,o)}))}),f.push(p),n.phase==h.a.PHASE_CLOSED&&(f.push(r.workshopProvider.getGrades(n.id)),a.canviewpublishedsubmissions&&f.push(r.workshopProvider.getSubmissions(n.id))),Promise.all(f)})})),a.push(r.courseProvider.getModuleBasicInfoByInstance(n.id,"workshop",o)),a.push(r.courseProvider.getModuleBasicGradeInfo(e.id,o)),Promise.all(a)})}).then(function(){return r.userProvider.prefetchProfiles(i,t,o).catch(function(){})})},t.prototype.sync=function(e,t,n){return this.syncProvider.syncWorkshop(e.instance,n)},t=b([Object(o.A)(),P("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,g.a,v.a,f.a,p.a,h.a,_.a,m.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(291),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.workshopSync=e,this.name="AddonModWorkshopSyncCronHandler"}return e.prototype.execute=function(e,t){return this.workshopSync.syncAllWorkshops(e,t)},e.prototype.getInterval=function(){return this.workshopSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(260),i=n(13),l=n(529),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.notesProvider=e,this.name="AddonNotes",this.priority=200}return e.prototype.isEnabled=function(){return this.notesProvider.isPluginEnabled()},e.prototype.isEnabledForCourse=function(e,t,n,o){return(!t||t.type!=i.a.ACCESS_GUEST)&&(n&&void 0!==n.notes?n.notes:this.notesProvider.isPluginViewNotesEnabledForCourse(e))},e.prototype.getDisplayData=function(e,t){return{title:"addon.notes.notes",class:"addon-notes-course-handler",component:l.a}},e.prototype.prefetch=function(e){return this.notesProvider.getNotes(e.id,void 0,!0)},e=a([Object(o.A)(),s("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(336),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.notesSync=e,this.name="AddonNotesSyncCronHandler"}return e.prototype.execute=function(e,t){return this.notesSync.syncAllNotes(e,t)},e.prototype.getInterval=function(){return 3e5},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(9),i=n(46),l=n(104),a=n(15),s=n(1),u=n(260),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o){var a=this;this.linkHelper=e,this.sitesProvider=t,this.notesProvider=n,this.name="AddonNotes:notes",this.priority=100,this.type=l.a.TYPE_NEW_PAGE,this.noteEnabledCache={},o.on(r.a.LOGOUT,this.clearNoteCache.bind(this)),o.on(i.a.PROFILE_REFRESHED,function(e){a.clearNoteCache(e.courseId)})}return e.prototype.clearNoteCache=function(e){e?delete this.noteEnabledCache[e]:this.noteEnabledCache={}},e.prototype.isEnabled=function(){return this.notesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){var r=this;return!(!t||e.id==this.sitesProvider.getCurrentSiteUserId())&&(void 0!==this.noteEnabledCache[t]?this.noteEnabledCache[t]:this.notesProvider.isPluginViewNotesEnabledForCourse(t).then(function(e){return r.noteEnabledCache[t]=e,e}))},e.prototype.getDisplayData=function(e,t){var n=this;return{icon:"list",title:"addon.notes.notes",class:"addon-notes-handler",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),n.linkHelper.goInSite(t,"AddonNotesListPage",{userId:o.id,courseId:r})}}},e=c([Object(o.A)(),d("design:paramtypes",[a.a,s.a,u.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(9),i=n(1),l=n(2),a=n(256),s=n(136),u=n(144),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,i,l){var s=this;this.sitesProvider=t,this.notificationsProvider=o,this.pushNotificationsProvider=i,this.name="AddonNotifications",this.priority=700,this.handler={icon:"notifications",title:"addon.notifications.notifications",page:"AddonNotificationsListPage",class:"addon-notifications-handler",showBadge:!0,badge:"",loading:!0},e.on(a.a.READ_CHANGED_EVENT,function(e){s.updateBadge(e.siteId)}),e.on(a.a.READ_CRON_EVENT,function(e){s.updateBadge(e.siteId)}),e.on(r.a.LOGOUT,function(e){s.handler.badge="",s.handler.loading=!0}),l.on("receive").subscribe(function(e){n.isTrueOrOne(e.notif)&&s.sitesProvider.isCurrentSite(e.site)&&s.updateBadge(e.site)}),l.registerCounterHandler("AddonNotifications")}return e.prototype.isEnabled=function(){return!0},e.prototype.getDisplayData=function(){return this.handler.loading&&this.updateBadge(),this.handler},e.prototype.updateBadge=function(e){var t=this;(e=e||this.sitesProvider.getCurrentSiteId())&&this.notificationsProvider.getUnreadNotificationsCount(null,e).then(function(n){t.handler.badge=n>0?String(n):"",t.pushNotificationsProvider.updateAddonCounter("AddonNotifications",n,e)}).catch(function(){t.handler.badge=""}).finally(function(){t.handler.loading=!1})},e=c([Object(o.A)(),d("design:paramtypes",[r.a,i.a,l.a,a.a,s.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(256),i=n(10),l=n(151),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.appProvider=e,this.localNotificationsProvider=t,this.notificationsProvider=n,this.name="AddonNotifications",this.priority=500}return e.prototype.isEnabled=function(){return this.notificationsProvider.isNotificationPreferencesEnabled()||this.localNotificationsProvider.isAvailable()&&!this.appProvider.isDesktop()},e.prototype.getDisplayData=function(){return{icon:"notifications",title:"addon.notifications.notifications",page:"AddonNotificationsSettingsPage",class:"addon-notifications-settings-handler"}},e=a([Object(o.A)(),s("design:paramtypes",[i.a,l.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(10),i=n(9),l=n(151),a=n(1),s=n(11),u=n(310),c=n(256),d=n(520),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l,a){this.appProvider=e,this.eventsProvider=t,this.sitesProvider=n,this.localNotifications=o,this.notificationsProvider=r,this.textUtils=i,this.emulatorHelper=l,this.notificationsHelper=a,this.name="AddonNotificationsCronHandler"}return e.prototype.getInterval=function(){return this.appProvider.isDesktop()?6e4:6e5},e.prototype.isSync=function(){return!this.notificationsProvider.isPreciseNotificationCountEnabled()||this.appProvider.isDesktop()},e.prototype.canManualSync=function(){return!0},e.prototype.execute=function(e,t){return this.sitesProvider.isCurrentSite(e)&&this.eventsProvider.trigger(c.a.READ_CRON_EVENT,{},this.sitesProvider.getCurrentSiteId()),this.appProvider.isDesktop()&&this.localNotifications.isAvailable()&&this.emulatorHelper.checkNewNotifications(c.a.PUSH_SIMULATION_COMPONENT,this.fetchNotifications.bind(this),this.getTitleAndText.bind(this),e),Promise.resolve(null)},e.prototype.fetchNotifications=function(e){return this.notificationsHelper.getNotifications([],void 0,!0,!1,!0,e).then(function(e){return e.notifications})},e.prototype.getTitleAndText=function(e){var t={title:e.subject||e.userfromfullname,text:e.mobiletext.replace(/-{4,}/gi,"")};return t.text=this.textUtils.replaceNewLines(t.text,"<br>"),Promise.resolve(t)},e=f([Object(o.A)(),p("design:paramtypes",[r.a,i.a,a.a,l.a,c.a,s.a,u.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(9),i=n(2),l=n(15),a=n(256),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.utils=e,this.notificationsProvider=t,this.linkHelper=n,this.eventsProvider=o,this.name="AddonNotificationsPushClickHandler",this.priority=0,this.featureName="CoreMainMenuDelegate_AddonNotifications"}return e.prototype.handles=function(e){var t=this;if(this.utils.isTrueOrOne(e.notif)){return this.notificationsProvider.markNotificationRead(e.savedmessageid||e.id,e.site).then(function(){t.eventsProvider.trigger(a.a.READ_CHANGED_EVENT,null,e.site)}).catch(function(){}),!0}return!1},e.prototype.handleClick=function(e){var t=this;return(e.customdata&&e.customdata.appurl?this.linkHelper.handleLink(e.customdata.appurl,void 0,void 0,!0):Promise.resolve(!1)).then(function(n){return!!n||!!e.contexturl&&t.linkHelper.handleLink(e.contexturl)}).then(function(n){if(!n)return t.notificationsProvider.invalidateNotificationsList(e.site).catch(function(){}).then(function(){return t.linkHelper.goInSite(void 0,"AddonNotificationsListPage",void 0,e.site)})})},e=s([Object(o.A)(),u("design:paramtypes",[i.a,a.a,l.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(171),i=n(10),l=n(57),a=n(18),s=n(6),u=n(1),c=n(2),d=n(40),f=n(194),p=(n.n(f),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}),h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},_=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},g=function(){function e(e,t,n,o,r,i,l){this.sitesProvider=t,this.fileProvider=n,this.filepoolProvider=o,this.wsProvider=r,this.utils=i,this.appProvider=l,this.SEPARATOR_35=/\/\*\*? *3\.5(\.0)? *styles? *\*\//i,this.stylesEls={},this.logger=e.getInstance("AddonRemoteThemesProvider")}return t=e,e.prototype.addSite=function(e){var t=this;if(!e||this.stylesEls[e])return Promise.resolve();var n=document.createElement("style");return n.setAttribute("id","mobilecssurl-"+e),this.disableElement(n,!0),document.head.appendChild(n),this.stylesEls[e]={element:n,hash:""},this.load(e,!0).catch(function(e){t.logger.error("Error loading site after site init",e)})},e.prototype.clear=function(){var e=this;Array.from(document.querySelectorAll("style[id*=mobilecssurl]")).forEach(function(t){e.disableElement(t,!0)}),this.appProvider.setStatusBarColor()},e.prototype.disableElement=function(e,t){t?(e.disabled=!0,e.setAttribute("disabled","disabled")):(e.disabled=!1,e.removeAttribute("disabled"),""!=e.innerHTML&&this.appProvider.resetStatusBarColor())},e.prototype.downloadFileAndRemoveOld=function(e,n){var o=this;return this.filepoolProvider.getFileStateByUrl(e,n).then(function(e){return e!==d.a.NOT_DOWNLOADED}).catch(function(){return!0}).then(function(n){if(!n)return o.filepoolProvider.removeFilesByComponent(e,t.COMPONENT,1)}).then(function(){return o.filepoolProvider.downloadUrl(e,n,!1,t.COMPONENT,1)})},e.prototype.enable=function(e){e=e||this.sitesProvider.getCurrentSiteId(),this.stylesEls[e]&&this.disableElement(this.stylesEls[e].element,!1)},e.prototype.get=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(e).then(function(o){var r,i=o.getInfo();if(i&&i.mobilecssurl)return r=i.mobilecssurl,(n.fileProvider.isAvailable()?n.downloadFileAndRemoveOld(e,r):Promise.resolve(r)).then(function(e){return m(n,void 0,void 0,function(){var t;return _(this,function(n){switch(n.label){case 0:return this.logger.debug("Loading styles from: ",e),[4,this.wsProvider.getText(e)];case 1:return t=n.sent(),[2,{fileUrl:r,styles:this.get35Styles(t)}]}})})});i&&""===i.mobilecssurl&&n.filepoolProvider.removeFilesByComponent(e,t.COMPONENT,1)})},e.prototype.get35Styles=function(e){var t=e.search(this.SEPARATOR_35);return t>-1?e.substr(t).replace(this.SEPARATOR_35,""):e},e.prototype.load=function(e,n){var o=this;return e=e||this.sitesProvider.getCurrentSiteId(),n=!!n,this.logger.debug("Load site",e,n),e&&this.stylesEls[e]?(this.disableElement(this.stylesEls[e].element,n),this.get(e).then(function(r){if(void 0!==r){var i=f.Md5.hashAsciiStr(r.styles);o.stylesEls[e].hash!==i&&(o.stylesEls[e].element.innerHTML=r.styles,o.stylesEls[e].hash=i,n&&o.disableElement(o.stylesEls[e].element,!0)),o.filepoolProvider.treatCSSCode(e,r.fileUrl,r.styles,t.COMPONENT,2).catch(function(){})}})):Promise.reject(null)},e.prototype.loadTmpStyles=function(e){var t=this;return e?this.wsProvider.getText(e).then(function(e){e=t.get35Styles(e);var n=document.createElement("style");n.setAttribute("id","mobilecssurl-tmpsite"),n.innerHTML=e,document.head.appendChild(n),t.stylesEls.tmpsite={element:n,hash:""}}):Promise.resolve()},e.prototype.preloadCurrentSite=function(){var e=this;return this.sitesProvider.getStoredCurrentSiteId().then(function(t){return e.addSite(t)},function(){})},e.prototype.preloadSites=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(t){var n=[];return t.forEach(function(t){n.push(e.addSite(t))}),e.utils.allPromises(n)})},e.prototype.removeSite=function(e){e&&this.stylesEls[e]&&(document.head.removeChild(this.stylesEls[e].element),delete this.stylesEls[e])},e.prototype.unloadTmpStyles=function(){return this.removeSite("tmpsite")},e.COMPONENT="mmaRemoteStyles",e=t=p([Object(o.A)(),h("design:paramtypes",[s.a,u.a,l.a,a.a,r.a,c.a,i.a])],e);var t}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(126),i=n(154),l=n(6),a=n(116),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.configProvider=t,this.name="CoreUpdateManager",this.priority=i.a.MAX_RECOMMENDED_PRIORITY+300,this.blocking=!0,this.VERSION_APPLIED="version_applied",this.logger=e.getInstance("CoreUpdateManagerProvider")}return e.prototype.load=function(){var e=this,t=[],n=a.a.versioncode;return this.configProvider.get(this.VERSION_APPLIED,0).then(function(o){return Promise.all(t).then(function(){return e.configProvider.set(e.VERSION_APPLIED,n)}).catch(function(t){e.logger.error("Error applying update from "+o+" to "+n,t)})})},e=s([Object(o.A)(),u("design:paramtypes",[l.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(1),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,a)}s((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(n){return function(l){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var o,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},u=function(){function e(e){this.sitesProvider=e,this.name="CoreSiteInfoCronHandler"}return e.prototype.execute=function(e){return a(this,void 0,void 0,function(){var t,n=this;return s(this,function(o){switch(o.label){case 0:return e?[3,2]:[4,this.sitesProvider.getSitesIds()];case 1:return t=o.sent(),[2,Promise.all(t.map(function(e){return n.sitesProvider.updateSiteInfo(e)}))];case 2:return[2,this.sitesProvider.updateSiteInfo(e)]}})})},e.prototype.getInterval=function(){return 36e5},e.prototype.isSync=function(){return!1},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(31),i=n(325),l=n(727),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){e.initDomSettings()}return e=a([Object(o.I)({declarations:[],imports:[r.a],providers:[i.a,l.a]}),s("design:paramtypes",[l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(58),i=n(1303),l=n(741),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=[r.a,i.a],c=function(){function e(e){}return e=a([Object(o.I)({declarations:[],imports:[l.a],providers:u}),s("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";var o=n(0),r=n(3),i=n(10),l=n(9),a=n(18),s=n(150),u=n(6),c=n(1),d=n(4),f=n(11),p=n(22),h=n(2),m=n(58),_=n(155),g=n(128),v=n(13),y=n(52),b=n(32),P=n(56),O=n(171),E=n(170),C=n(61),I=n(50),R=n(102),S=n(178),w=n(104),A=n(191),D=n(325),j=n(73),k=n(117),T=n(393),x=n(129),M=n(152),N=n(166),U=n(192),F=function(){function e(e){this.name=e}return e.prototype.isEnabled=function(){return!0},e}(),L=n(457),H=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),B=function(e){function t(t,n,o){var r=e.call(this,t)||this;return r.format=n,r.handlerSchema=o,r}return H(t,e),t.prototype.canViewAllSections=function(e){return void 0===this.handlerSchema.canviewallsections||this.handlerSchema.canviewallsections},t.prototype.displayEnableDownload=function(e){return void 0===this.handlerSchema.displayenabledownload||this.handlerSchema.displayenabledownload},t.prototype.displaySectionSelector=function(e){return void 0===this.handlerSchema.displaysectionselector||this.handlerSchema.displaysectionselector},t.prototype.getCourseFormatComponent=function(e,t){if(this.handlerSchema.method)return L.a},t}(F),q=n(456),G=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),V=function(e){function t(t,n,o,r,i,l,a){var s=e.call(this,t)||this;return s.title=n,s.plugin=o,s.handlerSchema=r,s.initResult=i,s.sitePluginsProvider=l,s.utils=a,s.priority=r.priority,s.isMenuHandler=!!r.ismenuhandler,s}return G(t,e),t.prototype.isEnabledForCourse=function(e,t,n,o){var r=this;return(this.updatingDefer?this.updatingDefer.promise:Promise.resolve()).then(function(){return r.sitePluginsProvider.isHandlerEnabledForCourse(e,r.handlerSchema.restricttoenrolledcourses,r.initResult.restrict)})},t.prototype.getDisplayData=function(e,t){return{title:this.title,class:this.handlerSchema.displaydata.class,component:q.a,componentData:{handlerUniqueName:this.name}}},t.prototype.getMenuDisplayData=function(e,t){return{title:this.title,class:this.handlerSchema.displaydata.class,icon:this.handlerSchema.displaydata.icon||"",page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,args:{courseid:t.id},initResult:this.initResult}}},t.prototype.prefetch=function(e){return this.sitePluginsProvider.prefetchFunctions(this.plugin.component,{courseid:e.id},this.handlerSchema,e.id,void 0,!0)},t.prototype.setInitResult=function(e){this.initResult=e,this.updatingDefer.resolve(),delete this.updatingDefer},t.prototype.updatingInit=function(){this.updatingDefer=this.utils.promiseDefer()},t}(F),K=n(392),W=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),z=function(e){function t(t,n,o,r,i,l,a){var s=e.call(this,t)||this;return s.modName=n,s.plugin=o,s.handlerSchema=r,s.initResult=i,s.sitePluginsProvider=l,s.logger=a.getInstance("CoreSitePluginsModuleHandler"),s.supportedFeatures=r.supportedfeatures,i&&i.jsResult&&i.jsResult.supportsFeature&&(s.supportsFeature=i.jsResult.supportsFeature.bind(i.jsResult)),s}return W(t,e),t.prototype.getData=function(e,t,n,o){var r=this,i=o&&this.handlerSchema.coursepagemethod;if(e.noviewlink&&!i){var l=e.description;return e.description="",{icon:this.handlerSchema.displaydata.icon,title:l,a11yTitle:"",class:this.handlerSchema.displaydata.class}}var a=!(!this.handlerSchema.offlinefunctions||!Object.keys(this.handlerSchema.offlinefunctions).length),s=this.handlerSchema.downloadbutton,u={title:e.name,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,showDownloadButton:void 0!==s?s:a};if(this.handlerSchema.method&&(u.action=function(e,t,n,o,r){e.preventDefault(),e.stopPropagation(),t.push("CoreSitePluginsModuleIndexPage",{title:n.name,module:n,courseId:o},r)}),i&&0!==e.visibleoncoursepage){u.loading=!0;this.sitePluginsProvider.getContent(this.plugin.component,this.handlerSchema.coursepagemethod,{courseid:t,cmid:e.id}).then(function(t){u.title=t.templates&&t.templates[0]?t.templates[0].html:"",e.description=""}).catch(function(e){r.logger.error("Error calling course page method:",e)}).finally(function(){u.loading=!1})}return u},t.prototype.getIconSrc=function(){return this.handlerSchema.displaydata.icon},t.prototype.getMainComponent=function(e,t,n){return K.a},t}(F),$=n(142),Y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h){var m=e.call(this,t,n,o,r,i,l,a,s,u)||this;if(m.sitePluginsProvider=c,m.handlerSchema=h,m.ROOT_CACHE_KEY="CoreSitePluginsModulePrefetchHandler:",m.component=d,m.name=f,m.modName=p,m.isResource=h.isresource,h.updatesnames)try{m.updatesNames=new RegExp(h.updatesnames)}catch(e){}return m}return Y(t,e),t.prototype.download=function(e,t,n){return this.prefetchPackage(e,t,!1,this.downloadPrefetchPlugin.bind(this),void 0,!1,n)},t.prototype.downloadPrefetchPlugin=function(e,t,n,o,r,i){var l=this;return this.sitesProvider.getSite(o).then(function(n){var o=[],a={courseid:t,cmid:e.id,userid:n.getUserId()};return o.push(l.downloadOrPrefetchFiles(n.id,e,t,r,i)),o.push(l.sitePluginsProvider.prefetchFunctions(l.component,a,l.handlerSchema,t,e,r,i,n)),Promise.all(o)})},t.prototype.downloadOrPrefetchFiles=function(e,t,n,o,r){var i=this;return this.loadContents(t,n,!0).then(function(){return i.getIntroFiles(t,n)}).then(function(n){var l=i.getContentDownloadableFiles(t),a=[];if(r)a.push(i.filepoolProvider.downloadOrPrefetchFiles(e,n,o,!1,i.component,t.id)),a.push(i.filepoolProvider.downloadOrPrefetchFiles(e,l,o,!1,i.component,t.id,r));else{var s=n.concat(l);a.push(i.filepoolProvider.downloadOrPrefetchFiles(e,s,o,!1,i.component,t.id))}return Promise.all(a)})},t.prototype.getDownloadSize=function(e,t,n){return Promise.resolve({size:-1,total:!1})},t.prototype.invalidateContent=function(e,t){var n=[],o=this.sitesProvider.getCurrentSite(),r=o.getId(),i={courseid:t,cmid:e,userid:o.getUserId()};n.push(this.filepoolProvider.invalidateFilesByComponent(r,this.component,e)),n.push(this.courseProvider.invalidateModule(e,r));for(var l in this.handlerSchema.offlinefunctions)o.wsAvailable(l)?n.push(o.invalidateWsCacheForKey(this.sitePluginsProvider.getCallWSCacheKey(l,i))):n.push(this.sitePluginsProvider.invalidateContent(this.component,l,i));return this.utils.allPromises(n)},t.prototype.isEnabled=function(){return!0},t.prototype.loadContents=function(e,t,n){return this.isResource?this.courseProvider.loadModuleContents(e,t,void 0,!1,n):Promise.resolve()},t.prototype.prefetch=function(e,t,n,o){return this.prefetchPackage(e,t,!1,this.downloadPrefetchPlugin.bind(this),void 0,!0,o)},t}($.a),X=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=function(e){function t(t,n,o,r,i){var l=e.call(this,t)||this;return l.title=n,l.plugin=o,l.handlerSchema=r,l.initResult=i,l.priority=r.priority,l}return X(t,e),t.prototype.getDisplayData=function(){return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult},onlyInMore:!0}},t}(F),Z=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ee=function(e){function t(t,n,o,r,i,l,a){var s=e.call(this,t)||this;return s.title=n,s.plugin=o,s.handlerSchema=r,s.initResult=i,s.sitePluginsProvider=l,s.utils=a,s.priority=r.priority,s.type=r.type!=w.a.TYPE_COMMUNICATION?w.a.TYPE_NEW_PAGE:w.a.TYPE_COMMUNICATION,s}return Z(t,e),t.prototype.isEnabledForUser=function(e,t,n,o){return!!this.sitePluginsProvider.isHandlerEnabledForUser(e.id,this.handlerSchema.restricttocurrentuser,this.initResult.restrict)&&this.sitePluginsProvider.isHandlerEnabledForCourse(t,this.handlerSchema.restricttoenrolledcourses,this.initResult.restrict)},t.prototype.getDisplayData=function(e,t){var n=this;return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),t.push("CoreSitePluginsPluginPage",{title:n.title,component:n.plugin.component,method:n.handlerSchema.method,args:{courseid:r,userid:o.id},initResult:n.initResult})}}},t.prototype.setInitResult=function(e){this.initResult=e,this.updatingDefer.resolve(),delete this.updatingDefer},t.prototype.updatingInit=function(){this.updatingDefer=this.utils.promiseDefer()},t}(F),te=n(460),ne=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=function(e){function t(t,n){var o=e.call(this,t)||this;return o.type=n,o}return ne(t,e),t.prototype.getComponent=function(e){return te.a},t.prototype.getData=function(e,t,n,o){var r="profile_field_"+e.shortname;return{type:e.type||e.datatype,name:r,value:o[r]}},t}(F),re=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ie=function(e){function t(t,n,o,r,i){var l=e.call(this,t)||this;return l.title=n,l.plugin=o,l.handlerSchema=r,l.initResult=i,l.priority=r.priority,l}return re(t,e),t.prototype.getDisplayData=function(){return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,page:"CoreSitePluginsPluginPage",params:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult}}},t}(F),le=n(1088),ae=n(458),se=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ue=function(e){function t(t,n){var o=e.call(this)||this;return o.name=t,o.type=n,o}return se(t,e),t.prototype.getComponent=function(e){return ae.a},t}(le.a),ce=n(1089),de=n(459),fe=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pe=function(e){function t(t,n,o,r){var i=e.call(this,t)||this;return i.name=n,i.type=o,i.hasTemplate=r,i}return fe(t,e),t.prototype.handleQuestion=function(e,t){if(this.hasTemplate)return[de.a]},t}(ce.a),he=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t)||this;return a.processorName=n,a.title=o,a.plugin=r,a.handlerSchema=i,a.initResult=l,a}return he(t,e),t.prototype.getDisplayData=function(){return{priority:this.handlerSchema.priority,label:this.title,icon:this.handlerSchema.displaydata.icon,page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult}}},t}(F),_e=n(461),ge=function(){function e(e,t,n){this.name=e,this.ruleName=t,this.hasTemplate=n}return e.prototype.isPreflightCheckRequired=function(e,t,n,o){return this.hasTemplate},e.prototype.getFixedPreflightData=function(e,t,n,o,r){},e.prototype.getPreflightComponent=function(e){if(this.hasTemplate)return _e.a},e.prototype.notifyPreflightCheckPassed=function(e,t,n,o,r){},e.prototype.notifyPreflightCheckFailed=function(e,t,n,o,r){},e.prototype.shouldShowTimeLeft=function(e,t,n){return!1},e}(),ve=n(1054),ye=n(462),be=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pe=function(e){function t(t,n,o,r){var i=e.call(this,t)||this;return i.name=n,i.type=o,i.prefix=r,i}return be(t,e),t.prototype.getComponent=function(e,t,n){return ye.a},t.prototype.getPluginName=function(e){var t=this.prefix+"pluginname",n=this.translate.instant(t);return t!=n?n:e.name?e.name:void 0},t}(ve.a),Oe=n(1056),Ee=n(463),Ce=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ie=function(e){function t(t,n,o,r){var i=e.call(this,t)||this;return i.name=n,i.type=o,i.prefix=r,i}return Ce(t,e),t.prototype.getComponent=function(e,t,n){return Ee.a},t.prototype.getPluginName=function(e){var t=this.prefix+"pluginname",n=this.translate.instant(t);return t!=n?n:e.name?e.name:void 0},t.prototype.isEnabledForEdit=function(){return!0},t}(Oe.a),Re=n(677),Se=function(){function e(e,t){this.name=e,this.strategyName=t}return e.prototype.getComponent=function(e){return Re.a},e.prototype.getOriginalValues=function(e,t){return Promise.resolve([])},e.prototype.hasDataChanged=function(e,t){return!1},e.prototype.isEnabled=function(){return!0},e.prototype.prepareAssessmentData=function(e,t){return Promise.resolve({})},e}(),we=n(60),Ae=n(157),De=n(455),je=n(678),ke=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Te=function(e){function t(t,n,o,r,i){var l=e.call(this,t)||this;return l.title=n,l.blockName=o,l.handlerSchema=r,l.initResult=i,l}return ke(t,e),t.prototype.getDisplayData=function(e,t,n,o){var r,i;return r=this.handlerSchema.displaydata&&this.handlerSchema.displaydata.class?this.handlerSchema.displaydata.class:"block_"+t.name,i=this.handlerSchema.displaydata&&"title"==this.handlerSchema.displaydata.type?je.a:this.handlerSchema.displaydata&&"prerendered"==this.handlerSchema.displaydata.type?Ae.a:De.a,{title:this.title,class:r,component:i}},t}(F);n.d(t,"a",function(){return Ne});var xe=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},Me=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ne=function(){function e(e,t,n,o,r,i,a,s,u,c,d,f,p,h,m,_,g,v,b,P,O,E,C,I,R,S,w,A,D,j,k,T,x,M){var N=this;this.loggerProvider=e,this.sitesProvider=t,this.domUtils=n,this.mainMenuDelegate=o,this.moduleDelegate=r,this.userDelegate=i,this.langProvider=a,this.wsProvider=s,this.sitePluginsProvider=u,this.prefetchDelegate=c,this.compileProvider=d,this.utils=f,this.urlUtils=p,this.courseOptionsDelegate=h,this.eventsProvider=m,this.courseFormatDelegate=_,this.profileFieldDelegate=g,this.textUtils=v,this.filepoolProvider=b,this.settingsDelegate=P,this.questionDelegate=O,this.questionBehaviourDelegate=E,this.questionProvider=C,this.messageOutputDelegate=I,this.accessRulesDelegate=R,this.assignSubmissionDelegate=S,this.translate=w,this.assignFeedbackDelegate=A,this.appProvider=D,this.workshopAssessmentStrategyDelegate=j,this.courseProvider=k,this.blockDelegate=T,this.filterHelper=x,this.pluginFileDelegate=M,this.HANDLER_DISABLED="core_site_plugins_helper_handler_disabled",this.courseRestrictHandlers={},this.logger=e.getInstance("CoreSitePluginsHelperProvider"),m.on(l.a.LOGIN,function(e){N.fetchSitePlugins(e.siteId).then(function(t){e.siteId==N.sitesProvider.getCurrentSiteId()&&t.length&&N.loadSitePlugins(t).catch(function(e){N.logger.error(e)}).finally(function(){m.trigger(l.a.SITE_PLUGINS_LOADED,{},e.siteId)})}).catch(function(e){}).finally(function(){N.sitePluginsProvider.setPluginsFetched()})}),m.on(l.a.LOGOUT,function(){N.sitePluginsProvider.hasSitePluginsLoaded&&window.location.reload()}),m.on(y.a.EVENT_MY_COURSES_CHANGED,function(e){e&&e.siteId&&e.siteId==N.sitesProvider.getCurrentSiteId()&&e.added&&e.added.length&&N.reloadCourseRestrictHandlers()})}return e.prototype.downloadStyles=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=n.styles&&n.styles.url;i&&!r.urlUtils.isAbsoluteURL(i)&&(i=r.textUtils.concatenatePaths(o.getURL(),i)),i&&n.styles.version&&(i+=(-1!=i.indexOf("?")?"&":"?")+"version="+n.styles.version);var l=r.sitePluginsProvider.getHandlerUniqueName(e,t)+"#main";return r.filepoolProvider.getFilesByComponent(o.id,m.a.COMPONENT,l).then(function(e){e.forEach(function(e){e.url!=i&&r.filepoolProvider.removeFileByUrl(o.id,e.url).catch(function(){})})}).catch(function(){}),i?r.filepoolProvider.downloadUrl(o.id,i,!1,m.a.COMPONENT,l,0,void 0,void 0,void 0,n.styles.version).then(function(e){return r.wsProvider.getText(e)}):""})},e.prototype.executeHandlerInit=function(e,t){return t.init?this.executeMethodAndJS(e,t.init,!0):Promise.resolve({})},e.prototype.executeMethodAndJS=function(e,t,n){var o=this,r=this.sitesProvider.getCurrentSiteId();return this.sitePluginsProvider.getContent(e.component,t,{},{getFromCache:!1,deleteCacheIfWSError:n}).then(function(e){if(!e.javascript||o.sitesProvider.getCurrentSiteId()!=r)return e;var t={HANDLER_DISABLED:o.HANDLER_DISABLED};o.compileProvider.injectLibraries(t);var n=o.sitePluginsProvider.createDataForJS(e);for(var i in n)t[i]=n[i];return e.jsResult=o.compileProvider.executeJavascript(t,e.javascript),e.jsResult==o.HANDLER_DISABLED&&(e.disabled=!0),e})},e.prototype.fetchSitePlugins=function(e){var t=this,n=[];return this.sitesProvider.getSite(e).then(function(e){return t.sitePluginsProvider.isGetContentAvailable(e)?e.read("tool_mobile_get_plugins_supporting_mobile",{},{getFromCache:!1}).then(function(o){return o.plugins.forEach(function(o){t.isSitePluginEnabled(o,e)&&n.push(o)}),n}):n})},e.prototype.getPrefixForStrings=function(e){return e?"plugin."+e+".":""},e.prototype.getPrefixedString=function(e,t){return this.getPrefixForStrings(e)+t},e.prototype.isSitePluginEnabled=function(e,t){return!(t.isFeatureDisabled("sitePlugin_"+e.component+"_"+e.addon)||!e.handlers)&&(e.parsedHandlers||(e.parsedHandlers=this.textUtils.parseJSON(e.handlers,null,this.logger.error.bind(this.logger,"Error parsing site plugin handlers"))),!(!e.parsedHandlers||!Object.keys(e.parsedHandlers).length))},e.prototype.loadLangStrings=function(e){if(e.parsedLang)for(var t in e.parsedLang){var n=this.getPrefixForStrings(e.addon);this.langProvider.addSitePluginsStrings(t,e.parsedLang[t],n)}},e.prototype.loadSitePlugin=function(e){var t=[];this.logger.debug("Load site plugin:",e),e.parsedHandlers||(e.parsedHandlers=this.textUtils.parseJSON(e.handlers,null,this.logger.error.bind(this.logger,"Error parsing site plugin handlers"))),!e.parsedLang&&e.lang&&(e.parsedLang=this.textUtils.parseJSON(e.lang,null,this.logger.error.bind(this.logger,"Error parsing site plugin lang"))),this.sitePluginsProvider.hasSitePluginsLoaded=!0,this.loadLangStrings(e);for(var n in e.parsedHandlers)t.push(this.registerHandler(e,n,e.parsedHandlers[n]));return this.utils.allPromises(t)},e.prototype.loadSitePlugins=function(e){var t=this,n=[];return this.courseRestrictHandlers={},e.forEach(function(e){var o=t.loadSitePlugin(e);n.push(o),t.sitePluginsProvider.registerSitePluginPromise(e.component,o)}),this.utils.allPromises(n)},e.prototype.loadStyles=function(e,t,n,o,r,i){i=i||this.sitesProvider.getCurrentSiteId();var l=document.createElement("style"),a=this.sitePluginsProvider.getHandlerUniqueName(e,t);l.setAttribute("id","siteplugin-"+a),l.innerHTML=o,document.head.appendChild(l),this.filepoolProvider.treatCSSCode(i,n,o,m.a.COMPONENT,a,r).catch(function(){})},e.prototype.registerHandler=function(e,t,n){var o,r,i=this,l=[],a=this.sitesProvider.getCurrentSiteId();return l.push(this.downloadStyles(e,t,n,a).then(function(e){r=e}).catch(function(e){i.logger.error("Error getting styles for plugin",t,n,e)})),l.push(this.executeHandlerInit(e,n).then(function(e){o=e})),Promise.all(l).then(function(){if(!o||!o.disabled){r&&i.loadStyles(e,t,n.styles.url,r,n.styles.version,a);var l;switch(n.delegate){case"CoreMainMenuDelegate":l=Promise.resolve(i.registerMainMenuHandler(e,t,n,o));break;case"CoreCourseModuleDelegate":l=Promise.resolve(i.registerModuleHandler(e,t,n,o));break;case"CoreUserDelegate":l=Promise.resolve(i.registerUserProfileHandler(e,t,n,o));break;case"CoreCourseOptionsDelegate":l=Promise.resolve(i.registerCourseOptionHandler(e,t,n,o));break;case"CoreCourseFormatDelegate":l=Promise.resolve(i.registerCourseFormatHandler(e,t,n));break;case"CoreUserProfileFieldDelegate":l=Promise.resolve(i.registerUserProfileFieldHandler(e,t,n));break;case"CoreSettingsDelegate":l=Promise.resolve(i.registerSettingsHandler(e,t,n,o));break;case"CoreQuestionDelegate":l=Promise.resolve(i.registerQuestionHandler(e,t,n));break;case"CoreQuestionBehaviourDelegate":l=Promise.resolve(i.registerQuestionBehaviourHandler(e,t,n));break;case"CoreBlockDelegate":l=Promise.resolve(i.registerBlockHandler(e,t,n,o));break;case"AddonMessageOutputDelegate":l=Promise.resolve(i.registerMessageOutputHandler(e,t,n,o));break;case"AddonModQuizAccessRuleDelegate":l=Promise.resolve(i.registerQuizAccessRuleHandler(e,t,n));break;case"AddonModAssignFeedbackDelegate":l=Promise.resolve(i.registerAssignFeedbackHandler(e,t,n));break;case"AddonModAssignSubmissionDelegate":l=Promise.resolve(i.registerAssignSubmissionHandler(e,t,n));break;case"AddonWorkshopAssessmentStrategyDelegate":l=Promise.resolve(i.registerWorkshopAssessmentStrategyHandler(e,t,n));break;default:l=Promise.resolve()}return l.then(function(r){r&&i.sitePluginsProvider.setSitePluginHandler(r,{plugin:e,handlerName:t,handlerSchema:n,initResult:o})})}i.logger.warn("Handler disabled by init function",e,n)}).catch(function(e){return Promise.reject("Error executing init method "+n.init+": "+e.message)})},e.prototype.registerComponentInitHandler=function(e,t,n,o,r){var i=this;if(n.method)return this.logger.debug("Register site plugin",e,n),this.executeMethodAndJS(e,n.method).then(function(l){var a=i.sitePluginsProvider.getHandlerUniqueName(e,t),s=r(a,l);if(n.methodTemplates=l.templates,n.methodJSResult=l.jsResult,n.methodOtherdata=l.otherdata,l&&l.jsResult)for(var u in s)"constructor"!=u&&"function"==typeof s[u]&&"function"==typeof l.jsResult[u]&&(s[u]=l.jsResult[u].bind(s));return o.registerHandler(s),a}).catch(function(t){i.logger.error("Error executing main method",e.component,n.method,t)});this.logger.warn("Ignore site plugin because it doesn't provide method",e,n)},e.prototype.registerAssignFeedbackHandler=function(e,t,n){var o=this;return this.registerComponentInitHandler(e,t,n,this.assignFeedbackDelegate,function(t,r){var i=(n.moodlecomponent||e.component).replace("assignfeedback_",""),l=o.getPrefixForStrings(e.addon);return new Pe(o.translate,t,i,l)})},e.prototype.registerAssignSubmissionHandler=function(e,t,n){var o=this;return this.registerComponentInitHandler(e,t,n,this.assignSubmissionDelegate,function(t,r){var i=(n.moodlecomponent||e.component).replace("assignsubmission_",""),l=o.getPrefixForStrings(e.addon);return new Ie(o.translate,t,i,l)})},e.prototype.registerBlockHandler=function(e,t,n,o){var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=(n.moodlecomponent||e.component).replace("block_",""),l=this.getPrefixedString(e.addon,n.displaydata&&n.displaydata.title?n.displaydata.title:"pluginname");return this.blockDelegate.registerHandler(new Te(r,l,i,n,o)),r},e.prototype.registerCourseFormatHandler=function(e,t,n){this.logger.debug("Register site plugin in course format delegate:",e,n);var o=this.sitePluginsProvider.getHandlerUniqueName(e,t),r=(n.moodlecomponent||e.component).replace("format_","");return this.courseFormatDelegate.registerHandler(new B(o,r,n)),o},e.prototype.registerCourseOptionHandler=function(e,t,n,o){if(n.displaydata){this.logger.debug("Register site plugin in course option delegate:",e,n,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=this.getPrefixedString(e.addon,n.displaydata.title||"pluginname"),l=new V(r,i,e,n,o,this.sitePluginsProvider,this.utils);return this.courseOptionsDelegate.registerHandler(l),o&&o.restrict&&o.restrict.courses&&(this.courseRestrictHandlers[r]={plugin:e,handlerName:t,handlerSchema:n,handler:l}),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,n)},e.prototype.registerMainMenuHandler=function(e,t,n,o){if(n.displaydata){this.logger.debug("Register site plugin in main menu delegate:",e,n,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=this.getPrefixedString(e.addon,n.displaydata.title||"pluginname");return this.mainMenuDelegate.registerHandler(new J(r,i,e,n,o)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,n)},e.prototype.registerMessageOutputHandler=function(e,t,n,o){if(n.displaydata){this.logger.debug("Register site plugin in message output delegate:",e,n,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=this.getPrefixedString(e.addon,n.displaydata.title||"pluginname"),l=(n.moodlecomponent||e.component).replace("message_","");return this.messageOutputDelegate.registerHandler(new me(r,l,i,e,n,o)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,n)},e.prototype.registerModuleHandler=function(e,t,n,o){if(n.displaydata){this.logger.debug("Register site plugin in module delegate:",e,n,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=(n.moodlecomponent||e.component).replace("mod_","");return this.moduleDelegate.registerHandler(new z(r,i,e,n,o,this.sitePluginsProvider,this.loggerProvider)),n.offlinefunctions&&Object.keys(n.offlinefunctions).length&&this.prefetchDelegate.registerHandler(new Q(this.translate,this.appProvider,this.utils,this.courseProvider,this.filepoolProvider,this.sitesProvider,this.domUtils,this.filterHelper,this.pluginFileDelegate,this.sitePluginsProvider,e.component,r,i,n)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,n)},e.prototype.registerQuestionHandler=function(e,t,n){return this.registerComponentInitHandler(e,t,n,this.questionDelegate,function(t,o){return new ue(t,n.moodlecomponent||e.component)})},e.prototype.registerQuestionBehaviourHandler=function(e,t,n){var o=this;return this.registerComponentInitHandler(e,t,n,this.questionBehaviourDelegate,function(t,r){var i=(n.moodlecomponent||e.component).replace("qbehaviour_","");return new pe(o.questionProvider,t,i,r.templates.length)})},e.prototype.registerQuizAccessRuleHandler=function(e,t,n){return this.registerComponentInitHandler(e,t,n,this.accessRulesDelegate,function(t,o){return new ge(t,n.moodlecomponent||e.component,o.templates.length)})},e.prototype.registerSettingsHandler=function(e,t,n,o){if(n.displaydata){this.logger.debug("Register site plugin in settings delegate:",e,n,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=this.getPrefixedString(e.addon,n.displaydata.title||"pluginname");return this.settingsDelegate.registerHandler(new ie(r,i,e,n,o)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,n)},e.prototype.registerUserProfileHandler=function(e,t,n,o){if(n.displaydata){this.logger.debug("Register site plugin in user profile delegate:",e,n,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,t),i=this.getPrefixedString(e.addon,n.displaydata.title||"pluginname"),l=new ee(r,i,e,n,o,this.sitePluginsProvider,this.utils);return this.userDelegate.registerHandler(l),o&&o.restrict&&o.restrict.courses&&(this.courseRestrictHandlers[r]={plugin:e,handlerName:t,handlerSchema:n,handler:l}),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,n)},e.prototype.registerUserProfileFieldHandler=function(e,t,n){return this.registerComponentInitHandler(e,t,n,this.profileFieldDelegate,function(t,o){var r=(n.moodlecomponent||e.component).replace("profilefield_","");return new oe(t,r)})},e.prototype.registerWorkshopAssessmentStrategyHandler=function(e,t,n){return this.registerComponentInitHandler(e,t,n,this.workshopAssessmentStrategyDelegate,function(t,o){var r=(n.moodlecomponent||e.component).replace("workshopform_","");return new Se(t,r)})},e.prototype.reloadCourseRestrictHandlers=function(){var e=this;if(!Object.keys(this.courseRestrictHandlers).length)return Promise.resolve();var t=[],n=function(n){var r=o.courseRestrictHandlers[n];if(!r.handler||!r.handler.setInitResult)return"continue";r.handler.updatingInit&&r.handler.updatingInit(),t.push(o.executeHandlerInit(r.plugin,r.handlerSchema).then(function(e){r.handler.setInitResult(e)}).catch(function(t){e.logger.error("Error reloading course restrict handler",t,r.plugin)}))},o=this;for(var r in this.courseRestrictHandlers)n(r);return Promise.all(t).then(function(){e.eventsProvider.trigger(l.a.SITE_PLUGINS_COURSE_RESTRICT_UPDATED,{})})},e=xe([Object(o.A)(),Me("design:paramtypes",[u.a,c.a,d.a,E.a,C.a,w.a,s.a,O.a,m.a,I.a,_.a,h.a,p.a,R.a,l.a,S.a,A.a,f.a,a.a,D.a,j.a,k.a,g.a,T.a,x.a,N.a,r.c,M.a,i.a,U.a,v.a,we.a,b.a,P.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=n(155),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=function(){function e(){}return e=i([Object(o.I)({declarations:[],imports:[],providers:[r.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(9),i=n(88),l=n(153),a=n(388),s=n(1306),u=n(521),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n){e.on(r.a.LOGIN,function(){l.a.pageSize=1,l.a.pageSizeOK=!1}),t.register(n)}return e=c([Object(o.I)({declarations:[],imports:[],providers:[l.a,a.a,u.a,s.a]}),d("design:paramtypes",[r.a,i.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(521),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.commentsSync=e,this.name="CoreCommentsSyncCronHandler"}return e.prototype.execute=function(e,t){return this.commentsSync.syncAllComments(e,t)},e.prototype.getInterval=function(){return 3e5},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(231),i=n(201),l=n(236),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=function(){function e(){}return e=a([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(170),i=n(62),l=n(163),a=n(227),s=n(204),u=n(1309),c=n(1310),d=n(1311),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r){e.registerHandler(t),n.registerHandler(o),n.registerHandler(r)}return e=f([Object(o.I)({declarations:[],imports:[],providers:[l.a,a.a,s.a,u.a,c.a,d.a]}),p("design:paramtypes",[r.a,u.a,i.a,c.a,d.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(163),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.tagProvider=e,this.utils=t,this.name="CoreTag",this.priority=300}return e.prototype.isEnabled=function(){var e=this;return this.tagProvider.areTagsAvailable().then(function(t){return!!t&&e.utils.promiseWorks(e.tagProvider.getTagCollections())})},e.prototype.getDisplayData=function(){return{icon:"pricetags",title:"core.tag.tags",page:"CoreTagSearchPage",class:"core-tag-search-handler"}},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(163),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.tagProvider=t,o.linkHelper=n,o.name="CoreTagIndexLinkHandler",o.pattern=/\/tag\/index\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o,r){var i=this;return[{action:function(e,t){var o={tagId:parseInt(n.id,10)||0,tagName:n.tag||"",collectionId:parseInt(n.tc,10)||0,areaId:parseInt(n.ta,10)||0,fromContextId:parseInt(n.from,10)||0,contextId:parseInt(n.ctx,10)||0,recursive:parseInt(n.rec,10)||1};o.tagId||o.tagName&&o.collectionId?i.linkHelper.goInSite(t,o.areaId?"CoreTagIndexAreaPage":"CoreTagIndexPage",o,e):i.linkHelper.goInSite(t,"CoreTagSearchPage",{},e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.tagProvider.areTagsAvailable(e)},t=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(163),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.tagProvider=t,o.linkHelper=n,o.name="CoreTagSearchLinkHandler",o.pattern=/\/tag\/search\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o,r){var i=this;return[{action:function(e,t){var o={collectionId:parseInt(n.tc,10)||0,query:n.query||""};i.linkHelper.goInSite(t,"CoreTagSearchPage",o,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.tagProvider.areTagsAvailable(e)},t=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(372),i=n(283),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(){function e(){}return e=l([Object(o.I)({declarations:[],imports:[r.a],providers:[r.a,i.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(214),i=n(216),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){}return e=l([Object(o.I)({declarations:[],imports:[r.a],providers:[i.a]}),a("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(170),i=n(104),l=n(102),a=n(62),s=n(204),u=n(206),c=n(1315),d=n(1316),f=n(1317),p=n(748),h=n(1318),m=n(1319),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,n,o,r,i,l,a,s,u){e.registerHandler(t),o.registerHandler(n),i.registerHandler(r),a.registerHandler(l),s.registerHandler(u)}return e=_([Object(o.I)({declarations:[],imports:[p.a],providers:[u.a,c.a,d.a,f.a,h.a,m.a]}),g("design:paramtypes",[r.a,c.a,d.a,i.a,f.a,l.a,h.a,a.a,s.a,m.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(206),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.blogProvider=e,this.name="AddonBlog",this.priority=450}return e.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},e.prototype.getDisplayData=function(){return{icon:"fa-newspaper-o",title:"addon.blog.siteblogheading",page:"AddonBlogEntriesPage",class:"addon-blog-handler"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(104),i=n(15),l=n(206),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.linkHelper=e,this.blogProvider=t,this.name="AddonBlog:blogs",this.priority=300,this.type=r.a.TYPE_NEW_PAGE}return e.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){return!0},e.prototype.getDisplayData=function(e,t){var n=this;return{icon:"fa-newspaper-o",title:"addon.blog.blogentries",class:"addon-blog-handler",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),n.linkHelper.goInSite(t,"AddonBlogEntriesPage",{userId:o.id,courseId:r})}}},e=a([Object(o.A)(),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(1),i=n(18),l=n(52),a=n(13),s=n(38),u=n(523),c=n(206),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){this.coursesProvider=e,this.blogProvider=t,this.courseHelper=n,this.courseProvider=o,this.sitesProvider=r,this.filepoolProvider=i,this.name="AddonBlog",this.priority=100}return e.prototype.invalidateEnabledForCourse=function(e,t,n){return this.courseProvider.invalidateCourseBlocks(e)},e.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},e.prototype.isEnabledForCourse=function(e,t,n,o){return this.courseHelper.hasABlockNamed(e,"blog_menu").then(function(e){return e&&n&&void 0!==n.blogs?n.blogs:e})},e.prototype.getDisplayData=function(e,t){return{title:"addon.blog.blog",class:"addon-blog-handler",component:u.a}},e.prototype.prefetch=function(e){var t=this,n=this.sitesProvider.getCurrentSiteId();return this.blogProvider.getEntries({courseid:e.id}).then(function(e){return e.entries.map(function(e){var o=[];return e.attachmentfiles&&e.attachmentfiles.length&&(o=e.attachmentfiles),e.summaryfiles&&e.summaryfiles.length&&(o=o.concat(e.summaryfiles)),o.length>0?t.filepoolProvider.addFilesToQueue(n,o,e.module,e.id):Promise.resolve()})})},e=d([Object(o.A)(),f("design:paramtypes",[l.a,c.a,s.a,a.a,r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(15),l=n(206),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.blogProvider=t,o.linkHelper=n,o.name="AddonBlogIndexLinkHandler",o.featureName="CoreUserDelegate_AddonBlog:blogs",o.pattern=/\/blog\/index\.php/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this,i={};return n.userid&&(i.userId=parseInt(n.userid,10)),n.modid&&(i.cmId=parseInt(n.modid,10)),n.courseid&&(i.courseId=parseInt(n.courseid,10)),n.entryid&&(i.entryId=parseInt(n.entryid,10)),n.groupid&&(i.groupId=parseInt(n.groupid,10)),n.tagid&&(i.tagId=parseInt(n.tagid,10)),[{action:function(e,t){r.linkHelper.goInSite(t,"AddonBlogEntriesPage",i,e,!Object.keys(i).length)}}]},t.prototype.isEnabled=function(e,t,n,o){return this.blogProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[l.a,i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(227),i=n(225),l=n(206),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.tagHelper=e,this.blogProvider=t,this.name="AddonBlogTagAreaHandler",this.type="core/post"}return e.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},e.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},e.prototype.getComponent=function(e){return i.a},e=a([Object(o.A)(),s("design:paramtypes",[r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(172),i=n(1321),l=n(1322),a=n(750),s=n(102),u=n(104),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o){e.registerHandler(t),n.registerHandler(o)}return e=c([Object(o.I)({declarations:[],imports:[a.a],providers:[r.a,i.a,l.a]}),d("design:paramtypes",[s.a,i.a,u.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(172),i=n(13),l=n(526),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.courseCompletionProvider=e,this.name="AddonCourseCompletion",this.priority=200}return e.prototype.isEnabled=function(){return this.courseCompletionProvider.isPluginViewEnabled()},e.prototype.isEnabledForCourse=function(e,t,n,o){var r=this;return(!t||t.type!=i.a.ACCESS_GUEST)&&this.courseCompletionProvider.isPluginViewEnabledForCourse(e).then(function(t){return!!t&&r.courseCompletionProvider.isPluginViewEnabledForUser(e)})},e.prototype.getDisplayData=function(e,t){return{title:"addon.coursecompletion.completionmenuitem",class:"addon-coursecompletion-course-handler",component:l.a}},e.prototype.invalidateEnabledForCourse=function(e,t,n){return this.courseCompletionProvider.invalidateCourseCompletion(e)},e.prototype.prefetch=function(e){return this.courseCompletionProvider.getCompletion(e.id,void 0,{getFromCache:!1,emergencyCache:!1}).catch(function(e){if(!e||"notenroled"!=e.errorcode)return Promise.reject(e)})},e=a([Object(o.A)(),s("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(104),i=n(9),l=n(46),a=n(172),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){var n=this;this.courseCompletionProvider=t,this.name="AddonCourseCompletion",this.type=r.a.TYPE_NEW_PAGE,this.priority=200,this.enabledCache={},e.on(i.a.LOGOUT,function(){n.enabledCache={}}),e.on(l.a.PROFILE_REFRESHED,function(e){delete n.enabledCache[e.userId+"-"+e.courseId]})}return e.prototype.isEnabled=function(){return this.courseCompletionProvider.isPluginViewEnabled()},e.prototype.isEnabledForUser=function(e,t,n,o){var r=this;return!!t&&this.courseCompletionProvider.isPluginViewEnabledForCourse(t).then(function(n){if(!n)return!1;var o=e.id+"-"+t;return void 0!==r.enabledCache[o]?r.enabledCache[o]:r.courseCompletionProvider.isPluginViewEnabledForUser(t,e.id).then(function(e){return r.enabledCache[o]=e,e})})},e.prototype.getDisplayData=function(e,t){return{icon:"checkbox-outline",title:"addon.coursecompletion.coursecompletion",class:"addon-coursecompletion-handler",action:function(e,t,n,o){e.preventDefault(),e.stopPropagation(),t.push("AddonCourseCompletionReportPage",{courseId:o,userId:n.id})}}},e=s([Object(o.A)(),u("design:paramtypes",[i.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(1324),i=n(1326),l=n(1328),a=n(1330),s=n(1332),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=function(){function e(){}return e=u([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a,a.a,s.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(1325),a=n(191),s=n(679),u=n(26),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[s.a],imports:[r.k,i.b.forChild(),u.a],providers:[l.a],exports:[s.a],entryComponents:[s.a]}),d("design:paramtypes",[a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(679),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.name="AddonUserProfileFieldCheckbox",this.type="checkbox"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n,o){var r="profile_field_"+e.shortname;if(void 0!==o[r])return{type:"checkbox",name:r,value:o[r]?1:0}},e.prototype.getComponent=function(e){return r.a},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(1327),a=n(191),s=n(680),u=n(26),c=n(106),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[s.a],imports:[r.k,i.b.forChild(),u.a,c.a],providers:[l.a],exports:[s.a],entryComponents:[s.a]}),f("design:paramtypes",[a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(24),i=n(680),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.timeUtils=e,this.name="AddonUserProfileFieldDatetime",this.type="datetime"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n,o){var r="profile_field_"+e.shortname;if(o[r])return{type:"datetime",name:"profile_field_"+e.shortname,value:this.timeUtils.convertToTimestamp(o[r])}},e.prototype.getComponent=function(e){return i.a},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(1329),a=n(191),s=n(681),u=n(26),c=n(31),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[s.a],imports:[r.k,i.b.forChild(),u.a,c.a],providers:[l.a],exports:[s.a],entryComponents:[s.a]}),f("design:paramtypes",[a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(681),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.name="AddonUserProfileFieldMenu",this.type="menu"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n,o){var r="profile_field_"+e.shortname;if(o[r])return{type:"menu",name:r,value:o[r]}},e.prototype.getComponent=function(e){return r.a},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(1331),a=n(191),s=n(682),u=n(26),c=n(31),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[s.a],imports:[r.k,i.b.forChild(),u.a,c.a],providers:[l.a],exports:[s.a],entryComponents:[s.a]}),f("design:paramtypes",[a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(682),i=n(11),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.textUtils=e,this.name="AddonUserProfileFieldText",this.type="text"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n,o){var r="profile_field_"+e.shortname;return{type:"text",name:r,value:this.textUtils.cleanTags(o[r])}},e.prototype.getComponent=function(e){return r.a},e=l([Object(o.A)(),a("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(3),l=n(1333),a=n(191),s=n(683),u=n(26),c=n(31),d=n(214),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[s.a],imports:[r.k,i.b.forChild(),u.a,c.a,d.a],providers:[l.a],exports:[s.a],entryComponents:[s.a]}),p("design:paramtypes",[a.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(683),i=n(11),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.textUtils=e,this.name="AddonUserProfileFieldTextarea",this.type="textarea"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n,o){var r="profile_field_"+e.shortname;if(o[r]){var i=o[r]||"";return i=this.textUtils.formatHtmlLines(i),{type:"textarea",name:r,value:JSON.stringify({text:i,format:1})}}},e.prototype.getComponent=function(e){return r.a},e=l([Object(o.A)(),a("design:paramtypes",[i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(26),a=n(31),s=n(1335),u=n(60),c=n(1336),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[],imports:[r.k,l.a,a.a,s.a,i.b.forChild()],exports:[],providers:[c.a]}),f("design:paramtypes",[u.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(684),s=n(26),u=n(31),c=n(74),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a,c.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(684),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockActivityModules",t.blockName="activity_modules",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_activitymodules.pluginname",class:"addon-block-activitymodules",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1338),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockBadges",t.blockName="badges",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_badges.pluginname",class:"addon-block-badges",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1340),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockBlogMenu",t.blockName="blog_menu",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_blogmenu.pluginname",class:"addon-block-blog-menu",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1342),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockBlogTags",t.blockName="blog_tags",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_blogtags.pluginname",class:"addon-block-blog-tags",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1344),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockBlogRecent",t.blockName="blog_recent",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_blogrecent.pluginname",class:"addon-block-blog-recent",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1346),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(226),i=n(82),l=n(186),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t){var n=e.call(this)||this;return n.calendarProvider=t,n.name="AddonBlockCalendarMonth",n.blockName="calendar_month",n}return a(t,e),t.prototype.getDisplayData=function(e,t,n,o){var i="AddonCalendarListPage",l="course"==n?{courseId:o}:{};return this.calendarProvider.canViewMonthInSite()&&(i="AddonCalendarIndexPage"),{title:"addon.block_calendarmonth.pluginname",class:"addon-block-calendar-month",component:r.a,link:i,linkParams:l}},t=s([Object(o.A)(),u("design:paramtypes",[l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1348),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(226),i=n(82),l=n(186),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t){var n=e.call(this)||this;return n.calendarProvider=t,n.name="AddonBlockCalendarUpcoming",n.blockName="calendar_upcoming",n}return a(t,e),t.prototype.getDisplayData=function(e,t,n,o){var i="AddonCalendarListPage",l="course"==n?{courseId:o}:{};return this.calendarProvider.canViewMonthInSite()&&(i="AddonCalendarIndexPage",l.upcoming=!0),{title:"addon.block_calendarupcoming.pluginname",class:"addon-block-calendar-upcoming",component:r.a,link:i,linkParams:l}},t=s([Object(o.A)(),u("design:paramtypes",[l.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1350),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(226),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockComments",t.blockName="comments",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_comments.pluginname",class:"addon-block-comments",component:r.a,link:"CoreCommentsViewerPage",linkParams:{contextLevel:n,instanceId:o,componentName:"block_comments",area:"page_comments",itemId:0}}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1352),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(226),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockCompletionStatus",t.blockName="completionstatus",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_completionstatus.pluginname",class:"addon-block-completion-status",component:r.a,link:"AddonCourseCompletionReportPage",linkParams:{courseId:o}}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1354),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockGlossaryRandom",t.blockName="glossary_random",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:t.contents.title||"addon.block_glossaryrandom.pluginname",class:"addon-block-glossary-random",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(60),l=n(1356),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],exports:[],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockHtml",t.blockName="html",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:t.contents.title,class:"addon-block-html",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1358),s=n(1359),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){e.registerHandler(t)}return e=u([Object(o.I)({declarations:[],imports:[r.k,a.a,i.b.forChild()],exports:[],providers:[s.a]}),c("design:paramtypes",[l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(277),s=n(685),u=n(26),c=n(31),d=n(74),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=function(){function e(){}return e=f([Object(o.I)({declarations:[s.a],imports:[r.b,i.k,l.b.forChild(),u.a,c.a,a.a,d.a],providers:[],exports:[s.a],entryComponents:[s.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(1),i=n(52),l=n(685),a=n(82),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n){var o=e.call(this)||this;return o.coursesProvider=t,o.sitesProvider=n,o.name="AddonBlockMyOverview",o.blockName="myoverview",o}return s(t,e),t.prototype.isEnabled=function(){return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")||!this.coursesProvider.isMyCoursesDisabledInSite()},t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_myoverview.pluginname",class:"addon-block-myoverview",component:l.a}},t=u([Object(o.A)(),c("design:paramtypes",[i.a,r.a])],t)}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1361),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockNewsItems",t.blockName="news_items",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_newsitems.pluginname",class:"addon-block-news-items",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1363),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockOnlineUsers",t.blockName="online_users",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_onlineusers.pluginname",class:"addon-block-online-users",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1365),s=n(271),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){e.registerHandler(t)}return e=u([Object(o.I)({declarations:[],imports:[r.k,s.a,i.b.forChild()],exports:[],providers:[a.a]}),c("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(226),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockLearningPlans",t.blockName="lp",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_learningplans.pluginname",class:"addon-block-learning-plans",component:r.a,link:"AddonCompetencyPlanListPage"}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1367),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(226),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockPrivateFiles",t.blockName="private_files",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_privatefiles.pluginname",class:"addon-block-private-files",component:r.a,link:"AddonFilesListPage",linkParams:{root:"my"}}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(26),a=n(31),s=n(1369),u=n(60),c=n(1370),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[],imports:[r.k,l.a,a.a,s.a,i.b.forChild()],exports:[],providers:[c.a]}),f("design:paramtypes",[u.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(686),s=n(26),u=n(31),c=n(74),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a,c.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(686),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockSiteMainMenu",t.blockName="site_main_menu",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_sitemainmenu.pluginname",class:"addon-block-sitemainmenu",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1372),s=n(312),u=n(1373),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[],imports:[r.k,a.a,i.b.forChild()],exports:[],providers:[s.a,u.a]}),d("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(277),d=n(687),f=n(688),p=n(74),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=function(){function e(){}return e=h([Object(o.I)({declarations:[d.a,f.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a,p.a],providers:[],exports:[d.a,f.a],entryComponents:[d.a,f.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(1),i=n(52),l=n(312),a=n(687),s=n(82),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o){var r=e.call(this)||this;return r.timelineProvider=t,r.coursesProvider=n,r.sitesProvider=o,r.name="AddonBlockTimeline",r.blockName="timeline",r}return u(t,e),t.prototype.isEnabled=function(){var e=this;return this.timelineProvider.isAvailable().then(function(t){return t&&(e.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")||!e.coursesProvider.isMyCoursesDisabledInSite())})},t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_timeline.pluginname",class:"addon-block-timeline",component:a.a}},t=c([Object(o.A)(),d("design:paramtypes",[l.a,i.a,r.a])],t)}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(26),a=n(60),s=n(1375),u=n(1376),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[],imports:[r.k,l.a,s.a,i.b.forChild()],providers:[u.a]}),d("design:paramtypes",[a.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(689),s=n(26),u=n(31),c=n(277),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a,c.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(689),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockRecentlyAccessedCourses",t.blockName="recentlyaccessedcourses",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_recentlyaccessedcourses.pluginname",class:"addon-block-recentlyaccessedcourses",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(1378),a=n(60),s=n(1379),u=n(467),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[],imports:[r.k,l.a,i.b.forChild()],exports:[],providers:[s.a,u.a]}),d("design:paramtypes",[a.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(690),s=n(26),u=n(31),c=n(74),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a,c.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(690),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockRecentlyAccessedItems",t.blockName="recentlyaccesseditems",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_recentlyaccesseditems.pluginname",class:"addon-block-recentlyaccesseditems",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1381),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockRecentActivity",t.blockName="recent_activity",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_recentactivity.pluginname",class:"addon-block-recent-activity",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1383),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockRssClient",t.blockName="rss_client",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:t.contents.title||"addon.block_rssclient.pluginname",class:"addon-block-rss-client",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(26),a=n(60),s=n(1385),u=n(1386),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[],imports:[r.k,l.a,s.a,i.b.forChild()],providers:[u.a]}),d("design:paramtypes",[a.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(691),s=n(26),u=n(31),c=n(277),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=function(){function e(){}return e=d([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a,c.a],providers:[],exports:[a.a],entryComponents:[a.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(691),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockStarredCourses",t.blockName="starredcourses",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.starredcourses.pluginname",class:"addon-block-starredcourses",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1388),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(226),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockSelfCompletion",t.blockName="selfcompletion",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_selfcompletion.pluginname",class:"addon-block-self-completion",component:r.a,link:"AddonCourseCompletionReportPage",linkParams:{courseId:o}}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(3),l=n(60),a=n(1390),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[],imports:[r.k,i.b.forChild()],exports:[],providers:[a.a]}),u("design:paramtypes",[l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(157),i=n(82),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=e.call(this)||this;return t.name="AddonBlockTags",t.blockName="tags",t}return l(t,e),t.prototype.getDisplayData=function(e,t,n,o){return{title:"addon.block_tags.pluginname",class:"addon-block-tags",component:r.a}},t=a([Object(o.A)(),s("design:paramtypes",[])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return A});var o=n(0),r=n(88),i=n(62),l=n(61),a=n(50),s=n(476),u=n(1392),c=n(97),d=n(1393),f=n(1394),p=n(1395),h=n(1396),m=n(1397),_=n(1398),g=n(217),v=n(399),y=n(328),b=n(1399),P=n(292),O=n(127),E=n(592),C=n(204),I=n(1400),R=n(1401),S=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e,t,n,o,r,i,l,a,s,u,c,d,f,p,h){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i),r.registerHandler(s),r.registerHandler(u),r.registerHandler(c),r.registerHandler(d),r.registerHandler(f),l.register(a),p.registerHandler(h)}return e=S([Object(o.I)({declarations:[],imports:[s.a,R.a],providers:[c.a,g.a,y.a,P.a,O.a,u.a,v.a,d.a,f.a,p.a,h.a,m.a,_.a,b.a,E.a,I.a]}),w("design:paramtypes",[l.a,u.a,a.a,v.a,i.a,d.a,r.a,b.a,f.a,p.a,h.a,m.a,_.a,C.a,I.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(500),i=n(13),l=n(97),a=n(40),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.courseProvider=e,this.dataProvider=t,this.name="AddonModData",this.modName="data",this.supportedFeatures=(n={},n[a.a.FEATURE_GROUPS]=!0,n[a.a.FEATURE_GROUPINGS]=!0,n[a.a.FEATURE_MOD_INTRO]=!0,n[a.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[a.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[a.a.FEATURE_GRADE_HAS_GRADE]=!0,n[a.a.FEATURE_GRADE_OUTCOMES]=!0,n[a.a.FEATURE_BACKUP_MOODLE2]=!0,n[a.a.FEATURE_SHOW_DESCRIPTION]=!0,n[a.a.FEATURE_RATE]=!0,n[a.a.FEATURE_COMMENT]=!0,n);var n}return e.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},e.prototype.getData=function(e,t,n){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_data-handler",showDownloadButton:!0,action:function(e,t,n,o,r,i){var l={module:n,courseId:o};i&&Object.assign(l,i),t.push("AddonModDataIndexPage",l,r)}}},e.prototype.getMainComponent=function(e,t){return r.a},e=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(99),i=n(38),l=n(97),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this,t,"AddonModData","data","d")||this;return o.dataProvider=n,o.name="AddonModDataLinkHandler",o}return a(t,e),t.prototype.isEnabled=function(e,t,n,o){return this.dataProvider.isPluginEnabled()},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(97),l=n(217),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.dataProvider=t,o.dataHelper=n,o.name="AddonModDataApproveLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModData",o.pattern=/\/mod\/data\/view\.php.*([\?\&](d|approve|disapprove)=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var i=parseInt(n.d,10),l=parseInt(n.approve,10)||parseInt(n.disapprove,10),a=!!parseInt(n.approve,10);r.dataHelper.approveOrDisapproveEntry(i,l,a,o,e)}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.d&&(void 0!==n.approve||void 0!==n.disapprove)&&this.dataProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(55),i=n(97),l=n(217),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.dataProvider=t,o.dataHelper=n,o.name="AddonModDataDeleteLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModData",o.pattern=/\/mod\/data\/view\.php.*([\?\&](d|delete)=\d+)/,o}return a(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var i=parseInt(n.d,10),l=parseInt(n.delete,10);r.dataHelper.showDeleteEntryModal(i,l,o)}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.d&&void 0!==n.delete&&this.dataProvider.isPluginEnabled(e)},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(97),a=n(13),s=n(4),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.dataProvider=n,i.courseProvider=o,i.domUtils=r,i.name="AddonModDataShowLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModData",i.pattern=/\/mod\/data\/view\.php.*([\?\&](d|rid|page|group|mode)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading(),i=parseInt(n.d,10),l=parseInt(n.rid,10)||!1,a=parseInt(n.group,10)||!1,s=parseInt(n.page,10)||!1;r.courseProvider.getModuleBasicInfoByInstance(i,"data",e).then(function(o){var i={module:o,courseId:o.course};return a&&(i.group=a),n.mode&&"single"==n.mode?i.offset=s||0:l&&(i.entryId=l),r.linkHelper.goInSite(t,"AddonModDataEntryPage",i,e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.d&&(!!(n.mode&&"single"==n.mode||void 0!==n.rid)&&this.dataProvider.isPluginEnabled(e))},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(55),i=n(15),l=n(97),a=n(13),s=n(4),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.linkHelper=t,i.dataProvider=n,i.courseProvider=o,i.domUtils=r,i.name="AddonModDataEditLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModData",i.pattern=/\/mod\/data\/edit\.php.*([\?\&](d|rid)=\d+)/,i}return u(t,e),t.prototype.getActions=function(e,t,n,o){var r=this;return[{action:function(e,t){var o=r.domUtils.showModalLoading(),i=parseInt(n.d,10),l=parseInt(n.rid,10)||!1;r.courseProvider.getModuleBasicInfoByInstance(i,"data",e).then(function(n){var o={module:n,courseId:n.course};return l&&(o.entryId=l),r.linkHelper.goInSite(t,"AddonModDataEditPage",o,e)}).finally(function(){o.dismiss()})}}]},t.prototype.isEnabled=function(e,t,n,o){return void 0!==n.d&&this.dataProvider.isPluginEnabled(e)},t=c([Object(o.A)(),d("design:paramtypes",[i.a,l.a,a.a,s.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(113),i=n(15),l=n(3),a=n(97),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n,o){var r=e.call(this,t,n,"AddonModData","data")||this;return r.dataProvider=o,r.name="AddonModDataListLinkHandler",r}return s(t,e),t.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},t=u([Object(o.A)(),c("design:paramtypes",[i.a,l.c,a.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(328),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.dataSync=e,this.name="AddonModDataSyncCronHandler"}return e.prototype.execute=function(e,t){return this.dataSync.syncAllDatabases(e,t)},e.prototype.getInterval=function(){return this.dataSync.syncInterval},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(227),i=n(225),l=n(97),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.tagHelper=e,this.dataProvider=t,this.name="AddonModDataTagAreaHandler",this.type="mod_data/data_records"}return e.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},e.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},e.prototype.getComponent=function(e){return i.a},e=a([Object(o.A)(),s("design:paramtypes",[r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(1402),i=n(1404),l=n(1406),a=n(1408),s=n(1410),u=n(1412),c=n(1414),d=n(1416),f=n(1418),p=n(1420),h=n(1421),m=n(1423),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=function(){function e(){}return e=_([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1403),s=n(127),u=n(692),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(692),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModDataFieldCheckboxHandler",this.type="checkbox"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id,o="f_"+e.id+"_allreq",r=[];return!!(t[n]&&t[n].length>0)&&(r.push({name:n,value:t[n]}),t[o]&&r.push({name:o,value:!0}),r)},e.prototype.getFieldEditData=function(e,t,n){return[{fieldid:e.id,value:t["f_"+e.id]||[]}]},e.prototype.hasFieldDataChanged=function(e,t,n){return n=n&&n.content||"",t["f_"+e.id].join("##")!=n},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return e.content=t[""]&&t[""].join("##")||"",e},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1405),s=n(127),u=n(693),c=n(26),d=n(31),f=n(106),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t){e.registerHandler(t)}return e=p([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a,f.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),h("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(693),l=n(24),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.translate=e,this.timeUtils=t,this.name="AddonModDataFieldDateHandler",this.type="date"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id,o="f_"+e.id+"_z";if(t[o]&&"string"==typeof t[n]){var r=[],i=t[n].substr(0,10).split("-"),l=i[1],a=i[2];return r.push({name:n+"_y",value:i[0]}),r.push({name:n+"_m",value:l}),r.push({name:n+"_d",value:a}),r.push({name:o,value:1}),r}return!1},e.prototype.getFieldEditData=function(e,t,n){var o="f_"+e.id;if("string"==typeof t[o]){var r=[],i=t[o].substr(0,10).split("-"),l=i[1],a=i[2];return r.push({fieldid:e.id,subfield:"year",value:i[0]}),r.push({fieldid:e.id,subfield:"month",value:l}),r.push({fieldid:e.id,subfield:"day",value:a}),r}return!1},e.prototype.hasFieldDataChanged=function(e,t,n){var o="f_"+e.id,r=t[o]&&t[o].substr(0,10)||"";return n=n&&n.content&&this.timeUtils.toDatetimeFormat(1e3*n.content).substr(0,10)||"",r!=n},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&!(t.length<2)&&t[0].value&&t[1].value&&t[2].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){var o=Date.UTC(t.year||"",t.month?t.month-1:null,t.day||null);return o=Math.floor(o/1e3),e.content=o||"",e},e.prototype.isEnabled=function(){return!0},e=a([Object(o.A)(),s("design:paramtypes",[r.c,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1407),s=n(127),u=n(694),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(3),i=n(177),l=n(97),a=n(694),s=n(72),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.translate=e,this.fileSessionprovider=t,this.fileUploaderProvider=n,this.name="AddonModDataFieldFileHandler",this.type="file"}return e.prototype.getComponent=function(e,t){return a.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id;return!!t[n]&&[{name:n,value:t[n]}]},e.prototype.getFieldEditData=function(e,t,n){var o=this.getFieldEditFiles(e);return[{fieldid:e.id,subfield:"file",files:o}]},e.prototype.getFieldEditFiles=function(e){return this.fileSessionprovider.getFiles(l.a.COMPONENT,e.dataid+"_"+e.id)},e.prototype.hasFieldDataChanged=function(e,t,n){var o=this.fileSessionprovider.getFiles(l.a.COMPONENT,e.dataid+"_"+e.id)||[],r=n&&n.files||[];return r.length&&(r=[r[0]]),this.fileUploaderProvider.areFileListDifferent(o,r)},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return t&&t.file&&t.file.offline>0&&n&&n.length>0?(e.content=n[0].filename,e.files=[n[0]]):t&&t.file&&t.file.online&&t.file.online.length>0&&(e.content=t.file.online[0].filename,e.files=[t.file.online[0]]),e},e.prototype.isEnabled=function(){return!0},e=u([Object(o.A)(),c("design:paramtypes",[r.c,i.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1409),s=n(127),u=n(695),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(695),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModDataFieldLatlongHandler",this.type="latlong"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id;return!!t[n]&&[{name:n,value:t[n]}]},e.prototype.getFieldEditData=function(e,t,n){var o="f_"+e.id;return[{fieldid:e.id,subfield:"0",value:t[o+"_0"]||""},{fieldid:e.id,subfield:"1",value:t[o+"_1"]||""}]},e.prototype.hasFieldDataChanged=function(e,t,n){var o="f_"+e.id;return(t[o+"_0"]||"")!=(n&&n.content||"")||(t[o+"_1"]||"")!=(n&&n.content1||"")},e.prototype.getFieldsNotifications=function(e,t){var n=0;return t.forEach(function(e){void 0!==e.value&&""!=e.value&&n++}),1==n?this.translate.instant("addon.mod_data.latlongboth"):!(!e.required||0!=n)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return e.content=t[0]||"",e.content1=t[1]||"",e},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1411),s=n(127),u=n(696),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(696),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModDataFieldMenuHandler",this.type="menu"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id;return!!t[n]&&[{name:n,value:t[n]}]},e.prototype.getFieldEditData=function(e,t,n){var o="f_"+e.id;return!!t[o]&&[{fieldid:e.id,value:t[o]}]},e.prototype.hasFieldDataChanged=function(e,t,n){return n=n&&n.content||"",(t["f_"+e.id]||"")!=n},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return e.content=t[""]||"",e},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1413),s=n(127),u=n(697),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(697),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModDataFieldMultimenuHandler",this.type="multimenu"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id,o="f_"+e.id+"_allreq";if(t[n]&&t[n].length>0){var r=[];return r.push({name:n,value:t[n]}),t[o]&&r.push({name:o,value:!0}),r}return!1},e.prototype.getFieldEditData=function(e,t,n){return[{fieldid:e.id,value:t["f_"+e.id]||[]}]},e.prototype.hasFieldDataChanged=function(e,t,n){return n=n&&n.content||"",t["f_"+e.id].join("##")!=n},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return e.content=t[""]&&t[""].join("##")||"",e},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1415),s=n(127),u=n(699),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(3),i=n(363),l=n(699),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t){var n=e.call(this,t)||this;return n.translate=t,n.name="AddonModDataFieldNumberHandler",n.type="number",n}return a(t,e),t.prototype.getComponent=function(e,t){return l.a},t.prototype.hasFieldDataChanged=function(e,t,n){return n=n&&n.content||"",(t["f_"+e.id]||"")!=n},t.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&""!=t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},t=s([Object(o.A)(),u("design:paramtypes",[r.c])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1417),s=n(127),u=n(700),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(3),i=n(177),l=n(97),a=n(700),s=n(72),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.translate=e,this.fileSessionprovider=t,this.fileUploaderProvider=n,this.name="AddonModDataFieldPictureHandler",this.type="picture"}return e.prototype.getComponent=function(e,t){return a.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id;return!!t[n]&&[{name:n,value:t[n]}]},e.prototype.getFieldEditData=function(e,t,n){var o=this.getFieldEditFiles(e);return[{fieldid:e.id,subfield:"file",files:o},{fieldid:e.id,subfield:"alttext",value:t["f_"+e.id+"_alttext"]}]},e.prototype.getFieldEditFiles=function(e){return this.fileSessionprovider.getFiles(l.a.COMPONENT,e.dataid+"_"+e.id)},e.prototype.hasFieldDataChanged=function(e,t,n){var o=t["f_"+e.id+"_alttext"]||"",r=n&&n.content1||"",i=this.getFieldEditFiles(e)||[],l=n&&n.files||[];if(l.length>0){var a=n&&n.content||"",s=l.find(function(e){return e.filename==a});s&&(l=[s])}else l=[];return o!=r||this.fileUploaderProvider.areFileListDifferent(i,l)},e.prototype.getFieldsNotifications=function(e,t){if(e.required){if(!t||!t.length)return this.translate.instant("addon.mod_data.errormustsupplyvalue");if(!t.some(function(e){return void 0!==e.subfield&&"file"==e.subfield&&!!e.value}))return this.translate.instant("addon.mod_data.errormustsupplyvalue")}return!1},e.prototype.overrideData=function(e,t,n){return t&&t.file&&t.file.offline>0&&n&&n.length>0?(e.content=n[0].filename,e.files=[n[0]]):t&&t.file&&t.file.online&&t.file.online.length>0&&(e.content=t.file.online[0].filename,e.files=[t.file.online[0]]),e.content1=t.alttext||"",e},e.prototype.isEnabled=function(){return!0},e=u([Object(o.A)(),c("design:paramtypes",[r.c,i.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1419),s=n(127),u=n(701),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(3),i=n(701),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.translate=e,this.name="AddonModDataFieldRadiobuttonHandler",this.type="radiobutton"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.getFieldSearchData=function(e,t){var n="f_"+e.id;return!!t[n]&&[{name:n,value:t[n]}]},e.prototype.getFieldEditData=function(e,t,n){return[{fieldid:e.id,value:t["f_"+e.id]||""}]},e.prototype.hasFieldDataChanged=function(e,t,n){return n=n&&n.content||"",(t["f_"+e.id]||"")!=n},e.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,t,n){return e.content=t[""]||"",e},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.c])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(363),s=n(127),u=n(698),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1422),s=n(127),u=n(702),c=n(26),d=n(31),f=n(214),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t){e.registerHandler(t)}return e=p([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a,f.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),h("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(3),i=n(363),l=n(702),a=n(11),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n){var o=e.call(this,t)||this;return o.translate=t,o.textUtils=n,o.name="AddonModDataFieldTextareaHandler",o.type="textarea",o}return s(t,e),t.prototype.getComponent=function(e,t){return l.a},t.prototype.getFieldEditData=function(e,t,n){var o="f_"+e.id,r=this.getFieldEditFiles(e,t,n),i=this.textUtils.restorePluginfileUrls(t[o]||"",r);return i=this.textUtils.formatHtmlLines(i),this.textUtils.htmlIsBlank(i)&&(i=""),[{fieldid:e.id,value:i},{fieldid:e.id,subfield:"content1",value:1},{fieldid:e.id,subfield:"itemid",files:r}]},t.prototype.getFieldEditFiles=function(e,t,n){return n&&n.files||[]},t.prototype.getFieldsNotifications=function(e,t){if(e.required){if(!t||!t.length)return this.translate.instant("addon.mod_data.errormustsupplyvalue");var n=t.find(function(e){return""==e.subfield});if(!n||this.textUtils.htmlIsBlank(n.value))return this.translate.instant("addon.mod_data.errormustsupplyvalue")}return!1},t.prototype.overrideData=function(e,t,n){return e.content=t[""]||"",e.content.length>0&&e.files&&e.files.length>0&&(e.content=this.textUtils.replacePluginfileUrls(e.content,e.files)),e},t=u([Object(o.A)(),c("design:paramtypes",[r.c,a.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1424),s=n(127),u=n(703),c=n(26),d=n(31),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[u.a],imports:[r.b,i.k,l.b.forChild(),c.a,d.a],providers:[a.a],exports:[u.a],entryComponents:[u.a]}),p("design:paramtypes",[s.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(3),i=n(363),l=n(703),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t){var n=e.call(this,t)||this;return n.translate=t,n.name="AddonModDataFieldUrlHandler",n.type="url",n}return a(t,e),t.prototype.getComponent=function(e,t){return l.a},t.prototype.getFieldEditData=function(e,t,n){var o="f_"+e.id;return[{fieldid:e.id,subfield:"0",value:t[o]&&t[o].trim()||""}]},t.prototype.getFieldsNotifications=function(e,t){return!(!e.required||t&&t.length&&t[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},t=s([Object(o.A)(),u("design:paramtypes",[r.c])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(704),i=n(1426),l=n(1427),a=n(1428),s=n(61),u=n(62),c=n(50),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,o,r,i){e.registerHandler(t),n.registerHandler(o),r.registerHandler(i)}return e=d([Object(o.I)({declarations:[],imports:[],providers:[r.a,i.a,l.a,a.a]}),f("design:paramtypes",[s.a,i.a,u.a,l.a,c.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(40),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.name="AddonModLabel",this.modName="label",this.supportedFeatures=(e={},e[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,e[r.a.FEATURE_IDNUMBER]=!0,e[r.a.FEATURE_GROUPS]=!1,e[r.a.FEATURE_GROUPINGS]=!1,e[r.a.FEATURE_MOD_INTRO]=!0,e[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!1,e[r.a.FEATURE_GRADE_HAS_GRADE]=!1,e[r.a.FEATURE_GRADE_OUTCOMES]=!1,e[r.a.FEATURE_BACKUP_MOODLE2]=!0,e[r.a.FEATURE_SHOW_DESCRIPTION]=!0,e);var e}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,t,n){var o=e.description;return e.description="",{icon:"",title:o,a11yTitle:"",class:"addon-mod-label-handler"}},e.prototype.getMainComponent=function(e,t,n){},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(99),i=n(38),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this,t,"AddonModLabel","label","l")||this;return n.name="AddonModLabelLinkHandler",n}return l(t,e),t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(3),i=n(10),l=n(18),a=n(1),s=n(4),u=n(2),c=n(13),d=n(244),f=n(704),p=n(32),h=n(56),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){function t(t,n,o,r,i,l,a,s,u,c){var d=e.call(this,t,n,o,r,i,l,a,s,u)||this;return d.labelProvider=c,d.name="AddonModLabel",d.modName="label",d.component=f.a.COMPONENT,d.updatesNames=/^.*files$/,d.skipListStatus=!0,d}return m(t,e),t.prototype.getIntroFiles=function(e,t,n){var o=this;return(this.labelProvider.isGetLabelAvailableForSite()?this.labelProvider.getLabel(t,e.id,!1,n):Promise.resolve()).then(function(t){return o.getIntroFilesFromInstance(e,t)})},t.prototype.invalidateContent=function(e,t){return this.labelProvider.invalidateContent(e,t)},t.prototype.invalidateModule=function(e,t){var n=[];return n.push(this.labelProvider.invalidateLabelData(t)),n.push(this.courseProvider.invalidateModule(e.id)),this.utils.allPromises(n)},t=_([Object(o.A)(),g("design:paramtypes",[r.c,i.a,u.a,c.a,l.a,a.a,s.a,p.a,h.a,f.a])],t)}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(393),i=n(495),l=n(1430),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[],providers:[i.a,l.a]}),s("design:paramtypes",[r.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(495),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.airnotifierProvider=e,this.name="AddonMessageOutputAirnotifier",this.processorName="airnotifier"}return e.prototype.isEnabled=function(){return this.airnotifierProvider.isEnabled()},e.prototype.getDisplayData=function(e){return{priority:600,label:"addon.messageoutput_airnotifier.processorsettingsdesc",icon:"settings",page:"AddonMessageOutputAirnotifierDevicesPage"}},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(1432),i=n(1434),l=n(1436),a=n(1438),s=n(1439),u=n(1441),c=n(1443),d=n(1445),f=n(1447),p=n(1449),h=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},m=function(){function e(){}return e=h([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1433),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(138),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourAdaptive",this.type="adaptive"}return e.prototype.handleQuestion=function(e,t){this.questionHelper.extractQbehaviourButtons(t)},e.prototype.isEnabled=function(){return!0},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1435),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(138),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourAdaptiveNoPenalty",this.type="adaptivenopenalty"}return e.prototype.handleQuestion=function(e,t){this.questionHelper.extractQbehaviourButtons(t)},e.prototype.isEnabled=function(){return!0},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(117),a=n(31),s=n(1437),u=n(468),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[u.a],imports:[r.k,i.b.forChild(),a.a],providers:[s.a],exports:[u.a],entryComponents:[u.a]}),d("design:paramtypes",[l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(73),i=n(138),l=n(705),a=n(468),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.questionDelegate=e,this.questionHelper=t,this.deferredFeedbackHandler=n,this.name="AddonQbehaviourDeferredCBM",this.type="deferredcbm"}return e.prototype.determineNewState=function(e,t,n,o){return this.deferredFeedbackHandler.determineNewStateDeferred(e,t,n,o,this.isCompleteResponse.bind(this),this.isSameResponse.bind(this))},e.prototype.handleQuestion=function(e,t){if(this.questionHelper.extractQbehaviourCBM(t))return[a.a]},e.prototype.isCompleteResponse=function(e,t){var n=this.questionDelegate.isCompleteResponse(e,t);return n>0?t["-certainty"]?1:0:n},e.prototype.isEnabled=function(){return!0},e.prototype.isSameResponse=function(e,t,n,o,r){var i=this.questionDelegate.isSameResponse(e,n,r);return i?t["-certainty"]==o["-certainty"]:i},e=s([Object(o.A)(),u("design:paramtypes",[r.a,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(705),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1440),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(138),i=n(468),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourImmediateCBM",this.type="immediatecbm"}return e.prototype.handleQuestion=function(e,t){if(this.questionHelper.extractQbehaviourButtons(t),this.questionHelper.extractQbehaviourCBM(t))return[i.a]},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1442),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(138),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourImmediateFeedback",this.type="immediatefeedback"}return e.prototype.handleQuestion=function(e,t){this.questionHelper.extractQbehaviourButtons(t)},e.prototype.isEnabled=function(){return!0},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(117),l=n(1444),a=n(706),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){e.registerHandler(t)}return e=s([Object(o.I)({declarations:[a.a],imports:[r.k],providers:[l.a],exports:[a.a],entryComponents:[a.a]}),u("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(128),i=n(138),l=n(706),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.questionHelper=e,this.questionProvider=t,this.name="AddonQbehaviourInformationItem",this.type="informationitem"}return e.prototype.determineNewState=function(e,t,n,o){return this.questionProvider.getState(n.answers["-seen"]?"complete":n.state||"todo")},e.prototype.handleQuestion=function(e,t){if(this.questionHelper.extractQbehaviourSeenInput(t))return[l.a]},e.prototype.isEnabled=function(){return!0},e=a([Object(o.A)(),s("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1446),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(138),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourInteractive",this.type="interactive"}return e.prototype.handleQuestion=function(e,t){this.questionHelper.extractQbehaviourButtons(t)},e.prototype.isEnabled=function(){return!0},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1448),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(138),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourInteractiveCountback",this.type="interactivecountback"}return e.prototype.handleQuestion=function(e,t){this.questionHelper.extractQbehaviourButtons(t)},e.prototype.isEnabled=function(){return!0},e=i([Object(o.A)(),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1450),i=n(117),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[r.a]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(128),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.questionDelegate=e,this.questionProvider=t,this.name="AddonQbehaviourManualGraded",this.type="manualgraded"}return e.prototype.determineNewState=function(e,t,n,o){return this.determineNewStateManualGraded(e,t,n,o)},e.prototype.determineNewStateManualGraded=function(e,t,n,o,r,i){var l=this;return this.questionProvider.getQuestion(e,t,n.slot,o).catch(function(){return n}).then(function(a){var s=l.questionProvider.getState(a.state);return s.finished||!s.active?s:l.questionProvider.getQuestionAnswers(e,t,n.slot,!1,o).then(function(e){var t=l.questionProvider.getBasicAnswers(n.answers);e=l.questionProvider.convertAnswersArrayToObject(e,!0);var o=l.questionProvider.getBasicAnswers(e);if(i){if(i(n,e,o,n.answers,t))return s}else if(l.questionDelegate.isSameResponse(n,o,t))return s;var a,u;return a=r?r(n,n.answers):l.questionDelegate.isCompleteResponse(n,t),u=a<0?"cannotdeterminestatus":a>0?"complete":"todo",l.questionProvider.getState(u)})})},e.prototype.isEnabled=function(){return!0},e=l([Object(o.A)(),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),r=n(1452),i=n(1453),l=n(1455),a=n(1457),s=n(1459),u=n(1461),c=n(1463),d=n(1465),f=n(1467),p=n(1469),h=n(1470),m=n(1472),_=n(1473),g=n(1475),v=n(1477),y=n(1479),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=function(){function e(){}return e=b([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(469),c=n(470),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(1454),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[i.a]}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(707),i=n(364),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.multichoiceHandler=e,this.name="AddonQtypeCalculatedMulti",this.type="qtype_calculatedmulti"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){return this.multichoiceHandler.isCompleteResponseSingle(t)},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.multichoiceHandler.isGradableResponseSingle(t)},e.prototype.isSameResponse=function(e,t,n){return this.multichoiceHandler.isSameResponseSingle(t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(1456),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[i.a]}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(469),i=n(470),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.calculatedHandler=e,this.name="AddonQtypeCalculatedSimple",this.type="qtype_calculatedsimple"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){return this.calculatedHandler.isCompleteResponse(e,t)},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.calculatedHandler.isGradableResponse(e,t)},e.prototype.isSameResponse=function(e,t,n){return this.calculatedHandler.isSameResponse(e,t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(1458),c=n(708),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(128),i=n(708),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeDdImageOrText",this.type="qtype_ddimageortext"}return e.prototype.getBehaviour=function(e,t){return"interactive"===t?"interactivecountback":t},e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){for(var n in t){var o=t[n];if(!o||"0"===o)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){for(var n in t){var o=t[n];if(o&&"0"!==o)return 1}return 0},e.prototype.isSameResponse=function(e,t,n){return this.questionProvider.compareAllAnswers(t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(1460),c=n(709),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(128),i=n(138),l=n(709),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.questionProvider=e,this.questionHelper=t,this.name="AddonQtypeDdMarker",this.type="qtype_ddmarker"}return e.prototype.getBehaviour=function(e,t){return"interactive"===t?"interactivecountback":t},e.prototype.getComponent=function(e,t){return l.a},e.prototype.isCompleteResponse=function(e,t){for(var n in t)if(t[n])return 1;return 0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.isCompleteResponse(e,t)},e.prototype.isSameResponse=function(e,t,n){return this.questionProvider.compareAllAnswers(t,n)},e.prototype.getAdditionalDownloadableFiles=function(e,t){return this.questionHelper.extractQuestionScripts(e,t),e.amdArgs&&void 0!==e.amdArgs[1]?[e.amdArgs[1]]:[]},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(1462),c=n(710),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(128),i=n(710),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeDdwtos",this.type="qtype_ddwtos"}return e.prototype.getBehaviour=function(e,t){return"interactive"===t?"interactivecountback":t},e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){for(var n in t){var o=t[n];if(!o||"0"===o)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){for(var n in t){var o=t[n];if(o&&"0"!==o)return 1}return 0},e.prototype.isSameResponse=function(e,t,n){return this.questionProvider.compareAllAnswers(t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(31),s=n(1464),u=n(711),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[u.a],imports:[r.k,i.b.forChild(),a.a],providers:[s.a],exports:[u.a],entryComponents:[u.a]}),d("design:paramtypes",[l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(711),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.name="AddonQtypeDescription",this.type="qtype_description"}return e.prototype.getBehaviour=function(e,t){return"informationitem"},e.prototype.getComponent=function(e,t){return r.a},e.prototype.isEnabled=function(){return!0},e.prototype.validateSequenceCheck=function(e,t){return!0},e=i([Object(o.A)(),l("design:paramtypes",[])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(1466),c=n(712),d=n(214),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){e.registerHandler(t)}return e=f([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a,d.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),p("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(11),i=n(4),l=n(2),a=n(138),s=n(712),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){this.utils=e,this.questionHelper=t,this.textUtils=n,this.domUtils=o,this.name="AddonQtypeEssay",this.type="qtype_essay"}return e.prototype.getBehaviour=function(e,t){return"manualgraded"},e.prototype.getComponent=function(e,t){return s.a},e.prototype.getPreventSubmitMessage=function(e){var t=this.domUtils.convertToElement(e.html);return t.querySelector("div[id*=filemanager]")?"core.question.errorattachmentsnotsupported":this.questionHelper.hasDraftFileUrls(t.innerHTML)?"core.question.errorinlinefilesnotsupported":void 0},e.prototype.isCompleteResponse=function(e,t){var n=this.domUtils.convertToElement(e.html),o=t.answer&&""!==t.answer;return!!n.querySelector("div[id*=filemanager]")?-1:o?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return 0},e.prototype.isSameResponse=function(e,t,n){return this.utils.sameAtKeyMissingIsBlank(t,n,"answer")},e.prototype.prepareAnswers=function(e,t,n,o){var r=this.domUtils.convertToElement(e.html).querySelector("textarea[name*=_answer]");r&&void 0!==t[r.name]&&(t[r.name]=this.textUtils.formatHtmlLines(t[r.name]))},e=u([Object(o.A)(),c("design:paramtypes",[l.a,a.a,r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(31),s=n(1468),u=n(713),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[u.a],imports:[r.k,i.b.forChild(),a.a],providers:[s.a],exports:[u.a],entryComponents:[u.a]}),d("design:paramtypes",[l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(128),i=n(713),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeGapSelect",this.type="qtype_gapselect"}return e.prototype.getBehaviour=function(e,t){return"interactive"===t?"interactivecountback":t},e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){for(var n in t){var o=t[n];if(!o||"0"===o)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){for(var n in t){if(t[n])return 1}return 0},e.prototype.isSameResponse=function(e,t,n){return this.questionProvider.compareAllAnswers(t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(714),c=n(471),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(31),s=n(1471),u=n(715),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){e.registerHandler(t)}return e=c([Object(o.I)({declarations:[u.a],imports:[r.k,i.b.forChild(),a.a],providers:[s.a],exports:[u.a],entryComponents:[u.a]}),d("design:paramtypes",[l.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(128),i=n(138),l=n(715),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.questionProvider=e,this.questionHelper=t,this.name="AddonQtypeMultiAnswer",this.type="qtype_multianswer"}return e.prototype.getBehaviour=function(e,t){return"interactive"===t?"interactivecountback":t},e.prototype.getComponent=function(e,t){return l.a},e.prototype.isCompleteResponse=function(e,t){var n=this.questionProvider.getBasicAnswers(this.questionHelper.getAllInputNamesFromHtml(e.html));for(var o in n){var r=t[o];if(!r&&!1!==r&&0!==r)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){for(var n in t){var o=t[n];if(o||!1===o)return 1}return 0},e.prototype.isSameResponse=function(e,t,n){return this.questionProvider.compareAllAnswers(t,n)},e.prototype.validateSequenceCheck=function(e,t){return e.sequencecheck==t||2==e.sequencecheck&&"todo"==e.state&&"1"==t},e=a([Object(o.A)(),s("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(31),s=n(26),u=n(707),c=n(364),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),s.a,a.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(1474),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[i.a]}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(469),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="AddonQtypeNumerical",t.type="qtype_numerical",t}return i(t,e),t=l([Object(o.A)()],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(1476),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[i.a]}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(714),i=n(471),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.matchHandler=e,this.name="AddonQtypeRandomSaMatch",this.type="qtype_randomsamatch"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){return this.matchHandler.isCompleteResponse(e,t)},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.matchHandler.isGradableResponse(e,t)},e.prototype.isSameResponse=function(e,t,n){return this.matchHandler.isSameResponse(e,t,n)},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(5),i=n(3),l=n(73),a=n(26),s=n(31),u=n(1478),c=n(716),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){e.registerHandler(t)}return e=d([Object(o.I)({declarations:[c.a],imports:[r.k,i.b.forChild(),a.a,s.a],providers:[u.a],exports:[c.a],entryComponents:[c.a]}),f("design:paramtypes",[l.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(2),i=n(716),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.utils=e,this.name="AddonQtypeShortAnswer",this.type="qtype_shortanswer"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){return t.answer||0===t.answer?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.isCompleteResponse(e,t)},e.prototype.isSameResponse=function(e,t,n){return this.utils.sameAtKeyMissingIsBlank(t,n,"answer")},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(73),i=n(1480),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){e.registerHandler(t)}return e=l([Object(o.I)({declarations:[],providers:[i.a]}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(2),i=n(364),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.utils=e,this.name="AddonQtypeTrueFalse",this.type="qtype_truefalse"}return e.prototype.getComponent=function(e,t){return i.a},e.prototype.isCompleteResponse=function(e,t){return t.answer?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,t){return this.isCompleteResponse(e,t)},e.prototype.isSameResponse=function(e,t,n){return this.utils.sameAtKeyMissingIsBlank(t,n,"answer")},e.prototype.prepareAnswers=function(e,t,n,o){e&&void 0!==t[e.optionsName]&&!t[e.optionsName]&&delete t[e.optionsName]},e=l([Object(o.A)(),a("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(1482),i=n(102),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.courseOptionsDelegate=e,this.courseMenuHandler=t,this.courseOptionsDelegate.registerHandler(this.courseMenuHandler)}return e=l([Object(o.I)({declarations:[],imports:[],providers:[r.a],exports:[]}),a("design:paramtypes",[i.a,r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.name="AddonStorageManager",this.priority=500,this.isMenuHandler=!0}return e.prototype.isEnabledForCourse=function(e,t,n,o){return!0},e.prototype.isEnabled=function(){return!0},e.prototype.getMenuDisplayData=function(e,t){return{icon:"cube",title:"addon.storagemanager.managestorage",page:"AddonStorageManagerCourseStoragePage",class:"addon-storagemanager-coursemenu-handler"}},e=r([Object(o.A)()],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),r=n(1484),i=n(1486),l=n(1488),a=n(1490),s=n(1492),u=n(1494),c=n(1496),d=n(1498),f=n(1500),p=n(1502),h=n(1504),m=n(1506),_=n(1508),g=n(1510),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=function(){function e(){}return e=v([Object(o.I)({declarations:[],imports:[r.a,i.a,l.a,a.a,s.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a],providers:[],exports:[]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1485),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterActivityNamesHandler",t.filterName="activitynames",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1487),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterAlgebraHandler",t.filterName="algebra",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1489),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterCensorHandler",t.filterName="censor",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1491),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterDataHandler",t.filterName="data",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1493),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(132),i=n(604),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(t){var n=e.call(this)||this;return n.factoryResolver=t,n.name="AddonFilterDisplayH5PHandler",n.filterName="displayh5p",n.template=document.createElement("template"),n}return l(t,e),t.prototype.filter=function(e,t,n,o){this.template.innerHTML=e;return Array.from(this.template.content.querySelectorAll("iframe.h5p-iframe")).forEach(function(e){var t=document.createElement("div");t.classList.add("core-h5p-tmp-placeholder"),t.setAttribute("data-player-src",e.src),e.parentElement.replaceChild(t,e)}),this.template.innerHTML},t.prototype.handleHtml=function(e,t,n,o,r,l,a){var s=this;Array.from(e.querySelectorAll("div.core-h5p-tmp-placeholder")).forEach(function(e){var t=e.getAttribute("data-player-src"),n=s.factoryResolver.resolveComponentFactory(i.a),a=o.createComponent(n);a.instance.src=t,a.instance.component=r,a.instance.componentId=l,e.parentElement.replaceChild(a.instance.elementRef.nativeElement,e)})},t=a([Object(o.A)(),s("design:paramtypes",[o.o])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1495),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterEmailProtectHandler",t.filterName="emailprotect",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1497),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterEmoticonHandler",t.filterName="emoticon",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1499),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterGlossaryHandler",t.filterName="glossary",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1501),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),r=n(132),i=n(9),l=n(150),a=n(1),s=n(11),u=n(2),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e){function t(t,n,o,r,l){var a=e.call(this)||this;return a.langProvider=n,a.sitesProvider=o,a.textUtils=r,a.utils=l,a.name="AddonFilterMathJaxLoaderHandler",a.filterName="mathjaxloader",a.DEFAULT_URL="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js",a.DEFAULT_CONFIG='\n        MathJax.Hub.Config({\n            extensions: [\n                "Safe.js",\n                "tex2jax.js",\n                "mml2jax.js",\n                "MathEvents.js",\n                "MathZoom.js",\n                "MathMenu.js",\n                "toMathML.js",\n                "TeX/noErrors.js",\n                "TeX/noUndefined.js",\n                "TeX/AMSmath.js",\n                "TeX/AMSsymbols.js",\n                "fast-preview.js",\n                "AssistiveMML.js",\n                "[a11y]/accessibility-menu.js"\n            ],\n            jax: ["input/TeX","input/MathML","output/SVG"],\n            showMathMenu: false,\n            errorSettings: { message: ["!"] },\n            skipStartupTypeset: true,\n            messageStyle: "none"\n        });\n    ',a.MATHJAX_LANG_CODES=["ar","ast","bcc","bg","br","ca","cdo","ce","cs","cy","da","de","diq","en","eo","es","fa","fi","fr","gl","he","ia","it","ja","kn","ko","lb","lki","lt","mk","nl","oc","pl","pt","pt-br","qqq","ru","scn","sco","sk","sl","sv","th","tr","uk","vi","zh-hans","zh-hant"],a.EXPLICIT_MAPPING={"zh-tw":"zh-hant","zh-cn":"zh-hans"},a.window=window,a.loadJS(),a.langProvider.getCurrentLanguage().then(function(e){e=a.mapLanguageCode(e),a.window.M.filter_mathjaxloader.configure({mathjaxconfig:a.DEFAULT_CONFIG,lang:e})}),t.on(i.a.LANGUAGE_CHANGED,function(e){void 0!==a.window.MathJax&&(e=a.mapLanguageCode(e),a.window.MathJax.Hub.Queue(function(){a.window.MathJax.Localization.setLocale(e)}))}),a}return c(t,e),t.prototype.filter=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(t){if(!n.wsNotFiltered&&t.isVersionGreaterEqualThan("3.7"))return e;if(-1!=e.indexOf('class="filter_mathjaxloader_equation"'))return e;var o=!1;if(e.match(/\\[\[\(]/)||e.match(/\$\$/)){var i=r.wrapMathInNoLink(e);e=i.text,o=i.changed}return o?'<span class="filter_mathjaxloader_equation">'+e+"</span>":e})},t.prototype.handleHtml=function(e,t,n,o,r,i,l){var a=this;return this.waitForReady().then(function(){a.window.M.filter_mathjaxloader.typeset(e)})},t.prototype.insertSpan=function(e,t,n){return this.textUtils.substrReplace(e,'<span class="nolink">'+e.substr(t,n-t+1)+"</span>",t,n-t+1)},t.prototype.jsLoaded=function(){return this.window.M&&this.window.M.filter_mathjaxloader},t.prototype.loadJS=function(){var e=this;this.window.M=this.window.M||{},this.window.M.filter_mathjaxloader=this.window.M.filter_mathjaxloader||{_lang:"",_configured:!1,configure:function(e){var t=document.createElement("script");t.type="text/x-mathjax-config",t.text=e.mathjaxconfig,document.head.appendChild(t),this._lang=e.lang},_setLocale:function(){if(!this._configured){var t=this._lang;void 0!==e.window.MathJax&&(e.window.MathJax.Hub.Queue(function(){e.window.MathJax.Localization.setLocale(t)}),e.window.MathJax.Hub.Configured(),this._configured=!0)}},typeset:function(t){if(this._configured||this._setLocale(),void 0!==e.window.MathJax){var n=e.window.MathJax.Hub.processSectionDelay;e.window.MathJax.Hub.processSectionDelay=0;Array.from(t.querySelectorAll(".filter_mathjaxloader_equation")).forEach(function(t){e.window.MathJax.Hub.Queue(["Typeset",e.window.MathJax.Hub,t])}),e.window.MathJax.Hub.processSectionDelay=n}}}},t.prototype.mapLanguageCode=function(e){if(this.EXPLICIT_MAPPING[e])return this.EXPLICIT_MAPPING[e];if(-1!=this.MATHJAX_LANG_CODES.indexOf(e))return e;var t=e.split("-");return-1!=this.MATHJAX_LANG_CODES.indexOf(t[0])?t[0]:this.langProvider.getDefaultLanguage()},t.prototype.shouldBeApplied=function(e,t){return t&&t.getId()==this.sitesProvider.getCurrentSiteId()},t.prototype.waitForReady=function(e){var t=this;if(void 0===e&&(e=0),this.window.MathJax&&this.jsLoaded()||e>=20)return Promise.resolve();var n=this.utils.promiseDefer();return setTimeout(function(){return t.waitForReady(e+1).finally(function(){n.resolve()})},250),n.promise},t.prototype.wrapMathInNoLink=function(e){for(var t=e.length,n=1,o=-1,r=!1,i=!1,l=-1,a=!1;n<t;)-1===o?"\\"===e[n-1]?"["===e[n]?(o=n-1,r=!0):"("===e[n]?l=n-1:")"===e[n]&&l>-1&&(e=this.insertSpan(e,l,n),l=-1,n+=28,t+=28,a=!0):"$"===e[n-1]&&"$"===e[n]&&(o=n-1,i=!0):("\\"===e[n-1]&&"]"===e[n]&&r||"$"===e[n-1]&&"$"===e[n]&&i)&&(e=this.insertSpan(e,o,n),o=-1,r=!1,i=!1,n+=28,t+=28,a=!0),n++;return{text:e,changed:a}},t=d([Object(o.A)(),f("design:paramtypes",[i.a,l.a,a.a,s.a,u.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1503),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(132),i=n(11),l=n(22),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.textUtils=t,o.urlUtils=n,o.name="AddonFilterMediaPluginHandler",o.filterName="mediaplugin",o.template=document.createElement("template"),o}return a(t,e),t.prototype.filter=function(e,t,n,o){var r=this;this.template.innerHTML=e;return Array.from(this.template.content.querySelectorAll("video")).forEach(function(e){r.treatVideoFilters(e)}),this.template.innerHTML},t.prototype.treatVideoFilters=function(e){if(e.classList.contains("video-js")){var t=this.textUtils.parseJSON(e.getAttribute("data-setup")||e.getAttribute("data-setup-lazy")||"{}"),n=t.techOrder&&t.techOrder[0]&&"youtube"==t.techOrder[0]&&this.urlUtils.getYoutubeEmbedUrl(t.sources&&t.sources[0]&&t.sources[0].src);if(n){var o=document.createElement("iframe");o.id=e.id,o.src=n,o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen","1"),o.width="100%",o.height="300",e.parentNode.replaceChild(o,e)}}},t=s([Object(o.A)(),u("design:paramtypes",[i.a,l.a])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1505),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(1),i=n(132),l=n(150),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(t,n){var o=e.call(this)||this;return o.langProvider=t,o.sitesProvider=n,o.name="AddonFilterMultilangHandler",o.filterName="multilang",o}return a(t,e),t.prototype.filter=function(e,t,n,o){var r=this;return this.sitesProvider.getSite(o).then(function(t){return r.langProvider.getCurrentLanguage().then(function(t){var n=/<(?:lang|span)[^>]+lang="[a-zA-Z0-9_-]+"[^>]*>(.*?)<\/(?:lang|span)>/g,o=new RegExp('<(?:lang|span)[^>]+lang="'+t+'"[^>]*>(.*?)</(?:lang|span)>',"g");if(!e.match(o)){var r=e.match(n);if(!r||!r[0])return e;t=r[0].match(/lang="([a-zA-Z0-9_-]+)"/)[1],o=new RegExp('<(?:lang|span)[^>]+lang="'+t+'"[^>]*>(.*?)</(?:lang|span)>',"g")}return e=e.replace(o,"$1"),e=e.replace(n,"")})})},t.prototype.shouldBeApplied=function(e,t){return e.wsNotFiltered||!t.isVersionGreaterEqualThan("3.7")},t=s([Object(o.A)(),u("design:paramtypes",[l.a,r.a])],t)}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1507),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterTexHandler",t.filterName="tex",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1509),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterTidyHandler",t.filterName="tidy",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(5),i=n(36),l=n(1511),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){e.registerHandler(t)}return e=a([Object(o.I)({declarations:[],imports:[r.k],providers:[l.a]}),s("design:paramtypes",[i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(132),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(){var t=e.call(this)||this;return t.name="AddonFilterUrlToLinkHandler",t.filterName="urltolink",t}return i(t,e),t.prototype.shouldBeApplied=function(e,t){return!1},t=l([Object(o.A)(),a("design:paramtypes",[])],t)}(r.a)},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return c._57(0,[(e()(),c._31(0,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,1,{contentLabel:0}),c._52(603979776,2,{_buttons:1}),c._52(603979776,3,{_icons:1}),c._30(5,16384,null,0,_.a,[h.a,c.V,c.t,[8,null]],null,null),(e()(),c._55(6,2,["",""]))],null,function(e,t){e(t,6,0,t.component.title)})}function r(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,g.b,g.a)),c._30(1,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null)],function(e,t){e(t,1,0,t.parent.context.$implicit.iconDescription,t.parent.context.$implicit.ariaDescription)},null)}function i(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"core-icon",[["item-end",""]],null,null,null,g.b,g.a)),c._30(1,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"],slash:[1,"slash"]},null)],function(e,t){e(t,1,0,t.parent.context.$implicit.iconAction,t.parent.context.$implicit.iconSlash)},null)}function l(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"ion-spinner",[["item-end",""]],[[2,"spinner-paused",null]],null,null,y.b,y.a)),c._30(1,114688,null,0,b.a,[h.a,c.t,c.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,c._44(t,1)._paused)})}function a(e){return c._57(0,[(e()(),c._31(0,0,null,null,2,"ion-badge",[["item-end",""]],[[8,"className",0]],null,null,null,null)),c._30(1,16384,null,0,P.a,[h.a,c.t,c.V],null,null),(e()(),c._55(2,null,["",""]))],null,function(e,t){e(t,0,0,c._34(1,"",t.parent.context.$implicit.badgeClass,""));e(t,2,0,t.parent.context.$implicit.badge)})}function s(e){return c._57(0,[(e()(),c._31(0,0,null,null,22,"a",[["class","item item-block"],["core-link",""],["ion-item",""],["role","menuitem"],["text-wrap",""]],[[8,"href",4],[1,"aria-label",0],[8,"hidden",0],[1,"detail-none",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.itemClicked(n,e.context.$implicit)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,4,{contentLabel:0}),c._52(603979776,5,{_buttons:1}),c._52(603979776,6,{_icons:1}),c._30(5,16384,null,0,O.a,[],null,null),c._30(6,81920,null,0,E.a,[c.t,C.a,I.a,R.a,S.a,w.a,[2,A.a],[2,D.a],[2,j.a],k.a],{capture:[0,"capture"],autoLogin:[1,"autoLogin"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._26(16777216,null,0,1,null,r)),c._30(9,16384,null,0,T.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(11,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),c._30(12,540672,null,0,x.a,[c.t,R.a,C.a,k.a,M.a,N.a,I.a,S.a,U.a,F.a,L.a,w.a,[2,A.a],[2,D.a],[2,j.a],H.a,B.a,q.a,G.a,V.a,c._11],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._26(16777216,null,4,1,null,i)),c._30(15,16384,null,0,T.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._26(16777216,null,4,1,null,l)),c._30(18,16384,null,0,T.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._26(16777216,null,4,1,null,a)),c._30(21,16384,null,0,T.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,2,["\n    "]))],function(e,t){e(t,6,0,t.context.$implicit.captureLink,t.context.$implicit.autoLogin);e(t,9,0,t.context.$implicit.iconDescription);e(t,12,0,t.context.$implicit.content,!0,!1);e(t,15,0,(t.context.$implicit.href||t.context.$implicit.action)&&t.context.$implicit.iconAction&&"spinner"!=t.context.$implicit.iconAction);e(t,18,0,(t.context.$implicit.href||t.context.$implicit.action)&&"spinner"==t.context.$implicit.iconAction);e(t,21,0,t.context.$implicit.badge)},function(e,t){e(t,0,0,t.context.$implicit.href,t.context.$implicit.ariaAction,t.context.$implicit.hidden,!t.context.$implicit.href||t.context.$implicit.iconAction)})}function u(e){return c._57(0,[(e()(),c._31(0,0,null,null,8,"ion-list",[["role","menu"]],[[8,"id",0]],null,null,null,null)),c._30(1,16384,null,0,K.a,[h.a,c.t,c.V,N.a,W.l,z.a],null,null),(e()(),c._55(-1,null,["\n    "])),(e()(),c._26(16777216,null,null,1,null,o)),c._30(4,16384,null,0,T.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,null,["\n    "])),(e()(),c._26(16777216,null,null,1,null,s)),c._30(7,802816,null,0,T.j,[c._11,c._6,c.E],{ngForOf:[0,"ngForOf"]},null),(e()(),c._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.title);e(t,7,0,n.items)},function(e,t){e(t,0,0,t.component.uniqueId)})}n.d(t,"a",function(){return J});var c=n(0),d=n(30),f=n(20),p=n(19),h=n(8),m=n(27),_=n(320),g=n(80),v=n(75),y=n(121),b=n(101),P=n(143),O=n(33),E=n(174),C=n(4),I=n(2),R=n(1),S=n(22),w=n(15),A=n(21),D=n(29),j=n(28),k=n(11),T=n(7),x=n(48),M=n(17),N=n(16),U=n(6),F=n(18),L=n(10),H=n(44),B=n(9),q=n(41),G=n(32),V=n(36),K=n(86),W=n(43),z=n(34),$=n(569),Y=n(69),Q=n(39),X=c._29({encapsulation:2,styles:[],data:{}}),J=c._27("core-context-menu-popover",$.a,function(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"core-context-menu-popover",[],null,null,null,u,X)),c._30(1,49152,null,0,$.a,[Y.a,Q.a,U.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,l.b,l.a)),i._30(1,1097728,null,3,a.a,[s.a,u.a,i.t,i.V,[2,c.a]],null,null),i._52(335544320,2,{contentLabel:0}),i._52(603979776,3,{_buttons:1}),i._52(603979776,4,{_icons:1}),i._30(5,16384,null,0,d.a,[],null,null),(e()(),i._55(-1,2,["\n        "])),(e()(),i._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),i._30(8,16384,[[2,4]],0,f.a,[u.a,i.t,i.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),i._31(9,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),i._30(10,540672,null,0,p.a,[i.t,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a,[2,I.a],[2,R.a],[2,S.a],w.a,A.a,D.a,j.a,k.a,i._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),i._55(-1,2,["\n        "])),(e()(),i._31(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==i._44(e,13)._click(n)&&o}if("ionSelect"===t){o=!1!==r.coursePicked(n,e.context.$implicit)&&o}return o},T.b,T.a)),i._30(13,245760,null,0,x.a,[s.a,u.a,i.t,i.V,[2,a.a],[2,M.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),i._55(-1,2,["\n    "]))],function(e,t){e(t,10,0,t.context.$implicit.fullname,"course",t.component.courseId);e(t,13,0,i._34(1,"",t.context.$implicit.id,""))},function(e,t){e(t,12,0,i._44(t,13)._disabled)})}function r(e){return i._57(0,[(e()(),i._31(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.courseId=n)&&o}return o},null,null)),i._30(1,1064960,null,1,M.a,[i.V,i.t,i.j],null,null),i._52(335544320,1,{_header:0}),i._50(1024,null,N.l,function(e){return[e]},[M.a]),i._30(4,671744,null,0,N.q,[[8,null],[8,null],[8,null],[2,N.l]],{model:[0,"model"]},{update:"ngModelChange"}),i._50(2048,null,N.m,null,[N.q]),i._30(6,16384,null,0,N.n,[N.m],null,null),i._30(7,16384,null,0,U.a,[u.a,i.t,i.V,v.a,F.l,L.a],null,null),(e()(),i._55(-1,null,["\n    "])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(10,802816,null,0,H.j,[i._11,i._6,i.E],{ngForOf:[0,"ngForOf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.courseId);e(t,10,0,n.courses)},function(e,t){e(t,0,0,i._44(t,6).ngClassUntouched,i._44(t,6).ngClassTouched,i._44(t,6).ngClassPristine,i._44(t,6).ngClassDirty,i._44(t,6).ngClassValid,i._44(t,6).ngClassInvalid,i._44(t,6).ngClassPending)})}n.d(t,"a",function(){return K});var i=n(0),l=n(30),a=n(20),s=n(19),u=n(8),c=n(27),d=n(33),f=n(67),p=n(48),h=n(1),m=n(4),_=n(11),g=n(17),v=n(16),y=n(2),b=n(22),P=n(6),O=n(18),E=n(10),C=n(15),I=n(21),R=n(29),S=n(28),w=n(44),A=n(9),D=n(41),j=n(32),k=n(36),T=n(176),x=n(145),M=n(137),N=n(23),U=n(86),F=n(43),L=n(34),H=n(7),B=n(570),q=n(69),G=n(39),V=i._29({encapsulation:2,styles:[],data:{}}),K=i._27("core-course-picker-menu-popover",B.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-course-picker-menu-popover",[],null,null,null,r,V)),i._30(1,49152,null,0,B.a,[q.a,G.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,25,"ion-header",[],null,null,null,null,null)),r._30(1,16384,null,0,i.a,[l.a,r.t,r.V,[2,a.a]],null,null),(e()(),r._55(-1,null,["\n    "])),(e()(),r._31(3,0,null,null,21,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,s.b,s.a)),r._30(4,49152,null,0,u.a,[c.a,[2,a.a],[2,d.a],l.a,r.t,r.V],null,null),r._30(5,212992,null,0,f.a,[u.a,p.a,h.a,m.a],null,null),(e()(),r._55(-1,3,["\n        "])),(e()(),r._31(7,0,null,3,3,"ion-title",[],null,null,null,_.b,_.a)),r._30(8,49152,null,0,g.a,[l.a,r.t,r.V,[2,v.a],[2,u.a]],null,null),(e()(),r._55(9,0,["",""])),r._47(131072,y.a,[h.a,r.j]),(e()(),r._55(-1,3,["\n\n        "])),(e()(),r._31(12,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),r._30(13,16384,null,1,b.a,[l.a,r.t,r.V,[2,v.a],[2,u.a]],null,null),r._52(603979776,1,{_buttons:1}),(e()(),r._55(-1,null,["\n            "])),(e()(),r._31(16,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.closeModal()&&o}return o},P.b,P.a)),r._30(17,1097728,[[1,4]],0,O.a,[[8,""],l.a,r.t,r.V],null,null),r._47(131072,y.a,[h.a,r.j]),(e()(),r._55(-1,0,["\n                "])),(e()(),r._31(20,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(21,147456,null,0,E.a,[l.a,r.t,r.V],{name:[0,"name"]},null),(e()(),r._55(-1,0,["\n            "])),(e()(),r._55(-1,null,["\n        "])),(e()(),r._55(-1,3,["\n    "])),(e()(),r._55(-1,null,["\n"])),(e()(),r._55(-1,null,["\n"])),(e()(),r._31(27,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,C.b,C.a)),r._30(28,4374528,null,0,I.a,[l.a,p.a,R.a,r.t,r.V,c.a,S.a,r.M,[2,a.a],[2,d.a]],null,null),(e()(),r._55(-1,1,["\n    "])),(e()(),r._31(30,0,null,1,1,"core-iframe",[],null,[[null,"loaded"]],function(e,t,n){var o=!0;if("loaded"===t){o=!1!==e.component.loaded(n)&&o}return o},w.b,w.a)),r._30(31,638976,null,0,A.a,[D.a,j.a,k.a,T.c,d.a,x.a,M.a,[2,N.a]],{src:[0,"src"]},{loaded:"loaded"}),(e()(),r._55(-1,1,["\n"]))],function(e,t){var n=t.component;e(t,5,0);e(t,21,0,"close");e(t,31,0,n.src)},function(e,t){e(t,3,0,r._44(t,4)._hidden,r._44(t,4)._sbPadding);e(t,9,0,r._56(t,9,0,r._44(t,10).transform("core.login.security_question")));e(t,16,0,r._56(t,16,0,r._44(t,18).transform("core.close")));e(t,20,0,r._44(t,21)._hidden);e(t,27,0,r._44(t,28).statusbarPadding,r._44(t,28)._hasRefresher)})}n.d(t,"a",function(){return H});var r=n(0),i=n(370),l=n(8),a=n(39),s=n(721),u=n(211),c=n(35),d=n(21),f=n(473),p=n(16),h=n(17),m=n(9),_=n(722),g=n(314),v=n(247),y=n(25),b=n(371),P=n(45),O=n(42),E=n(47),C=n(181),I=n(29),R=n(34),S=n(107),w=n(322),A=n(257),D=n(6),j=n(44),k=n(4),T=n(79),x=n(22),M=n(2),N=n(28),U=n(571),F=n(69),L=r._29({encapsulation:2,styles:[],data:{}}),H=r._27("core-recaptcha-modal",U.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-recaptcha-modal",[],null,null,null,o,L)),r._30(1,49152,null,0,U.a,[a.a,F.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return l._57(0,[(e()(),l._31(0,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component.content)})}function r(e){return l._57(0,[(e()(),l._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.content)})}function i(e){return l._57(0,[(e()(),l._31(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),l._30(1,1097728,null,3,s.a,[u.a,c.a,l.t,l.V,[2,d.a]],null,null),l._52(335544320,1,{contentLabel:0}),l._52(603979776,2,{_buttons:1}),l._52(603979776,3,{_icons:1}),l._30(5,16384,null,0,f.a,[],null,null),(e()(),l._55(-1,2,["\n    "])),(e()(),l._26(16777216,null,2,1,null,o)),l._30(8,16384,null,0,p.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(e()(),l._55(-1,2,["\n    "])),(e()(),l._26(16777216,null,2,1,null,r)),l._30(11,16384,null,0,p.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(e()(),l._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,8,0,n.html);e(t,11,0,!n.html)},null)}n.d(t,"a",function(){return g});var l=n(0),a=n(30),s=n(20),u=n(19),c=n(8),d=n(27),f=n(33),p=n(7),h=n(565),m=n(69),_=l._29({encapsulation:2,styles:[],data:{}}),g=l._27("core-bs-tooltip",h.a,function(e){return l._57(0,[(e()(),l._31(0,0,null,null,1,"core-bs-tooltip",[],null,null,null,i,_)),l._30(1,49152,null,0,h.a,[m.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,2,"core-block",[["contextLevel","course"]],null,null,null,s.b,s.a)),a._30(1,507904,[[1,4]],0,u.a,[a.C,c.a,a.F,d.a],{block:[0,"block"],contextLevel:[1,"contextLevel"],instanceId:[2,"instanceId"],extraData:[3,"extraData"]},null),a._48(2,{downloadEnabled:0})],function(e,t){var n=t.component;e(t,1,0,t.parent.context.$implicit,"course",n.courseId,e(t,2,0,n.downloadEnabled))},null)}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),a._55(-1,null,["\n                "])),(e()(),a._26(16777216,null,null,1,null,o)),a._30(3,16384,null,0,f.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n            "]))],function(e,t){e(t,3,0,t.context.$implicit.visible)},null)}function i(e){return a._57(0,[(e()(),a._31(0,0,null,null,13,"div",[["class","core-course-blocks-side"]],[[2,"core-hide-blocks",null]],null,null,null,null)),(e()(),a._55(-1,null,["\n    "])),(e()(),a._31(2,0,null,null,10,"core-loading",[["class","core-loading-center"]],null,null,null,p.b,p.a)),a._30(3,638976,null,0,h.a,[m.a,a.t,d.a,_.a],{hideUntil:[0,"hideUntil"]},null),(e()(),a._55(-1,0,["\n        "])),(e()(),a._31(5,0,null,0,6,"ion-list",[],null,null,null,null,null)),a._30(6,16384,null,0,g.a,[v.a,a.t,a.V,y.a,b.l,P.a],null,null),(e()(),a._55(-1,null,["\n            "])),(e()(),a._55(-1,null,["\n            "])),(e()(),a._26(16777216,null,null,1,null,r)),a._30(10,802816,null,0,f.j,[a._11,a._6,a.E],{ngForOf:[0,"ngForOf"]},null),(e()(),a._55(-1,null,["\n        "])),(e()(),a._55(-1,0,["\n    "])),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.dataLoaded);e(t,10,0,n.blocks)},function(e,t){e(t,0,0,t.component.hideBlocks)})}function l(e){return a._57(0,[a._52(671088640,1,{blocksComponents:1}),(e()(),a._31(1,0,null,null,3,"div",[["class","core-course-blocks-content"]],null,null,null,null,null)),(e()(),a._55(-1,null,["\n    "])),a._43(null,0),(e()(),a._55(-1,null,["\n"])),(e()(),a._55(-1,null,["\n\n"])),(e()(),a._26(16777216,null,null,1,null,i)),a._30(7,16384,null,0,f.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,7,0,n.blocks&&n.blocks.length>0)},null)}n.d(t,"b",function(){return S}),t.c=l,n.d(t,"a",function(){return w});var a=n(0),s=n(1618),u=n(390),c=n(60),d=n(9),f=n(7),p=n(54),h=n(51),m=n(17),_=n(2),g=n(86),v=n(8),y=n(16),b=n(43),P=n(34),O=n(384),E=n(4),C=n(13),I=n(385),R=n(29),S=a._29({encapsulation:2,styles:[],data:{}}),w=a._27("core-block-course-blocks",O.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-block-course-blocks",[],null,null,null,l,S)),a._30(1,114688,null,0,O.a,[E.a,C.a,I.a,a.t,R.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",hideBlocks:"hideBlocks",downloadEnabled:"downloadEnabled"},{},["*"])},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),d._55(1,null,["",""])),d._47(131072,f.a,[p.a,d.j])],null,function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.whoops")))})}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),d._55(1,null,["",""])),d._47(131072,f.a,[p.a,d.j])],null,function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.uhoh")))})}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),d._55(1,null,["",""])),d._47(131072,f.a,[p.a,d.j])],null,function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.course.activitydisabled")))})}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),d._55(1,null,["",""])),d._47(131072,f.a,[p.a,d.j])],null,function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.course.activitynotyetviewablesiteupgradeneeded")))})}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),d._55(1,null,["",""])),d._47(131072,f.a,[p.a,d.j])],null,function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.course.activitynotyetviewableremoteaddon")))})}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),d._31(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),d._55(2,null,["",""])),d._47(131072,f.a,[p.a,d.j])],null,function(e,t){e(t,2,0,d._56(t,2,0,d._44(t,3).transform("core.course.askadmintosupport")))})}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,15,"div",[],null,null,null,null,null)),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),d._31(3,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),d._55(4,null,["",""])),d._47(131072,f.a,[p.a,d.j]),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(7,0,null,null,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,h.b,h.a)),d._30(8,1097728,null,0,m.a,[[8,""],_.a,d.t,d.V],{block:[0,"block"]},null),d._30(9,81920,null,0,g.a,[d.t,v.a,y.a,b.a,P.a,O.a,[2,E.a],[2,C.a],[2,I.a],R.a],null,null),(e()(),d._55(10,0,["\n            ","\n            "])),d._47(131072,f.a,[p.a,d.j]),(e()(),d._31(12,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(13,147456,null,0,S.a,[_.a,d.t,d.V],{name:[0,"name"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._55(-1,null,["\n    "]))],function(e,t){e(t,8,0,""),e(t,9,0);e(t,13,0,"open")},function(e,t){var n=t.component;e(t,4,0,d._56(t,4,0,d._44(t,5).transform("core.course.useactivityonbrowser")));e(t,7,0,n.module.url);e(t,10,0,d._56(t,10,0,d._44(t,11).transform("core.openinbrowser")));e(t,12,0,d._44(t,13)._hidden)})}function c(e){return d._57(0,[(e()(),d._31(0,0,null,null,25,"div",[["padding",""]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n    "])),(e()(),d._31(2,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,w.b,w.a)),d._30(3,49152,null,0,A.a,[],{description:[0,"description"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,o)),d._30(6,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,r)),d._30(9,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n\n    "])),(e()(),d._26(16777216,null,null,1,null,i)),d._30(12,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,l)),d._30(15,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,a)),d._30(18,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._26(16777216,null,null,1,null,s)),d._30(21,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n\n    "])),(e()(),d._26(16777216,null,null,1,null,u)),d._30(24,16384,null,0,D.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.module&&n.module.description,"module",n.module.id,n.courseId);e(t,6,0,!n.isDisabledInSite&&n.isSupportedByTheApp);e(t,9,0,n.isDisabledInSite||!n.isSupportedByTheApp);e(t,12,0,n.isDisabledInSite);e(t,15,0,!n.isDisabledInSite&&n.isSupportedByTheApp);e(t,18,0,!n.isDisabledInSite&&!n.isSupportedByTheApp);e(t,21,0,n.isDisabledInSite||!n.isSupportedByTheApp);e(t,24,0,n.module&&n.module.url)},null)}n.d(t,"b",function(){return x}),t.c=c,n.d(t,"a",function(){return M});var d=n(0),f=n(25),p=n(17),h=n(45),m=n(42),_=n(8),g=n(174),v=n(4),y=n(2),b=n(1),P=n(22),O=n(15),E=n(21),C=n(29),I=n(28),R=n(11),S=n(47),w=n(122),A=n(112),D=n(7),j=n(396),k=n(13),T=n(61),x=d._29({encapsulation:2,styles:[],data:{}}),M=d._27("core-course-unsupported-module",j.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-course-unsupported-module",[],null,null,null,c,x)),d._30(1,114688,null,0,j.a,[k.a,T.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",module:"module"},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["detail-push",""],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoBlock(n)&&o}return o},i.b,i.a)),r._30(1,1097728,null,3,l.a,[a.a,s.a,r.t,r.V,[2,u.a]],null,null),r._52(335544320,1,{contentLabel:0}),r._52(603979776,2,{_buttons:1}),r._52(603979776,3,{_icons:1}),r._30(5,16384,null,0,c.a,[s.a,r.t,r.V],null,null),(e()(),r._55(-1,2,["\n    "])),(e()(),r._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._55(8,null,["",""])),r._47(131072,d.a,[f.a,r.j]),(e()(),r._55(-1,2,["\n"]))],null,function(e,t){var n=t.component;e(t,8,0,r._56(t,8,0,r._44(t,9).transform(n.title)))})}n.d(t,"a",function(){return g});var r=n(0),i=n(30),l=n(20),a=n(19),s=n(8),u=n(27),c=n(100),d=n(25),f=n(17),p=n(226),h=n(21),m=n(15),_=r._29({encapsulation:2,styles:[],data:{}}),g=r._27("core-block-only-title",p.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-block-only-title",[],null,null,null,o,_)),r._30(1,114688,null,0,p.a,[r.C,h.a,m.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,t,n){"use strict";function o(e){return a._57(0,[(e()(),a._31(0,0,null,null,11,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,s.b,s.a)),a._30(1,1097728,null,3,u.a,[c.a,d.a,a.t,a.V,[2,f.a]],null,null),a._52(335544320,1,{contentLabel:0}),a._52(603979776,2,{_buttons:1}),a._52(603979776,3,{_icons:1}),a._30(5,16384,null,0,p.a,[d.a,a.t,a.V],null,null),(e()(),a._55(-1,2,["\n    "])),(e()(),a._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),a._31(8,16777216,null,null,2,"core-format-text",[["contextLevel","block"]],null,null,null,null,null)),a._30(9,540672,null,0,h.a,[a.t,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a,I.a,[2,R.a],[2,S.a],[2,w.a],A.a,D.a,j.a,k.a,T.a,a._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),a._47(131072,x.a,[v.a,a.j]),(e()(),a._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,9,0,a._56(t,9,0,a._44(t,10).transform(n.title)),"block",n.block.instanceid,n.courseId)},null)}function r(e){return a._57(0,[(e()(),a._31(0,0,null,null,9,"ion-item",[["class","core-block-content item item-block"],["text-wrap",""]],null,null,null,s.b,s.a)),a._30(1,1097728,null,3,u.a,[c.a,d.a,a.t,a.V,[2,f.a]],null,null),a._52(335544320,4,{contentLabel:0}),a._52(603979776,5,{_buttons:1}),a._52(603979776,6,{_icons:1}),a._30(5,16384,null,0,M.a,[],null,null),(e()(),a._55(-1,2,["\n        "])),(e()(),a._31(7,16777216,null,2,1,"core-format-text",[["contextLevel","block"]],null,null,null,null,null)),a._30(8,540672,null,0,h.a,[a.t,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a,I.a,[2,R.a],[2,S.a],[2,w.a],A.a,D.a,j.a,k.a,T.a,a._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),a._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,8,0,n.block.contents.content,"block",n.block.instanceid,n.courseId)},null)}function i(e){return a._57(0,[(e()(),a._31(0,0,null,null,9,"ion-item",[["class","core-block-footer item item-block"],["text-wrap",""]],null,null,null,s.b,s.a)),a._30(1,1097728,null,3,u.a,[c.a,d.a,a.t,a.V,[2,f.a]],null,null),a._52(335544320,7,{contentLabel:0}),a._52(603979776,8,{_buttons:1}),a._52(603979776,9,{_icons:1}),a._30(5,16384,null,0,M.a,[],null,null),(e()(),a._55(-1,2,["\n        "])),(e()(),a._31(7,16777216,null,2,1,"core-format-text",[["contextLevel","block"]],null,null,null,null,null)),a._30(8,540672,null,0,h.a,[a.t,m.a,_.a,g.a,v.a,y.a,b.a,P.a,O.a,E.a,C.a,I.a,[2,R.a],[2,S.a],[2,w.a],A.a,D.a,j.a,k.a,T.a,a._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),a._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,8,0,n.block.contents.footer,"block",n.block.instanceid,n.courseId)},null)}function l(e){return a._57(0,[(e()(),a._26(16777216,null,null,1,null,o)),a._30(1,16384,null,0,N.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,null,["\n"])),(e()(),a._31(3,0,null,null,8,"core-loading",[["class","core-loading-center"]],null,null,null,U.b,U.a)),a._30(4,638976,null,0,F.a,[v.a,a.t,D.a,b.a],{hideUntil:[0,"hideUntil"]},null),(e()(),a._55(-1,0,["\n    "])),(e()(),a._26(16777216,null,0,1,null,r)),a._30(7,16384,null,0,N.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,0,["\n    "])),(e()(),a._26(16777216,null,0,1,null,i)),a._30(10,16384,null,0,N.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(e()(),a._55(-1,0,["\n"])),(e()(),a._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.title);e(t,4,0,n.loaded);e(t,7,0,n.block.contents.content);e(t,10,0,n.block.contents.footer)},null)}n.d(t,"a",function(){return B});var a=n(0),s=n(30),u=n(20),c=n(19),d=n(8),f=n(27),p=n(100),h=n(48),m=n(1),_=n(4),g=n(11),v=n(17),y=n(16),b=n(2),P=n(22),O=n(6),E=n(18),C=n(10),I=n(15),R=n(21),S=n(29),w=n(28),A=n(44),D=n(9),j=n(41),k=n(32),T=n(36),x=n(25),M=n(33),N=n(7),U=n(54),F=n(51),L=n(157),H=a._29({encapsulation:2,styles:[],data:{}}),B=a._27("core-block-pre-rendered",L.a,function(e){return a._57(0,[(e()(),a._31(0,0,null,null,1,"core-block-pre-rendered",[],null,null,null,l,H)),a._30(1,114688,null,0,L.a,[a.C],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,t,n){"use strict";function o(e){return l._57(0,[(e()(),l._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l._55(1,null,["",": ",""])),l._47(131072,a.a,[s.a,l.j])],null,function(e,t){e(t,1,0,l._56(t,1,0,l._44(t,2).transform("core.category")),t.parent.context.$implicit.categoryName)})}function r(e){return l._57(0,[(e()(),l._31(0,0,null,null,15,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openCourse(e.context.$implicit.courseId)&&o}return o},u.b,u.a)),l._30(1,1097728,null,3,c.a,[d.a,f.a,l.t,l.V,[2,p.a]],null,null),l._52(335544320,1,{contentLabel:0}),l._52(603979776,2,{_buttons:1}),l._52(603979776,3,{_icons:1}),l._30(5,16384,null,0,h.a,[],null,null),(e()(),l._55(-1,2,["\n    "])),(e()(),l._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-graduation-cap"]],null,null,null,m.b,m.a)),l._30(8,704512,null,0,_.a,[l.t,f.a],{name:[0,"name"]},null),(e()(),l._55(-1,2,["\n    "])),(e()(),l._31(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),l._55(11,null,["",""])),(e()(),l._55(-1,2,["\n    "])),(e()(),l._26(16777216,null,2,1,null,o)),l._30(14,16384,null,0,g.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(e()(),l._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-graduation-cap");e(t,14,0,t.context.$implicit.categoryName)},function(e,t){e(t,0,0,t.context.$implicit.courseName);e(t,11,0,t.context.$implicit.courseName)})}function i(e){return l._57(0,[(e()(),l._26(16777216,null,null,1,null,r)),l._30(1,802816,null,0,g.j,[l._11,l._6,l.E],{ngForOf:[0,"ngForOf"]},null),(e()(),l._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.items)},null)}n.d(t,"a",function(){return E});var l=n(0),a=n(25),s=n(17),u=n(30),c=n(20),d=n(19),f=n(8),p=n(27),h=n(33),m=n(80),_=n(75),g=n(7),v=n(589),y=n(21),b=n(28),P=n(38),O=l._29({encapsulation:2,styles:[],data:{}}),E=l._27("core-course-tag-area",v.a,function(e){return l._57(0,[(e()(),l._31(0,0,null,null,1,"core-course-tag-area",[],null,null,null,i,O)),l._30(1,49152,null,0,v.a,[y.a,[2,b.a],P.a],null,null)],null,null)},{items:"items"},{},[])},function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,5,"ion-avatar",[["item-start",""]],null,null,null,null,null)),s._30(1,16384,null,0,u.a,[],null,null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._31(3,0,null,null,1,"img",[["alt",""],["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],null,null,null,null,null)),s._30(4,4734976,null,0,c.a,[s.t,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a],{src:[0,"src"]},null),(e()(),s._55(-1,null,["\n    "]))],function(e,t){e(t,4,0,t.parent.context.$implicit.avatarUrl)},null)}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"img",[["alt",""],["class","core-module-icon"],["core-external-content",""],["item-start",""],["role","presentation"]],null,null,null,null,null)),s._30(1,4734976,null,0,c.a,[s.t,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a],{src:[0,"src"]},null)],function(e,t){e(t,1,0,t.parent.context.$implicit.iconUrl)},null)}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),s._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,19,"a",[["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4]],null,null,y.b,y.a)),s._30(1,1097728,null,3,b.a,[P.a,O.a,s.t,s.V,[2,E.a]],null,null),s._52(335544320,1,{contentLabel:0}),s._52(603979776,2,{_buttons:1}),s._52(603979776,3,{_icons:1}),s._30(5,16384,null,0,C.a,[],null,null),s._30(6,81920,null,0,I.a,[s.t,m.a,v.a,h.a,_.a,R.a,[2,S.a],[2,w.a],[2,A.a],D.a],{capture:[0,"capture"]},null),(e()(),s._55(-1,2,["\n    "])),(e()(),s._26(16777216,null,0,1,null,o)),s._30(9,16384,null,0,j.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,2,["\n    "])),(e()(),s._26(16777216,null,0,1,null,r)),s._30(12,16384,null,0,j.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,2,["\n    "])),(e()(),s._31(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),s._55(15,null,["",""])),(e()(),s._55(-1,2,["\n    "])),(e()(),s._26(16777216,null,2,1,null,i)),s._30(18,802816,null,0,j.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,2,["\n"]))],function(e,t){e(t,6,0,!0);e(t,9,0,t.context.$implicit.avatarUrl);e(t,12,0,t.context.$implicit.iconUrl);e(t,18,0,t.context.$implicit.details)},function(e,t){e(t,0,0,t.context.$implicit.url);e(t,15,0,t.context.$implicit.heading)})}function a(e){return s._57(0,[(e()(),s._26(16777216,null,null,1,null,l)),s._30(1,802816,null,0,j.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.items)},null)}n.d(t,"a",function(){return x});var s=n(0),u=n(160),c=n(229),d=n(6),f=n(18),p=n(16),h=n(1),m=n(4),_=n(22),g=n(10),v=n(2),y=n(30),b=n(20),P=n(19),O=n(8),E=n(27),C=n(33),I=n(174),R=n(15),S=n(21),w=n(29),A=n(28),D=n(11),j=n(7),k=n(225),T=s._29({encapsulation:2,styles:[],data:{}}),x=s._27("core-tag-feed",k.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"core-tag-feed",[],null,null,null,a,T)),s._30(1,49152,null,0,k.a,[],null,null)],null,null)},{items:"items"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(77),i=n(183),l=n(152),a=n(198),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.injector=e,this.feedbackDelegate=t,this.assignProvider=n,this.assignHelper=o,this.component=r.a.COMPONENT,this.text="",this.files=[]}return e.prototype.ngOnInit=function(){var e=this;this.plugin?(this.plugin.name=this.feedbackDelegate.getPluginName(this.plugin),this.plugin.name?(this.edit=this.edit&&"false"!==this.edit,this.canEdit=this.canEdit&&"false"!==this.canEdit,this.feedbackDelegate.getComponentForPlugin(this.injector,this.plugin).then(function(t){e.pluginComponent=t,t?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId,configs:e.assignHelper.getPluginConfig(e.assign,"assignfeedback",e.plugin.type),edit:e.edit,canEdit:e.canEdit}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.feedbackDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})):this.pluginLoaded=!0):this.pluginLoaded=!0},e.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},s([Object(o._9)(a.a),u("design:type",a.a)],e.prototype,"dynamicComponent",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"assign",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"submission",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"plugin",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"userId",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"canEdit",void 0),s([Object(o.D)(),u("design:type",Object)],e.prototype,"edit",void 0),e=s([Object(o.m)({selector:"addon-mod-assign-feedback-plugin",templateUrl:"addon-mod-assign-feedback-plugin.html"}),u("design:paramtypes",[o.C,l.a,r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(106),c=n(74),d=n(733),f=n(725),p=n(728),h=n(1541),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=function(){function e(){}return e=m([Object(o.I)({declarations:[d.a,f.a,p.a,h.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a],providers:[],exports:[d.a,f.a,p.a,h.a],entryComponents:[d.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(3),l=n(52),a=n(38),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},d=function(){function e(e,t,n,o){this.navCtrl=e,this.translate=t,this.coursesProvider=n,this.courseHelper=o}return e.prototype.ngOnInit=function(){var e=this;this.coursesProvider.getUserCourse(this.course.id).then(function(){e.course.isEnrolled=!0}).catch(function(){e.course.isEnrolled=!1,e.course.enrollment=[],e.course.enrollmentmethods.forEach(function(t){"self"===t?e.course.enrollment.push({name:e.translate.instant("core.courses.selfenrolment"),icon:"unlock"}):"guest"===t?e.course.enrollment.push({name:e.translate.instant("core.courses.allowguests"),icon:"person"}):"paypal"===t&&e.course.enrollment.push({name:e.translate.instant("core.courses.paypalaccepted"),img:"assets/img/icons/paypal.png"})}),0==e.course.enrollment.length&&e.course.enrollment.push({name:e.translate.instant("core.courses.notenrollable"),icon:"lock"})})},e.prototype.openCourse=function(e){e.isEnrolled?this.courseHelper.openCourse(this.navCtrl,e):this.navCtrl.push("CoreCoursesCoursePreviewPage",{course:e})},s([Object(o.D)(),u("design:type",Object)],e.prototype,"course",void 0),e=s([Object(o.m)({selector:"core-courses-course-list-item",templateUrl:"core-courses-course-list-item.html"}),c(0,Object(o.N)()),u("design:paramtypes",[r.s,i.c,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(5),i=n(9),l=n(1),a=n(4),s=n(52),u=n(188),c=n(38),d=n(102),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,r,i,l){this.coursesProvider=e,this.domUtils=t,this.eventsProvider=n,this.sitesProvider=o,this.courseHelper=r,this.courseOptionsDelegate=i,this.coursesHelper=l,this.filter="",this.showFilter=!1,this.coursesLoaded=!1,this.prefetchCoursesData={},this.prefetchIconInitialized=!1,this.isDestroyed=!1,this.courseIds=""}return e.prototype.ngOnInit=function(){var e=this;this.searchEnabled=!this.coursesProvider.isSearchCoursesDisabledInSite(),this.downloadAllCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.fetchCourses().finally(function(){e.coursesLoaded=!0}),this.myCoursesObserver=this.eventsProvider.on(s.a.EVENT_MY_COURSES_UPDATED,function(){e.fetchCourses()},this.sitesProvider.getCurrentSiteId()),this.siteUpdatedObserver=this.eventsProvider.on(i.a.SITE_UPDATED,function(){var t=e.downloadAllCoursesEnabled;e.searchEnabled=!e.coursesProvider.isSearchCoursesDisabledInSite(),e.downloadAllCoursesEnabled=!e.coursesProvider.isDownloadCoursesDisabledInSite(),!t&&e.downloadAllCoursesEnabled&&e.coursesLoaded&&e.initPrefetchCoursesIcon()},this.sitesProvider.getCurrentSiteId())},e.prototype.fetchCourses=function(){var e=this;return this.coursesProvider.getUserCourses().then(function(t){var n=[],o=t.map(function(e){return e.id});return e.courseIds=o.join(","),n.push(e.coursesHelper.loadCoursesExtraInfo(t)),e.coursesProvider.canGetAdminAndNavOptions()&&n.push(e.coursesProvider.getCoursesAdminAndNavOptions(o).then(function(e){t.forEach(function(t){t.navOptions=e.navOptions[t.id],t.admOptions=e.admOptions[t.id]})})),Promise.all(n).then(function(){e.courses=t,e.filteredCourses=e.courses,e.filter="",e.initPrefetchCoursesIcon()})}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.courses.errorloadcourses",!0)})},e.prototype.refreshCourses=function(e){var t=this,n=[];n.push(this.coursesProvider.invalidateUserCourses()),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds)),Promise.all(n).finally(function(){t.prefetchIconInitialized=!1,t.fetchCourses().finally(function(){e.complete()})})},e.prototype.switchFilter=function(){var e=this;this.filter="",this.showFilter=!this.showFilter,this.filteredCourses=this.courses,this.showFilter&&setTimeout(function(){e.searchbar.setFocus()},500)},e.prototype.filterChanged=function(e){var t=e.target.value&&e.target.value.trim().toLowerCase();this.filteredCourses=t&&this.courses?this.courses.filter(this.courses.length>0&&void 0!==this.courses[0].displayname?function(e){return e.displayname.toLowerCase().indexOf(t)>-1}:function(e){return e.fullname.toLowerCase().indexOf(t)>-1}):this.courses},e.prototype.prefetchCourses=function(){var e=this,t=this.prefetchCoursesData.icon;return this.prefetchCoursesData.icon="spinner",this.prefetchCoursesData.badge="",this.courseHelper.confirmAndPrefetchCourses(this.courses,function(t){e.prefetchCoursesData.badge=t.count+" / "+t.total}).then(function(){e.prefetchCoursesData.icon="ion-android-refresh"}).catch(function(n){e.isDestroyed||(e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=t)}).finally(function(){e.prefetchCoursesData.badge=""})},e.prototype.initPrefetchCoursesIcon=function(){var e=this;!this.prefetchIconInitialized&&this.downloadAllCoursesEnabled&&(this.prefetchIconInitialized=!0,!this.courses||this.courses.length<2?this.prefetchCoursesData.icon="":this.courseHelper.determineCoursesStatus(this.courses).then(function(t){var n=e.courseHelper.getCourseStatusIconAndTitleFromStatus(t).icon;"spinner"==n&&(n="cloud-download"),e.prefetchCoursesData.icon=n}))},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.myCoursesObserver&&this.myCoursesObserver.off(),this.siteUpdatedObserver&&this.siteUpdatedObserver.off()},f([Object(o._9)("searchbar"),p("design:type",r.z)],e.prototype,"searchbar",void 0),e=f([Object(o.m)({selector:"core-courses-my-courses",templateUrl:"my-courses.html"}),p("design:paramtypes",[s.a,a.a,i.a,l.a,c.a,d.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(1),i=n(4),l=n(13),a=n(38),s=n(50),u=n(384),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r){this.domUtils=e,this.courseProvider=n,this.courseHelper=o,this.prefetchDelegate=r,this.dataLoaded=!1,this.items=[],this.currentSite=t.getCurrentSite(),this.siteHomeId=this.currentSite.getSiteHomeId()}return e.prototype.ngOnInit=function(){var e=this;this.loadContent().finally(function(){e.dataLoaded=!0})},e.prototype.doRefresh=function(e){var t=this,n=[];n.push(this.courseProvider.invalidateSections(this.siteHomeId)),n.push(this.currentSite.invalidateConfig().then(function(){return t.currentSite.getConfig().then(function(e){t.currentSite.setConfig(e)})})),this.section&&this.section.modules&&n.push(this.prefetchDelegate.invalidateModules(this.section.modules,this.siteHomeId)),n.push(this.courseBlocksComponent.invalidateBlocks()),Promise.all(n).finally(function(){var n=[];return n.push(t.loadContent()),n.push(t.courseBlocksComponent.loadContent()),Promise.all(n).finally(function(){e.complete()})})},e.prototype.loadContent=function(){var e=this;this.hasContent=!1;var t=this.currentSite.getStoredConfig()||{numsections:1};if(t.frontpageloggedin){var n=["news",!1,"categories",!1,"categories","enrolled-course-list","all-course-list","course-search"],o=t.frontpageloggedin.split(",");this.items=[],o.forEach(function(t){var o=n[parseInt(t,10)];!o||e.items.indexOf(o)>=0||(e.hasContent=!0,e.items.push(o))})}return this.courseProvider.getSections(this.siteHomeId,!1,!0).then(function(n){e.section=!!t.numsections&&n.find(function(e){return 1==e.section}),e.section&&(e.section.hasContent=e.courseHelper.sectionHasContent(e.section),e.hasContent=e.courseHelper.addHandlerDataForModules([e.section],e.siteHomeId,void 0,void 0,!0)||e.hasContent),e.courseProvider.logView(e.siteHomeId,void 0,void 0,e.currentSite&&e.currentSite.getInfo().sitename).catch(function(){})}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.course.couldnotloadsectioncontent",!0)})},c([Object(o.D)(),d("design:type",Boolean)],e.prototype,"downloadEnabled",void 0),c([Object(o._9)(u.a),d("design:type",u.a)],e.prototype,"courseBlocksComponent",void 0),e=c([Object(o.m)({selector:"core-sitehome-index",templateUrl:"core-sitehome-index.html"}),d("design:paramtypes",[i.a,r.a,l.a,a.a,s.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(5),i=n(9),l=n(231),a=n(1),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){var r=this;this.eventsProvider=e,this.modalCtrl=t,this.ratingProvider=n,this.disabled=!1,this.disabled=this.ratingProvider.isRatingDisabledInSite(),this.updateSiteObserver=e.on(i.a.SITE_UPDATED,function(){r.disabled=r.ratingProvider.isRatingDisabledInSite()},o.getCurrentSiteId())}return e.prototype.ngOnChanges=function(e){var t=this;if(this.aggregateObserver&&this.aggregateObserver.off(),this.item=(this.ratingInfo.ratings||[]).find(function(e){return e.itemid==t.itemId}),this.item){if(this.aggregateMethod==l.a.AGGREGATE_AVERAGE)this.labelKey="core.rating.aggregateavg";else if(this.aggregateMethod==l.a.AGGREGATE_COUNT)this.labelKey="core.rating.aggregatecount";else if(this.aggregateMethod==l.a.AGGREGATE_MAXIMUM)this.labelKey="core.rating.aggregatemax";else if(this.aggregateMethod==l.a.AGGREGATE_MINIMUM)this.labelKey="core.rating.aggregatemin";else{if(this.aggregateMethod!=l.a.AGGREGATE_SUM)return void(this.labelKey="");this.labelKey="core.rating.aggregatesum"}this.showCount=this.aggregateMethod!=l.a.AGGREGATE_COUNT,this.aggregateObserver=this.eventsProvider.on(l.a.AGGREGATE_CHANGED_EVENT,function(e){e.contextLevel==t.contextLevel&&e.instanceId==t.instanceId&&e.component==t.ratingInfo.component&&e.ratingArea==t.ratingInfo.ratingarea&&e.itemId==t.itemId&&(t.item.aggregatestr=e.aggregate,t.item.count=e.count)})}},e.prototype.openRatings=function(){if(this.ratingInfo.canviewall&&this.item.count&&!this.disabled){this.modalCtrl.create("CoreRatingRatingsPage",{contextLevel:this.contextLevel,instanceId:this.instanceId,ratingComponent:this.ratingInfo.component,ratingArea:this.ratingInfo.ratingarea,itemId:this.itemId,scaleId:this.scaleId,courseId:this.courseId}).present()}},e.prototype.ngOnDestroy=function(){this.aggregateObserver&&this.aggregateObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},s([Object(o.D)(),u("design:type",Object)],e.prototype,"ratingInfo",void 0),s([Object(o.D)(),u("design:type",String)],e.prototype,"contextLevel",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"instanceId",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"itemId",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"aggregateMethod",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"scaleId",void 0),s([Object(o.D)(),u("design:type",Number)],e.prototype,"courseId",void 0),e=s([Object(o.m)({selector:"core-rating-aggregate",templateUrl:"core-rating-aggregate.html"}),u("design:paramtypes",[i.a,r.q,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(3),i=n(231),l=n(4),a=n(201),s=n(9),u=n(1),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,r,i,l){var a=this;this.domUtils=e,this.translate=t,this.ratingProvider=r,this.ratingOffline=i,this.disabled=!1,this.onLoading=new o.v,this.onUpdate=new o.v,this.disabled=this.ratingProvider.isRatingDisabledInSite(),this.updateSiteObserver=n.on(s.a.SITE_UPDATED,function(){a.disabled=a.ratingProvider.isRatingDisabledInSite()},l.getCurrentSiteId())}return e.prototype.ngOnChanges=function(e){var t=this;if(this.item=(this.ratingInfo.ratings||[]).find(function(e){return e.itemid==t.itemId}),this.scale=(this.ratingInfo.scales||[]).find(function(e){return e.id==t.scaleId}),this.item&&this.scale&&this.ratingProvider.isAddRatingWSAvailable()){if(!this.scale.items&&(this.scale.items=[],this.scale.isnumeric))for(var n=0;n<=this.scale.max;n++)this.scale.items.push({name:String(n),value:n});this.scale.items[0]&&this.scale.items[0].value==i.a.UNSET_RATING||this.scale.items.unshift({name:this.translate.instant("core.none"),value:i.a.UNSET_RATING}),this.onLoading.emit(!0),this.ratingOffline.getRating(this.contextLevel,this.instanceId,this.ratingInfo.component,this.ratingInfo.ratingarea,this.itemId).then(function(e){t.rating=e.rating}).catch(function(){t.rating=t.item&&null!=t.item.rating?t.item.rating:i.a.UNSET_RATING}).finally(function(){t.onLoading.emit(!1)})}else this.item=null},e.prototype.userRatingChanged=function(){var e=this,t=this.domUtils.showModalLoading("core.sending",!0);this.ratingProvider.addRating(this.ratingInfo.component,this.ratingInfo.ratingarea,this.contextLevel,this.instanceId,this.itemId,this.itemSetId,this.courseId,this.scaleId,this.rating,this.userId,this.aggregateMethod).then(function(t){null==t?e.domUtils.showToast("core.datastoredoffline",!0,3e3):e.onUpdate.emit()}).catch(function(t){e.domUtils.showErrorModal(t)}).finally(function(){t.dismiss()})},e.prototype.ngOnDestroy=function(){this.updateSiteObserver&&this.updateSiteObserver.off()},c([Object(o.D)(),d("design:type",Object)],e.prototype,"ratingInfo",void 0),c([Object(o.D)(),d("design:type",String)],e.prototype,"contextLevel",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"instanceId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"itemId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"itemSetId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"courseId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"aggregateMethod",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"scaleId",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"userId",void 0),c([Object(o.O)(),d("design:type",o.v)],e.prototype,"onLoading",void 0),c([Object(o.O)(),d("design:type",o.v)],e.prototype,"onUpdate",void 0),e=c([Object(o.m)({selector:"core-rating-rate",templateUrl:"core-rating-rate.html"}),d("design:paramtypes",[l.a,r.c,s.a,i.a,a.a,u.a])],e)}()},function(e,t,n){"use strict";function o(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,te._34(1,"",te._56(t,1,0,te._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),te._48(2,{$a:0}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function d(e){return te._57(0,[(e()(),te._55(-1,null,["\n                    "])),(e()(),te._26(16777216,[[3,2]],null,1,null,c)),te._30(2,540672,null,0,ae.r,[te._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),te._55(-1,null,["\n                "]))],function(e,t){e(t,2,0,te._44(t.parent.parent,50))},null)}function f(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function p(e){return te._57(0,[(e()(),te._55(-1,null,["\n                    "])),(e()(),te._26(16777216,[[5,2]],null,1,null,f)),te._30(2,540672,null,0,ae.r,[te._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),te._55(-1,null,["\n                "]))],function(e,t){e(t,2,0,te._44(t.parent.parent,53))},null)}function h(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function m(e){return te._57(0,[(e()(),te._55(-1,null,["\n                    "])),(e()(),te._26(16777216,[[7,2]],null,1,null,h)),te._30(2,540672,null,0,ae.r,[te._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),te._55(-1,null,["\n                "]))],function(e,t){e(t,2,0,te._44(t.parent.parent,53))},null)}function _(e){return te._57(0,[(e()(),te._31(0,0,null,null,32,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n        "])),(e()(),te._31(2,0,null,null,29,"core-tabs",[],null,null,null,se.b,se.a)),te._30(3,4964352,[[1,4]],0,ue.a,[te.t,ce.a,de.a,fe.a,pe.a,he.a,le.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),te._55(-1,0,["\n            "])),(e()(),te._31(5,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,t,n){var o=!0;if("ionSelect"===t){o=!1!==e.component.tabChanged("overview")&&o}return o},me.b,me.a)),te._30(6,245760,null,2,_e.a,[ue.a,te.t,de.a,ge.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),te._52(603979776,3,{template:0}),te._52(335544320,4,{content:0}),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(0,[[3,2]],null,0,null,d)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._55(-1,0,["\n            "])),(e()(),te._31(14,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,t,n){var o=!0;if("ionSelect"===t){o=!1!==e.component.tabChanged("analysis")&&o}return o},me.b,me.a)),te._30(15,245760,null,2,_e.a,[ue.a,te.t,de.a,ge.a],{title:[0,"title"],show:[1,"show"]},{ionSelect:"ionSelect"}),te._52(603979776,5,{template:0}),te._52(335544320,6,{content:0}),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(0,[[5,2]],null,0,null,p)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._55(-1,0,["\n\n            "])),(e()(),te._31(23,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,t,n){var o=!0;if("ionSelect"===t){o=!1!==e.component.tabChanged("analysis")&&o}return o},me.b,me.a)),te._30(24,245760,null,2,_e.a,[ue.a,te.t,de.a,ge.a],{title:[0,"title"],show:[1,"show"]},{ionSelect:"ionSelect"}),te._52(603979776,7,{template:0}),te._52(335544320,8,{content:0}),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(0,[[7,2]],null,0,null,m)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._55(-1,0,["\n        "])),(e()(),te._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.firstSelectedTab,n.tabsReady);e(t,6,0,te._56(t,6,0,te._44(t,9).transform("addon.mod_feedback.overview")));e(t,15,0,te._56(t,15,0,te._44(t,18).transform("addon.mod_feedback.analysis")),n.access.canviewreports);e(t,24,0,te._56(t,24,0,te._44(t,27).transform("addon.mod_feedback.completed_feedbacks")),!n.access.canviewreports)},null)}function g(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function v(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,g)),te._30(3,540672,null,0,ae.r,[te._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),te._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,te._44(t.parent,50))},null)}function y(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"ion-label",[["id","addon-feedback-groupslabel"]],null,null,null,null,null)),te._30(1,16384,[[9,4]],0,ve.a,[ye.a,te.t,te.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),te._55(2,null,["",""])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,"addon-feedback-groupslabel")},function(e,t){e(t,2,0,te._56(t,2,0,te._44(t,3).transform("core.groupsseparate")))})}function b(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"ion-label",[["id","addon-feedback-groupslabel"]],null,null,null,null,null)),te._30(1,16384,[[9,4]],0,ve.a,[ye.a,te.t,te.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),te._55(2,null,["",""])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,"addon-feedback-groupslabel")},function(e,t){e(t,2,0,te._56(t,2,0,te._44(t,3).transform("core.groupsvisible")))})}function P(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),te._30(1,16384,[[12,4]],0,be.a,[te.t],{value:[0,"value"]},null),(e()(),te._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.id)},function(e,t){e(t,2,0,t.context.$implicit.name)})}function O(e){return te._57(0,[(e()(),te._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(1,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(603979776,9,{contentLabel:0}),te._52(603979776,10,{_buttons:1}),te._52(603979776,11,{_icons:1}),te._30(5,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._26(16777216,null,1,1,null,y)),te._30(8,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._26(16777216,null,1,1,null,b)),te._30(11,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-feedback-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==te._44(e,14)._click(n)&&o}if("keyup.space"===t){o=!1!==te._44(e,14)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.group=n)&&o}if("ionChange"===t){o=!1!==r.setGroup(r.group)&&o}return o},Re.b,Re.a)),te._30(14,1228800,null,1,Se.a,[we.a,Ee.a,ye.a,te.t,te.V,[2,Oe.a],Ae.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),te._52(603979776,12,{options:1}),te._50(1024,null,De.l,function(e){return[e]},[Se.a]),te._30(17,671744,null,0,De.q,[[8,null],[8,null],[8,null],[2,De.l]],{model:[0,"model"]},{update:"ngModelChange"}),te._50(2048,null,De.m,null,[De.q]),te._30(19,16384,null,0,De.n,[De.m],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,P)),te._30(22,802816,null,0,ae.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,n.groupInfo.separateGroups);e(t,11,0,n.groupInfo.visibleGroups);e(t,14,0,"action-sheet");e(t,17,0,n.group);e(t,22,0,n.groupInfo.groups)},function(e,t){e(t,13,0,te._44(t,14)._disabled,te._44(t,19).ngClassUntouched,te._44(t,19).ngClassTouched,te._44(t,19).ngClassPristine,te._44(t,19).ngClassDirty,te._44(t,19).ngClassValid,te._44(t,19).ngClassInvalid,te._44(t,19).ngClassPending)})}function E(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"a",[["class","item item-block"],["detail-push",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openFeature("NonRespondents")&&o}return o},Pe.b,Pe.a)),te._30(1,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,16,{contentLabel:0}),te._52(603979776,17,{_buttons:1}),te._52(603979776,18,{_icons:1}),te._30(5,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n        "]))],null,function(e,t){e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_feedback.show_nonrespondents")))})}function C(e){return te._57(0,[(e()(),te._31(0,0,null,null,40,"ion-list",[],null,null,null,null,null)),te._30(1,16384,null,0,je.a,[ye.a,te.t,te.V,he.a,ke.l,Te.a],null,null),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,O)),te._30(4,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "])),(e()(),te._31(6,0,null,null,14,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==(r.access.canviewreports&&r.feedback.completedCount>0&&r.openFeature("Respondents"))&&o}return o},Pe.b,Pe.a)),te._30(7,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,13,{contentLabel:0}),te._52(603979776,14,{_buttons:1}),te._52(603979776,15,{_icons:1}),te._30(11,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(14,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(17,0,null,4,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),te._30(18,16384,null,0,xe.a,[ye.a,te.t,te.V],null,null),(e()(),te._55(19,null,["",""])),(e()(),te._55(-1,2,["\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,E)),te._30(23,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "])),(e()(),te._31(25,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(26,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,19,{contentLabel:0}),te._52(603979776,20,{_buttons:1}),te._52(603979776,21,{_icons:1}),te._30(30,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(32,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(33,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(36,0,null,4,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),te._30(37,16384,null,0,xe.a,[ye.a,te.t,te.V],null,null),(e()(),te._55(38,null,["",""])),(e()(),te._55(-1,2,["\n        "])),(e()(),te._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,n.groupInfo&&(n.groupInfo.separateGroups||n.groupInfo.visibleGroups));e(t,23,0,!n.access.isanonymous&&n.access.canviewreports)},function(e,t){var n=t.component;e(t,6,0,!(n.access.canviewreports&&n.feedback.completedCount>0)||null);e(t,14,0,te._56(t,14,0,te._44(t,15).transform("addon.mod_feedback.completed_feedbacks")));e(t,19,0,n.feedback.completedCount);e(t,33,0,te._56(t,33,0,te._44(t,34).transform("addon.mod_feedback.questions")));e(t,38,0,n.feedback.itemsCount)})}function I(e){return te._57(0,[(e()(),te._55(-1,null,["\n    "])),(e()(),te._26(16777216,null,null,1,null,C)),te._30(2,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.access.canviewanalysis&&!n.access.isempty)},null)}function R(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function S(e){return te._57(0,[(e()(),te._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(3,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(4,null,["\n            ","\n        "])),te._48(5,{$a:0}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,te._44(t,3)._hidden);e(t,4,0,te._56(t,4,0,te._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function w(e){return te._57(0,[(e()(),te._31(0,0,null,null,5,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(3,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(4,null,["\n            ","\n        "])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){e(t,2,0,te._44(t,3)._hidden);e(t,4,0,te._56(t,4,0,te._44(t,5).transform("addon.mod_feedback.feedback_is_not_open")))})}function A(e){return te._57(0,[(e()(),te._31(0,0,null,null,5,"div",[["class","core-success-card"]],null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._31(2,0,null,null,1,"ion-icon",[["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(3,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(4,null,["\n            ","\n        "])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,3,0,"checkmark")},function(e,t){e(t,2,0,te._44(t,3)._hidden);e(t,4,0,te._56(t,4,0,te._44(t,5).transform("addon.mod_feedback.this_feedback_is_already_submitted")))})}function D(e){return te._57(0,[(e()(),te._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(1,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,22,{contentLabel:0}),te._52(603979776,23,{_buttons:1}),te._52(603979776,24,{_icons:1}),te._30(5,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),te._55(12,null,["",""])),(e()(),te._55(-1,2,["\n            "]))],null,function(e,t){var n=t.component;e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_feedback.feedbackopen")));e(t,12,0,n.overview.openTimeReadable)})}function j(e){return te._57(0,[(e()(),te._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(1,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,25,{contentLabel:0}),te._52(603979776,26,{_buttons:1}),te._52(603979776,27,{_icons:1}),te._30(5,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),te._55(12,null,["",""])),(e()(),te._55(-1,2,["\n            "]))],null,function(e,t){var n=t.component;e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_feedback.feedbackclose")));e(t,12,0,n.overview.closeTimeReadable)})}function k(e){return te._57(0,[(e()(),te._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(1,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,28,{contentLabel:0}),te._52(603979776,29,{_buttons:1}),te._52(603979776,30,{_icons:1}),te._30(5,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(11,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),te._30(12,540672,null,0,Ne.a,[te.t,Ue.a,de.a,Fe.a,le.a,he.a,ge.a,Le.a,He.a,Be.a,fe.a,qe.a,[2,Ge.a],[2,ce.a],[2,Ve.a],Ke.a,We.a,ze.a,$e.a,Ye.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),te._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,12,0,n.feedback.page_after_submit,n.component,n.componentId,"module",n.module.id,n.courseId)},function(e,t){e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_feedback.page_after_submit")))})}function T(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),te._55(1,null,["",""])),te._47(131072,ie.a,[le.a,te.j])],null,function(e,t){e(t,1,0,te._56(t,1,0,te._44(t,2).transform("addon.mod_feedback.anonymous")))})}function x(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),te._55(1,null,["",""])),te._47(131072,ie.a,[le.a,te.j])],null,function(e,t){e(t,1,0,te._56(t,1,0,te._44(t,2).transform("addon.mod_feedback.non_anonymous")))})}function M(e){return te._57(0,[(e()(),te._31(0,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoAnswerQuestions()&&o}return o},Qe.b,Qe.a)),te._30(1,1097728,null,0,Xe.a,[[8,""],ye.a,te.t,te.V],{block:[0,"block"]},null),(e()(),te._55(2,0,["\n                                ","\n                                "])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._31(4,0,null,0,1,"ion-icon",[["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(5,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(-1,0,["\n                            "]))],function(e,t){e(t,1,0,"");e(t,5,0,"arrow-forward")},function(e,t){e(t,2,0,te._56(t,2,0,te._44(t,3).transform("addon.mod_feedback.complete_the_form")));e(t,4,0,te._44(t,5)._hidden)})}function N(e){return te._57(0,[(e()(),te._31(0,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoAnswerQuestions()&&o}return o},Qe.b,Qe.a)),te._30(1,1097728,null,0,Xe.a,[[8,""],ye.a,te.t,te.V],{block:[0,"block"]},null),(e()(),te._55(2,0,["\n                                ","\n                                "])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._31(4,0,null,0,1,"ion-icon",[["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(5,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(-1,0,["\n                            "]))],function(e,t){e(t,1,0,"");e(t,5,0,"arrow-forward")},function(e,t){e(t,2,0,te._56(t,2,0,te._44(t,3).transform("addon.mod_feedback.continue_the_form")));e(t,4,0,te._44(t,5)._hidden)})}function U(e){return te._57(0,[(e()(),te._31(0,0,null,null,8,"ion-col",[["class","col"]],null,null,null,null,null)),te._30(1,16384,null,0,Je.a,[],null,null),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._26(16777216,null,null,1,null,M)),te._30(4,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._26(16777216,null,null,1,null,N)),te._30(7,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,4,0,!n.goPage);e(t,7,0,n.goPage)},null)}function F(e){return te._57(0,[(e()(),te._31(0,0,null,null,42,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(2,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(3,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,31,{contentLabel:0}),te._52(603979776,32,{_buttons:1}),te._52(603979776,33,{_icons:1}),te._30(7,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(9,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(10,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._26(16777216,null,2,1,null,T)),te._30(14,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._26(16777216,null,2,1,null,x)),te._30(17,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(20,0,null,null,21,"ion-grid",[["class","grid"]],null,null,null,null,null)),te._30(21,16384,null,0,Ze.a,[],null,null),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._31(23,0,null,null,17,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),te._30(24,16384,null,0,et.a,[],null,null),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._31(26,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),te._30(27,16384,null,0,Je.a,[],null,null),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._31(29,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoAnswerQuestions(!0)&&o}return o},Qe.b,Qe.a)),te._30(30,1097728,null,0,Xe.a,[[8,""],ye.a,te.t,te.V],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),te._55(-1,0,["\n                                "])),(e()(),te._31(32,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(33,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(34,0,["\n                                ","\n                            "])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._26(16777216,null,null,1,null,U)),te._30(39,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._55(-1,null,["\n                "])),(e()(),te._55(-1,null,["\n\n            "]))],function(e,t){var n=t.component;e(t,14,0,n.access.isanonymous);e(t,17,0,!n.access.isanonymous);e(t,30,0,"","");e(t,33,0,"search");e(t,39,0,n.access.cancomplete&&n.access.cansubmit&&n.access.isopen)},function(e,t){e(t,10,0,te._56(t,10,0,te._44(t,11).transform("addon.mod_feedback.mode")));e(t,32,0,te._44(t,33)._hidden);e(t,34,0,te._56(t,34,0,te._44(t,35).transform("addon.mod_feedback.preview")))})}function L(e){return te._57(0,[(e()(),te._31(0,0,null,null,14,"ion-list",[],null,null,null,null,null)),te._30(1,16384,null,0,je.a,[ye.a,te.t,te.V,he.a,ke.l,Te.a],null,null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,D)),te._30(4,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,j)),te._30(7,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,k)),te._30(10,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,F)),te._30(13,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,4,0,n.access.canedititems&&n.overview.timeopen);e(t,7,0,n.access.canedititems&&n.overview.timeclose);e(t,10,0,n.access.canedititems&&n.feedback.page_after_submit);e(t,13,0,!n.access.isempty)},null)}function H(e){return te._57(0,[(e()(),te._55(-1,null,["\n    "])),(e()(),te._31(1,0,null,null,18,"core-loading",[],null,null,null,tt.b,tt.a)),te._30(2,638976,null,0,nt.a,[le.a,te.t,We.a,ge.a],{hideUntil:[0,"hideUntil"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,R)),te._30(5,540672,null,0,ae.r,[te._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),te._55(-1,0,["\n\n        "])),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,S)),te._30(9,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n        "])),(e()(),te._26(16777216,null,0,1,null,w)),te._30(12,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n        "])),(e()(),te._26(16777216,null,0,1,null,A)),te._30(15,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n        "])),(e()(),te._26(16777216,null,0,1,null,L)),te._30(18,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n    "])),(e()(),te._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.tabsLoaded.overview);e(t,5,0,te._44(t.parent,47));e(t,9,0,n.hasOffline);e(t,12,0,n.access.cancomplete&&!n.access.isopen);e(t,15,0,n.access.cancomplete&&n.access.isopen&&!n.access.cansubmit);e(t,18,0,n.access.canedititems||n.access.canviewreports||!n.access.isempty)},null)}function B(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function q(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(3,147456,null,0,Me.a,[ye.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(4,null,["\n                ","\n            "]))],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,te._44(t,3)._hidden);e(t,4,0,n.warning)})}function G(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),te._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function V(e){return te._57(0,[(e()(),te._31(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._31(2,0,null,null,4,"ul",[],null,null,null,null,null)),(e()(),te._55(-1,null,["\n                                "])),(e()(),te._26(16777216,null,null,1,null,G)),te._30(5,802816,null,0,ae.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._31(8,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),te._55(9,null,["",": ",""])),te._47(131072,ie.a,[le.a,te.j]),te._49(11,2),(e()(),te._55(-1,null,["\n                        "]))],function(e,t){e(t,5,0,t.parent.context.$implicit.data)},function(e,t){e(t,9,0,te._56(t,9,0,te._44(t,10).transform("addon.mod_feedback.average")),te._56(t,9,1,e(t,11,0,te._44(t.parent.parent.parent.parent.parent,0),t.parent.context.$implicit.average,"1.2-2")))})}function K(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),te._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit)})}function W(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                                    "])),(e()(),te._26(16777216,null,null,1,null,K)),te._30(3,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                                "]))],function(e,t){e(t,3,0,t.context.$implicit)},null)}function z(e){return te._57(0,[(e()(),te._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._31(2,0,null,null,4,"ul",[],null,null,null,null,null)),(e()(),te._55(-1,null,["\n                                "])),(e()(),te._26(16777216,null,null,1,null,W)),te._30(5,802816,null,0,ae.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._55(-1,null,["\n                        "]))],function(e,t){e(t,5,0,t.parent.context.$implicit.data)},null)}function $(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),te._55(1,null,["",": ",""])),te._47(131072,ie.a,[le.a,te.j]),te._49(3,2)],null,function(e,t){e(t,1,0,te._56(t,1,0,te._44(t,2).transform("addon.mod_feedback.average")),te._56(t,1,1,e(t,3,0,te._44(t.parent.parent.parent.parent.parent.parent,0),t.parent.parent.context.$implicit.average,"1.2-2")))})}function Y(e){return te._57(0,[(e()(),te._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._31(2,0,null,null,1,"core-chart",[["contextLevel","module"],["height","300"]],null,null,null,ot.b,ot.a)),te._30(3,770048,null,0,rt.a,[ze.a,ge.a,$e.a],{data:[0,"data"],labels:[1,"labels"],type:[2,"type"],height:[3,"height"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"],wsNotFiltered:[7,"wsNotFiltered"]},null),(e()(),te._55(-1,null,["\n                            "])),(e()(),te._26(16777216,null,null,1,null,$)),te._30(6,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,3,0,t.parent.context.$implicit.chartData,t.parent.context.$implicit.labels,t.parent.context.$implicit.chartType,"300","module",n.module.id,n.courseId,!0);e(t,6,0,t.parent.context.$implicit.average)},null)}function Q(e){return te._57(0,[(e()(),te._31(0,0,null,null,28,"ion-item",[["class","core-analysis item item-block"],["text-wrap",""]],null,null,null,Pe.b,Pe.a)),te._30(1,1097728,null,3,Oe.a,[Ee.a,ye.a,te.t,te.V,[2,Ce.a]],null,null),te._52(335544320,34,{contentLabel:0}),te._52(603979776,35,{_buttons:1}),te._52(603979776,36,{_icons:1}),te._30(5,16384,null,0,Ie.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",". "])),(e()(),te._31(9,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),te._30(10,540672,null,0,Ne.a,[te.t,Ue.a,de.a,Fe.a,le.a,he.a,ge.a,Le.a,He.a,Be.a,fe.a,qe.a,[2,Ge.a],[2,ce.a],[2,Ve.a],Ke.a,We.a,ze.a,$e.a,Ye.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),te._31(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),te._30(14,540672,null,0,Ne.a,[te.t,Ue.a,de.a,Fe.a,le.a,he.a,ge.a,Le.a,He.a,Be.a,fe.a,qe.a,[2,Ge.a],[2,ce.a],[2,Ve.a],Ke.a,We.a,ze.a,$e.a,Ye.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(16,0,null,2,11,null,null,null,null,null,null,null)),te._30(17,16384,null,0,ae.o,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._26(16777216,null,null,1,null,V)),te._30(20,278528,null,0,ae.p,[te._11,te._6,ae.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._26(16777216,null,null,1,null,z)),te._30(23,278528,null,0,ae.p,[te._11,te._6,ae.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._26(16777216,null,null,1,null,Y)),te._30(26,278528,null,0,ae.p,[te._11,te._6,ae.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,10,0,t.context.$implicit.name,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,14,0,t.context.$implicit.label,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,17,0,t.context.$implicit.template);e(t,20,0,"numeric");e(t,23,0,"list");e(t,26,0,"chart")},function(e,t){e(t,8,0,t.context.$implicit.number)})}function X(e){return te._57(0,[(e()(),te._31(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),te._30(1,16384,null,0,je.a,[ye.a,te.t,te.V,he.a,ke.l,Te.a],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,Q)),te._30(4,802816,null,0,ae.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.items)},null)}function J(e){return te._57(0,[(e()(),te._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,q)),te._30(3,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n            "])),(e()(),te._26(16777216,null,null,1,null,X)),te._30(6,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,n.warning);e(t,6,0,n.items&&n.items.length)},null)}function Z(e){return te._57(0,[(e()(),te._55(-1,null,["\n    "])),(e()(),te._31(1,0,null,null,8,"core-loading",[],null,null,null,tt.b,tt.a)),te._30(2,638976,null,0,nt.a,[le.a,te.t,We.a,ge.a],{hideUntil:[0,"hideUntil"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,B)),te._30(5,540672,null,0,ae.r,[te._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),te._55(-1,0,["\n\n        "])),(e()(),te._26(16777216,null,0,1,null,J)),te._30(8,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n    "])),(e()(),te._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.tabsLoaded.analysis);e(t,5,0,te._44(t.parent,47));e(t,8,0,n.access.canedititems||!n.access.isempty)},null)}function ee(e){return te._57(0,[te._47(0,ae.d,[te.G]),te._52(671088640,1,{tabsComponent:0}),(e()(),te._55(-1,null,["\n"])),(e()(),te._31(3,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,it.b,it.a)),te._30(4,245760,null,1,lt.a,[te.t,He.a,de.a],null,null),te._52(603979776,2,{buttons:1}),(e()(),te._55(-1,0,["\n    "])),(e()(),te._31(7,0,null,0,23,"core-context-menu",[],null,null,null,at.b,at.a)),te._30(8,245760,null,0,re.a,[le.a,st.a,te.t,de.a,[2,_e.a],ge.a],null,null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,o)),te._30(11,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,r)),te._30(14,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,i)),te._30(17,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,l)),te._30(20,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,a)),te._30(23,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,s)),te._30(26,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,u)),te._30(29,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n    "])),(e()(),te._55(-1,0,["\n"])),(e()(),te._55(-1,null,["\n\n"])),(e()(),te._55(-1,null,["\n"])),(e()(),te._31(34,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,tt.b,tt.a)),te._30(35,638976,null,0,nt.a,[le.a,te.t,We.a,ge.a],{hideUntil:[0,"hideUntil"]},null),(e()(),te._55(-1,0,["\n\n    "])),(e()(),te._31(37,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,ut.b,ut.a)),te._30(38,49152,null,0,ct.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),te._55(-1,0,["\n\n    "])),(e()(),te._26(16777216,null,0,1,null,_)),te._30(41,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n    "])),(e()(),te._26(16777216,null,0,1,null,v)),te._30(44,16384,null,0,ae.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n"])),(e()(),te._55(-1,null,["\n\n\n"])),(e()(),te._26(0,[["basicInfo",2]],null,0,null,I)),(e()(),te._55(-1,null,["\n\n"])),(e()(),te._55(-1,null,["\n"])),(e()(),te._26(0,[["tabOverview",2]],null,0,null,H)),(e()(),te._55(-1,null,["\n\n"])),(e()(),te._55(-1,null,["\n"])),(e()(),te._26(0,[["tabAnalysis",2]],null,0,null,Z)),(e()(),te._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0),e(t,8,0);e(t,11,0,n.externalUrl);e(t,14,0,n.description);e(t,17,0,n.blog);e(t,20,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,23,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,26,0,n.prefetchStatusIcon);e(t,29,0,n.size);e(t,35,0,n.loaded);e(t,38,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,41,0,n.showTabs);e(t,44,0,n.feedback&&!n.showTabs)},null)}n.d(t,"b",function(){return vt}),t.c=ee,n.d(t,"a",function(){return yt});var te=n(0),ne=n(92),oe=n(83),re=n(78),ie=n(25),le=n(17),ae=n(7),se=n(729),ue=n(200),ce=n(29),de=n(4),fe=n(10),pe=n(126),he=n(16),me=n(730),_e=n(76),ge=n(2),ve=n(67),ye=n(8),be=n(108),Pe=n(30),Oe=n(20),Ee=n(19),Ce=n(27),Ie=n(33),Re=n(123),Se=n(109),we=n(35),Ae=n(59),De=n(23),je=n(86),ke=n(43),Te=n(34),xe=n(143),Me=n(47),Ne=n(48),Ue=n(1),Fe=n(11),Le=n(22),He=n(6),Be=n(18),qe=n(15),Ge=n(21),Ve=n(28),Ke=n(44),We=n(9),ze=n(41),$e=n(32),Ye=n(36),Qe=n(45),Xe=n(42),Je=n(120),Ze=n(164),et=n(119),tt=n(54),nt=n(51),ot=n(1058),rt=n(444),it=n(96),lt=n(87),at=n(91),st=n(70),ut=n(122),ct=n(112),dt=n(504),ft=n(134),pt=n(297),ht=n(71),mt=n(285),_t=n(252),gt=n(24),vt=te._29({encapsulation:2,styles:[],data:{}}),yt=te._27("addon-mod-feedback-index",dt.a,function(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"addon-mod-feedback-index",[],null,null,null,ee,vt)),te._30(1,245760,null,0,dt.a,[te.C,ft.a,[2,ce.a],pt.a,ht.a,mt.a,Ge.a,_t.a,gt.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group",tab:"tab"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return v._57(0,[(e()(),v._31(0,0,null,null,3,"button",[],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.completionClicked(n)&&o}return o},null,null)),(e()(),v._55(-1,null,["\n    "])),(e()(),v._31(2,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),v._55(-1,null,["\n"]))],null,function(e,t){var n=t.component;e(t,2,0,n.completionImage,n.completionDescription)})}function r(e){return v._57(0,[(e()(),v._26(16777216,null,null,1,null,o)),v._30(1,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.completion)},null)}function i(e){return v._57(0,[(e()(),v._31(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,n.module.handlerData.icon,n.module.modnametranslated)})}function l(e){return v._57(0,[(e()(),v._31(0,0,null,null,1,"core-course-module-completion",[],null,[[null,"completionChanged"]],function(e,t,n){var o=!0;if("completionChanged"===t){o=!1!==e.component.completionChanged.emit(n)&&o}return o},r,R)),v._30(1,573440,null,0,b.a,[P.a,O.a,E.a,C.a,I.a],{completion:[0,"completion"],moduleId:[1,"moduleId"],moduleName:[2,"moduleName"]},{completionChanged:"completionChanged"})],function(e,t){var n=t.component;e(t,1,0,n.module.completiondata,n.module.id,n.module.name)},null)}function a(e){return v._57(0,[(e()(),v._31(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.buttonClicked(n,e.context.$implicit)&&o}return o},S.b,S.a)),v._30(1,1097728,null,0,w.a,[[8,""],A.a,v.t,v.V],{color:[0,"color"],clear:[1,"clear"]},null),v._47(131072,D.a,[E.a,v.j]),(e()(),v._55(-1,0,["\n                    "])),(e()(),v._31(4,0,null,0,1,"core-icon",[],null,null,null,j.b,j.a)),v._30(5,704512,null,0,k.a,[v.t,A.a],{name:[0,"name"],md:[1,"md"],ios:[2,"ios"]},null),(e()(),v._55(-1,0,["\n                "]))],function(e,t){e(t,1,0,"dark","");e(t,5,0,t.context.$implicit.icon,t.context.$implicit.mdIcon||"",t.context.$implicit.iosIcon||"")},function(e,t){var n=t.component;e(t,0,0,t.context.$implicit.hidden||n.spinner||n.module.handlerData.spinner,v._56(t,0,1,v._44(t,2).transform(t.context.$implicit.label)))})}function s(e){return v._57(0,[(e()(),v._31(0,0,null,null,17,"div",[["class","buttons core-module-buttons"],["item-end",""]],null,null,null,null,null)),v._30(1,278528,null,0,y.i,[v.E,v.F,v.t,v.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),v._48(2,{"core-button-completion":0}),(e()(),v._55(-1,null,["\n            "])),(e()(),v._55(-1,null,["\n            "])),(e()(),v._26(16777216,null,null,1,null,l)),v._30(6,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n\n            "])),(e()(),v._31(8,0,null,null,8,"div",[["class","core-module-buttons-more"]],null,null,null,null,null)),(e()(),v._55(-1,null,["\n                "])),(e()(),v._31(10,0,null,null,1,"core-download-refresh",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.download(n)&&o}return o},T.b,T.a)),v._30(11,49152,null,0,x.a,[],{status:[0,"status"],enabled:[1,"enabled"],loading:[2,"loading"],canTrustDownload:[3,"canTrustDownload"]},{action:"action"}),(e()(),v._55(-1,null,["\n\n                "])),(e()(),v._55(-1,null,["\n                "])),(e()(),v._26(16777216,null,null,1,null,a)),v._30(15,802816,null,0,y.j,[v._11,v._6,v.E],{ngForOf:[0,"ngForOf"]},null),(e()(),v._55(-1,null,["\n            "])),(e()(),v._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,"buttons core-module-buttons",e(t,2,0,n.module.completiondata));e(t,6,0,n.module.completiondata);e(t,11,0,n.downloadStatus,n.downloadEnabled,n.spinner||n.module.handlerData.spinner,n.canCheckUpdates);e(t,15,0,n.module.handlerData.buttons)},null)}function u(e){return v._57(0,[(e()(),v._31(0,0,null,null,4,"ion-badge",[["item-end",""],["text-start",""],["text-wrap",""]],null,null,null,null,null)),v._30(1,16384,null,0,M.a,[A.a,v.t,v.V],{color:[0,"color"]},null),(e()(),v._55(-1,null,["\n            "])),(e()(),v._31(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),v._55(-1,null,["\n        "]))],function(e,t){e(t,1,0,t.component.module.handlerData.extraBadgeColor)},function(e,t){e(t,3,0,t.component.module.handlerData.extraBadge)})}function c(e){return v._57(0,[(e()(),v._31(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),v._30(1,16384,null,0,M.a,[A.a,v.t,v.V],null,null),(e()(),v._55(2,null,["",""])),v._47(131072,D.a,[E.a,v.j])],null,function(e,t){e(t,2,0,v._56(t,2,0,v._44(t,3).transform("core.course.hiddenfromstudents")))})}function d(e){return v._57(0,[(e()(),v._31(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),v._30(1,16384,null,0,M.a,[A.a,v.t,v.V],null,null),(e()(),v._55(2,null,["",""])),v._47(131072,D.a,[E.a,v.j])],null,function(e,t){e(t,2,0,v._56(t,2,0,v._44(t,3).transform("core.course.hiddenoncoursepage")))})}function f(e){return v._57(0,[(e()(),v._31(0,0,null,null,9,"div",[["class","core-module-availabilityinfo"],["item-end",""]],null,null,null,null,null)),(e()(),v._55(-1,null,["\n            "])),(e()(),v._31(2,0,null,null,3,"ion-badge",[["text-wrap",""]],null,null,null,null,null)),v._30(3,16384,null,0,M.a,[A.a,v.t,v.V],null,null),(e()(),v._55(4,null,["",""])),v._47(131072,D.a,[E.a,v.j]),(e()(),v._55(-1,null,["\n            "])),(e()(),v._31(7,16777216,null,null,1,"core-format-text",[["contextLevel","module"],["text-wrap",""]],null,null,null,null,null)),v._30(8,540672,null,0,N.a,[v.t,U.a,O.a,F.a,E.a,L.a,H.a,B.a,q.a,G.a,V.a,K.a,[2,W.a],[2,z.a],[2,$.a],Y.a,Q.a,X.a,P.a,J.a,v._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),v._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,n.module.availabilityinfo,"module",n.module.id,n.courseId)},function(e,t){e(t,4,0,v._56(t,4,0,v._44(t,5).transform("core.restricted")))})}function p(e){return v._57(0,[(e()(),v._31(0,0,null,null,3,"ion-badge",[["color","warning"],["item-end",""],["text-wrap",""]],null,null,null,null,null)),v._30(1,16384,null,0,M.a,[A.a,v.t,v.V],{color:[0,"color"]},null),(e()(),v._55(2,null,["",""])),v._47(131072,D.a,[E.a,v.j])],function(e,t){e(t,1,0,"warning")},function(e,t){e(t,2,0,v._56(t,2,0,v._44(t,3).transform("core.course.manualcompletionnotsynced")))})}function h(e){return v._57(0,[(e()(),v._31(0,16777216,null,null,1,"core-format-text",[["class","core-module-description"],["contextLevel","module"],["maxHeight","80"]],null,null,null,null,null)),v._30(1,540672,null,0,N.a,[v.t,U.a,O.a,F.a,E.a,L.a,H.a,B.a,q.a,G.a,V.a,K.a,[2,W.a],[2,z.a],[2,$.a],Y.a,Q.a,X.a,P.a,J.a,v._11],{text:[0,"text"],maxHeight:[1,"maxHeight"],contextLevel:[2,"contextLevel"],contextInstanceId:[3,"contextInstanceId"],courseId:[4,"courseId"]},null),(e()(),v._26(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n.module.description,"80","module",n.module.id,n.courseId)},null)}function m(e){return v._57(0,[(e()(),v._31(0,0,null,null,42,"ion-item",[["class","item item-block"],["detail-none",""],["text-wrap",""]],[[8,"id",0],[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.moduleClicked(n)&&o}return o},Z.b,Z.a)),v._30(1,278528,null,0,y.i,[v.E,v.F,v.t,v.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),v._48(2,{"item-media":0,"core-not-clickable":1,"item-dimmed":2}),v._30(3,1097728,null,3,ee.a,[te.a,A.a,v.t,v.V,[2,ne.a]],null,null),v._52(335544320,1,{contentLabel:0}),v._52(603979776,2,{_buttons:1}),v._52(603979776,3,{_icons:1}),v._30(7,16384,null,0,oe.a,[],null,null),(e()(),v._55(-1,2,["\n\n    "])),(e()(),v._26(16777216,null,0,1,null,i)),v._30(10,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,2,["\n    "])),(e()(),v._31(12,0,null,2,8,"div",[["class","core-module-title"]],null,null,null,null,null)),(e()(),v._55(-1,null,["\n        "])),(e()(),v._31(14,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),v._30(15,540672,null,0,N.a,[v.t,U.a,O.a,F.a,E.a,L.a,H.a,B.a,q.a,G.a,V.a,K.a,[2,W.a],[2,z.a],[2,$.a],Y.a,Q.a,X.a,P.a,J.a,v._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),v._55(-1,null,["\n\n        "])),(e()(),v._55(-1,null,["\n        "])),(e()(),v._26(16777216,null,null,1,null,s)),v._30(19,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n    "])),(e()(),v._55(-1,2,["\n    "])),(e()(),v._31(22,0,null,2,16,"div",[["class","core-module-more-info"]],null,null,null,null,null)),(e()(),v._55(-1,null,["\n        "])),(e()(),v._26(16777216,null,null,1,null,u)),v._30(25,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n        "])),(e()(),v._26(16777216,null,null,1,null,c)),v._30(28,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n        "])),(e()(),v._26(16777216,null,null,1,null,d)),v._30(31,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n        "])),(e()(),v._26(16777216,null,null,1,null,f)),v._30(34,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n        "])),(e()(),v._26(16777216,null,null,1,null,p)),v._30(37,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n    "])),(e()(),v._55(-1,2,["\n    "])),(e()(),v._26(16777216,null,2,1,null,h)),v._30(41,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,v._34(1,"core-course-module-handler ",n.module.handlerData.class,""),e(t,2,0,n.module.handlerData.icon,!n.module.handlerData.action||!1===n.module.uservisible,0===n.module.visible||!1===n.module.uservisible));e(t,10,0,n.module.handlerData.icon);e(t,15,0,n.module.handlerData.title,"module",n.module.id,n.courseId);e(t,19,0,!1!==n.module.uservisible);e(t,25,0,n.module.handlerData.extraBadge);e(t,28,0,0===n.module.visible&&(!n.section||n.section.visible));e(t,31,0,0!==n.module.visible&&n.module.isStealth);e(t,34,0,n.module.availabilityinfo);e(t,37,0,n.module.completiondata&&n.module.completiondata.offline);e(t,41,0,n.module.description)},function(e,t){var n=t.component;e(t,0,0,v._34(1,"core-course-module-",n.module.id,""),n.module.handlerData.a11yTitle)})}function _(e){return v._57(0,[(e()(),v._31(0,0,null,null,11,"ion-item",[["class","item item-block"],["detail-none",""],["role","status"],["text-wrap",""]],[[8,"id",0],[8,"title",0]],null,null,Z.b,Z.a)),v._30(1,278528,null,0,y.i,[v.E,v.F,v.t,v.W],{ngClass:[0,"ngClass"]},null),v._46(2,3),v._30(3,1097728,null,3,ee.a,[te.a,A.a,v.t,v.V,[2,ne.a]],null,null),v._52(335544320,4,{contentLabel:0}),v._52(603979776,5,{_buttons:1}),v._52(603979776,6,{_icons:1}),v._30(7,16384,null,0,oe.a,[],null,null),(e()(),v._55(-1,2,["\n    "])),(e()(),v._31(9,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,re.b,re.a)),v._30(10,114688,null,0,ie.a,[A.a,v.t,v.V],null,null),(e()(),v._55(-1,2,["\n"]))],function(e,t){e(t,1,0,e(t,2,0,"core-course-module-handler","core-module-loading",t.component.module.handlerData.class)),e(t,10,0)},function(e,t){var n=t.component;e(t,0,0,v._34(1,"core-course-module-",n.module.id,""),n.module.handlerData.a11yTitle);e(t,9,0,v._44(t,10)._paused)})}function g(e){return v._57(0,[(e()(),v._26(16777216,null,null,1,null,m)),v._30(1,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n\n"])),(e()(),v._55(-1,null,["\n"])),(e()(),v._26(16777216,null,null,1,null,_)),v._30(5,16384,null,0,y.k,[v._11,v._6],{ngIf:[0,"ngIf"]},null),(e()(),v._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.module&&0!==n.module.visibleoncoursepage&&!n.module.handlerData.loading);e(t,5,0,n.module&&0!==n.module.visibleoncoursepage&&n.module.handlerData.loading)},null)}var v=n(0),y=n(7),b=n(588),P=n(32),O=n(4),E=n(17),C=n(13),I=n(46),R=v._29({encapsulation:2,styles:[],data:{}}),S=(v._27("core-course-module-completion",b.a,function(e){return v._57(0,[(e()(),v._31(0,0,null,null,1,"core-course-module-completion",[],null,null,null,r,R)),v._30(1,573440,null,0,b.a,[P.a,O.a,E.a,C.a,I.a],null,null)],null,null)},{completion:"completion",moduleId:"moduleId",moduleName:"moduleName"},{completionChanged:"completionChanged"},[]),n(45)),w=n(42),A=n(8),D=n(25),j=n(80),k=n(75),T=n(524),x=n(327),M=n(143),N=n(48),U=n(1),F=n(11),L=n(16),H=n(2),B=n(22),q=n(6),G=n(18),V=n(10),K=n(15),W=n(21),z=n(29),$=n(28),Y=n(44),Q=n(9),X=n(41),J=n(36),Z=n(30),ee=n(20),te=n(19),ne=n(27),oe=n(33),re=n(121),ie=n(101),le=n(482),ae=n(50),se=n(38);n.d(t,"a",function(){return ue}),t.b=g;var ue=v._29({encapsulation:2,styles:[],data:{}});v._27("core-course-module",le.a,function(e){return v._57(0,[(e()(),v._31(0,0,null,null,1,"core-course-module",[],null,null,null,g,ue)),v._30(1,245760,null,0,le.a,[[2,W.a],ae.a,O.a,se.a,Q.a,U.a,C.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",section:"section",enabled:"downloadEnabled"},{completionChanged:"completionChanged",statusChanged:"statusChanged"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(10),i=n(126),l=n(9),a=n(1),s=n(2),u=n(11),c=n(4),d=n(40),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,r,i,a,s){var u=this;this.utils=e,this.textUtils=t,this.eventsProvider=r,this.sitesProvider=i,this.appProvider=a,this.domUtils=s,this.placeholder="",this.showKeyboard=!1,this.sendDisabled=!1,this.onSubmit=new o.v,this.onResize=new o.v,n.get(d.a.SETTINGS_SEND_ON_ENTER,!this.appProvider.isMobile()).then(function(e){u.sendOnEnter=!!e}),r.on(l.a.SEND_ON_ENTER_CHANGED,function(e){u.sendOnEnter=e},i.getCurrentSiteId())}return e.prototype.ngOnInit=function(){this.showKeyboard=this.utils.isTrueOrOne(this.showKeyboard)},e.prototype.submitForm=function(e){e.preventDefault(),e.stopPropagation();var t=this.message.trim();t&&(this.message="",this.domUtils.triggerFormSubmittedEvent(this.formElement.nativeElement,!1,this.sitesProvider.getCurrentSiteId()),t=this.textUtils.replaceNewLines(t,"<br>"),this.onSubmit.emit(t))},e.prototype.textareaResized=function(){this.onResize.emit()},e.prototype.enterClicked=function(e,t){this.sendDisabled||(this.sendOnEnter&&!t?this.submitForm(e):this.sendOnEnter||this.appProvider.isMobile()||(this.appProvider.isMac()&&"meta"==t||!this.appProvider.isMac()&&"control"==t)&&this.submitForm(e))},f([Object(o.D)(),p("design:type",String)],e.prototype,"message",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"placeholder",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"showKeyboard",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"sendDisabled",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"onSubmit",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"onResize",void 0),f([Object(o._9)("messageForm"),p("design:type",o.t)],e.prototype,"formElement",void 0),e=f([Object(o.m)({selector:"core-send-message-form",templateUrl:"core-send-message-form.html"}),p("design:paramtypes",[s.a,u.a,i.a,l.a,a.a,r.a,c.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),r=n(3),i=n(6),l=n(4),a=n(2),s=n(128),u=n(73),c=n(117),d=n(138),f=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,r,i,l,a,s,u,c){this.injector=t,this.questionDelegate=n,this.utils=r,this.behaviourDelegate=i,this.questionHelper=l,this.translate=a,this.questionProvider=s,this.domUtils=u,this.cdr=c,this.data={},this.behaviourComponents=[],this.loaded=!1,e=e.getInstance("CoreQuestionComponent"),this.buttonClicked=new o.v,this.onAbort=new o.v}return e.prototype.ngOnInit=function(){var e=this;this.offlineEnabled=this.utils.isTrueOrOne(this.offlineEnabled),this.question&&("random"==this.question.type||this.questionDelegate.isQuestionSupported(this.question.type))?this.questionDelegate.getComponentForQuestion(this.injector,this.question).then(function(t){if(e.componentClass=t,t){e.data={question:e.question,component:e.component,componentId:e.componentId,attemptId:e.attemptId,offlineEnabled:e.offlineEnabled,contextLevel:e.contextLevel,contextInstanceId:e.contextInstanceId,courseId:e.courseId,buttonClicked:e.buttonClicked,onAbort:e.onAbort},e.questionHelper.extractQuestionScripts(e.question,e.usageId);var n=e.questionDelegate.getBehaviourForQuestion(e.question,e.question.preferredBehaviour);if(!e.behaviourDelegate.isBehaviourSupported(n))return e.logger.warn("Aborting question because the behaviour is not supported.",e.question.name),void e.questionHelper.showComponentError(e.onAbort,e.translate.instant("addon.mod_quiz.errorbehaviournotsupported")+" "+n);if(e.seqCheck=e.questionHelper.getQuestionSequenceCheckFromHtml(e.question.html),!e.seqCheck)return e.logger.warn("Aborting question because couldn't retrieve sequence check.",e.question.name),void e.questionHelper.showComponentError(e.onAbort);var o=void 0;e.offlineEnabled?o=e.questionProvider.getQuestionAnswers(e.component,e.attemptId,e.question.slot).then(function(t){e.question.localAnswers=e.questionProvider.convertAnswersArrayToObject(t,!0)}).catch(function(){e.question.localAnswers={}}):(e.question.localAnswers={},o=Promise.resolve()),o.then(function(){e.behaviourDelegate.handleQuestion(e.injector,e.question.preferredBehaviour,e.question).then(function(t){e.behaviourComponents=t}).finally(function(){e.question.html=e.domUtils.removeElementFromHtml(e.question.html,".im-controls"),e.loaded=!0}),e.questionHelper.extractQbehaviourRedoButton(e.question),e.question.validationError=e.questionHelper.getValidationErrorFromHtml(e.question.html),e.questionHelper.loadLocalAnswersInHtml(e.question),e.questionHelper.extractQuestionFeedback(e.question),e.questionHelper.extractQuestionComment(e.question)})}else e.loaded=!0}).catch(function(){}):this.loaded=!0},e.prototype.updateSequenceCheck=function(e){e[this.question.slot]&&(this.seqCheck=e[this.question.slot],this.cdr.detectChanges())},f([Object(o.D)(),p("design:type",Object)],e.prototype,"question",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"component",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"componentId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"attemptId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"usageId",void 0),f([Object(o.D)(),p("design:type",Object)],e.prototype,"offlineEnabled",void 0),f([Object(o.D)(),p("design:type",String)],e.prototype,"contextLevel",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"contextInstanceId",void 0),f([Object(o.D)(),p("design:type",Number)],e.prototype,"courseId",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"buttonClicked",void 0),f([Object(o.O)(),p("design:type",o.v)],e.prototype,"onAbort",void 0),e=f([Object(o.m)({selector:"core-question",templateUrl:"core-question.html"}),p("design:paramtypes",[i.a,o.C,u.a,a.a,c.a,d.a,r.c,s.a,l.a,o.j])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),r=n(23),i=n(3),l=n(81),a=n(4),s=n(11),u=n(2),c=n(9),d=n(177),f=n(1),p=n(72),h=n(175),m=n(202),_=n(189),g=n(192),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,o,i,l,a,s,u,c,d,f,p,m){this.translate=e,this.injector=t,this.eventsProvider=n,this.fileSessionProvider=o,this.syncProvider=i,this.domUtils=l,this.textUtils=a,this.utils=s,this.sitesProvider=u,this.uploaderProvider=c,this.workshopProvider=d,this.workshopHelper=f,this.workshopOffline=p,this.strategyDelegate=m,this.data={workshopId:0,assessment:null,edit:!1,selectedValues:[],fieldErrors:{},strategy:"",moduleId:0,courseId:null},this.assessmentStrategyLoaded=!1,this.notSupported=!1,this.feedbackText="",this.feedbackControl=new r.e,this.overallFeedkback=!1,this.overallFeedkbackRequired=!1,this.component=h.a.COMPONENT,this.originalData={text:"",files:[],weight:1,selectedValues:[]}}return e.prototype.ngOnInit=function(){var e=this;if(this.assessmentId&&this.strategy)if(this.data.workshopId=this.workshop.id,this.data.edit=this.edit,this.data.strategy=this.strategy,this.data.moduleId=this.workshop.coursemodule,this.data.courseId=this.workshop.course,this.componentClass=this.strategyDelegate.getComponentForPlugin(this.injector,this.strategy),this.componentClass){if(this.overallFeedkback=!!this.workshop.overallfeedbackmode,this.overallFeedkbackRequired=2==this.workshop.overallfeedbackmode,this.componentId=this.workshop.coursemodule,this.edit&&this.access.canallocate){this.weights=[];for(var t=16;t>=0;t--)this.weights[t]=t}this.edit&&this.syncProvider.blockOperation(h.a.COMPONENT,this.workshop.id),this.load().then(function(){e.obsInvalidated=e.eventsProvider.on(h.a.ASSESSMENT_INVALIDATED,e.load.bind(e),e.sitesProvider.getCurrentSiteId())}).finally(function(){e.assessmentStrategyLoaded=!0})}else this.notSupported=!this.strategyDelegate.isPluginSupported(this.strategy),this.assessmentStrategyLoaded=!0;else this.assessmentStrategyLoaded=!0},e.prototype.load=function(){var e=this;return this.workshopHelper.getReviewerAssessmentById(this.workshop.id,this.assessmentId,this.userId).then(function(t){e.data.assessment=t;return(e.edit?e.workshopOffline.getAssessment(e.workshop.id,e.assessmentId).then(function(n){var o=n.inputdata;if(e.hasOffline=!0,t.feedbackauthor=o.feedbackauthor,e.access.canallocate&&(t.weight=o.weight),t.form.current=e.workshopProvider.parseFields(e.utils.objectToArrayOfObjects(o,"name","value")),o)return e.workshopHelper.getAssessmentFilesFromOfflineFilesObject(o.feedbackauthorattachmentsid,e.workshop.id,e.assessmentId).then(function(e){t.feedbackattachmentfiles=e})}).catch(function(){e.hasOffline=!1}).finally(function(){e.feedbackText=t.feedbackauthor,e.feedbackControl.setValue(e.feedbackText),e.originalData.text=e.data.assessment.feedbackauthor,e.access.canallocate&&(e.originalData.weight=t.weight),e.originalData.files=[],t.feedbackattachmentfiles.forEach(function(t){var n;n=t.filename?t.filename:"/"==t.filepath[0]?t.filepath.substr(1):t.filepath,e.originalData.files.push({filename:n,fileurl:t.fileurl})})}):Promise.resolve()).then(function(){return e.strategyDelegate.getOriginalValues(e.strategy,t.form,e.workshop.id).then(function(t){e.data.selectedValues=t}).finally(function(){e.originalData.selectedValues=e.utils.clone(e.data.selectedValues),e.edit&&(e.fileSessionProvider.setFiles(h.a.COMPONENT,e.workshop.id+"_"+e.assessmentId,t.feedbackattachmentfiles),e.access.canallocate&&(e.weight=t.weight))})})})},e.prototype.hasDataChanged=function(){if(!this.assessmentStrategyLoaded)return!1;var e=this.textUtils.restorePluginfileUrls(this.feedbackText,this.data.assessment.feedbackcontentfiles||[]);if(this.originalData.text!=e)return!0;if(this.access.canallocate&&this.originalData.weight!=this.weight)return!0;var t=this.fileSessionProvider.getFiles(h.a.COMPONENT,this.workshop.id+"_"+this.assessmentId)||[];return!!this.uploaderProvider.areFileListDifferent(t,this.originalData.files)||this.strategyDelegate.hasDataChanged(this.workshop,this.originalData.selectedValues,this.data.selectedValues)},e.prototype.saveAssessment=function(){var e=this,t=this.fileSessionProvider.getFiles(h.a.COMPONENT,this.workshop.id+"_"+this.assessmentId)||[],n=!1,o=!t.length,r=this.domUtils.showModalLoading("core.sending",!0);return this.data.fieldErrors={},this.workshopHelper.uploadOrStoreAssessmentFiles(this.workshop.id,this.assessmentId,t,n).catch(function(){return n=!0,o=!0,e.workshopHelper.uploadOrStoreAssessmentFiles(e.workshop.id,e.assessmentId,t,n)}).then(function(n){var o=e.textUtils.restorePluginfileUrls(e.feedbackText,e.data.assessment.feedbackcontentfiles||[]);return e.workshopHelper.prepareAssessmentData(e.workshop,e.data.selectedValues,o,t,e.data.assessment.form,n).catch(function(t){return e.data.fieldErrors=t,Promise.reject(e.translate.instant("core.errorinvalidform"))})}).then(function(t){return n?e.workshopOffline.saveAssessment(e.workshop.id,e.assessmentId,e.workshop.course,t).then(function(){return!1}):e.workshopProvider.updateAssessment(e.workshop.id,e.assessmentId,e.workshop.course,t,!1,o)}).then(function(n){e.domUtils.triggerFormSubmittedEvent(e.formElement.nativeElement,!!n,e.sitesProvider.getCurrentSiteId());var o=[];return n&&(o.push(e.workshopHelper.deleteAssessmentStoredFiles(e.workshop.id,e.assessmentId)),o.push(e.workshopProvider.invalidateAssessmentFormData(e.workshop.id,e.assessmentId)),o.push(e.workshopProvider.invalidateAssessmentData(e.workshop.id,e.assessmentId))),Promise.all(o).catch(function(){}).finally(function(){e.eventsProvider.trigger(h.a.ASSESSMENT_SAVED,{workshopId:e.workshop.id,assessmentId:e.assessmentId,userId:e.sitesProvider.getCurrentSiteUserId()},e.sitesProvider.getCurrentSiteId()),t&&e.uploaderProvider.clearTmpFiles(t)})}).catch(function(t){return e.domUtils.showErrorModalDefault(t,"Error saving assessment."),Promise.reject(null)}).finally(function(){r.dismiss()})},e.prototype.onFeedbackChange=function(e){this.feedbackText=e},e.prototype.ngOnDestroy=function(){this.obsInvalidated&&this.obsInvalidated.off(),this.data.assessment.feedbackattachmentfiles&&this.uploaderProvider.clearTmpFiles(this.data.assessment.feedbackattachmentfiles)},v([Object(o.D)(),y("design:type",Object)],e.prototype,"workshop",void 0),v([Object(o.D)(),y("design:type",Object)],e.prototype,"access",void 0),v([Object(o.D)(),y("design:type",Number)],e.prototype,"assessmentId",void 0),v([Object(o.D)(),y("design:type",Number)],e.prototype,"userId",void 0),v([Object(o.D)(),y("design:type",String)],e.prototype,"strategy",void 0),v([Object(o.D)(),y("design:type",Boolean)],e.prototype,"edit",void 0),v([Object(o._9)("assessmentForm"),y("design:type",o.t)],e.prototype,"formElement",void 0),e=v([Object(o.m)({selector:"addon-mod-workshop-assessment-strategy",templateUrl:"addon-mod-workshop-assessment-strategy.html"}),y("design:paramtypes",[i.c,o.C,c.a,d.a,l.a,a.a,s.a,u.a,f.a,p.a,h.a,m.a,_.a,g.a])],e)}()},function(e,t,n){"use strict";function o(e){return T._57(0,[(e()(),T._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showSearch(n)&&o}return o},x.b,x.a)),T._30(1,1097728,[[1,4]],0,M.a,[[8,""],N.a,T.t,T.V],null,null),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,0,["\n        "])),(e()(),T._31(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(5,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(-1,0,["\n    "]))],function(e,t){e(t,5,0,"search")},function(e,t){e(t,0,0,T._56(t,0,0,T._44(t,2).transform("addon.mod_data.search")));e(t,4,0,T._44(t,5)._hidden)})}function r(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function i(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function l(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,T._34(1,"",T._56(t,1,0,T._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function a(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function s(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function u(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoAddEntries(n)&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_data.addentries")),"add",500)},null)}function c(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0,r=e.component;if("action"===t){o=!1!==r.gotoEntry(r.firstEntry)&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_data.single")),"document",400)},null)}function d(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,300)},null)}function f(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},H.b,H.a)),T._30(1,770048,null,0,B.a,[q.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),T._48(2,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",200)},null)}function p(e){return T._57(0,[(e()(),T._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(4,null,["\n        ","\n    "])),T._48(5,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,T._44(t,3)._hidden);e(t,4,0,T._56(t,4,0,T._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function h(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"ion-label",[["id","addon-data-groupslabel"]],null,null,null,null,null)),T._30(1,16384,[[2,4]],0,G.a,[N.a,T.t,T.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),T._55(2,null,["",""])),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,"addon-data-groupslabel")},function(e,t){e(t,2,0,T._56(t,2,0,T._44(t,3).transform("core.groupsseparate")))})}function m(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"ion-label",[["id","addon-data-groupslabel"]],null,null,null,null,null)),T._30(1,16384,[[2,4]],0,G.a,[N.a,T.t,T.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),T._55(2,null,["",""])),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,"addon-data-groupslabel")},function(e,t){e(t,2,0,T._56(t,2,0,T._44(t,3).transform("core.groupsvisible")))})}function _(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),T._30(1,16384,[[5,4]],0,V.a,[T.t],{value:[0,"value"]},null),(e()(),T._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.id)},function(e,t){e(t,2,0,t.context.$implicit.name)})}function g(e){return T._57(0,[(e()(),T._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,K.b,K.a)),T._30(1,1097728,null,3,W.a,[z.a,N.a,T.t,T.V,[2,$.a]],null,null),T._52(603979776,2,{contentLabel:0}),T._52(603979776,3,{_buttons:1}),T._52(603979776,4,{_icons:1}),T._30(5,16384,null,0,Y.a,[],null,null),(e()(),T._55(-1,2,["\n        "])),(e()(),T._26(16777216,null,1,1,null,h)),T._30(8,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n        "])),(e()(),T._26(16777216,null,1,1,null,m)),T._30(11,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n        "])),(e()(),T._31(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-data-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==T._44(e,14)._click(n)&&o}if("keyup.space"===t){o=!1!==T._44(e,14)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.selectedGroup=n)&&o}if("ionChange"===t){o=!1!==r.setGroup(r.selectedGroup)&&o}return o},X.b,X.a)),T._30(14,1228800,null,1,J.a,[Z.a,z.a,N.a,T.t,T.V,[2,W.a],ee.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),T._52(603979776,5,{options:1}),T._50(1024,null,te.l,function(e){return[e]},[J.a]),T._30(17,671744,null,0,te.q,[[8,null],[8,null],[8,null],[2,te.l]],{model:[0,"model"]},{update:"ngModelChange"}),T._50(2048,null,te.m,null,[te.q]),T._30(19,16384,null,0,te.n,[te.m],null,null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,_)),T._30(22,802816,null,0,Q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,8,0,n.groupInfo.separateGroups);e(t,11,0,n.groupInfo.visibleGroups);e(t,14,0,"action-sheet");e(t,17,0,n.selectedGroup);e(t,22,0,n.groupInfo.groups)},function(e,t){e(t,13,0,T._44(t,14)._disabled,T._44(t,19).ngClassUntouched,T._44(t,19).ngClassTouched,T._44(t,19).ngClassPristine,T._44(t,19).ngClassDirty,T._44(t,19).ngClassValid,T._44(t,19).ngClassInvalid,T._44(t,19).ngClassPending)})}function v(e){return T._57(0,[(e()(),T._31(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(4,null,["\n        ","\n    "])),T._48(5,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,T._44(t,3)._hidden);e(t,4,0,T._56(t,4,0,T._44(t,6).transform("addon.mod_data.notopenyet",e(t,5,0,n.timeAvailableFromReadable))))})}function y(e){return T._57(0,[(e()(),T._31(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(4,null,["\n        ","\n    "])),T._48(5,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,T._44(t,3)._hidden);e(t,4,0,T._56(t,4,0,T._44(t,6).transform("addon.mod_data.expired",e(t,5,0,n.timeAvailableToReadable))))})}function b(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(4,null,["\n        ","\n    "])),T._48(5,{entrieslefttoview:0}),T._48(6,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,T._44(t,3)._hidden);e(t,4,0,T._56(t,4,0,T._44(t,7).transform("addon.mod_data.entrieslefttoaddtoview",e(t,6,0,e(t,5,0,n.access.entrieslefttoview)))))})}function P(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(4,null,["\n        ","\n    "])),T._48(5,{entriesleft:0}),T._48(6,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,T._44(t,3)._hidden);e(t,4,0,T._56(t,4,0,T._44(t,7).transform("addon.mod_data.entrieslefttoadd",e(t,6,0,e(t,5,0,n.access.entrieslefttoadd)))))})}function O(e){return T._57(0,[(e()(),T._31(0,0,null,null,10,"ion-item",[["class","item item item-block"]],null,null,null,K.b,K.a)),T._30(1,1097728,null,3,W.a,[z.a,N.a,T.t,T.V,[2,$.a]],null,null),T._52(335544320,6,{contentLabel:0}),T._52(603979776,7,{_buttons:1}),T._52(603979776,8,{_icons:1}),T._30(5,16384,null,0,Y.a,[],null,null),(e()(),T._55(-1,2,["\n            "])),(e()(),T._31(7,0,null,2,2,"a",[],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.searchReset()&&o}return o},null,null)),(e()(),T._55(8,null,["",""])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,2,["\n        "]))],null,function(e,t){e(t,8,0,T._56(t,8,0,T._44(t,9).transform("addon.mod_data.resetsettings")))})}function E(e){return T._57(0,[(e()(),T._31(0,0,null,null,5,"div",[["class","core-success-card"]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.searchReset()&&o}return o},null,null)),(e()(),T._55(-1,null,["\n            "])),(e()(),T._31(2,0,null,null,2,"p",[],[[8,"innerHTML",1]],null,null,null,null)),T._48(3,{$a:0}),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,null,["\n        "]))],null,function(e,t){var n=t.component;e(t,2,0,T._56(t,2,0,T._44(t,4).transform("addon.mod_data.foundrecords",e(t,3,0,n.foundRecordsData))))})}function C(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,O)),T._30(3,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n\n        "])),(e()(),T._26(16777216,null,null,1,null,E)),T._30(6,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,!n.foundRecordsData);e(t,6,0,n.foundRecordsData)},null)}function I(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"core-style",[],null,null,null,ne.b,ne.a)),T._30(3,573440,null,0,oe.a,[T.t],{css:[0,"css"],prefix:[1,"prefix"]},null),(e()(),T._55(-1,null,["\n\n        "])),(e()(),T._31(5,0,null,null,1,"core-compile-html",[],null,null,null,re.b,re.a)),T._30(6,966656,null,0,ie.a,[le.a,T.j,T.t,[2,ae.a],T.F,se.a,ue.a],{text:[0,"text"],jsData:[1,"jsData"],extraImports:[2,"extraImports"]},null),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.data.csstemplate,T._34(1,".addon-data-entries-",n.data.id,""));e(t,6,0,n.entriesRendered,n.jsData,n.extraImports)},function(e,t){e(t,0,0,T._34(1,"addon-data-contents addon-data-entries-",t.component.data.id," safe-padding-horizontal"))})}function R(e){return T._57(0,[(e()(),T._31(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),T._30(1,16384,null,0,ce.a,[],null,null),(e()(),T._55(-1,null,["\n                "])),(e()(),T._31(3,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.searchEntries(r.search.page-1)&&o}return o},x.b,x.a)),T._30(4,1097728,null,0,M.a,[[8,""],N.a,T.t,T.V],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),T._55(-1,0,["\n                    "])),(e()(),T._31(6,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(7,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),T._55(8,0,["\n                    ","\n                "])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,null,["\n            "]))],function(e,t){e(t,4,0,"","");e(t,7,0,"arrow-back","ios-arrow-back")},function(e,t){e(t,6,0,T._44(t,7)._hidden);e(t,8,0,T._56(t,8,0,T._44(t,9).transform("core.previous")))})}function S(e){return T._57(0,[(e()(),T._31(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),T._30(1,16384,null,0,ce.a,[],null,null),(e()(),T._55(-1,null,["\n                "])),(e()(),T._31(3,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.searchEntries(r.search.page+1)&&o}return o},x.b,x.a)),T._30(4,1097728,null,0,M.a,[[8,""],N.a,T.t,T.V],{block:[0,"block"]},null),(e()(),T._55(5,0,["\n                    ","\n                    "])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._31(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(8,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),T._55(-1,0,["\n                "])),(e()(),T._55(-1,null,["\n            "]))],function(e,t){e(t,4,0,"");e(t,8,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,5,0,T._56(t,5,0,T._44(t,6).transform("core.next")));e(t,7,0,T._44(t,8)._hidden)})}function w(e){return T._57(0,[(e()(),T._31(0,0,null,null,12,"ion-grid",[["class","grid"]],null,null,null,null,null)),T._30(1,16384,null,0,de.a,[],null,null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(3,0,null,null,8,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),T._30(4,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,R)),T._30(7,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,S)),T._30(10,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,7,0,n.search.page>0);e(t,10,0,n.hasNextPage)},null)}function A(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"core-empty-box",[["icon","archive"]],null,null,null,pe.b,pe.a)),T._30(1,49152,null,0,he.a,[],{message:[0,"message"],icon:[1,"icon"]},null),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,0,["\n    "]))],function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_data.norecords")),"archive")},null)}function D(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"core-empty-box",[["class","core-empty-box-clickable"],["icon","archive"]],null,null,null,pe.b,pe.a)),T._30(1,49152,null,0,he.a,[],{message:[0,"message"],icon:[1,"icon"]},null),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,0,["\n        "])),(e()(),T._31(4,0,null,0,2,"a",[],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.searchReset()&&o}return o},null,null)),(e()(),T._55(5,null,["",""])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,0,["\n    "]))],function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_data.nomatch")),"archive")},function(e,t){e(t,5,0,T._56(t,5,0,T._44(t,6).transform("addon.mod_data.resetsettings")))})}function j(e){return T._57(0,[(e()(),T._31(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,me.b,me.a)),T._30(1,1228800,null,2,_e.a,[ge.a],null,null),T._52(335544320,9,{_mainButton:0}),T._52(603979776,10,{_fabLists:1}),T._30(4,212992,null,0,ve.a,[T.t,ye.a],null,null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._31(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoAddEntries(n)&&o}return o},be.b,be.a)),T._30(7,49152,[[9,4]],0,Pe.a,[N.a,T.t,T.V],null,null),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,0,["\n        "])),(e()(),T._31(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(11,147456,null,0,L.a,[N.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._55(-1,0,["\n"]))],function(e,t){e(t,4,0);e(t,11,0,"add")},function(e,t){e(t,6,0,T._56(t,6,0,T._44(t,8).transform("addon.mod_data.addentries")));e(t,10,0,T._44(t,11)._hidden)})}function k(e){return T._57(0,[(e()(),T._55(-1,null,["\n"])),(e()(),T._31(1,0,null,null,37,"core-navbar-buttons",[["end",""]],null,null,null,Oe.b,Oe.a)),T._30(2,245760,null,1,Ee.a,[T.t,Ce.a,se.a],null,null),T._52(603979776,1,{buttons:1}),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,o)),T._30(6,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._31(8,0,null,0,29,"core-context-menu",[],null,null,null,Ie.b,Ie.a)),T._30(9,245760,null,0,q.a,[F.a,Re.a,T.t,se.a,[2,Se.a],ue.a],null,null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,r)),T._30(12,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,i)),T._30(15,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,l)),T._30(18,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,a)),T._30(21,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,s)),T._30(24,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,u)),T._30(27,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,c)),T._30(30,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,d)),T._30(33,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,f)),T._30(36,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._55(-1,0,["\n"])),(e()(),T._55(-1,null,["\n\n"])),(e()(),T._55(-1,null,["\n"])),(e()(),T._31(41,0,null,null,40,"core-loading",[["class","core-loading-center"]],null,null,null,we.b,we.a)),T._30(42,638976,null,0,Ae.a,[F.a,T.t,De.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._31(44,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,je.b,je.a)),T._30(45,49152,null,0,ke.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,p)),T._30(49,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,g)),T._30(52,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,v)),T._30(55,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,y)),T._30(58,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,b)),T._30(61,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,P)),T._30(64,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,C)),T._30(68,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,I)),T._30(71,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,w)),T._30(74,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,A)),T._30(77,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._26(16777216,null,0,1,null,D)),T._30(80,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n"])),(e()(),T._55(-1,null,["\n\n"])),(e()(),T._26(16777216,null,null,1,null,j)),T._30(84,16384,null,0,Q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0);e(t,6,0,n.canSearch),e(t,9,0);e(t,12,0,n.externalUrl);e(t,15,0,n.description);e(t,18,0,n.blog);e(t,21,0,n.loaded&&!(n.hasOffline||n.hasOfflineRatings)&&n.isOnline);e(t,24,0,n.loaded&&(n.hasOffline||n.hasOfflineRatings)&&n.isOnline);e(t,27,0,n.canAdd);e(t,30,0,n.firstEntry);e(t,33,0,n.prefetchStatusIcon);e(t,36,0,n.size);e(t,42,0,n.loaded);e(t,45,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,49,0,n.hasOffline||n.hasOfflineRatings);e(t,52,0,n.groupInfo&&(n.groupInfo.separateGroups||n.groupInfo.visibleGroups));e(t,55,0,!n.access.timeavailable&&n.timeAvailableFrom);e(t,58,0,!n.access.timeavailable&&n.timeAvailableTo);e(t,61,0,n.access.entrieslefttoview);e(t,64,0,n.access.entrieslefttoadd);e(t,68,0,n.search.searching&&!n.isEmpty);e(t,71,0,!n.isEmpty);e(t,74,0,n.search.page>0||n.hasNextPage);e(t,77,0,n.isEmpty&&!n.search.searching);e(t,80,0,n.isEmpty&&n.search.searching);e(t,84,0,n.canAdd)},null)}n.d(t,"b",function(){return He}),t.c=k,n.d(t,"a",function(){return Be});var T=n(0),x=n(45),M=n(42),N=n(8),U=n(25),F=n(17),L=n(47),H=n(92),B=n(83),q=n(78),G=n(67),V=n(108),K=n(30),W=n(20),z=n(19),$=n(27),Y=n(33),Q=n(7),X=n(123),J=n(109),Z=n(35),ee=n(59),te=n(23),ne=n(1592),oe=n(492),re=n(219),ie=n(193),le=n(155),ae=n(21),se=n(4),ue=n(2),ce=n(120),de=n(164),fe=n(119),pe=n(124),he=n(114),me=n(281),_e=n(218),ge=n(16),ve=n(255),ye=n(29),be=n(282),Pe=n(190),Oe=n(96),Ee=n(87),Ce=n(6),Ie=n(91),Re=n(70),Se=n(76),we=n(54),Ae=n(51),De=n(9),je=n(122),ke=n(112),Te=n(500),xe=n(97),Me=n(217),Ne=n(399),Ue=n(24),Fe=n(71),Le=n(162),He=T._29({encapsulation:2,styles:[],data:{}}),Be=T._27("addon-mod-data-index",Te.a,function(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"addon-mod-data-index",[],null,null,null,k,He)),T._30(1,245760,null,0,Te.a,[T.C,[2,ye.a],xe.a,Me.a,Ne.a,Ue.a,Fe.a,Le.a,ue.a,ae.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"ion-icon",[["item-start",""],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(1,147456,[[3,4]],0,f.a,[p.a,d.t,d.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,t.component.prefetch.prefetchCourseIcon)},function(e,t){e(t,0,0,d._44(t,1)._hidden)})}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"ion-spinner",[["item-start",""]],[[2,"spinner-paused",null]],null,null,h.b,h.a)),d._30(1,114688,null,0,m.a,[p.a,d.t,d.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,d._44(t,1)._paused)})}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action("download")&&o}return o},_.b,_.a)),d._30(1,1097728,null,3,g.a,[v.a,p.a,d.t,d.V,[2,y.a]],null,null),d._52(335544320,1,{contentLabel:0}),d._52(603979776,2,{_buttons:1}),d._52(603979776,3,{_icons:1}),d._30(5,16384,null,0,b.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._26(16777216,null,0,1,null,o)),d._30(8,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._26(16777216,null,0,1,null,r)),d._30(11,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._55(14,null,["",""])),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,8,0,"spinner"!=n.prefetch.prefetchCourseIcon);e(t,11,0,"spinner"==n.prefetch.prefetchCourseIcon)},function(e,t){var n=t.component;e(t,14,0,d._56(t,14,0,d._44(t,15).transform(n.prefetch.title)))})}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action("hide")&&o}return o},_.b,_.a)),d._30(1,1097728,null,3,g.a,[v.a,p.a,d.t,d.V,[2,y.a]],null,null),d._52(335544320,4,{contentLabel:0}),d._52(603979776,5,{_buttons:1}),d._52(603979776,6,{_icons:1}),d._30(5,16384,null,0,b.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-eye"]],null,null,null,C.b,C.a)),d._30(8,704512,null,0,I.a,[d.t,p.a],{name:[0,"name"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._55(11,null,["",""])),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-eye")},function(e,t){e(t,11,0,d._56(t,11,0,d._44(t,12).transform("core.courses.hidecourse")))})}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action("show")&&o}return o},_.b,_.a)),d._30(1,1097728,null,3,g.a,[v.a,p.a,d.t,d.V,[2,y.a]],null,null),d._52(335544320,7,{contentLabel:0}),d._52(603979776,8,{_buttons:1}),d._52(603979776,9,{_icons:1}),d._30(5,16384,null,0,b.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-eye-slash"]],null,null,null,C.b,C.a)),d._30(8,704512,null,0,I.a,[d.t,p.a],{name:[0,"name"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._55(11,null,["",""])),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-eye-slash")},function(e,t){e(t,11,0,d._56(t,11,0,d._44(t,12).transform("core.courses.show")))})}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action("favourite")&&o}return o},_.b,_.a)),d._30(1,1097728,null,3,g.a,[v.a,p.a,d.t,d.V,[2,y.a]],null,null),d._52(335544320,10,{contentLabel:0}),d._52(603979776,11,{_buttons:1}),d._52(603979776,12,{_icons:1}),d._30(5,16384,null,0,b.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,C.b,C.a)),d._30(8,704512,null,0,I.a,[d.t,p.a],{name:[0,"name"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._55(11,null,["",""])),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-star")},function(e,t){e(t,11,0,d._56(t,11,0,d._44(t,12).transform("core.courses.addtofavourites")))})}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action("unfavourite")&&o}return o},_.b,_.a)),d._30(1,1097728,null,3,g.a,[v.a,p.a,d.t,d.V,[2,y.a]],null,null),d._52(335544320,13,{contentLabel:0}),d._52(603979776,14,{_buttons:1}),d._52(603979776,15,{_icons:1}),d._30(5,16384,null,0,b.a,[],null,null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,C.b,C.a)),d._30(8,704512,null,0,I.a,[d.t,p.a],{name:[0,"name"],slash:[1,"slash"]},null),(e()(),d._55(-1,2,["\n    "])),(e()(),d._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._55(11,null,["",""])),d._47(131072,O.a,[E.a,d.j]),(e()(),d._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-star",!0)},function(e,t){e(t,11,0,d._56(t,11,0,d._44(t,12).transform("core.courses.removefromfavourites")))})}function c(e){return d._57(0,[(e()(),d._26(16777216,null,null,1,null,i)),d._30(1,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,l)),d._30(4,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,a)),d._30(7,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,s)),d._30(10,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n"])),(e()(),d._26(16777216,null,null,1,null,u)),d._30(13,16384,null,0,P.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n\n"]))],function(e,t){var n=t.component;e(t,1,0,n.downloadCourseEnabled);e(t,4,0,!n.course.hidden);e(t,7,0,n.course.hidden);e(t,10,0,!n.course.isfavourite);e(t,13,0,n.course.isfavourite)},null)}n.d(t,"a",function(){return j});var d=n(0),f=n(47),p=n(8),h=n(121),m=n(101),_=n(30),g=n(20),v=n(19),y=n(27),b=n(33),P=n(7),O=n(25),E=n(17),C=n(80),I=n(75),R=n(623),S=n(69),w=n(39),A=n(52),D=d._29({encapsulation:2,styles:[],data:{}}),j=d._27("core-courses-course-options-menu",R.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-courses-course-options-menu",[],null,null,null,c,D)),d._30(1,114688,null,0,R.a,[S.a,w.a,A.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(24),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.timeUtils=e,this.finished=new o.v}return e.prototype.ngOnInit=function(){var e=this,t=this.timeLeftClass||"core-timer-timeleft-",n=Math.round(Number(this.endTime)),o=this.containerRef&&this.containerRef.nativeElement;n&&(this.timeInterval=setInterval(function(){if(e.timeLeft=n-e.timeUtils.timestamp(),e.timeLeft<0)return clearInterval(e.timeInterval),void e.finished.emit();e.timeLeft<100&&!o.classList.contains(t+e.timeLeft)&&(o.classList.remove(t+(e.timeLeft+1)),o.classList.remove(t+(e.timeLeft+2)),o.classList.add(t+e.timeLeft))},200))},e.prototype.ngOnDestroy=function(){clearInterval(this.timeInterval)},i([Object(o.D)(),l("design:type",Object)],e.prototype,"endTime",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"timerText",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"timeLeftClass",void 0),i([Object(o.D)(),l("design:type",String)],e.prototype,"align",void 0),i([Object(o.O)(),l("design:type",o.v)],e.prototype,"finished",void 0),i([Object(o._9)("container",{read:o.t}),l("design:type",o.t)],e.prototype,"containerRef",void 0),e=i([Object(o.m)({selector:"core-timer",templateUrl:"core-timer.html"}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(1),l=n(150),a=n(11),s=n(571),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o){var r=this;this.sitesProvider=e,this.textUtils=n,this.modalCtrl=o,this.modelValueName="recaptcharesponse",this.expired=!1,t.getCurrentLanguage().then(function(e){r.lang=e})}return e.prototype.ngOnInit=function(){this.siteUrl=this.siteUrl||this.sitesProvider.getCurrentSite().getURL()},e.prototype.answerRecaptcha=function(){var e=this,t=this.textUtils.concatenatePaths(this.siteUrl,"webservice/recaptcha.php?lang="+this.lang),n=this.modalCtrl.create(s.a,{src:t},{cssClass:"core-modal-fullscreen"});n.onDidDismiss(function(t){e.expired=t.expired,e.model[e.modelValueName]=t.value}),n.present()},u([Object(o.D)(),c("design:type",Object)],e.prototype,"model",void 0),u([Object(o.D)(),c("design:type",String)],e.prototype,"publicKey",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"modelValueName",void 0),u([Object(o.D)(),c("design:type",String)],e.prototype,"siteUrl",void 0),e=u([Object(o.m)({selector:"core-recaptcha",templateUrl:"core-recaptcha.html"}),c("design:paramtypes",[i.a,l.a,a.a,r.q])],e)}()},function(e,t,n){"use strict";function o(e){return f._57(0,[(e()(),f._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,p.b,p.a)),f._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),f._47(131072,_.a,[g.a,f.j])],function(e,t){var n=t.component;e(t,1,0,f._56(t,1,0,f._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return f._57(0,[(e()(),f._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},p.b,p.a)),f._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),f._47(131072,_.a,[g.a,f.j])],function(e,t){e(t,1,0,f._56(t,1,0,f._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return f._57(0,[(e()(),f._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},p.b,p.a)),f._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),f._47(131072,_.a,[g.a,f.j])],function(e,t){e(t,1,0,f._34(1,"",f._56(t,1,0,f._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return f._57(0,[(e()(),f._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},p.b,p.a)),f._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),f._47(131072,_.a,[g.a,f.j])],function(e,t){var n=t.component;e(t,1,0,f._56(t,1,0,f._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return f._57(0,[(e()(),f._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},p.b,p.a)),f._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function s(e){return f._57(0,[(e()(),f._31(0,0,null,null,7,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),f._30(1,16384,null,0,v.a,[y.a,f.t,f.V],null,null),(e()(),f._55(-1,null,["\n        "])),(e()(),f._31(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),f._30(4,147456,null,0,b.a,[y.a,f.t,f.V],{name:[0,"name"]},null),(e()(),f._55(5,null,[" ","\n    "])),f._48(6,{$a:0}),f._47(131072,_.a,[g.a,f.j])],function(e,t){e(t,4,0,"time")},function(e,t){var n=t.component;e(t,3,0,f._44(t,4)._hidden);e(t,5,0,f._56(t,5,0,f._44(t,7).transform("addon.mod_chat.sessionstart",e(t,6,0,n.chatInfo))))})}function u(e){return f._57(0,[(e()(),f._31(0,0,null,null,3,"a",[["block",""],["color","light"],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.viewSessions()&&o}return o},P.b,P.a)),f._30(1,1097728,null,0,O.a,[[8,""],y.a,f.t,f.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),f._55(2,0,["",""])),f._47(131072,_.a,[g.a,f.j])],function(e,t){e(t,1,0,"light","")},function(e,t){e(t,2,0,f._56(t,2,0,f._44(t,3).transform("addon.mod_chat.viewreport")))})}function c(e){return f._57(0,[(e()(),f._31(0,0,null,null,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),f._55(-1,null,["\n        "])),(e()(),f._31(2,0,null,null,3,"a",[["block",""],["color","primary"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.enterChat()&&o}return o},P.b,P.a)),f._30(3,1097728,null,0,O.a,[[8,""],y.a,f.t,f.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),f._55(4,0,["",""])),f._47(131072,_.a,[g.a,f.j]),(e()(),f._55(-1,null,["\n        "])),(e()(),f._26(16777216,null,null,1,null,u)),f._30(8,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,"primary","");e(t,8,0,n.sessionsAvailable)},function(e,t){e(t,4,0,f._56(t,4,0,f._44(t,5).transform("addon.mod_chat.enterchat")))})}function d(e){return f._57(0,[(e()(),f._55(-1,null,["\n"])),(e()(),f._31(1,0,null,null,22,"core-navbar-buttons",[["end",""]],null,null,null,C.b,C.a)),f._30(2,245760,null,1,I.a,[f.t,R.a,S.a],null,null),f._52(603979776,1,{buttons:1}),(e()(),f._55(-1,0,["\n    "])),(e()(),f._31(5,0,null,0,17,"core-context-menu",[],null,null,null,w.b,w.a)),f._30(6,245760,null,0,m.a,[g.a,A.a,f.t,S.a,[2,D.a],j.a],null,null),(e()(),f._55(-1,0,["\n        "])),(e()(),f._26(16777216,null,0,1,null,o)),f._30(9,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n        "])),(e()(),f._26(16777216,null,0,1,null,r)),f._30(12,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n        "])),(e()(),f._26(16777216,null,0,1,null,i)),f._30(15,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n        "])),(e()(),f._26(16777216,null,0,1,null,l)),f._30(18,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n        "])),(e()(),f._26(16777216,null,0,1,null,a)),f._30(21,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n    "])),(e()(),f._55(-1,0,["\n"])),(e()(),f._55(-1,null,["\n\n"])),(e()(),f._55(-1,null,["\n"])),(e()(),f._31(26,0,null,null,11,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,k.b,k.a)),f._30(27,638976,null,0,T.a,[g.a,f.t,x.a,j.a],{hideUntil:[0,"hideUntil"]},null),(e()(),f._55(-1,0,["\n\n    "])),(e()(),f._31(29,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,M.b,M.a)),f._30(30,49152,null,0,N.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),f._55(-1,0,["\n\n    "])),(e()(),f._26(16777216,null,0,1,null,s)),f._30(33,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n\n    "])),(e()(),f._26(16777216,null,0,1,null,c)),f._30(36,16384,null,0,E.k,[f._11,f._6],{ngIf:[0,"ngIf"]},null),(e()(),f._55(-1,0,["\n"])),(e()(),f._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,21,0,n.prefetchStatusIcon);e(t,27,0,n.loaded);e(t,30,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,33,0,n.chatInfo);e(t,36,0,n.chat)},null)}n.d(t,"b",function(){return B}),t.c=d,n.d(t,"a",function(){return q});var f=n(0),p=n(92),h=n(83),m=n(78),_=n(25),g=n(17),v=n(89),y=n(8),b=n(47),P=n(45),O=n(42),E=n(7),C=n(96),I=n(87),R=n(6),S=n(4),w=n(91),A=n(70),D=n(76),j=n(2),k=n(54),T=n(51),x=n(9),M=n(122),N=n(112),U=n(498),F=n(279),L=n(24),H=n(21),B=f._29({encapsulation:2,styles:[],data:{}}),q=f._27("addon-mod-chat-index",U.a,function(e){return f._57(0,[(e()(),f._31(0,0,null,null,1,"addon-mod-chat-index",[],null,null,null,d,B)),f._30(1,245760,null,0,U.a,[f.C,F.a,L.a,H.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(191),i=n(2),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t,n){this.ufDelegate=e,this.utilsProvider=t,this.injector=n,this.signup=!1,this.edit=!1,this.data={}}return e.prototype.ngOnInit=function(){var e=this;this.ufDelegate.getComponent(this.injector,this.field,this.signup).then(function(t){e.componentClass=t}),this.data.field=this.field,this.data.edit=this.utilsProvider.isTrueOrOne(this.edit),this.edit&&(this.data.signup=this.utilsProvider.isTrueOrOne(this.signup),this.data.disabled=this.utilsProvider.isTrueOrOne(this.field.locked),this.data.form=this.form,this.data.registerAuth=this.registerAuth,this.data.contextLevel=this.contextLevel,this.data.contextInstanceId=this.contextInstanceId,this.data.courseId=this.courseId)},l([Object(o.D)(),a("design:type",Object)],e.prototype,"field",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"signup",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"edit",void 0),l([Object(o.D)(),a("design:type",Object)],e.prototype,"form",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"registerAuth",void 0),l([Object(o.D)(),a("design:type",String)],e.prototype,"contextLevel",void 0),l([Object(o.D)(),a("design:type",Number)],e.prototype,"contextInstanceId",void 0),l([Object(o.D)(),a("design:type",Number)],e.prototype,"courseId",void 0),e=l([Object(o.m)({selector:"core-user-profile-field",templateUrl:"core-user-profile-field.html"}),a("design:paramtypes",[r.a,i.a,o.C])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(26),s=n(31),u=n(74),c=n(271),d=n(1545),f=n(1560),p=n(1561),h=n(1562),m=n(1563),_=n(1564),g=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},v=function(){function e(){}return e=g([Object(o.I)({declarations:[d.a,f.a,p.a,h.a,m.a,_.a],imports:[r.b,i.k,l.b.forChild(),a.a,s.a,u.a,c.a],exports:[d.a,f.a,p.a,h.a,m.a,_.a]})],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(52),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.show=e.isGetCoursesByFieldAvailable()}return e=i([Object(o.m)({selector:"core-sitehome-all-course-list",templateUrl:"core-sitehome-all-course-list.html"}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(52),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.show=e.isGetCoursesByFieldAvailable()}return e=i([Object(o.m)({selector:"core-sitehome-categories",templateUrl:"core-sitehome-categories.html"}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(52),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.show=!e.isSearchCoursesDisabledInSite()}return e=i([Object(o.m)({selector:"core-sitehome-course-search",templateUrl:"core-sitehome-course-search.html"}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(52),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.coursesProvider=e}return e.prototype.ngOnInit=function(){var e=this;this.coursesProvider.isMyCoursesDisabledInSite()?this.show=!1:this.coursesProvider.getUserCourses().then(function(t){e.show=t.length>0})},e=i([Object(o.m)({selector:"core-sitehome-enrolled-course-list",templateUrl:"core-sitehome-enrolled-course-list.html"}),l("design:paramtypes",[r.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),r=n(1),i=n(13),l=n(61),a=n(232),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,o){this.sitesProvider=e,this.courseProvider=t,this.moduleDelegate=n,this.siteHomeProvider=o,this.siteHomeId=e.getCurrentSite().getSiteHomeId()}return e.prototype.ngOnInit=function(){var e=this,t=this.sitesProvider.getCurrentSite();if(t.getStoredConfig("newsitems")||0){var n=t.getSiteHomeId();this.siteHomeProvider.getNewsForum(n).then(function(t){return e.courseProvider.getModuleBasicInfo(t.cmid).then(function(t){e.show=!0,e.module=t,t.handlerData=e.moduleDelegate.getModuleDataFor(t.modname,t,n,t.section,!0)})}).catch(function(){})}},e=s([Object(o.m)({selector:"core-sitehome-news",templateUrl:"core-sitehome-news.html"}),u("design:paramtypes",[r.a,i.a,l.a,a.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(7),i=n(5),l=n(3),a=n(1551),s=n(26),u=n(31),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e=c([Object(o.I)({declarations:[a.a],imports:[r.b,i.k,l.b.forChild(),s.a,u.a],providers:[],exports:[a.a]})],e)}()},function(e,t,n){"use strict";function o(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),x._47(131072,F.a,[L.a,x.j])],function(e,t){var n=t.component;e(t,1,0,x._56(t,1,0,x._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._47(131072,F.a,[L.a,x.j])],function(e,t){e(t,1,0,x._56(t,1,0,x._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._47(131072,F.a,[L.a,x.j])],function(e,t){e(t,1,0,x._34(1,"",x._56(t,1,0,x._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),x._47(131072,F.a,[L.a,x.j])],function(e,t){var n=t.component;e(t,1,0,x._56(t,1,0,x._44(t,2).transform("addon.mod_forum.refreshdiscussions")),n.refreshIcon,!1,700)},null)}function a(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),x._47(131072,F.a,[L.a,x.j])],function(e,t){var n=t.component;e(t,1,0,x._56(t,1,0,x._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return x._57(0,[(e()(),x._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),x._48(2,{$a:0}),x._47(131072,F.a,[L.a,x.j])],function(e,t){var n=t.component;e(t,1,0,x._56(t,1,0,x._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"core-context-menu-item",[["iconAction","fa-sort"]],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.showSortOrderSelector(n)&&o}return o},M.b,M.a)),x._30(1,770048,null,0,N.a,[U.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._47(131072,F.a,[L.a,x.j])],function(e,t){e(t,1,0,x._56(t,1,0,x._44(t,2).transform("core.sort")),"fa-sort",300)},null)}function d(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,H.b,H.a)),x._30(1,49152,null,0,B.a,[],{description:[0,"description"],note:[1,"note"],component:[2,"component"],componentId:[3,"componentId"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null)],function(e,t){var n=t.component;e(t,1,0,n.description,n.descriptionNote,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function f(e){return x._57(0,[(e()(),x._31(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),x._30(1,16384,null,0,q.a,[G.a,x.t,x.V],null,null),(e()(),x._55(-1,null,["\n                "])),(e()(),x._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(4,147456,null,0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(5,null,[" ","\n            "])),x._48(6,{$a:0}),x._47(131072,F.a,[L.a,x.j])],function(e,t){e(t,4,0,"warning")},function(e,t){var n=t.component;e(t,3,0,x._44(t,4)._hidden);e(t,5,0,x._56(t,5,0,x._44(t,7).transform("core.hasdatatosync",e(t,6,0,n.moduleName))))})}function p(e){return x._57(0,[(e()(),x._31(0,0,null,null,5,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),x._30(1,16384,null,0,q.a,[G.a,x.t,x.V],null,null),(e()(),x._55(-1,null,["\n                "])),(e()(),x._31(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(4,147456,null,0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(5,null,[" ","\n            "]))],function(e,t){e(t,4,0,"information-circle")},function(e,t){var n=t.component;e(t,3,0,x._44(t,4)._hidden);e(t,5,0,n.availabilityMessage)})}function h(e){return x._57(0,[(e()(),x._31(0,0,null,null,3,"core-empty-box",[["icon","chatbubbles"]],null,null,null,K.b,K.a)),x._30(1,49152,null,0,W.a,[],{message:[0,"message"],icon:[1,"icon"]},null),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(-1,0,["\n                "]))],function(e,t){e(t,1,0,x._56(t,1,0,x._44(t,2).transform("addon.mod_forum.forumnodiscussionsyet")),"chatbubbles")},null)}function m(e){return x._57(0,[(e()(),x._31(0,0,null,null,11,"button",[["aria-controls","addon-mod-forum-sort-order-selector"],["aria-haspopup","true"],["class","core-button-select button-no-uppercase col"],["color","light"],["icon-end",""],["id","addon-mod-forum-sort-order-button"],["ion-button",""],["ion-col",""],["padding-horizontal",""]],[[1,"aria-label",0],[1,"aria-expanded",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showSortOrderSelector(n)&&o}return o},z.b,z.a)),x._30(1,1097728,null,0,$.a,[[8,""],G.a,x.t,x.V],{color:[0,"color"]},null),x._30(2,16384,null,0,Y.a,[],null,null),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(-1,0,["\n                        "])),(e()(),x._31(5,0,null,0,2,"span",[["class","core-button-select-text"]],null,null,null,null,null)),(e()(),x._55(6,null,["",""])),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(-1,0,["\n                        "])),(e()(),x._31(9,0,null,0,1,"ion-icon",[["ios","md-arrow-dropdown"],["name","arrow-dropdown"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(10,147456,null,0,V.a,[G.a,x.t,x.V],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),x._55(-1,0,["\n                    "]))],function(e,t){e(t,1,0,"light");e(t,10,0,"arrow-dropdown","md-arrow-dropdown")},function(e,t){var n=t.component;e(t,0,0,x._56(t,0,0,x._44(t,3).transform("core.sort")),n.sortOrderSelectorExpanded);e(t,6,0,x._56(t,6,0,x._44(t,7).transform(n.selectedSortOrder.label)));e(t,9,0,x._44(t,10)._hidden)})}function _(e){return x._57(0,[(e()(),x._31(0,0,null,null,5,"div",[["class","row"],["ion-row",""],["margin-bottom",""],["padding-horizontal",""],["padding-top",""],["text-wrap",""]],null,null,null,null,null)),x._30(1,16384,null,0,Q.a,[],null,null),(e()(),x._55(-1,null,["\n                    "])),(e()(),x._26(16777216,null,null,1,null,m)),x._30(4,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                "]))],function(e,t){e(t,4,0,t.component.sortingAvailable)},null)}function g(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,J.b,J.a)),x._30(1,16384,null,0,Z.a,[],null,null),x._30(2,770048,null,0,ee.a,[te.a,ne.a,oe.a,re.a,ie.a,[2,le.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(e,t){e(t,2,0,t.parent.context.$implicit,t.component.courseId)},null)}function v(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),x._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.userfullname)})}function y(e){return x._57(0,[(e()(),x._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._31(1,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(2,147456,[[5,4]],0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(3,null,[" ",""]))],function(e,t){e(t,2,0,"people")},function(e,t){e(t,1,0,x._44(t,2)._hidden);e(t,3,0,t.parent.context.$implicit.groupname)})}function b(e){return x._57(0,[(e()(),x._31(0,0,null,null,39,null,null,null,null,null,null,null)),(e()(),x._55(-1,null,["\n                    "])),(e()(),x._31(2,0,null,null,36,"a",[["class","addon-mod-forum-discussion item item-block"],["ion-item",""],["text-wrap",""]],[[1,"no-lines",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openNewDiscussion(e.context.$implicit.timecreated)&&o}return o},ae.b,ae.a)),x._30(3,1097728,null,3,se.a,[ue.a,G.a,x.t,x.V,[2,ce.a]],null,null),x._52(335544320,3,{contentLabel:0}),x._52(603979776,4,{_buttons:1}),x._52(603979776,5,{_icons:1}),x._30(7,16384,null,0,de.a,[],null,null),(e()(),x._55(-1,2,["\n                        "])),(e()(),x._31(9,0,null,2,7,"div",[["class","addon-mod-forum-discussion-title"]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._31(11,0,null,null,4,"h2",[],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._31(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),x._30(14,540672,null,0,fe.a,[x.t,ne.a,pe.a,he.a,L.a,me.a,oe.a,_e.a,ge.a,ve.a,re.a,ye.a,[2,te.a],[2,be.a],[2,le.a],Pe.a,ie.a,Oe.a,Ee.a,Ce.a,x._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._55(-1,null,["\n                        "])),(e()(),x._55(-1,2,["\n                        "])),(e()(),x._31(18,0,null,2,19,"div",[["class","addon-mod-forum-discussion-info"]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._26(16777216,null,null,1,null,g)),x._30(21,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._31(23,0,null,null,13,"div",[["class","addon-mod-forum-discussion-author"]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._26(16777216,null,null,1,null,v)),x._30(26,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._26(16777216,null,null,1,null,y)),x._30(29,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._31(31,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),x._31(32,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(33,147456,[[5,4]],0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(34,null,[" ",""])),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._55(-1,null,["\n                        "])),(e()(),x._55(-1,2,["\n                    "])),(e()(),x._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,14,0,t.context.$implicit.subject,"module",n.module.id,n.courseId);e(t,21,0,t.context.$implicit.userfullname);e(t,26,0,t.context.$implicit.userfullname);e(t,29,0,t.context.$implicit.groupname);e(t,33,0,"time")},function(e,t){e(t,2,0,t.context.$implicit.groupname,t.context.$implicit.timecreated==0-t.component.selectedDiscussion);e(t,32,0,x._44(t,33)._hidden);e(t,34,0,x._56(t,34,0,x._44(t,35).transform("core.notsent")))})}function P(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"core-icon",[["name","fa-map-pin"]],null,null,null,Ie.b,Ie.a)),x._30(1,704512,null,0,Re.a,[x.t,G.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"fa-map-pin")},null)}function O(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"core-icon",[["class","addon-forum-star"],["name","fa-star"]],null,null,null,Ie.b,Ie.a)),x._30(1,704512,null,0,Re.a,[x.t,G.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"fa-star")},null)}function E(e){return x._57(0,[(e()(),x._31(0,0,null,null,6,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showOptionsMenu(n,e.parent.context.$implicit)&&o}return o},z.b,z.a)),x._30(1,1097728,[[7,4]],0,$.a,[[8,""],G.a,x.t,x.V],{color:[0,"color"],clear:[1,"clear"]},null),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(-1,0,["\n                                "])),(e()(),x._31(4,0,null,0,1,"core-icon",[["name","more"]],null,null,null,Ie.b,Ie.a)),x._30(5,704512,null,0,Re.a,[x.t,G.a],{name:[0,"name"]},null),(e()(),x._55(-1,0,["\n                            "]))],function(e,t){e(t,1,0,"dark","");e(t,5,0,"more")},function(e,t){e(t,0,0,x._56(t,0,0,x._44(t,2).transform("core.displayoptions")))})}function C(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,J.b,J.a)),x._30(1,16384,null,0,Z.a,[],null,null),x._30(2,770048,null,0,ee.a,[te.a,ne.a,oe.a,re.a,ie.a,[2,le.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(e,t){e(t,2,0,t.parent.context.$implicit,t.component.courseId)},null)}function I(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),x._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.userfullname)})}function R(e){return x._57(0,[(e()(),x._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._31(1,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(2,147456,[[8,4]],0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(3,null,[" ",""]))],function(e,t){e(t,2,0,"people")},function(e,t){e(t,1,0,x._44(t,2)._hidden);e(t,3,0,t.parent.context.$implicit.groupname)})}function S(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),x._55(1,null,["",""])),x._49(2,1)],null,function(e,t){e(t,1,0,x._56(t,1,0,e(t,2,0,x._44(t.parent.parent.parent,1),t.parent.context.$implicit.timemodified)))})}function w(e){return x._57(0,[(e()(),x._31(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),x._55(1,null,["",""])),x._49(2,1)],null,function(e,t){e(t,1,0,x._56(t,1,0,e(t,2,0,x._44(t.parent.parent.parent,1),t.parent.context.$implicit.created)))})}function A(e){return x._57(0,[(e()(),x._31(0,0,null,null,4,"ion-badge",[["text-center",""]],[[1,"aria-label",0]],null,null,null,null)),x._30(1,16384,null,0,Se.a,[G.a,x.t,x.V],null,null),x._48(2,{$a:0}),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(4,null,["",""]))],null,function(e,t){e(t,0,0,x._56(t,0,0,x._44(t,3).transform("addon.mod_forum.unreadpostsnumber",e(t,2,0,t.parent.context.$implicit.numunread))));e(t,4,0,t.parent.context.$implicit.numunread)})}function D(e){return x._57(0,[(e()(),x._31(0,0,null,null,84,null,null,null,null,null,null,null)),(e()(),x._55(-1,null,["\n                    "])),(e()(),x._31(2,0,null,null,81,"a",[["class","addon-mod-forum-discussion item item-block"],["ion-item",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openDiscussion(e.context.$implicit)&&o}return o},ae.b,ae.a)),x._30(3,1097728,null,3,se.a,[ue.a,G.a,x.t,x.V,[2,ce.a]],null,null),x._52(335544320,6,{contentLabel:0}),x._52(603979776,7,{_buttons:1}),x._52(603979776,8,{_icons:1}),x._30(7,16384,null,0,de.a,[],null,null),(e()(),x._55(-1,2,["\n                        "])),(e()(),x._31(9,0,null,2,16,"div",[["class","addon-mod-forum-discussion-title"]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._31(11,0,null,null,10,"h2",[["text-wrap",""]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._26(16777216,null,null,1,null,P)),x._30(14,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._26(16777216,null,null,1,null,O)),x._30(17,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._31(19,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),x._30(20,540672,null,0,fe.a,[x.t,ne.a,pe.a,he.a,L.a,me.a,oe.a,_e.a,ge.a,ve.a,re.a,ye.a,[2,te.a],[2,be.a],[2,le.a],Pe.a,ie.a,Oe.a,Ee.a,Ce.a,x._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._26(16777216,null,null,1,null,E)),x._30(24,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                        "])),(e()(),x._55(-1,2,["\n                        "])),(e()(),x._31(27,0,null,2,17,"div",[["class","addon-mod-forum-discussion-info"]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._26(16777216,null,null,1,null,C)),x._30(30,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._31(32,0,null,null,11,"div",[["class","addon-mod-forum-discussion-author"]],null,null,null,null,null)),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._26(16777216,null,null,1,null,I)),x._30(35,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._26(16777216,null,null,1,null,R)),x._30(38,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._31(40,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),x._55(41,null,["",""])),x._49(42,2),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._55(-1,null,["\n                        "])),(e()(),x._55(-1,2,["\n                        "])),(e()(),x._31(46,0,null,2,36,"ion-row",[["class","addon-mod-forum-discussion-more-info row"],["text-center",""]],null,null,null,null,null)),x._30(47,16384,null,0,Q.a,[],null,null),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._31(49,0,null,null,16,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),x._30(50,16384,null,0,Y.a,[],null,null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._31(52,0,null,null,12,"ion-note",[],null,null,null,null,null)),x._30(53,16384,null,0,we.a,[G.a,x.t,x.V],null,null),(e()(),x._55(-1,null,["\n                                    "])),(e()(),x._31(55,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(56,147456,null,0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(57,null,[" ","\n                                    "])),x._47(131072,F.a,[L.a,x.j]),(e()(),x._26(16777216,null,null,1,null,S)),x._30(60,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                    "])),(e()(),x._26(16777216,null,null,1,null,w)),x._30(63,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._31(67,0,null,null,14,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),x._30(68,16384,null,0,Y.a,[],null,null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._31(70,0,null,null,10,"ion-note",[],null,null,null,null,null)),x._30(71,16384,null,0,we.a,[G.a,x.t,x.V],null,null),(e()(),x._55(-1,null,["\n                                    "])),(e()(),x._31(73,0,null,null,1,"ion-icon",[["name","chatboxes"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(74,147456,null,0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(75,null,[" ","\n                                    "])),x._48(76,{numreplies:0}),x._47(131072,F.a,[L.a,x.j]),(e()(),x._26(16777216,null,null,1,null,A)),x._30(79,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n                                "])),(e()(),x._55(-1,null,["\n                            "])),(e()(),x._55(-1,null,["\n                        "])),(e()(),x._55(-1,2,["\n                    "])),(e()(),x._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,14,0,t.context.$implicit.pinned);e(t,17,0,!t.context.$implicit.pinned&&t.context.$implicit.starred);e(t,20,0,t.context.$implicit.subject,"module",n.module.id,n.courseId);e(t,24,0,n.canPin||t.context.$implicit.canlock||t.context.$implicit.canfavourite);e(t,30,0,t.context.$implicit.userfullname);e(t,35,0,t.context.$implicit.userfullname);e(t,38,0,t.context.$implicit.groupname);e(t,56,0,"time");e(t,60,0,t.context.$implicit.timemodified>t.context.$implicit.created);e(t,63,0,t.context.$implicit.timemodified<=t.context.$implicit.created);e(t,74,0,"chatboxes");e(t,79,0,t.context.$implicit.numunread)},function(e,t){e(t,2,0,t.context.$implicit.discussion==t.component.selectedDiscussion);e(t,41,0,x._56(t,41,0,e(t,42,0,x._44(t.parent.parent,0),1e3*t.context.$implicit.created,"strftimerecentfull")));e(t,55,0,x._44(t,56)._hidden);e(t,57,0,x._56(t,57,0,x._44(t,58).transform("addon.mod_forum.lastpost")));e(t,73,0,x._44(t,74)._hidden);e(t,75,0,x._56(t,75,0,x._44(t,77).transform("addon.mod_forum.numreplies",e(t,76,0,t.context.$implicit.numreplies))))})}function j(e){return x._57(0,[(e()(),x._31(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),x._55(-1,null,["\n                "])),(e()(),x._26(16777216,null,null,1,null,h)),x._30(3,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n\n                "])),(e()(),x._26(16777216,null,null,1,null,_)),x._30(6,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,null,["\n\n                "])),(e()(),x._26(16777216,null,null,1,null,b)),x._30(9,802816,null,0,X.j,[x._11,x._6,x.E],{ngForOf:[0,"ngForOf"]},null),(e()(),x._55(-1,null,["\n                "])),(e()(),x._26(16777216,null,null,1,null,D)),x._30(12,802816,null,0,X.j,[x._11,x._6,x.E],{ngForOf:[0,"ngForOf"]},null),(e()(),x._55(-1,null,["\n\n                "])),(e()(),x._31(14,0,null,null,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.fetchMoreDiscussions(n)&&o}return o},Ae.b,Ae.a)),x._30(15,573440,null,0,De.a,[[2,be.a],pe.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),x._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,3,0,0==n.discussions.length&&0==n.offlineDiscussions.length);e(t,6,0,n.discussions.length>0&&n.sortingAvailable&&n.selectedSortOrder);e(t,9,0,n.offlineDiscussions);e(t,12,0,n.discussions);e(t,15,0,n.canLoadMore,n.loadMoreError)},null)}function k(e){return x._57(0,[(e()(),x._31(0,0,null,null,12,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,je.b,je.a)),x._30(1,1228800,null,2,ke.a,[me.a],null,null),x._52(335544320,9,{_mainButton:0}),x._52(603979776,10,{_fabLists:1}),x._30(4,212992,null,0,Te.a,[x.t,be.a],null,null),(e()(),x._55(-1,0,["\n            "])),(e()(),x._31(6,0,null,0,5,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openNewDiscussion()&&o}return o},xe.b,xe.a)),x._30(7,49152,[[9,4]],0,Me.a,[G.a,x.t,x.V],null,null),(e()(),x._55(-1,0,["\n                "])),(e()(),x._31(9,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._30(10,147456,null,0,V.a,[G.a,x.t,x.V],{name:[0,"name"]},null),(e()(),x._55(-1,0,["\n            "])),(e()(),x._55(-1,0,["\n        "]))],function(e,t){e(t,4,0);e(t,10,0,"add")},function(e,t){e(t,6,0,t.component.addDiscussionText);e(t,9,0,x._44(t,10)._hidden)})}function T(e){return x._57(0,[x._47(0,Ne.a,[ge.a,Ue.a]),x._47(0,Fe.a,[ge.a,L.a]),x._52(402653184,1,{splitviewCtrl:0}),(e()(),x._55(-1,null,["\n"])),(e()(),x._31(4,0,null,null,31,"core-navbar-buttons",[["end",""]],null,null,null,Le.b,Le.a)),x._30(5,245760,null,1,He.a,[x.t,ge.a,pe.a],null,null),x._52(603979776,2,{buttons:1}),(e()(),x._55(-1,0,["\n    "])),(e()(),x._31(8,0,null,0,26,"core-context-menu",[],null,null,null,Be.b,Be.a)),x._30(9,245760,null,0,U.a,[L.a,qe.a,x.t,pe.a,[2,Ge.a],oe.a],null,null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,o)),x._30(12,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,r)),x._30(15,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,i)),x._30(18,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,l)),x._30(21,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,a)),x._30(24,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,s)),x._30(27,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,u)),x._30(30,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._26(16777216,null,0,1,null,c)),x._30(33,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n    "])),(e()(),x._55(-1,0,["\n"])),(e()(),x._55(-1,null,["\n\n"])),(e()(),x._55(-1,null,["\n"])),(e()(),x._31(38,0,null,null,35,"core-split-view",[],null,null,null,Ve.b,Ve.a)),x._30(39,245760,[[1,4]],0,le.a,[[2,te.a],x.t,Ke.a,me.a,L.a],null,null),(e()(),x._55(-1,0,["\n    "])),(e()(),x._31(41,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,We.b,We.a)),x._30(42,4374528,null,0,be.a,[G.a,me.a,ze.a,x.t,x.V,$e.a,Ye.a,x.M,[2,Qe.a],[2,te.a]],null,null),(e()(),x._55(-1,1,["\n        "])),(e()(),x._31(44,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.doRefresh(n)&&o}return o},null,null)),x._30(45,212992,null,0,Xe.a,[me.a,be.a,x.M,Je.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),x._55(-1,null,["\n            "])),(e()(),x._31(47,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ze.b,Ze.a)),x._30(48,114688,null,0,et.a,[Xe.a,G.a],{pullingText:[0,"pullingText"]},null),x._47(131072,F.a,[L.a,x.j]),(e()(),x._55(-1,null,["\n        "])),(e()(),x._55(-1,1,["\n        "])),(e()(),x._31(52,0,null,1,16,"core-loading",[["class","core-loading-center"]],null,null,null,tt.b,tt.a)),x._30(53,638976,null,0,nt.a,[L.a,x.t,ie.a,oe.a],{hideUntil:[0,"hideUntil"]},null),(e()(),x._55(-1,0,["\n            "])),(e()(),x._26(16777216,null,0,1,null,d)),x._30(56,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n\n            "])),(e()(),x._55(-1,0,["\n            "])),(e()(),x._26(16777216,null,0,1,null,f)),x._30(60,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n\n            "])),(e()(),x._55(-1,0,["\n            "])),(e()(),x._26(16777216,null,0,1,null,p)),x._30(64,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n\n            "])),(e()(),x._26(16777216,null,0,1,null,j)),x._30(67,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,0,["\n        "])),(e()(),x._55(-1,1,["\n\n        "])),(e()(),x._26(16777216,null,0,1,null,k)),x._30(71,16384,null,0,X.k,[x._11,x._6],{ngIf:[0,"ngIf"]},null),(e()(),x._55(-1,1,["\n    "])),(e()(),x._55(-1,0,["\n"])),(e()(),x._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0),e(t,9,0);e(t,12,0,n.externalUrl);e(t,15,0,n.description);e(t,18,0,n.blog);e(t,21,0,n.loaded&&!(n.hasOffline||n.hasOfflineRatings)&&n.isOnline);e(t,24,0,n.loaded&&(n.hasOffline||n.hasOfflineRatings)&&n.isOnline);e(t,27,0,n.prefetchStatusIcon);e(t,30,0,n.size);e(t,33,0,n.sortingAvailable),e(t,39,0);e(t,45,0,n.loaded);e(t,48,0,x._34(1,"",x._56(t,48,0,x._44(t,49).transform("core.pulltorefresh")),""));e(t,53,0,n.loaded);e(t,56,0,n.forum&&"single"!=n.forum.type);e(t,60,0,n.hasOffline||n.hasOfflineRatings);e(t,64,0,n.availabilityMessage);e(t,67,0,n.forum);e(t,71,0,n.forum&&n.canAddDiscussion)},function(e,t){e(t,41,0,x._44(t,42).statusbarPadding,x._44(t,42)._hasRefresher);e(t,44,0,"inactive"!==x._44(t,45).state,x._44(t,45)._top);e(t,47,0,x._44(t,48).r.state)})}n.d(t,"b",function(){return ht}),t.c=T,n.d(t,"a",function(){return mt});var x=n(0),M=n(92),N=n(83),U=n(78),F=n(25),L=n(17),H=n(122),B=n(112),q=n(89),G=n(8),V=n(47),K=n(124),W=n(114),z=n(45),$=n(42),Y=n(120),Q=n(119),X=n(7),J=n(213),Z=n(160),ee=n(182),te=n(21),ne=n(1),oe=n(2),re=n(10),ie=n(9),le=n(28),ae=n(30),se=n(20),ue=n(19),ce=n(27),de=n(33),fe=n(48),pe=n(4),he=n(11),me=n(16),_e=n(22),ge=n(6),ve=n(18),ye=n(15),be=n(29),Pe=n(44),Oe=n(41),Ee=n(32),Ce=n(36),Ie=n(80),Re=n(75),Se=n(143),we=n(248),Ae=n(373),De=n(273),je=n(281),ke=n(218),Te=n(255),xe=n(282),Me=n(190),Ne=n(228),Ue=n(24),Fe=n(443),Le=n(96),He=n(87),Be=n(91),qe=n(70),Ge=n(76),Ve=n(474),Ke=n(72),We=n(181),ze=n(34),$e=n(35),Ye=n(107),Qe=n(39),Xe=n(159),Je=n(43),Ze=n(212),et=n(173),tt=n(54),nt=n(51),ot=n(506),rt=n(162),it=n(71),lt=n(46),at=n(135),st=n(280),ut=n(233),ct=n(254),dt=n(50),ft=n(402),pt=n(201),ht=x._29({encapsulation:2,styles:[],data:{}}),mt=x._27("addon-mod-forum-index",ot.a,function(e){return x._57(0,[(e()(),x._31(0,0,null,null,1,"addon-mod-forum-index",[],null,null,null,T,ht)),x._30(1,245760,null,0,ot.a,[x.C,[2,be.a],rt.a,it.a,lt.a,at.a,st.a,ut.a,ct.a,dt.a,ft.a,pt.a,qe.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,te._34(1,"",te._56(t,1,0,te._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},ne.b,ne.a)),te._30(1,770048,null,0,oe.a,[re.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),te._48(2,{$a:0}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){var n=t.component;e(t,1,0,te._56(t,1,0,te._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"ion-icon",[["item-start",""],["name","radio-button-off"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(1,147456,[[7,4]],0,ae.a,[se.a,te.t,te.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"radio-button-off")},function(e,t){e(t,0,0,te._44(t,1)._hidden)})}function d(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"ion-icon",[["color","danger"],["item-start",""],["name","close-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(1,147456,[[7,4]],0,ae.a,[se.a,te.t,te.V],{color:[0,"color"],name:[1,"name"]},null)],function(e,t){e(t,1,0,"danger","close-circle")},function(e,t){e(t,0,0,te._44(t,1)._hidden)})}function f(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"ion-icon",[["color","info"],["item-start",""],["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(1,147456,[[7,4]],0,ae.a,[se.a,te.t,te.V],{color:[0,"color"],name:[1,"name"]},null)],function(e,t){e(t,1,0,"info","information-circle")},function(e,t){e(t,0,0,te._44(t,1)._hidden)})}function p(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"ion-icon",[["color","success"],["item-start",""],["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(1,147456,[[7,4]],0,ae.a,[se.a,te.t,te.V],{color:[0,"color"],name:[1,"name"]},null)],function(e,t){e(t,1,0,"success","checkmark-circle")},function(e,t){e(t,0,0,te._44(t,1)._hidden)})}function h(e){return te._57(0,[(e()(),te._31(0,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,t){e(t,0,0,t.parent.context.$implicit.details)})}function m(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"ion-icon",[["item-end",""],["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(1,147456,[[7,4]],0,ae.a,[se.a,te.t,te.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"open")},function(e,t){e(t,0,0,te._44(t,1)._hidden)})}function _(e){return te._57(0,[(e()(),te._31(0,0,null,null,27,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[2,"item-dimmed",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.runTask(e.context.$implicit)&&o}return o},ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,5,{contentLabel:0}),te._52(603979776,6,{_buttons:1}),te._52(603979776,7,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,0,1,null,c)),te._30(8,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,0,1,null,d)),te._30(11,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,0,1,null,f)),te._30(14,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,0,1,null,p)),te._30(17,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n\n                "])),(e()(),te._31(19,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),te._55(20,null,["",""])),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,2,1,null,h)),te._30(23,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,4,1,null,m)),te._30(26,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n            "]))],function(e,t){e(t,8,0,null==t.context.$implicit.completed);e(t,11,0,""==t.context.$implicit.completed);e(t,14,0,"info"==t.context.$implicit.completed);e(t,17,0,"1"==t.context.$implicit.completed);e(t,23,0,t.context.$implicit.details);e(t,26,0,t.context.$implicit.link&&"submit"!=t.context.$implicit.code)},function(e,t){e(t,0,0,"submit"==t.context.$implicit.code&&!t.component.showSubmit);e(t,20,0,t.context.$implicit.title)})}function g(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,_)),te._30(3,802816,null,0,he.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,n.phases[n.workshop.phase].tasks)},null)}function v(e){return te._57(0,[(e()(),te._31(0,0,null,null,16,"ion-card",[["class","with-borders"]],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n        "])),(e()(),te._31(3,0,null,null,9,"a",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.viewPhaseInfo()&&o}return o},ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,2,{contentLabel:0}),te._52(603979776,3,{_buttons:1}),te._52(603979776,4,{_icons:1}),te._30(8,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(10,0,null,2,1,"h2",[["stacked",""],["text-wrap",""]],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),(e()(),te._55(-1,2,["\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,g)),te._30(15,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,15,0,n.phases&&n.phases[n.workshop.phase]&&n.phases[n.workshop.phase].tasks&&n.phases[n.workshop.phase].tasks.length)},function(e,t){var n=t.component;e(t,11,0,n.phases[n.workshop.phase].title)})}function y(e){return te._57(0,[(e()(),te._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),te._55(-1,null,["\n        "])),(e()(),te._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(3,147456,null,0,ae.a,[se.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(4,null,["\n        ","\n    "])),te._48(5,{$a:0}),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,te._44(t,3)._hidden);e(t,4,0,te._56(t,4,0,te._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function b(e){return te._57(0,[(e()(),te._31(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n        "])),(e()(),te._31(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,8,{contentLabel:0}),te._52(603979776,9,{_buttons:1}),te._52(603979776,10,{_icons:1}),te._30(8,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n            "])),(e()(),te._31(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),te._30(15,540672,null,0,_e.a,[te.t,ge.a,ve.a,ye.a,le.a,be.a,Pe.a,Oe.a,Ee.a,Ce.a,Ie.a,Re.a,[2,Se.a],[2,we.a],[2,Ae.a],De.a,je.a,ke.a,Te.a,xe.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),te._55(-1,2,["\n        "])),(e()(),te._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,15,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("core.description")))})}function P(e){return te._57(0,[(e()(),te._31(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,11,{contentLabel:0}),te._52(603979776,12,{_buttons:1}),te._52(603979776,13,{_icons:1}),te._30(8,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"],["fullOnClick","true"]],null,null,null,null,null)),te._30(15,540672,null,0,_e.a,[te.t,ge.a,ve.a,ye.a,le.a,be.a,Pe.a,Oe.a,Ee.a,Ce.a,Ie.a,Re.a,[2,Se.a],[2,we.a],[2,Ae.a],De.a,je.a,ke.a,Te.a,xe.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,15,0,n.workshop.conclusion,n.component,n.module.id,"true","module",n.module.id,n.courseId)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("addon.mod_workshop.conclusion")))})}function O(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,17,{contentLabel:0}),te._52(603979776,18,{_buttons:1}),te._52(603979776,19,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(10,2,["\n                    ","\n                "]))],null,function(e,t){var n=t.component;e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_workshop.submissiongrade")));e(t,10,0,n.userGrades.submissionlongstrgrade)})}function E(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,20,{contentLabel:0}),te._52(603979776,21,{_buttons:1}),te._52(603979776,22,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(10,2,["\n                    ","\n                "]))],null,function(e,t){var n=t.component;e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_workshop.gradinggrade")));e(t,10,0,n.userGrades.assessmentlongstrgrade)})}function C(e){return te._57(0,[(e()(),te._31(0,0,null,null,20,"ion-card",[["class","with-borders"]],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,14,{contentLabel:0}),te._52(603979776,15,{_buttons:1}),te._52(603979776,16,{_icons:1}),te._30(8,16384,null,0,Me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,O)),te._30(16,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,E)),te._30(19,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,16,0,n.userGrades.submissionlongstrgrade);e(t,19,0,n.userGrades.assessmentlongstrgrade)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("addon.mod_workshop.yourgrades")))})}function I(e){return te._57(0,[(e()(),te._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,P)),te._30(3,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n            "])),(e()(),te._26(16777216,null,null,1,null,C)),te._30(6,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,n.workshop.conclusion);e(t,6,0,n.userGrades)},null)}function R(e){return te._57(0,[(e()(),te._31(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._31(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,23,{contentLabel:0}),te._52(603979776,24,{_buttons:1}),te._52(603979776,25,{_icons:1}),te._30(8,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"],["fullOnClick","true"]],null,null,null,null,null)),te._30(15,540672,null,0,_e.a,[te.t,ge.a,ve.a,ye.a,le.a,be.a,Pe.a,Oe.a,Ee.a,Ce.a,Ie.a,Re.a,[2,Se.a],[2,we.a],[2,Ae.a],De.a,je.a,ke.a,Te.a,xe.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),te._55(-1,2,["\n            "])),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,15,0,n.workshop.instructauthors,n.component,n.module.id,"true","module",n.module.id,n.courseId)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("addon.mod_workshop.areainstructauthors")))})}function S(e){return te._57(0,[(e()(),te._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,26,{contentLabel:0}),te._52(603979776,27,{_buttons:1}),te._52(603979776,28,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),te._55(12,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n            "]))],null,function(e,t){e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_workshop.yoursubmission")));e(t,12,0,te._56(t,12,0,te._44(t,13).transform("addon.mod_workshop.noyoursubmission")))})}function w(e){return te._57(0,[(e()(),te._31(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(2,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(3,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,29,{contentLabel:0}),te._52(603979776,30,{_buttons:1}),te._52(603979776,31,{_icons:1}),te._30(7,16384,null,0,Me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(9,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(10,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(14,0,null,null,1,"addon-mod-workshop-submission",[],null,null,null,Ne.b,Ne.a)),te._30(15,114688,null,0,Ue.a,[Fe.a,Le.a,Se.a,He.a,ge.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"]},null),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,15,0,n.submission,n.module,n.workshop,n.access,n.workshop.course)},function(e,t){e(t,10,0,te._56(t,10,0,te._44(t,11).transform("addon.mod_workshop.yoursubmission")))})}function A(e){return te._57(0,[(e()(),te._31(0,0,null,null,8,"ion-card",[],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,S)),te._30(4,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n            "])),(e()(),te._26(16777216,null,null,1,null,w)),te._30(7,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,4,0,!n.submission);e(t,7,0,n.submission)},null)}function D(e){return te._57(0,[(e()(),te._31(0,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoSubmit()&&o}return o},Be.b,Be.a)),te._30(1,1097728,[[33,4]],0,qe.a,[[8,""],se.a,te.t,te.V],{block:[0,"block"]},null),(e()(),te._55(-1,0,["\n                    "])),(e()(),te._31(3,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(4,147456,null,0,ae.a,[se.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(5,0,["\n                    ","\n                "])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,"");e(t,4,0,"add")},function(e,t){e(t,3,0,te._44(t,4)._hidden);e(t,5,0,te._56(t,5,0,te._44(t,6).transform("addon.mod_workshop.createsubmission")))})}function j(e){return te._57(0,[(e()(),te._31(0,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoSubmit()&&o}return o},Be.b,Be.a)),te._30(1,1097728,[[33,4]],0,qe.a,[[8,""],se.a,te.t,te.V],{block:[0,"block"]},null),(e()(),te._55(-1,0,["\n                    "])),(e()(),te._31(3,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(4,147456,null,0,ae.a,[se.a,te.t,te.V],{name:[0,"name"]},null),(e()(),te._55(5,0,["\n                    ","\n                "])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,"");e(t,4,0,"create")},function(e,t){e(t,3,0,te._44(t,4)._hidden);e(t,5,0,te._56(t,5,0,te._44(t,6).transform("addon.mod_workshop.editsubmission")))})}function k(e){return te._57(0,[(e()(),te._31(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,32,{contentLabel:0}),te._52(603979776,33,{_buttons:1}),te._52(603979776,34,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,2,1,null,D)),te._30(8,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,2,1,null,j)),te._30(11,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,8,0,n.access.creatingsubmissionallowed&&!n.submission);e(t,11,0,n.access.modifyingsubmissionallowed&&n.submission)},null)}function T(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,k)),te._30(3,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,t.component.showSubmit)},null)}function x(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._31(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,Ne.b,Ne.a)),te._30(3,114688,null,0,Ue.a,[Fe.a,Le.a,Se.a,He.a,ge.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],summary:[5,"summary"]},null),(e()(),te._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,t.context.$implicit,n.module,n.workshop,n.access,n.workshop.course,"true")},null)}function M(e){return te._57(0,[(e()(),te._31(0,0,null,null,17,"ion-card",[["class","with-borders"]],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,35,{contentLabel:0}),te._52(603979776,36,{_buttons:1}),te._52(603979776,37,{_icons:1}),te._30(8,16384,null,0,Me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,x)),te._30(16,802816,null,0,he.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n            "]))],function(e,t){e(t,16,0,t.component.publishedSubmissions)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("addon.mod_workshop.publishedsubmissions")))})}function N(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,M)),te._30(3,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,n.publishedSubmissions&&n.publishedSubmissions.length)},null)}function U(e){return te._57(0,[(e()(),te._31(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,38,{contentLabel:0}),te._52(603979776,39,{_buttons:1}),te._52(603979776,40,{_icons:1}),te._30(8,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"],["fullOnClick","true"]],null,null,null,null,null)),te._30(15,540672,null,0,_e.a,[te.t,ge.a,ve.a,ye.a,le.a,be.a,Pe.a,Oe.a,Ee.a,Ce.a,Ie.a,Re.a,[2,Se.a],[2,we.a],[2,Ae.a],De.a,je.a,ke.a,Te.a,xe.a,te._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,15,0,n.workshop.instructreviewers,n.component,n.module.id,"true","module",n.module.id,n.courseId)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("addon.mod_workshop.areainstructreviewers")))})}function F(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,44,{contentLabel:0}),te._52(603979776,45,{_buttons:1}),te._52(603979776,46,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "]))],null,function(e,t){e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_workshop.assignedassessmentsnone")))})}function L(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._31(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,Ne.b,Ne.a)),te._30(3,114688,null,0,Ue.a,[Fe.a,Le.a,Se.a,He.a,ge.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],assessment:[5,"assessment"],summary:[6,"summary"]},null),(e()(),te._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,t.context.$implicit.submission,n.module,n.workshop,n.access,n.workshop.course,t.context.$implicit,"true")},null)}function H(e){return te._57(0,[(e()(),te._31(0,0,null,null,20,"ion-card",[["class","with-borders"]],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(4,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,41,{contentLabel:0}),te._52(603979776,42,{_buttons:1}),te._52(603979776,43,{_icons:1}),te._30(8,16384,null,0,Me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,2,["\n                    "])),(e()(),te._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(11,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n                "])),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,F)),te._30(16,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._26(16777216,null,null,1,null,L)),te._30(19,802816,null,0,he.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,16,0,!n.assessments||!n.assessments.length);e(t,19,0,n.assessments||te._23)},function(e,t){e(t,11,0,te._56(t,11,0,te._44(t,12).transform("addon.mod_workshop.assignedassessments")))})}function B(e){return te._57(0,[(e()(),te._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,U)),te._30(3,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n            "])),(e()(),te._26(16777216,null,null,1,null,H)),te._30(6,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,n.workshop.phase==n.workshopPhases.PHASE_ASSESSMENT&&n.workshop.instructreviewers);e(t,6,0,n.canAssess)},null)}function q(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,47,{contentLabel:0}),te._52(603979776,48,{_buttons:1}),te._52(603979776,49,{_icons:1}),te._30(5,16384,null,0,Me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n            "]))],null,function(e,t){e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_workshop.submissionsreport")))})}function G(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(335544320,50,{contentLabel:0}),te._52(603979776,51,{_buttons:1}),te._52(603979776,52,{_icons:1}),te._30(5,16384,null,0,Me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),te._55(8,null,["",""])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,2,["\n            "]))],null,function(e,t){e(t,8,0,te._56(t,8,0,te._44(t,9).transform("addon.mod_workshop.gradesreport")))})}function V(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"ion-label",[["id","addon-workshop-groupslabel"]],null,null,null,null,null)),te._30(1,16384,[[53,4]],0,Ge.a,[se.a,te.t,te.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),te._55(2,null,["",""])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,"addon-workshop-groupslabel")},function(e,t){e(t,2,0,te._56(t,2,0,te._44(t,3).transform("core.groupsseparate")))})}function K(e){return te._57(0,[(e()(),te._31(0,0,null,null,3,"ion-label",[["id","addon-workshop-groupslabel"]],null,null,null,null,null)),te._30(1,16384,[[53,4]],0,Ge.a,[se.a,te.t,te.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),te._55(2,null,["",""])),te._47(131072,ie.a,[le.a,te.j])],function(e,t){e(t,1,0,"addon-workshop-groupslabel")},function(e,t){e(t,2,0,te._56(t,2,0,te._44(t,3).transform("core.groupsvisible")))})}function W(e){return te._57(0,[(e()(),te._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),te._30(1,16384,[[56,4]],0,Ve.a,[te.t],{value:[0,"value"]},null),(e()(),te._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.id)},function(e,t){e(t,2,0,t.context.$implicit.name)})}function z(e){return te._57(0,[(e()(),te._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ue.b,ue.a)),te._30(1,1097728,null,3,ce.a,[de.a,se.a,te.t,te.V,[2,fe.a]],null,null),te._52(603979776,53,{contentLabel:0}),te._52(603979776,54,{_buttons:1}),te._52(603979776,55,{_icons:1}),te._30(5,16384,null,0,pe.a,[],null,null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,1,1,null,V)),te._30(8,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._26(16777216,null,1,1,null,K)),te._30(11,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,2,["\n                "])),(e()(),te._31(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-workshop-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==te._44(e,14)._click(n)&&o}if("keyup.space"===t){o=!1!==te._44(e,14)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.group=n)&&o}if("ionChange"===t){o=!1!==r.setGroup(r.group)&&o}return o},Ke.b,Ke.a)),te._30(14,1228800,null,1,We.a,[ze.a,de.a,se.a,te.t,te.V,[2,ce.a],$e.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),te._52(603979776,56,{options:1}),te._50(1024,null,Ye.l,function(e){return[e]},[We.a]),te._30(17,671744,null,0,Ye.q,[[8,null],[8,null],[8,null],[2,Ye.l]],{model:[0,"model"]},{update:"ngModelChange"}),te._50(2048,null,Ye.m,null,[Ye.q]),te._30(19,16384,null,0,Ye.n,[Ye.m],null,null),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._26(16777216,null,null,1,null,W)),te._30(22,802816,null,0,he.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,8,0,n.groupInfo.separateGroups);e(t,11,0,n.groupInfo.visibleGroups);e(t,14,0,"action-sheet");e(t,17,0,n.group);e(t,22,0,n.groupInfo.groups)},function(e,t){e(t,13,0,te._44(t,14)._disabled,te._44(t,19).ngClassUntouched,te._44(t,19).ngClassTouched,te._44(t,19).ngClassPristine,te._44(t,19).ngClassDirty,te._44(t,19).ngClassValid,te._44(t,19).ngClassInvalid,te._44(t,19).ngClassPending)})}function $(e){return te._57(0,[(e()(),te._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,Ne.b,Ne.a)),te._30(3,114688,null,0,Ue.a,[Fe.a,Le.a,Se.a,He.a,ge.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],summary:[5,"summary"]},null),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,3,0,t.context.$implicit,n.module,n.workshop,n.access,n.workshop.course,"true")},null)}function Y(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),te._30(1,16384,null,0,Qe.a,[],null,null),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._31(3,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.gotoSubmissionsPage(r.page-1)&&o}return o},Be.b,Be.a)),te._30(4,1097728,null,0,qe.a,[[8,""],se.a,te.t,te.V],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),te._55(-1,0,["\n                            "])),(e()(),te._31(6,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(7,147456,null,0,ae.a,[se.a,te.t,te.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),te._55(8,0,["\n                            ","\n                        "])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._55(-1,null,["\n                    "]))],function(e,t){e(t,4,0,"","");e(t,7,0,"arrow-back","ios-arrow-back")},function(e,t){e(t,6,0,te._44(t,7)._hidden);e(t,8,0,te._56(t,8,0,te._44(t,9).transform("core.previous")))})}function Q(e){return te._57(0,[(e()(),te._31(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),te._30(1,16384,null,0,Qe.a,[],null,null),(e()(),te._55(-1,null,["\n                        "])),(e()(),te._31(3,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.gotoSubmissionsPage(r.page+1)&&o}return o},Be.b,Be.a)),te._30(4,1097728,null,0,qe.a,[[8,""],se.a,te.t,te.V],{block:[0,"block"]},null),(e()(),te._55(5,0,["\n                            ","\n                            "])),te._47(131072,ie.a,[le.a,te.j]),(e()(),te._31(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),te._30(8,147456,null,0,ae.a,[se.a,te.t,te.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),te._55(-1,0,["\n                        "])),(e()(),te._55(-1,null,["\n                    "]))],function(e,t){e(t,4,0,"");e(t,8,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,5,0,te._56(t,5,0,te._44(t,6).transform("core.next")));e(t,7,0,te._44(t,8)._hidden)})}function X(e){return te._57(0,[(e()(),te._31(0,0,null,null,12,"ion-grid",[["class","grid"]],null,null,null,null,null)),te._30(1,16384,null,0,Xe.a,[],null,null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._31(3,0,null,null,8,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),te._30(4,16384,null,0,Je.a,[],null,null),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._26(16777216,null,null,1,null,Y)),te._30(7,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                    "])),(e()(),te._26(16777216,null,null,1,null,Q)),te._30(10,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n                "])),(e()(),te._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,7,0,n.page>0);e(t,10,0,n.hasNextPage)},null)}function J(e){return te._57(0,[(e()(),te._31(0,0,null,null,17,"ion-card",[["class","with-borders"]],null,null,null,null,null)),te._30(1,16384,null,0,me.a,[se.a,te.t,te.V],null,null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,q)),te._30(4,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n           "])),(e()(),te._26(16777216,null,null,1,null,G)),te._30(7,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n            "])),(e()(),te._26(16777216,null,null,1,null,z)),te._30(10,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n            "])),(e()(),te._26(16777216,null,null,1,null,$)),te._30(13,802816,null,0,he.j,[te._11,te._6,te.E],{ngForOf:[0,"ngForOf"]},null),(e()(),te._55(-1,null,["\n\n            "])),(e()(),te._26(16777216,null,null,1,null,X)),te._30(16,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,4,0,n.workshop.phase==n.workshopPhases.PHASE_SUBMISSION);e(t,7,0,n.workshop.phase>n.workshopPhases.PHASE_SUBMISSION);e(t,10,0,n.groupInfo&&(n.groupInfo.separateGroups||n.groupInfo.visibleGroups));e(t,13,0,n.grades);e(t,16,0,n.page>0||n.hasNextPage)},null)}function Z(e){return te._57(0,[(e()(),te._31(0,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),te._55(-1,null,["\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,I)),te._30(4,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,R)),te._30(8,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n        "])),(e()(),te._26(16777216,null,null,1,null,A)),te._30(11,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,T)),te._30(15,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n        "])),(e()(),te._26(16777216,null,null,1,null,N)),te._30(18,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,B)),te._30(22,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n\n        "])),(e()(),te._55(-1,null,["\n        "])),(e()(),te._26(16777216,null,null,1,null,J)),te._30(26,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,n.workshop.phase>=n.workshopPhases.PHASE_CLOSED);e(t,8,0,n.workshop.phase==n.workshopPhases.PHASE_SUBMISSION&&n.workshop.instructauthors);e(t,11,0,n.canSubmit);e(t,15,0,n.workshop.phase==n.workshopPhases.PHASE_SUBMISSION);e(t,18,0,n.workshop.phase>=n.workshopPhases.PHASE_CLOSED);e(t,22,0,n.workshop.phase>=n.workshopPhases.PHASE_ASSESSMENT);e(t,26,0,n.access.canviewallsubmissions&&n.workshop.phase>=n.workshopPhases.PHASE_SUBMISSION&&(n.grades&&n.grades.length||n.groupInfo&&(n.groupInfo.separateGroups||n.groupInfo.visibleGroups)))},null)}function ee(e){return te._57(0,[(e()(),te._55(-1,null,["\n"])),(e()(),te._31(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,Ze.b,Ze.a)),te._30(2,245760,null,1,et.a,[te.t,Ee.a,ve.a],null,null),te._52(603979776,1,{buttons:1}),(e()(),te._55(-1,0,["\n    "])),(e()(),te._31(5,0,null,0,23,"core-context-menu",[],null,null,null,tt.b,tt.a)),te._30(6,245760,null,0,re.a,[le.a,nt.a,te.t,ve.a,[2,ot.a],Pe.a],null,null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,o)),te._30(9,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,r)),te._30(12,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,i)),te._30(15,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,l)),te._30(18,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,a)),te._30(21,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,s)),te._30(24,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n        "])),(e()(),te._26(16777216,null,0,1,null,u)),te._30(27,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n    "])),(e()(),te._55(-1,0,["\n"])),(e()(),te._55(-1,null,["\n\n"])),(e()(),te._55(-1,null,["\n"])),(e()(),te._31(32,0,null,null,16,"core-loading",[["class","core-loading-center"]],null,null,null,rt.b,rt.a)),te._30(33,638976,null,0,it.a,[le.a,te.t,je.a,Pe.a],{hideUntil:[0,"hideUntil"]},null),(e()(),te._55(-1,0,["\n    "])),(e()(),te._26(16777216,null,0,1,null,v)),te._30(36,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n    "])),(e()(),te._55(-1,0,["\n    "])),(e()(),te._26(16777216,null,0,1,null,y)),te._30(40,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n    "])),(e()(),te._55(-1,0,["\n    "])),(e()(),te._26(16777216,null,0,1,null,b)),te._30(44,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n\n    "])),(e()(),te._26(16777216,null,0,1,null,Z)),te._30(47,16384,null,0,he.k,[te._11,te._6],{ngIf:[0,"ngIf"]},null),(e()(),te._55(-1,0,["\n"])),(e()(),te._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,21,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,24,0,n.prefetchStatusIcon);e(t,27,0,n.size);e(t,33,0,n.loaded);e(t,36,0,n.phases);e(t,40,0,n.hasOffline);e(t,44,0,n.description&&n.workshop&&n.workshop.phase==n.workshopPhases.PHASE_SETUP);e(t,47,0,n.access&&n.workshop&&n.workshop.phase>=n.workshopPhases.PHASE_SUBMISSION)},null)}n.d(t,"b",function(){return dt}),t.c=ee,n.d(t,"a",function(){return ft});var te=n(0),ne=n(92),oe=n(83),re=n(78),ie=n(25),le=n(17),ae=n(47),se=n(8),ue=n(30),ce=n(20),de=n(19),fe=n(27),pe=n(33),he=n(7),me=n(89),_e=n(48),ge=n(1),ve=n(4),ye=n(11),be=n(16),Pe=n(2),Oe=n(22),Ee=n(6),Ce=n(18),Ie=n(10),Re=n(15),Se=n(21),we=n(29),Ae=n(28),De=n(44),je=n(9),ke=n(41),Te=n(32),xe=n(36),Me=n(100),Ne=n(1623),Ue=n(528),Fe=n(189),Le=n(202),He=n(46),Be=n(45),qe=n(42),Ge=n(67),Ve=n(108),Ke=n(123),We=n(109),ze=n(35),$e=n(59),Ye=n(23),Qe=n(120),Xe=n(164),Je=n(119),Ze=n(96),et=n(87),tt=n(91),nt=n(70),ot=n(76),rt=n(54),it=n(51),lt=n(519),at=n(175),st=n(71),ut=n(162),ct=n(291),dt=te._29({encapsulation:2,styles:[],data:{}}),ft=te._27("addon-mod-workshop-index",lt.a,function(e){return te._57(0,[(e()(),te._31(0,0,null,null,1,"addon-mod-workshop-index",[],null,null,null,ee,dt)),te._30(1,245760,null,0,lt.a,[te.C,at.a,[2,we.a],Fe.a,st.a,Se.a,ut.a,Pe.a,be.a,Le.a,ct.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return h._57(0,[(e()(),h._31(0,0,null,null,3,"core-empty-box",[["icon","stats"]],null,null,null,m.b,m.a)),h._30(1,49152,null,0,_.a,[],{message:[0,"message"],icon:[1,"icon"]},null),h._47(131072,g.a,[v.a,h.j]),(e()(),h._55(-1,0,["\n        "]))],function(e,t){e(t,1,0,h._56(t,1,0,h._44(t,2).transform("core.grades.nogradesreturned")),"stats")},null)}function r(e){return h._57(0,[(e()(),h._31(0,0,null,null,2,"th",[["text-start",""]],[[8,"id",0],[2,"hidden-phone",null],[1,"colspan",0]],null,null,null,null)),(e()(),h._55(1,null,["\n                            ","\n                        "])),h._47(131072,g.a,[v.a,h.j])],null,function(e,t){e(t,0,0,h._34(1,"",t.context.$implicit.name,""),t.context.$implicit.hiddenPhone,t.context.$implicit.colspan);e(t,1,0,h._56(t,1,0,h._44(t,2).transform("core.grades."+t.context.$implicit.name)))})}function i(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"td",[["class","core-grades-table-category"]],[[1,"rowspan",0]],null,null,null,null)),(e()(),h._55(-1,null,["\n                            "]))],null,function(e,t){e(t,0,0,t.parent.parent.context.$implicit.rowspan)})}function l(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,y.b,y.a)),h._30(1,704512,null,0,b.a,[h.t,P.a],{name:[0,"name"]},null)],function(e,t){e(t,1,0,h._34(1,"",t.parent.parent.context.$implicit.icon,""))},null)}function a(e){return h._57(0,[(e()(),h._31(0,0,null,null,0,"img",[["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,0,0,t.parent.parent.context.$implicit.image)})}function s(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"td",[["text-start",""]],[[8,"className",0],[8,"innerHTML",1],[2,"hidden-phone",null]],null,null,null,null)),(e()(),h._55(-1,null,["\n                                "]))],null,function(e,t){e(t,0,0,"core-grades-table-"+t.parent.context.$implicit.name,t.parent.parent.parent.context.$implicit[t.parent.context.$implicit.name],t.parent.context.$implicit.hiddenPhone)})}function u(e){return h._57(0,[(e()(),h._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),h._55(-1,null,["\n                                "])),(e()(),h._26(16777216,null,null,1,null,s)),h._30(3,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                            "]))],function(e,t){e(t,3,0,"gradeitem"!=t.context.$implicit.name&&void 0!=t.parent.parent.context.$implicit[t.context.$implicit.name])},null)}function c(e){return h._57(0,[(e()(),h._31(0,0,null,null,18,null,null,null,null,null,null,null)),(e()(),h._55(-1,null,["\n                            "])),(e()(),h._26(16777216,null,null,1,null,i)),h._30(3,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                            "])),(e()(),h._31(5,0,null,null,9,"th",[["class","core-grades-table-gradeitem"],["text-start",""]],[[2,"column-itemname",null],[1,"colspan",0],[2,"core-split-item-selected",null]],null,null,null,null)),(e()(),h._55(-1,null,["\n                                "])),(e()(),h._26(16777216,null,null,1,null,l)),h._30(8,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                                "])),(e()(),h._26(16777216,null,null,1,null,a)),h._30(11,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                                "])),(e()(),h._31(13,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),h._55(-1,null,["\n                            "])),(e()(),h._55(-1,null,["\n                            "])),(e()(),h._26(16777216,null,null,1,null,u)),h._30(17,802816,null,0,O.j,[h._11,h._6,h.E],{ngForOf:[0,"ngForOf"]},null),(e()(),h._55(-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,3,0,"category"==t.parent.context.$implicit.itemtype);e(t,8,0,t.parent.context.$implicit.icon);e(t,11,0,t.parent.context.$implicit.image);e(t,17,0,n.gradesTable.columns)},function(e,t){e(t,5,0,"category"==t.parent.context.$implicit.itemtype,t.parent.context.$implicit.colspan,t.component.gradeId==t.parent.context.$implicit.id);e(t,13,0,t.parent.context.$implicit.gradeitem)})}function d(e){return h._57(0,[(e()(),h._31(0,0,null,null,6,"tr",[],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==("category"!=e.context.$implicit.itemtype&&e.component.gotoGrade(e.context.$implicit.id))&&o}return o},null,null)),h._30(1,278528,null,0,O.i,[h.E,h.F,h.t,h.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),h._48(2,{"core-grades-grade-clickable":0}),(e()(),h._55(-1,null,["\n                        "])),(e()(),h._26(16777216,null,null,1,null,c)),h._30(5,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                    "]))],function(e,t){e(t,1,0,t.context.$implicit.rowclass,e(t,2,0,"category"!=t.context.$implicit.itemtype));e(t,5,0,t.context.$implicit.itemtype)},null)}function f(e){return h._57(0,[(e()(),h._31(0,0,null,null,19,"div",[["class","core-grades-container"]],null,null,null,null,null)),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(2,0,null,null,16,"table",[["cellpadding","0"],["cellspacing","0"],["class","core-grades-table"]],null,null,null,null,null)),(e()(),h._55(-1,null,["\n                "])),(e()(),h._31(4,0,null,null,7,"thead",[],null,null,null,null,null)),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(6,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),h._55(-1,null,["\n                        "])),(e()(),h._26(16777216,null,null,1,null,r)),h._30(9,802816,null,0,O.j,[h._11,h._6,h.E],{ngForOf:[0,"ngForOf"]},null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._55(-1,null,["\n                "])),(e()(),h._55(-1,null,["\n                "])),(e()(),h._31(13,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._26(16777216,null,null,1,null,d)),h._30(16,802816,null,0,O.j,[h._11,h._6,h.E],{ngForOf:[0,"ngForOf"]},null),(e()(),h._55(-1,null,["\n                "])),(e()(),h._55(-1,null,["\n            "])),(e()(),h._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,9,0,n.gradesTable.columns);e(t,16,0,n.gradesTable.rows)},null)}function p(e){return h._57(0,[h._52(402653184,1,{content:0}),(e()(),h._31(1,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,E.b,E.a)),h._30(2,4374528,[[1,4]],0,C.a,[P.a,I.a,R.a,h.t,h.V,S.a,w.a,h.M,[2,A.a],[2,D.a]],null,null),(e()(),h._55(-1,1,["\n    "])),(e()(),h._31(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refreshGrades(n)&&o}return o},null,null)),h._30(5,212992,null,0,j.a,[I.a,C.a,h.M,k.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),h._55(-1,null,["\n        "])),(e()(),h._31(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,T.b,T.a)),h._30(8,114688,null,0,x.a,[j.a,P.a],{pullingText:[0,"pullingText"]},null),h._47(131072,g.a,[v.a,h.j]),(e()(),h._55(-1,null,["\n    "])),(e()(),h._55(-1,1,["\n    "])),(e()(),h._31(12,0,null,1,8,"core-loading",[["class","safe-area-page"]],null,null,null,M.b,M.a)),h._30(13,638976,null,0,N.a,[v.a,h.t,U.a,F.a],{hideUntil:[0,"hideUntil"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,o)),h._30(16,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n\n        "])),(e()(),h._26(16777216,null,0,1,null,f)),h._30(19,16384,null,0,O.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n    "])),(e()(),h._55(-1,1,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.gradesLoaded);e(t,8,0,h._34(1,"",h._56(t,8,0,h._44(t,9).transform("core.pulltorefresh")),""));e(t,13,0,n.gradesLoaded);e(t,16,0,!n.gradesTable);e(t,19,0,n.gradesTable)},function(e,t){e(t,1,0,h._44(t,2).statusbarPadding,h._44(t,2)._hasRefresher);e(t,4,0,"inactive"!==h._44(t,5).state,h._44(t,5)._top);e(t,7,0,h._44(t,8).r.state)})}n.d(t,"b",function(){return W}),t.c=p,n.d(t,"a",function(){return z});var h=n(0),m=n(124),_=n(114),g=n(25),v=n(17),y=n(80),b=n(75),P=n(8),O=n(7),E=n(181),C=n(29),I=n(16),R=n(34),S=n(35),w=n(107),A=n(39),D=n(21),j=n(159),k=n(43),T=n(212),x=n(173),M=n(54),N=n(51),U=n(9),F=n(2),L=n(501),H=n(168),B=n(4),q=n(69),G=n(184),V=n(10),K=n(28),W=h._29({encapsulation:2,styles:[],data:{}}),z=h._27("core-grades-course",L.a,function(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"core-grades-course",[],null,null,null,p,W)),h._30(1,114688,null,0,L.a,[H.a,B.a,q.a,G.a,[2,D.a],V.a,[2,K.a]],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",userId:"userId",gradeId:"gradeId"},{},[])},function(e,t,n){"use strict";function o(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"core-search-box",[["autocorrect","off"],["searchArea","CoreUserParticipants"]],null,[[null,"onSubmit"],[null,"onClear"]],function(e,t,n){var o=!0,r=e.component;if("onSubmit"===t){o=!1!==r.search(n)&&o}if("onClear"===t){o=!1!==r.clearSearch(n)&&o}return o},h.c,h.b)),p._30(1,245760,null,0,m.a,[_.a,g.a,v.a,y.a,b.a,P.a],{autocorrect:[0,"autocorrect"],spellcheck:[1,"spellcheck"],autoFocus:[2,"autoFocus"],lengthCheck:[3,"lengthCheck"],disabled:[4,"disabled"],searchArea:[5,"searchArea"]},{onSubmit:"onSubmit",onClear:"onClear"})],function(e,t){e(t,1,0,"off",!1,!0,1,t.component.disableSearch,"CoreUserParticipants")},null)}function r(e){return p._57(0,[(e()(),p._31(0,0,null,null,3,"core-empty-box",[["icon","person"]],null,null,null,O.b,O.a)),p._30(1,49152,null,0,E.a,[],{message:[0,"message"],icon:[1,"icon"]},null),p._47(131072,C.a,[_.a,p.j]),(e()(),p._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,p._56(t,1,0,p._44(t,2).transform("core.user.noparticipants")),"person")},null)}function i(e){return p._57(0,[(e()(),p._31(0,0,null,null,2,"core-empty-box",[["icon","search"]],null,null,null,O.b,O.a)),p._30(1,49152,null,0,E.a,[],{message:[0,"message"],icon:[1,"icon"]},null),p._47(131072,C.a,[_.a,p.j])],function(e,t){e(t,1,0,p._56(t,1,0,p._44(t,2).transform("core.noresults")),"search")},null)}function l(e){return p._57(0,[(e()(),p._31(0,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),p._31(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._55(2,null,["",": "])),p._47(131072,C.a,[_.a,p.j]),(e()(),p._55(4,null,["",""])),p._49(5,1)],null,function(e,t){e(t,2,0,p._56(t,2,0,p._44(t,3).transform("core.lastaccess")));e(t,4,0,p._56(t,4,0,e(t,5,0,p._44(t.parent.parent.parent.parent,0),t.parent.parent.context.$implicit.lastcourseaccess)))})}function a(e){return p._57(0,[(e()(),p._31(0,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),p._31(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._55(2,null,["",": "])),p._47(131072,C.a,[_.a,p.j]),(e()(),p._55(4,null,["",""])),p._49(5,1)],null,function(e,t){e(t,2,0,p._56(t,2,0,p._44(t,3).transform("core.lastaccess")));e(t,4,0,p._56(t,4,0,e(t,5,0,p._44(t.parent.parent.parent.parent,0),t.parent.parent.context.$implicit.lastaccess)))})}function s(e){return p._57(0,[(e()(),p._31(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._31(2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),p._55(3,null,["",""])),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._26(16777216,null,null,1,null,l)),p._30(6,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._26(16777216,null,null,1,null,a)),p._30(9,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n                    "]))],function(e,t){e(t,6,0,t.parent.context.$implicit.lastcourseaccess);e(t,9,0,null==t.parent.context.$implicit.lastcourseaccess&&t.parent.context.$implicit.lastaccess)},function(e,t){e(t,3,0,t.parent.context.$implicit.fullname)})}function u(e){return p._57(0,[(e()(),p._31(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._31(2,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),p._31(3,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),p._30(4,540672,null,0,R.a,[p.t,b.a,P.a,S.a,_.a,w.a,g.a,A.a,D.a,j.a,k.a,T.a,[2,x.a],[2,M.a],[2,N.a],U.a,y.a,F.a,L.a,H.a,p._11],{text:[0,"text"],highlight:[1,"highlight"],filter:[2,"filter"]},null),(e()(),p._55(-1,null,["\n                    "]))],function(e,t){e(t,4,0,t.parent.context.$implicit.fullname,t.component.searchQuery,!1)},null)}function c(e){return p._57(0,[(e()(),p._31(0,0,null,null,16,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoParticipant(e.context.$implicit.id)&&o}return o},B.b,B.a)),p._30(1,1097728,null,3,q.a,[G.a,V.a,p.t,p.V,[2,K.a]],null,null),p._52(335544320,4,{contentLabel:0}),p._52(603979776,5,{_buttons:1}),p._52(603979776,6,{_icons:1}),p._30(5,16384,null,0,W.a,[],null,null),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._31(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,z.b,z.a)),p._30(8,16384,null,0,$.a,[],null,null),p._30(9,770048,null,0,Y.a,[x.a,b.a,g.a,k.a,y.a,[2,N.a]],{user:[0,"user"],userId:[1,"userId"],checkOnline:[2,"checkOnline"]},null),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._26(16777216,null,2,1,null,s)),p._30(12,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._26(16777216,null,2,1,null,u)),p._30(15,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,9,0,t.context.$implicit,t.context.$implicit.id,!0);e(t,12,0,!n.displaySearchResults);e(t,15,0,n.displaySearchResults)},function(e,t){e(t,0,0,t.context.$implicit.fullname,t.context.$implicit.id==t.component.participantId)})}function d(e){return p._57(0,[(e()(),p._31(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),p._30(1,16384,null,0,Q.a,[V.a,p.t,p.V,w.a,X.l,J.a],null,null),(e()(),p._55(-1,null,["\n                "])),(e()(),p._26(16777216,null,null,1,null,c)),p._30(4,802816,null,0,I.j,[p._11,p._6,p.E],{ngForOf:[0,"ngForOf"]},null),(e()(),p._55(-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.participants)},null)}function f(e){return p._57(0,[p._47(0,Z.a,[D.a,_.a]),p._52(402653184,1,{content:0}),p._52(402653184,2,{splitviewCtrl:0}),(e()(),p._31(3,0,null,null,11,"core-navbar-buttons",[],null,null,null,ee.b,ee.a)),p._30(4,245760,null,1,te.a,[p.t,D.a,P.a],null,null),p._52(603979776,3,{buttons:1}),(e()(),p._55(-1,0,["\n    "])),(e()(),p._31(7,0,null,0,6,"button",[["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.toggleSearch()&&o}return o},ne.b,ne.a)),p._30(8,1097728,[[3,4]],0,oe.a,[[8,""],V.a,p.t,p.V],null,null),p._47(131072,C.a,[_.a,p.j]),(e()(),p._55(-1,0,["\n        "])),(e()(),p._31(11,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._30(12,147456,null,0,re.a,[V.a,p.t,p.V],{name:[0,"name"]},null),(e()(),p._55(-1,0,["\n    "])),(e()(),p._55(-1,0,["\n"])),(e()(),p._55(-1,null,["\n\n"])),(e()(),p._31(16,0,null,null,33,"core-split-view",[],null,null,null,ie.b,ie.a)),p._30(17,245760,[[2,4]],0,N.a,[[2,x.a],p.t,le.a,w.a,_.a],null,null),(e()(),p._55(-1,0,["\n    "])),(e()(),p._31(19,0,null,0,29,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ae.b,ae.a)),p._30(20,4374528,[[1,4]],0,M.a,[V.a,w.a,J.a,p.t,p.V,se.a,ue.a,p.M,[2,ce.a],[2,x.a]],null,null),(e()(),p._55(-1,1,["\n        "])),(e()(),p._31(22,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refreshParticipants(n)&&o}return o},null,null)),p._30(23,212992,null,0,de.a,[w.a,M.a,p.M,X.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),p._55(-1,null,["\n            "])),(e()(),p._31(25,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,fe.b,fe.a)),p._30(26,114688,null,0,pe.a,[de.a,V.a],{pullingText:[0,"pullingText"]},null),p._47(131072,C.a,[_.a,p.j]),(e()(),p._55(-1,null,["\n        "])),(e()(),p._55(-1,1,["\n\n        "])),(e()(),p._26(16777216,null,1,1,null,o)),p._30(31,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,1,["\n\n        "])),(e()(),p._31(33,0,null,1,14,"core-loading",[],null,null,null,he.b,he.a)),p._30(34,638976,null,0,me.a,[_.a,p.t,y.a,g.a],{hideUntil:[0,"hideUntil"]},null),(e()(),p._55(-1,0,["\n            "])),(e()(),p._26(16777216,null,0,1,null,r)),p._30(37,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n\n            "])),(e()(),p._26(16777216,null,0,1,null,i)),p._30(40,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n\n            "])),(e()(),p._26(16777216,null,0,1,null,d)),p._30(43,16384,null,0,I.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n            "])),(e()(),p._31(45,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.loadMoreData(n)&&o}return o},_e.b,_e.a)),p._30(46,573440,null,0,ge.a,[[2,M.a],P.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),p._55(-1,0,["\n        "])),(e()(),p._55(-1,1,["\n    "])),(e()(),p._55(-1,0,["\n"]))],function(e,t){var n=t.component;e(t,4,0);e(t,12,0,"search"),e(t,17,0);e(t,23,0,n.participantsLoaded&&!n.displaySearchResult);e(t,26,0,p._34(1,"",p._56(t,26,0,p._44(t,27).transform("core.pulltorefresh")),""));e(t,31,0,n.showSearchBox);e(t,34,0,n.participantsLoaded);e(t,37,0,!n.displaySearchResults&&!n.participants.length);e(t,40,0,n.displaySearchResults&&!n.participants.length);e(t,43,0,n.participants&&n.participants.length>0);e(t,46,0,n.canLoadMore&&n.participantsLoaded,n.loadMoreError)},function(e,t){e(t,7,0,!t.component.canSearch,p._56(t,7,1,p._44(t,9).transform("core.search")));e(t,11,0,p._44(t,12)._hidden);e(t,19,0,p._44(t,20).statusbarPadding,p._44(t,20)._hasRefresher);e(t,22,0,"inactive"!==p._44(t,23).state,p._44(t,23)._top);e(t,25,0,p._44(t,26).r.state)})}n.d(t,"b",function(){return be}),t.c=f,n.d(t,"a",function(){return Pe});var p=n(0),h=n(475),m=n(379),_=n(17),g=n(2),v=n(283),y=n(9),b=n(1),P=n(4),O=n(124),E=n(114),C=n(25),I=n(7),R=n(48),S=n(11),w=n(16),A=n(22),D=n(6),j=n(18),k=n(10),T=n(15),x=n(21),M=n(29),N=n(28),U=n(44),F=n(41),L=n(32),H=n(36),B=n(30),q=n(20),G=n(19),V=n(8),K=n(27),W=n(33),z=n(213),$=n(160),Y=n(182),Q=n(86),X=n(43),J=n(34),Z=n(443),ee=n(96),te=n(87),ne=n(45),oe=n(42),re=n(47),ie=n(474),le=n(72),ae=n(181),se=n(35),ue=n(107),ce=n(39),de=n(159),fe=n(212),pe=n(173),he=n(54),me=n(51),_e=n(373),ge=n(273),ve=n(527),ye=n(46),be=p._29({encapsulation:2,styles:[],data:{}}),Pe=p._27("core-user-participants",ve.a,function(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"core-user-participants",[],null,null,null,f,be)),p._30(1,114688,null,0,ve.a,[ye.a,P.a,k.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(6),i=n(11),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.textUtils=t,this.logger=e.getInstance("CoreBytesToSizePipe")}return e.prototype.transform=function(e){if("string"==typeof e){var t=parseInt(e,10);if(isNaN(t))return this.logger.error("Invalid value received",e),e;e=t}return this.textUtils.bytesToSize(e)},e=l([Object(o.S)({name:"coreBytesToSize"}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(6),i=n(11),l=n(40),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.textUtils=t,this.logger=e.getInstance("CoreSecondsToHMSPipe")}return e.prototype.transform=function(e){var t,n;if(!e||e<0)e=0;else if("string"==typeof e){var o=parseInt(e,10);if(isNaN(o))return this.logger.error("Invalid value received",e),e;e=o}return e=Math.floor(e),t=Math.floor(e/l.a.SECONDS_HOUR),e-=t*l.a.SECONDS_HOUR,n=Math.floor(e/l.a.SECONDS_MINUTE),e-=n*l.a.SECONDS_MINUTE,this.textUtils.twoDigits(t)+":"+this.textUtils.twoDigits(n)+":"+this.textUtils.twoDigits(e)},e=a([Object(o.S)({name:"coreSecondsToHMS"}),s("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(5),i=n(3),l=n(9),a=n(1),s=n(4),u=n(2),c=n(200),d=n(52),f=n(13),p=n(38),h=n(178),m=n(50),_=n(102),g=n(397),v=n(496),y=n(32),b=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,n,o,r,i,a,s,u,c,d,p,h,m,_,v){var y=this;this.courseProvider=t,this.domUtils=n,this.courseFormatDelegate=o,this.courseOptionsDelegate=r,this.translate=i,this.courseHelper=a,this.coursesProvider=u,this.filterHelper=c,this.navCtrl=p,this.injector=h,this.prefetchDelegate=m,this.syncProvider=_,this.utils=v,this.courseMenuHandlers=[],this.downloadEnabled=!1,this.downloadEnabledIcon="square-outline",this.prefetchCourseData={prefetchCourseIcon:"spinner",title:"core.course.downloadcourse"},this.isDestroyed=!1,this.course=e.get("course"),this.sectionId=e.get("sectionId"),this.sectionNumber=e.get("sectionNumber"),this.module=e.get("module"),this.firstTabName=e.get("selectedTab"),this.modParams=e.get("modParams"),this.title=o.getCourseTitle(this.course),this.displayEnableDownload=!d.getCurrentSite().isOfflineDisabled()&&o.displayEnableDownload(this.course),this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),o.shouldRefreshWhenCompletionChanges(this.course).then(function(e){e&&(y.completionObserver=s.on(l.a.COMPLETION_MODULE_VIEWED,function(e){e&&e.courseId==y.course.id&&y.refreshAfterCompletionChange(!0)}),y.syncObserver=s.on(g.a.AUTO_SYNCED,function(e){e&&e.courseId==y.course.id&&(y.refreshAfterCompletionChange(!1),e.warnings&&e.warnings[0]&&y.domUtils.showErrorModal(e.warnings[0]))}))}),this.downloadCourseEnabled&&(this.courseStatusObserver=s.on(l.a.COURSE_STATUS_CHANGED,function(e){e.courseId!=y.course.id&&e.courseId!=f.a.ALL_COURSES_CLEARED||y.updateCourseStatus(e.status)},d.getCurrentSiteId())),this.selectTabObserver=s.on(l.a.SELECT_COURSE_TAB,function(e){if(e.name){if(y.courseHandlers){var t=y.courseHandlers.findIndex(function(t){return t.name==e.name});t>=0&&y.tabsComponent&&y.tabsComponent.selectTab(t+1)}}else y.sectionId=e.sectionId||y.sectionId,y.sectionNumber=e.sectionNumber||y.sectionNumber,y.tabsComponent&&y.tabsComponent.selectTab(0)})}return e.prototype.ionViewDidLoad=function(){var e=this;this.module&&(this.moduleId=this.module.id,this.courseHelper.openModule(this.navCtrl,this.module,this.course.id,this.sectionId,this.modParams)),this.loadData(!1,!0).finally(function(){e.dataLoaded=!0,e.downloadCourseEnabled&&e.determineCoursePrefetchIcon().then(function(){if("spinner"==e.prefetchCourseData.prefetchCourseIcon){var t=e.courseHelper.getCourseDownloadPromise(e.course.id);t?t.catch(function(t){e.isDestroyed||e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0)}):e.courseProvider.setCoursePreviousStatus(e.course.id).then(function(t){e.updateCourseStatus(t)})}})})},e.prototype.loadData=function(e,t){var n=this;return this.courseHelper.getCourse(this.course.id).then(function(e){return e.course}).catch(function(){}).then(function(e){if(e&&(n.course.id===e.id&&n.course.hasOwnProperty("displayname")&&!e.hasOwnProperty("displayname")&&(e.displayname=n.course.displayname),n.course=e),t)return n.syncProvider.syncCourse(n.course.id).then(function(e){e.warnings&&e.warnings.length&&n.domUtils.showErrorModal(e.warnings[0])}).catch(function(){})}).then(function(){var t=[];return t.push(n.courseProvider.getSections(n.course.id,!1,!0).then(function(t){if(e){var o=n.courseProvider.getSectionsModules(t);return n.prefetchDelegate.invalidateModules(o,n.course.id).then(function(){return t})}return t}).then(function(e){var t;if(!1===n.course.enablecompletion)t=Promise.resolve({});else{var o=e.find(function(e){return e.modules.length>0});t=o&&void 0!==o.modules[0].completion?n.courseHelper.loadOfflineCompletion(n.course.id,e).catch(function(){}).then(function(){return{}}):n.courseProvider.getActivitiesCompletionStatus(n.course.id).catch(function(){return{}})}return t.then(function(t){n.courseHelper.addHandlerDataForModules(e,n.course.id,t,n.course.fullname,!0),n.sections=e.map(function(e){return n.filterHelper.getFiltersAndFormatText(e.name.trim(),"course",n.course.id,{clean:!0,singleLine:!0}).then(function(t){e.formattedName=t.text}),e.hasContent=n.courseHelper.sectionHasContent(e),e}),n.courseFormatDelegate.canViewAllSections(n.course)&&n.sections.unshift({name:n.translate.instant("core.course.allsections"),id:f.a.ALL_SECTIONS_ID,hasContent:!0}),n.title=n.courseFormatDelegate.getCourseTitle(n.course,n.sections),n.displayRefresher=n.courseFormatDelegate.displayRefresher(n.course,n.sections)})})),n.course.overviewfiles&&(n.course.imageThumb=n.course.overviewfiles[0]&&n.course.overviewfiles[0].fileurl),t.push(n.courseOptionsDelegate.getHandlersToDisplay(n.injector,n.course,e,!1).then(function(e){var t;e.forEach(function(e,o){e.data.componentData=e.data.componentData||{},e.data.componentData.courseId=n.course.id,n.firstTabName&&e.name==n.firstTabName&&(t=o+1)}),n.courseHandlers=e,n.firstTabName=void 0,t&&setTimeout(function(){n.tabsComponent.selectTab(t)})})),t.push(n.courseOptionsDelegate.getMenuHandlersToDisplay(n.injector,n.course).then(function(e){n.courseMenuHandlers=e})),n.course.enablecompletion&&n.coursesProvider.isGetCoursesByFieldAvailable()&&t.push(n.coursesProvider.getCourseByField("id",n.course.id).catch(function(){}).then(function(e){e&&Object.assign(n.course,e),n.course.courseformatoptions&&(n.course.courseformatoptions=n.utils.objectToKeyValueMap(n.course.courseformatoptions,"name","value"))})),Promise.all(t).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)})})},e.prototype.doRefresh=function(e){var t=this;return this.invalidateData().finally(function(){return t.loadData(!0,!0).finally(function(){return(t.displayRefresher?t.formatComponent.doRefresh(e):Promise.resolve()).finally(function(){e&&e.complete()})})})},e.prototype.onCompletionChange=function(e){var t=this,n=!e.hasOwnProperty("valueused")||e.valueused;this.invalidateData().finally(function(){n&&t.refreshAfterCompletionChange(!0)})},e.prototype.invalidateData=function(){var e=[];return e.push(this.courseProvider.invalidateSections(this.course.id)),e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseFormatDelegate.invalidateData(this.course,this.sections)),this.sections&&e.push(this.prefetchDelegate.invalidateCourseUpdates(this.course.id)),Promise.all(e)},e.prototype.refreshAfterCompletionChange=function(e){var t=this,n=this.content.getScrollElement(),o=n.scrollTop||0,r=n.scrollLeft||0;this.dataLoaded=!1,this.domUtils.scrollToTop(this.content),this.loadData(!0,e).then(function(){return t.formatComponent.doRefresh(void 0,void 0,!0)}).finally(function(){t.dataLoaded=!0,setTimeout(function(){t.content.scrollTo(r,o,0)})})},e.prototype.determineCoursePrefetchIcon=function(){var e=this;return this.courseHelper.getCourseStatusIconAndTitle(this.course.id).then(function(t){e.prefetchCourseData.prefetchCourseIcon=t.icon,e.prefetchCourseData.title=t.title})},e.prototype.prefetchCourse=function(){var e=this;this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData,this.course,this.sections,this.courseHandlers,this.courseMenuHandlers).catch(function(t){e.isDestroyed||e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0)})},e.prototype.toggleDownload=function(){this.downloadEnabled=!this.downloadEnabled,this.downloadEnabledIcon=this.downloadEnabled?"checkbox-outline":"square-outline"},e.prototype.updateCourseStatus=function(e){var t=this.courseHelper.getCourseStatusIconAndTitleFromStatus(e);this.prefetchCourseData.prefetchCourseIcon=t.icon,this.prefetchCourseData.title=t.title},e.prototype.openCourseSummary=function(){this.navCtrl.push("CoreCoursesCoursePreviewPage",{course:this.course,avoidOpenCourse:!0})},e.prototype.openMenuItem=function(e){var t=Object.assign({course:this.course},e.data.pageParams);this.navCtrl.push(e.data.page,t)},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.completionObserver&&this.completionObserver.off(),this.selectTabObserver&&this.selectTabObserver.off()},e.prototype.ionViewDidEnter=function(){this.formatComponent&&this.formatComponent.ionViewDidEnter(),this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},e.prototype.ionViewDidLeave=function(){this.formatComponent&&this.formatComponent.ionViewDidLeave(),this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},b([Object(o._9)("courseSectionContent"),P("design:type",r.f)],e.prototype,"content",void 0),b([Object(o._9)(v.a),P("design:type",v.a)],e.prototype,"formatComponent",void 0),b([Object(o._9)(c.a),P("design:type",c.a)],e.prototype,"tabsComponent",void 0),e=b([Object(o.m)({selector:"page-core-course-section",templateUrl:"section.html"}),P("design:paramtypes",[r.t,f.a,s.a,h.a,_.a,i.c,p.a,l.a,d.a,y.a,a.a,r.s,o.C,m.a,g.a,u.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),r=n(9),i=n(151),l=n(1),a=n(4),s=n(24),u=n(2),c=n(186),d=n(276),f=n(275),p=n(52),h=n(10),m=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n,r,i,l,a,s,u,d,f,p){var h=this;this.calendarProvider=i,this.calendarHelper=l,this.calendarOffline=a,this.domUtils=s,this.timeUtils=u,this.utils=d,this.coursesProvider=f,this.appProvider=p,this.onEventClicked=new o.v,this.onDayClicked=new o.v,this.loaded=!1,this.categoriesRetrieved=!1,this.categories={},this.offlineEvents={},this.offlineEditedEventsIds=[],this.deletedEvents=[],this.currentSiteId=t.getCurrentSiteId(),n.isAvailable()&&(this.obsDefaultTimeChange=e.on(c.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){h.weeks.forEach(function(e){e.days.forEach(function(e){i.scheduleEventsNotifications(e.events)})})},this.currentSiteId)),this.undeleteEventObserver=e.on(c.a.UNDELETED_EVENT_EVENT,function(e){if(e&&e.eventId){h.undeleteEvent(e.eventId);var t=h.deletedEvents.indexOf(e.eventId);-1!=t&&h.deletedEvents.splice(t,1)}},this.currentSiteId),this.differ=r.find([]).create()}return e.prototype.ngOnInit=function(){var e=new Date;this.year=this.initialYear?Number(this.initialYear):e.getFullYear(),this.month=this.initialMonth?Number(this.initialMonth):e.getMonth()+1,this.calculateIsCurrentMonth(),this.fetchData()},e.prototype.ngOnChanges=function(e){this.canNavigate=void 0===this.canNavigate||this.utils.isTrueOrOne(this.canNavigate),this.displayNavButtons=void 0===this.displayNavButtons||this.utils.isTrueOrOne(this.displayNavButtons)},e.prototype.ngDoCheck=function(){if(this.weeks){this.differ.diff(this.filter)&&this.filterEvents()}},e.prototype.fetchData=function(e){var t=this;void 0===e&&(e=!1);var n=[];return n.push(this.loadCategories()),n.push(this.calendarOffline.getAllEditedEvents().then(function(e){e.forEach(function(e){e.offline=!0,t.calendarHelper.formatEventData(e)}),t.offlineEvents=t.calendarHelper.classifyIntoMonths(e);var n=e.filter(function(e){return e.id>0});t.offlineEditedEventsIds=n.map(function(e){return e.id})})),n.push(this.calendarOffline.getAllDeletedEventsIds().then(function(e){t.deletedEvents=e})),n.push(this.calendarProvider.getCalendarTimeFormat().then(function(e){t.timeFormat=e})),Promise.all(n).then(function(){return t.fetchEvents()}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0)}).finally(function(){t.loaded=!0})},e.prototype.fetchEvents=function(){var e=this;return this.calendarProvider.getMonthlyEvents(this.year,this.month).catch(function(t){return e.appProvider.isOnline()?Promise.reject(t):e.calendarHelper.getOfflineMonthWeeks(e.year,e.month)}).then(function(t){if(e.periodName=e.timeUtils.userDate(new Date(e.year,e.month-1).getTime(),"core.strftimemonthyear"),e.weekDays=e.calendarProvider.getWeekDays(t.daynames[0].dayno),e.weeks=t.weeks,e.calculateIsCurrentMonth(),e.isCurrentMonth){var n=(new Date).getDate(),o=!0;e.weeks.forEach(function(t){t.days.some(function(t){return t.istoday=t.mday==n,t.ispast=o&&!t.istoday,o=t.ispast,t.istoday?(t.events.forEach(function(t){t.ispast=e.isEventPast(t)}),!0):t.istoday})})}e.mergeEvents(),e.filterEvents()})},e.prototype.loadCategories=function(){var e=this;return this.categoriesRetrieved?Promise.resolve():this.coursesProvider.getCategories(0,!0).then(function(t){e.categoriesRetrieved=!0,e.categories={},t.forEach(function(t){e.categories[t.id]=t})}).catch(function(){})},e.prototype.filterEvents=function(){var e=this;this.weeks.forEach(function(t){t.days.forEach(function(t){t.filteredEvents=e.calendarHelper.getFilteredEvents(t.events,e.filter,e.categories),e.calendarHelper.calculateDayData(t,t.filteredEvents)})})},e.prototype.refreshData=function(e){var t=this,n=[];return e||n.push(this.calendarProvider.invalidateMonthlyEvents(this.year,this.month)),n.push(this.coursesProvider.invalidateCategories(0,!0)),n.push(this.calendarProvider.invalidateTimeFormat()),this.categoriesRetrieved=!1,Promise.all(n).then(function(){return t.fetchData(!0)})},e.prototype.loadNext=function(){var e=this;this.increaseMonth(),this.loaded=!1,this.fetchEvents().catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.calendar.errorloadevents",!0),e.decreaseMonth()}).finally(function(){e.loaded=!0})},e.prototype.loadPrevious=function(){var e=this;this.decreaseMonth(),this.loaded=!1,this.fetchEvents().catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.calendar.errorloadevents",!0),e.increaseMonth()}).finally(function(){e.loaded=!0})},e.prototype.eventClicked=function(e,t){this.onEventClicked.emit(e.id),t.stopPropagation()},e.prototype.dayClicked=function(e){this.onDayClicked.emit({day:e,month:this.month,year:this.year})},e.prototype.calculateIsCurrentMonth=function(){var e=new Date;this.currentTime=this.timeUtils.timestamp(),this.isCurrentMonth=this.year==e.getFullYear()&&this.month==e.getMonth()+1,this.isPastMonth=this.year<e.getFullYear()||this.year==e.getFullYear()&&this.month<e.getMonth()+1},e.prototype.goToCurrentMonth=function(){var e=this,t=new Date,n=this.month,o=this.year;this.month=t.getMonth()+1,this.year=t.getFullYear(),this.loaded=!1,this.fetchEvents().then(function(){e.isCurrentMonth=!0}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.calendar.errorloadevents",!0),e.year=o,e.month=n}).finally(function(){e.loaded=!0})},e.prototype.decreaseMonth=function(){1===this.month?(this.month=12,this.year--):this.month--},e.prototype.increaseMonth=function(){12===this.month?(this.month=1,this.year++):this.month++},e.prototype.mergeEvents=function(){var e=this,t=this.offlineEvents[this.calendarHelper.getMonthId(this.year,this.month)];this.weeks.forEach(function(n){n.days.forEach(function(n){n.events.forEach(e.calendarHelper.formatEventData.bind(e.calendarHelper)),e.calendarProvider.scheduleEventsNotifications(n.events),(t||e.deletedEvents.length)&&(e.deletedEvents.length&&n.events.forEach(function(t){t.deleted=-1!=e.deletedEvents.indexOf(t.id)}),e.offlineEditedEventsIds.length&&(n.events=n.events.filter(function(t){return-1==e.offlineEditedEventsIds.indexOf(t.id)})),t&&t[n.mday]&&(n.events=e.sortEvents(n.events.concat(t[n.mday]))))})})},e.prototype.sortEvents=function(e){return e.sort(function(e,t){return e.timestart==t.timestart?e.timeduration-t.timeduration:e.timestart-t.timestart})},e.prototype.undeleteEvent=function(e){this.weeks&&this.weeks.forEach(function(t){t.days.forEach(function(t){var n=t.events.find(function(t){return t.id==e});n&&(n.deleted=!1)})})},e.prototype.isEventPast=function(e){return e.timestart+e.timeduration<this.currentTime},e.prototype.ngOnDestroy=function(){this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},m([Object(o.D)(),_("design:type",Object)],e.prototype,"initialYear",void 0),m([Object(o.D)(),_("design:type",Object)],e.prototype,"initialMonth",void 0),m([Object(o.D)(),_("design:type",Object)],e.prototype,"filter",void 0),m([Object(o.D)(),_("design:type",Object)],e.prototype,"canNavigate",void 0),m([Object(o.D)(),_("design:type",Object)],e.prototype,"displayNavButtons",void 0),m([Object(o.O)(),_("design:type",Object)],e.prototype,"onEventClicked",void 0),m([Object(o.O)(),_("design:type",Object)],e.prototype,"onDayClicked",void 0),e=m([Object(o.m)({selector:"addon-calendar-calendar",templateUrl:"addon-calendar-calendar.html"}),_("design:paramtypes",[r.a,l.a,i.a,o.F,c.a,d.a,f.a,a.a,s.a,u.a,p.a,h.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),r=n(9),i=n(151),l=n(1),a=n(4),s=n(186),u=n(276),c=n(275),d=n(52),f=n(40),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,n,r,i,l,a,u,c){var d=this;this.calendarProvider=i,this.calendarHelper=l,this.calendarOffline=a,this.domUtils=u,this.coursesProvider=c,this.onEventClicked=new o.v,this.filteredEvents=[],this.loaded=!1,this.categoriesRetrieved=!1,this.categories={},this.events=[],this.onlineEvents=[],this.offlineEvents=[],this.deletedEvents=[],this.currentSiteId=t.getCurrentSiteId(),n.isAvailable()&&(this.obsDefaultTimeChange=e.on(s.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){i.scheduleEventsNotifications(d.onlineEvents)},this.currentSiteId)),this.undeleteEventObserver=e.on(s.a.UNDELETED_EVENT_EVENT,function(e){if(e&&e.eventId){d.undeleteEvent(e.eventId);var t=d.deletedEvents.indexOf(e.eventId);-1!=t&&d.deletedEvents.splice(t,1)}},this.currentSiteId),this.differ=r.find([]).create()}return e.prototype.ngOnInit=function(){this.fetchData()},e.prototype.ngDoCheck=function(){this.differ.diff(this.filter)&&this.filterEvents()},e.prototype.fetchData=function(e){var t=this;void 0===e&&(e=!1);var n=[];return n.push(this.loadCategories()),n.push(this.calendarOffline.getAllEditedEvents().then(function(e){e.forEach(function(e){e.offline=!0,t.calendarHelper.formatEventData(e)}),t.offlineEvents=t.sortEvents(e)})),n.push(this.calendarOffline.getAllDeletedEventsIds().then(function(e){t.deletedEvents=e})),n.push(this.calendarProvider.getCalendarLookAhead().then(function(e){t.lookAhead=e})),n.push(this.calendarProvider.getCalendarTimeFormat().then(function(e){t.timeFormat=e})),Promise.all(n).then(function(){return t.fetchEvents()}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0)}).finally(function(){t.loaded=!0})},e.prototype.fetchEvents=function(){var e=this;return this.calendarProvider.getUpcomingEvents().then(function(t){var n=[];return e.onlineEvents=t.events,e.onlineEvents.forEach(e.calendarHelper.formatEventData.bind(e.calendarHelper)),e.calendarProvider.scheduleEventsNotifications(e.onlineEvents),e.events=e.mergeEvents(),e.filterEvents(),e.events.forEach(function(t){n.push(e.calendarProvider.formatEventTime(t,e.timeFormat).then(function(e){t.formattedtime=e}))}),Promise.all(n)})},e.prototype.loadCategories=function(){var e=this;return this.categoriesRetrieved?Promise.resolve():this.coursesProvider.getCategories(0,!0).then(function(t){e.categoriesRetrieved=!0,e.categories={},t.forEach(function(t){e.categories[t.id]=t})}).catch(function(){})},e.prototype.filterEvents=function(){this.filteredEvents=this.calendarHelper.getFilteredEvents(this.events,this.filter,this.categories)},e.prototype.refreshData=function(e){var t=this,n=[];return e||n.push(this.calendarProvider.invalidateAllUpcomingEvents()),n.push(this.coursesProvider.invalidateCategories(0,!0)),n.push(this.calendarProvider.invalidateLookAhead()),n.push(this.calendarProvider.invalidateTimeFormat()),this.categoriesRetrieved=!1,Promise.all(n).then(function(){return t.fetchData(!0)})},e.prototype.eventClicked=function(e){this.onEventClicked.emit(e.id)},e.prototype.mergeEvents=function(){var e=this;if(!this.offlineEvents.length&&!this.deletedEvents.length)return this.onlineEvents;var t=Date.now()/1e3,n=t+f.a.SECONDS_DAY*this.lookAhead,o=this.onlineEvents;this.deletedEvents.length&&o.forEach(function(t){t.deleted=-1!=e.deletedEvents.indexOf(t.id)}),this.offlineEvents.length&&(o=o.filter(function(t){return!e.offlineEvents.find(function(e){return e.id==t.id})}));var r=this.offlineEvents.filter(function(e){return(e.timestart>=t||e.timestart+e.timeduration>=t)&&e.timestart<=n});return o=o.concat(r),this.sortEvents(o)},e.prototype.sortEvents=function(e){return e.sort(function(e,t){return e.timestart==t.timestart?e.timeduration-t.timeduration:e.timestart-t.timestart})},e.prototype.undeleteEvent=function(e){var t=this.onlineEvents.find(function(t){return t.id==e});t&&(t.deleted=!1)},e.prototype.ngOnDestroy=function(){this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},p([Object(o.D)(),h("design:type",Object)],e.prototype,"filter",void 0),p([Object(o.O)(),h("design:type",Object)],e.prototype,"onEventClicked",void 0),e=p([Object(o.m)({selector:"addon-calendar-upcoming-events",templateUrl:"addon-calendar-upcoming-events.html"}),h("design:paramtypes",[r.a,l.a,i.a,o.F,s.a,u.a,c.a,a.a,d.a])],e)}()},function(e,t,n){"use strict";function o(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.setLockState(!0)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,1,{contentLabel:0}),c._52(603979776,2,{_buttons:1}),c._52(603979776,3,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-lock"]],null,null,null,g.b,g.a)),c._30(8,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,y.a,[b.a,c.j]),(e()(),c._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-lock")},function(e,t){e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.lockdiscussion")))})}function r(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.setLockState(!1)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,4,{contentLabel:0}),c._52(603979776,5,{_buttons:1}),c._52(603979776,6,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-unlock"]],null,null,null,g.b,g.a)),c._30(8,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,y.a,[b.a,c.j]),(e()(),c._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-unlock")},function(e,t){e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.unlockdiscussion")))})}function i(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.setPinState(!0)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,7,{contentLabel:0}),c._52(603979776,8,{_buttons:1}),c._52(603979776,9,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-map-pin"]],null,null,null,g.b,g.a)),c._30(8,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,y.a,[b.a,c.j]),(e()(),c._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-map-pin")},function(e,t){e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.pindiscussion")))})}function l(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.setPinState(!1)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,10,{contentLabel:0}),c._52(603979776,11,{_buttons:1}),c._52(603979776,12,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-map-pin"]],null,null,null,g.b,g.a)),c._30(8,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"],slash:[1,"slash"]},null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,y.a,[b.a,c.j]),(e()(),c._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-map-pin",!0)},function(e,t){e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.unpindiscussion")))})}function a(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.toggleFavouriteState(!0)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,13,{contentLabel:0}),c._52(603979776,14,{_buttons:1}),c._52(603979776,15,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,g.b,g.a)),c._30(8,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,y.a,[b.a,c.j]),(e()(),c._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-star")},function(e,t){e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.addtofavourites")))})}function s(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.toggleFavouriteState(!1)&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,16,{contentLabel:0}),c._52(603979776,17,{_buttons:1}),c._52(603979776,18,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,g.b,g.a)),c._30(8,704512,null,0,v.a,[c.t,h.a],{name:[0,"name"],slash:[1,"slash"]},null),(e()(),c._55(-1,2,["\n    "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,y.a,[b.a,c.j]),(e()(),c._55(-1,2,["\n"]))],function(e,t){e(t,8,0,"fa-star",!0)},function(e,t){e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.removefromfavourites")))})}function u(e){return c._57(0,[(e()(),c._26(16777216,null,null,1,null,o)),c._30(1,16384,null,0,P.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,null,["\n"])),(e()(),c._26(16777216,null,null,1,null,r)),c._30(4,16384,null,0,P.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,null,["\n"])),(e()(),c._26(16777216,null,null,1,null,i)),c._30(7,16384,null,0,P.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,null,["\n"])),(e()(),c._26(16777216,null,null,1,null,l)),c._30(10,16384,null,0,P.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,null,["\n"])),(e()(),c._26(16777216,null,null,1,null,a)),c._30(13,16384,null,0,P.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,null,["\n"])),(e()(),c._26(16777216,null,null,1,null,s)),c._30(16,16384,null,0,P.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.discussion.canlock&&!n.discussion.locked);e(t,4,0,n.discussion.canlock&&n.discussion.locked);e(t,7,0,n.canPin&&!n.discussion.pinned);e(t,10,0,n.canPin&&n.discussion.pinned);e(t,13,0,n.discussion.canfavourite&&!n.discussion.starred);e(t,16,0,n.discussion.canfavourite&&n.discussion.starred)},null)}n.d(t,"a",function(){return D});var c=n(0),d=n(30),f=n(20),p=n(19),h=n(8),m=n(27),_=n(33),g=n(80),v=n(75),y=n(25),b=n(17),P=n(7),O=n(650),E=n(69),C=n(39),I=n(135),R=n(4),S=n(9),w=n(1),A=c._29({encapsulation:2,styles:[],data:{}}),D=c._27("addon-forum-discussion-options-menu",O.a,function(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"addon-forum-discussion-options-menu",[],null,null,null,u,A)),c._30(1,114688,null,0,O.a,[E.a,C.a,I.a,R.a,S.a,w.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])},function(e,t,n){"use strict";function o(e){return c._57(0,[(e()(),c._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.editPost()&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,1,{contentLabel:0}),c._52(603979776,2,{_buttons:1}),c._52(603979776,3,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(7,0,null,0,1,"ion-icon",[["item-start",""],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._30(8,147456,[[3,4]],0,g.a,[h.a,c.t,c.V],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(11,null,["",""])),c._47(131072,v.a,[y.a,c.j]),(e()(),c._55(-1,2,["\n    "]))],function(e,t){e(t,8,0,"create")},function(e,t){e(t,7,0,c._44(t,8)._hidden);e(t,11,0,c._56(t,11,0,c._44(t,12).transform("addon.mod_forum.edit")))})}function r(e){return c._57(0,[(e()(),c._31(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),c._55(1,null,["",""])),c._47(131072,v.a,[y.a,c.j])],null,function(e,t){e(t,1,0,c._56(t,1,0,c._44(t,2).transform("addon.mod_forum.delete")))})}function i(e){return c._57(0,[(e()(),c._31(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),c._55(1,null,["",""])),c._47(131072,v.a,[y.a,c.j])],null,function(e,t){e(t,1,0,c._56(t,1,0,c._44(t,2).transform("core.discard")))})}function l(e){return c._57(0,[(e()(),c._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.deletePost()&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,4,{contentLabel:0}),c._52(603979776,5,{_buttons:1}),c._52(603979776,6,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(7,0,null,0,1,"ion-icon",[["item-start",""],["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._30(8,147456,[[6,4]],0,g.a,[h.a,c.t,c.V],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._26(16777216,null,2,1,null,r)),c._30(11,16384,null,0,b.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._26(16777216,null,2,1,null,i)),c._30(14,16384,null,0,b.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,8,0,"trash");e(t,11,0,n.post.id);e(t,14,0,!n.post.id)},function(e,t){e(t,7,0,c._44(t,8)._hidden)})}function a(e){return c._57(0,[(e()(),c._31(0,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.dismiss()&&o}return o},d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,7,{contentLabel:0}),c._52(603979776,8,{_buttons:1}),c._52(603979776,9,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),c._55(8,null,["",""])),c._48(9,{$a:0}),c._47(131072,v.a,[y.a,c.j]),(e()(),c._55(-1,2,["\n    "]))],null,function(e,t){var n=t.component;e(t,8,0,c._56(t,8,0,c._44(t,10).transform("core.numwords",e(t,9,0,n.wordCount))))})}function s(e){return c._57(0,[(e()(),c._31(0,0,null,null,14,"a",[["capture","false"],["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4]],null,null,d.b,d.a)),c._30(1,1097728,null,3,f.a,[p.a,h.a,c.t,c.V,[2,m.a]],null,null),c._52(335544320,10,{contentLabel:0}),c._52(603979776,11,{_buttons:1}),c._52(603979776,12,{_icons:1}),c._30(5,16384,null,0,_.a,[],null,null),c._30(6,81920,null,0,P.a,[c.t,O.a,E.a,C.a,I.a,R.a,[2,S.a],[2,w.a],[2,A.a],D.a],{capture:[0,"capture"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(8,0,null,0,1,"ion-icon",[["item-start",""],["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._30(9,147456,[[12,4]],0,g.a,[h.a,c.t,c.V],{name:[0,"name"]},null),(e()(),c._55(-1,2,["\n        "])),(e()(),c._31(11,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),c._55(12,null,["",""])),c._47(131072,v.a,[y.a,c.j]),(e()(),c._55(-1,2,["\n    "]))],function(e,t){e(t,6,0,"false");e(t,9,0,"open")},function(e,t){e(t,0,0,t.component.url);e(t,8,0,c._44(t,9)._hidden);e(t,12,0,c._56(t,12,0,c._44(t,13).transform("core.openinbrowser")))})}function u(e){return c._57(0,[(e()(),c._31(0,0,null,null,14,"core-loading",[["class","core-loading-center"]],null,null,null,j.b,j.a)),c._30(1,638976,null,0,k.a,[y.a,c.t,T.a,E.a],{hideUntil:[0,"hideUntil"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._26(16777216,null,0,1,null,o)),c._30(4,16384,null,0,b.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._26(16777216,null,0,1,null,l)),c._30(7,16384,null,0,b.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._26(16777216,null,0,1,null,a)),c._30(10,16384,null,0,b.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._26(16777216,null,0,1,null,s)),c._30(13,16384,null,0,b.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n"])),(e()(),c._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.loaded);e(t,4,0,n.canEdit);e(t,7,0,n.canDelete);e(t,10,0,n.wordCount);e(t,13,0,n.url)},null)}n.d(t,"a",function(){return L});var c=n(0),d=n(30),f=n(20),p=n(19),h=n(8),m=n(27),_=n(33),g=n(47),v=n(25),y=n(17),b=n(7),P=n(174),O=n(4),E=n(2),C=n(1),I=n(22),R=n(15),S=n(21),w=n(29),A=n(28),D=n(11),j=n(54),k=n(51),T=n(9),x=n(651),M=n(69),N=n(39),U=n(135),F=c._29({encapsulation:2,styles:[],data:{}}),L=c._27("addon-forum-post-options-menu",x.a,function(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"addon-forum-post-options-menu",[],null,null,null,u,F)),c._30(1,114688,null,0,x.a,[M.a,N.a,O.a,U.a,C.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])},,function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,[[null,"onContentLoaded"],[null,"onLoadingContent"]],function(e,t,n){var o=!0,r=e.component;if("onContentLoaded"===t){o=!1!==r.contentLoaded(n)&&o}if("onLoadingContent"===t){o=!1!==r.contentLoading(n)&&o}return o},l.b,l.a)),i._30(1,376832,[[1,4]],0,a.a,[s.a,u.a,[2,c.a],i.F],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"],data:[4,"data"],pageTitle:[5,"pageTitle"]},{onContentLoaded:"onContentLoaded",onLoadingContent:"onLoadingContent"})],function(e,t){var n=t.component;e(t,1,0,n.component,n.method,n.args,n.initResult,n.jsData,n.pageTitle)},null)}function r(e){return i._57(0,[i._52(671088640,1,{content:0}),(e()(),i._55(-1,null,["\n"])),(e()(),i._31(2,0,null,null,27,"core-navbar-buttons",[["end",""]],null,null,null,d.b,d.a)),i._30(3,245760,null,1,f.a,[i.t,p.a,s.a],null,null),i._52(603979776,2,{buttons:1}),(e()(),i._55(-1,0,["\n    "])),(e()(),i._31(6,0,null,0,22,"core-context-menu",[],null,null,null,h.b,h.a)),i._30(7,245760,null,0,m.a,[_.a,g.a,i.t,s.a,[2,v.a],y.a],null,null),(e()(),i._55(-1,0,["\n        "])),(e()(),i._31(9,0,null,0,2,"core-context-menu-item",[],null,null,null,b.b,b.a)),i._30(10,770048,null,0,P.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"],hidden:[4,"hidden"]},null),i._47(131072,O.a,[_.a,i.j]),(e()(),i._55(-1,0,["\n        "])),(e()(),i._31(13,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},b.b,b.a)),i._30(14,770048,null,0,P.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),i._47(131072,O.a,[_.a,i.j]),(e()(),i._55(-1,0,["\n        "])),(e()(),i._31(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},b.b,b.a)),i._30(18,770048,null,0,P.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),i._47(131072,O.a,[_.a,i.j]),(e()(),i._55(-1,0,["\n        "])),(e()(),i._31(21,0,null,0,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch()&&o}return o},b.b,b.a)),i._30(22,770048,null,0,P.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),(e()(),i._55(-1,0,["\n        "])),(e()(),i._31(24,0,null,0,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},b.b,b.a)),i._30(25,770048,null,0,P.a,[m.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),i._48(26,{$a:0}),i._47(131072,O.a,[_.a,i.j]),(e()(),i._55(-1,0,["\n    "])),(e()(),i._55(-1,0,["\n"])),(e()(),i._55(-1,null,["\n\n"])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(32,16384,null,0,E.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0),e(t,7,0);e(t,10,0,i._56(t,10,0,i._44(t,11).transform("core.openinbrowser")),"open",n.externalUrl,900,!n.displayOpenInBrowser||!n.externalUrl||n.content&&n.content.compileComponent&&n.content.compileComponent.componentInstance&&!1===n.content.compileComponent.componentInstance.displayOpenInBrowser);e(t,14,0,i._56(t,14,0,i._44(t,15).transform("core.moduleintro")),"arrow-forward",800,!n.displayDescription||!n.description||n.content&&n.content.compileComponent&&n.content.compileComponent.componentInstance&&!1===n.content.compileComponent.componentInstance.displayDescription);e(t,18,0,i._56(t,18,0,i._44(t,19).transform("core.refresh")),n.refreshIcon,!1,700,!n.displayRefresh||n.content&&n.content.compileComponent&&n.content.compileComponent.componentInstance&&!1===n.content.compileComponent.componentInstance.displayRefresh);e(t,22,0,n.prefetchText,n.prefetchStatusIcon,!1,600,!n.displayPrefetch||!n.prefetchStatusIcon||n.content&&n.content.compileComponent&&n.content.compileComponent.componentInstance&&!1===n.content.compileComponent.componentInstance.displayPrefetch);e(t,25,0,i._56(t,25,0,i._44(t,27).transform("core.removefiles",e(t,26,0,n.size))),"cube","trash",500,!n.displaySize||!n.size||n.content&&n.content.compileComponent&&n.content.compileComponent.componentInstance&&!1===n.content.compileComponent.componentInstance.displaySize);e(t,32,0,n.component&&n.method)},null)}n.d(t,"b",function(){return A}),t.c=r,n.d(t,"a",function(){return D});var i=n(0),l=n(407),a=n(156),s=n(4),u=n(58),c=n(21),d=n(96),f=n(87),p=n(6),h=n(91),m=n(78),_=n(17),g=n(70),v=n(76),y=n(2),b=n(92),P=n(83),O=n(25),E=n(7),C=n(392),I=n(38),R=n(50),S=n(11),w=n(61),A=i._29({encapsulation:2,styles:[],data:{}}),D=i._27("core-site-plugins-module-index",C.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-module-index",[],null,null,null,r,A)),i._30(1,245760,null,0,C.a,[u.a,I.a,R.a,S.a,_.a,y.a,w.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",pageTitle:"pageTitle"},{},[])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,14,"a",[["class","item item-block"],["core-user-link",""],["ion-item",""],["text-wrap",""]],null,null,null,l.b,l.a)),i._30(1,1097728,null,3,a.a,[s.a,u.a,i.t,i.V,[2,c.a]],null,null),i._52(335544320,1,{contentLabel:0}),i._52(603979776,2,{_buttons:1}),i._52(603979776,3,{_icons:1}),i._30(5,16384,null,0,d.a,[],null,null),i._30(6,81920,null,0,f.a,[i.t,[2,p.a],[2,h.a]],{userId:[0,"userId"]},null),(e()(),i._55(-1,2,["\n    "])),(e()(),i._31(8,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,m.b,m.a)),i._30(9,16384,null,0,_.a,[],null,null),i._30(10,770048,null,0,g.a,[p.a,v.a,y.a,b.a,P.a,[2,h.a]],{user:[0,"user"]},null),(e()(),i._55(-1,2,["\n    "])),(e()(),i._31(12,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),i._55(13,null,["",""])),(e()(),i._55(-1,2,["\n"]))],function(e,t){e(t,6,0,t.context.$implicit.id);e(t,10,0,t.context.$implicit)},function(e,t){e(t,13,0,t.context.$implicit.fullname)})}function r(e){return i._57(0,[(e()(),i._26(16777216,null,null,1,null,o)),i._30(1,802816,null,0,O.j,[i._11,i._6,i.E],{ngForOf:[0,"ngForOf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.items)},null)}n.d(t,"a",function(){return I});var i=n(0),l=n(30),a=n(20),s=n(19),u=n(8),c=n(27),d=n(33),f=n(479),p=n(21),h=n(28),m=n(213),_=n(160),g=n(182),v=n(1),y=n(2),b=n(10),P=n(9),O=n(7),E=n(614),C=i._29({encapsulation:2,styles:[],data:{}}),I=i._27("core-user-tag-area",E.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-user-tag-area",[],null,null,null,r,C)),i._30(1,49152,null,0,E.a,[],null,null)],null,null)},{items:"items"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),r=n(1038),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.longPress=new o.v,this.el=e.nativeElement,this.el.setAttribute("tappable","")}return e.prototype.ngOnInit=function(){var e=this;this.pressGesture=new r.a(this.el),this.pressGesture.listen(),this.pressGesture.on("press",function(t){e.longPress.emit(t)})},e.prototype.ngOnDestroy=function(){this.pressGesture.destroy()},i([Object(o.O)(),l("design:type",Object)],e.prototype,"longPress",void 0),e=i([Object(o.s)({selector:"[longPress]"}),l("design:paramtypes",[o.t])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),r=n(6),i=n(24),l=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.timeUtils=t,this.logger=e.getInstance("CoreBytesToSizePipe")}return e.prototype.transform=function(e){if("string"==typeof e){var t=parseInt(e,10);if(isNaN(t))return this.logger.error("Invalid value received",e),e;e=t}return this.timeUtils.formatTime(e)},e=l([Object(o.S)({name:"coreDuration"}),a("design:paramtypes",[r.a,i.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.cdr=e,this.startTime=0,this.time=0,this.onEnd=new o.v}return e.prototype.ngOnInit=function(){this.time=this.startTime||0},e.prototype.ngOnChanges=function(e){e&&e.running&&(e.running.currentValue?this.start():this.stop()),e&&e.reset&&e.reset.currentValue&&this.resetChrono()},e.prototype.resetChrono=function(){this.stop(),this.time=this.startTime||0},e.prototype.start=function(){var e=this;if(!this.interval){var t=Date.now();this.interval=setInterval(function(){e.time+=Date.now()-t,t=Date.now(),void 0!==e.endTime&&e.time>e.endTime&&(e.stop(),e.onEnd.emit()),e.cdr.detectChanges()},200)}},e.prototype.stop=function(){clearInterval(this.interval),delete this.interval},e.prototype.ngOnDestroy=function(){this.stop()},r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"running",void 0),r([Object(o.D)(),i("design:type",Object)],e.prototype,"startTime",void 0),r([Object(o.D)(),i("design:type",Number)],e.prototype,"endTime",void 0),r([Object(o.D)(),i("design:type",Boolean)],e.prototype,"reset",void 0),r([Object(o.O)(),i("design:type",o.v)],e.prototype,"onEnd",void 0),e=r([Object(o.m)({selector:"core-chrono",template:'<span role="timer">{{ time / 1000 | coreSecondsToHMS }}</span>'}),i("design:paramtypes",[o.j])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n(3),i=n(1),l=n(41),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.translate=e,this.sitesProvider=t,this.filterProvider=n,this.siteSelected=new o.v}return e.prototype.ngOnInit=function(){var e=this;this.selectedSite=this.initialSite||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSites().then(function(t){var n=[];return t.forEach(function(t){n.push(e.filterProvider.formatText(t.siteName,{clean:!0,singleLine:!0,filter:!1},[],t.id).catch(function(){return t.siteName}).then(function(n){t.fullNameAndSiteName=e.translate.instant("core.fullnameandsitename",{fullname:t.fullName,sitename:n})}))}),!e.selectedSite&&t.length&&(e.selectedSite=t[0].id,e.siteSelected.emit(e.selectedSite)),Promise.all(n).then(function(){e.sites=t})})},a([Object(o.D)(),s("design:type",String)],e.prototype,"initialSite",void 0),a([Object(o.O)(),s("design:type",o.v)],e.prototype,"siteSelected",void 0),e=a([Object(o.m)({selector:"core-site-picker",templateUrl:"core-site-picker.html"}),s("design:paramtypes",[r.c,i.a,l.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),r=n(5),i=n(205),l=n(732),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},d=function(e){function t(t,n,o,r,i,l,a,s,u,c,d,f,p,h){return e.call(this,t,n,o,r,i,l,a,s,u,c,d,f,p,h)||this}return a(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.parent.add(this,!0)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.parent.remove(this)},t.prototype.push=function(t,n,o,r){var i=this;if(this.isTransitioning())return new Promise(function(e,l){setTimeout(function(){return i.push(t,n,o,r).then(e,l)},250)});var l=this.getViews();if(l.length>0){var a=l[l.length-1],s=a.getNavParams().data;if(a.name===t&&JSON.stringify(s)===JSON.stringify(n))return Promise.resolve()}return e.prototype.push.call(this,t,n,o,r)},t=s([Object(o.m)({selector:"core-ion-tab",template:'<div #viewport></div><div class="nav-decor"></div>',host:{"[attr.id]":"_tabId","[attr.aria-labelledby]":"_btnId",role:"tabpanel"},encapsulation:o._12.None}),c(11,Object(o.N)()),u("design:paramtypes",[l.a,r.c,r.e,r.v,o.t,o.M,o.V,o.o,o.j,r.i,i.a,r.g,r.h,o.u])],t)}(r.C)},function(e,t,n){"use strict";function o(e){return p._57(0,[(e()(),p._31(0,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,h.b,h.a)),p._30(1,1097728,null,3,m.a,[_.a,g.a,p.t,p.V,[2,v.a]],null,null),p._52(335544320,2,{contentLabel:0}),p._52(603979776,3,{_buttons:1}),p._52(603979776,4,{_icons:1}),p._30(5,16384,null,0,y.a,[],null,null),(e()(),p._55(-1,2,["\n            "])),(e()(),p._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),p._30(8,16384,[[2,4]],0,b.a,[g.a,p.t,p.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),p._55(9,null,["",""])),p._47(131072,P.a,[O.a,p.j]),(e()(),p._55(-1,2,["\n            "])),(e()(),p._31(12,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(e,t,n){var o=!0,r=e.component;if("keyup"===t){o=!1!==p._44(e,13)._keyup(n)&&o}if("ngModelChange"===t){o=!1!==(r.onlyMyEntries=n)&&o}if("ionChange"===t){o=!1!==r.onlyMyEntriesToggleChanged(r.onlyMyEntries)&&o}return o},E.b,E.a)),p._30(13,1228800,null,0,C.a,[_.a,g.a,I.a,p.t,p.V,R.a,[2,m.a],S.l,w.a,p.M],null,{ionChange:"ionChange"}),p._50(1024,null,A.l,function(e){return[e]},[C.a]),p._30(15,671744,null,0,A.q,[[8,null],[8,null],[8,null],[2,A.l]],{model:[0,"model"]},{update:"ngModelChange"}),p._50(2048,null,A.m,null,[A.q]),p._30(17,16384,null,0,A.n,[A.m],null,null),(e()(),p._55(-1,2,["\n        "]))],function(e,t){e(t,15,0,t.component.onlyMyEntries)},function(e,t){e(t,9,0,p._56(t,9,0,p._44(t,10).transform("addon.blog.showonlyyourentries")));e(t,12,0,p._44(t,13)._disabled,p._44(t,13)._value,p._44(t,13)._activated,p._44(t,17).ngClassUntouched,p._44(t,17).ngClassTouched,p._44(t,17).ngClassPristine,p._44(t,17).ngClassDirty,p._44(t,17).ngClassValid,p._44(t,17).ngClassInvalid,p._44(t,17).ngClassPending)})}function r(e){return p._57(0,[(e()(),p._31(0,0,null,null,2,"core-empty-box",[["icon","fa-newspaper-o"]],null,null,null,D.b,D.a)),p._30(1,49152,null,0,j.a,[],{message:[0,"message"],icon:[1,"icon"]},null),p._47(131072,P.a,[O.a,p.j])],function(e,t){e(t,1,0,p._56(t,1,0,p._44(t,2).transform("addon.blog.noentriesyet")),"fa-newspaper-o")},null)}function i(e){return p._57(0,[(e()(),p._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,h.b,h.a)),p._30(1,1097728,null,3,m.a,[_.a,g.a,p.t,p.V,[2,v.a]],null,null),p._52(335544320,11,{contentLabel:0}),p._52(603979776,12,{_buttons:1}),p._52(603979776,13,{_icons:1}),p._30(5,16384,null,0,y.a,[],null,null),(e()(),p._55(-1,2,["\n                        "])),(e()(),p._31(7,0,null,0,2,"div",[["item-start",""]],null,null,null,null,null)),(e()(),p._55(8,null,["",":"])),p._47(131072,P.a,[O.a,p.j]),(e()(),p._55(-1,2,["\n                        "])),(e()(),p._31(11,0,null,2,1,"core-tag-list",[],null,null,null,k.b,k.a)),p._30(12,49152,null,0,T.a,[x.a,[2,M.a]],{tags:[0,"tags"]},null),(e()(),p._55(-1,2,["\n                    "]))],function(e,t){e(t,12,0,t.parent.parent.context.$implicit.tags)},function(e,t){e(t,8,0,p._56(t,8,0,p._44(t,9).transform("core.tag.tags")))})}function l(e){return p._57(0,[(e()(),p._31(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,h.b,h.a)),p._30(1,1097728,null,3,m.a,[_.a,g.a,p.t,p.V,[2,v.a]],null,null),p._52(335544320,14,{contentLabel:0}),p._52(603979776,15,{_buttons:1}),p._52(603979776,16,{_icons:1}),p._30(5,16384,null,0,y.a,[],null,null),(e()(),p._55(-1,2,["\n                        "])),(e()(),p._31(7,0,null,2,1,"core-comments",[["area","format_blog"],["contextLevel","user"]],null,null,null,N.c,N.b)),p._30(8,770048,null,0,U.a,[x.a,F.a,L.a,H.a,[2,M.a]],{contextLevel:[0,"contextLevel"],instanceId:[1,"instanceId"],component:[2,"component"],itemId:[3,"itemId"],area:[4,"area"]},null),(e()(),p._55(-1,2,["\n                    "]))],function(e,t){e(t,8,0,"user",t.parent.parent.context.$implicit.userid,t.component.component,t.parent.parent.context.$implicit.id,"format_blog")},null)}function a(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"core-file",[],null,null,null,B.b,B.a)),p._30(1,245760,null,0,q.a,[L.a,G.a,V.a,K.a,W.a,z.a,$.a,H.a,Y.a,Q.a,X.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,t){e(t,1,0,t.context.$implicit,t.component.component,t.parent.parent.context.$implicit.id)},null)}function s(e){return p._57(0,[(e()(),p._31(0,0,null,null,8,"a",[["class","item item-block"],["core-link",""],["ion-item",""]],[[8,"href",4]],null,null,h.b,h.a)),p._30(1,1097728,null,3,m.a,[_.a,g.a,p.t,p.V,[2,v.a]],null,null),p._52(335544320,17,{contentLabel:0}),p._52(603979776,18,{_buttons:1}),p._52(603979776,19,{_icons:1}),p._30(5,16384,null,0,y.a,[],null,null),p._30(6,81920,null,0,J.a,[p.t,V.a,G.a,L.a,X.a,Z.a,[2,x.a],[2,ee.a],[2,M.a],Y.a],null,null),(e()(),p._55(7,2,["",""])),p._47(131072,P.a,[O.a,p.j])],function(e,t){e(t,6,0)},function(e,t){e(t,0,0,t.parent.parent.context.$implicit.uniquehash);e(t,7,0,p._56(t,7,0,p._44(t,8).transform("addon.blog.linktooriginalentry")))})}function u(e){return p._57(0,[(e()(),p._31(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),p._30(1,16384,null,0,te.a,[],null,null),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._31(3,0,null,null,6,"ion-note",[],null,null,null,null,null)),p._30(4,16384,null,0,ne.a,[g.a,p.t,p.V],null,null),(e()(),p._55(-1,null,["\n                            "])),(e()(),p._31(6,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._30(7,147456,null,0,oe.a,[g.a,p.t,p.V],{name:[0,"name"]},null),(e()(),p._55(8,null,[" ","\n                        "])),p._49(9,1),(e()(),p._55(-1,null,["\n                    "]))],function(e,t){e(t,7,0,"time")},function(e,t){e(t,6,0,p._44(t,7)._hidden);e(t,8,0,p._56(t,8,0,e(t,9,0,p._44(t.parent.parent.parent,1),t.parent.parent.context.$implicit.lastmodified)))})}function c(e){return p._57(0,[(e()(),p._31(0,0,null,null,67,"ion-card",[],null,null,null,null,null)),p._30(1,16384,null,0,re.a,[g.a,p.t,p.V],null,null),(e()(),p._55(-1,null,["\n                "])),(e()(),p._31(3,0,null,null,29,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,h.b,h.a)),p._30(4,1097728,null,3,m.a,[_.a,g.a,p.t,p.V,[2,v.a]],null,null),p._52(335544320,5,{contentLabel:0}),p._52(603979776,6,{_buttons:1}),p._52(603979776,7,{_icons:1}),p._30(8,16384,null,0,y.a,[],null,null),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._31(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,ie.b,ie.a)),p._30(11,16384,null,0,le.a,[],null,null),p._30(12,770048,null,0,ae.a,[x.a,L.a,G.a,W.a,H.a,[2,M.a]],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._31(14,0,null,2,9,"h2",[],null,null,null,null,null)),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._31(16,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),p._30(17,540672,null,0,se.a,[p.t,L.a,V.a,Y.a,O.a,I.a,G.a,X.a,ue.a,K.a,W.a,Z.a,[2,x.a],[2,ee.a],[2,M.a],ce.a,H.a,de.a,fe.a,pe.a,p._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._31(19,0,null,null,3,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),p._30(20,16384,null,0,ne.a,[g.a,p.t,p.V],null,null),(e()(),p._55(21,null,["\n                            ","\n                        "])),p._47(131072,P.a,[O.a,p.j]),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._31(25,0,null,2,6,"p",[],null,null,null,null,null)),(e()(),p._55(-1,null,["\n                        "])),(e()(),p._31(27,0,null,null,3,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),p._30(28,16384,null,0,ne.a,[g.a,p.t,p.V],null,null),(e()(),p._55(29,null,["\n                            ","\n                        "])),p._49(30,1),(e()(),p._55(31,null,["\n                        ","\n                    "])),(e()(),p._55(-1,2,["\n                "])),(e()(),p._55(-1,null,["\n                "])),(e()(),p._31(34,0,null,null,25,"ion-card-content",[],null,null,null,null,null)),p._30(35,16384,null,0,he.a,[g.a,p.t,p.V],null,null),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._31(37,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,h.b,h.a)),p._30(38,1097728,null,3,m.a,[_.a,g.a,p.t,p.V,[2,v.a]],null,null),p._52(335544320,8,{contentLabel:0}),p._52(603979776,9,{_buttons:1}),p._52(603979776,10,{_icons:1}),p._30(42,16384,null,0,y.a,[],null,null),(e()(),p._55(-1,2,["\n                        "])),(e()(),p._31(44,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),p._30(45,540672,null,0,se.a,[p.t,L.a,V.a,Y.a,O.a,I.a,G.a,X.a,ue.a,K.a,W.a,Z.a,[2,x.a],[2,ee.a],[2,M.a],ce.a,H.a,de.a,fe.a,pe.a,p._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"]},null),(e()(),p._55(-1,2,["\n                    "])),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._26(16777216,null,null,1,null,i)),p._30(49,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._26(16777216,null,null,1,null,l)),p._30(52,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._26(16777216,null,null,1,null,a)),p._30(55,802816,null,0,me.j,[p._11,p._6,p.E],{ngForOf:[0,"ngForOf"]},null),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._26(16777216,null,null,1,null,s)),p._30(58,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n                "])),(e()(),p._55(-1,null,["\n                "])),(e()(),p._31(61,0,null,null,5,"ion-row",[["class","row"],["text-center",""]],null,null,null,null,null)),p._30(62,16384,null,0,_e.a,[],null,null),(e()(),p._55(-1,null,["\n                    "])),(e()(),p._26(16777216,null,null,1,null,u)),p._30(65,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n                "])),(e()(),p._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,12,0,t.parent.context.$implicit.user,t.parent.context.$implicit.courseid);e(t,17,0,t.parent.context.$implicit.subject,n.contextLevel,n.contextInstanceId);e(t,45,0,t.parent.context.$implicit.summary,n.component,t.parent.context.$implicit.id,n.contextLevel,n.contextInstanceId);e(t,49,0,n.tagsEnabled&&t.parent.context.$implicit.tags&&t.parent.context.$implicit.tags.length>0);e(t,52,0,n.commentsEnabled);e(t,55,0,t.parent.context.$implicit.attachmentfiles);e(t,58,0,t.parent.context.$implicit.uniquehash);e(t,65,0,t.parent.context.$implicit.lastmodified>t.parent.context.$implicit.created)},function(e,t){e(t,21,0,p._56(t,21,0,p._44(t,22).transform("addon.blog."+t.parent.context.$implicit.publishTranslated)));e(t,29,0,p._56(t,29,0,e(t,30,0,p._44(t.parent.parent,0),t.parent.context.$implicit.created)));e(t,31,0,t.parent.context.$implicit.user&&t.parent.context.$implicit.user.fullname)})}function d(e){return p._57(0,[(e()(),p._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),p._55(-1,null,["\n            "])),(e()(),p._26(16777216,null,null,1,null,c)),p._30(3,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,!n.onlyMyEntries||t.context.$implicit.userid==n.currentUserId)},null)}function f(e){return p._57(0,[p._47(0,ge.a,[ue.a,O.a,ve.a]),p._47(0,ye.a,[ue.a,O.a]),p._52(402653184,1,{content:0}),(e()(),p._31(3,0,null,null,26,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,be.b,be.a)),p._30(4,4374528,[[1,4]],0,ee.a,[g.a,I.a,w.a,p.t,p.V,Pe.a,Oe.a,p.M,[2,Ee.a],[2,x.a]],null,null),(e()(),p._55(-1,1,["\n    "])),(e()(),p._31(6,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refresh(n)&&o}return o},null,null)),p._30(7,212992,null,0,Ce.a,[I.a,ee.a,p.M,S.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),p._55(-1,null,["\n        "])),(e()(),p._31(9,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ie.b,Ie.a)),p._30(10,114688,null,0,Re.a,[Ce.a,g.a],{pullingText:[0,"pullingText"]},null),p._47(131072,P.a,[O.a,p.j]),(e()(),p._55(-1,null,["\n    "])),(e()(),p._55(-1,1,["\n    "])),(e()(),p._31(14,0,null,1,14,"core-loading",[["class","core-loading-center"]],null,null,null,Se.b,Se.a)),p._30(15,638976,null,0,we.a,[O.a,p.t,H.a,G.a],{hideUntil:[0,"hideUntil"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,o)),p._30(18,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,r)),p._30(21,16384,null,0,me.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,d)),p._30(24,802816,null,0,me.j,[p._11,p._6,p.E],{ngForOf:[0,"ngForOf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._31(26,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.loadMore(n)&&o}return o},Ae.b,Ae.a)),p._30(27,573440,null,0,De.a,[[2,ee.a],V.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),p._55(-1,0,["\n    "])),(e()(),p._55(-1,1,["\n"])),(e()(),p._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,7,0,n.loaded);e(t,10,0,p._34(1,"",p._56(t,10,0,p._44(t,11).transform("core.pulltorefresh")),""));e(t,15,0,n.loaded);e(t,18,0,n.showMyEntriesToggle);e(t,21,0,n.entries&&0==n.entries.length);e(t,24,0,n.entries);e(t,27,0,n.canLoadMore,n.loadMoreError)},function(e,t){e(t,3,0,p._44(t,4).statusbarPadding,p._44(t,4)._hasRefresher);e(t,6,0,"inactive"!==p._44(t,7).state,p._44(t,7)._top);e(t,9,0,p._44(t,10).r.state)})}n.d(t,"b",function(){return Me}),t.c=f,n.d(t,"a",function(){return Ne});var p=n(0),h=n(30),m=n(20),_=n(19),g=n(8),v=n(27),y=n(33),b=n(67),P=n(25),O=n(17),E=n(724),C=n(315),I=n(16),R=n(187),S=n(43),w=n(34),A=n(23),D=n(124),j=n(114),k=n(494),T=n(324),x=n(21),M=n(28),N=n(480),U=n(321),F=n(153),L=n(1),H=n(9),B=n(249),q=n(215),G=n(2),V=n(4),K=n(18),W=n(10),z=n(115),$=n(66),Y=n(11),Q=n(56),X=n(22),J=n(174),Z=n(15),ee=n(29),te=n(120),ne=n(248),oe=n(47),re=n(89),ie=n(213),le=n(160),ae=n(182),se=n(48),ue=n(6),ce=n(44),de=n(41),fe=n(32),pe=n(36),he=n(486),me=n(7),_e=n(119),ge=n(377),ve=n(24),ye=n(443),be=n(181),Pe=n(35),Oe=n(107),Ee=n(39),Ce=n(159),Ie=n(212),Re=n(173),Se=n(54),we=n(51),Ae=n(373),De=n(273),je=n(523),ke=n(206),Te=n(46),xe=n(163),Me=p._29({encapsulation:2,styles:[],data:{}}),Ne=p._27("addon-blog-entries",je.a,function(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"addon-blog-entries",[],null,null,null,f,Me)),p._30(1,114688,null,0,je.a,[ke.a,V.a,Te.a,L.a,G.a,F.a,xe.a],null,null)],function(e,t){e(t,1,0)},null)},{userId:"userId",courseId:"courseId",cmId:"cmId",entryId:"entryId",groupId:"groupId",tagId:"tagId"},{},[])},function(e,t,n){"use strict";function o(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,x.b,x.a)),T._30(1,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,2,{contentLabel:0}),T._52(603979776,3,{_buttons:1}),T._52(603979776,4,{_icons:1}),T._30(5,16384,null,0,L.a,[],null,null),(e()(),T._55(6,2,["\n                    ","\n                "])),T._47(131072,H.a,[B.a,T.j])],null,function(e,t){e(t,6,0,T._56(t,6,0,T._44(t,7).transform("addon.competency.coursecompetencyratingsarepushedtouserplans")))})}function r(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"ion-item",[["class","item item-block"],["color","danger"],["text-wrap",""]],null,null,null,x.b,x.a)),T._30(1,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],{color:[0,"color"]},null),T._52(335544320,5,{contentLabel:0}),T._52(603979776,6,{_buttons:1}),T._52(603979776,7,{_icons:1}),T._30(5,16384,null,0,L.a,[],null,null),(e()(),T._55(6,2,["\n                    ","\n                "])),T._47(131072,H.a,[B.a,T.j])],function(e,t){e(t,1,0,"danger")},function(e,t){e(t,6,0,T._56(t,6,0,T._44(t,7).transform("addon.competency.coursecompetencyratingsarenotpushedtouserplans")))})}function i(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),T._55(-1,null,["\n                "])),(e()(),T._26(16777216,null,null,1,null,o)),T._30(3,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                "])),(e()(),T._26(16777216,null,null,1,null,r)),T._30(6,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,3,0,n.competencies.settings.pushratingstouserplans);e(t,6,0,!n.competencies.settings.pushratingstouserplans)},null)}function l(e){return T._57(0,[(e()(),T._31(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,x.b,x.a)),T._30(1,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,8,{contentLabel:0}),T._52(603979776,9,{_buttons:1}),T._52(603979776,10,{_icons:1}),T._30(5,16384,null,0,L.a,[],null,null),(e()(),T._55(6,2,["\n                ","\n                "])),T._48(7,{x:0,y:1}),T._48(8,{$a:0}),T._47(131072,H.a,[B.a,T.j]),(e()(),T._31(10,0,null,2,1,"core-progress-bar",[],null,null,null,G.b,G.a)),T._30(11,573440,null,0,V.a,[K.c],{progress:[0,"progress"]},null),(e()(),T._55(-1,2,["\n            "]))],function(e,t){e(t,11,0,t.component.competencies.statistics.proficientcompetencypercentage)},function(e,t){var n=t.component;e(t,6,0,T._56(t,6,0,T._44(t,9).transform("addon.competency.xcompetenciesproficientoutofyincourse",e(t,8,0,e(t,7,0,n.competencies.statistics.proficientcompetencycount,n.competencies.statistics.competencycount)))))})}function a(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                    "])),(e()(),T._31(2,0,null,null,1,"a",[],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openCompetencySummary(e.context.$implicit.id)&&o}return o},null,null)),(e()(),T._55(3,null,["\n                        "," - ","\n                    "])),(e()(),T._55(-1,null,["\n                "]))],null,function(e,t){e(t,3,0,t.context.$implicit.shortname,t.context.$implicit.idnumber)})}function s(e){return T._57(0,[(e()(),T._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,x.b,x.a)),T._30(1,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,11,{contentLabel:0}),T._52(603979776,12,{_buttons:1}),T._52(603979776,13,{_icons:1}),T._30(5,16384,null,0,L.a,[],null,null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(7,0,null,2,2,"strong",[],null,null,null,null,null)),(e()(),T._55(8,null,["",""])),T._47(131072,H.a,[B.a,T.j]),(e()(),T._55(-1,2,[":\n                "])),(e()(),T._26(16777216,null,2,1,null,a)),T._30(12,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,2,["\n            "]))],function(e,t){e(t,12,0,t.component.competencies.statistics.leastproficient)},function(e,t){e(t,8,0,T._56(t,8,0,T._44(t,9).transform("addon.competency.competenciesmostoftennotproficientincourse")))})}function u(e){return T._57(0,[(e()(),T._31(0,0,null,null,11,"ion-card",[],null,null,null,null,null)),T._30(1,16384,null,0,W.a,[U.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,i)),T._30(4,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,l)),T._30(7,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,s)),T._30(10,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,4,0,n.competencies.cangradecompetencies);e(t,7,0,n.competencies.statistics.canbegradedincourse);e(t,10,0,n.competencies.statistics.canmanagecoursecompetencies&&n.competencies.statistics.leastproficientcount>0)},null)}function c(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"h3",[["margin-horizontal",""]],null,null,null,null,null)),(e()(),T._55(1,null,["",""])),T._47(131072,H.a,[B.a,T.j])],null,function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.competency.coursecompetencies")))})}function d(e){return T._57(0,[(e()(),T._31(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),T._30(1,16384,null,0,W.a,[U.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n             "])),(e()(),T._31(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,x.b,x.a)),T._30(4,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,14,{contentLabel:0}),T._52(603979776,15,{_buttons:1}),T._52(603979776,16,{_icons:1}),T._30(8,16384,null,0,L.a,[],null,null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,z.b,z.a)),T._30(11,16384,null,0,$.a,[],null,null),T._30(12,770048,null,0,Y.a,[Q.a,X.a,J.a,Z.a,ee.a,[2,te.a]],{user:[0,"user"]},null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),T._55(15,null,["",""])),(e()(),T._55(-1,2,["\n            "])),(e()(),T._55(-1,null,["\n        "]))],function(e,t){e(t,12,0,t.component.user)},function(e,t){e(t,15,0,t.component.user.fullname)})}function f(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-empty-box",[["icon","ribbon"]],null,null,null,ne.b,ne.a)),T._30(1,49152,null,0,oe.a,[],{message:[0,"message"],icon:[1,"icon"]},null),T._47(131072,H.a,[B.a,T.j])],function(e,t){e(t,1,0,T._34(1,"",T._56(t,1,0,T._44(t,2).transform("addon.competency.nocompetenciesincourse")),""),"ribbon")},null)}function p(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),T._30(1,16384,null,0,re.a,[U.a,T.t,T.V],{color:[0,"color"]},null),(e()(),T._55(2,null,["",""]))],function(e,t){e(t,1,0,t.parent.context.$implicit.usercompetencycourse.proficiency?"success":"danger")},function(e,t){e(t,2,0,t.parent.context.$implicit.usercompetencycourse.gradename)})}function h(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._31(2,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),T._30(3,540672,null,0,ie.a,[T.t,X.a,le.a,ae.a,B.a,se.a,J.a,ue.a,ce.a,de.a,Z.a,fe.a,[2,Q.a],[2,pe.a],[2,te.a],he.a,ee.a,me.a,_e.a,ge.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),T._55(-1,null,["\n                    "]))],function(e,t){e(t,3,0,t.parent.context.$implicit.competency.description,"course",t.component.courseId)},null)}function m(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"a",[["core-link",""]],[[8,"href",4],[8,"title",0]],null,null,null,null)),T._30(1,81920,null,0,ve.a,[T.t,le.a,J.a,X.a,ue.a,fe.a,[2,Q.a],[2,pe.a],[2,te.a],ae.a],null,null),(e()(),T._55(2,null,["",""]))],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,t.parent.context.$implicit.comppath.pluginbaseurl+"/competencies.php?competencyframeworkid="+t.parent.context.$implicit.comppath.framework.id+"&pagecontextid="+t.parent.context.$implicit.comppath.pagecontextid,t.parent.context.$implicit.comppath.framework.name);e(t,2,0,t.parent.context.$implicit.comppath.framework.name)})}function _(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),T._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.comppath.framework.name)})}function g(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"a",[],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openCompetencySummary(e.parent.context.$implicit.id)&&o}return o},null,null)),(e()(),T._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.name)})}function v(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),T._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.name)})}function y(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),T._55(-1,null,["/"]))],null,null)}function b(e){return T._57(0,[(e()(),T._31(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                            "])),(e()(),T._26(16777216,null,null,1,null,g)),T._30(3,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                            "])),(e()(),T._26(16777216,null,null,1,null,v)),T._30(6,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                            "])),(e()(),T._26(16777216,null,null,1,null,y)),T._30(9,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                        "]))],function(e,t){e(t,3,0,t.parent.context.$implicit.comppath.showlinks);e(t,6,0,!t.parent.context.$implicit.comppath.showlinks);e(t,9,0,!t.context.$implicit.last)},null)}function P(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),T._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.text)})}function O(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),T._55(-1,null,["\n                            "])),(e()(),T._26(16777216,null,null,1,null,P)),T._30(3,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                        "]))],function(e,t){e(t,3,0,t.context.$implicit.selected)},null)}function E(e){return T._57(0,[(e()(),T._31(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._31(2,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),T._55(3,null,["",""])),T._47(131072,H.a,[B.a,T.j]),(e()(),T._55(-1,null,["\n                         "])),(e()(),T._26(16777216,null,null,1,null,O)),T._30(7,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n                    "]))],function(e,t){e(t,7,0,t.parent.context.$implicit.ruleoutcomeoptions)},function(e,t){e(t,3,0,T._56(t,3,0,T._44(t,4).transform("addon.competency.uponcoursecompletion")))})}function C(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),T._55(1,null,["\n                            ","\n                        "])),T._47(131072,H.a,[B.a,T.j])],null,function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.competency.noactivities")))})}function I(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"img",[["alt",""],["class","core-module-icon"],["core-external-content",""],["item-start",""],["role","presentation"]],null,null,null,null,null)),T._30(1,4734976,null,0,ye.a,[T.t,ce.a,de.a,se.a,X.a,le.a,ue.a,Z.a,J.a],{src:[0,"src"]},null)],function(e,t){e(t,1,0,t.parent.context.$implicit.iconurl)},null)}function R(e){return T._57(0,[(e()(),T._31(0,0,null,null,13,"a",[["capture","true"],["class","core-course-module-handler item-media item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4],[8,"title",0]],null,null,x.b,x.a)),T._30(1,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,23,{contentLabel:0}),T._52(603979776,24,{_buttons:1}),T._52(603979776,25,{_icons:1}),T._30(5,16384,null,0,L.a,[],null,null),T._30(6,81920,null,0,ve.a,[T.t,le.a,J.a,X.a,ue.a,fe.a,[2,Q.a],[2,pe.a],[2,te.a],ae.a],{capture:[0,"capture"]},null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._26(16777216,null,0,1,null,I)),T._30(9,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._31(11,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),T._30(12,540672,null,0,ie.a,[T.t,X.a,le.a,ae.a,B.a,se.a,J.a,ue.a,ce.a,de.a,Z.a,fe.a,[2,Q.a],[2,pe.a],[2,te.a],he.a,ee.a,me.a,_e.a,ge.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),T._55(-1,2,["\n                        "]))],function(e,t){var n=t.component;e(t,6,0,"true");e(t,9,0,t.context.$implicit.iconurl);e(t,12,0,t.context.$implicit.name,"module",t.context.$implicit.id,n.courseId)},function(e,t){e(t,0,0,t.context.$implicit.url,t.context.$implicit.name)})}function S(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),T._55(1,null,["\n                            ","\n                        "])),T._47(131072,H.a,[B.a,T.j])],null,function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.competency.nouserplanswithcompetency")))})}function w(e){return T._57(0,[(e()(),T._31(0,0,null,null,10,"a",[["capture","true"],["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4],[8,"title",0]],null,null,x.b,x.a)),T._30(1,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,26,{contentLabel:0}),T._52(603979776,27,{_buttons:1}),T._52(603979776,28,{_icons:1}),T._30(5,16384,null,0,L.a,[],null,null),T._30(6,81920,null,0,ve.a,[T.t,le.a,J.a,X.a,ue.a,fe.a,[2,Q.a],[2,pe.a],[2,te.a],ae.a],{capture:[0,"capture"]},null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._31(8,16777216,null,2,1,"core-format-text",[["contextLevel","user"]],null,null,null,null,null)),T._30(9,540672,null,0,ie.a,[T.t,X.a,le.a,ae.a,B.a,se.a,J.a,ue.a,ce.a,de.a,Z.a,fe.a,[2,Q.a],[2,pe.a],[2,te.a],he.a,ee.a,me.a,_e.a,ge.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),T._55(-1,2,["\n                        "]))],function(e,t){e(t,6,0,"true");e(t,9,0,t.context.$implicit.name,"user",t.context.$implicit.userid)},function(e,t){e(t,0,0,t.context.$implicit.url,t.context.$implicit.name)})}function A(e){return T._57(0,[(e()(),T._31(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._31(2,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),T._55(3,null,["",""])),T._47(131072,H.a,[B.a,T.j]),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,S)),T._30(7,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,w)),T._30(10,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n                    "]))],function(e,t){e(t,7,0,0==t.parent.context.$implicit.plans.length);e(t,10,0,t.parent.context.$implicit.plans)},function(e,t){e(t,3,0,T._56(t,3,0,T._44(t,4).transform("addon.competency.userplans")))})}function D(e){return T._57(0,[(e()(),T._31(0,0,null,null,65,"ion-card",[],null,null,null,null,null)),T._30(1,16384,null,0,W.a,[U.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n                "])),(e()(),T._31(3,0,null,null,15,"ion-item",[["class","item item-block"],["detail-push",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openCompetency(e.context.$implicit.competency.id)&&o}return o},x.b,x.a)),T._30(4,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,17,{contentLabel:0}),T._52(603979776,18,{_buttons:1}),T._52(603979776,19,{_icons:1}),T._30(8,16384,null,0,L.a,[],null,null),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._31(10,0,null,2,4,"h2",[],null,null,null,null,null)),(e()(),T._31(11,0,null,null,3,"strong",[],null,null,null,null,null)),(e()(),T._55(12,null,[""," "])),(e()(),T._31(13,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),T._55(14,null,["",""])),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._26(16777216,null,4,1,null,p)),T._30(17,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._55(-1,null,["\n                "])),(e()(),T._31(20,0,null,null,44,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,x.b,x.a)),T._30(21,1097728,null,3,M.a,[N.a,U.a,T.t,T.V,[2,F.a]],null,null),T._52(335544320,20,{contentLabel:0}),T._52(603979776,21,{_buttons:1}),T._52(603979776,22,{_icons:1}),T._30(25,16384,null,0,L.a,[],null,null),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._26(16777216,null,2,1,null,h)),T._30(28,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._31(30,0,null,2,14,"div",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._31(32,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),T._55(33,null,["",""])),T._47(131072,H.a,[B.a,T.j]),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,m)),T._30(37,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,_)),T._30(40,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                        /\n                        "])),(e()(),T._26(16777216,null,null,1,null,b)),T._30(43,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n                    "])),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._26(16777216,null,2,1,null,E)),T._30(47,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._31(49,0,null,2,11,"div",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._31(51,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),T._55(52,null,["",""])),T._47(131072,H.a,[B.a,T.j]),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,C)),T._30(56,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,R)),T._30(59,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n                    "])),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._26(16777216,null,2,1,null,A)),T._30(63,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,17,0,t.context.$implicit.usercompetencycourse&&t.context.$implicit.usercompetencycourse.gradename);e(t,28,0,t.context.$implicit.competency.description);e(t,37,0,t.context.$implicit.comppath.showlinks);e(t,40,0,!t.context.$implicit.comppath.showlinks);e(t,43,0,t.context.$implicit.comppath.ancestors);e(t,47,0,n.competencies.statistics.canmanagecoursecompetencies);e(t,56,0,0==t.context.$implicit.coursemodules.length);e(t,59,0,t.context.$implicit.coursemodules);e(t,63,0,t.context.$implicit.plans)},function(e,t){e(t,3,0,t.context.$implicit.competency.shortname);e(t,12,0,t.context.$implicit.competency.shortname);e(t,14,0,t.context.$implicit.competency.idnumber);e(t,33,0,T._56(t,33,0,T._44(t,34).transform("addon.competency.path")));e(t,52,0,T._56(t,52,0,T._44(t,53).transform("addon.competency.activities")))})}function j(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,D)),T._30(3,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,t.component.competencies.competencies)},null)}function k(e){return T._57(0,[T._52(402653184,1,{content:0}),(e()(),T._31(1,0,null,null,29,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,be.b,be.a)),T._30(2,4374528,[[1,4]],0,pe.a,[U.a,se.a,Pe.a,T.t,T.V,Oe.a,Ee.a,T.M,[2,Ce.a],[2,Q.a]],null,null),(e()(),T._55(-1,1,["\n    "])),(e()(),T._31(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refreshCourseCompetencies(n)&&o}return o},null,null)),T._30(5,212992,null,0,Ie.a,[se.a,pe.a,T.M,Re.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Se.b,Se.a)),T._30(8,114688,null,0,we.a,[Ie.a,U.a],{pullingText:[0,"pullingText"]},null),T._47(131072,H.a,[B.a,T.j]),(e()(),T._55(-1,null,["\n    "])),(e()(),T._55(-1,1,["\n    "])),(e()(),T._31(12,0,null,1,17,"core-loading",[],null,null,null,Ae.b,Ae.a)),T._30(13,638976,null,0,De.a,[B.a,T.t,ee.a,J.a],{hideUntil:[0,"hideUntil"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,u)),T._30(16,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n        "])),(e()(),T._26(16777216,null,0,1,null,c)),T._30(19,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,d)),T._30(22,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,f)),T._30(25,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n        "])),(e()(),T._26(16777216,null,0,1,null,j)),T._30(28,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._55(-1,1,["\n"])),(e()(),T._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.competenciesLoaded);e(t,8,0,T._34(1,"",T._56(t,8,0,T._44(t,9).transform("core.pulltorefresh")),""));e(t,13,0,n.competenciesLoaded);e(t,16,0,!n.user&&n.competencies&&n.competencies.statistics.competencycount>0);e(t,19,0,n.competencies&&n.competencies.statistics.competencycount>0);e(t,22,0,n.user);e(t,25,0,n.competencies&&0==n.competencies.statistics.competencycount);e(t,28,0,n.competencies)},function(e,t){e(t,1,0,T._44(t,2).statusbarPadding,T._44(t,2)._hasRefresher);e(t,4,0,"inactive"!==T._44(t,5).state,T._44(t,5)._top);e(t,7,0,T._44(t,8).r.state)})}n.d(t,"b",function(){return xe}),t.c=k,n.d(t,"a",function(){return Me});var T=n(0),x=n(30),M=n(20),N=n(19),U=n(8),F=n(27),L=n(33),H=n(25),B=n(17),q=n(7),G=n(485),V=n(319),K=n(79),W=n(89),z=n(213),$=n(160),Y=n(182),Q=n(21),X=n(1),J=n(2),Z=n(10),ee=n(9),te=n(28),ne=n(124),oe=n(114),re=n(143),ie=n(48),le=n(4),ae=n(11),se=n(16),ue=n(22),ce=n(6),de=n(18),fe=n(15),pe=n(29),he=n(44),me=n(41),_e=n(32),ge=n(36),ve=n(174),ye=n(229),be=n(181),Pe=n(34),Oe=n(35),Ee=n(107),Ce=n(39),Ie=n(159),Re=n(43),Se=n(212),we=n(173),Ae=n(54),De=n(51),je=n(525),ke=n(165),Te=n(375),xe=T._29({encapsulation:2,styles:[],data:{}}),Me=T._27("addon-competency-course",je.a,function(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"addon-competency-course",[],null,null,null,k,xe)),T._30(1,114688,null,0,je.a,[Q.a,Z.a,le.a,ke.a,Te.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,t,n){"use strict";function o(e){return h._57(0,[(e()(),h._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),h._55(1,null,["",""])),h._47(131072,m.a,[_.a,h.j])],null,function(e,t){e(t,1,0,h._56(t,1,0,h._44(t,2).transform("addon.coursecompletion.criteriarequiredall")))})}function r(e){return h._57(0,[(e()(),h._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),h._55(1,null,["",""])),h._47(131072,m.a,[_.a,h.j])],null,function(e,t){e(t,1,0,h._56(t,1,0,h._44(t,2).transform("addon.coursecompletion.criteriarequiredany")))})}function i(e){return h._57(0,[(e()(),h._31(0,0,null,null,36,"ion-card",[],null,null,null,null,null)),h._30(1,16384,null,0,g.a,[v.a,h.t,h.V],null,null),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(3,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,y.b,y.a)),h._30(4,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,1,{contentLabel:0}),h._52(603979776,2,{_buttons:1}),h._52(603979776,3,{_icons:1}),h._30(8,16384,null,0,E.a,[],null,null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),h._55(11,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(14,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),h._55(15,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,2,["\n            "])),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(19,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,y.b,y.a)),h._30(20,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,4,{contentLabel:0}),h._52(603979776,5,{_buttons:1}),h._52(603979776,6,{_icons:1}),h._30(24,16384,null,0,E.a,[],null,null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(26,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),h._55(27,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,2,["\n                "])),(e()(),h._26(16777216,null,2,1,null,o)),h._30(31,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._26(16777216,null,2,1,null,r)),h._30(34,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,31,0,1===n.completion.aggregation);e(t,34,0,2===n.completion.aggregation)},function(e,t){var n=t.component;e(t,11,0,h._56(t,11,0,h._44(t,12).transform("addon.coursecompletion.status")));e(t,15,0,h._56(t,15,0,h._44(t,16).transform(n.statusText)));e(t,27,0,h._56(t,27,0,h._44(t,28).transform("addon.coursecompletion.required")))})}function l(e){return h._57(0,[(e()(),h._31(0,0,null,null,17,"ion-item",[["class","hidden-tablet item item-block"],["text-wrap",""]],null,null,null,y.b,y.a)),h._30(1,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,10,{contentLabel:0}),h._52(603979776,11,{_buttons:1}),h._52(603979776,12,{_icons:1}),h._30(5,16384,null,0,E.a,[],null,null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),h._31(8,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),h._30(9,540672,null,0,I.a,[h.t,R.a,S.a,w.a,_.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,[2,N.a],[2,U.a],[2,F.a],L.a,H.a,B.a,q.a,G.a,h._11],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),h._31(12,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),h._30(13,540672,null,0,I.a,[h.t,R.a,S.a,w.a,_.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,[2,N.a],[2,U.a],[2,F.a],L.a,H.a,B.a,q.a,G.a,h._11],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(15,0,null,4,1,"strong",[["item-end",""]],null,null,null,null,null)),(e()(),h._55(16,null,["",""])),(e()(),h._55(-1,2,["\n            "]))],function(e,t){e(t,9,0,t.context.$implicit.details.criteria,"true",!1);e(t,13,0,t.context.$implicit.details.requirement,"true",!1)},function(e,t){e(t,16,0,t.context.$implicit.status)})}function a(e){return h._57(0,[(e()(),h._31(0,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(1,16384,null,0,V.a,[],null,null),(e()(),h._55(2,null,["",""])),h._49(3,2)],null,function(e,t){e(t,2,0,h._56(t,2,0,e(t,3,0,h._44(t.parent.parent.parent,0),1e3*t.parent.context.$implicit.timecompleted,"strftimedatetimeshort")))})}function s(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(1,16384,null,0,V.a,[],null,null)],null,null)}function u(e){return h._57(0,[(e()(),h._31(0,0,null,null,32,"ion-row",[["class","row"]],null,null,null,null,null)),h._30(1,16384,null,0,K.a,[],null,null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(3,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(4,16384,null,0,V.a,[],null,null),(e()(),h._31(5,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),h._30(6,540672,null,0,I.a,[h.t,R.a,S.a,w.a,_.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,[2,N.a],[2,U.a],[2,F.a],L.a,H.a,B.a,q.a,G.a,h._11],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(8,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(9,16384,null,0,V.a,[],null,null),(e()(),h._31(10,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),h._30(11,540672,null,0,I.a,[h.t,R.a,S.a,w.a,_.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,[2,N.a],[2,U.a],[2,F.a],L.a,H.a,B.a,q.a,G.a,h._11],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(13,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(14,16384,null,0,V.a,[],null,null),(e()(),h._31(15,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),h._30(16,540672,null,0,I.a,[h.t,R.a,S.a,w.a,_.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,[2,N.a],[2,U.a],[2,F.a],L.a,H.a,B.a,q.a,G.a,h._11],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(18,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(19,16384,null,0,V.a,[],null,null),(e()(),h._31(20,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),h._30(21,540672,null,0,I.a,[h.t,R.a,S.a,w.a,_.a,A.a,D.a,j.a,k.a,T.a,x.a,M.a,[2,N.a],[2,U.a],[2,F.a],L.a,H.a,B.a,q.a,G.a,h._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(23,0,null,null,2,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(24,16384,null,0,V.a,[],null,null),(e()(),h._55(25,null,["",""])),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._26(16777216,null,null,1,null,a)),h._30(28,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._26(16777216,null,null,1,null,s)),h._30(31,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n                "]))],function(e,t){e(t,6,0,t.context.$implicit.title,"true",!1);e(t,11,0,t.context.$implicit.details.criteria,"true",!1);e(t,16,0,t.context.$implicit.details.requirement,"true",!1);e(t,21,0,t.context.$implicit.details.status,!1);e(t,28,0,t.context.$implicit.timecompleted);e(t,31,0,!t.context.$implicit.timecompleted)},function(e,t){e(t,25,0,t.context.$implicit.status)})}function c(e){return h._57(0,[(e()(),h._31(0,0,null,null,65,"ion-card",[],null,null,null,null,null)),h._30(1,16384,null,0,g.a,[v.a,h.t,h.V],null,null),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,y.b,y.a)),h._30(4,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,7,{contentLabel:0}),h._52(603979776,8,{_buttons:1}),h._52(603979776,9,{_icons:1}),h._30(8,16384,null,0,W.a,[v.a,h.t,h.V],null,null),(e()(),h._55(9,2,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n            "])),(e()(),h._26(16777216,null,null,1,null,l)),h._30(13,802816,null,0,C.j,[h._11,h._6,h.E],{ngForOf:[0,"ngForOf"]},null),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(15,0,null,null,49,"ion-item",[["class","hidden-phone item item-block"],["text-wrap",""]],null,null,null,y.b,y.a)),h._30(16,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,13,{contentLabel:0}),h._52(603979776,14,{_buttons:1}),h._52(603979776,15,{_icons:1}),h._30(20,16384,null,0,E.a,[],null,null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(22,0,null,2,38,"ion-row",[["class","row"]],null,null,null,null,null)),h._30(23,16384,null,0,K.a,[],null,null),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(25,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(26,16384,null,0,V.a,[],null,null),(e()(),h._31(27,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),h._55(28,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(31,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(32,16384,null,0,V.a,[],null,null),(e()(),h._31(33,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),h._55(34,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(37,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(38,16384,null,0,V.a,[],null,null),(e()(),h._31(39,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),h._55(40,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(43,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(44,16384,null,0,V.a,[],null,null),(e()(),h._31(45,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),h._55(46,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(49,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(50,16384,null,0,V.a,[],null,null),(e()(),h._31(51,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),h._55(52,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n                    "])),(e()(),h._31(55,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),h._30(56,16384,null,0,V.a,[],null,null),(e()(),h._31(57,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),h._55(58,null,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n                "])),(e()(),h._55(-1,2,["\n                "])),(e()(),h._26(16777216,null,2,1,null,u)),h._30(63,802816,null,0,C.j,[h._11,h._6,h.E],{ngForOf:[0,"ngForOf"]},null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,13,0,n.completion.completions);e(t,63,0,n.completion.completions)},function(e,t){e(t,9,0,h._56(t,9,0,h._44(t,10).transform("addon.coursecompletion.requiredcriteria")));e(t,28,0,h._56(t,28,0,h._44(t,29).transform("addon.coursecompletion.criteriagroup")));e(t,34,0,h._56(t,34,0,h._44(t,35).transform("addon.coursecompletion.criteria")));e(t,40,0,h._56(t,40,0,h._44(t,41).transform("addon.coursecompletion.requirement")));e(t,46,0,h._56(t,46,0,h._44(t,47).transform("addon.coursecompletion.status")));e(t,52,0,h._56(t,52,0,h._44(t,53).transform("addon.coursecompletion.complete")));e(t,58,0,h._56(t,58,0,h._44(t,59).transform("addon.coursecompletion.completiondate")))})}function d(e){return h._57(0,[(e()(),h._31(0,0,null,null,24,"ion-card",[],null,null,null,null,null)),h._30(1,16384,null,0,g.a,[v.a,h.t,h.V],null,null),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,y.b,y.a)),h._30(4,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,16,{contentLabel:0}),h._52(603979776,17,{_buttons:1}),h._52(603979776,18,{_icons:1}),h._30(8,16384,null,0,W.a,[v.a,h.t,h.V],null,null),(e()(),h._55(9,2,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(12,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,y.b,y.a)),h._30(13,1097728,null,3,b.a,[P.a,v.a,h.t,h.V,[2,O.a]],null,null),h._52(335544320,19,{contentLabel:0}),h._52(603979776,20,{_buttons:1}),h._52(603979776,21,{_icons:1}),h._30(17,16384,null,0,E.a,[],null,null),(e()(),h._55(-1,2,["\n                "])),(e()(),h._31(19,0,null,2,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.completeCourse()&&o}return o},z.b,z.a)),h._30(20,1097728,[[20,4]],0,$.a,[[8,""],v.a,h.t,h.V],{block:[0,"block"]},null),(e()(),h._55(21,0,["",""])),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,2,["\n            "])),(e()(),h._55(-1,null,["\n        "]))],function(e,t){e(t,20,0,"")},function(e,t){e(t,9,0,h._56(t,9,0,h._44(t,10).transform("addon.coursecompletion.manualselfcompletion")));e(t,21,0,h._56(t,21,0,h._44(t,22).transform("addon.coursecompletion.completecourse")))})}function f(e){return h._57(0,[(e()(),h._31(0,0,null,null,5,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),h._55(-1,null,["\n            "])),(e()(),h._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),h._30(3,147456,null,0,Y.a,[v.a,h.t,h.V],{name:[0,"name"]},null),(e()(),h._55(4,null,["\n            ","\n        "])),h._47(131072,m.a,[_.a,h.j])],function(e,t){e(t,3,0,"warning")},function(e,t){e(t,2,0,h._44(t,3)._hidden);e(t,4,0,h._56(t,4,0,h._44(t,5).transform("addon.coursecompletion.nottracked")))})}function p(e){return h._57(0,[h._47(0,Q.a,[k.a,X.a]),(e()(),h._31(1,0,null,null,26,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,J.b,J.a)),h._30(2,4374528,null,0,U.a,[v.a,A.a,Z.a,h.t,h.V,ee.a,te.a,h.M,[2,ne.a],[2,N.a]],null,null),(e()(),h._55(-1,1,["\n    "])),(e()(),h._31(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refreshCompletion(n)&&o}return o},null,null)),h._30(5,212992,null,0,oe.a,[A.a,U.a,h.M,re.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),h._55(-1,null,["\n        "])),(e()(),h._31(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,ie.b,ie.a)),h._30(8,114688,null,0,le.a,[oe.a,v.a],{pullingText:[0,"pullingText"]},null),h._47(131072,m.a,[_.a,h.j]),(e()(),h._55(-1,null,["\n    "])),(e()(),h._55(-1,1,["\n    "])),(e()(),h._31(12,0,null,1,14,"core-loading",[],null,null,null,ae.b,ae.a)),h._30(13,638976,null,0,se.a,[_.a,h.t,H.a,D.a],{hideUntil:[0,"hideUntil"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,i)),h._30(16,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,c)),h._30(19,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,d)),h._30(22,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n\n        "])),(e()(),h._26(16777216,null,0,1,null,f)),h._30(25,16384,null,0,C.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n    "])),(e()(),h._55(-1,1,["\n"])),(e()(),h._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.completionLoaded);e(t,8,0,h._34(1,"",h._56(t,8,0,h._44(t,9).transform("core.pulltorefresh")),""));e(t,13,0,n.completionLoaded);e(t,16,0,n.completion&&n.tracked);e(t,19,0,n.completion&&n.tracked);e(t,22,0,n.showSelfComplete&&n.tracked);e(t,25,0,!n.tracked)},function(e,t){e(t,1,0,h._44(t,2).statusbarPadding,h._44(t,2)._hasRefresher);e(t,4,0,"inactive"!==h._44(t,5).state,h._44(t,5)._top);e(t,7,0,h._44(t,8).r.state)})}n.d(t,"b",function(){return de}),t.c=p,n.d(t,"a",function(){return fe});var h=n(0),m=n(25),_=n(17),g=n(89),v=n(8),y=n(30),b=n(20),P=n(19),O=n(27),E=n(33),C=n(7),I=n(48),R=n(1),S=n(4),w=n(11),A=n(16),D=n(2),j=n(22),k=n(6),T=n(18),x=n(10),M=n(15),N=n(21),U=n(29),F=n(28),L=n(44),H=n(9),B=n(41),q=n(32),G=n(36),V=n(120),K=n(119),W=n(100),z=n(45),$=n(42),Y=n(47),Q=n(228),X=n(24),J=n(181),Z=n(34),ee=n(35),te=n(107),ne=n(39),oe=n(159),re=n(43),ie=n(212),le=n(173),ae=n(54),se=n(51),ue=n(526),ce=n(172),de=h._29({encapsulation:2,styles:[],data:{}}),fe=h._27("addon-course-completion-report",ue.a,function(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"addon-course-completion-report",[],null,null,null,p,de)),h._30(1,114688,null,0,ue.a,[R.a,S.a,ce.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,6,"button",[["aria-haspopup","true"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showToc(n)&&o}return o},f.b,f.a)),d._30(1,1097728,[[1,4]],0,p.a,[[8,""],h.a,d.t,d.V],null,null),d._47(131072,m.a,[_.a,d.j]),(e()(),d._55(-1,0,["\n        "])),(e()(),d._31(4,0,null,0,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._30(5,147456,null,0,g.a,[h.a,d.t,d.V],{name:[0,"name"]},null),(e()(),d._55(-1,0,["\n    "]))],function(e,t){e(t,5,0,"bookmark")},function(e,t){e(t,0,0,d._56(t,0,0,d._44(t,2).transform("addon.mod_book.toc")));e(t,4,0,d._44(t,5)._hidden)})}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,v.b,v.a)),d._30(1,770048,null,0,y.a,[b.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),d._47(131072,m.a,[_.a,d.j])],function(e,t){var n=t.component;e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},v.b,v.a)),d._30(1,770048,null,0,y.a,[b.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),d._47(131072,m.a,[_.a,d.j])],function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},v.b,v.a)),d._30(1,770048,null,0,y.a,[b.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),d._47(131072,m.a,[_.a,d.j])],function(e,t){e(t,1,0,d._34(1,"",d._56(t,1,0,d._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},v.b,v.a)),d._30(1,770048,null,0,y.a,[b.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,600)},null)}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},v.b,v.a)),d._30(1,770048,null,0,y.a,[b.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),d._48(2,{$a:0}),d._47(131072,m.a,[_.a,d.j])],function(e,t){var n=t.component;e(t,1,0,d._56(t,1,0,d._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",500)},null)}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,8,"div",[["margin-top",""]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n            "])),(e()(),d._31(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),d._55(3,null,["",":"])),d._47(131072,m.a,[_.a,d.j]),(e()(),d._55(-1,null,["\n            "])),(e()(),d._31(6,0,null,null,1,"core-tag-list",[],null,null,null,P.b,P.a)),d._30(7,49152,null,0,O.a,[E.a,[2,C.a]],{tags:[0,"tags"]},null),(e()(),d._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,7,0,n.contentsMap[n.currentChapter].tags)},function(e,t){e(t,3,0,d._56(t,3,0,d._44(t,4).transform("core.tag.tags")))})}function c(e){return d._57(0,[(e()(),d._55(-1,null,["\n"])),(e()(),d._31(1,0,null,null,29,"core-navbar-buttons",[["end",""]],null,null,null,I.b,I.a)),d._30(2,245760,null,1,R.a,[d.t,S.a,w.a],null,null),d._52(603979776,1,{buttons:1}),(e()(),d._55(-1,0,["\n    "])),(e()(),d._26(16777216,null,0,1,null,o)),d._30(6,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n    "])),(e()(),d._31(8,0,null,0,21,"core-context-menu",[],null,null,null,D.b,D.a)),d._30(9,245760,null,0,b.a,[_.a,j.a,d.t,w.a,[2,k.a],T.a],null,null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,r)),d._30(12,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,i)),d._30(15,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,l)),d._30(18,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._31(20,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},v.b,v.a)),d._30(21,770048,null,0,y.a,[b.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),d._47(131072,m.a,[_.a,d.j]),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,a)),d._30(25,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,s)),d._30(28,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n    "])),(e()(),d._55(-1,0,["\n"])),(e()(),d._55(-1,null,["\n\n"])),(e()(),d._55(-1,null,["\n"])),(e()(),d._31(33,0,null,null,20,"core-loading",[["class","core-loading-center"]],null,null,null,x.b,x.a)),d._30(34,638976,null,0,M.a,[_.a,d.t,N.a,T.a],{hideUntil:[0,"hideUntil"]},null),(e()(),d._55(-1,0,["\n\n    "])),(e()(),d._31(36,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,U.b,U.a)),d._30(37,49152,null,0,F.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),d._55(-1,0,["\n\n    "])),(e()(),d._31(39,0,null,0,13,"div",[["class","safe-padding-horizontal"],["padding",""]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(41,0,null,null,1,"core-navigation-bar",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.changeChapter(n)&&o}return o},L.b,L.a)),d._30(42,49152,null,0,H.a,[B.a],{previous:[0,"previous"],next:[1,"next"]},{action:"action"}),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(44,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),d._30(45,540672,null,0,q.a,[d.t,G.a,w.a,B.a,_.a,V.a,T.a,K.a,S.a,W.a,z.a,$.a,[2,E.a],[2,Y.a],[2,C.a],Q.a,N.a,X.a,J.a,Z.a,d._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),d._55(-1,null,["\n        "])),(e()(),d._26(16777216,null,null,1,null,u)),d._30(48,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(50,0,null,null,1,"core-navigation-bar",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.changeChapter(n)&&o}return o},L.b,L.a)),d._30(51,49152,null,0,H.a,[B.a],{previous:[0,"previous"],next:[1,"next"]},{action:"action"}),(e()(),d._55(-1,null,["\n    "])),(e()(),d._55(-1,0,["\n\n"])),(e()(),d._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0);e(t,6,0,n.loaded),e(t,9,0);e(t,12,0,n.externalUrl);e(t,15,0,n.description);e(t,18,0,n.blog);e(t,21,0,d._56(t,21,0,d._44(t,22).transform("core.refresh")),n.refreshIcon,!1,700);e(t,25,0,n.prefetchStatusIcon);e(t,28,0,n.size);e(t,34,0,n.loaded);e(t,37,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,42,0,n.previousChapter>0&&n.previousChapter,n.nextChapter>0&&n.nextChapter);e(t,45,0,n.chapterContent,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,48,0,n.tagsEnabled&&n.contentsMap&&n.contentsMap[n.currentChapter]&&n.contentsMap[n.currentChapter].tags&&n.contentsMap[n.currentChapter].tags.length>0);e(t,51,0,n.previousChapter>0&&n.previousChapter,n.nextChapter>0&&n.nextChapter)},null)}n.d(t,"b",function(){return le}),t.c=c,n.d(t,"a",function(){return ae});var d=n(0),f=n(45),p=n(42),h=n(8),m=n(25),_=n(17),g=n(47),v=n(92),y=n(83),b=n(78),P=n(494),O=n(324),E=n(21),C=n(28),I=n(96),R=n(87),S=n(6),w=n(4),A=n(7),D=n(91),j=n(70),k=n(76),T=n(2),x=n(54),M=n(51),N=n(9),U=n(122),F=n(112),L=n(773),H=n(395),B=n(11),q=n(48),G=n(1),V=n(16),K=n(22),W=n(18),z=n(10),$=n(15),Y=n(29),Q=n(44),X=n(41),J=n(32),Z=n(36),ee=n(497),te=n(221),ne=n(13),oe=n(398),re=n(162),ie=n(163),le=d._29({encapsulation:2,styles:[],data:{}}),ae=d._27("addon-mod-book-index",ee.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"addon-mod-book-index",[],null,null,null,c,le)),d._30(1,245760,null,0,ee.a,[d.C,te.a,ne.a,z.a,oe.a,re.a,ie.a,[2,Y.a]],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",initialChapterId:"initialChapterId"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,1,0,T._34(1,"",T._56(t,1,0,T._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},x.b,x.a)),T._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),T._48(2,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),T._55(1,null,["",""])),T._48(2,{$a:0}),T._47(131072,U.a,[F.a,T.j])],null,function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,3).transform("addon.mod_choice.previewonly",e(t,2,0,n.openTimeReadable))))})}function d(e){return T._57(0,[(e()(),T._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),T._55(1,null,["",""])),T._48(2,{$a:0}),T._47(131072,U.a,[F.a,T.j])],null,function(e,t){var n=t.component;e(t,1,0,T._56(t,1,0,T._44(t,3).transform("addon.mod_choice.notopenyet",e(t,2,0,n.openTimeReadable))))})}function f(e){return T._57(0,[(e()(),T._31(0,0,null,null,11,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),T._30(1,16384,null,0,L.a,[H.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(4,147456,null,0,B.a,[H.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,c)),T._30(7,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,d)),T._30(10,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,"information-circle");e(t,7,0,n.options&&n.options.length);e(t,10,0,!n.options||!n.options.length)},function(e,t){e(t,3,0,T._44(t,4)._hidden)})}function p(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),T._55(1,null,[""," "])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._31(3,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),T._30(4,540672,null,0,G.a,[T.t,V.a,K.a,W.a,F.a,z.a,$.a,Y.a,Q.a,X.a,J.a,Z.a,[2,ee.a],[2,te.a],[2,ne.a],oe.a,re.a,ie.a,le.a,ae.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(e,t){var n=t.component;e(t,4,0,n.options[0].text,"module",n.module.id,n.courseId)},function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_choice.yourselection")))})}function h(e){return T._57(0,[(e()(),T._31(0,0,null,null,13,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),T._30(1,16384,null,0,L.a,[H.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(4,147456,null,0,B.a,[H.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,p)),T._30(7,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(9,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),T._55(10,null,["",""])),T._48(11,{$a:0}),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,"information-circle");e(t,7,0,n.options&&n.options.length)},function(e,t){var n=t.component;e(t,3,0,T._44(t,4)._hidden);e(t,10,0,T._56(t,10,0,T._44(t,12).transform("addon.mod_choice.expired",e(t,11,0,n.closeTimeReadable))))})}function m(e){return T._57(0,[(e()(),T._31(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),T._30(1,16384,null,0,L.a,[H.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(4,147456,null,0,B.a,[H.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(5,null,[" ","\n    "])),T._48(6,{$a:0}),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,4,0,"warning")},function(e,t){var n=t.component;e(t,3,0,T._44(t,4)._hidden);e(t,5,0,T._56(t,5,0,T._44(t,7).transform("core.hasdatatosync",e(t,6,0,n.moduleName))))})}function _(e){return T._57(0,[(e()(),T._31(0,0,null,null,5,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,B.a,[H.a,T.t,T.V],{name:[0,"name"]},null),(e()(),T._55(4,null,["\n        ","\n    "])),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,T._44(t,3)._hidden);e(t,4,0,T._56(t,4,0,T._44(t,5).transform(n.publishInfo)))})}function g(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),T._55(1,null,["",""])),T._47(131072,U.a,[F.a,T.j])],null,function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_choice.full")))})}function v(e){return T._57(0,[(e()(),T._31(0,0,null,null,21,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),T._30(1,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,2,{contentLabel:0}),T._52(603979776,3,{_buttons:1}),T._52(603979776,4,{_icons:1}),T._30(5,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(7,0,null,1,6,"ion-label",[],null,null,null,null,null)),T._30(8,16384,[[2,4]],0,pe.a,[H.a,T.t,T.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),T._31(9,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),T._30(10,540672,null,0,G.a,[T.t,V.a,K.a,W.a,F.a,z.a,$.a,Y.a,Q.a,X.a,J.a,Z.a,[2,ee.a],[2,te.a],[2,ne.a],oe.a,re.a,ie.a,le.a,ae.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),T._55(-1,null,[" "])),(e()(),T._26(16777216,null,null,1,null,g)),T._30(13,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(15,0,null,4,5,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==T._44(e,16)._click(n)&&o}if("ngModelChange"===t){o=!1!==(e.context.$implicit.checked=n)&&o}return o},he.b,he.a)),T._30(16,1228800,null,0,me.a,[H.a,ce.a,[2,ue.a],T.t,T.V],{disabled:[0,"disabled"]},null),T._50(1024,null,_e.l,function(e){return[e]},[me.a]),T._30(18,671744,null,0,_e.q,[[8,null],[8,null],[8,null],[2,_e.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),T._50(2048,null,_e.m,null,[_e.q]),T._30(20,16384,null,0,_e.n,[_e.m],null,null),(e()(),T._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,10,0,t.context.$implicit.text,"module",n.module.id,n.courseId);e(t,13,0,n.choice.limitanswers&&t.context.$implicit.countanswers>=t.context.$implicit.maxanswers);e(t,16,0,t.context.$implicit.disabled||!n.canEdit);e(t,18,0,t.context.$implicit.disabled||!n.canEdit,t.context.$implicit.checked)},function(e,t){e(t,15,0,T._44(t,16)._disabled,T._44(t,20).ngClassUntouched,T._44(t,20).ngClassTouched,T._44(t,20).ngClassPristine,T._44(t,20).ngClassDirty,T._44(t,20).ngClassValid,T._44(t,20).ngClassInvalid,T._44(t,20).ngClassPending)})}function y(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,v)),T._30(3,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,t.component.options)},null)}function b(e){return T._57(0,[(e()(),T._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),T._55(1,null,["",""])),T._47(131072,U.a,[F.a,T.j])],null,function(e,t){e(t,1,0,T._56(t,1,0,T._44(t,2).transform("addon.mod_choice.full")))})}function P(e){return T._57(0,[(e()(),T._31(0,0,null,null,23,"ion-item",[["class","item item-block"],["radio-group",""],["role","radiogroup"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.selectedOption.id=n)&&o}return o},se.b,se.a)),T._30(1,1064960,null,1,ge.a,[T.V,T.t,T.j],null,null),T._52(335544320,8,{_header:0}),T._50(1024,null,_e.l,function(e){return[e]},[ge.a]),T._30(4,671744,null,0,_e.q,[[8,null],[8,null],[8,null],[2,_e.l]],{model:[0,"model"]},{update:"ngModelChange"}),T._50(2048,null,_e.m,null,[_e.q]),T._30(6,16384,null,0,_e.n,[_e.m],null,null),T._30(7,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,5,{contentLabel:0}),T._52(603979776,6,{_buttons:1}),T._52(603979776,7,{_icons:1}),T._30(11,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(13,0,null,1,6,"ion-label",[],null,null,null,null,null)),T._30(14,16384,[[5,4]],0,pe.a,[H.a,T.t,T.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),T._31(15,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),T._30(16,540672,null,0,G.a,[T.t,V.a,K.a,W.a,F.a,z.a,$.a,Y.a,Q.a,X.a,J.a,Z.a,[2,ee.a],[2,te.a],[2,ne.a],oe.a,re.a,ie.a,le.a,ae.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),T._55(-1,null,[" "])),(e()(),T._26(16777216,null,null,1,null,b)),T._30(19,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,2,["\n                "])),(e()(),T._31(21,0,null,4,1,"ion-radio",[["color","primary"]],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==T._44(e,22)._click(n)&&o}return o},ve.b,ve.a)),T._30(22,245760,null,0,ye.a,[ce.a,H.a,T.t,T.V,[2,ue.a],[2,ge.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),T._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,4,0,n.selectedOption.id);e(t,16,0,t.context.$implicit.text,"module",n.module.id,n.courseId);e(t,19,0,n.choice.limitanswers&&t.context.$implicit.countanswers>=t.context.$implicit.maxanswers);e(t,22,0,"primary",t.context.$implicit.id,t.context.$implicit.disabled||!n.canEdit)},function(e,t){e(t,0,0,T._44(t,6).ngClassUntouched,T._44(t,6).ngClassTouched,T._44(t,6).ngClassPristine,T._44(t,6).ngClassDirty,T._44(t,6).ngClassValid,T._44(t,6).ngClassInvalid,T._44(t,6).ngClassPending);e(t,21,0,T._44(t,22)._disabled)})}function O(e){return T._57(0,[(e()(),T._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),T._55(-1,null,["\n            "])),(e()(),T._26(16777216,null,null,1,null,P)),T._30(3,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,t.component.options)},null)}function E(e){return T._57(0,[(e()(),T._31(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,se.b,se.a)),T._30(1,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,9,{contentLabel:0}),T._52(603979776,10,{_buttons:1}),T._52(603979776,11,{_icons:1}),T._30(5,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,2,["\n            "])),(e()(),T._31(7,0,null,2,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.save()&&o}return o},be.b,be.a)),T._30(8,1097728,[[10,4]],0,Pe.a,[[8,""],H.a,T.t,T.V],{block:[0,"block"]},null),(e()(),T._55(9,0,["",""])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,2,["\n        "]))],function(e,t){e(t,8,0,"")},function(e,t){e(t,7,0,!t.component.canSave());e(t,9,0,T._56(t,9,0,T._44(t,10).transform("addon.mod_choice.savemychoice")))})}function C(e){return T._57(0,[(e()(),T._31(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,se.b,se.a)),T._30(1,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,12,{contentLabel:0}),T._52(603979776,13,{_buttons:1}),T._52(603979776,14,{_icons:1}),T._30(5,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,2,["\n            "])),(e()(),T._31(7,0,null,2,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.delete()&&o}return o},be.b,be.a)),T._30(8,1097728,[[13,4]],0,Pe.a,[[8,""],H.a,T.t,T.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),T._55(9,0,["",""])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,2,["\n        "]))],function(e,t){e(t,8,0,"light","")},function(e,t){e(t,9,0,T._56(t,9,0,T._44(t,10).transform("addon.mod_choice.removemychoice")))})}function I(e){return T._57(0,[(e()(),T._31(0,0,null,null,14,"ion-card",[],null,null,null,null,null)),T._30(1,16384,null,0,L.a,[H.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,y)),T._30(4,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,O)),T._30(7,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,E)),T._30(10,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._26(16777216,null,null,1,null,C)),T._30(13,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,n.choice.allowmultiple);e(t,7,0,!n.choice.allowmultiple);e(t,10,0,n.canEdit);e(t,13,0,n.canDelete)},null)}function R(e){return T._57(0,[(e()(),T._31(0,0,null,null,10,"ion-item",[["class","core-warning-item item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),T._30(1,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,18,{contentLabel:0}),T._52(603979776,19,{_buttons:1}),T._52(603979776,20,{_icons:1}),T._30(5,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,2,["\n                        "])),(e()(),T._31(7,0,null,0,1,"ion-icon",[["color","warning"],["item-start",""],["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(8,147456,[[20,4]],0,B.a,[H.a,T.t,T.V],{color:[0,"color"],name:[1,"name"]},null),(e()(),T._55(9,2,[" ","\n                    "])),T._47(131072,U.a,[F.a,T.j])],function(e,t){e(t,8,0,"warning","warning")},function(e,t){e(t,7,0,T._44(t,8)._hidden);e(t,9,0,T._56(t,9,0,T._44(t,10).transform("addon.mod_choice.resultsnotsynced")))})}function S(e){return T._57(0,[(e()(),T._31(0,0,null,null,14,"a",[["class","item item-block"],["core-user-link",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],null,null,se.b,se.a)),T._30(1,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,27,{contentLabel:0}),T._52(603979776,28,{_buttons:1}),T._52(603979776,29,{_icons:1}),T._30(5,16384,null,0,fe.a,[],null,null),T._30(6,81920,null,0,Oe.a,[T.t,[2,ee.a],[2,ne.a]],{userId:[0,"userId"],courseId:[1,"courseId"]},null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._31(8,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,Ee.b,Ee.a)),T._30(9,16384,null,0,Ce.a,[],null,null),T._30(10,770048,null,0,Ie.a,[ee.a,V.a,$.a,J.a,re.a,[2,ne.a]],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._31(12,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),T._55(13,null,["",""])),(e()(),T._55(-1,2,["\n                        "]))],function(e,t){var n=t.component;e(t,6,0,t.context.$implicit.userid,n.courseid);e(t,10,0,t.context.$implicit,n.courseid)},function(e,t){e(t,0,0,t.context.$implicit.fullname);e(t,13,0,t.context.$implicit.fullname)})}function w(e){return T._57(0,[(e()(),T._31(0,0,null,null,23,"ion-item-group",[],null,null,null,null,null)),T._30(1,16384,null,0,Re.a,[],null,null),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._31(3,0,null,null,16,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,se.b,se.a)),T._30(4,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,24,{contentLabel:0}),T._52(603979776,25,{_buttons:1}),T._52(603979776,26,{_icons:1}),T._30(8,16384,null,0,Se.a,[H.a,T.t,T.V],null,null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),T._31(11,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),T._30(12,540672,null,0,G.a,[T.t,V.a,K.a,W.a,F.a,z.a,$.a,Y.a,Q.a,X.a,J.a,Z.a,[2,ee.a],[2,te.a],[2,ne.a],oe.a,re.a,ie.a,le.a,ae.a,T._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),T._55(-1,2,["\n                            "])),(e()(),T._31(14,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),T._55(15,null,["",": "," (",")"])),T._47(131072,U.a,[F.a,T.j]),T._48(17,{$a:0}),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,2,["\n                        "])),(e()(),T._55(-1,null,["\n                        "])),(e()(),T._26(16777216,null,null,1,null,S)),T._30(22,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,12,0,t.context.$implicit.text,"module",n.module.id,n.courseId);e(t,22,0,t.context.$implicit.userresponses)},function(e,t){e(t,15,0,T._56(t,15,0,T._44(t,16).transform("addon.mod_choice.numberofuser")),t.context.$implicit.numberofuser,T._56(t,15,2,T._44(t,18).transform("core.percentagenumber",e(t,17,0,t.context.$implicit.percentageamountfixed))))})}function A(e){return T._57(0,[(e()(),T._31(0,0,null,null,5,"ion-col",[["class","col"],["col-12",""],["col-lg-7",""]],null,null,null,null,null)),T._30(1,16384,null,0,we.a,[],null,null),(e()(),T._55(-1,null,["\n                    "])),(e()(),T._26(16777216,null,null,1,null,w)),T._30(4,802816,null,0,q.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(e()(),T._55(-1,null,["\n                "]))],function(e,t){e(t,4,0,t.component.results)},null)}function D(e){return T._57(0,[(e()(),T._31(0,0,null,null,39,"div",[],null,null,null,null,null)),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(2,0,null,null,7,"ion-item-divider",[["class","item item-divider"],["text-center",""]],null,null,null,se.b,se.a)),T._30(3,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,15,{contentLabel:0}),T._52(603979776,16,{_buttons:1}),T._52(603979776,17,{_icons:1}),T._30(7,16384,null,0,Se.a,[H.a,T.t,T.V],null,null),(e()(),T._55(8,2,["\n            ","\n        "])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(11,0,null,null,27,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),T._30(12,16384,null,0,Ae.a,[],null,null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._31(14,0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),T._30(15,16384,null,0,De.a,[],null,null),(e()(),T._55(-1,null,["\n                "])),(e()(),T._31(17,0,null,null,16,"ion-col",[["class","col"],["col-12",""],["col-lg-5",""]],null,null,null,null,null)),T._30(18,16384,null,0,we.a,[],null,null),(e()(),T._55(-1,null,["\n                    "])),(e()(),T._26(16777216,null,null,1,null,R)),T._30(21,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n                    "])),(e()(),T._31(23,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,se.b,se.a)),T._30(24,1097728,null,3,ue.a,[ce.a,H.a,T.t,T.V,[2,de.a]],null,null),T._52(335544320,21,{contentLabel:0}),T._52(603979776,22,{_buttons:1}),T._52(603979776,23,{_icons:1}),T._30(28,16384,null,0,fe.a,[],null,null),(e()(),T._55(-1,2,["\n                        "])),(e()(),T._31(30,0,null,2,1,"core-chart",[["contextLevel","module"],["height","300"],["type","pie"]],null,null,null,je.b,je.a)),T._30(31,770048,null,0,ke.a,[ie.a,$.a,le.a],{data:[0,"data"],labels:[1,"labels"],type:[2,"type"],height:[3,"height"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),T._55(-1,2,["\n                    "])),(e()(),T._55(-1,null,["\n                "])),(e()(),T._55(-1,null,["\n                "])),(e()(),T._26(16777216,null,null,1,null,A)),T._30(36,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,null,["\n            "])),(e()(),T._55(-1,null,["\n        "])),(e()(),T._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,21,0,n.hasOffline);e(t,31,0,n.data,n.labels,"pie","300","module",n.module.id,n.courseId);e(t,36,0,n.choice.publish&&n.results)},function(e,t){e(t,8,0,T._56(t,8,0,T._44(t,9).transform("addon.mod_choice.responses")))})}function j(e){return T._57(0,[(e()(),T._31(0,0,null,null,6,"ion-card",[["class","core-info-card"]],null,null,null,null,null)),T._30(1,16384,null,0,L.a,[H.a,T.t,T.V],null,null),(e()(),T._55(-1,null,["\n        "])),(e()(),T._31(3,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),T._55(4,null,["",""])),T._47(131072,U.a,[F.a,T.j]),(e()(),T._55(-1,null,["\n    "]))],null,function(e,t){e(t,4,0,T._56(t,4,0,T._44(t,5).transform("addon.mod_choice.noresultsviewable")))})}function k(e){return T._57(0,[(e()(),T._55(-1,null,["\n"])),(e()(),T._31(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,Te.b,Te.a)),T._30(2,245760,null,1,xe.a,[T.t,Q.a,K.a],null,null),T._52(603979776,1,{buttons:1}),(e()(),T._55(-1,0,["\n    "])),(e()(),T._31(5,0,null,0,23,"core-context-menu",[],null,null,null,Me.b,Me.a)),T._30(6,245760,null,0,N.a,[F.a,Ne.a,T.t,K.a,[2,Ue.a],$.a],null,null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,o)),T._30(9,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,r)),T._30(12,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,i)),T._30(15,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,l)),T._30(18,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,a)),T._30(21,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,s)),T._30(24,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n        "])),(e()(),T._26(16777216,null,0,1,null,u)),T._30(27,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._55(-1,0,["\n"])),(e()(),T._55(-1,null,["\n\n"])),(e()(),T._55(-1,null,["\n"])),(e()(),T._31(32,0,null,null,31,"core-loading",[["class","core-loading-center"]],null,null,null,Fe.b,Fe.a)),T._30(33,638976,null,0,Le.a,[F.a,T.t,re.a,$.a],{hideUntil:[0,"hideUntil"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._31(35,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,He.b,He.a)),T._30(36,49152,null,0,Be.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,f)),T._30(40,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,h)),T._30(43,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,m)),T._30(47,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,_)),T._30(51,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,I)),T._30(55,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n\n    "])),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,D)),T._30(59,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n    "])),(e()(),T._26(16777216,null,0,1,null,j)),T._30(62,16384,null,0,q.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(e()(),T._55(-1,0,["\n"])),(e()(),T._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,21,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,24,0,n.prefetchStatusIcon);e(t,27,0,n.size);e(t,33,0,n.loaded);e(t,36,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,40,0,n.choiceNotOpenYet);e(t,43,0,n.choiceClosed);e(t,47,0,n.hasOffline);e(t,51,0,n.canEdit&&n.publishInfo&&n.options&&n.options.length);e(t,55,0,n.options&&n.options.length);e(t,59,0,n.canSeeResults);e(t,62,0,!n.canSeeResults&&!n.choiceNotOpenYet)},null)}n.d(t,"b",function(){return ze}),t.c=k,n.d(t,"a",function(){return $e});var T=n(0),x=n(92),M=n(83),N=n(78),U=n(25),F=n(17),L=n(89),H=n(8),B=n(47),q=n(7),G=n(48),V=n(1),K=n(4),W=n(11),z=n(16),$=n(2),Y=n(22),Q=n(6),X=n(18),J=n(10),Z=n(15),ee=n(21),te=n(29),ne=n(28),oe=n(44),re=n(9),ie=n(41),le=n(32),ae=n(36),se=n(30),ue=n(20),ce=n(19),de=n(27),fe=n(33),pe=n(67),he=n(251),me=n(199),_e=n(23),ge=n(137),ve=n(176),ye=n(145),be=n(45),Pe=n(42),Oe=n(479),Ee=n(213),Ce=n(160),Ie=n(182),Re=n(387),Se=n(100),we=n(120),Ae=n(164),De=n(119),je=n(1058),ke=n(444),Te=n(96),xe=n(87),Me=n(91),Ne=n(70),Ue=n(76),Fe=n(54),Le=n(51),He=n(122),Be=n(112),qe=n(499),Ge=n(294),Ve=n(295),Ke=n(296),We=n(24),ze=T._29({encapsulation:2,styles:[],data:{}}),$e=T._27("addon-mod-choice-index",qe.a,function(e){return T._57(0,[(e()(),T._31(0,0,null,null,1,"addon-mod-choice-index",[],null,null,null,k,ze)),T._30(1,245760,null,0,qe.a,[T.C,Ge.a,[2,te.a],Ve.a,Ke.a,We.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),r=n(23),i=n(5),l=n(3),a=n(72),s=n(81),u=n(4),c=n(11),d=n(9),f=n(1),p=n(135),h=n(280),m=n(233),_=n(254),g=n(163),v=n(651),y=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},O=function(){function e(e,t,n,i,l,a,s,u,c,d,f,p,h,m,_){this.uploaderProvider=e,this.syncProvider=t,this.domUtils=n,this.textUtils=i,this.translate=l,this.forumProvider=a,this.forumHelper=s,this.forumOffline=u,this.forumSync=c,this.tagProvider=d,this.content=f,this.popoverCtrl=p,this.modalCtrl=h,this.eventsProvider=m,this.sitesProvider=_,this.messageControl=new r.e,this.advanced=!1,this.displaySubject=!0,this.optionsMenuEnabled=!1,this.onPostChange=new o.v,this.tagsEnabled=this.tagProvider.areTagsAvailableInSite()}return e.prototype.ngOnInit=function(){this.uniqueId=this.post.id?"reply"+this.post.id:"edit"+this.post.parent;var e=this.translate.instant("addon.mod_forum.re");this.displaySubject=!this.parentSubject||this.post.subject!=this.parentSubject&&this.post.subject!="Re: "+this.parentSubject&&this.post.subject!=e+" "+this.parentSubject,this.defaultReplySubject=this.post.subject.startsWith("Re: ")||this.post.subject.startsWith(e)?this.post.subject:e+" "+this.post.subject,this.optionsMenuEnabled=!this.post.id||this.forumProvider.isGetDiscussionPostAvailable()&&(this.forumProvider.isDeletePostAvailable()||this.forumProvider.isUpdatePostAvailable())},e.prototype.deletePost=function(){var e=this;this.domUtils.showDeleteConfirm("addon.mod_forum.deletesure").then(function(){var t=e.domUtils.showModalLoading("core.deleting",!0);e.forumProvider.deletePost(e.post.id).then(function(t){e.eventsProvider.trigger(p.a.CHANGE_DISCUSSION_EVENT,{forumId:e.forum.id,discussionId:e.discussionId,cmId:e.forum.cmid,deleted:t.status,post:e.post},e.sitesProvider.getCurrentSiteId()),e.domUtils.showToast("addon.mod_forum.deletedpost",!0)}).catch(function(t){e.domUtils.showErrorModal(t)}).finally(function(){t.dismiss()})}).catch(function(e){})},e.prototype.setReplyFormData=function(e,t,n,o,r,i){this.uploaderProvider.clearTmpFiles(this.replyData.files),this.replyData.replyingTo=e||0,this.replyData.isEditing=!!t,this.replyData.subject=n||this.defaultReplySubject||"",this.replyData.message=o||null,this.replyData.files=r||[],this.replyData.isprivatereply=!!i,this.messageControl.setValue(this.replyData.message),this.originalData.subject=this.replyData.subject,this.originalData.message=this.replyData.message,this.originalData.files=this.replyData.files.slice(),this.originalData.isprivatereply=this.replyData.isprivatereply,this.advanced=this.replyData.files.length>0},e.prototype.showOptionsMenu=function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.popoverCtrl.create(v.a,{post:this.post,forumId:this.forum.id});n.onDidDismiss(function(e){if(e&&e.action)switch(e.action){case"edit":t.editPost();break;case"editoffline":t.editOfflineReply();break;case"delete":t.deletePost();break;case"deleteoffline":t.discardOfflineReply()}}),n.present({ev:e})},e.prototype.editPost=function(){var e=this,t=this.modalCtrl.create("AddonModForumEditPostPage",{post:this.post,component:this.component,componentId:this.componentId,forum:this.forum});t.present(),t.onDidDismiss(function(t){if(void 0!==t){var n=e.textUtils.formatHtmlLines(t.message),o=t.files||[],r=e.domUtils.showModalLoading("core.sending",!0);(o.length?e.forumHelper.uploadOrStoreReplyFiles(e.forum.id,e.post.id,o,!1):Promise.resolve()).then(function(o){var r={};return o&&(r.attachmentsid=o),e.forumProvider.updatePost(e.post.id,t.subject,n,r)}).then(function(o){o&&e.forum.id&&(e.forumHelper.deleteReplyStoredFiles(e.forum.id,e.post.id),e.onPostChange.emit(),e.post.subject=t.subject,e.post.message=n,e.post.attachments=t.files)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.mod_forum.couldnotupdate",!0)}).finally(function(){r.dismiss()})}})},e.prototype.showReplyForm=function(){var e=this;this.replyData.isEditing?this.confirmDiscard().then(function(){e.setReplyFormData(e.post.id),e.content&&setTimeout(function(){e.content.resize(),e.domUtils.scrollToElementBySelector(e.content,"#addon-forum-reply-edit-form-"+e.uniqueId)})}).catch(function(){}):(this.replyData.replyingTo?(this.replyData.replyingTo=this.post.id,this.replyData.subject==this.originalData.subject&&(this.replyData.subject=this.defaultReplySubject,this.originalData.subject=this.defaultReplySubject),this.messageControl.setValue(this.replyData.message)):this.setReplyFormData(this.post.id),this.content&&setTimeout(function(){e.content.resize(),e.domUtils.scrollToElementBySelector(e.content,"#addon-forum-reply-edit-form-"+e.uniqueId)}))},e.prototype.editOfflineReply=function(){var e=this;this.confirmDiscard().then(function(){e.syncId=e.forumSync.getDiscussionSyncId(e.discussionId),e.syncProvider.blockOperation(p.a.COMPONENT,e.syncId),e.setReplyFormData(e.post.parent,!0,e.post.subject,e.post.message,e.post.attachments,e.post.isprivatereply)}).catch(function(){})},e.prototype.onMessageChange=function(e){this.replyData.message=e},e.prototype.reply=function(){var e=this;if(this.replyData.subject)if(this.replyData.message){var t=!1,n=this.replyData.message,o=this.replyData.subject,r=this.replyData.replyingTo,i=this.replyData.files||[],l={},a=this.domUtils.showModalLoading("core.sending",!0);n=this.textUtils.formatHtmlLines(n),this.replyData.isprivatereply&&(l.private=!0),(i.length?this.forumHelper.uploadOrStoreReplyFiles(this.forum.id,r,i,!1).catch(function(n){return e.forum.id?(t=!0,e.forumHelper.uploadOrStoreReplyFiles(e.forum.id,r,i,!0)):Promise.reject(n)}):Promise.resolve()).then(function(a){return a&&(l.attachmentsid=a),t?e.forumOffline.replyPost(r,e.discussionId,e.forum.id,e.forum.name,e.courseId,o,n,l).then(function(){return!1}):e.forumProvider.replyPost(r,e.discussionId,e.forum.id,e.forum.name,e.courseId,o,n,l,void 0,!i.length)}).then(function(t){t&&e.forum.id&&e.forumHelper.deleteReplyStoredFiles(e.forum.id,r),e.setReplyFormData(),e.onPostChange.emit(),e.syncId&&e.syncProvider.unblockOperation(p.a.COMPONENT,e.syncId)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.mod_forum.couldnotadd",!0)}).finally(function(){a.dismiss()})}else this.domUtils.showErrorModal("addon.mod_forum.erroremptymessage",!0);else this.domUtils.showErrorModal("addon.mod_forum.erroremptysubject",!0)},e.prototype.cancel=function(){var e=this;this.confirmDiscard().then(function(){e.setReplyFormData(),e.syncId&&e.syncProvider.unblockOperation(p.a.COMPONENT,e.syncId)}).catch(function(){})},e.prototype.discardOfflineReply=function(){var e=this;this.domUtils.showDeleteConfirm().then(function(){var t=[];return t.push(e.forumOffline.deleteReply(e.post.parent)),e.forum.id&&t.push(e.forumHelper.deleteReplyStoredFiles(e.forum.id,e.post.parent).catch(function(){})),Promise.all(t).finally(function(){e.setReplyFormData(),e.onPostChange.emit(),e.syncId&&e.syncProvider.unblockOperation(p.a.COMPONENT,e.syncId)})}).catch(function(){})},e.prototype.ratingUpdated=function(){this.forumProvider.invalidateDiscussionPosts(this.discussionId,this.forum.id)},e.prototype.toggleAdvanced=function(){this.advanced=!this.advanced},e.prototype.ngOnDestroy=function(){this.syncId&&this.syncProvider.unblockOperation(p.a.COMPONENT,this.syncId)},e.prototype.confirmDiscard=function(){return this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmloss")):Promise.resolve()},y([Object(o.D)(),b("design:type",Object)],e.prototype,"post",void 0),y([Object(o.D)(),b("design:type",Number)],e.prototype,"courseId",void 0),y([Object(o.D)(),b("design:type",Number)],e.prototype,"discussionId",void 0),y([Object(o.D)(),b("design:type",String)],e.prototype,"component",void 0),y([Object(o.D)(),b("design:type",Number)],e.prototype,"componentId",void 0),y([Object(o.D)(),b("design:type",Object)],e.prototype,"replyData",void 0),y([Object(o.D)(),b("design:type",Object)],e.prototype,"originalData",void 0),y([Object(o.D)(),b("design:type",Boolean)],e.prototype,"trackPosts",void 0),y([Object(o.D)(),b("design:type",Object)],e.prototype,"forum",void 0),y([Object(o.D)(),b("design:type",Object)],e.prototype,"accessInfo",void 0),y([Object(o.D)(),b("design:type",String)],e.prototype,"parentSubject",void 0),y([Object(o.D)(),b("design:type",Object)],e.prototype,"ratingInfo",void 0),y([Object(o.O)(),b("design:type",o.v)],e.prototype,"onPostChange",void 0),e=y([Object(o.m)({selector:"addon-mod-forum-post",templateUrl:"addon-mod-forum-post.html"}),P(10,Object(o.N)()),b("design:paramtypes",[a.a,s.a,u.a,c.a,l.c,p.a,h.a,m.a,_.a,g.a,i.f,i.w,i.q,d.a,f.a])],e)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),r=n(5),i=n(1),l=n(46),a=n(4),s=n(202),u=n(189),c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n,o,r,i){this.workshopOffline=e,this.workshopHelper=t,this.navCtrl=n,this.userProvider=o,this.domUtils=r,this.canViewAssessment=!1,this.canSelfAssess=!1,this.offline=!1,this.loaded=!1,this.currentUserId=i.getCurrentSiteUserId(),this.showGrade=this.workshopHelper.showGrade}return e.prototype.ngOnInit=function(){var e=this,t=this.access&&this.access.assessingallowed,n=this.assessment.userid||this.assessment.reviewerid,o=[];this.assessmentId=this.assessment.assessmentid||this.assessment.id,this.canViewAssessment=this.assessment.grade,this.canSelfAssess=t&&n==this.currentUserId,n&&o.push(this.userProvider.getProfile(n,this.courseId,!0).then(function(t){e.profile=t}));var r;r=n==this.currentUserId?this.workshopOffline.getAssessment(this.workshop.id,this.assessmentId).then(function(t){e.offline=!0,e.assessment.weight=t.inputdata.weight}):this.workshopOffline.getEvaluateAssessment(this.workshop.id,this.assessmentId).then(function(t){e.offline=!0,e.assessment.gradinggradeover=t.gradinggradeover,e.assessment.weight=t.weight}),o.push(r.catch(function(){e.offline=!1})),Promise.all(o).finally(function(){e.loaded=!0})},e.prototype.gotoAssessment=function(){var e=this;if(!this.canSelfAssess&&this.canViewAssessment){var t={assessment:this.assessment,submission:this.submission,profile:this.profile,courseId:this.courseId,assessmentId:this.assessmentId};if(this.submission)this.navCtrl.push("AddonModWorkshopAssessmentPage",t);else{var n=this.domUtils.showModalLoading("core.sending",!0);this.workshopHelper.getSubmissionById(this.workshop.id,this.assessment.submissionid).then(function(n){t.submission=n,e.navCtrl.push("AddonModWorkshopAssessmentPage",t)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"Cannot load submission")}).finally(function(){n.dismiss()})}}},e.prototype.gotoOwnAssessment=function(){if(this.canSelfAssess){this.navCtrl.push("AddonModWorkshopSubmissionPage",{module:this.module,workshop:this.workshop,access:this.access,courseId:this.courseId,profile:this.profile,submission:this.submission,assessment:this.assessment})}},c([Object(o.D)(),d("design:type",Object)],e.prototype,"assessment",void 0),c([Object(o.D)(),d("design:type",Boolean)],e.prototype,"summary",void 0),c([Object(o.D)(),d("design:type",Number)],e.prototype,"courseId",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"submission",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"module",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"workshop",void 0),c([Object(o.D)(),d("design:type",Object)],e.prototype,"access",void 0),e=c([Object(o.m)({selector:"addon-mod-workshop-assessment",templateUrl:"addon-mod-workshop-assessment.html"}),d("design:paramtypes",[u.a,s.a,r.s,l.a,a.a,i.a])],e)}()},function(e,t,n){"use strict";function o(e){return r._57(0,[],null,null)}n.d(t,"a",function(){return l}),t.b=o;var r=n(0),i=n(492),l=r._29({encapsulation:2,styles:[],data:{}});r._27("core-style",i.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-style",[],null,null,null,o,l)),r._30(1,573440,null,0,i.a,[r.t],null,null)],null,null)},{css:"css",prefix:"prefix"},{},[])},function(e,t,n){"use strict";function o(e){return m._57(0,[(e()(),m._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,_.b,_.a)),m._30(1,770048,null,0,g.a,[v.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),m._47(131072,y.a,[b.a,m.j])],function(e,t){var n=t.component;e(t,1,0,m._56(t,1,0,m._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return m._57(0,[(e()(),m._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},_.b,_.a)),m._30(1,770048,null,0,g.a,[v.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),m._47(131072,y.a,[b.a,m.j])],function(e,t){e(t,1,0,m._56(t,1,0,m._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return m._57(0,[(e()(),m._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},_.b,_.a)),m._30(1,770048,null,0,g.a,[v.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),m._47(131072,y.a,[b.a,m.j])],function(e,t){e(t,1,0,m._34(1,"",m._56(t,1,0,m._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return m._57(0,[(e()(),m._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},_.b,_.a)),m._30(1,770048,null,0,g.a,[v.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),m._47(131072,y.a,[b.a,m.j])],function(e,t){var n=t.component;e(t,1,0,m._56(t,1,0,m._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return m._57(0,[(e()(),m._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},_.b,_.a)),m._30(1,770048,null,0,g.a,[v.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,600)},null)}function s(e){return m._57(0,[(e()(),m._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},_.b,_.a)),m._30(1,770048,null,0,g.a,[v.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),m._48(2,{$a:0}),m._47(131072,y.a,[b.a,m.j])],function(e,t){var n=t.component;e(t,1,0,m._56(t,1,0,m._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",500)},null)}function u(e){return m._57(0,[(e()(),m._31(0,0,null,null,15,"a",[["class","item-media item item-block"],["ion-item",""],["navPush","AddonModFolderIndexPage"]],[[1,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==m._44(e,6).onClick()&&o}return o},P.b,P.a)),m._30(1,1097728,null,3,O.a,[E.a,C.a,m.t,m.V,[2,I.a]],null,null),m._52(335544320,2,{contentLabel:0}),m._52(603979776,3,{_buttons:1}),m._52(603979776,4,{_icons:1}),m._30(5,16384,null,0,R.a,[],null,null),m._30(6,16384,null,0,S.a,[[2,w.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),m._48(7,{path:0,courseId:1,module:2}),m._30(8,1064960,null,0,A.a,[S.a,[2,D.a]],null,null),(e()(),m._55(-1,2,["\n                "])),(e()(),m._31(10,0,null,0,1,"ion-icon",[["item-start",""],["name","folder"],["role","img"]],[[2,"hide",null]],null,null,null,null)),m._30(11,147456,[[4,4]],0,j.a,[C.a,m.t,m.V],{name:[0,"name"]},null),(e()(),m._55(-1,2,["\n                "])),(e()(),m._31(13,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),m._55(14,null,["",""])),(e()(),m._55(-1,2,["\n            "]))],function(e,t){e(t,6,0,"AddonModFolderIndexPage",e(t,7,0,t.parent.context.$implicit.filepath,t.component.courseId,t.parent.context.$implicit));e(t,11,0,"folder")},function(e,t){e(t,0,0,m._44(t,8)._href);e(t,10,0,m._44(t,11)._hidden);e(t,14,0,t.parent.context.$implicit.name)})}function c(e){return m._57(0,[(e()(),m._31(0,0,null,null,1,"core-file",[],null,null,null,k.b,k.a)),m._30(1,245760,null,0,T.a,[x.a,M.a,N.a,U.a,F.a,L.a,H.a,B.a,q.a,G.a,V.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,t){e(t,1,0,t.parent.context.$implicit,t.component.component,t.parent.context.$implicit.contextid)},null)}function d(e){return m._57(0,[(e()(),m._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),m._55(-1,null,["\n            "])),(e()(),m._26(16777216,null,null,1,null,u)),m._30(3,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,null,["\n            "])),(e()(),m._26(16777216,null,null,1,null,c)),m._30(6,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,"folder"===t.context.$implicit.type);e(t,6,0,"folder"!==t.context.$implicit.type)},null)}function f(e){return m._57(0,[(e()(),m._31(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),m._30(1,16384,null,0,W.a,[C.a,m.t,m.V,z.a,$.l,Y.a],null,null),(e()(),m._55(-1,null,["\n        "])),(e()(),m._26(16777216,null,null,1,null,d)),m._30(4,802816,null,0,K.j,[m._11,m._6,m.E],{ngForOf:[0,"ngForOf"]},null),(e()(),m._55(-1,null,["\n    "]))],function(e,t){e(t,4,0,t.component.contents)},null)}function p(e){return m._57(0,[(e()(),m._31(0,0,null,null,2,"core-empty-box",[["icon","folder"]],null,null,null,Q.b,Q.a)),m._30(1,49152,null,0,X.a,[],{message:[0,"message"],icon:[1,"icon"]},null),m._47(131072,y.a,[b.a,m.j])],function(e,t){e(t,1,0,m._56(t,1,0,m._44(t,2).transform("addon.mod_folder.emptyfilelist")),"folder")},null)}function h(e){return m._57(0,[(e()(),m._55(-1,null,["\n"])),(e()(),m._31(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,J.b,J.a)),m._30(2,245760,null,1,Z.a,[m.t,ee.a,N.a],null,null),m._52(603979776,1,{buttons:1}),(e()(),m._55(-1,0,["\n    "])),(e()(),m._31(5,0,null,0,20,"core-context-menu",[],null,null,null,te.b,te.a)),m._30(6,245760,null,0,v.a,[b.a,ne.a,m.t,N.a,[2,oe.a],M.a],null,null),(e()(),m._55(-1,0,["\n        "])),(e()(),m._26(16777216,null,0,1,null,o)),m._30(9,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n        "])),(e()(),m._26(16777216,null,0,1,null,r)),m._30(12,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n        "])),(e()(),m._26(16777216,null,0,1,null,i)),m._30(15,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n        "])),(e()(),m._26(16777216,null,0,1,null,l)),m._30(18,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n        "])),(e()(),m._26(16777216,null,0,1,null,a)),m._30(21,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n        "])),(e()(),m._26(16777216,null,0,1,null,s)),m._30(24,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n    "])),(e()(),m._55(-1,0,["\n"])),(e()(),m._55(-1,null,["\n\n"])),(e()(),m._55(-1,null,["\n"])),(e()(),m._31(29,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,re.b,re.a)),m._30(30,638976,null,0,ie.a,[b.a,m.t,B.a,M.a],{hideUntil:[0,"hideUntil"]},null),(e()(),m._55(-1,0,["\n\n    "])),(e()(),m._31(32,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,le.b,le.a)),m._30(33,49152,null,0,ae.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),m._55(-1,0,["\n\n    "])),(e()(),m._26(16777216,null,0,1,null,f)),m._30(36,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n\n    "])),(e()(),m._26(16777216,null,0,1,null,p)),m._30(39,16384,null,0,K.k,[m._11,m._6],{ngIf:[0,"ngIf"]},null),(e()(),m._55(-1,0,["\n\n"])),(e()(),m._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,!n.path);e(t,21,0,n.prefetchStatusIcon);e(t,24,0,n.size);e(t,30,0,n.loaded);e(t,33,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,36,0,n.contents&&n.contents.length>0);e(t,39,0,!n.contents||0==n.contents.length)},null)}n.d(t,"b",function(){return fe}),t.c=h,n.d(t,"a",function(){return pe});var m=n(0),_=n(92),g=n(83),v=n(78),y=n(25),b=n(17),P=n(30),O=n(20),E=n(19),C=n(8),I=n(27),R=n(33),S=n(230),w=n(21),A=n(278),D=n(59),j=n(47),k=n(249),T=n(215),x=n(1),M=n(2),N=n(4),U=n(18),F=n(10),L=n(115),H=n(66),B=n(9),q=n(11),G=n(56),V=n(22),K=n(7),W=n(86),z=n(16),$=n(43),Y=n(34),Q=n(124),X=n(114),J=n(96),Z=n(87),ee=n(6),te=n(91),ne=n(70),oe=n(76),re=n(54),ie=n(51),le=n(122),ae=n(112),se=n(505),ue=n(329),ce=n(13),de=n(401),fe=m._29({encapsulation:2,styles:[],data:{}}),pe=m._27("addon-mod-folder-index",se.a,function(e){return m._57(0,[(e()(),m._31(0,0,null,null,1,"addon-mod-folder-index",[],null,null,null,h,fe)),m._30(1,245760,null,0,se.a,[m.C,ue.a,ce.a,F.a,de.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",path:"path"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return E._57(0,[(e()(),E._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openModePicker(n)&&o}return o},C.b,C.a)),E._30(1,1097728,[[3,4]],0,I.a,[[8,""],R.a,E.t,E.V],null,null),E._47(131072,S.a,[w.a,E.j]),(e()(),E._55(-1,0,["\n        "])),(e()(),E._31(4,0,null,0,1,"core-icon",[["name","fa-sort"]],null,null,null,A.b,A.a)),E._30(5,704512,null,0,D.a,[E.t,R.a],{name:[0,"name"]},null),(e()(),E._55(-1,0,["\n    "]))],function(e,t){e(t,5,0,"fa-sort")},function(e,t){e(t,0,0,E._56(t,0,0,E._44(t,2).transform("addon.mod_glossary.browsemode")))})}function r(e){return E._57(0,[(e()(),E._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.toggleSearch()&&o}return o},C.b,C.a)),E._30(1,1097728,[[3,4]],0,I.a,[[8,""],R.a,E.t,E.V],null,null),E._47(131072,S.a,[w.a,E.j]),(e()(),E._55(-1,0,["\n        "])),(e()(),E._31(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),E._30(5,147456,null,0,j.a,[R.a,E.t,E.V],{name:[0,"name"]},null),(e()(),E._55(-1,0,["\n    "]))],function(e,t){e(t,5,0,"search")},function(e,t){e(t,0,0,E._56(t,0,0,E._44(t,2).transform("addon.mod_glossary.bysearch")));e(t,4,0,E._44(t,5)._hidden)})}function i(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),E._47(131072,S.a,[w.a,E.j])],function(e,t){var n=t.component;e(t,1,0,E._56(t,1,0,E._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function l(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),E._47(131072,S.a,[w.a,E.j])],function(e,t){e(t,1,0,E._56(t,1,0,E._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function a(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),E._47(131072,S.a,[w.a,E.j])],function(e,t){e(t,1,0,E._34(1,"",E._56(t,1,0,E._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function s(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),E._47(131072,S.a,[w.a,E.j])],function(e,t){var n=t.component;e(t,1,0,E._56(t,1,0,E._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function u(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),E._47(131072,S.a,[w.a,E.j])],function(e,t){var n=t.component;e(t,1,0,E._56(t,1,0,E._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,650)},null)}function c(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-context-menu-item",[["iconAction","add"]],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.openNewEntry()&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),E._47(131072,S.a,[w.a,E.j])],function(e,t){e(t,1,0,E._56(t,1,0,E._44(t,2).transform("addon.mod_glossary.addentry")),"add",600)},null)}function d(e){return E._57(0,[(e()(),E._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function f(e){return E._57(0,[(e()(),E._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},k.b,k.a)),E._30(1,770048,null,0,T.a,[x.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),E._48(2,{$a:0}),E._47(131072,S.a,[w.a,E.j])],function(e,t){var n=t.component;e(t,1,0,E._56(t,1,0,E._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function p(e){return E._57(0,[(e()(),E._31(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),E._30(1,16384,null,0,M.a,[R.a,E.t,E.V],null,null),(e()(),E._55(-1,null,["\n            "])),(e()(),E._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),E._30(4,147456,null,0,j.a,[R.a,E.t,E.V],{name:[0,"name"]},null),(e()(),E._55(5,null,[" ","\n        "])),E._48(6,{$a:0}),E._47(131072,S.a,[w.a,E.j])],function(e,t){e(t,4,0,"warning")},function(e,t){var n=t.component;e(t,3,0,E._44(t,4)._hidden);e(t,5,0,E._56(t,5,0,E._44(t,7).transform("core.hasdatatosync",e(t,6,0,n.moduleName))))})}function h(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-search-box",[],null,[[null,"onSubmit"]],function(e,t,n){var o=!0;if("onSubmit"===t){o=!1!==e.component.search(n)&&o}return o},N.c,N.b)),E._30(1,245760,null,0,U.a,[w.a,F.a,L.a,H.a,B.a,q.a],{placeholder:[0,"placeholder"],autoFocus:[1,"autoFocus"],lengthCheck:[2,"lengthCheck"],showClear:[3,"showClear"],searchArea:[4,"searchArea"]},{onSubmit:"onSubmit"}),E._47(131072,S.a,[w.a,E.j])],function(e,t){var n=t.component;e(t,1,0,E._56(t,1,0,E._44(t,2).transform("addon.mod_glossary.searchquery")),!0,2,!1,E._34(1,"AddonModGlossary-",n.module.id,""))},null)}function m(e){return E._57(0,[(e()(),E._31(0,0,null,null,9,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openNewEntry(e.context.$implicit)&&o}return o},G.b,G.a)),E._30(1,1097728,null,3,V.a,[K.a,R.a,E.t,E.V,[2,W.a]],null,null),E._52(335544320,7,{contentLabel:0}),E._52(603979776,8,{_buttons:1}),E._52(603979776,9,{_icons:1}),E._30(5,16384,null,0,z.a,[],null,null),(e()(),E._55(-1,2,["\n                    "])),(e()(),E._31(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),E._55(8,null,["",""])),(e()(),E._55(-1,2,["\n                "]))],null,function(e,t){e(t,8,0,t.context.$implicit.concept)})}function _(e){return E._57(0,[(e()(),E._31(0,0,null,null,14,"ion-list",[],null,null,null,null,null)),E._30(1,16384,null,0,$.a,[R.a,E.t,E.V,Y.a,Q.l,X.a],null,null),(e()(),E._55(-1,null,["\n                "])),(e()(),E._31(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,G.b,G.a)),E._30(4,1097728,null,3,V.a,[K.a,R.a,E.t,E.V,[2,W.a]],null,null),E._52(335544320,4,{contentLabel:0}),E._52(603979776,5,{_buttons:1}),E._52(603979776,6,{_icons:1}),E._30(8,16384,null,0,J.a,[R.a,E.t,E.V],null,null),(e()(),E._55(9,2,["\n                    ","\n                "])),E._47(131072,S.a,[w.a,E.j]),(e()(),E._55(-1,null,["\n                "])),(e()(),E._26(16777216,null,null,1,null,m)),E._30(13,802816,null,0,Z.j,[E._11,E._6,E.E],{ngForOf:[0,"ngForOf"]},null),(e()(),E._55(-1,null,["\n            "]))],function(e,t){e(t,13,0,t.component.offlineEntries)},function(e,t){e(t,9,0,E._56(t,9,0,E._44(t,10).transform("addon.mod_glossary.entriestobesynced")))})}function g(e){return E._57(0,[(e()(),E._31(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,G.b,G.a)),E._30(1,1097728,null,3,V.a,[K.a,R.a,E.t,E.V,[2,W.a]],null,null),E._52(335544320,10,{contentLabel:0}),E._52(603979776,11,{_buttons:1}),E._52(603979776,12,{_icons:1}),E._30(5,16384,null,0,J.a,[R.a,E.t,E.V],null,null),(e()(),E._55(6,2,["\n                        ","\n                    "]))],null,function(e,t){e(t,6,0,t.component.getDivider(t.parent.context.$implicit))})}function v(e){return E._57(0,[(e()(),E._31(0,0,null,null,15,null,null,null,null,null,null,null)),(e()(),E._55(-1,null,["\n\n                    "])),(e()(),E._26(16777216,null,null,1,null,g)),E._30(3,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,null,["\n\n                    "])),(e()(),E._31(5,0,null,null,9,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openEntry(e.context.$implicit.id)&&o}return o},G.b,G.a)),E._30(6,1097728,null,3,V.a,[K.a,R.a,E.t,E.V,[2,W.a]],null,null),E._52(335544320,13,{contentLabel:0}),E._52(603979776,14,{_buttons:1}),E._52(603979776,15,{_icons:1}),E._30(10,16384,null,0,z.a,[],null,null),(e()(),E._55(-1,2,["\n                        "])),(e()(),E._31(12,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),E._55(13,null,["",""])),(e()(),E._55(-1,2,["\n                    "])),(e()(),E._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,n.showDivider(t.context.$implicit,n.entries[t.context.index-1]))},function(e,t){e(t,5,0,t.context.$implicit.id==t.component.selectedEntry);e(t,13,0,t.context.$implicit.concept)})}function y(e){return E._57(0,[(e()(),E._31(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),E._30(1,16384,null,0,$.a,[R.a,E.t,E.V,Y.a,Q.l,X.a],null,null),(e()(),E._55(-1,null,["\n                "])),(e()(),E._26(16777216,null,null,1,null,v)),E._30(4,802816,null,0,Z.j,[E._11,E._6,E.E],{ngForOf:[0,"ngForOf"]},null),(e()(),E._55(-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.entries)},null)}function b(e){return E._57(0,[(e()(),E._31(0,0,null,null,2,"core-empty-box",[["icon","list"]],null,null,null,ee.b,ee.a)),E._30(1,49152,null,0,te.a,[],{message:[0,"message"],icon:[1,"icon"]},null),E._47(131072,S.a,[w.a,E.j])],function(e,t){e(t,1,0,E._56(t,1,0,E._44(t,2).transform("addon.mod_glossary.noentriesfound")),"list")},null)}function P(e){return E._57(0,[(e()(),E._31(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,ne.b,ne.a)),E._30(1,1228800,null,2,oe.a,[Y.a],null,null),E._52(335544320,16,{_mainButton:0}),E._52(603979776,17,{_fabLists:1}),E._30(4,212992,null,0,re.a,[E.t,ie.a],null,null),(e()(),E._55(-1,0,["\n            "])),(e()(),E._31(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openNewEntry()&&o}return o},le.b,le.a)),E._30(7,49152,[[16,4]],0,ae.a,[R.a,E.t,E.V],null,null),E._47(131072,S.a,[w.a,E.j]),(e()(),E._55(-1,0,["\n                "])),(e()(),E._31(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),E._30(11,147456,null,0,j.a,[R.a,E.t,E.V],{name:[0,"name"]},null),(e()(),E._55(-1,0,["\n            "])),(e()(),E._55(-1,0,["\n        "]))],function(e,t){e(t,4,0);e(t,11,0,"add")},function(e,t){e(t,6,0,E._56(t,6,0,E._44(t,8).transform("addon.mod_glossary.addentry")));e(t,10,0,E._44(t,11)._hidden)})}function O(e){return E._57(0,[E._52(402653184,1,{splitviewCtrl:0}),E._52(402653184,2,{content:0}),(e()(),E._55(-1,null,["\n"])),(e()(),E._31(3,0,null,null,37,"core-navbar-buttons",[["end",""]],null,null,null,se.b,se.a)),E._30(4,245760,null,1,ue.a,[E.t,ce.a,q.a],null,null),E._52(603979776,3,{buttons:1}),(e()(),E._55(-1,0,["\n    "])),(e()(),E._26(16777216,null,0,1,null,o)),E._30(8,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n    "])),(e()(),E._26(16777216,null,0,1,null,r)),E._30(11,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n    "])),(e()(),E._31(13,0,null,0,26,"core-context-menu",[],null,null,null,de.b,de.a)),E._30(14,245760,null,0,x.a,[w.a,fe.a,E.t,q.a,[2,pe.a],F.a],null,null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,i)),E._30(17,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,l)),E._30(20,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,a)),E._30(23,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,s)),E._30(26,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,u)),E._30(29,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,c)),E._30(32,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,d)),E._30(35,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n        "])),(e()(),E._26(16777216,null,0,1,null,f)),E._30(38,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n    "])),(e()(),E._55(-1,0,["\n"])),(e()(),E._55(-1,null,["\n\n"])),(e()(),E._55(-1,null,["\n"])),(e()(),E._31(43,0,null,null,43,"core-split-view",[],null,null,null,he.b,he.a)),E._30(44,245760,[[1,4]],0,me.a,[[2,_e.a],E.t,ge.a,Y.a,w.a],null,null),(e()(),E._55(-1,0,["\n    "])),(e()(),E._31(46,0,null,0,39,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ve.b,ve.a)),E._30(47,4374528,[[2,4]],0,ie.a,[R.a,Y.a,X.a,E.t,E.V,ye.a,be.a,E.M,[2,Pe.a],[2,_e.a]],null,null),(e()(),E._55(-1,1,["\n        "])),(e()(),E._31(49,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.doRefresh(n)&&o}return o},null,null)),E._30(50,212992,null,0,Oe.a,[Y.a,ie.a,E.M,Q.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),E._55(-1,null,["\n            "])),(e()(),E._31(52,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ee.b,Ee.a)),E._30(53,114688,null,0,Ce.a,[Oe.a,R.a],{pullingText:[0,"pullingText"]},null),E._47(131072,S.a,[w.a,E.j]),(e()(),E._55(-1,null,["\n        "])),(e()(),E._55(-1,1,["\n\n        "])),(e()(),E._31(57,0,null,1,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,Ie.b,Ie.a)),E._30(58,49152,null,0,Re.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),E._55(-1,1,["\n\n        "])),(e()(),E._55(-1,1,["\n        "])),(e()(),E._26(16777216,null,1,1,null,p)),E._30(62,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,1,["\n\n        "])),(e()(),E._26(16777216,null,1,1,null,h)),E._30(65,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,1,["\n\n        "])),(e()(),E._31(67,0,null,1,14,"core-loading",[["class","core-loading-center"]],null,null,null,Se.b,Se.a)),E._30(68,638976,null,0,we.a,[w.a,E.t,H.a,F.a],{hideUntil:[0,"hideUntil"]},null),(e()(),E._55(-1,0,["\n\n            "])),(e()(),E._26(16777216,null,0,1,null,_)),E._30(71,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n\n            "])),(e()(),E._26(16777216,null,0,1,null,y)),E._30(74,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n\n            "])),(e()(),E._26(16777216,null,0,1,null,b)),E._30(77,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,0,["\n\n            "])),(e()(),E._31(79,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.loadMoreEntries(n)&&o}return o},Ae.b,Ae.a)),E._30(80,573440,null,0,De.a,[[2,ie.a],q.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),E._55(-1,0,["\n        "])),(e()(),E._55(-1,1,["\n\n        "])),(e()(),E._26(16777216,null,0,1,null,P)),E._30(84,16384,null,0,Z.k,[E._11,E._6],{ngIf:[0,"ngIf"]},null),(e()(),E._55(-1,1,["\n    "])),(e()(),E._55(-1,0,["\n"])),(e()(),E._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0);e(t,8,0,n.glossary&&n.glossary.browsemodes&&n.glossary.browsemodes.length>1);e(t,11,0,n.glossary),e(t,14,0);e(t,17,0,n.externalUrl);e(t,20,0,n.description);e(t,23,0,n.blog);e(t,26,0,n.loaded&&!(n.hasOffline||n.hasOfflineRatings)&&n.isOnline);e(t,29,0,n.loaded&&(n.hasOffline||n.hasOfflineRatings)&&n.isOnline);e(t,32,0,n.canAdd);e(t,35,0,n.prefetchStatusIcon);e(t,38,0,n.size),e(t,44,0);e(t,50,0,n.loaded);e(t,53,0,E._34(1,"",E._56(t,53,0,E._44(t,54).transform("core.pulltorefresh")),""));e(t,58,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,62,0,n.hasOffline||n.hasOfflineRatings);e(t,65,0,n.isSearch);e(t,68,0,n.loaded);e(t,71,0,!n.isSearch&&n.offlineEntries.length>0);e(t,74,0,n.entries.length>0);e(t,77,0,!n.entries.length&&!n.offlineEntries.length);e(t,80,0,n.canLoadMore,n.loadMoreError);e(t,84,0,n.canAdd)},function(e,t){e(t,46,0,E._44(t,47).statusbarPadding,E._44(t,47)._hasRefresher);e(t,49,0,"inactive"!==E._44(t,50).state,E._44(t,50)._top);e(t,52,0,E._44(t,53).r.state)})}n.d(t,"b",function(){return Ne}),t.c=O,n.d(t,"a",function(){return Ue});var E=n(0),C=n(45),I=n(42),R=n(8),S=n(25),w=n(17),A=n(80),D=n(75),j=n(47),k=n(92),T=n(83),x=n(78),M=n(89),N=n(475),U=n(379),F=n(2),L=n(283),H=n(9),B=n(1),q=n(4),G=n(30),V=n(20),K=n(19),W=n(27),z=n(33),$=n(86),Y=n(16),Q=n(43),X=n(34),J=n(100),Z=n(7),ee=n(124),te=n(114),ne=n(281),oe=n(218),re=n(255),ie=n(29),le=n(282),ae=n(190),se=n(96),ue=n(87),ce=n(6),de=n(91),fe=n(70),pe=n(76),he=n(474),me=n(28),_e=n(21),ge=n(72),ve=n(181),ye=n(35),be=n(107),Pe=n(39),Oe=n(159),Ee=n(212),Ce=n(173),Ie=n(122),Re=n(112),Se=n(54),we=n(51),Ae=n(373),De=n(273),je=n(508),ke=n(203),Te=n(258),xe=n(403),Me=n(201),Ne=E._29({encapsulation:2,styles:[],data:{}}),Ue=E._27("addon-mod-glossary-index",je.a,function(e){return E._57(0,[(e()(),E._31(0,0,null,null,1,"addon-mod-glossary-index",[],null,null,null,O,Ne)),E._30(1,245760,null,0,je.a,[E.C,fe.a,ke.a,Te.a,xe.a,Me.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._30(1,147456,null,0,d.a,[f.a,c.t,c.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"bookmark")},function(e,t){e(t,0,0,c._44(t,1)._hidden)})}function r(e){return c._57(0,[(e()(),c._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,p.b,p.a)),c._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),c._47(131072,_.a,[g.a,c.j])],function(e,t){var n=t.component;e(t,1,0,c._56(t,1,0,c._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function i(e){return c._57(0,[(e()(),c._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},p.b,p.a)),c._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),c._47(131072,_.a,[g.a,c.j])],function(e,t){e(t,1,0,c._56(t,1,0,c._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function l(e){return c._57(0,[(e()(),c._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},p.b,p.a)),c._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),c._47(131072,_.a,[g.a,c.j])],function(e,t){e(t,1,0,c._34(1,"",c._56(t,1,0,c._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function a(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},p.b,p.a)),c._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,600)},null)}function s(e){return c._57(0,[(e()(),c._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},p.b,p.a)),c._30(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),c._48(2,{$a:0}),c._47(131072,_.a,[g.a,c.j])],function(e,t){var n=t.component;e(t,1,0,c._56(t,1,0,c._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",500)},null)}function u(e){return c._57(0,[(e()(),c._55(-1,null,["\n"])),(e()(),c._31(1,0,null,null,33,"core-navbar-buttons",[["end",""]],null,null,null,v.b,v.a)),c._30(2,245760,null,1,y.a,[c.t,b.a,P.a],null,null),c._52(603979776,1,{buttons:1}),(e()(),c._55(-1,0,["\n    "])),(e()(),c._31(5,0,null,0,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showToc(n)&&o}return o},O.b,O.a)),c._30(6,1097728,[[1,4]],0,E.a,[[8,""],f.a,c.t,c.V],null,null),(e()(),c._55(-1,0,["\n        "])),(e()(),c._26(16777216,null,0,1,null,o)),c._30(9,16384,null,0,C.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._55(-1,0,["\n    "])),(e()(),c._31(12,0,null,0,21,"core-context-menu",[],null,null,null,I.b,I.a)),c._30(13,245760,null,0,m.a,[g.a,R.a,c.t,P.a,[2,S.a],w.a],null,null),(e()(),c._55(-1,0,["\n        "])),(e()(),c._26(16777216,null,0,1,null,r)),c._30(16,16384,null,0,C.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n        "])),(e()(),c._26(16777216,null,0,1,null,i)),c._30(19,16384,null,0,C.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n        "])),(e()(),c._26(16777216,null,0,1,null,l)),c._30(22,16384,null,0,C.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n        "])),(e()(),c._31(24,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},p.b,p.a)),c._30(25,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),c._47(131072,_.a,[g.a,c.j]),(e()(),c._55(-1,0,["\n        "])),(e()(),c._26(16777216,null,0,1,null,a)),c._30(29,16384,null,0,C.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n        "])),(e()(),c._26(16777216,null,0,1,null,s)),c._30(32,16384,null,0,C.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._55(-1,0,["\n"])),(e()(),c._55(-1,null,["\n\n"])),(e()(),c._55(-1,null,["\n"])),(e()(),c._31(37,0,null,null,12,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,A.b,A.a)),c._30(38,638976,null,0,D.a,[g.a,c.t,j.a,w.a],{hideUntil:[0,"hideUntil"]},null),(e()(),c._55(-1,0,["\n    "])),(e()(),c._31(40,0,null,0,8,"div",[["class","addon-mod-imscp-container"]],null,null,null,null,null)),(e()(),c._55(-1,null,["\n        "])),(e()(),c._31(42,0,null,null,2,"core-navigation-bar",[["contextLevel","module"]],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.loadItem(n)&&o}return o},k.b,k.a)),c._30(43,49152,null,0,T.a,[x.a],{previous:[0,"previous"],next:[1,"next"],info:[2,"info"],title:[3,"title"],component:[4,"component"],componentId:[5,"componentId"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],courseId:[8,"courseId"]},{action:"action"}),c._47(131072,_.a,[g.a,c.j]),(e()(),c._55(-1,null,["\n        "])),(e()(),c._31(46,0,null,null,1,"core-iframe",[],null,null,null,M.b,M.a)),c._30(47,638976,null,0,N.a,[b.a,U.a,P.a,F.c,L.a,H.a,w.a,[2,B.a]],{src:[0,"src"]},null),(e()(),c._55(-1,null,["\n    "])),(e()(),c._55(-1,0,["\n"])),(e()(),c._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0);e(t,9,0,n.items.length),e(t,13,0);e(t,16,0,n.externalUrl);e(t,19,0,n.description);e(t,22,0,n.blog);e(t,25,0,c._56(t,25,0,c._44(t,26).transform("core.refresh")),n.refreshIcon,!1,700);e(t,29,0,n.prefetchStatusIcon);e(t,32,0,n.size);e(t,38,0,n.loaded);e(t,43,0,n.previousItem,n.nextItem,n.description,c._56(t,43,3,c._44(t,44).transform("core.description")),n.component,n.componentId,"module",n.module.id,n.courseId);e(t,47,0,n.src)},null)}n.d(t,"b",function(){return $}),t.c=u,n.d(t,"a",function(){return Y});var c=n(0),d=n(47),f=n(8),p=n(92),h=n(83),m=n(78),_=n(25),g=n(17),v=n(96),y=n(87),b=n(6),P=n(4),O=n(45),E=n(42),C=n(7),I=n(91),R=n(70),S=n(76),w=n(2),A=n(54),D=n(51),j=n(9),k=n(773),T=n(395),x=n(11),M=n(322),N=n(257),U=n(44),F=n(79),L=n(21),H=n(22),B=n(28),q=n(509),G=n(237),V=n(13),K=n(10),W=n(162),z=n(404),$=c._29({encapsulation:2,styles:[],data:{}}),Y=c._27("addon-mod-imscp-index",q.a,function(e){return c._57(0,[(e()(),c._31(0,0,null,null,1,"addon-mod-imscp-index",[],null,null,null,u,$)),c._30(1,245760,null,0,q.a,[c.C,G.a,V.a,K.a,W.a,z.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){e(t,1,0,ce._34(1,"",ce._56(t,1,0,ce._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},de.b,de.a)),ce._30(1,770048,null,0,fe.a,[pe.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ce._55(-1,null,["\n                    "])),(e()(),ce._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(3,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"]},null),(e()(),ce._55(-1,null,["\n                    "])),(e()(),ce._31(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),ce._55(-1,null,["\n                "]))],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,ce._44(t,3)._hidden);e(t,5,0,n.preventMessages[0].message)})}function d(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ce._55(-1,null,["\n                    "])),(e()(),ce._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(3,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"]},null),(e()(),ce._55(4,null,["\n                    ","\n                "])),ce._48(5,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,ce._44(t,3)._hidden);e(t,4,0,ce._56(t,4,0,ce._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function f(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,47,"ion-card",[],null,null,null,null,null)),ce._30(1,16384,null,0,ve.a,[ge.a,ce.t,ce.V],null,null),(e()(),ce._55(-1,null,["\n                    "])),(e()(),ce._31(3,0,[[2,0],["passwordForm",1]],null,43,"form",[["ion-list",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0,r=e.component;if("submit"===t){o=!1!==ce._44(e,5).onSubmit(n)&&o}if("reset"===t){o=!1!==ce._44(e,5).onReset()&&o}if("ngSubmit"===t){o=!1!==r.submitPassword(n,ce._44(e,25))&&o}return o},null,null)),ce._30(4,16384,null,0,ye.w,[],null,null),ce._30(5,4210688,null,0,ye.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),ce._50(2048,null,ye.b,null,[ye.p]),ce._30(7,16384,null,0,ye.o,[ye.b],null,null),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._31(9,0,null,null,20,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(10,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,6,{contentLabel:0}),ce._52(603979776,7,{_buttons:1}),ce._52(603979776,8,{_icons:1}),ce._30(14,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(16,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),ce._30(17,16384,[[6,4]],0,Ie.a,[ge.a,ce.t,ce.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),ce._55(18,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(21,0,null,3,7,"core-show-password",[["item-content",""]],null,null,null,Re.b,Re.a)),ce._30(22,4308992,null,0,Se.a,[ce.t,we.a,Ae.a,De.a],{name:[0,"name"]},null),(e()(),ce._55(-1,0,["\n                                "])),(e()(),ce._31(24,0,null,0,3,"ion-input",[["name","password"],["type","password"]],null,null,null,je.b,je.a)),ce._30(25,5423104,[["passwordinput",4]],0,ke.a,[ge.a,De.a,Oe.a,Te.a,ce.t,ce.V,[2,xe.a],[2,Pe.a],[2,ye.m],Me.a],{type:[0,"type"],clearOnEdit:[1,"clearOnEdit"],placeholder:[2,"placeholder"]},null),ce._47(131072,he.a,[me.a,ce.j]),ce._30(27,81920,null,0,Ne.a,[ce.t,Ae.a,we.a,[2,Ue.a]],null,null),(e()(),ce._55(-1,0,["\n                            "])),(e()(),ce._55(-1,2,["\n                        "])),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._31(31,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,be.b,be.a)),ce._30(32,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,9,{contentLabel:0}),ce._52(603979776,10,{_buttons:1}),ce._52(603979776,11,{_icons:1}),ce._30(36,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(38,0,null,2,6,"button",[["block",""],["icon-end",""],["ion-button",""],["type","submit"]],null,null,null,Fe.b,Fe.a)),ce._30(39,1097728,[[10,4]],0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(40,0,["\n                                ","\n                                "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._31(42,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(43,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),ce._55(-1,0,["\n                            "])),(e()(),ce._55(-1,2,["\n                        "])),(e()(),ce._55(-1,null,["\n                    "])),(e()(),ce._55(-1,null,["\n                "]))],function(e,t){e(t,22,0,"password");e(t,25,0,"password",!1,ce._34(1,"",ce._56(t,25,2,ce._44(t,26).transform("core.login.password")),"")),e(t,27,0);e(t,39,0,"");e(t,43,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,3,0,ce._44(t,7).ngClassUntouched,ce._44(t,7).ngClassTouched,ce._44(t,7).ngClassPristine,ce._44(t,7).ngClassDirty,ce._44(t,7).ngClassValid,ce._44(t,7).ngClassInvalid,ce._44(t,7).ngClassPending);e(t,18,0,ce._56(t,18,0,ce._44(t,19).transform("addon.mod_lesson.enterpassword")));e(t,40,0,ce._56(t,40,0,ce._44(t,41).transform("addon.mod_lesson.continue")));e(t,42,0,ce._44(t,43)._hidden)})}function p(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,12,{contentLabel:0}),ce._52(603979776,13,{_buttons:1}),ce._52(603979776,14,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(8,0,null,2,2,"p",[["padding-bottom",""]],null,null,null,null,null)),(e()(),ce._55(9,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(12,0,null,2,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.review()&&o}return o},Fe.b,Fe.a)),ce._30(13,1097728,[[13,4]],0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(14,0,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,2,["\n                        "]))],function(e,t){e(t,13,0,"")},function(e,t){e(t,9,0,ce._56(t,9,0,ce._44(t,10).transform("addon.mod_lesson.retakefinishedinsync")));e(t,14,0,ce._56(t,14,0,ce._44(t,15).transform("addon.mod_lesson.review")))})}function h(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,36,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,15,{contentLabel:0}),ce._52(603979776,16,{_buttons:1}),ce._52(603979776,17,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(11,0,null,2,24,"ion-grid",[["class","grid"]],null,null,null,null,null)),ce._30(12,16384,null,0,He.a,[],null,null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._31(14,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),ce._30(15,16384,null,0,Be.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(17,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),ce._30(18,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                            "])),(e()(),ce._31(20,0,null,null,3,"a",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.start(!1)&&o}return o},Fe.b,Fe.a)),ce._30(21,1097728,null,0,Le.a,[[8,""],ge.a,ce.t,ce.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),ce._55(22,0,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(26,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),ce._30(27,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                            "])),(e()(),ce._31(29,0,null,null,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.start(!0)&&o}return o},Fe.b,Fe.a)),ce._30(30,1097728,null,0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(31,0,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "]))],function(e,t){e(t,21,0,"light","");e(t,30,0,"")},function(e,t){e(t,8,0,ce._56(t,8,0,ce._44(t,9).transform("addon.mod_lesson.youhaveseen")));e(t,22,0,ce._56(t,22,0,ce._44(t,23).transform("core.no")));e(t,31,0,ce._56(t,31,0,ce._44(t,32).transform("core.yes")))})}function m(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,18,{contentLabel:0}),ce._52(603979776,19,{_buttons:1}),ce._52(603979776,20,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(11,0,null,2,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.start(!1)&&o}return o},Fe.b,Fe.a)),ce._30(12,1097728,[[19,4]],0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(13,0,["\n                                    ","\n                                    "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._31(15,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(16,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),ce._55(-1,0,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "]))],function(e,t){e(t,12,0,"");e(t,16,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,8,0,ce._56(t,8,0,ce._44(t,9).transform("addon.mod_lesson.leftduringtimed")));e(t,13,0,ce._56(t,13,0,ce._44(t,14).transform("addon.mod_lesson.continue")));e(t,15,0,ce._44(t,16)._hidden)})}function _(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,21,{contentLabel:0}),ce._52(603979776,22,{_buttons:1}),ce._52(603979776,23,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,2,["\n                            "]))],null,function(e,t){e(t,8,0,ce._56(t,8,0,ce._44(t,9).transform("addon.mod_lesson.leftduringtimednoretake")))})}function g(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.start(!1)&&o}return o},Fe.b,Fe.a)),ce._30(1,1097728,[[25,4]],0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(2,0,["\n                                    ","\n                                    "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._31(4,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(5,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),ce._55(-1,0,["\n                                "]))],function(e,t){e(t,1,0,"");e(t,5,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,2,0,ce._56(t,2,0,ce._44(t,3).transform("core.start")));e(t,4,0,ce._44(t,5)._hidden)})}function v(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.start(!1)&&o}return o},Fe.b,Fe.a)),ce._30(1,1097728,[[25,4]],0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(2,0,["\n                                    ","\n                                    "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._31(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(5,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"]},null),(e()(),ce._55(-1,0,["\n                                "]))],function(e,t){e(t,1,0,"");e(t,5,0,"search")},function(e,t){e(t,2,0,ce._56(t,2,0,ce._44(t,3).transform("addon.mod_lesson.preview")));e(t,4,0,ce._44(t,5)._hidden)})}function y(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,24,{contentLabel:0}),ce._52(603979776,25,{_buttons:1}),ce._52(603979776,26,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._26(16777216,[[4,2]],2,1,null,g)),ce._30(9,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._26(16777216,[[4,2]],2,1,null,v)),ce._30(12,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,2,["\n                            "]))],function(e,t){var n=t.component;e(t,9,0,!n.canManage);e(t,12,0,n.canManage)},null)}function b(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,27,{contentLabel:0}),ce._52(603979776,28,{_buttons:1}),ce._52(603979776,29,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(8,0,null,2,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.start(!0)&&o}return o},Fe.b,Fe.a)),ce._30(9,1097728,[[28,4]],0,Le.a,[[8,""],ge.a,ce.t,ce.V],{block:[0,"block"]},null),(e()(),ce._55(10,0,["\n                                    ","\n                                    "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._31(12,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ce._30(13,147456,null,0,_e.a,[ge.a,ce.t,ce.V],{name:[0,"name"],md:[1,"md"]},null),(e()(),ce._55(-1,0,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "]))],function(e,t){e(t,9,0,"");e(t,13,0,"arrow-forward","ios-arrow-forward")},function(e,t){e(t,10,0,ce._56(t,10,0,ce._44(t,11).transform("addon.mod_lesson.continue")));e(t,12,0,ce._44(t,13)._hidden)})}function P(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),ce._55(-1,null,["\n                            "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,h)),ce._30(3,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,m)),ce._30(6,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,_)),ce._30(9,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,y)),ce._30(12,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,b)),ce._30(15,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,3,0,n.leftDuringTimed&&!n.lesson.timelimit&&!n.finishedOffline);e(t,6,0,n.leftDuringTimed&&n.lesson.timelimit&&n.lesson.retake&&!n.finishedOffline);e(t,9,0,n.leftDuringTimed&&n.lesson.timelimit&&!n.lesson.retake);e(t,12,0,!n.leftDuringTimed&&!n.finishedOffline);e(t,15,0,n.finishedOffline)},null)}function O(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,8,"ion-list",[],null,null,null,null,null)),ce._30(1,16384,null,0,Ve.a,[ge.a,ce.t,ce.V,De.a,Ke.l,Me.a],null,null),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,p)),ce._30(4,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                        "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,P)),ce._30(7,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,4,0,n.retakeToReview);e(t,7,0,n.lesson&&(!n.preventMessages||!n.preventMessages.length))},null)}function E(e){return ce._57(0,[(e()(),ce._55(-1,null,["\n                "])),(e()(),ce._31(1,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,We.b,We.a)),ce._30(2,49152,null,0,ze.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),ce._55(-1,null,["\n\n                "])),(e()(),ce._55(-1,null,["\n                "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,c)),ce._30(6,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                "])),(e()(),ce._55(-1,null,["\n                "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,d)),ce._30(10,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                "])),(e()(),ce._55(-1,null,["\n                "])),(e()(),ce._26(16777216,[[4,2]],null,1,null,f)),ce._30(14,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                "])),(e()(),ce._31(16,0,null,null,5,"core-loading",[],null,null,null,$e.b,$e.a)),ce._30(17,638976,null,0,Ye.a,[me.a,ce.t,Qe.a,we.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ce._55(-1,0,["\n\n                    "])),(e()(),ce._26(16777216,[[4,2]],0,1,null,O)),ce._30(20,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n                "])),(e()(),ce._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,2,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,6,0,n.lesson&&n.preventMessages&&n.preventMessages.length);e(t,10,0,n.hasOffline);e(t,14,0,n.askPassword);e(t,17,0,!n.showSpinner);e(t,20,0,n.lesson&&(!n.preventMessages||!n.preventMessages.length)||n.retakeToReview)},null)}function C(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"ion-label",[["id","addon-mod_lesson-groupslabel"]],null,null,null,null,null)),ce._30(1,16384,[[32,4]],0,Ie.a,[ge.a,ce.t,ce.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),ce._55(2,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){e(t,1,0,"addon-mod_lesson-groupslabel")},function(e,t){e(t,2,0,ce._56(t,2,0,ce._44(t,3).transform("core.groupsseparate")))})}function I(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"ion-label",[["id","addon-mod_lesson-groupslabel"]],null,null,null,null,null)),ce._30(1,16384,[[32,4]],0,Ie.a,[ge.a,ce.t,ce.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),ce._55(2,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],function(e,t){e(t,1,0,"addon-mod_lesson-groupslabel")},function(e,t){e(t,2,0,ce._56(t,2,0,ce._44(t,3).transform("core.groupsvisible")))})}function R(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ce._30(1,16384,[[35,4]],0,Xe.a,[ce.t],{value:[0,"value"]},null),(e()(),ce._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.id)},function(e,t){e(t,2,0,t.context.$implicit.name)})}function S(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(603979776,32,{contentLabel:0}),ce._52(603979776,33,{_buttons:1}),ce._52(603979776,34,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                        "])),(e()(),ce._26(16777216,[[30,2]],1,1,null,C)),ce._30(8,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,2,["\n                        "])),(e()(),ce._26(16777216,[[30,2]],1,1,null,I)),ce._30(11,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,2,["\n                        "])),(e()(),ce._31(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-mod_lesson-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==ce._44(e,14)._click(n)&&o}if("keyup.space"===t){o=!1!==ce._44(e,14)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.group=n)&&o}if("ionChange"===t){o=!1!==r.setGroup(r.group)&&o}return o},Je.b,Je.a)),ce._30(14,1228800,null,1,Ze.a,[Te.a,Oe.a,ge.a,ce.t,ce.V,[2,Pe.a],et.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),ce._52(603979776,35,{options:1}),ce._50(1024,null,ye.l,function(e){return[e]},[Ze.a]),ce._30(17,671744,null,0,ye.q,[[8,null],[8,null],[8,null],[2,ye.l]],{model:[0,"model"]},{update:"ngModelChange"}),ce._50(2048,null,ye.m,null,[ye.q]),ce._30(19,16384,null,0,ye.n,[ye.m],null,null),(e()(),ce._55(-1,null,["\n                            "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,R)),ce._30(22,802816,null,0,Ge.j,[ce._11,ce._6,ce.E],{ngForOf:[0,"ngForOf"]},null),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._55(-1,2,["\n                    "]))],function(e,t){var n=t.component;e(t,8,0,n.groupInfo.separateGroups);e(t,11,0,n.groupInfo.visibleGroups);e(t,14,0,"action-sheet");e(t,17,0,n.group);e(t,22,0,n.groupInfo.groups)},function(e,t){e(t,13,0,ce._44(t,14)._disabled,ce._44(t,19).ngClassUntouched,ce._44(t,19).ngClassTouched,ce._44(t,19).ngClassPristine,ce._44(t,19).ngClassDirty,ce._44(t,19).ngClassValid,ce._44(t,19).ngClassInvalid,ce._44(t,19).ngClassPending)})}function w(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,4,"core-empty-box",[["icon","stats"]],null,null,null,tt.b,tt.a)),ce._30(1,49152,null,0,nt.a,[],{message:[0,"message"],icon:[1,"icon"]},null),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,0,["\n                    "]))],function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("addon.mod_lesson.nolessonattemptsgroup",e(t,2,0,n.selectedGroupName))),"stats")},null)}function A(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"core-empty-box",[["icon","stats"]],null,null,null,tt.b,tt.a)),ce._30(1,49152,null,0,nt.a,[],{message:[0,"message"],icon:[1,"icon"]},null),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,0,["\n                    "]))],function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.nolessonattempts")),"stats")},null)}function D(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.percentagenumber",e(t,2,0,n.overview.avescore))))})}function j(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function k(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.percentagenumber",e(t,2,0,n.overview.highscore))))})}function T(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function x(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.percentagenumber",e(t,2,0,n.overview.lowscore))))})}function M(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function N(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,52,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,36,{contentLabel:0}),ce._52(603979776,37,{_buttons:1}),ce._52(603979776,38,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(7,0,null,2,44,"ion-row",[["class","row"]],null,null,null,null,null)),ce._30(8,16384,null,0,Be.a,[],null,null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._31(10,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(11,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(13,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(14,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,D)),ce._30(18,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,j)),ce._30(21,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(24,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(25,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(27,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(28,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,k)),ce._30(32,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,T)),ce._30(35,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(38,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(39,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(41,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(42,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,x)),ce._30(46,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,M)),ce._30(49,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "]))],function(e,t){var n=t.component;e(t,18,0,n.overview.numofattempts>0);e(t,21,0,n.overview.numofattempts<=0);e(t,32,0,null!=n.overview.highscore);e(t,35,0,null==n.overview.highscore);e(t,46,0,null!=n.overview.lowscore);e(t,49,0,null==n.overview.lowscore)},function(e,t){e(t,14,0,ce._56(t,14,0,ce._44(t,15).transform("addon.mod_lesson.averagescore")));e(t,28,0,ce._56(t,28,0,ce._44(t,29).transform("addon.mod_lesson.highscore")));e(t,42,0,ce._56(t,42,0,ce._44(t,43).transform("addon.mod_lesson.lowscore")))})}function U(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.overview.avetimeReadable)})}function F(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function L(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.overview.hightimeReadable)})}function H(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function B(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.overview.lowtimeReadable)})}function q(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function G(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.percentagenumber",e(t,2,0,n.overview.avescore))))})}function V(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function K(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(1,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(4,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,G)),ce._30(8,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,V)),ce._30(11,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "]))],function(e,t){var n=t.component;e(t,8,0,n.overview.numofattempts>0);e(t,11,0,n.overview.numofattempts<=0)},function(e,t){e(t,4,0,ce._56(t,4,0,ce._44(t,5).transform("addon.mod_lesson.averagescore")))})}function W(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.overview.avetimeReadable)})}function z(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function $(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.percentagenumber",e(t,2,0,n.overview.highscore))))})}function Y(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function Q(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(1,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(4,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,$)),ce._30(8,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,Y)),ce._30(11,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "]))],function(e,t){var n=t.component;e(t,8,0,null!=n.overview.highscore);e(t,11,0,null==n.overview.highscore)},function(e,t){e(t,4,0,ce._56(t,4,0,ce._44(t,5).transform("addon.mod_lesson.highscore")))})}function X(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.overview.hightimeReadable)})}function J(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function Z(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._48(2,{$a:0}),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){var n=t.component;e(t,1,0,ce._56(t,1,0,ce._44(t,3).transform("core.percentagenumber",e(t,2,0,n.overview.lowscore))))})}function ee(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function te(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(1,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(4,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,Z)),ce._30(8,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,ee)),ce._30(11,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "]))],function(e,t){var n=t.component;e(t,8,0,null!=n.overview.lowscore);e(t,11,0,null==n.overview.lowscore)},function(e,t){e(t,4,0,ce._56(t,4,0,ce._44(t,5).transform("addon.mod_lesson.lowscore")))})}function ne(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.overview.lowtimeReadable)})}function oe(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ce._55(1,null,["",""])),ce._47(131072,he.a,[me.a,ce.j])],null,function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,2).transform("addon.mod_lesson.notcompleted")))})}function re(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,161,"ion-card",[["class","addon-mod_lesson-lessonstats"]],null,null,null,null,null)),ce._30(1,16384,null,0,ve.a,[ge.a,ce.t,ce.V],null,null),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._31(3,0,null,null,3,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),ce._30(4,16384,null,0,ot.a,[ge.a,ce.t,ce.V],null,null),(e()(),ce._55(5,null,["\n                            ","\n                        "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n\n                        "])),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._31(9,0,null,null,59,"ion-list",[["class","hidden-phone"]],null,null,null,null,null)),ce._30(10,16384,null,0,Ve.a,[ge.a,ce.t,ce.V,De.a,Ke.l,Me.a],null,null),(e()(),ce._55(-1,null,["\n                            "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,N)),ce._30(13,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._31(15,0,null,null,52,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(16,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,39,{contentLabel:0}),ce._52(603979776,40,{_buttons:1}),ce._52(603979776,41,{_icons:1}),ce._30(20,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(22,0,null,2,44,"ion-row",[["class","row"]],null,null,null,null,null)),ce._30(23,16384,null,0,Be.a,[],null,null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._31(25,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(26,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(28,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(29,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,U)),ce._30(33,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,F)),ce._30(36,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(39,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(40,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(42,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(43,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,L)),ce._30(47,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,H)),ce._30(50,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(53,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ce._30(54,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(56,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(57,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,B)),ce._30(61,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,q)),ce._30(64,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._55(-1,null,["\n\n                        "])),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._31(71,0,null,null,89,"ion-list",[["class","hidden-tablet"]],null,null,null,null,null)),ce._30(72,16384,null,0,Ve.a,[ge.a,ce.t,ce.V,De.a,Ke.l,Me.a],null,null),(e()(),ce._55(-1,null,["\n                            "])),(e()(),ce._31(74,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(75,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,42,{contentLabel:0}),ce._52(603979776,43,{_buttons:1}),ce._52(603979776,44,{_icons:1}),ce._30(79,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(81,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),ce._30(82,16384,null,0,Be.a,[],null,null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,K)),ce._30(85,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(87,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),ce._30(88,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(90,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(91,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,W)),ce._30(95,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,z)),ce._30(98,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._31(103,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(104,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,45,{contentLabel:0}),ce._52(603979776,46,{_buttons:1}),ce._52(603979776,47,{_icons:1}),ce._30(108,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(110,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),ce._30(111,16384,null,0,Be.a,[],null,null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,Q)),ce._30(114,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(116,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),ce._30(117,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(119,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(120,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,X)),ce._30(124,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,J)),ce._30(127,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._55(-1,null,["\n\n                            "])),(e()(),ce._31(132,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,be.b,be.a)),ce._30(133,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,48,{contentLabel:0}),ce._52(603979776,49,{_buttons:1}),ce._52(603979776,50,{_icons:1}),ce._30(137,16384,null,0,Ce.a,[],null,null),(e()(),ce._55(-1,2,["\n                                "])),(e()(),ce._31(139,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),ce._30(140,16384,null,0,Be.a,[],null,null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,te)),ce._30(143,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n\n                                    "])),(e()(),ce._31(145,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),ce._30(146,16384,null,0,qe.a,[],null,null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._31(148,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ce._55(149,null,["",""])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,ne)),ce._30(153,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,oe)),ce._30(156,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,null,["\n                                    "])),(e()(),ce._55(-1,null,["\n                                "])),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._55(-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,13,0,n.overview.lessonscored);e(t,33,0,null!=n.overview.avetime&&n.overview.numofattempts);e(t,36,0,null==n.overview.avetime||!n.overview.numofattempts);e(t,47,0,null!=n.overview.hightime);e(t,50,0,null==n.overview.hightime);e(t,61,0,null!=n.overview.lowtime);e(t,64,0,null==n.overview.lowtime);e(t,85,0,n.overview.lessonscored);e(t,95,0,null!=n.overview.avetime&&n.overview.numofattempts);e(t,98,0,null==n.overview.avetime||!n.overview.numofattempts);e(t,114,0,n.overview.lessonscored);e(t,124,0,null!=n.overview.hightime);e(t,127,0,null==n.overview.hightime);e(t,143,0,n.overview.lessonscored);e(t,153,0,null!=n.overview.lowtime);e(t,156,0,null==n.overview.lowtime)},function(e,t){var n=t.component;e(t,5,0,ce._56(t,5,0,ce._44(t,6).transform("addon.mod_lesson.lessonstats")));e(t,29,0,ce._56(t,29,0,ce._44(t,30).transform("addon.mod_lesson.averagetime")));e(t,43,0,ce._56(t,43,0,ce._44(t,44).transform("addon.mod_lesson.hightime")));e(t,57,0,ce._56(t,57,0,ce._44(t,58).transform("addon.mod_lesson.lowtime")));e(t,87,0,!!n.overview.lessonscored||null);e(t,91,0,ce._56(t,91,0,ce._44(t,92).transform("addon.mod_lesson.averagetime")));e(t,116,0,!!n.overview.lessonscored||null);e(t,120,0,ce._56(t,120,0,ce._44(t,121).transform("addon.mod_lesson.hightime")));e(t,145,0,!!n.overview.lessonscored||null);e(t,149,0,ce._56(t,149,0,ce._44(t,150).transform("addon.mod_lesson.lowtime")))})}function ie(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,19,"a",[["class","item item-block"],["ion-item",""],["navPush","AddonModLessonUserRetakePage"],["text-wrap",""]],[[1,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==ce._44(e,6).onClick()&&o}return o},be.b,be.a)),ce._30(1,1097728,null,3,Pe.a,[Oe.a,ge.a,ce.t,ce.V,[2,Ee.a]],null,null),ce._52(335544320,51,{contentLabel:0}),ce._52(603979776,52,{_buttons:1}),ce._52(603979776,53,{_icons:1}),ce._30(5,16384,null,0,Ce.a,[],null,null),ce._30(6,16384,null,0,rt.a,[[2,Ue.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),ce._48(7,{courseId:0,lessonId:1,userId:2}),ce._30(8,1064960,null,0,it.a,[rt.a,[2,et.a]],null,null),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,lt.b,lt.a)),ce._30(11,16384,null,0,at.a,[],null,null),ce._30(12,770048,null,0,st.a,[Ue.a,ut.a,we.a,ct.a,Qe.a,[2,dt.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ce._55(15,null,["",""])),(e()(),ce._55(-1,2,["\n                            "])),(e()(),ce._31(17,0,null,2,1,"core-progress-bar",[],null,null,null,ft.b,ft.a)),ce._30(18,573440,null,0,pt.a,[ht.c],{progress:[0,"progress"]},null),(e()(),ce._55(-1,2,["\n                        "]))],function(e,t){var n=t.component;e(t,6,0,"AddonModLessonUserRetakePage",e(t,7,0,n.courseId,n.lesson.id,t.context.$implicit.id));e(t,12,0,t.context.$implicit,t.context.$implicit.id,n.courseId);e(t,18,0,t.context.$implicit.bestgrade)},function(e,t){e(t,0,0,ce._44(t,8)._href);e(t,15,0,t.context.$implicit.fullname)})}function le(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,10,"ion-card",[],null,null,null,null,null)),ce._30(1,16384,null,0,ve.a,[ge.a,ce.t,ce.V],null,null),(e()(),ce._55(-1,null,["\n                        "])),(e()(),ce._31(3,0,null,null,3,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),ce._30(4,16384,null,0,ot.a,[ge.a,ce.t,ce.V],null,null),(e()(),ce._55(5,null,["\n                            ","\n                        "])),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n\n                        "])),(e()(),ce._26(16777216,[[30,2]],null,1,null,ie)),ce._30(9,802816,null,0,Ge.j,[ce._11,ce._6,ce.E],{ngForOf:[0,"ngForOf"]},null),(e()(),ce._55(-1,null,["\n                    "]))],function(e,t){e(t,9,0,t.component.overview.students)},function(e,t){e(t,5,0,ce._56(t,5,0,ce._44(t,6).transform("addon.mod_lesson.overview")))})}function ae(e){return ce._57(0,[(e()(),ce._55(-1,null,["\n                "])),(e()(),ce._31(1,0,null,null,21,"core-loading",[],null,null,null,$e.b,$e.a)),ce._30(2,638976,null,0,Ye.a,[me.a,ce.t,Qe.a,we.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ce._55(-1,0,["\n                    "])),(e()(),ce._55(-1,0,["\n                    "])),(e()(),ce._26(16777216,[[30,2]],0,1,null,S)),ce._30(6,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n\n                    "])),(e()(),ce._55(-1,0,["\n                    "])),(e()(),ce._26(16777216,[[30,2]],0,1,null,w)),ce._30(10,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n                    "])),(e()(),ce._26(16777216,[[30,2]],0,1,null,A)),ce._30(13,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n\n                    "])),(e()(),ce._55(-1,0,["\n                    "])),(e()(),ce._26(16777216,[[30,2]],0,1,null,re)),ce._30(17,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n\n                    "])),(e()(),ce._55(-1,0,["\n                    "])),(e()(),ce._26(16777216,[[30,2]],0,1,null,le)),ce._30(21,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n                "])),(e()(),ce._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,2,0,n.reportLoaded);e(t,6,0,n.groupInfo&&(n.groupInfo.separateGroups||n.groupInfo.visibleGroups));e(t,10,0,!n.overview&&n.selectedGroupName);e(t,13,0,!n.overview&&!n.selectedGroupName);e(t,17,0,n.overview);e(t,21,0,n.overview)},null)}function se(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,t,n){var o=!0;if("ionSelect"===t){o=!1!==e.component.reportsSelected()&&o}return o},mt.b,mt.a)),ce._30(1,245760,null,2,_t.a,[gt.a,ce.t,Ae.a,we.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),ce._52(603979776,30,{template:0}),ce._52(335544320,31,{content:0}),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n            "])),(e()(),ce._26(0,[[30,2]],null,0,null,ae)),(e()(),ce._55(-1,null,["\n        "]))],function(e,t){e(t,1,0,ce._56(t,1,0,ce._44(t,4).transform("addon.mod_lesson.reports")))},null)}function ue(e){return ce._57(0,[ce._52(402653184,1,{tabsComponent:0}),ce._52(671088640,2,{formElement:0}),(e()(),ce._55(-1,null,["\n"])),(e()(),ce._31(3,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,vt.b,vt.a)),ce._30(4,245760,null,1,yt.a,[ce.t,bt.a,Ae.a],null,null),ce._52(603979776,3,{buttons:1}),(e()(),ce._55(-1,0,["\n    "])),(e()(),ce._31(7,0,null,0,23,"core-context-menu",[],null,null,null,Pt.b,Pt.a)),ce._30(8,245760,null,0,pe.a,[me.a,Ot.a,ce.t,Ae.a,[2,_t.a],we.a],null,null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,o)),ce._30(11,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,r)),ce._30(14,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,i)),ce._30(17,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,l)),ce._30(20,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,a)),ce._30(23,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,s)),ce._30(26,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,u)),ce._30(29,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n    "])),(e()(),ce._55(-1,0,["\n"])),(e()(),ce._55(-1,null,["\n\n"])),(e()(),ce._55(-1,null,["\n"])),(e()(),ce._31(34,0,null,null,20,"core-loading",[["class","core-loading-center"]],null,null,null,$e.b,$e.a)),ce._30(35,638976,null,0,Ye.a,[me.a,ce.t,Qe.a,we.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ce._55(-1,0,["\n\n    "])),(e()(),ce._31(37,0,null,0,16,"core-tabs",[],null,null,null,Et.b,Et.a)),ce._30(38,4964352,[[1,4]],0,gt.a,[ce.t,xe.a,Ae.a,ct.a,Ct.a,De.a,me.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._31(41,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,t,n){var o=!0;if("ionSelect"===t){o=!1!==e.component.indexSelected()&&o}return o},mt.b,mt.a)),ce._30(42,245760,null,2,_t.a,[gt.a,ce.t,Ae.a,we.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),ce._52(603979776,4,{template:0}),ce._52(335544320,5,{content:0}),ce._47(131072,he.a,[me.a,ce.j]),(e()(),ce._55(-1,null,["\n            "])),(e()(),ce._26(0,[[4,2]],null,0,null,E)),(e()(),ce._55(-1,null,["\n        "])),(e()(),ce._55(-1,0,["\n\n        "])),(e()(),ce._55(-1,0,["\n        "])),(e()(),ce._26(16777216,null,0,1,null,se)),ce._30(52,16384,null,0,Ge.k,[ce._11,ce._6],{ngIf:[0,"ngIf"]},null),(e()(),ce._55(-1,0,["\n    "])),(e()(),ce._55(-1,0,["\n"])),(e()(),ce._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0),e(t,8,0);e(t,11,0,n.externalUrl);e(t,14,0,n.description);e(t,17,0,n.blog);e(t,20,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,23,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,26,0,n.prefetchStatusIcon);e(t,29,0,n.size);e(t,35,0,n.loaded);e(t,38,0,n.selectedTab,n.loaded);e(t,42,0,ce._56(t,42,0,ce._44(t,45).transform("addon.mod_lesson.preview")));e(t,52,0,n.canViewReports)},null)}n.d(t,"b",function(){return Tt}),t.c=ue,n.d(t,"a",function(){return xt});var ce=n(0),de=n(92),fe=n(83),pe=n(78),he=n(25),me=n(17),_e=n(47),ge=n(8),ve=n(89),ye=n(23),be=n(30),Pe=n(20),Oe=n(19),Ee=n(27),Ce=n(33),Ie=n(67),Re=n(736),Se=n(378),we=n(2),Ae=n(4),De=n(16),je=n(110),ke=n(90),Te=n(35),xe=n(29),Me=n(34),Ne=n(376),Ue=n(21),Fe=n(45),Le=n(42),He=n(164),Be=n(119),qe=n(120),Ge=n(7),Ve=n(86),Ke=n(43),We=n(122),ze=n(112),$e=n(54),Ye=n(51),Qe=n(9),Xe=n(108),Je=n(123),Ze=n(109),et=n(59),tt=n(124),nt=n(114),ot=n(318),rt=n(230),it=n(278),lt=n(213),at=n(160),st=n(182),ut=n(1),ct=n(10),dt=n(28),ft=n(485),pt=n(319),ht=n(79),mt=n(730),_t=n(76),gt=n(200),vt=n(96),yt=n(87),bt=n(6),Pt=n(91),Ot=n(70),Et=n(729),Ct=n(126),It=n(510),Rt=n(169),St=n(71),wt=n(286),At=n(287),Dt=n(330),jt=n(24),kt=n(46),Tt=ce._29({encapsulation:2,styles:[],data:{}}),xt=ce._27("addon-mod-lesson-index",It.a,function(e){return ce._57(0,[(e()(),ce._31(0,0,null,null,1,"addon-mod-lesson-index",[],null,null,null,ue,Tt)),ce._30(1,245760,null,0,It.a,[ce.C,Rt.a,[2,xe.a],St.a,wt.a,At.a,we.a,Dt.a,Ue.a,jt.a,kt.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group",action:"action"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return u._57(0,[(e()(),u._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,c.b,c.a)),u._30(1,770048,null,0,d.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),u._47(131072,p.a,[h.a,u.j])],function(e,t){var n=t.component;e(t,1,0,u._56(t,1,0,u._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return u._57(0,[(e()(),u._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},c.b,c.a)),u._30(1,770048,null,0,d.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),u._47(131072,p.a,[h.a,u.j])],function(e,t){e(t,1,0,u._56(t,1,0,u._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return u._57(0,[(e()(),u._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},c.b,c.a)),u._30(1,770048,null,0,d.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),u._47(131072,p.a,[h.a,u.j])],function(e,t){e(t,1,0,u._34(1,"",u._56(t,1,0,u._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return u._57(0,[(e()(),u._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},c.b,c.a)),u._30(1,770048,null,0,d.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),u._47(131072,p.a,[h.a,u.j])],function(e,t){var n=t.component;e(t,1,0,u._56(t,1,0,u._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return u._57(0,[(e()(),u._31(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,m.b,m.a)),u._30(1,49152,null,0,_.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,1,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function s(e){return u._57(0,[(e()(),u._55(-1,null,["\n"])),(e()(),u._31(1,0,null,null,19,"core-navbar-buttons",[["end",""]],null,null,null,g.b,g.a)),u._30(2,245760,null,1,v.a,[u.t,y.a,b.a],null,null),u._52(603979776,1,{buttons:1}),(e()(),u._55(-1,0,["\n    "])),(e()(),u._31(5,0,null,0,14,"core-context-menu",[],null,null,null,P.b,P.a)),u._30(6,245760,null,0,f.a,[h.a,O.a,u.t,b.a,[2,E.a],C.a],null,null),(e()(),u._55(-1,0,["\n        "])),(e()(),u._26(16777216,null,0,1,null,o)),u._30(9,16384,null,0,I.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,0,["\n        "])),(e()(),u._26(16777216,null,0,1,null,r)),u._30(12,16384,null,0,I.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,0,["\n        "])),(e()(),u._26(16777216,null,0,1,null,i)),u._30(15,16384,null,0,I.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,0,["\n        "])),(e()(),u._26(16777216,null,0,1,null,l)),u._30(18,16384,null,0,I.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,0,["\n    "])),(e()(),u._55(-1,0,["\n"])),(e()(),u._55(-1,null,["\n\n"])),(e()(),u._55(-1,null,["\n"])),(e()(),u._31(23,0,null,null,16,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,R.b,R.a)),u._30(24,638976,null,0,S.a,[h.a,u.t,w.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),u._55(-1,0,["\n\n    "])),(e()(),u._26(16777216,null,0,1,null,a)),u._30(27,16384,null,0,I.k,[u._11,u._6],{ngIf:[0,"ngIf"]},null),(e()(),u._55(-1,0,["\n\n    "])),(e()(),u._31(29,0,null,0,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),u._55(-1,null,["\n        "])),(e()(),u._31(31,0,null,null,6,"button",[["block",""],["icon-left",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.launch()&&o}return o},A.b,A.a)),u._30(32,1097728,null,0,D.a,[[8,""],j.a,u.t,u.V],{block:[0,"block"]},null),(e()(),u._55(-1,0,["\n            "])),(e()(),u._31(34,0,null,0,1,"ion-icon",[["name","link"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._30(35,147456,null,0,k.a,[j.a,u.t,u.V],{name:[0,"name"]},null),(e()(),u._55(36,0,["\n            ","\n        "])),u._47(131072,p.a,[h.a,u.j]),(e()(),u._55(-1,null,["\n    "])),(e()(),u._55(-1,0,["\n"])),(e()(),u._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&n.isOnline);e(t,24,0,n.loaded);e(t,27,0,n.lti&&n.lti.showdescriptionlaunch);e(t,32,0,"");e(t,35,0,"link")},function(e,t){e(t,34,0,u._44(t,35)._hidden);e(t,36,0,u._56(t,36,0,u._44(t,37).transform("addon.mod_lti.launchactivity")))})}n.d(t,"b",function(){return N}),t.c=s,n.d(t,"a",function(){return U});var u=n(0),c=n(92),d=n(83),f=n(78),p=n(25),h=n(17),m=n(122),_=n(112),g=n(96),v=n(87),y=n(6),b=n(4),P=n(91),O=n(70),E=n(76),C=n(2),I=n(7),R=n(54),S=n(51),w=n(9),A=n(45),D=n(42),j=n(8),k=n(47),T=n(511),x=n(29),M=n(298),N=u._29({encapsulation:2,styles:[],data:{}}),U=u._27("addon-mod-lti-index",T.a,function(e){return u._57(0,[(e()(),u._31(0,0,null,null,1,"addon-mod-lti-index",[],null,null,null,s,N)),u._30(1,245760,null,0,T.a,[u.C,[2,x.a],M.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,f.b,f.a)),d._30(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),d._47(131072,m.a,[_.a,d.j])],function(e,t){var n=t.component;e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},f.b,f.a)),d._30(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),d._47(131072,m.a,[_.a,d.j])],function(e,t){e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return d._57(0,[(e()(),d._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},f.b,f.a)),d._30(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),d._47(131072,m.a,[_.a,d.j])],function(e,t){e(t,1,0,d._34(1,"",d._56(t,1,0,d._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},f.b,f.a)),d._30(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,600)},null)}function a(e){return d._57(0,[(e()(),d._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},f.b,f.a)),d._30(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),d._48(2,{$a:0}),d._47(131072,m.a,[_.a,d.j])],function(e,t){var n=t.component;e(t,1,0,d._56(t,1,0,d._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",500)},null)}function s(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,g.b,g.a)),d._30(1,49152,null,0,v.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,1,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function u(e){return d._57(0,[(e()(),d._31(0,0,null,null,3,"p",[["class","addon-mod_page-timemodified"],["padding-bottom",""]],null,null,null,null,null)),(e()(),d._55(1,null,["\n            ",": ","\n        "])),d._47(131072,m.a,[_.a,d.j]),d._49(3,1)],null,function(e,t){var n=t.component;e(t,1,0,d._56(t,1,0,d._44(t,2).transform("core.lastmodified")),d._56(t,1,1,e(t,3,0,d._44(t.parent,0),1e3*n.page.timemodified)))})}function c(e){return d._57(0,[d._47(0,y.a,[b.a,P.a]),(e()(),d._55(-1,null,["\n"])),(e()(),d._31(2,0,null,null,26,"core-navbar-buttons",[["end",""]],null,null,null,O.b,O.a)),d._30(3,245760,null,1,E.a,[d.t,b.a,C.a],null,null),d._52(603979776,1,{buttons:1}),(e()(),d._55(-1,0,["\n    "])),(e()(),d._31(6,0,null,0,21,"core-context-menu",[],null,null,null,I.b,I.a)),d._30(7,245760,null,0,h.a,[_.a,R.a,d.t,C.a,[2,S.a],w.a],null,null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,o)),d._30(10,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,r)),d._30(13,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,i)),d._30(16,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._31(18,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},f.b,f.a)),d._30(19,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),d._47(131072,m.a,[_.a,d.j]),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,l)),d._30(23,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n        "])),(e()(),d._26(16777216,null,0,1,null,a)),d._30(26,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n    "])),(e()(),d._55(-1,0,["\n"])),(e()(),d._55(-1,null,["\n\n"])),(e()(),d._55(-1,null,["\n"])),(e()(),d._31(31,0,null,null,14,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,D.b,D.a)),d._30(32,638976,null,0,j.a,[_.a,d.t,k.a,w.a],{hideUntil:[0,"hideUntil"]},null),(e()(),d._55(-1,0,["\n\n    "])),(e()(),d._26(16777216,null,0,1,null,s)),d._30(35,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,0,["\n\n    "])),(e()(),d._31(37,0,null,0,7,"div",[["padding",""]],null,null,null,null,null)),(e()(),d._55(-1,null,["\n        "])),(e()(),d._31(39,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),d._30(40,540672,null,0,T.a,[d.t,x.a,C.a,M.a,_.a,N.a,w.a,U.a,b.a,F.a,L.a,H.a,[2,B.a],[2,q.a],[2,G.a],V.a,k.a,K.a,W.a,z.a,d._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),d._55(-1,null,["\n        "])),(e()(),d._26(16777216,null,null,1,null,u)),d._30(43,16384,null,0,A.k,[d._11,d._6],{ngIf:[0,"ngIf"]},null),(e()(),d._55(-1,null,["\n    "])),(e()(),d._55(-1,0,["\n\n"])),(e()(),d._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0),e(t,7,0);e(t,10,0,n.externalUrl);e(t,13,0,n.description);e(t,16,0,n.blog);e(t,19,0,d._56(t,19,0,d._44(t,20).transform("core.refresh")),n.refreshIcon,!1,700);e(t,23,0,n.prefetchStatusIcon);e(t,26,0,n.size);e(t,32,0,n.loaded);e(t,35,0,n.displayDescription);e(t,40,0,n.contents,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,43,0,n.displayTimemodified&&n.page&&n.page.timemodified)},null)}n.d(t,"b",function(){return Z}),t.c=c,n.d(t,"a",function(){return ee});var d=n(0),f=n(92),p=n(83),h=n(78),m=n(25),_=n(17),g=n(122),v=n(112),y=n(228),b=n(6),P=n(24),O=n(96),E=n(87),C=n(4),I=n(91),R=n(70),S=n(76),w=n(2),A=n(7),D=n(54),j=n(51),k=n(9),T=n(48),x=n(1),M=n(11),N=n(16),U=n(22),F=n(18),L=n(10),H=n(15),B=n(21),q=n(29),G=n(28),V=n(44),K=n(41),W=n(32),z=n(36),$=n(512),Y=n(222),Q=n(13),X=n(331),J=n(405),Z=d._29({encapsulation:2,styles:[],data:{}}),ee=d._27("addon-mod-page-index",$.a,function(e){return d._57(0,[(e()(),d._31(0,0,null,null,1,"addon-mod-page-index",[],null,null,null,c,Z)),d._30(1,245760,null,0,$.a,[d.C,Y.a,Q.a,L.a,X.a,J.a,w.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return K._57(0,[(e()(),K._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){var n=t.component;e(t,1,0,K._56(t,1,0,K._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return K._57(0,[(e()(),K._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){e(t,1,0,K._56(t,1,0,K._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return K._57(0,[(e()(),K._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){e(t,1,0,K._34(1,"",K._56(t,1,0,K._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return K._57(0,[(e()(),K._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){var n=t.component;e(t,1,0,K._56(t,1,0,K._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return K._57(0,[(e()(),K._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){var n=t.component;e(t,1,0,K._56(t,1,0,K._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return K._57(0,[(e()(),K._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return K._57(0,[(e()(),K._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},W.b,W.a)),K._30(1,770048,null,0,z.a,[$.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),K._48(2,{$a:0}),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){var n=t.component;e(t,1,0,K._56(t,1,0,K._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return K._57(0,[(e()(),K._31(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,2,{contentLabel:0}),K._52(603979776,3,{_buttons:1}),K._52(603979776,4,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),(e()(),K._55(-1,2,["\n            "]))],null,function(e,t){e(t,8,0,t.context.$implicit)})}function d(e){return K._57(0,[(e()(),K._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,5,{contentLabel:0}),K._52(603979776,6,{_buttons:1}),K._52(603979776,7,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),K._55(12,null,["",""])),(e()(),K._55(-1,2,["\n            "]))],null,function(e,t){var n=t.component;e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.grademethod")));e(t,12,0,n.quiz.gradeMethodReadable)})}function f(e){return K._57(0,[(e()(),K._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,8,{contentLabel:0}),K._52(603979776,9,{_buttons:1}),K._52(603979776,10,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),K._55(12,null,["",""])),(e()(),K._55(-1,2,["\n            "]))],null,function(e,t){var n=t.component;e(t,8,0,K._56(t,8,0,K._44(t,9).transform("core.lastsync")));e(t,12,0,n.syncTime)})}function p(e){return K._57(0,[(e()(),K._31(0,0,null,null,15,"ion-card",[],null,null,null,null,null)),K._30(1,16384,null,0,oe.a,[ee.a,K.t,K.V],null,null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._31(3,0,null,null,11,"ion-list",[],null,null,null,null,null)),K._30(4,16384,null,0,re.a,[ee.a,K.t,K.V,ie.a,le.l,ae.a],null,null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,c)),K._30(7,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,d)),K._30(10,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,f)),K._30(13,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,7,0,n.accessRules);e(t,10,0,n.quiz&&n.quiz.gradeMethodReadable);e(t,13,0,n.syncTime)},null)}function h(e){return K._57(0,[(e()(),K._31(0,0,null,null,4,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._31(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),K._55(3,null,["",""])),K._47(131072,Y.a,[Q.a,K.j])],null,function(e,t){e(t,3,0,K._56(t,3,0,K._44(t,4).transform("addon.mod_quiz.attemptnumber")))})}function m(e){return K._57(0,[(e()(),K._31(0,0,null,null,3,"ion-col",[["class","hidden-tablet col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._31(2,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),K._55(-1,null,["#"]))],null,null)}function _(e){return K._57(0,[(e()(),K._31(0,0,null,null,4,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._31(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),K._55(3,null,[""," / ",""])),K._47(131072,Y.a,[Q.a,K.j])],null,function(e,t){var n=t.component;e(t,3,0,K._56(t,3,0,K._44(t,4).transform("addon.mod_quiz.marks")),n.quiz.sumGradesFormatted)})}function g(e){return K._57(0,[(e()(),K._31(0,0,null,null,4,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._31(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),K._55(3,null,[""," / ",""])),K._47(131072,Y.a,[Q.a,K.j])],null,function(e,t){var n=t.component;e(t,3,0,K._56(t,3,0,K._44(t,4).transform("addon.mod_quiz.grade")),n.quiz.gradeFormatted)})}function v(e){return K._57(0,[(e()(),K._31(0,0,null,null,3,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._55(2,null,["",""])),K._47(131072,Y.a,[Q.a,K.j])],null,function(e,t){e(t,2,0,K._56(t,2,0,K._44(t,3).transform("addon.mod_quiz.preview")))})}function y(e){return K._57(0,[(e()(),K._31(0,0,null,null,2,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._55(2,null,["",""]))],null,function(e,t){e(t,2,0,t.parent.context.$implicit.attempt)})}function b(e){return K._57(0,[(e()(),K._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),K._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function P(e){return K._57(0,[(e()(),K._31(0,0,null,null,3,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._31(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),K._55(3,null,["",""]))],null,function(e,t){e(t,3,0,t.parent.context.$implicit.readableMark)})}function O(e){return K._57(0,[(e()(),K._31(0,0,null,null,3,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),K._30(1,16384,null,0,ue.a,[],null,null),(e()(),K._31(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),K._55(3,null,["",""]))],null,function(e,t){e(t,3,0,t.parent.context.$implicit.readableGrade)})}function E(e){return K._57(0,[(e()(),K._31(0,0,null,null,35,"a",[["class","item item-block"],["ion-item",""],["navPush","AddonModQuizAttemptPage"],["text-wrap",""]],[[1,"aria-label",0],[1,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==K._44(e,8).onClick()&&o}return o},X.b,X.a)),K._30(1,278528,null,0,se.i,[K.E,K.F,K.t,K.W],{ngClass:[0,"ngClass"]},null),K._48(2,{"addon-mod_quiz-highlighted core-white-push-arrow":0}),K._30(3,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,14,{contentLabel:0}),K._52(603979776,15,{_buttons:1}),K._52(603979776,16,{_icons:1}),K._30(7,16384,null,0,ne.a,[],null,null),K._30(8,16384,null,0,ce.a,[[2,de.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),K._48(9,{courseId:0,quizId:1,attemptId:2}),K._30(10,1064960,null,0,fe.a,[ce.a,[2,pe.a]],null,null),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(13,0,null,2,21,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),K._30(14,16384,null,0,he.a,[],null,null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,v)),K._30(17,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,y)),K._30(20,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._31(22,0,null,null,5,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),K._30(23,16384,null,0,ue.a,[],null,null),(e()(),K._55(-1,null,["\n                        "])),(e()(),K._26(16777216,null,null,1,null,b)),K._30(26,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,P)),K._30(30,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,O)),K._30(33,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                "])),(e()(),K._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,1,0,e(t,2,0,t.context.$implicit.highlightGrade));e(t,8,0,"AddonModQuizAttemptPage",e(t,9,0,n.courseId,n.quiz.id,t.context.$implicit.id));e(t,17,0,n.quiz.showAttemptColumn&&t.context.$implicit.preview);e(t,20,0,n.quiz.showAttemptColumn&&!t.context.$implicit.preview);e(t,26,0,t.context.$implicit.readableState);e(t,30,0,n.quiz.showMarkColumn);e(t,33,0,n.quiz.showGradeColumn)},function(e,t){e(t,0,0,K._56(t,0,0,K._44(t,11).transform("core.seemoredetail")),K._44(t,10)._href)})}function C(e){return K._57(0,[(e()(),K._31(0,0,null,null,52,"ion-card",[["class","addon-mod_quiz-table"]],null,null,null,null,null)),K._30(1,16384,null,0,oe.a,[ee.a,K.t,K.V],null,null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._31(3,0,null,null,9,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),K._30(4,16384,null,0,me.a,[ee.a,K.t,K.V],null,null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._31(6,0,null,null,5,"div",[["class","safe-padding-horizontal"]],null,null,null,null,null)),(e()(),K._55(-1,null,["\n                "])),(e()(),K._31(8,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),K._55(9,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,null,["\n            "])),(e()(),K._55(-1,null,["\n        "])),(e()(),K._55(-1,null,["\n        "])),(e()(),K._31(14,0,null,null,37,"ion-list",[],null,null,null,null,null)),K._30(15,16384,null,0,re.a,[ee.a,K.t,K.V,ie.a,le.l,ae.a],null,null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._31(18,0,null,null,28,"ion-item",[["class","addon-mod_quiz-table-header item item-block"],["detail-push",""],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(19,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,11,{contentLabel:0}),K._52(603979776,12,{_buttons:1}),K._52(603979776,13,{_icons:1}),K._30(23,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(25,0,null,2,20,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),K._30(26,16384,null,0,he.a,[],null,null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,h)),K._30(29,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,m)),K._30(32,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._31(34,0,null,null,4,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),K._30(35,16384,null,0,ue.a,[],null,null),(e()(),K._31(36,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),K._55(37,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,_)),K._30(41,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                    "])),(e()(),K._26(16777216,null,null,1,null,g)),K._30(44,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n                "])),(e()(),K._55(-1,2,["\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,E)),K._30(50,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,29,0,n.quiz.showAttemptColumn);e(t,32,0,n.quiz.showAttemptColumn);e(t,41,0,n.quiz.showMarkColumn);e(t,44,0,n.quiz.showGradeColumn);e(t,50,0,n.attempts)},function(e,t){e(t,9,0,K._56(t,9,0,K._44(t,10).transform("addon.mod_quiz.summaryofattempts")));e(t,37,0,K._56(t,37,0,K._44(t,38).transform("addon.mod_quiz.attemptstate")))})}function I(e){return K._57(0,[(e()(),K._31(0,0,null,null,6,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,17,{contentLabel:0}),K._52(603979776,18,{_buttons:1}),K._52(603979776,19,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(6,2,["",""]))],null,function(e,t){e(t,6,0,t.component.gradeResult)})}function R(e){return K._57(0,[(e()(),K._31(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,20,{contentLabel:0}),K._52(603979776,21,{_buttons:1}),K._52(603979776,22,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(6,2,["",""])),K._47(131072,Y.a,[Q.a,K.j])],null,function(e,t){e(t,6,0,K._56(t,6,0,K._44(t,7).transform("core.course.overriddennotice")))})}function S(e){return K._57(0,[(e()(),K._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,23,{contentLabel:0}),K._52(603979776,24,{_buttons:1}),K._52(603979776,25,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._31(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),K._30(13,540672,null,0,_e.a,[K.t,ge.a,ve.a,ye.a,Q.a,ie.a,be.a,Pe.a,Oe.a,Ee.a,Ce.a,Ie.a,[2,de.a],[2,Re.a],[2,Se.a],we.a,Ae.a,De.a,je.a,ke.a,K._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),K._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,13,0,n.gradebookFeedback,n.component,n.componentId,"module",n.module.id,n.courseId)},function(e,t){e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.comment")))})}function w(e){return K._57(0,[(e()(),K._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,26,{contentLabel:0}),K._52(603979776,27,{_buttons:1}),K._52(603979776,28,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._31(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),K._30(13,540672,null,0,_e.a,[K.t,ge.a,ve.a,ye.a,Q.a,ie.a,be.a,Pe.a,Oe.a,Ee.a,Ce.a,Ie.a,[2,de.a],[2,Re.a],[2,Se.a],we.a,Ae.a,De.a,je.a,ke.a,K._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),K._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,13,0,n.overallFeedback,n.component,n.componentId,"module",n.module.id,n.courseId)},function(e,t){e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.overallfeedback")))})}function A(e){return K._57(0,[(e()(),K._31(0,0,null,null,18,"ion-card",[],null,null,null,null,null)),K._30(1,16384,null,0,oe.a,[ee.a,K.t,K.V],null,null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._31(3,0,null,null,14,"ion-list",[],null,null,null,null,null)),K._30(4,16384,null,0,re.a,[ee.a,K.t,K.V,ie.a,le.l,ae.a],null,null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,I)),K._30(7,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,R)),K._30(10,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,S)),K._30(13,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,w)),K._30(16,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,7,0,n.gradeResult);e(t,10,0,n.gradeOverridden);e(t,13,0,n.gradebookFeedback);e(t,16,0,n.quiz.showFeedbackColumn&&n.overallFeedback)},null)}function D(e){return K._57(0,[(e()(),K._31(0,0,null,null,9,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,29,{contentLabel:0}),K._52(603979776,30,{_buttons:1}),K._52(603979776,31,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),(e()(),K._55(-1,2,["\n            "]))],null,function(e,t){e(t,8,0,t.context.$implicit)})}function j(e){return K._57(0,[(e()(),K._31(0,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,32,{contentLabel:0}),K._52(603979776,33,{_buttons:1}),K._52(603979776,34,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n            "]))],null,function(e,t){e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.noquestions")))})}function k(e){return K._57(0,[(e()(),K._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),K._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function T(e){return K._57(0,[(e()(),K._31(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,35,{contentLabel:0}),K._52(603979776,36,{_buttons:1}),K._52(603979776,37,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._26(16777216,null,2,1,null,k)),K._30(12,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,2,["\n            "]))],function(e,t){e(t,12,0,t.component.unsupportedQuestions)},function(e,t){e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.errorquestionsnotsupported")))})}function x(e){return K._57(0,[(e()(),K._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),K._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function M(e){return K._57(0,[(e()(),K._31(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,38,{contentLabel:0}),K._52(603979776,39,{_buttons:1}),K._52(603979776,40,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._26(16777216,null,2,1,null,x)),K._30(12,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,2,["\n            "]))],function(e,t){e(t,12,0,t.component.unsupportedRules)},function(e,t){e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.errorrulesnotsupported")))})}function N(e){return K._57(0,[(e()(),K._31(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,41,{contentLabel:0}),K._52(603979776,42,{_buttons:1}),K._52(603979776,43,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),K._55(12,null,["",""])),(e()(),K._55(-1,2,["\n            "]))],null,function(e,t){var n=t.component;e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.errorbehaviournotsupported")));e(t,12,0,n.quiz.preferredbehaviour)})}function U(e){return K._57(0,[(e()(),K._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),K._55(-1,null,["\n                "])),(e()(),K._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),K._30(3,147456,null,0,Te.a,[ee.a,K.t,K.V],{name:[0,"name"]},null),(e()(),K._55(4,null,["\n                ","\n            "])),K._48(5,{$a:0}),K._47(131072,Y.a,[Q.a,K.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,K._44(t,3)._hidden);e(t,4,0,K._56(t,4,0,K._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function F(e){return K._57(0,[(e()(),K._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),K._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function L(e){return K._57(0,[(e()(),K._31(0,0,null,null,17,"ion-item",[["class","core-warning-item item item-block"],["text-wrap",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,44,{contentLabel:0}),K._52(603979776,45,{_buttons:1}),K._52(603979776,46,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._55(8,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),K._55(12,null,["",""])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n                "])),(e()(),K._26(16777216,null,2,1,null,F)),K._30(16,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,2,["\n            "]))],function(e,t){e(t,16,0,t.component.unsupportedQuestions)},function(e,t){e(t,8,0,K._56(t,8,0,K._44(t,9).transform("addon.mod_quiz.canattemptbutnotsubmit")));e(t,12,0,K._56(t,12,0,K._44(t,13).transform("addon.mod_quiz.warningquestionsnotsupported")))})}function H(e){return K._57(0,[(e()(),K._31(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,47,{contentLabel:0}),K._52(603979776,48,{_buttons:1}),K._52(603979776,49,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.attemptQuiz()&&o}return o},xe.b,xe.a)),K._30(8,1097728,[[48,4]],0,Me.a,[[8,""],ee.a,K.t,K.V],{block:[0,"block"]},null),(e()(),K._55(9,0,["\n                    ","\n                "])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._55(-1,2,["\n            "]))],function(e,t){e(t,8,0,"")},function(e,t){var n=t.component;e(t,9,0,K._56(t,9,0,K._44(t,10).transform(n.buttonText)))})}function B(e){return K._57(0,[(e()(),K._31(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,50,{contentLabel:0}),K._52(603979776,51,{_buttons:1}),K._52(603979776,52,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,xe.b,xe.a)),K._30(8,1097728,[[51,4]],0,Me.a,[[8,""],ee.a,K.t,K.V],{block:[0,"block"]},null),K._30(9,81920,null,0,Ne.a,[K.t,ve.a,be.a,ge.a,Pe.a,Ie.a,[2,de.a],[2,Re.a],[2,Se.a],ye.a],null,null),(e()(),K._55(10,0,["\n                    ","\n                    "])),K._47(131072,Y.a,[Q.a,K.j]),(e()(),K._31(12,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),K._30(13,147456,null,0,Te.a,[ee.a,K.t,K.V],{name:[0,"name"]},null),(e()(),K._55(-1,0,["\n                "])),(e()(),K._55(-1,2,["\n            "]))],function(e,t){e(t,8,0,""),e(t,9,0);e(t,13,0,"open")},function(e,t){e(t,7,0,t.component.externalUrl);e(t,10,0,K._56(t,10,0,K._44(t,11).transform("core.openinbrowser")));e(t,12,0,K._44(t,13)._hidden)})}function q(e){return K._57(0,[(e()(),K._31(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,X.b,X.a)),K._30(1,1097728,null,3,J.a,[Z.a,ee.a,K.t,K.V,[2,te.a]],null,null),K._52(335544320,53,{contentLabel:0}),K._52(603979776,54,{_buttons:1}),K._52(603979776,55,{_icons:1}),K._30(5,16384,null,0,ne.a,[],null,null),(e()(),K._55(-1,2,["\n                "])),(e()(),K._31(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Ue.b,Ue.a)),K._30(8,114688,null,0,Fe.a,[ee.a,K.t,K.V],null,null),(e()(),K._55(-1,2,["\n            "]))],function(e,t){e(t,8,0)},function(e,t){e(t,7,0,K._44(t,8)._paused)})}function G(e){return K._57(0,[(e()(),K._31(0,0,null,null,42,"ion-card",[],null,null,null,null,null)),K._30(1,16384,null,0,oe.a,[ee.a,K.t,K.V],null,null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._31(3,0,null,null,38,"ion-list",[],null,null,null,null,null)),K._30(4,16384,null,0,re.a,[ee.a,K.t,K.V,ie.a,le.l,ae.a],null,null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,D)),K._30(8,802816,null,0,se.j,[K._11,K._6,K.E],{ngForOf:[0,"ngForOf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,j)),K._30(11,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,T)),K._30(14,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,M)),K._30(17,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,N)),K._30(20,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,U)),K._30(24,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,L)),K._30(28,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,H)),K._30(32,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,B)),K._30(36,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n\n            "])),(e()(),K._55(-1,null,["\n            "])),(e()(),K._26(16777216,null,null,1,null,q)),K._30(40,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,null,["\n        "])),(e()(),K._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,8,0,n.preventMessages);e(t,11,0,0===n.quiz.hasquestions);e(t,14,0,!n.hasSupportedQuestions&&n.unsupportedQuestions&&n.unsupportedQuestions.length);e(t,17,0,n.unsupportedRules&&n.unsupportedRules.length);e(t,20,0,!1===n.behaviourSupported);e(t,24,0,n.buttonText&&n.hasOffline&&!n.showStatusSpinner);e(t,28,0,n.hasSupportedQuestions&&n.unsupportedQuestions&&n.unsupportedQuestions.length);e(t,32,0,n.buttonText&&!n.showStatusSpinner);e(t,36,0,!n.buttonText&&(!n.hasSupportedQuestions&&n.unsupportedQuestions&&n.unsupportedQuestions.length||n.unsupportedRules&&n.unsupportedRules.length||!1===n.behaviourSupported));e(t,40,0,n.showStatusSpinner)},null)}function V(e){return K._57(0,[(e()(),K._55(-1,null,["\n"])),(e()(),K._31(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,Le.b,Le.a)),K._30(2,245760,null,1,He.a,[K.t,Oe.a,ve.a],null,null),K._52(603979776,1,{buttons:1}),(e()(),K._55(-1,0,["\n    "])),(e()(),K._31(5,0,null,0,23,"core-context-menu",[],null,null,null,Be.b,Be.a)),K._30(6,245760,null,0,$.a,[Q.a,qe.a,K.t,ve.a,[2,Ge.a],be.a],null,null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,o)),K._30(9,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,r)),K._30(12,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,i)),K._30(15,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,l)),K._30(18,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,a)),K._30(21,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,s)),K._30(24,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n        "])),(e()(),K._26(16777216,null,0,1,null,u)),K._30(27,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n    "])),(e()(),K._55(-1,0,["\n"])),(e()(),K._55(-1,null,["\n\n"])),(e()(),K._55(-1,null,["\n"])),(e()(),K._31(32,0,null,null,21,"core-loading",[["class","core-loading-center"]],null,null,null,Ve.b,Ve.a)),K._30(33,638976,null,0,Ke.a,[Q.a,K.t,Ae.a,be.a],{hideUntil:[0,"hideUntil"]},null),(e()(),K._55(-1,0,["\n\n    "])),(e()(),K._31(35,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,We.b,We.a)),K._30(36,49152,null,0,ze.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),K._55(-1,0,["\n\n    "])),(e()(),K._55(-1,0,["\n    "])),(e()(),K._26(16777216,null,0,1,null,p)),K._30(40,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n\n    "])),(e()(),K._55(-1,0,["\n    "])),(e()(),K._26(16777216,null,0,1,null,C)),K._30(44,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n\n    "])),(e()(),K._55(-1,0,["\n    "])),(e()(),K._26(16777216,null,0,1,null,A)),K._30(48,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n\n    "])),(e()(),K._55(-1,0,["\n    "])),(e()(),K._26(16777216,null,0,1,null,G)),K._30(52,16384,null,0,se.k,[K._11,K._6],{ngIf:[0,"ngIf"]},null),(e()(),K._55(-1,0,["\n"])),(e()(),K._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,21,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,24,0,n.prefetchStatusIcon);e(t,27,0,n.size);e(t,33,0,n.loaded);e(t,36,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,40,0,n.quiz&&n.quiz.gradeMethodReadable||n.accessRules&&n.accessRules.length||n.syncTime);e(t,44,0,n.quiz&&n.attempts&&n.attempts.length);e(t,48,0,n.quiz&&n.showResults&&(n.gradeResult||n.gradeOverridden||n.gradebookFeedback||n.quiz.showFeedbackColumn&&n.overallFeedback));e(t,52,0,n.quiz)},null)}n.d(t,"b",function(){return tt}),t.c=V,n.d(t,"a",function(){return nt});var K=n(0),W=n(92),z=n(83),$=n(78),Y=n(25),Q=n(17),X=n(30),J=n(20),Z=n(19),ee=n(8),te=n(27),ne=n(33),oe=n(89),re=n(86),ie=n(16),le=n(43),ae=n(34),se=n(7),ue=n(120),ce=n(230),de=n(21),fe=n(278),pe=n(59),he=n(119),me=n(318),_e=n(48),ge=n(1),ve=n(4),ye=n(11),be=n(2),Pe=n(22),Oe=n(6),Ee=n(18),Ce=n(10),Ie=n(15),Re=n(29),Se=n(28),we=n(44),Ae=n(9),De=n(41),je=n(32),ke=n(36),Te=n(47),xe=n(45),Me=n(42),Ne=n(174),Ue=n(121),Fe=n(101),Le=n(96),He=n(87),Be=n(91),qe=n(70),Ge=n(76),Ve=n(54),Ke=n(51),We=n(122),ze=n(112),$e=n(513),Ye=n(167),Qe=n(253),Xe=n(263),Je=n(259),Ze=n(117),et=n(332),tt=K._29({encapsulation:2,styles:[],data:{}}),nt=K._27("addon-mod-quiz-index",$e.a,function(e){return K._57(0,[(e()(),K._31(0,0,null,null,1,"addon-mod-quiz-index",[],null,null,null,V,tt)),K._30(1,245760,null,0,$e.a,[K.C,Ye.a,[2,Re.a],Qe.a,Xe.a,Je.a,Ze.a,et.a,de.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return p._57(0,[(e()(),p._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,h.b,h.a)),p._30(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),p._47(131072,g.a,[v.a,p.j])],function(e,t){var n=t.component;e(t,1,0,p._56(t,1,0,p._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return p._57(0,[(e()(),p._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},h.b,h.a)),p._30(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),p._47(131072,g.a,[v.a,p.j])],function(e,t){e(t,1,0,p._56(t,1,0,p._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return p._57(0,[(e()(),p._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},h.b,h.a)),p._30(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),p._47(131072,g.a,[v.a,p.j])],function(e,t){e(t,1,0,p._34(1,"",p._56(t,1,0,p._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},h.b,h.a)),p._30(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,600)},null)}function a(e){return p._57(0,[(e()(),p._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},h.b,h.a)),p._30(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),p._48(2,{$a:0}),p._47(131072,g.a,[v.a,p.j])],function(e,t){var n=t.component;e(t,1,0,p._56(t,1,0,p._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",500)},null)}function s(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,y.b,y.a)),p._30(1,49152,null,0,b.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,1,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function u(e){return p._57(0,[(e()(),p._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),p._55(-1,null,["\n        "])),(e()(),p._31(2,0,null,null,1,"core-iframe",[],null,null,null,P.b,P.a)),p._30(3,638976,null,0,O.a,[E.a,C.a,I.a,R.c,S.a,w.a,A.a,[2,D.a]],{src:[0,"src"]},null),(e()(),p._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.src)},null)}function c(e){return p._57(0,[(e()(),p._31(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),p._55(-1,null,["\n        "])),(e()(),p._31(2,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),p._30(3,540672,null,0,j.a,[p.t,k.a,I.a,T.a,v.a,x.a,A.a,w.a,E.a,M.a,N.a,U.a,[2,S.a],[2,F.a],[2,D.a],C.a,L.a,H.a,B.a,q.a,p._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),p._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.contentText,!1)},null)}function d(e){return p._57(0,[(e()(),p._31(0,0,null,null,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),p._55(-1,null,["\n        "])),(e()(),p._31(2,0,null,null,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.open()&&o}return o},G.b,G.a)),p._30(3,1097728,null,0,V.a,[[8,""],K.a,p.t,p.V],{block:[0,"block"]},null),(e()(),p._55(-1,0,["\n            "])),(e()(),p._31(5,0,null,0,1,"ion-icon",[["name","document"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),p._30(6,147456,null,0,W.a,[K.a,p.t,p.V],{name:[0,"name"]},null),(e()(),p._55(7,0,["\n            ","\n        "])),p._47(131072,g.a,[v.a,p.j]),(e()(),p._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,"");e(t,6,0,"document")},function(e,t){e(t,5,0,p._44(t,6)._hidden);e(t,7,0,p._56(t,7,0,p._44(t,8).transform("addon.mod_resource.openthefile")))})}function f(e){return p._57(0,[(e()(),p._55(-1,null,["\n"])),(e()(),p._31(1,0,null,null,26,"core-navbar-buttons",[["end",""]],null,null,null,z.b,z.a)),p._30(2,245760,null,1,$.a,[p.t,E.a,I.a],null,null),p._52(603979776,1,{buttons:1}),(e()(),p._55(-1,0,["\n    "])),(e()(),p._31(5,0,null,0,21,"core-context-menu",[],null,null,null,Y.b,Y.a)),p._30(6,245760,null,0,_.a,[v.a,Q.a,p.t,I.a,[2,X.a],A.a],null,null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,o)),p._30(9,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,r)),p._30(12,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,i)),p._30(15,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._31(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},h.b,h.a)),p._30(18,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),p._47(131072,g.a,[v.a,p.j]),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,l)),p._30(22,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n        "])),(e()(),p._26(16777216,null,0,1,null,a)),p._30(25,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n    "])),(e()(),p._55(-1,0,["\n"])),(e()(),p._55(-1,null,["\n\n"])),(e()(),p._55(-1,null,["\n"])),(e()(),p._31(30,0,null,null,14,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,Z.b,Z.a)),p._30(31,638976,null,0,ee.a,[v.a,p.t,L.a,A.a],{hideUntil:[0,"hideUntil"]},null),(e()(),p._55(-1,0,["\n\n    "])),(e()(),p._26(16777216,null,0,1,null,s)),p._30(34,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n\n    "])),(e()(),p._26(16777216,null,0,1,null,u)),p._30(37,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n\n    "])),(e()(),p._26(16777216,null,0,1,null,c)),p._30(40,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n\n    "])),(e()(),p._26(16777216,null,0,1,null,d)),p._30(43,16384,null,0,J.k,[p._11,p._6],{ngIf:[0,"ngIf"]},null),(e()(),p._55(-1,0,["\n\n"])),(e()(),p._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,p._56(t,18,0,p._44(t,19).transform("core.refresh")),n.refreshIcon,!1,700);e(t,22,0,n.prefetchStatusIcon);e(t,25,0,n.size);e(t,31,0,n.loaded);e(t,34,0,"iframe"!=n.mode&&("embedded"!=n.mode||n.displayDescription));e(t,37,0,"iframe"==n.mode);e(t,40,0,"embedded"==n.mode);e(t,43,0,"external"==n.mode)},null)}n.d(t,"b",function(){return le}),t.c=f,n.d(t,"a",function(){return ae});var p=n(0),h=n(92),m=n(83),_=n(78),g=n(25),v=n(17),y=n(122),b=n(112),P=n(322),O=n(257),E=n(6),C=n(44),I=n(4),R=n(79),S=n(21),w=n(22),A=n(2),D=n(28),j=n(48),k=n(1),T=n(11),x=n(16),M=n(18),N=n(10),U=n(15),F=n(29),L=n(9),H=n(41),B=n(32),q=n(36),G=n(45),V=n(42),K=n(8),W=n(47),z=n(96),$=n(87),Y=n(91),Q=n(70),X=n(76),J=n(7),Z=n(54),ee=n(51),te=n(514),ne=n(223),oe=n(13),re=n(406),ie=n(299),le=p._29({encapsulation:2,styles:[],data:{}}),ae=p._27("addon-mod-resource-index",te.a,function(e){return p._57(0,[(e()(),p._31(0,0,null,null,1,"addon-mod-resource-index",[],null,null,null,f,le)),p._30(1,245760,null,0,te.a,[p.C,ne.a,oe.a,N.a,re.a,ie.a,k.a,A.a,M.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){e(t,1,0,ee._34(1,"",ee._56(t,1,0,ee._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},te.b,te.a)),ee._30(1,770048,null,0,ne.a,[oe.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),ee._48(2,{$a:0}),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,4,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._30(3,147456,null,0,le.a,[ae.a,ee.t,ee.V],{name:[0,"name"]},null),(e()(),ee._55(4,null,["\n        ","\n    "]))],function(e,t){e(t,3,0,"information-circle")},function(e,t){var n=t.component;e(t,2,0,ee._44(t,3)._hidden);e(t,4,0,n.scorm.warningMessage)})}function d(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("core.unlimited")))})}function f(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.scorm.maxattempt)})}function p(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,2,{contentLabel:0}),ee._52(603979776,3,{_buttons:1}),ee._52(603979776,4,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._26(16777216,null,3,1,null,d)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._26(16777216,null,3,1,null,f)),ee._30(15,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "]))],function(e,t){var n=t.component;e(t,12,0,0==n.scorm.maxattempt);e(t,15,0,n.scorm.maxattempt>0)},function(e,t){e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("addon.mod_scorm.noattemptsallowed")))})}function h(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,5,{contentLabel:0}),ee._52(603979776,6,{_buttons:1}),ee._52(603979776,7,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(11,0,null,3,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(12,null,["",""])),(e()(),ee._55(-1,2,["\n                    "]))],null,function(e,t){var n=t.component;e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("addon.mod_scorm.noattemptsmade")));e(t,12,0,n.scorm.numAttempts)})}function m(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.grade)})}function _(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function g(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,8,{contentLabel:0}),ee._52(603979776,9,{_buttons:1}),ee._52(603979776,10,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,[""," ",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._26(16777216,null,3,1,null,m)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._26(16777216,null,3,1,null,_)),ee._30(15,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "]))],function(e,t){e(t,12,0,-1!=t.context.$implicit.grade);e(t,15,0,-1==t.context.$implicit.grade)},function(e,t){e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("addon.mod_scorm.gradeforattempt")),t.context.$implicit.number)})}function v(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._26(16777216,null,null,1,null,p)),ee._30(3,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._26(16777216,null,null,1,null,h)),ee._30(6,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._26(16777216,null,null,1,null,g)),ee._30(9,802816,null,0,pe.j,[ee._11,ee._6,ee.E],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,n.scorm.maxattempt>=0);e(t,6,0,n.scorm.numAttempts>=0);e(t,9,0,n.scorm.onlineAttempts)},null)}function y(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.grade)})}function b(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function P(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("addon.mod_scorm.offlineattemptnote")))})}function O(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("addon.mod_scorm.offlineattemptovermax")))})}function E(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,22,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,11,{contentLabel:0}),ee._52(603979776,12,{_buttons:1}),ee._52(603979776,13,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,[""," ",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,3,1,null,y)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,3,1,null,b)),ee._30(15,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,2,1,null,P)),ee._30(18,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,2,1,null,O)),ee._30(21,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,12,0,-1!=t.context.$implicit.grade);e(t,15,0,-1==t.context.$implicit.grade);e(t,18,0,0==n.scorm.maxattempt||t.context.$implicit.number<=n.scorm.maxattempt);e(t,21,0,0!=n.scorm.maxattempt&&t.context.$implicit.number>n.scorm.maxattempt)},function(e,t){e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("addon.mod_scorm.gradeforattempt")),t.context.$implicit.number)})}function C(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,14,{contentLabel:0}),ee._52(603979776,15,{_buttons:1}),ee._52(603979776,16,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(11,0,null,3,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(12,null,["",""])),(e()(),ee._55(-1,2,["\n                "]))],null,function(e,t){var n=t.component;e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("addon.mod_scorm.grademethod")));e(t,12,0,n.scorm.gradeMethodReadable)})}function I(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.scorm.grade)})}function R(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function S(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,17,{contentLabel:0}),ee._52(603979776,18,{_buttons:1}),ee._52(603979776,19,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,3,1,null,I)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,3,1,null,R)),ee._30(15,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,12,0,-1!=n.scorm.grade);e(t,15,0,-1==n.scorm.grade)},function(e,t){e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("addon.mod_scorm.gradereported")))})}function w(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,20,{contentLabel:0}),ee._52(603979776,21,{_buttons:1}),ee._52(603979776,22,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),ee._55(8,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),ee._55(12,null,["",""])),(e()(),ee._55(-1,2,["\n                "]))],null,function(e,t){var n=t.component;e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform("core.lastsync")));e(t,12,0,n.syncTime)})}function A(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,32,"ion-card",[],null,null,null,null,null)),ee._30(1,16384,null,0,he.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(3,0,null,null,9,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),ee._30(4,16384,null,0,me.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._31(6,0,null,null,5,"div",[["class","safe-padding-horizontal"]],null,null,null,null,null)),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._31(8,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ee._55(9,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(14,0,null,null,17,"ion-list",[],null,null,null,null,null)),ee._30(15,16384,null,0,_e.a,[ae.a,ee.t,ee.V,ge.a,ve.l,ye.a],null,null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,v)),ee._30(18,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,E)),ee._30(21,802816,null,0,pe.j,[ee._11,ee._6,ee.E],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,C)),ee._30(24,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,S)),ee._30(27,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,w)),ee._30(30,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,18,0,n.scorm.displayattemptstatus);e(t,21,0,n.scorm.offlineAttempts);e(t,24,0,n.scorm.displayattemptstatus&&n.scorm.gradeMethodReadable);e(t,27,0,n.scorm.displayattemptstatus&&n.scorm.grade);e(t,30,0,n.syncTime)},function(e,t){e(t,9,0,ee._56(t,9,0,ee._44(t,10).transform("addon.mod_scorm.attempts")))})}function D(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._30(3,147456,null,0,le.a,[ae.a,ee.t,ee.V],{name:[0,"name"]},null),(e()(),ee._55(4,null,["\n            ","\n        "])),ee._48(5,{$a:0}),ee._47(131072,re.a,[ie.a,ee.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,ee._44(t,3)._hidden);e(t,4,0,ee._56(t,4,0,ee._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function j(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ee._30(1,16384,[[26,4]],0,be.a,[ee.t],{value:[0,"value"]},null),(e()(),ee._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.identifier)},function(e,t){e(t,2,0,t.context.$implicit.title)})}function k(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,23,{contentLabel:0}),ee._52(603979776,24,{_buttons:1}),ee._52(603979776,25,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),ee._30(8,16384,[[23,4]],0,Pe.a,[ae.a,ee.t,ee.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ee._55(9,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(12,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==ee._44(e,13)._click(n)&&o}if("keyup.space"===t){o=!1!==ee._44(e,13)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.currentOrganization.identifier=n)&&o}if("ionChange"===t){o=!1!==r.loadOrganization()&&o}return o},Oe.b,Oe.a)),ee._30(13,1228800,null,1,Ee.a,[Ce.a,ce.a,ae.a,ee.t,ee.V,[2,ue.a],Ie.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),ee._52(603979776,26,{options:1}),ee._50(1024,null,Re.l,function(e){return[e]},[Ee.a]),ee._30(16,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},{update:"ngModelChange"}),ee._50(2048,null,Re.m,null,[Re.q]),ee._30(18,16384,null,0,Re.n,[Re.m],null,null),(e()(),ee._55(-1,null,["\n                        "])),(e()(),ee._26(16777216,null,null,1,null,j)),ee._30(21,802816,null,0,pe.j,[ee._11,ee._6,ee.E],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,13,0,"action-sheet");e(t,16,0,n.currentOrganization.identifier);e(t,21,0,n.organizations)},function(e,t){e(t,9,0,ee._56(t,9,0,ee._44(t,10).transform("addon.mod_scorm.organizations")));e(t,12,0,ee._44(t,13)._disabled,ee._44(t,18).ngClassUntouched,ee._44(t,18).ngClassTouched,ee._44(t,18).ngClassPristine,ee._44(t,18).ngClassDirty,ee._44(t,18).ngClassValid,ee._44(t,18).ngClassInvalid,ee._44(t,18).ngClassPending)})}function T(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,27,{contentLabel:0}),ee._52(603979776,28,{_buttons:1}),ee._52(603979776,29,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Se.b,Se.a)),ee._30(8,114688,null,0,we.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){e(t,8,0)},function(e,t){e(t,7,0,ee._44(t,8)._paused)})}function x(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._48(2,{number:0}),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,3).transform("addon.mod_scorm.dataattemptshown",e(t,2,0,n.attemptToContinue))))})}function M(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"a",[["class","core-clickable"]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.open(n,e.parent.parent.context.$implicit.id)&&o}return o},null,null)),(e()(),ee._31(1,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),ee._30(2,540672,null,0,Ae.a,[ee.t,De.a,je.a,ke.a,ie.a,ge.a,Te.a,xe.a,Me.a,Ne.a,Ue.a,Fe.a,[2,Le.a],[2,He.a],[2,Be.a],qe.a,Ge.a,Ve.a,Ke.a,We.a,ee._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(e,t){var n=t.component;e(t,2,0,t.parent.parent.context.$implicit.title,"module",n.module.id,n.courseId)},null)}function N(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),ee._31(1,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),ee._30(2,540672,null,0,Ae.a,[ee.t,De.a,je.a,ke.a,ie.a,ge.a,Te.a,xe.a,Me.a,Ne.a,Ue.a,Fe.a,[2,Le.a],[2,He.a],[2,Be.a],qe.a,Ge.a,Ve.a,Ke.a,We.a,ee._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(e,t){var n=t.component;e(t,2,0,t.parent.parent.context.$implicit.title,"module",n.module.id,n.courseId)},null)}function U(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),ee._55(1,null,["(",": ",")"])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform("addon.mod_scorm.score")),t.parent.parent.context.$implicit.score_raw)})}function F(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,13,"p",[],null,null,null,null,null)),(e()(),ee._55(-1,null,["\n                            "])),(e()(),ee._31(2,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,ze.b,ze.a)),ee._30(3,704512,null,0,$e.a,[ee.t,ae.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),(e()(),ee._55(-1,null,["\n                            "])),(e()(),ee._26(16777216,null,null,1,null,M)),ee._30(6,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                            "])),(e()(),ee._26(16777216,null,null,1,null,N)),ee._30(9,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                            "])),(e()(),ee._26(16777216,null,null,1,null,U)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,3,0,t.parent.context.$implicit.image.icon,t.parent.context.$implicit.image.description);e(t,6,0,t.parent.context.$implicit.prereq&&t.parent.context.$implicit.launch);e(t,9,0,!t.parent.context.$implicit.prereq||!t.parent.context.$implicit.launch);e(t,12,0,n.accessInfo&&n.accessInfo.canviewscores&&t.parent.context.$implicit.score_raw)},null)}function L(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,4,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),ee._55(-1,null,["\n                        "])),(e()(),ee._26(16777216,null,null,1,null,F)),ee._30(3,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                    "]))],function(e,t){e(t,3,0,t.context.$implicit.isvisible)},function(e,t){e(t,0,0,ee._34(2,"core-padding-",t.context.$implicit.level," addon-mod_scorm-type-",t.context.$implicit.scormtype,""))})}function H(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,30,{contentLabel:0}),ee._52(603979776,31,{_buttons:1}),ee._52(603979776,32,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,2,1,null,x)),ee._30(9,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),ee._55(12,null,["",""])),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,2,1,null,L)),ee._30(15,802816,null,0,pe.j,[ee._11,ee._6,ee.E],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,9,0,n.attemptToContinue);e(t,15,0,n.toc)},function(e,t){e(t,12,0,t.component.currentOrganization.title)})}function B(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,23,"ion-card",[["class","addon-mod_scorm-toc"]],null,null,null,null,null)),ee._30(1,16384,null,0,he.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(3,0,null,null,6,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),ee._30(4,16384,null,0,me.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._31(6,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ee._55(7,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(11,0,null,null,11,"ion-list",[],null,null,null,null,null)),ee._30(12,16384,null,0,_e.a,[ae.a,ee.t,ee.V,ge.a,ve.l,ye.a],null,null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,k)),ee._30(15,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,T)),ee._30(18,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,H)),ee._30(21,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,15,0,n.organizations.length>1);e(t,18,0,n.scorm.displaycoursestructure&&n.loadingToc);e(t,21,0,n.scorm.displaycoursestructure&&!n.loadingToc)},function(e,t){e(t,7,0,ee._56(t,7,0,ee._44(t,8).transform("addon.mod_scorm.contents")))})}function q(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,31,"ion-card",[],null,null,null,null,null)),ee._30(1,16384,null,0,he.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(4,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,33,{contentLabel:0}),ee._52(603979776,34,{_buttons:1}),ee._52(603979776,35,{_icons:1}),ee._30(8,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                "])),(e()(),ee._31(10,0,null,2,2,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),ee._55(11,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n            "])),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(15,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(16,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,36,{contentLabel:0}),ee._52(603979776,37,{_buttons:1}),ee._52(603979776,38,{_icons:1}),ee._30(20,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                "])),(e()(),ee._31(22,0,null,2,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,Ye.b,Ye.a)),ee._30(23,1097728,[[37,4]],0,Qe.a,[[8,""],ae.a,ee.t,ee.V],{block:[0,"block"]},null),ee._30(24,81920,null,0,Xe.a,[ee.t,je.a,Te.a,De.a,xe.a,Fe.a,[2,Le.a],[2,He.a],[2,Be.a],ke.a],null,null),(e()(),ee._55(25,0,["\n                    ","\n                    "])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._31(27,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._30(28,147456,null,0,le.a,[ae.a,ee.t,ee.V],{name:[0,"name"]},null),(e()(),ee._55(-1,0,["\n                "])),(e()(),ee._55(-1,2,["\n            "])),(e()(),ee._55(-1,null,["\n        "]))],function(e,t){e(t,23,0,""),e(t,24,0);e(t,28,0,"open")},function(e,t){var n=t.component;e(t,11,0,ee._56(t,11,0,ee._44(t,12).transform(n.errorMessage)));e(t,22,0,n.externalUrl);e(t,25,0,ee._56(t,25,0,ee._44(t,26).transform("core.openinbrowser")));e(t,27,0,ee._44(t,28)._hidden)})}function G(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,14,"ion-card",[],null,null,null,null,null)),ee._30(1,16384,null,0,he.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(4,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,39,{contentLabel:0}),ee._52(603979776,40,{_buttons:1}),ee._52(603979776,41,{_icons:1}),ee._30(8,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                "])),(e()(),ee._31(10,0,null,2,2,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),ee._55(11,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n            "])),(e()(),ee._55(-1,null,["\n        "]))],null,function(e,t){e(t,11,0,ee._56(t,11,0,ee._44(t,12).transform("addon.mod_scorm.exceededmaxattempts")))})}function V(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,51,"div",[["name","mode"],["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.scormOptions.mode=n)&&o}return o},null,null)),ee._30(1,1064960,null,1,Je.a,[ee.V,ee.t,ee.j],null,null),ee._52(335544320,42,{_header:0}),ee._50(1024,null,Re.l,function(e){return[e]},[Je.a]),ee._30(4,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ee._50(2048,null,Re.m,null,[Re.q]),ee._30(6,16384,null,0,Re.n,[Re.m],null,null),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._31(8,0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,se.b,se.a)),ee._30(9,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,43,{contentLabel:0}),ee._52(603979776,44,{_buttons:1}),ee._52(603979776,45,{_icons:1}),ee._30(13,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(15,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._55(16,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._31(20,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,se.b,se.a)),ee._30(21,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,46,{contentLabel:0}),ee._52(603979776,47,{_buttons:1}),ee._52(603979776,48,{_icons:1}),ee._30(25,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(27,0,null,1,3,"ion-label",[],null,null,null,null,null)),ee._30(28,16384,[[46,4]],0,Pe.a,[ae.a,ee.t,ee.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ee._55(29,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(32,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==ee._44(e,33)._click(n)&&o}return o},Ze.b,Ze.a)),ee._30(33,245760,null,0,et.a,[ce.a,ae.a,ee.t,ee.V,[2,ue.a],[2,Je.a]],{value:[0,"value"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._31(36,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,se.b,se.a)),ee._30(37,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,49,{contentLabel:0}),ee._52(603979776,50,{_buttons:1}),ee._52(603979776,51,{_icons:1}),ee._30(41,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(43,0,null,1,3,"ion-label",[],null,null,null,null,null)),ee._30(44,16384,[[49,4]],0,Pe.a,[ae.a,ee.t,ee.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ee._55(45,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(48,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==ee._44(e,49)._click(n)&&o}return o},Ze.b,Ze.a)),ee._30(49,245760,null,0,et.a,[ce.a,ae.a,ee.t,ee.V,[2,ue.a],[2,Je.a]],{value:[0,"value"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,4,0,"mode",n.scormOptions.mode);e(t,33,0,n.modeBrowser);e(t,49,0,n.modeNormal)},function(e,t){e(t,0,0,ee._44(t,6).ngClassUntouched,ee._44(t,6).ngClassTouched,ee._44(t,6).ngClassPristine,ee._44(t,6).ngClassDirty,ee._44(t,6).ngClassValid,ee._44(t,6).ngClassInvalid,ee._44(t,6).ngClassPending);e(t,16,0,ee._56(t,16,0,ee._44(t,17).transform("addon.mod_scorm.mode")));e(t,29,0,ee._56(t,29,0,ee._44(t,30).transform("addon.mod_scorm.browse")));e(t,32,0,ee._44(t,33)._disabled);e(t,45,0,ee._56(t,45,0,ee._44(t,46).transform("addon.mod_scorm.normal")));e(t,48,0,ee._44(t,49)._disabled)})}function K(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,19,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,52,{contentLabel:0}),ee._52(603979776,53,{_buttons:1}),ee._52(603979776,54,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),ee._30(8,16384,[[52,4]],0,Pe.a,[ae.a,ee.t,ee.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ee._55(9,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(12,0,null,4,6,"ion-checkbox",[["item-end",""],["name","newAttempt"]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==ee._44(e,13)._click(n)&&o}if("ngModelChange"===t){o=!1!==(r.scormOptions.newAttempt=n)&&o}return o},tt.b,tt.a)),ee._30(13,1228800,null,0,nt.a,[ae.a,ce.a,[2,ue.a],ee.t,ee.V],null,null),ee._50(1024,null,Re.l,function(e){return[e]},[nt.a]),ee._30(15,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ee._50(2048,null,Re.m,null,[Re.q]),ee._30(17,16384,null,0,Re.n,[Re.m],null,null),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){e(t,15,0,"newAttempt",t.component.scormOptions.newAttempt)},function(e,t){e(t,9,0,ee._56(t,9,0,ee._44(t,10).transform("addon.mod_scorm.newattempt")));e(t,12,0,ee._44(t,13)._disabled,ee._44(t,17).ngClassUntouched,ee._44(t,17).ngClassTouched,ee._44(t,17).ngClassPristine,ee._44(t,17).ngClassDirty,ee._44(t,17).ngClassValid,ee._44(t,17).ngClassInvalid,ee._44(t,17).ngClassPending)})}function W(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,55,{contentLabel:0}),ee._52(603979776,56,{_buttons:1}),ee._52(603979776,57,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ee._55(8,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "]))],null,function(e,t){var n=t.component;e(t,8,0,ee._56(t,8,0,ee._44(t,9).transform(n.statusMessage)))})}function z(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,17,null,null,null,null,null,null,null)),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._26(16777216,null,null,1,null,W)),ee._30(3,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n                    "])),(e()(),ee._31(5,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,se.b,se.a)),ee._30(6,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,58,{contentLabel:0}),ee._52(603979776,59,{_buttons:1}),ee._52(603979776,60,{_icons:1}),ee._30(10,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                        "])),(e()(),ee._31(12,0,null,2,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.open(n)&&o}return o},Ye.b,Ye.a)),ee._30(13,1097728,[[59,4]],0,Qe.a,[[8,""],ae.a,ee.t,ee.V],{block:[0,"block"]},null),(e()(),ee._55(14,0,["",""])),ee._47(131072,re.a,[ie.a,ee.j]),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._55(-1,null,["\n                "]))],function(e,t){e(t,3,0,t.component.statusMessage);e(t,13,0,"")},function(e,t){e(t,14,0,ee._56(t,14,0,ee._44(t,15).transform("addon.mod_scorm.enter")))})}function $(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,2).transform(n.progressMessage)))})}function Y(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ee._55(1,null,["",""])),ee._48(2,{$a:0}),ee._47(131072,re.a,[ie.a,ee.j])],null,function(e,t){var n=t.component;e(t,1,0,ee._56(t,1,0,ee._44(t,3).transform("core.percentagenumber",e(t,2,0,n.percentage))))})}function Q(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,se.b,se.a)),ee._30(1,1097728,null,3,ue.a,[ce.a,ae.a,ee.t,ee.V,[2,de.a]],null,null),ee._52(335544320,61,{contentLabel:0}),ee._52(603979776,62,{_buttons:1}),ee._52(603979776,63,{_icons:1}),ee._30(5,16384,null,0,fe.a,[],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._31(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Se.b,Se.a)),ee._30(8,114688,null,0,we.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,2,1,null,$)),ee._30(11,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                    "])),(e()(),ee._26(16777216,null,2,1,null,Y)),ee._30(14,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,8,0);e(t,11,0,n.progressMessage);e(t,14,0,n.percentage<=100)},function(e,t){e(t,7,0,ee._44(t,8)._paused)})}function X(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,22,"ion-card",[],null,null,null,null,null)),ee._30(1,16384,null,0,he.a,[ae.a,ee.t,ee.V],null,null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._31(3,0,null,null,18,"ion-list",[],null,null,null,null,null)),ee._30(4,16384,null,0,_e.a,[ae.a,ee.t,ee.V,ge.a,ve.l,ye.a],null,null),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,V)),ee._30(8,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n                "])),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,K)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n                "])),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,z)),ee._30(16,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n                "])),(e()(),ee._55(-1,null,["\n                "])),(e()(),ee._26(16777216,null,null,1,null,Q)),ee._30(20,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n            "])),(e()(),ee._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,!n.scorm.hidebrowse&&!n.skip);e(t,12,0,!n.scorm.forcenewattempt&&n.scorm.numAttempts>0&&!n.scorm.incomplete&&n.scorm.attemptsLeft>0&&!n.skip);e(t,16,0,!n.downloading&&!n.skip);e(t,20,0,n.downloading)},null)}function J(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,25,"div",[],null,null,null,null,null)),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._26(16777216,null,null,1,null,A)),ee._30(4,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n        "])),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._26(16777216,null,null,1,null,D)),ee._30(8,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n        "])),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._26(16777216,null,null,1,null,B)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n        "])),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._26(16777216,null,null,1,null,q)),ee._30(16,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n        "])),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._26(16777216,null,null,1,null,G)),ee._30(20,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n\n        "])),(e()(),ee._55(-1,null,["\n        "])),(e()(),ee._26(16777216,null,null,1,null,X)),ee._30(24,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,(n.scorm.displayattemptstatus||n.scorm.offlineAttempts&&n.scorm.offlineAttempts.length)&&!n.skip);e(t,8,0,!n.errorMessage&&n.hasOffline);e(t,12,0,n.scorm&&n.organizations&&(n.scorm.displaycoursestructure&&n.organizations.length||n.organizations.length>1)&&!n.skip);e(t,16,0,n.errorMessage);e(t,20,0,!n.errorMessage&&n.scorm&&n.scorm.attemptsLeft<=0);e(t,24,0,!n.errorMessage&&n.scorm&&(!n.scorm.lastattemptlock||n.scorm.attemptsLeft>0))},null)}function Z(e){return ee._57(0,[(e()(),ee._55(-1,null,["\n"])),(e()(),ee._31(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,ot.b,ot.a)),ee._30(2,245760,null,1,rt.a,[ee.t,Me.a,je.a],null,null),ee._52(603979776,1,{buttons:1}),(e()(),ee._55(-1,0,["\n    "])),(e()(),ee._31(5,0,null,0,23,"core-context-menu",[],null,null,null,it.b,it.a)),ee._30(6,245760,null,0,oe.a,[ie.a,lt.a,ee.t,je.a,[2,at.a],Te.a],null,null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,o)),ee._30(9,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,r)),ee._30(12,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,i)),ee._30(15,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,l)),ee._30(18,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,a)),ee._30(21,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,s)),ee._30(24,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n        "])),(e()(),ee._26(16777216,null,0,1,null,u)),ee._30(27,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n    "])),(e()(),ee._55(-1,0,["\n"])),(e()(),ee._55(-1,null,["\n\n"])),(e()(),ee._55(-1,null,["\n"])),(e()(),ee._31(32,0,null,null,12,"core-loading",[["class","core-loading-center"]],null,null,null,st.b,st.a)),ee._30(33,638976,null,0,ut.a,[ie.a,ee.t,Ge.a,Te.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ee._55(-1,0,["\n\n    "])),(e()(),ee._31(35,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,ct.b,ct.a)),ee._30(36,49152,null,0,dt.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),ee._55(-1,0,["\n\n    "])),(e()(),ee._55(-1,0,["\n    "])),(e()(),ee._26(16777216,null,0,1,null,c)),ee._30(40,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n\n    "])),(e()(),ee._26(16777216,null,0,1,null,J)),ee._30(43,16384,null,0,pe.k,[ee._11,ee._6],{ngIf:[0,"ngIf"]},null),(e()(),ee._55(-1,0,["\n"])),(e()(),ee._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,21,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,24,0,n.prefetchStatusIcon);e(t,27,0,n.size);e(t,33,0,n.loaded);e(t,36,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,40,0,n.scorm&&n.scorm.warningMessage);e(t,43,0,n.scorm&&n.loaded&&!n.scorm.warningMessage)},null)}n.d(t,"b",function(){return yt}),t.c=Z,n.d(t,"a",function(){return bt});var ee=n(0),te=n(92),ne=n(83),oe=n(78),re=n(25),ie=n(17),le=n(47),ae=n(8),se=n(30),ue=n(20),ce=n(19),de=n(27),fe=n(33),pe=n(7),he=n(89),me=n(318),_e=n(86),ge=n(16),ve=n(43),ye=n(34),be=n(108),Pe=n(67),Oe=n(123),Ee=n(109),Ce=n(35),Ie=n(59),Re=n(23),Se=n(121),we=n(101),Ae=n(48),De=n(1),je=n(4),ke=n(11),Te=n(2),xe=n(22),Me=n(6),Ne=n(18),Ue=n(10),Fe=n(15),Le=n(21),He=n(29),Be=n(28),qe=n(44),Ge=n(9),Ve=n(41),Ke=n(32),We=n(36),ze=n(80),$e=n(75),Ye=n(45),Qe=n(42),Xe=n(174),Je=n(137),Ze=n(176),et=n(145),tt=n(251),nt=n(199),ot=n(96),rt=n(87),it=n(91),lt=n(70),at=n(76),st=n(54),ut=n(51),ct=n(122),dt=n(112),ft=n(515),pt=n(234),ht=n(386),mt=n(264),_t=n(288),gt=n(333),vt=n(50),yt=ee._29({encapsulation:2,styles:[],data:{}}),bt=ee._27("addon-mod-scorm-index",ft.a,function(e){return ee._57(0,[(e()(),ee._31(0,0,null,null,1,"addon-mod-scorm-index",[],null,null,null,Z,yt)),ee._30(1,245760,null,0,ft.a,[ee.C,pt.a,[2,He.a],ht.a,mt.a,_t.a,gt.a,Le.a,vt.a,Te.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),I._47(131072,A.a,[D.a,I.j])],function(e,t){var n=t.component;e(t,1,0,I._56(t,1,0,I._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),I._47(131072,A.a,[D.a,I.j])],function(e,t){e(t,1,0,I._56(t,1,0,I._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),I._47(131072,A.a,[D.a,I.j])],function(e,t){e(t,1,0,I._34(1,"",I._56(t,1,0,I._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),I._47(131072,A.a,[D.a,I.j])],function(e,t){var n=t.component;e(t,1,0,I._56(t,1,0,I._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function a(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),I._47(131072,A.a,[D.a,I.j])],function(e,t){var n=t.component;e(t,1,0,I._56(t,1,0,I._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function s(e){return I._57(0,[(e()(),I._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function u(e){return I._57(0,[(e()(),I._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},R.b,R.a)),I._30(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),I._48(2,{$a:0}),I._47(131072,A.a,[D.a,I.j])],function(e,t){var n=t.component;e(t,1,0,I._56(t,1,0,I._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function c(e){return I._57(0,[(e()(),I._31(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,j.b,j.a)),I._30(1,49152,null,0,k.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,1,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function d(e){return I._57(0,[(e()(),I._31(0,0,null,null,15,"ion-card",[["padding",""]],null,null,null,null,null)),I._30(1,16384,null,0,T.a,[x.a,I.t,I.V],null,null),(e()(),I._55(-1,null,["\n        "])),(e()(),I._31(3,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(e()(),I._55(4,null,["",""])),I._47(131072,A.a,[D.a,I.j]),(e()(),I._55(-1,null,["\n        "])),(e()(),I._31(7,0,null,null,7,"a",[["block",""],["core-link",""],["icon-start",""],["ion-button",""]],[[8,"href",4]],null,null,M.b,M.a)),I._30(8,1097728,null,0,N.a,[[8,""],x.a,I.t,I.V],{block:[0,"block"]},null),I._30(9,81920,null,0,U.a,[I.t,F.a,L.a,H.a,B.a,q.a,[2,G.a],[2,V.a],[2,K.a],W.a],null,null),(e()(),I._55(-1,0,["\n            "])),(e()(),I._31(11,0,null,0,1,"ion-icon",[["name","open"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),I._30(12,147456,null,0,z.a,[x.a,I.t,I.V],{name:[0,"name"]},null),(e()(),I._55(13,0,["\n            ","\n        "])),I._47(131072,A.a,[D.a,I.j]),(e()(),I._55(-1,null,["\n    "]))],function(e,t){e(t,8,0,""),e(t,9,0);e(t,12,0,"open")},function(e,t){var n=t.component;e(t,4,0,I._56(t,4,0,I._44(t,5).transform("addon.mod_survey.surveycompletednograph")));e(t,7,0,n.externalUrl);e(t,11,0,I._44(t,12)._hidden);e(t,13,0,I._56(t,13,0,I._44(t,14).transform("addon.mod_survey.results")))})}function f(e){return I._57(0,[(e()(),I._31(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),I._55(-1,null,["\n        "])),(e()(),I._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),I._30(3,147456,null,0,z.a,[x.a,I.t,I.V],{name:[0,"name"]},null),(e()(),I._55(4,null,["\n        ","\n    "])),I._48(5,{$a:0}),I._47(131072,A.a,[D.a,I.j])],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,I._44(t,3)._hidden);e(t,4,0,I._56(t,4,0,I._44(t,6).transform("core.hasdatatosync",e(t,5,0,n.moduleName))))})}function p(e){return I._57(0,[(e()(),I._31(0,0,null,null,5,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),I._30(1,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._31(3,0,null,null,1,"div",[["padding",""]],null,null,null,null,null)),(e()(),I._55(4,null,["",""])),(e()(),I._55(-1,null,["\n                        "]))],null,function(e,t){e(t,4,0,t.context.$implicit)})}function h(e){return I._57(0,[(e()(),I._31(0,0,null,null,34,"div",[],[[1,"padding-top",0]],null,null,null,null)),(e()(),I._55(-1,null,["\n                "])),(e()(),I._31(2,0,null,null,1,"h3",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),I._55(3,null,["",""])),(e()(),I._55(-1,null,["\n                "])),(e()(),I._31(5,0,null,null,17,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),I._30(6,16384,null,0,Y.a,[],null,null),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._31(8,0,null,null,13,"ion-row",[["align-items-center",""],["class","hidden-phone row"],["no-padding",""],["nowrap",""]],null,null,null,null,null)),I._30(9,16384,null,0,Q.a,[],null,null),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._31(11,0,null,null,6,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),I._30(12,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._31(14,0,null,null,2,"div",[["padding",""]],null,null,null,null,null)),(e()(),I._55(15,null,["",""])),I._47(131072,A.a,[D.a,I.j]),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._26(16777216,null,null,1,null,p)),I._30(20,802816,null,0,X.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._55(-1,null,["\n                "])),(e()(),I._55(-1,null,["\n                "])),(e()(),I._31(24,0,null,null,9,"ion-item",[["class","addon-mod_survey-question item item-block"],["text-wrap",""]],[[2,"even",null]],null,null,J.b,J.a)),I._30(25,1097728,null,3,Z.a,[ee.a,x.a,I.t,I.V,[2,te.a]],null,null),I._52(335544320,2,{contentLabel:0}),I._52(603979776,3,{_buttons:1}),I._52(603979776,4,{_icons:1}),I._30(29,16384,null,0,ne.a,[],null,null),(e()(),I._55(-1,2,["\n                    "])),(e()(),I._31(31,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),I._55(32,null,["",""])),(e()(),I._55(-1,2,["\n                "])),(e()(),I._55(-1,null,["\n            "]))],function(e,t){e(t,20,0,t.parent.context.$implicit.optionsArray)},function(e,t){e(t,0,0,1==t.parent.context.index);e(t,3,0,t.parent.context.$implicit.text);e(t,15,0,I._56(t,15,0,I._44(t,16).transform("addon.mod_survey.responses")));e(t,24,0,t.parent.context.even);e(t,32,0,t.parent.context.$implicit.intro)})}function m(e){return I._57(0,[(e()(),I._31(0,0,null,null,5,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),I._30(1,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._31(3,0,null,null,1,"ion-radio",[],[[1,"aria-labelledby",0],[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==I._44(e,4)._click(n)&&o}return o},oe.b,oe.a)),I._30(4,245760,null,0,re.a,[ee.a,x.a,I.t,I.V,[2,Z.a],[2,ie.a]],{value:[0,"value"]},null),(e()(),I._55(-1,null,["\n                    "]))],function(e,t){e(t,4,0,t.context.index+1)},function(e,t){e(t,3,0,"addon-mod_survey-"+t.parent.parent.context.$implicit.name,I._44(t,4)._disabled)})}function _(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),I._30(1,16384,[[6,4]],0,le.a,[I.t],{value:[0,"value"]},null),(e()(),I._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.index+1)},function(e,t){e(t,2,0,t.context.$implicit)})}function g(e){return I._57(0,[(e()(),I._31(0,0,null,null,52,"ion-grid",[["class","grid"],["no-padding",""],["text-wrap",""]],[[2,"even",null]],null,null,null,null)),I._30(1,16384,null,0,Y.a,[],null,null),(e()(),I._55(-1,null,["\n                "])),(e()(),I._31(3,0,null,null,48,"ion-row",[["align-items-center",""],["class","row"],["no-padding",""],["nowrap",""],["radio-group",""],["role","radiogroup"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.answers[e.parent.context.$implicit.name]=n)&&o}return o},null,null)),I._30(4,16384,null,0,ae.t,[],{required:[0,"required"]},null),I._50(1024,null,ae.k,function(e){return[e]},[ae.t]),I._30(6,1064960,null,1,ie.a,[I.V,I.t,I.j],null,null),I._52(335544320,5,{_header:0}),I._50(1024,null,ae.l,function(e){return[e]},[ie.a]),I._30(9,671744,null,0,ae.q,[[8,null],[2,ae.k],[8,null],[2,ae.l]],{model:[0,"model"]},{update:"ngModelChange"}),I._50(2048,null,ae.m,null,[ae.q]),I._30(11,16384,null,0,ae.n,[ae.m],null,null),I._30(12,16384,null,0,Q.a,[],null,null),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._31(14,0,null,null,9,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),I._30(15,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._31(17,0,null,null,5,"ion-label",[["padding-horizontal",""]],null,null,null,se.b,se.a)),I._30(18,16384,null,0,ue.a,[x.a,I.t,I.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),I._30(19,4308992,null,0,ce.a,[I.t,D.a,W.a,L.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),I._31(20,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),I._55(21,null,["","."])),(e()(),I._55(22,0,[" ",""])),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._55(-1,null,["\n\n                    "])),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._26(16777216,null,null,1,null,m)),I._30(27,802816,null,0,X.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._31(29,0,null,null,21,"ion-col",[["class","hidden-tablet col"]],null,null,null,null,null)),I._30(30,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._31(32,0,null,null,17,"ion-select",[["interface","action-sheet"],["padding",""]],[[1,"aria-labelledby",0],[1,"required",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==I._44(e,35)._click(n)&&o}if("keyup.space"===t){o=!1!==I._44(e,35)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.answers[e.parent.context.$implicit.name]=n)&&o}return o},de.b,de.a)),I._30(33,16384,null,0,ae.t,[],{required:[0,"required"]},null),I._50(1024,null,ae.k,function(e){return[e]},[ae.t]),I._30(35,1228800,null,1,fe.a,[pe.a,ee.a,x.a,I.t,I.V,[2,Z.a],he.a],{interface:[0,"interface"]},null),I._52(603979776,6,{options:1}),I._50(1024,null,ae.l,function(e){return[e]},[fe.a]),I._30(38,671744,null,0,ae.q,[[8,null],[2,ae.k],[8,null],[2,ae.l]],{model:[0,"model"]},{update:"ngModelChange"}),I._50(2048,null,ae.m,null,[ae.q]),I._30(40,16384,null,0,ae.n,[ae.m],null,null),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._31(42,0,null,null,3,"ion-option",[["disabled",""],["selected",""],["value","-1"]],null,null,null,null,null)),I._30(43,16384,[[6,4]],0,le.a,[I.t],{disabled:[0,"disabled"],selected:[1,"selected"],value:[2,"value"]},null),(e()(),I._55(44,null,["",""])),I._47(131072,A.a,[D.a,I.j]),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._26(16777216,null,null,1,null,_)),I._30(48,802816,null,0,X.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._55(-1,null,["\n                "])),(e()(),I._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,4,0,t.parent.context.$implicit.required);e(t,9,0,n.answers[t.parent.context.$implicit.name]);e(t,18,0,I._34(1,"addon-mod_survey-",t.parent.context.$implicit.name,""));e(t,19,0,t.parent.context.$implicit.required);e(t,27,0,t.parent.context.$implicit.optionsArray);e(t,33,0,t.parent.context.$implicit.required);e(t,35,0,"action-sheet");e(t,38,0,n.answers[t.parent.context.$implicit.name]);e(t,43,0,"","","-1");e(t,48,0,t.parent.context.$implicit.optionsArray)},function(e,t){e(t,0,0,t.parent.context.even);e(t,3,0,I._44(t,4).required?"":null,I._44(t,11).ngClassUntouched,I._44(t,11).ngClassTouched,I._44(t,11).ngClassPristine,I._44(t,11).ngClassDirty,I._44(t,11).ngClassValid,I._44(t,11).ngClassInvalid,I._44(t,11).ngClassPending);e(t,21,0,t.parent.context.$implicit.num);e(t,22,0,t.parent.context.$implicit.text);e(t,32,0,"addon-mod_survey-"+t.parent.context.$implicit.name,I._44(t,33).required?"":null,I._44(t,35)._disabled,I._44(t,40).ngClassUntouched,I._44(t,40).ngClassTouched,I._44(t,40).ngClassPristine,I._44(t,40).ngClassDirty,I._44(t,40).ngClassValid,I._44(t,40).ngClassInvalid,I._44(t,40).ngClassPending);e(t,44,0,I._56(t,44,0,I._44(t,45).transform("core.choose")))})}function v(e){return I._57(0,[(e()(),I._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),I._30(1,16384,[[7,4]],0,le.a,[I.t],{value:[0,"value"]},null),(e()(),I._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.index)},function(e,t){e(t,2,0,t.context.$implicit)})}function y(e){return I._57(0,[(e()(),I._31(0,0,null,null,35,"ion-grid",[["class","grid"],["no-padding",""],["text-wrap",""]],[[2,"even",null]],null,null,null,null)),I._30(1,16384,null,0,Y.a,[],null,null),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._31(3,0,null,null,31,"ion-row",[["align-items-center",""],["class","row"],["no-padding",""]],null,null,null,null,null)),I._30(4,16384,null,0,Q.a,[],null,null),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._31(6,0,null,null,9,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),I._30(7,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._31(9,0,null,null,5,"ion-label",[["padding-horizontal",""]],null,null,null,se.b,se.a)),I._30(10,16384,null,0,ue.a,[x.a,I.t,I.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),I._30(11,4308992,null,0,ce.a,[I.t,D.a,W.a,L.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),I._31(12,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),I._55(13,null,["","."])),(e()(),I._55(14,0,[" ",""])),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._31(17,0,null,null,16,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),I._30(18,16384,null,0,$.a,[],null,null),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._31(20,0,null,null,12,"ion-select",[["interface","action-sheet"],["padding",""]],[[1,"aria-labelledby",0],[1,"required",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==I._44(e,23)._click(n)&&o}if("keyup.space"===t){o=!1!==I._44(e,23)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.answers[e.parent.parent.context.$implicit.name]=n)&&o}return o},de.b,de.a)),I._30(21,16384,null,0,ae.t,[],{required:[0,"required"]},null),I._50(1024,null,ae.k,function(e){return[e]},[ae.t]),I._30(23,1228800,null,1,fe.a,[pe.a,ee.a,x.a,I.t,I.V,[2,Z.a],he.a],{interface:[0,"interface"]},null),I._52(603979776,7,{options:1}),I._50(1024,null,ae.l,function(e){return[e]},[fe.a]),I._30(26,671744,null,0,ae.q,[[8,null],[2,ae.k],[8,null],[2,ae.l]],{model:[0,"model"]},{update:"ngModelChange"}),I._50(2048,null,ae.m,null,[ae.q]),I._30(28,16384,null,0,ae.n,[ae.m],null,null),(e()(),I._55(-1,null,["\n                                "])),(e()(),I._26(16777216,null,null,1,null,v)),I._30(31,802816,null,0,X.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(e()(),I._55(-1,null,["\n                            "])),(e()(),I._55(-1,null,["\n                        "])),(e()(),I._55(-1,null,["\n                    "])),(e()(),I._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,10,0,I._34(1,"addon-mod_survey-",t.parent.parent.context.$implicit.name,""));e(t,11,0,t.parent.parent.context.$implicit.required);e(t,21,0,t.parent.parent.context.$implicit.required);e(t,23,0,"action-sheet");e(t,26,0,n.answers[t.parent.parent.context.$implicit.name]);e(t,31,0,t.parent.parent.context.$implicit.optionsArray)},function(e,t){e(t,0,0,t.parent.parent.context.even);e(t,13,0,t.parent.parent.context.$implicit.num);e(t,14,0,t.parent.parent.context.$implicit.text);e(t,20,0,"addon-mod_survey-"+t.parent.parent.context.$implicit.name,I._44(t,21).required?"":null,I._44(t,23)._disabled,I._44(t,28).ngClassUntouched,I._44(t,28).ngClassTouched,I._44(t,28).ngClassPristine,I._44(t,28).ngClassDirty,I._44(t,28).ngClassValid,I._44(t,28).ngClassInvalid,I._44(t,28).ngClassPending)})}function b(e){return I._57(0,[(e()(),I._31(0,0,null,null,22,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"even",null]],null,null,J.b,J.a)),I._30(1,1097728,null,3,Z.a,[ee.a,x.a,I.t,I.V,[2,te.a]],null,null),I._52(335544320,8,{contentLabel:0}),I._52(603979776,9,{_buttons:1}),I._52(603979776,10,{_icons:1}),I._30(5,16384,null,0,ne.a,[],null,null),(e()(),I._55(-1,2,["\n                    "])),(e()(),I._31(7,0,null,1,6,"ion-label",[["stacked",""]],null,null,null,se.b,se.a)),I._30(8,16384,[[8,4]],0,ue.a,[x.a,I.t,I.V,[8,null],[8,""],[8,null],[8,null]],{id:[0,"id"]},null),I._30(9,4308992,null,0,ce.a,[I.t,D.a,W.a,L.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),I._55(-1,0,["\n                        "])),(e()(),I._31(11,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),I._55(12,null,["","."])),(e()(),I._55(13,0,[" ","\n                    "])),(e()(),I._55(-1,2,["\n                    "])),(e()(),I._31(15,0,null,3,6,"ion-textarea",[["class","addon-mod_survey-textarea"]],[[1,"aria-label",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.answers[e.parent.parent.context.$implicit.name]=n)&&o}return o},me.b,me.a)),I._30(16,16384,null,0,ae.t,[],{required:[0,"required"]},null),I._50(1024,null,ae.k,function(e){return[e]},[ae.t]),I._30(18,671744,null,0,ae.q,[[8,null],[2,ae.k],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),I._50(2048,null,ae.m,null,[ae.q]),I._30(20,16384,null,0,ae.n,[ae.m],null,null),I._30(21,5423104,null,0,_e.a,[x.a,ge.a,ee.a,pe.a,I.t,I.V,[2,V.a],[2,Z.a],[2,ae.m],ve.a],null,null),(e()(),I._55(-1,2,["\n                "]))],function(e,t){var n=t.component;e(t,8,0,I._34(1,"addon-mod_survey-",t.parent.parent.context.$implicit.name,""));e(t,9,0,t.parent.parent.context.$implicit.required);e(t,16,0,t.parent.parent.context.$implicit.required);e(t,18,0,n.answers[t.parent.parent.context.$implicit.name])},function(e,t){e(t,0,0,t.parent.parent.context.even);e(t,12,0,t.parent.parent.context.$implicit.num);e(t,13,0,t.parent.parent.context.$implicit.text);e(t,15,0,t.parent.parent.context.$implicit.text,I._44(t,16).required?"":null,I._44(t,20).ngClassUntouched,I._44(t,20).ngClassTouched,I._44(t,20).ngClassPristine,I._44(t,20).ngClassDirty,I._44(t,20).ngClassValid,I._44(t,20).ngClassInvalid,I._44(t,20).ngClassPending)})}function P(e){return I._57(0,[(e()(),I._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),I._55(-1,null,["\n                "])),(e()(),I._26(16777216,null,null,1,null,y)),I._30(3,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,null,["\n\n                "])),(e()(),I._26(16777216,null,null,1,null,b)),I._30(6,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,null,["\n            "]))],function(e,t){e(t,3,0,t.parent.context.$implicit.type>0);e(t,6,0,0===t.parent.context.$implicit.type)},null)}function O(e){return I._57(0,[(e()(),I._31(0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),I._55(-1,null,["\n            "])),(e()(),I._55(-1,null,["\n            "])),(e()(),I._26(16777216,null,null,1,null,h)),I._30(4,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,null,["\n\n            "])),(e()(),I._55(-1,null,["\n            "])),(e()(),I._26(16777216,null,null,1,null,g)),I._30(8,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,null,["\n\n            "])),(e()(),I._55(-1,null,["\n            "])),(e()(),I._26(16777216,null,null,1,null,P)),I._30(12,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,null,["\n\n        "]))],function(e,t){e(t,4,0,t.context.$implicit.multiArray&&t.context.$implicit.multiArray.length);e(t,8,0,0!==t.context.$implicit.parent);e(t,12,0,(!t.context.$implicit.multiArray||0==t.context.$implicit.multiArray.length)&&0===t.context.$implicit.parent)},null)}function E(e){return I._57(0,[(e()(),I._31(0,0,null,null,17,"section",[],null,null,null,null,null)),(e()(),I._55(-1,null,["\n\n        "])),(e()(),I._26(16777216,null,null,1,null,O)),I._30(3,802816,null,0,X.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(e()(),I._55(-1,null,["\n\n        "])),(e()(),I._31(5,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,J.b,J.a)),I._30(6,1097728,null,3,Z.a,[ee.a,x.a,I.t,I.V,[2,te.a]],null,null),I._52(335544320,11,{contentLabel:0}),I._52(603979776,12,{_buttons:1}),I._52(603979776,13,{_icons:1}),I._30(10,16384,null,0,ne.a,[],null,null),(e()(),I._55(-1,2,["\n            "])),(e()(),I._31(12,0,null,2,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.submit()&&o}return o},M.b,M.a)),I._30(13,1097728,[[12,4]],0,N.a,[[8,""],x.a,I.t,I.V],{block:[0,"block"]},null),(e()(),I._55(14,0,["",""])),I._47(131072,A.a,[D.a,I.j]),(e()(),I._55(-1,2,["\n        "])),(e()(),I._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.questions);e(t,13,0,"")},function(e,t){e(t,12,0,!t.component.isValidResponse());e(t,14,0,I._56(t,14,0,I._44(t,15).transform("core.submit")))})}function C(e){return I._57(0,[(e()(),I._55(-1,null,["\n"])),(e()(),I._31(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,ye.b,ye.a)),I._30(2,245760,null,1,be.a,[I.t,Pe.a,F.a],null,null),I._52(603979776,1,{buttons:1}),(e()(),I._55(-1,0,["\n    "])),(e()(),I._31(5,0,null,0,23,"core-context-menu",[],null,null,null,Oe.b,Oe.a)),I._30(6,245760,null,0,w.a,[D.a,Ee.a,I.t,F.a,[2,Ce.a],L.a],null,null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,o)),I._30(9,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,r)),I._30(12,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,i)),I._30(15,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,l)),I._30(18,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,a)),I._30(21,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,s)),I._30(24,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n        "])),(e()(),I._26(16777216,null,0,1,null,u)),I._30(27,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n    "])),(e()(),I._55(-1,0,["\n"])),(e()(),I._55(-1,null,["\n\n"])),(e()(),I._55(-1,null,["\n"])),(e()(),I._31(32,0,null,null,17,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,Ie.b,Ie.a)),I._30(33,638976,null,0,Re.a,[D.a,I.t,Se.a,L.a],{hideUntil:[0,"hideUntil"]},null),(e()(),I._55(-1,0,["\n\n    "])),(e()(),I._26(16777216,null,0,1,null,c)),I._30(36,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n\n    "])),(e()(),I._55(-1,0,["\n    "])),(e()(),I._26(16777216,null,0,1,null,d)),I._30(40,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n\n    "])),(e()(),I._55(-1,0,["\n    "])),(e()(),I._26(16777216,null,0,1,null,f)),I._30(44,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n\n    "])),(e()(),I._55(-1,0,["\n    "])),(e()(),I._26(16777216,null,0,1,null,E)),I._30(48,16384,null,0,X.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(e()(),I._55(-1,0,["\n\n"])),(e()(),I._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,n.loaded&&!n.hasOffline&&n.isOnline);e(t,21,0,n.loaded&&n.hasOffline&&n.isOnline);e(t,24,0,n.prefetchStatusIcon);e(t,27,0,n.size);e(t,33,0,n.loaded);e(t,36,0,n.survey&&!n.survey.surveydone&&!n.hasOffline);e(t,40,0,n.survey&&n.survey.surveydone);e(t,44,0,n.hasOffline);e(t,48,0,n.survey&&!n.survey.surveydone&&!n.hasOffline&&n.questions&&n.questions.length)},null)}n.d(t,"b",function(){return Te}),t.c=C,n.d(t,"a",function(){return xe});var I=n(0),R=n(92),S=n(83),w=n(78),A=n(25),D=n(17),j=n(122),k=n(112),T=n(89),x=n(8),M=n(45),N=n(42),U=n(174),F=n(4),L=n(2),H=n(1),B=n(22),q=n(15),G=n(21),V=n(29),K=n(28),W=n(11),z=n(47),$=n(120),Y=n(164),Q=n(119),X=n(7),J=n(30),Z=n(20),ee=n(19),te=n(27),ne=n(33),oe=n(176),re=n(145),ie=n(137),le=n(108),ae=n(23),se=n(93),ue=n(67),ce=n(84),de=n(123),fe=n(109),pe=n(35),he=n(59),me=n(110),_e=n(90),ge=n(16),ve=n(34),ye=n(96),be=n(87),Pe=n(6),Oe=n(91),Ee=n(70),Ce=n(76),Ie=n(54),Re=n(51),Se=n(9),we=n(516),Ae=n(300),De=n(334),je=n(301),ke=n(302),Te=I._29({encapsulation:2,styles:[],data:{}}),xe=I._27("addon-mod-survey-index",we.a,function(e){return I._57(0,[(e()(),I._31(0,0,null,null,1,"addon-mod-survey-index",[],null,null,null,C,Te)),I._30(1,245760,null,0,we.a,[I.C,Ae.a,[2,V.a],De.a,je.a,ke.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return h._57(0,[(e()(),h._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,m.b,m.a)),h._30(1,770048,null,0,_.a,[g.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),h._47(131072,v.a,[y.a,h.j])],function(e,t){var n=t.component;e(t,1,0,h._56(t,1,0,h._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function r(e){return h._57(0,[(e()(),h._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},m.b,m.a)),h._30(1,770048,null,0,_.a,[g.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),h._47(131072,v.a,[y.a,h.j])],function(e,t){e(t,1,0,h._56(t,1,0,h._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function i(e){return h._57(0,[(e()(),h._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},m.b,m.a)),h._30(1,770048,null,0,_.a,[g.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),h._47(131072,v.a,[y.a,h.j])],function(e,t){e(t,1,0,h._34(1,"",h._56(t,1,0,h._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function l(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,b.b,b.a)),h._30(1,49152,null,0,P.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,1,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function a(e){return h._57(0,[(e()(),h._31(0,0,null,null,4,"div",[["class","addon-mod_url-embedded-url"]],null,null,null,null,null)),(e()(),h._55(-1,null,["\n        "])),(e()(),h._31(2,0,null,null,1,"core-iframe",[],null,null,null,O.b,O.a)),h._30(3,638976,null,0,E.a,[C.a,I.a,R.a,S.c,w.a,A.a,D.a,[2,j.a]],{src:[0,"src"]},null),(e()(),h._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.url)},null)}function s(e){return h._57(0,[(e()(),h._31(0,0,null,null,0,"img",[],[[8,"title",0],[8,"src",4]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,h._34(1,"",n.name,""),n.url)})}function u(e){return h._57(0,[(e()(),h._31(0,0,null,null,3,"video",[["controls",""]],[[8,"title",0]],null,null,null,null)),(e()(),h._55(-1,null,["\n                "])),(e()(),h._31(2,0,null,null,0,"source",[],[[8,"src",4],[8,"type",0]],null,null,null,null)),(e()(),h._55(-1,null,["\n            "]))],null,function(e,t){var n=t.component;e(t,0,0,h._34(1,"",n.name,""));e(t,2,0,n.url,n.mimetype)})}function c(e){return h._57(0,[(e()(),h._31(0,0,null,null,3,"audio",[["controls",""]],[[8,"title",0]],null,null,null,null)),(e()(),h._55(-1,null,["\n                "])),(e()(),h._31(2,0,null,null,0,"source",[],[[8,"src",4],[8,"type",0]],null,null,null,null)),(e()(),h._55(-1,null,["\n            "]))],null,function(e,t){var n=t.component;e(t,0,0,h._34(1,"",n.name,""));e(t,2,0,n.url,n.mimetype)})}function d(e){return h._57(0,[(e()(),h._31(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,k.b,k.a)),h._30(1,1097728,null,3,T.a,[x.a,M.a,h.t,h.V,[2,N.a]],null,null),h._52(335544320,2,{contentLabel:0}),h._52(603979776,3,{_buttons:1}),h._52(603979776,4,{_icons:1}),h._30(5,16384,null,0,U.a,[],null,null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._26(16777216,null,2,1,null,s)),h._30(8,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._26(16777216,null,2,1,null,u)),h._30(11,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._26(16777216,null,2,1,null,c)),h._30(14,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,n.isImage);e(t,11,0,n.isVideo);e(t,14,0,n.isAudio)},null)}function f(e){return h._57(0,[(e()(),h._31(0,0,null,null,36,"ion-list",[],null,null,null,null,null)),h._30(1,16384,null,0,L.a,[M.a,h.t,h.V,H.a,B.l,q.a],null,null),(e()(),h._55(-1,null,["\n        "])),(e()(),h._26(16777216,null,null,1,null,d)),h._30(4,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,null,["\n        "])),(e()(),h._31(6,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,k.b,k.a)),h._30(7,1097728,null,3,T.a,[x.a,M.a,h.t,h.V,[2,N.a]],null,null),h._52(335544320,5,{contentLabel:0}),h._52(603979776,6,{_buttons:1}),h._52(603979776,7,{_icons:1}),h._30(11,16384,null,0,U.a,[],null,null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._31(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),h._55(14,null,["",""])),h._47(131072,v.a,[y.a,h.j]),(e()(),h._55(-1,2,["\n            "])),(e()(),h._31(17,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),h._55(18,null,["",""])),(e()(),h._55(-1,2,["\n        "])),(e()(),h._55(-1,null,["\n        "])),(e()(),h._31(21,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,k.b,k.a)),h._30(22,1097728,null,3,T.a,[x.a,M.a,h.t,h.V,[2,N.a]],null,null),h._52(335544320,8,{contentLabel:0}),h._52(603979776,9,{_buttons:1}),h._52(603979776,10,{_icons:1}),h._30(26,16384,null,0,U.a,[],null,null),(e()(),h._55(-1,2,["\n            "])),(e()(),h._31(28,0,null,2,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.go()&&o}return o},G.b,G.a)),h._30(29,1097728,[[9,4]],0,V.a,[[8,""],M.a,h.t,h.V],{block:[0,"block"]},null),(e()(),h._55(-1,0,["\n                "])),(e()(),h._31(31,0,null,0,1,"ion-icon",[["name","link"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),h._30(32,147456,null,0,K.a,[M.a,h.t,h.V],{name:[0,"name"]},null),(e()(),h._55(33,0,["\n                ","\n            "])),h._47(131072,v.a,[y.a,h.j]),(e()(),h._55(-1,2,["\n        "])),(e()(),h._55(-1,null,["\n    "]))],function(e,t){e(t,4,0,t.component.shouldEmbed);e(t,29,0,"");e(t,32,0,"link")},function(e,t){var n=t.component;e(t,14,0,h._56(t,14,0,h._44(t,15).transform("addon.mod_url.pointingtourl")));e(t,18,0,n.url);e(t,31,0,h._44(t,32)._hidden);e(t,33,0,h._56(t,33,0,h._44(t,34).transform("addon.mod_url.accessurl")))})}function p(e){return h._57(0,[(e()(),h._55(-1,null,["\n"])),(e()(),h._31(1,0,null,null,20,"core-navbar-buttons",[["end",""]],null,null,null,W.b,W.a)),h._30(2,245760,null,1,z.a,[h.t,C.a,R.a],null,null),h._52(603979776,1,{buttons:1}),(e()(),h._55(-1,0,["\n    "])),(e()(),h._31(5,0,null,0,15,"core-context-menu",[],null,null,null,$.b,$.a)),h._30(6,245760,null,0,g.a,[y.a,Y.a,h.t,R.a,[2,Q.a],D.a],null,null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,o)),h._30(9,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,r)),h._30(12,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._26(16777216,null,0,1,null,i)),h._30(15,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n        "])),(e()(),h._31(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},m.b,m.a)),h._30(18,770048,null,0,_.a,[g.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),h._47(131072,v.a,[y.a,h.j]),(e()(),h._55(-1,0,["\n    "])),(e()(),h._55(-1,0,["\n"])),(e()(),h._55(-1,null,["\n\n"])),(e()(),h._55(-1,null,["\n"])),(e()(),h._31(24,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,X.b,X.a)),h._30(25,638976,null,0,J.a,[y.a,h.t,Z.a,D.a],{hideUntil:[0,"hideUntil"]},null),(e()(),h._55(-1,0,["\n\n    "])),(e()(),h._26(16777216,null,0,1,null,l)),h._30(28,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n\n    "])),(e()(),h._26(16777216,null,0,1,null,a)),h._30(31,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n\n    "])),(e()(),h._26(16777216,null,0,1,null,f)),h._30(34,16384,null,0,F.k,[h._11,h._6],{ngIf:[0,"ngIf"]},null),(e()(),h._55(-1,0,["\n"])),(e()(),h._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0),e(t,6,0);e(t,9,0,n.externalUrl);e(t,12,0,n.description);e(t,15,0,n.blog);e(t,18,0,h._56(t,18,0,h._44(t,19).transform("core.refresh")),n.refreshIcon,!1,700);e(t,25,0,n.loaded);e(t,28,0,n.displayDescription);e(t,31,0,n.shouldIframe||n.shouldEmbed&&n.isOther);e(t,34,0,!(n.shouldIframe||n.shouldEmbed&&n.isOther))},null)}n.d(t,"b",function(){return le}),t.c=p,n.d(t,"a",function(){return ae});var h=n(0),m=n(92),_=n(83),g=n(78),v=n(25),y=n(17),b=n(122),P=n(112),O=n(322),E=n(257),C=n(6),I=n(44),R=n(4),S=n(79),w=n(21),A=n(22),D=n(2),j=n(28),k=n(30),T=n(20),x=n(19),M=n(8),N=n(27),U=n(33),F=n(7),L=n(86),H=n(16),B=n(43),q=n(34),G=n(45),V=n(42),K=n(47),W=n(96),z=n(87),$=n(91),Y=n(70),Q=n(76),X=n(54),J=n(51),Z=n(9),ee=n(517),te=n(303),ne=n(13),oe=n(335),re=n(66),ie=n(1),le=h._29({encapsulation:2,styles:[],data:{}}),ae=h._27("addon-mod-url-index",ee.a,function(e){return h._57(0,[(e()(),h._31(0,0,null,null,1,"addon-mod-url-index",[],null,null,null,p,le)),h._30(1,245760,null,0,ee.a,[h.C,te.a,ne.a,oe.a,re.a,ie.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return R._57(0,[(e()(),R._31(0,0,null,null,1,"ion-icon",[["name","person"],["role","img"]],[[2,"hide",null]],null,null,null,null)),R._30(1,147456,null,0,S.a,[w.a,R.t,R.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"person")},function(e,t){e(t,0,0,R._44(t,1)._hidden)})}function r(e){return R._57(0,[(e()(),R._31(0,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),R._30(1,147456,null,0,S.a,[w.a,R.t,R.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"people")},function(e,t){e(t,0,0,R._44(t,1)._hidden)})}function i(e){return R._57(0,[(e()(),R._31(0,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showSubwikiPicker(n)&&o}return o},A.b,A.a)),R._30(1,1097728,[[1,4]],0,D.a,[[8,""],w.a,R.t,R.V],null,null),R._47(131072,j.a,[k.a,R.j]),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,o)),R._30(5,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,r)),R._30(8,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n    "]))],function(e,t){var n=t.component;e(t,5,0,!n.groupWiki);e(t,8,0,n.groupWiki)},function(e,t){e(t,0,0,R._56(t,0,0,R._44(t,2).transform("addon.mod_wiki.subwiki")))})}function l(e){return R._57(0,[(e()(),R._31(0,0,null,null,6,"button",[["aria-haspopup","true"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openMap(n)&&o}return o},A.b,A.a)),R._30(1,1097728,[[1,4]],0,D.a,[[8,""],w.a,R.t,R.V],null,null),R._47(131072,j.a,[k.a,R.j]),(e()(),R._55(-1,0,["\n        "])),(e()(),R._31(4,0,null,0,1,"ion-icon",[["name","map"],["role","img"]],[[2,"hide",null]],null,null,null,null)),R._30(5,147456,null,0,S.a,[w.a,R.t,R.V],{name:[0,"name"]},null),(e()(),R._55(-1,0,["\n    "]))],function(e,t){e(t,5,0,"map")},function(e,t){e(t,0,0,R._56(t,0,0,R._44(t,2).transform("addon.mod_wiki.map")));e(t,4,0,R._44(t,5)._hidden)})}function a(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[],null,null,null,x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),R._47(131072,j.a,[k.a,R.j])],function(e,t){var n=t.component;e(t,1,0,R._56(t,1,0,R._44(t,2).transform("core.openinbrowser")),"open",n.externalUrl,900)},null)}function s(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.expandDescription()&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),R._47(131072,j.a,[k.a,R.j])],function(e,t){e(t,1,0,R._56(t,1,0,R._44(t,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function u(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.gotoBlog(n)&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),R._47(131072,j.a,[k.a,R.j])],function(e,t){e(t,1,0,R._34(1,"",R._56(t,1,0,R._44(t,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function c(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n)&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),R._47(131072,j.a,[k.a,R.j])],function(e,t){var n=t.component;e(t,1,0,R._56(t,1,0,R._44(t,2).transform("core.refresh")),n.refreshIcon,!1,700)},null)}function d(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.doRefresh(null,n,!0)&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),R._47(131072,j.a,[k.a,R.j])],function(e,t){var n=t.component;e(t,1,0,R._56(t,1,0,R._44(t,2).transform("core.settings.synchronizenow")),n.syncIcon,!1,600)},null)}function f(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[["iconAction","create"]],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.goToEditPage()&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),R._47(131072,j.a,[k.a,R.j])],function(e,t){e(t,1,0,R._56(t,1,0,R._44(t,2).transform("core.edit")),"create",590)},null)}function p(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-context-menu-item",[["iconAction","add"]],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.goToNewPage()&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),R._47(131072,j.a,[k.a,R.j])],function(e,t){e(t,1,0,R._56(t,1,0,R._44(t,2).transform("addon.mod_wiki.createpage")),"add",580)},null)}function h(e){return R._57(0,[(e()(),R._31(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.prefetch(n)&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,t){var n=t.component;e(t,1,0,n.prefetchText,n.prefetchStatusIcon,!1,500)},null)}function m(e){return R._57(0,[(e()(),R._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.removeFiles()&&o}return o},x.b,x.a)),R._30(1,770048,null,0,M.a,[N.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),R._48(2,{$a:0}),R._47(131072,j.a,[k.a,R.j])],function(e,t){var n=t.component;e(t,1,0,R._56(t,1,0,R._44(t,3).transform("core.removefiles",e(t,2,0,n.size))),"cube","trash",400)},null)}function _(e){return R._57(0,[(e()(),R._31(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),R._55(1,null,["",""])),R._48(2,{$a:0}),R._47(131072,j.a,[k.a,R.j])],null,function(e,t){var n=t.component;e(t,1,0,R._56(t,1,0,R._44(t,3).transform("core.hasdatatosync",e(t,2,0,n.pageStr))))})}function g(e){return R._57(0,[(e()(),R._31(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),R._55(1,null,["",""])),R._48(2,{$a:0}),R._47(131072,j.a,[k.a,R.j])],null,function(e,t){var n=t.component;e(t,1,0,R._56(t,1,0,R._44(t,3).transform("core.hasdatatosync",e(t,2,0,n.moduleName))))})}function v(e){return R._57(0,[(e()(),R._31(0,0,null,null,10,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),R._55(-1,null,["\n            "])),(e()(),R._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),R._30(3,147456,null,0,S.a,[w.a,R.t,R.V],{name:[0,"name"]},null),(e()(),R._55(-1,null,["\n            "])),(e()(),R._26(16777216,null,null,1,null,_)),R._30(6,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n            "])),(e()(),R._26(16777216,null,null,1,null,g)),R._30(9,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,"warning");e(t,6,0,n.pageIsOffline);e(t,9,0,!n.pageIsOffline)},function(e,t){e(t,2,0,R._44(t,3)._hidden)})}function y(e){return R._57(0,[(e()(),R._31(0,0,null,null,4,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),R._55(-1,null,["\n            "])),(e()(),R._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),R._30(3,147456,null,0,S.a,[w.a,R.t,R.V],{name:[0,"name"]},null),(e()(),R._55(4,null,["\n            ","\n        "]))],function(e,t){e(t,3,0,"warning")},function(e,t){var n=t.component;e(t,2,0,R._44(t,3)._hidden);e(t,4,0,n.pageWarning)})}function b(e){return R._57(0,[(e()(),R._31(0,0,null,null,12,"div",[["padding",""]],null,null,null,null,null)),(e()(),R._55(-1,null,["\n        "])),(e()(),R._31(2,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,U.b,U.a)),R._30(3,49152,null,0,F.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),R._55(-1,null,["\n\n        "])),(e()(),R._55(-1,null,["\n        "])),(e()(),R._26(16777216,null,null,1,null,v)),R._30(7,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n\n        "])),(e()(),R._55(-1,null,["\n        "])),(e()(),R._26(16777216,null,null,1,null,y)),R._30(11,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.description,n.component,n.componentId,"module",n.module.id,n.courseId);e(t,7,0,n.pageIsOffline||n.hasOffline);e(t,11,0,n.pageWarning)},null)}function P(e){return R._57(0,[(e()(),R._31(0,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),R._30(1,540672,null,0,L.a,[R.t,H.a,B.a,q.a,k.a,G.a,V.a,K.a,W.a,z.a,$.a,Y.a,[2,Q.a],[2,X.a],[2,J.a],Z.a,ee.a,te.a,ne.a,oe.a,R._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),R._26(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n.pageContent,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function O(e){return R._57(0,[(e()(),R._31(0,0,null,null,2,"core-empty-box",[["icon","document"]],null,null,null,re.b,re.a)),R._30(1,49152,null,0,ie.a,[],{message:[0,"message"],icon:[1,"icon"],inline:[2,"inline"]},null),R._47(131072,j.a,[k.a,R.j])],function(e,t){e(t,1,0,R._56(t,1,0,R._44(t,2).transform("addon.mod_wiki.nocontent")),"document",!0)},null)}function E(e){return R._57(0,[(e()(),R._31(0,0,null,null,8,"div",[["margin-top",""]],null,null,null,null,null)),(e()(),R._55(-1,null,["\n            "])),(e()(),R._31(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),R._55(3,null,["",":"])),R._47(131072,j.a,[k.a,R.j]),(e()(),R._55(-1,null,["\n            "])),(e()(),R._31(6,0,null,null,1,"core-tag-list",[],null,null,null,le.b,le.a)),R._30(7,49152,null,0,ae.a,[Q.a,[2,J.a]],{tags:[0,"tags"]},null),(e()(),R._55(-1,null,["\n        "]))],function(e,t){e(t,7,0,t.component.currentPageObj.tags)},function(e,t){e(t,3,0,R._56(t,3,0,R._44(t,4).transform("core.tag.tags")))})}function C(e){return R._57(0,[(e()(),R._31(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,se.b,se.a)),R._30(1,1228800,null,2,ue.a,[G.a],null,null),R._52(335544320,2,{_mainButton:0}),R._52(603979776,3,{_fabLists:1}),R._30(4,212992,null,0,ce.a,[R.t,X.a],null,null),(e()(),R._55(-1,0,["\n    "])),(e()(),R._31(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.goToNewPage()&&o}return o},de.b,de.a)),R._30(7,49152,[[2,4]],0,fe.a,[w.a,R.t,R.V],null,null),R._47(131072,j.a,[k.a,R.j]),(e()(),R._55(-1,0,["\n        "])),(e()(),R._31(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),R._30(11,147456,null,0,S.a,[w.a,R.t,R.V],{name:[0,"name"]},null),(e()(),R._55(-1,0,["\n    "])),(e()(),R._55(-1,0,["\n"]))],function(e,t){e(t,4,0);e(t,11,0,"add")},function(e,t){e(t,6,0,R._56(t,6,0,R._44(t,8).transform("addon.mod_wiki.createpage")));e(t,10,0,R._44(t,11)._hidden)})}function I(e){return R._57(0,[(e()(),R._55(-1,null,["\n"])),(e()(),R._31(1,0,null,null,41,"core-navbar-buttons",[["end",""]],null,null,null,pe.b,pe.a)),R._30(2,245760,null,1,he.a,[R.t,W.a,B.a],null,null),R._52(603979776,1,{buttons:1}),(e()(),R._55(-1,0,["\n    "])),(e()(),R._55(-1,0,["\n    "])),(e()(),R._26(16777216,null,0,1,null,i)),R._30(7,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n\n    "])),(e()(),R._26(16777216,null,0,1,null,l)),R._30(10,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n\n    "])),(e()(),R._31(12,0,null,0,29,"core-context-menu",[],null,null,null,me.b,me.a)),R._30(13,245760,null,0,N.a,[k.a,_e.a,R.t,B.a,[2,ge.a],V.a],null,null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,a)),R._30(16,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,s)),R._30(19,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,u)),R._30(22,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,c)),R._30(25,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,d)),R._30(28,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,f)),R._30(31,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,p)),R._30(34,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,h)),R._30(37,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n        "])),(e()(),R._26(16777216,null,0,1,null,m)),R._30(40,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n    "])),(e()(),R._55(-1,0,["\n"])),(e()(),R._55(-1,null,["\n\n"])),(e()(),R._55(-1,null,["\n"])),(e()(),R._31(45,0,null,null,22,"core-loading",[["class","core-loading-center"]],null,null,null,ve.b,ve.a)),R._30(46,638976,null,0,ye.a,[k.a,R.t,ee.a,V.a],{hideUntil:[0,"hideUntil"]},null),(e()(),R._55(-1,0,["\n    "])),(e()(),R._26(16777216,null,0,1,null,b)),R._30(49,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,0,["\n    "])),(e()(),R._31(51,0,null,0,15,"div",[["class","addon-mod_wiki-page-content"],["padding",""]],null,null,null,null,null)),(e()(),R._55(-1,null,["\n        "])),(e()(),R._31(53,0,null,null,9,"article",[],null,null,null,null,null)),R._30(54,278528,null,0,T.i,[R.E,R.F,R.t,R.W],{ngClass:[0,"ngClass"]},null),R._48(55,{"addon-mod_wiki-noedit":0}),(e()(),R._55(-1,null,["\n            "])),(e()(),R._26(16777216,null,null,1,null,P)),R._30(58,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n            "])),(e()(),R._26(16777216,null,null,1,null,O)),R._30(61,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n        "])),(e()(),R._55(-1,null,["\n\n        "])),(e()(),R._26(16777216,null,null,1,null,E)),R._30(65,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n    "])),(e()(),R._55(-1,0,["\n"])),(e()(),R._55(-1,null,["\n\n"])),(e()(),R._26(16777216,null,null,1,null,C)),R._30(70,16384,null,0,T.k,[R._11,R._6],{ngIf:[0,"ngIf"]},null),(e()(),R._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0);e(t,7,0,n.subwikiData.count>1);e(t,10,0,n.loaded&&n.currentPageObj),e(t,13,0);e(t,16,0,n.externalUrl);e(t,19,0,n.description);e(t,22,0,n.blog);e(t,25,0,n.loaded&&!n.hasOffline&&n.isOnline&&!n.pageIsOffline);e(t,28,0,n.loaded&&n.isOnline&&(n.hasOffline||n.pageIsOffline));e(t,31,0,n.canEdit&&(n.isOnline||n.pageIsOffline));e(t,34,0,n.canEdit);e(t,37,0,n.prefetchStatusIcon);e(t,40,0,n.size);e(t,46,0,n.loaded);e(t,49,0,n.description||n.pageIsOffline||n.hasOffline||n.pageWarning);e(t,54,0,e(t,55,0,!n.canEdit));e(t,58,0,n.pageContent);e(t,61,0,!n.pageContent);e(t,65,0,n.tagsEnabled&&n.currentPageObj&&n.currentPageObj.tags&&n.currentPageObj.tags.length>0);e(t,70,0,n.canEdit)},null)}n.d(t,"b",function(){return we}),t.c=I,n.d(t,"a",function(){return Ae});var R=n(0),S=n(47),w=n(8),A=n(45),D=n(42),j=n(25),k=n(17),T=n(7),x=n(92),M=n(83),N=n(78),U=n(122),F=n(112),L=n(48),H=n(1),B=n(4),q=n(11),G=n(16),V=n(2),K=n(22),W=n(6),z=n(18),$=n(10),Y=n(15),Q=n(21),X=n(29),J=n(28),Z=n(44),ee=n(9),te=n(41),ne=n(32),oe=n(36),re=n(124),ie=n(114),le=n(494),ae=n(324),se=n(281),ue=n(218),ce=n(255),de=n(282),fe=n(190),pe=n(96),he=n(87),me=n(91),_e=n(70),ge=n(76),ve=n(54),ye=n(51),be=n(518),Pe=n(235),Oe=n(289),Ee=n(290),Ce=n(71),Ie=n(46),Re=n(163),Se=n(162),we=R._29({encapsulation:2,styles:[],data:{}}),Ae=R._27("addon-mod-wiki-index",be.a,function(e){return R._57(0,[(e()(),R._31(0,0,null,null,1,"addon-mod-wiki-index",[],null,null,null,I,we)),R._30(1,245760,null,0,be.a,[R.C,Pe.a,[2,X.a],Oe.a,Ee.a,Q.a,V.a,Ce.a,Ie.a,_e.a,Re.a,Se.a],null,null)],function(e,t){e(t,1,0)},null)},{module:"module",courseId:"courseId",group:"group",action:"action",pageId:"pageId",pageTitle:"pageTitle",wikiId:"wikiId",subwikiId:"subwikiId",userId:"userId",groupId:"groupId"},{dataRetrieved:"dataRetrieved"},[])},function(e,t,n){"use strict";function o(e){return g._57(0,[(e()(),g._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),g._30(1,1097728,null,3,y.a,[b.a,P.a,g.t,g.V,[2,O.a]],null,null),g._52(335544320,3,{contentLabel:0}),g._52(603979776,4,{_buttons:1}),g._52(603979776,5,{_icons:1}),g._30(5,16384,null,0,E.a,[],null,null),(e()(),g._55(-1,2,["\n            "])),(e()(),g._31(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,C.b,C.a)),g._30(8,16384,null,0,I.a,[],null,null),g._30(9,770048,null,0,R.a,[S.a,w.a,A.a,D.a,j.a,[2,k.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"],courseId:[2,"courseId"]},null),(e()(),g._55(-1,2,["\n            "])),(e()(),g._31(11,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),g._55(12,null,["",""])),(e()(),g._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,9,0,n.user,!1,n.courseId)},function(e,t){e(t,12,0,t.component.user.fullname)})}function r(e){return g._57(0,[(e()(),g._31(0,0,null,null,8,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),g._55(-1,null,["\n            "])),(e()(),g._31(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(3,147456,null,0,T.a,[P.a,g.t,g.V],{name:[0,"name"]},null),(e()(),g._55(4,null,["\n            ","\n        "])),g._47(131072,x.a,[M.a,g.j]),g._49(6,1),g._48(7,{$a:0}),g._47(131072,x.a,[M.a,g.j])],function(e,t){e(t,3,0,"warning")},function(e,t){e(t,2,0,g._44(t,3)._hidden);e(t,4,0,g._56(t,4,0,g._44(t,8).transform("core.thereisdatatosync",e(t,7,0,g._56(t,4,0,e(t,6,0,g._44(t.parent,0),g._56(t,4,0,g._44(t,5).transform("addon.notes.notes"))))))))})}function i(e){return g._57(0,[(e()(),g._31(0,0,null,null,2,"core-empty-box",[["icon","list"]],null,null,null,N.b,N.a)),g._30(1,49152,null,0,U.a,[],{message:[0,"message"],icon:[1,"icon"]},null),g._47(131072,x.a,[M.a,g.j])],function(e,t){e(t,1,0,g._56(t,1,0,g._44(t,2).transform("addon.notes.nonotes")),"list")},null)}function l(e){return g._57(0,[(e()(),g._31(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,C.b,C.a)),g._30(1,16384,null,0,I.a,[],null,null),g._30(2,770048,null,0,R.a,[S.a,w.a,A.a,D.a,j.a,[2,k.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(e,t){e(t,2,0,t.parent.context.$implicit,t.component.courseId)},null)}function a(e){return g._57(0,[(e()(),g._31(0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),g._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.userfullname)})}function s(e){return g._57(0,[(e()(),g._31(0,0,null,null,5,"p",[["item-end",""]],null,null,null,null,null)),(e()(),g._55(-1,null,["\n                        "])),(e()(),g._31(2,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(e()(),g._55(3,null,["",""])),g._49(4,1),(e()(),g._55(-1,null,["\n                    "]))],null,function(e,t){e(t,3,0,g._56(t,3,0,e(t,4,0,g._44(t.parent.parent.parent,1),t.parent.context.$implicit.lastmodified)))})}function u(e){return g._57(0,[(e()(),g._31(0,0,null,null,7,"p",[["item-end",""]],null,null,null,null,null)),(e()(),g._55(-1,null,["\n                        "])),(e()(),g._31(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(3,147456,[[9,4]],0,T.a,[P.a,g.t,g.V],{name:[0,"name"]},null),(e()(),g._55(-1,null,[" "])),(e()(),g._31(5,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(e()(),g._55(6,null,["",""])),g._47(131072,x.a,[M.a,g.j])],function(e,t){e(t,3,0,"time")},function(e,t){e(t,2,0,g._44(t,3)._hidden);e(t,6,0,g._56(t,6,0,g._44(t,7).transform("core.notsent")))})}function c(e){return g._57(0,[(e()(),g._31(0,0,null,null,8,"p",[["item-end",""]],null,null,null,null,null)),(e()(),g._55(-1,null,["\n                        "])),(e()(),g._31(2,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(3,147456,[[9,4]],0,T.a,[P.a,g.t,g.V],{name:[0,"name"]},null),(e()(),g._55(-1,null,[" "])),(e()(),g._31(5,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(e()(),g._55(6,null,["",""])),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,null,["\n                    "]))],function(e,t){e(t,3,0,"trash")},function(e,t){e(t,2,0,g._44(t,3)._hidden);e(t,6,0,g._56(t,6,0,g._44(t,7).transform("core.deletedoffline")))})}function d(e){return g._57(0,[(e()(),g._31(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.undoDeleteNote(n,e.parent.context.$implicit)&&o}return o},F.b,F.a)),g._30(1,1097728,[[8,4]],0,L.a,[[8,""],P.a,g.t,g.V],{color:[0,"color"],clear:[1,"clear"]},null),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,0,["\n                        "])),(e()(),g._31(4,0,null,0,1,"ion-icon",[["name","undo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(5,147456,null,0,T.a,[P.a,g.t,g.V],{name:[0,"name"]},null),(e()(),g._55(-1,0,["\n                    "]))],function(e,t){e(t,1,0,"danger","");e(t,5,0,"undo")},function(e,t){e(t,0,0,g._56(t,0,0,g._44(t,2).transform("core.restore")));e(t,4,0,g._44(t,5)._hidden)})}function f(e){return g._57(0,[(e()(),g._31(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[24,"@coreSlideInOut",0],[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.deleteNote(n,e.parent.context.$implicit)&&o}return o},F.b,F.a)),g._30(1,1097728,[[8,4]],0,L.a,[[8,""],P.a,g.t,g.V],{color:[0,"color"],clear:[1,"clear"]},null),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,0,["\n                        "])),(e()(),g._31(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(5,147456,null,0,T.a,[P.a,g.t,g.V],{name:[0,"name"]},null),(e()(),g._55(-1,0,["\n                    "]))],function(e,t){e(t,1,0,"danger","");e(t,5,0,"trash")},function(e,t){e(t,0,0,"fromRight",g._56(t,0,1,g._44(t,2).transform("core.delete")));e(t,4,0,g._44(t,5)._hidden)})}function p(e){return g._57(0,[(e()(),g._31(0,0,null,null,40,"ion-card",[],null,null,null,null,null)),g._30(1,16384,null,0,H.a,[P.a,g.t,g.V],null,null),(e()(),g._55(-1,null,["\n                "])),(e()(),g._31(3,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),g._30(4,1097728,null,3,y.a,[b.a,P.a,g.t,g.V,[2,O.a]],null,null),g._52(335544320,7,{contentLabel:0}),g._52(603979776,8,{_buttons:1}),g._52(603979776,9,{_icons:1}),g._30(8,16384,null,0,E.a,[],null,null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,0,1,null,l)),g._30(11,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,2,1,null,a)),g._30(14,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,4,1,null,s)),g._30(17,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,4,1,null,u)),g._30(20,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,4,1,null,c)),g._30(23,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,4,1,null,d)),g._30(26,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                    "])),(e()(),g._26(16777216,null,4,1,null,f)),g._30(29,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,2,["\n                "])),(e()(),g._55(-1,null,["\n                "])),(e()(),g._31(32,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),g._30(33,1097728,null,3,y.a,[b.a,P.a,g.t,g.V,[2,O.a]],null,null),g._52(335544320,10,{contentLabel:0}),g._52(603979776,11,{_buttons:1}),g._52(603979776,12,{_icons:1}),g._30(37,16384,null,0,E.a,[],null,null),(e()(),g._31(38,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),g._30(39,540672,null,0,q.a,[g.t,w.a,G.a,V.a,M.a,K.a,A.a,W.a,z.a,$.a,D.a,Y.a,[2,S.a],[2,Q.a],[2,k.a],X.a,j.a,J.a,Z.a,ee.a,g._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),g._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,11,0,!n.userId);e(t,14,0,!n.userId);e(t,17,0,!t.context.$implicit.deleted&&!t.context.$implicit.offline);e(t,20,0,t.context.$implicit.offline);e(t,23,0,t.context.$implicit.deleted);e(t,26,0,t.context.$implicit.deleted);e(t,29,0,n.showDelete&&!t.context.$implicit.deleted&&("personal"!=n.type||t.context.$implicit.usermodified==n.currentUserId));e(t,39,0,t.context.$implicit.content,!1)},null)}function h(e){return g._57(0,[(e()(),g._31(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),g._30(1,16384,null,0,te.a,[P.a,g.t,g.V,K.a,ne.l,oe.a],null,null),(e()(),g._55(-1,null,["\n            "])),(e()(),g._26(16777216,null,null,1,null,p)),g._30(4,802816,null,0,B.j,[g._11,g._6,g.E],{ngForOf:[0,"ngForOf"]},null),(e()(),g._55(-1,null,["\n        "]))],function(e,t){e(t,4,0,t.component.notes)},null)}function m(e){return g._57(0,[(e()(),g._31(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,re.b,re.a)),g._30(1,1228800,null,2,ie.a,[K.a],null,null),g._52(335544320,13,{_mainButton:0}),g._52(603979776,14,{_fabLists:1}),g._30(4,212992,null,0,le.a,[g.t,Q.a],null,null),(e()(),g._55(-1,0,["\n        "])),(e()(),g._31(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.addNote(n)&&o}return o},ae.b,ae.a)),g._30(7,49152,[[13,4]],0,se.a,[P.a,g.t,g.V],null,null),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,0,["\n            "])),(e()(),g._31(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(11,147456,null,0,T.a,[P.a,g.t,g.V],{name:[0,"name"]},null),(e()(),g._55(-1,0,["\n        "])),(e()(),g._55(-1,0,["\n    "]))],function(e,t){e(t,4,0);e(t,11,0,"add")},function(e,t){e(t,6,0,g._56(t,6,0,g._44(t,8).transform("addon.notes.addnewnote")));e(t,10,0,g._44(t,11)._hidden)})}function _(e){return g._57(0,[g._47(0,B.h,[]),g._47(0,ue.a,[z.a,M.a,ce.a]),g._52(402653184,1,{content:0}),(e()(),g._31(3,0,null,null,23,"core-navbar-buttons",[["end",""]],null,null,null,de.b,de.a)),g._30(4,245760,null,1,fe.a,[g.t,z.a,G.a],null,null),g._52(603979776,2,{buttons:1}),(e()(),g._55(-1,0,["\n     "])),(e()(),g._31(7,0,null,0,6,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.toggleDelete(n)&&o}return o},F.b,F.a)),g._30(8,1097728,[[2,4]],0,L.a,[[8,""],P.a,g.t,g.V],{clear:[0,"clear"]},null),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,0,["\n        "])),(e()(),g._31(11,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._30(12,147456,null,0,T.a,[P.a,g.t,g.V],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),g._55(-1,0,["\n    "])),(e()(),g._55(-1,0,["\n    "])),(e()(),g._31(15,0,null,0,10,"core-context-menu",[],null,null,null,pe.b,pe.a)),g._30(16,245760,null,0,he.a,[M.a,me.a,g.t,G.a,[2,_e.a],A.a],null,null),(e()(),g._55(-1,0,["\n        "])),(e()(),g._31(18,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.refreshNotes(!1)&&o}return o},ge.b,ge.a)),g._30(19,770048,null,0,ve.a,[he.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,0,["\n        "])),(e()(),g._31(22,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.refreshNotes(!0)&&o}return o},ge.b,ge.a)),g._30(23,770048,null,0,ve.a,[he.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,0,["\n    "])),(e()(),g._55(-1,0,["\n"])),(e()(),g._55(-1,null,["\n\n"])),(e()(),g._31(28,0,null,null,56,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ye.b,ye.a)),g._30(29,4374528,[[1,4]],0,Q.a,[P.a,K.a,oe.a,g.t,g.V,be.a,Pe.a,g.M,[2,Oe.a],[2,S.a]],null,null),(e()(),g._55(-1,1,["\n    "])),(e()(),g._31(31,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refreshNotes(!1,n)&&o}return o},null,null)),g._30(32,212992,null,0,Ee.a,[K.a,Q.a,g.M,ne.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),g._55(-1,null,["\n        "])),(e()(),g._31(34,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ce.b,Ce.a)),g._30(35,114688,null,0,Ie.a,[Ee.a,P.a],{pullingText:[0,"pullingText"]},null),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,null,["\n    "])),(e()(),g._55(-1,1,["\n    "])),(e()(),g._31(39,0,null,1,41,"core-loading",[["class","core-loading-center"]],null,null,null,Re.b,Re.a)),g._30(40,638976,null,0,Se.a,[M.a,g.t,j.a,A.a],{hideUntil:[0,"hideUntil"]},null),(e()(),g._55(-1,0,["\n        "])),(e()(),g._26(16777216,null,0,1,null,o)),g._30(43,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,0,["\n\n        "])),(e()(),g._31(45,0,null,0,25,"div",[["padding",""]],null,null,null,null,null)),(e()(),g._55(-1,null,["\n            "])),(e()(),g._31(47,0,null,null,22,"ion-select",[["class","core-button-select"],["interface","popover"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==g._44(e,48)._click(n)&&o}if("keyup.space"===t){o=!1!==g._44(e,48)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.type=n)&&o}if("ngModelChange"===t){o=!1!==r.typeChanged()&&o}return o},we.b,we.a)),g._30(48,1228800,null,1,Ae.a,[be.a,b.a,P.a,g.t,g.V,[2,y.a],De.a],{interface:[0,"interface"]},null),g._52(603979776,6,{options:1}),g._50(1024,null,je.l,function(e){return[e]},[Ae.a]),g._30(51,671744,null,0,je.q,[[8,null],[8,null],[8,null],[2,je.l]],{model:[0,"model"]},{update:"ngModelChange"}),g._50(2048,null,je.m,null,[je.q]),g._30(53,16384,null,0,je.n,[je.m],null,null),(e()(),g._55(-1,null,["\n                "])),(e()(),g._31(55,0,null,null,3,"ion-option",[["value","site"]],null,null,null,null,null)),g._30(56,16384,[[6,4]],0,ke.a,[g.t],{value:[0,"value"]},null),(e()(),g._55(57,null,["",""])),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,null,["\n                "])),(e()(),g._31(60,0,null,null,3,"ion-option",[["value","course"]],null,null,null,null,null)),g._30(61,16384,[[6,4]],0,ke.a,[g.t],{value:[0,"value"]},null),(e()(),g._55(62,null,["",""])),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,null,["\n                "])),(e()(),g._31(65,0,null,null,3,"ion-option",[["value","personal"]],null,null,null,null,null)),g._30(66,16384,[[6,4]],0,ke.a,[g.t],{value:[0,"value"]},null),(e()(),g._55(67,null,["",""])),g._47(131072,x.a,[M.a,g.j]),(e()(),g._55(-1,null,["\n            "])),(e()(),g._55(-1,null,["\n        "])),(e()(),g._55(-1,0,["\n\n        "])),(e()(),g._26(16777216,null,0,1,null,r)),g._30(73,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,0,["\n\n        "])),(e()(),g._26(16777216,null,0,1,null,i)),g._30(76,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,0,["\n\n        "])),(e()(),g._26(16777216,null,0,1,null,h)),g._30(79,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,0,["\n\n    "])),(e()(),g._55(-1,1,["\n    "])),(e()(),g._26(16777216,null,0,1,null,m)),g._30(83,16384,null,0,B.k,[g._11,g._6],{ngIf:[0,"ngIf"]},null),(e()(),g._55(-1,1,["\n"])),(e()(),g._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0);e(t,8,0,"");e(t,12,0,"create","md-create"),e(t,16,0);e(t,19,0,g._56(t,19,0,g._44(t,20).transform("core.refresh")),n.refreshIcon,!0,100,!(n.notesLoaded&&!n.hasOffline));e(t,23,0,g._56(t,23,0,g._44(t,24).transform("core.settings.synchronizenow")),n.syncIcon,!1,100,!(n.notesLoaded&&n.hasOffline));e(t,32,0,n.notesLoaded);e(t,35,0,g._34(1,"",g._56(t,35,0,g._44(t,36).transform("core.pulltorefresh")),""));e(t,40,0,n.notesLoaded);e(t,43,0,n.user);e(t,48,0,"popover");e(t,51,0,n.type);e(t,56,0,"site");e(t,61,0,"course");e(t,66,0,"personal");e(t,73,0,n.hasOffline);e(t,76,0,n.notes&&0==n.notes.length);e(t,79,0,n.notes&&n.notes.length>0);e(t,83,0,n.userId&&n.notesLoaded)},function(e,t){e(t,7,0,!t.component.canDeleteNotes,g._56(t,7,1,g._44(t,9).transform("core.delete")));e(t,11,0,g._44(t,12)._hidden);e(t,28,0,g._44(t,29).statusbarPadding,g._44(t,29)._hasRefresher);e(t,31,0,"inactive"!==g._44(t,32).state,g._44(t,32)._top);e(t,34,0,g._44(t,35).r.state);e(t,47,0,g._44(t,48)._disabled,g._44(t,53).ngClassUntouched,g._44(t,53).ngClassTouched,g._44(t,53).ngClassPristine,g._44(t,53).ngClassDirty,g._44(t,53).ngClassValid,g._44(t,53).ngClassInvalid,g._44(t,53).ngClassPending);e(t,57,0,g._56(t,57,0,g._44(t,58).transform("addon.notes.sitenotes")));e(t,62,0,g._56(t,62,0,g._44(t,63).transform("addon.notes.coursenotes")));e(t,67,0,g._56(t,67,0,g._44(t,68).transform("addon.notes.personalnotes")))})}n.d(t,"b",function(){return Le}),t.c=_,n.d(t,"a",function(){return He});var g=n(0),v=n(30),y=n(20),b=n(19),P=n(8),O=n(27),E=n(33),C=n(213),I=n(160),R=n(182),S=n(21),w=n(1),A=n(2),D=n(10),j=n(9),k=n(28),T=n(47),x=n(25),M=n(17),N=n(124),U=n(114),F=n(45),L=n(42),H=n(89),B=n(7),q=n(48),G=n(4),V=n(11),K=n(16),W=n(22),z=n(6),$=n(18),Y=n(15),Q=n(29),X=n(44),J=n(41),Z=n(32),ee=n(36),te=n(86),ne=n(43),oe=n(34),re=n(281),ie=n(218),le=n(255),ae=n(282),se=n(190),ue=n(377),ce=n(24),de=n(96),fe=n(87),pe=n(91),he=n(78),me=n(70),_e=n(76),ge=n(92),ve=n(83),ye=n(181),be=n(35),Pe=n(107),Oe=n(39),Ee=n(159),Ce=n(212),Ie=n(173),Re=n(54),Se=n(51),we=n(123),Ae=n(109),De=n(59),je=n(23),ke=n(108),Te=n(529),xe=n(162),Me=n(260),Ne=n(336),Ue=n(46),Fe=n(304),Le=g._29({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreSlideInOut",definitions:[{type:1,expr:"void => fromLeft",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromLeft => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"void => fromRight",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromRight => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:1},offset:null}]},timings:300}],options:null}],options:{}}]}}),He=g._27("addon-notes-list",Te.a,function(e){return g._57(0,[(e()(),g._31(0,0,null,null,1,"addon-notes-list",[],null,null,null,_,Le)),g._30(1,245760,null,0,Te.a,[G.a,V.a,w.a,j.a,xe.a,Me.a,Ne.a,Ue.a,Fe.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,l.b,l.a)),i._30(1,376832,[[1,4]],0,a.a,[s.a,u.a,[2,c.a],i.F],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"]},null)],function(e,t){var n=t.component;e(t,1,0,n.component,n.method,n.args,n.initResult)},null)}function r(e){return i._57(0,[i._52(671088640,1,{content:0}),(e()(),i._26(16777216,null,null,1,null,o)),i._30(2,16384,null,0,d.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.component&&n.method)},null)}n.d(t,"a",function(){return m});var i=n(0),l=n(407),a=n(156),s=n(4),u=n(58),c=n(21),d=n(7),f=n(455),p=n(60),h=i._29({encapsulation:2,styles:[],data:{}}),m=i._27("core-site-plugins-block",f.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-block",[],null,null,null,r,h)),i._30(1,638976,null,0,f.a,[i.C,u.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["detail-push",""],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoBlock(n)&&o}return o},i.b,i.a)),r._30(1,1097728,null,3,l.a,[a.a,s.a,r.t,r.V,[2,u.a]],null,null),r._52(335544320,1,{contentLabel:0}),r._52(603979776,2,{_buttons:1}),r._52(603979776,3,{_icons:1}),r._30(5,16384,null,0,c.a,[s.a,r.t,r.V],null,null),(e()(),r._55(-1,2,["\n    "])),(e()(),r._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._55(8,null,["",""])),r._47(131072,d.a,[f.a,r.j]),(e()(),r._55(-1,2,["\n"]))],null,function(e,t){var n=t.component;e(t,8,0,r._56(t,8,0,r._44(t,9).transform(n.title)))})}n.d(t,"a",function(){return y});var r=n(0),i=n(30),l=n(20),a=n(19),s=n(8),u=n(27),c=n(100),d=n(25),f=n(17),p=n(678),h=n(58),m=n(60),_=n(21),g=n(28),v=r._29({encapsulation:2,styles:[],data:{}}),y=r._27("core-siteplugins-only-title-block",p.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-siteplugins-only-title-block",[],null,null,null,o,v)),r._30(1,114688,null,0,p.a,[r.C,h.a,m.a,_.a,[2,g.a]],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,l.b,l.a)),i._30(1,376832,[[1,4]],0,a.a,[s.a,u.a,[2,c.a],i.F],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"]},null)],function(e,t){var n=t.component;e(t,1,0,n.component,n.method,n.args,n.initResult)},null)}function r(e){return i._57(0,[i._52(671088640,1,{content:0}),(e()(),i._31(1,0,null,null,13,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,d.b,d.a)),i._30(2,4374528,null,0,f.a,[p.a,h.a,m.a,i.t,i.V,_.a,g.a,i.M,[2,v.a],[2,c.a]],null,null),(e()(),i._55(-1,1,["\n    "])),(e()(),i._31(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,n){var o=!0;if("ionRefresh"===t){o=!1!==e.component.refreshData(n)&&o}return o},null,null)),i._30(5,212992,null,0,y.a,[h.a,f.a,i.M,b.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),i._55(-1,null,["\n        "])),(e()(),i._31(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,P.b,P.a)),i._30(8,114688,null,0,O.a,[y.a,p.a],{pullingText:[0,"pullingText"]},null),i._47(131072,E.a,[C.a,i.j]),(e()(),i._55(-1,null,["\n    "])),(e()(),i._55(-1,1,["\n    "])),(e()(),i._26(16777216,null,1,1,null,o)),i._30(13,16384,null,0,I.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,1,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.content&&n.content.dataLoaded);e(t,8,0,i._34(1,"",i._56(t,8,0,i._44(t,9).transform("core.pulltorefresh")),""));e(t,13,0,n.component&&n.method)},function(e,t){e(t,1,0,i._44(t,2).statusbarPadding,i._44(t,2)._hasRefresher);e(t,4,0,"inactive"!==i._44(t,5).state,i._44(t,5)._top);e(t,7,0,i._44(t,8).r.state)})}n.d(t,"a",function(){return w});var i=n(0),l=n(407),a=n(156),s=n(4),u=n(58),c=n(21),d=n(181),f=n(29),p=n(8),h=n(16),m=n(34),_=n(35),g=n(107),v=n(39),y=n(159),b=n(43),P=n(212),O=n(173),E=n(25),C=n(17),I=n(7),R=n(456),S=i._29({encapsulation:2,styles:[],data:{}}),w=i._27("core-site-plugins-course-option",R.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-course-option",[],null,null,null,r,S)),i._30(1,114688,null,0,R.a,[u.a],null,null)],function(e,t){e(t,1,0)},null)},{courseId:"courseId",handlerUniqueName:"handlerUniqueName"},{},[])},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,l.b,l.a)),i._30(1,376832,[[1,4]],0,a.a,[s.a,u.a,[2,c.a],i.F],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"],data:[4,"data"]},null)],function(e,t){var n=t.component;e(t,1,0,n.component,n.method,n.args,n.initResult,n.data)},null)}function r(e){return i._57(0,[i._52(671088640,1,{content:0}),(e()(),i._26(16777216,null,null,1,null,o)),i._30(2,16384,null,0,d.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.component&&n.method)},null)}n.d(t,"a",function(){return m});var i=n(0),l=n(407),a=n(156),s=n(4),u=n(58),c=n(21),d=n(7),f=n(457),p=n(178),h=i._29({encapsulation:2,styles:[],data:{}}),m=i._27("core-site-plugins-course-format",f.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-site-plugins-course-format",[],null,null,null,r,h)),i._30(1,573440,null,0,f.a,[u.a,p.a],null,null)],null,null)},{course:"course",sections:"sections",downloadEnabled:"downloadEnabled",initialSectionId:"initialSectionId",initialSectionNumber:"initialSectionNumber",moduleId:"moduleId",coreCourseFormatComponent:"coreCourseFormatComponent"},{completionChanged:"completionChanged"},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(460),f=n(58),p=n(191),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-site-plugins-user-profile-field",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-user-profile-field",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",signup:"signup",registerAuth:"registerAuth"},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(458),f=n(58),p=n(73),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-site-plugins-question",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-question",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(459),f=n(58),p=n(117),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-site-plugins-question-behaviour",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-question-behaviour",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(461),f=n(58),p=n(129),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-site-plugins-quiz-access-rule",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-quiz-access-rule",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(462),f=n(58),p=n(152),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-site-plugins-assign-feedback",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-assign-feedback",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(463),f=n(58),p=n(166),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-site-plugins-assign-submission",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-site-plugins-assign-submission",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,t,n){var o=!0;if("created"===t){o=!1!==e.component.componentCreated(n)&&o}return o},i.b,i.a)),r._30(1,966656,null,0,l.a,[a.a,r.j,r.t,[2,s.a],r.F,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),r._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.content,n.jsData)},null)}n.d(t,"a",function(){return m});var r=n(0),i=n(219),l=n(193),a=n(155),s=n(21),u=n(4),c=n(2),d=n(677),f=n(58),p=n(192),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("core-siteplugins-workshop-assessment-strategy",d.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"core-siteplugins-workshop-assessment-strategy",[],null,null,null,o,h)),r._30(1,114688,null,0,d.a,[f.a,c.a,p.a],null,null)],function(e,t){e(t,1,0)},null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},i=function(){function e(){this.replacePattern=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])(?![^<]*>|[^<>]*<\/)/gim}return e.prototype.transform=function(e){return e.replace(this.replacePattern,'<a href="$1">$1</a>')},e=r([Object(o.S)({name:"coreCreateLinks"})],e)}()},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,4,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),i._55(-1,null,["\n    "])),(e()(),i._31(2,0,null,null,1,"core-dynamic-component",[],null,null,null,l.b,l.a)),i._30(3,901120,[[1,4]],0,a.a,[s.a,i.o,i.F,[2,u.a],i.j,i.t,c.a],{component:[0,"component"],data:[1,"data"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.componentClass,n.data)},function(e,t){e(t,0,0,i._34(1,"",t.component.class,""))})}function r(e){return i._57(0,[i._52(671088640,1,{dynamicComponent:0}),(e()(),i._55(-1,null,["\n"])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(3,16384,null,0,d.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.loaded&&n.componentClass&&n.block.visible)},null)}n.d(t,"a",function(){return m}),t.b=r;var i=n(0),l=n(723),a=n(198),s=n(6),u=n(21),c=n(4),d=n(7),f=n(390),p=n(60),h=n(9),m=i._29({encapsulation:2,styles:[],data:{}});i._27("core-block",f.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"core-block",[],null,null,null,r,m)),i._30(1,507904,null,0,f.a,[i.C,p.a,i.F,h.a],null,null)],function(e,t){e(t,1,0)},null)},{block:"block",contextLevel:"contextLevel",instanceId:"instanceId",extraData:"extraData"},{},[])},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){}return e.parse=function(e){var t=e.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!t)return null;var n=t[4]||"",o=-1===n.indexOf(":")?[n]:n.split(":");return{protocol:t[2]||void 0,domain:o[0]||void 0,port:o[1]||void 0,path:t[5]||void 0,query:t[7]||void 0,fragment:t[9]||void 0}},e.guessMoodleDomain=function(t){t.match(/^https?:\/\//)||(t="https://"+t);var n=t.match(new RegExp("^https?://(.*?)("+["/my/?","/\\?redirect=0","/index\\.php","/course/view\\.php","/login/index\\.php","/mod/page/view\\.php"].join("|")+")"));if(n)return n[1];var o=e.parse(t);return o&&o.domain?o.domain:null},e}()},function(e,t,n){"use strict";function o(e){return i._57(0,[(e()(),i._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,l.b,l.a)),i._30(1,1097728,null,3,a.a,[s.a,u.a,i.t,i.V,[2,c.a]],null,null),i._52(335544320,2,{contentLabel:0}),i._52(603979776,3,{_buttons:1}),i._52(603979776,4,{_icons:1}),i._30(5,16384,null,0,d.a,[],null,null),(e()(),i._55(-1,2,["\n        "])),(e()(),i._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),i._30(8,16384,[[2,4]],0,f.a,[u.a,i.t,i.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),i._55(9,null,["",""])),i._47(131072,p.a,[h.a,i.j]),(e()(),i._55(-1,2,["\n        "])),(e()(),i._31(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==i._44(e,13)._click(n)&&o}if("ionSelect"===t){o=!1!==r.modePicked(n,e.context.$implicit.key)&&o}return o},m.b,m.a)),i._30(13,245760,null,0,_.a,[s.a,u.a,i.t,i.V,[2,a.a],[2,g.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),i._55(-1,2,["\n    "]))],function(e,t){e(t,13,0,t.context.$implicit.key)},function(e,t){e(t,9,0,i._56(t,9,0,i._44(t,10).transform(t.context.$implicit.langkey)));e(t,12,0,i._44(t,13)._disabled)})}function r(e){return i._57(0,[(e()(),i._31(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.selectedMode=n)&&o}return o},null,null)),i._30(1,1064960,null,1,g.a,[i.V,i.t,i.j],null,null),i._52(335544320,1,{_header:0}),i._50(1024,null,v.l,function(e){return[e]},[g.a]),i._30(4,671744,null,0,v.q,[[8,null],[8,null],[8,null],[2,v.l]],{model:[0,"model"]},{update:"ngModelChange"}),i._50(2048,null,v.m,null,[v.q]),i._30(6,16384,null,0,v.n,[v.m],null,null),i._30(7,16384,null,0,y.a,[u.a,i.t,i.V,b.a,P.l,O.a],null,null),(e()(),i._55(-1,null,["\n    "])),(e()(),i._26(16777216,null,null,1,null,o)),i._30(10,802816,null,0,E.j,[i._11,i._6,i.E],{ngForOf:[0,"ngForOf"]},null),(e()(),i._55(-1,null,["\n"])),(e()(),i._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.selectedMode);e(t,10,0,n.modes)},function(e,t){e(t,0,0,i._44(t,6).ngClassUntouched,i._44(t,6).ngClassTouched,i._44(t,6).ngClassPristine,i._44(t,6).ngClassDirty,i._44(t,6).ngClassValid,i._44(t,6).ngClassInvalid,i._44(t,6).ngClassPending)})}n.d(t,"a",function(){return w});var i=n(0),l=n(30),a=n(20),s=n(19),u=n(8),c=n(27),d=n(33),f=n(67),p=n(25),h=n(17),m=n(176),_=n(145),g=n(137),v=n(23),y=n(86),b=n(16),P=n(43),O=n(34),E=n(7),C=n(653),I=n(69),R=n(39),S=i._29({encapsulation:2,styles:[],data:{}}),w=i._27("addon-mod-glossary-mode-picker-popover",C.a,function(e){return i._57(0,[(e()(),i._31(0,0,null,null,1,"addon-mod-glossary-mode-picker-popover",[],null,null,null,r,S)),i._30(1,49152,null,0,C.a,[I.a,R.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return r._57(0,[(e()(),r._31(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,i.b,i.a)),r._30(1,1097728,null,3,l.a,[a.a,s.a,r.t,r.V,[2,u.a]],null,null),r._52(335544320,1,{contentLabel:0}),r._52(603979776,2,{_buttons:1}),r._52(603979776,3,{_icons:1}),r._30(5,16384,null,0,c.a,[],null,null),(e()(),r._55(6,2,["",""])),r._47(131072,d.a,[f.a,r.j])],null,function(e,t){e(t,6,0,r._56(t,6,0,r._44(t,7).transform("addon.mod_quiz.connectionerror")))})}n.d(t,"a",function(){return m});var r=n(0),i=n(30),l=n(20),a=n(19),s=n(8),u=n(27),c=n(33),d=n(25),f=n(17),p=n(775),h=r._29({encapsulation:2,styles:[],data:{}}),m=r._27("addon-mod-quiz-connection-error",p.a,function(e){return r._57(0,[(e()(),r._31(0,0,null,null,1,"addon-mod-quiz-connection-error",[],null,null,null,o,h)),r._30(1,49152,null,0,p.a,[],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,u.b,u.a)),s._30(1,1097728,null,3,c.a,[d.a,f.a,s.t,s.V,[2,p.a]],null,null),s._52(335544320,1,{contentLabel:0}),s._52(603979776,2,{_buttons:1}),s._52(603979776,3,{_icons:1}),s._30(5,16384,null,0,h.a,[f.a,s.t,s.V],null,null),(e()(),s._55(6,2,["\n            ","\n        "]))],null,function(e,t){e(t,6,0,t.parent.context.$implicit.label)})}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"ion-icon",[["item-end",""],["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(1,147456,[[6,4]],0,m.a,[f.a,s.t,s.V],{name:[0,"name"]},null)],function(e,t){e(t,1,0,"checkmark")},function(e,t){e(t,0,0,s._44(t,1)._hidden)})}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,11,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[1,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.openSubwiki(e.context.$implicit)&&o}return o},u.b,u.a)),s._30(1,278528,null,0,_.i,[s.E,s.F,s.t,s.W],{ngClass:[0,"ngClass"]},null),s._48(2,{"addon-mod_wiki-subwiki-selected":0}),s._30(3,1097728,null,3,c.a,[d.a,f.a,s.t,s.V,[2,p.a]],null,null),s._52(335544320,4,{contentLabel:0}),s._52(603979776,5,{_buttons:1}),s._52(603979776,6,{_icons:1}),s._30(7,16384,null,0,g.a,[],null,null),(e()(),s._55(8,2,["\n            ","\n            "])),(e()(),s._26(16777216,null,4,1,null,r)),s._30(10,16384,null,0,_.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,e(t,2,0,n.isSubwikiSelected(t.context.$implicit)));e(t,10,0,n.isSubwikiSelected(t.context.$implicit))},function(e,t){e(t,0,0,!t.context.$implicit.canedit&&t.context.$implicit.id<=0||null);e(t,8,0,t.context.$implicit.name)})}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),s._55(-1,null,["\n        "])),(e()(),s._26(16777216,null,null,1,null,o)),s._30(3,16384,null,0,_.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._26(16777216,null,null,1,null,i)),s._30(6,802816,null,0,_.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.context.$implicit.label);e(t,6,0,t.context.$implicit.subwikis)},null)}function a(e){return s._57(0,[(e()(),s._31(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),s._30(1,16384,null,0,v.a,[f.a,s.t,s.V,y.a,b.l,P.a],null,null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,l)),s._30(4,802816,null,0,_.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._55(-1,null,["\n"]))],function(e,t){e(t,4,0,t.component.subwikis)},null)}n.d(t,"a",function(){return R});var s=n(0),u=n(30),c=n(20),d=n(19),f=n(8),p=n(27),h=n(100),m=n(47),_=n(7),g=n(33),v=n(86),y=n(16),b=n(43),P=n(34),O=n(668),E=n(69),C=n(39),I=s._29({encapsulation:2,styles:[],data:{}}),R=s._27("addon-mod-wiki-subwiki-picker",O.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"addon-mod-wiki-subwiki-picker",[],null,null,null,a,I)),s._30(1,49152,null,0,O.a,[E.a,C.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return D._57(0,[(e()(),D._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.profile.fullname)})}function r(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"p",[],[[2,"addon-has-overriden-grade",null]],null,null,null,null)),(e()(),D._55(1,null,["\n                ",": ","\n            "])),D._48(2,{$a:0}),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,0,0,n.showGrade(n.submission.submissiongradeover));e(t,1,0,D._56(t,1,0,D._44(t,3).transform("addon.mod_workshop.submissiongradeof",e(t,2,0,n.workshop.grade))),n.submission.submissiongrade)})}function i(e){return D._57(0,[(e()(),D._31(0,0,null,null,2,"p",[["class","addon-overriden-grade"]],null,null,null,null,null)),(e()(),D._55(1,null,["\n                ",": ","\n            "])),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,2).transform("addon.mod_workshop.gradeover")),n.submission.submissiongradeover)})}function l(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["\n                ",": ","\n            "])),D._48(2,{$a:0}),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,3).transform("addon.mod_workshop.gradinggradeof",e(t,2,0,n.workshop.gradinggrade))),n.submission.gradinggrade)})}function a(e){return D._57(0,[(e()(),D._31(0,0,null,null,6,"ion-note",[["item-end",""]],null,null,null,null,null)),D._30(1,16384,null,0,T.a,[x.a,D.t,D.V],null,null),(e()(),D._55(-1,null,["\n                "])),(e()(),D._31(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D._30(4,147456,null,0,M.a,[x.a,D.t,D.V],{name:[0,"name"]},null),(e()(),D._55(5,null,[" ","\n            "])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,4,0,"time")},function(e,t){e(t,3,0,D._44(t,4)._hidden);e(t,5,0,D._56(t,5,0,D._44(t,6).transform("core.notsent")))})}function s(e){return D._57(0,[(e()(),D._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),D._31(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D._30(2,147456,null,0,M.a,[x.a,D.t,D.V],{name:[0,"name"]},null),(e()(),D._55(3,null,[" ",""])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,2,0,"time")},function(e,t){e(t,1,0,D._44(t,2)._hidden);e(t,3,0,D._56(t,3,0,D._44(t,4).transform("core.notsent")))})}function u(e){return D._57(0,[(e()(),D._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),D._31(1,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D._30(2,147456,null,0,M.a,[x.a,D.t,D.V],{name:[0,"name"]},null),(e()(),D._55(3,null,[" ",""])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,2,0,"trash")},function(e,t){e(t,1,0,D._44(t,2)._hidden);e(t,3,0,D._56(t,3,0,D._44(t,4).transform("core.deletedoffline")))})}function c(e){return D._57(0,[(e()(),D._31(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),D._30(1,16384,null,0,T.a,[x.a,D.t,D.V],null,null),(e()(),D._55(2,null,["\n                ","\n                "])),D._49(3,1),(e()(),D._26(16777216,null,null,1,null,s)),D._30(5,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n                "])),(e()(),D._26(16777216,null,null,1,null,u)),D._30(8,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,5,0,n.submission.offline);e(t,8,0,n.submission.deleted)},function(e,t){var n=t.component;e(t,2,0,D._56(t,2,0,e(t,3,0,D._44(t.parent.parent,0),n.submission.timemodified)))})}function d(e){return D._57(0,[(e()(),D._31(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,U.b,U.a)),D._30(1,1097728,null,3,F.a,[L.a,x.a,D.t,D.V,[2,H.a]],null,null),D._52(335544320,4,{contentLabel:0}),D._52(603979776,5,{_buttons:1}),D._52(603979776,6,{_icons:1}),D._30(5,16384,null,0,B.a,[],null,null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._31(7,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),D._30(8,540672,null,0,q.a,[D.t,G.a,V.a,K.a,k.a,W.a,z.a,$.a,Y.a,Q.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,te.a],ne.a,oe.a,re.a,ie.a,le.a,D._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),D._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,n.submission.content,n.component,n.componentId,"module",n.module.id,n.courseId)},null)}function f(e){return D._57(0,[(e()(),D._31(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,ae.b,ae.a)),D._30(1,16384,null,0,se.a,[],null,null),D._30(2,770048,null,0,ue.a,[Z.a,G.a,z.a,X.a,oe.a,[2,te.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null)],function(e,t){var n=t.component;e(t,2,0,n.evaluateByProfile,n.evaluateByProfile.id,n.courseId)},null)}function p(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"h2",[],null,null,null,null,null)),(e()(),D._55(1,null,["",""])),D._48(2,{$a:0}),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,3).transform("addon.mod_workshop.feedbackby",e(t,2,0,n.evaluateByProfile.fullname))))})}function h(e){return D._57(0,[(e()(),D._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,U.b,U.a)),D._30(1,1097728,null,3,F.a,[L.a,x.a,D.t,D.V,[2,H.a]],null,null),D._52(335544320,7,{contentLabel:0}),D._52(603979776,8,{_buttons:1}),D._52(603979776,9,{_icons:1}),D._30(5,16384,null,0,B.a,[],null,null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,0,1,null,f)),D._30(8,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n\n            "])),(e()(),D._26(16777216,null,2,1,null,p)),D._30(11,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._31(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),D._30(14,540672,null,0,q.a,[D.t,G.a,V.a,K.a,k.a,W.a,z.a,$.a,Y.a,Q.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,te.a],ne.a,oe.a,re.a,ie.a,le.a,D._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),D._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,n.evaluateByProfile);e(t,11,0,n.evaluateByProfile&&n.evaluateByProfile.fullname);e(t,14,0,n.submission.feedbackauthor,"module",n.module.id,n.courseId)},null)}function m(e){return D._57(0,[(e()(),D._31(0,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,U.b,U.a)),D._30(1,1097728,null,3,F.a,[L.a,x.a,D.t,D.V,[2,H.a]],null,null),D._52(335544320,10,{contentLabel:0}),D._52(603979776,11,{_buttons:1}),D._52(603979776,12,{_icons:1}),D._30(5,16384,null,0,B.a,[],null,null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._31(7,0,null,2,6,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoSubmission()&&o}return o},ce.b,ce.a)),D._30(8,1097728,[[11,4]],0,de.a,[[8,""],x.a,D.t,D.V],{block:[0,"block"]},null),(e()(),D._55(9,0,["\n                ","\n                "])),D._47(131072,j.a,[k.a,D.j]),(e()(),D._31(11,0,null,0,1,"ion-icon",[["item-end",""],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D._30(12,147456,null,0,M.a,[x.a,D.t,D.V],{name:[0,"name"]},null),(e()(),D._55(-1,0,["\n            "])),(e()(),D._55(-1,2,["\n        "]))],function(e,t){e(t,8,0,"");e(t,12,0,"arrow-forward")},function(e,t){e(t,9,0,D._56(t,9,0,D._44(t,10).transform("core.showmore")));e(t,11,0,D._44(t,12)._hidden)})}function _(e){return D._57(0,[(e()(),D._31(0,0,null,null,47,"div",[],null,null,null,null,null)),(e()(),D._55(-1,null,["\n        "])),(e()(),D._31(2,0,null,null,32,"ion-list-header",[["class","item"],["text-wrap",""]],null,null,null,U.b,U.a)),D._30(3,1097728,null,3,F.a,[L.a,x.a,D.t,D.V,[2,H.a]],null,null),D._52(335544320,1,{contentLabel:0}),D._52(603979776,2,{_buttons:1}),D._52(603979776,3,{_icons:1}),D._30(7,16384,null,0,fe.a,[x.a,D.V,D.t,[8,null]],null,null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._31(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,ae.b,ae.a)),D._30(10,16384,null,0,se.a,[],null,null),D._30(11,770048,null,0,ue.a,[Z.a,G.a,z.a,X.a,oe.a,[2,te.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._31(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),D._31(14,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),D._30(15,540672,null,0,q.a,[D.t,G.a,V.a,K.a,k.a,W.a,z.a,$.a,Y.a,Q.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,te.a],ne.a,oe.a,re.a,ie.a,le.a,D._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,2,1,null,o)),D._30(18,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,2,1,null,r)),D._30(21,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,2,1,null,i)),D._30(24,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,2,1,null,l)),D._30(27,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,4,1,null,a)),D._30(30,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n            "])),(e()(),D._26(16777216,null,4,1,null,c)),D._30(33,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._55(-1,null,["\n        "])),(e()(),D._26(16777216,null,null,1,null,d)),D._30(37,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n        "])),(e()(),D._31(39,0,null,null,1,"core-files",[],null,null,null,pe.b,pe.a)),D._30(40,376832,null,0,he.a,[me.a,z.a,D.F],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),D._55(-1,null,["\n        "])),(e()(),D._26(16777216,null,null,1,null,h)),D._30(43,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n        "])),(e()(),D._26(16777216,null,null,1,null,m)),D._30(46,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,11,0,n.profile,n.profile&&n.profile.id,n.courseId);e(t,15,0,n.submission.title,"module",n.module.id,n.courseId);e(t,18,0,n.profile&&n.profile.fullname);e(t,21,0,n.showGrade(n.submission.submissiongrade));e(t,24,0,n.showGrade(n.submission.submissiongradeover));e(t,27,0,n.access.canviewallsubmissions&&n.showGrade(n.submission.gradinggrade));e(t,30,0,!n.submission.timemodified);e(t,33,0,n.submission.timemodified);e(t,37,0,n.submission.content);e(t,40,0,n.submission.attachmentfiles,n.component,n.componentId);e(t,43,0,n.viewDetails&&n.submission.feedbackauthor);e(t,46,0,n.viewDetails)},null)}function g(e){return D._57(0,[(e()(),D._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.profile.fullname)})}function v(e){return D._57(0,[(e()(),D._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["\n            ",": "," / ","\n        "])),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,2).transform("addon.mod_workshop.receivedgrades")),n.submission.reviewedbycount,n.submission.reviewedby.length)})}function y(e){return D._57(0,[(e()(),D._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["\n            ",": "," / ","\n        "])),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,2).transform("addon.mod_workshop.givengrades")),n.submission.reviewerofcount,n.submission.reviewerof.length)})}function b(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["\n            ",": ","\n        "])),D._48(2,{$a:0}),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,3).transform("addon.mod_workshop.submissiongradeof",e(t,2,0,n.workshop.grade))),n.submission.submissiongrade)})}function P(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"p",[["class","addon-overriden-grade"]],null,null,null,null,null)),(e()(),D._55(1,null,["\n            ",": ","\n        "])),D._48(2,{$a:0}),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,3).transform("addon.mod_workshop.submissiongradeof",e(t,2,0,n.workshop.grade))),n.submission.submissiongradeover)})}function O(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),D._55(1,null,["\n            ",": ","\n        "])),D._48(2,{$a:0}),D._47(131072,j.a,[k.a,D.j])],null,function(e,t){var n=t.component;e(t,1,0,D._56(t,1,0,D._44(t,3).transform("addon.mod_workshop.gradinggradeof",e(t,2,0,n.workshop.gradinggrade))),n.submission.gradinggrade)})}function E(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"ion-badge",[["color","success"]],null,null,null,null,null)),D._30(1,16384,null,0,_e.a,[x.a,D.t,D.V],{color:[0,"color"]},null),(e()(),D._55(2,null,["",""])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,1,0,"success")},function(e,t){e(t,2,0,D._56(t,2,0,D._44(t,3).transform("addon.mod_workshop.assessedsubmission")))})}function C(e){return D._57(0,[(e()(),D._31(0,0,null,null,3,"ion-badge",[["color","danger"]],null,null,null,null,null)),D._30(1,16384,null,0,_e.a,[x.a,D.t,D.V],{color:[0,"color"]},null),(e()(),D._55(2,null,["",""])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,1,0,"danger")},function(e,t){e(t,2,0,D._56(t,2,0,D._44(t,3).transform("addon.mod_workshop.notassessed")))})}function I(e){return D._57(0,[(e()(),D._31(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),D._31(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D._30(2,147456,null,0,M.a,[x.a,D.t,D.V],{name:[0,"name"]},null),(e()(),D._55(3,null,[" ",""])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,2,0,"time")},function(e,t){e(t,1,0,D._44(t,2)._hidden);e(t,3,0,D._56(t,3,0,D._44(t,4).transform("core.notsent")))})}function R(e){return D._57(0,[(e()(),D._31(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),D._31(1,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D._30(2,147456,null,0,M.a,[x.a,D.t,D.V],{name:[0,"name"]},null),(e()(),D._55(3,null,[" ",""])),D._47(131072,j.a,[k.a,D.j])],function(e,t){e(t,2,0,"trash")},function(e,t){e(t,1,0,D._44(t,2)._hidden);e(t,3,0,D._56(t,3,0,D._44(t,4).transform("core.deletedoffline")))})}function S(e){return D._57(0,[(e()(),D._31(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),D._30(1,16384,null,0,T.a,[x.a,D.t,D.V],null,null),(e()(),D._55(2,null,["\n            ","\n            "])),D._49(3,1),(e()(),D._26(16777216,null,null,1,null,I)),D._30(5,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n            "])),(e()(),D._26(16777216,null,null,1,null,R)),D._30(8,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,5,0,n.offline);e(t,8,0,n.submission.deleted)},function(e,t){var n=t.component;e(t,2,0,D._56(t,2,0,e(t,3,0,D._44(t.parent.parent,0),n.submission.timemodified)))})}function w(e){return D._57(0,[(e()(),D._31(0,0,null,null,41,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.gotoSubmission()&&o}return o},U.b,U.a)),D._30(1,1097728,null,3,F.a,[L.a,x.a,D.t,D.V,[2,H.a]],null,null),D._52(335544320,13,{contentLabel:0}),D._52(603979776,14,{_buttons:1}),D._52(603979776,15,{_icons:1}),D._30(5,16384,null,0,B.a,[],null,null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._31(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,ae.b,ae.a)),D._30(8,16384,null,0,se.a,[],null,null),D._30(9,770048,null,0,ue.a,[Z.a,G.a,z.a,X.a,oe.a,[2,te.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),D._55(-1,2,["\n\n        "])),(e()(),D._31(11,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),D._31(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),D._30(13,540672,null,0,q.a,[D.t,G.a,V.a,K.a,k.a,W.a,z.a,$.a,Y.a,Q.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,te.a],ne.a,oe.a,re.a,ie.a,le.a,D._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,g)),D._30(16,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,v)),D._30(19,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,y)),D._30(22,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,b)),D._30(25,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,P)),D._30(28,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,O)),D._30(31,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n\n        "])),(e()(),D._26(16777216,null,2,1,null,E)),D._30(34,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n        "])),(e()(),D._26(16777216,null,2,1,null,C)),D._30(37,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n\n        "])),(e()(),D._26(16777216,null,4,1,null,S)),D._30(40,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,9,0,n.profile,n.profile&&n.profile.id,n.courseId);e(t,13,0,n.submission.title,"module",n.module.id,n.courseId);e(t,16,0,n.profile&&n.profile.fullname);e(t,19,0,n.submission.reviewedbycount);e(t,22,0,n.submission.reviewerofcount);e(t,25,0,!n.showGrade(n.submission.submissiongradeover)&&n.showGrade(n.submission.submissiongrade));e(t,28,0,n.showGrade(n.submission.submissiongradeover));e(t,31,0,n.access.canviewallsubmissions&&n.showGrade(n.submission.gradinggrade));e(t,34,0,n.assessment&&(n.showGrade(n.assessment.grade)||n.assessment.offline));e(t,37,0,n.assessment&&!n.showGrade(n.assessment.grade)&&!n.assessment.offline);e(t,40,0,n.submission.timemodified)},function(e,t){e(t,0,0,!t.component.submission.timemodified||null)})}function A(e){return D._57(0,[D._47(0,ge.a,[Y.a,k.a,ve.a]),(e()(),D._31(1,0,null,null,8,"core-loading",[],null,null,null,ye.b,ye.a)),D._30(2,638976,null,0,be.a,[k.a,D.t,oe.a,z.a],{hideUntil:[0,"hideUntil"]},null),(e()(),D._55(-1,0,["\n    "])),(e()(),D._26(16777216,null,0,1,null,_)),D._30(5,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,0,["\n\n    "])),(e()(),D._26(16777216,null,0,1,null,w)),D._30(8,16384,null,0,N.k,[D._11,D._6],{ngIf:[0,"ngIf"]},null),(e()(),D._55(-1,0,["\n"])),(e()(),D._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.loaded);e(t,5,0,!n.summary);e(t,8,0,n.summary)},null)}n.d(t,"a",function(){return Ie}),t.b=A;var D=n(0),j=n(25),k=n(17),T=n(248),x=n(8),M=n(47),N=n(7),U=n(30),F=n(20),L=n(19),H=n(27),B=n(33),q=n(48),G=n(1),V=n(4),K=n(11),W=n(16),z=n(2),$=n(22),Y=n(6),Q=n(18),X=n(10),J=n(15),Z=n(21),ee=n(29),te=n(28),ne=n(44),oe=n(9),re=n(41),ie=n(32),le=n(36),ae=n(213),se=n(160),ue=n(182),ce=n(45),de=n(42),fe=n(320),pe=n(530),he=n(326),me=n(66),_e=n(143),ge=n(377),ve=n(24),ye=n(54),be=n(51),Pe=n(528),Oe=n(189),Ee=n(202),Ce=n(46),Ie=D._29({encapsulation:2,styles:[],data:{}});D._27("addon-mod-workshop-submission",Pe.a,function(e){return D._57(0,[(e()(),D._31(0,0,null,null,1,"addon-mod-workshop-submission",[],null,null,null,A,Ie)),D._30(1,114688,null,0,Pe.a,[Oe.a,Ee.a,Z.a,Ce.a,G.a],null,null)],function(e,t){e(t,1,0)},null)},{submission:"submission",module:"module",workshop:"workshop",access:"access",courseId:"courseId",assessment:"assessment",summary:"summary"},{},[])},function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.toggleDelete()&&o}return o},u.b,u.a)),s._30(1,1097728,[[1,4]],0,c.a,[[8,""],d.a,s.t,s.V],null,null),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,0,["\n                "])),(e()(),s._31(4,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(5,147456,null,0,h.a,[d.a,s.t,s.V],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),s._55(-1,0,["\n            "]))],function(e,t){e(t,5,0,"create","md-create")},function(e,t){e(t,0,0,s._56(t,0,0,s._44(t,2).transform("core.delete")));e(t,4,0,s._44(t,5)._hidden)})}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),s._30(1,16384,null,0,m.a,[d.a,s.t,s.V],null,null),(e()(),s._55(2,null,["",""]))],null,function(e,t){e(t,2,0,t.parent.context.$implicit.badge)})}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.deleteSite(n,e.parent.context.index)&&o}return o},u.b,u.a)),s._30(1,1097728,[[3,4]],0,c.a,[[8,""],d.a,s.t,s.V],{color:[0,"color"],clear:[1,"clear"]},null),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,0,["\n                "])),(e()(),s._31(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(5,147456,null,0,h.a,[d.a,s.t,s.V],{name:[0,"name"]},null),(e()(),s._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"danger","");e(t,5,0,"trash")},function(e,t){e(t,0,0,s._56(t,0,0,s._44(t,2).transform("core.delete")));e(t,4,0,s._44(t,5)._hidden)})}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,31,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.login(e.context.$implicit.id)&&o}return o},_.b,_.a)),s._30(1,1097728,null,3,g.a,[v.a,d.a,s.t,s.V,[2,y.a]],null,null),s._52(335544320,2,{contentLabel:0}),s._52(603979776,3,{_buttons:1}),s._52(603979776,4,{_icons:1}),s._30(5,16384,null,0,b.a,[],null,null),(e()(),s._55(-1,2,["\n            "])),(e()(),s._31(7,0,null,0,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),s._30(8,16384,null,0,P.a,[],null,null),(e()(),s._55(-1,null,["\n                "])),(e()(),s._31(10,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"alt",0]],null,null,null,null)),s._30(11,4734976,null,0,O.a,[s.t,E.a,C.a,I.a,R.a,S.a,w.a,A.a,D.a],{siteId:[0,"siteId"],src:[1,"src"]},null),s._48(12,{$a:0}),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,null,["\n            "])),(e()(),s._55(-1,2,["\n            "])),(e()(),s._31(16,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),s._55(17,null,["",""])),(e()(),s._55(-1,2,["\n            "])),(e()(),s._31(19,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),s._31(20,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),s._30(21,540672,null,0,j.a,[s.t,R.a,S.a,k.a,p.a,I.a,D.a,w.a,E.a,C.a,A.a,T.a,[2,x.a],[2,M.a],[2,N.a],U.a,F.a,L.a,H.a,B.a,s._11],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(e()(),s._55(-1,2,["\n            "])),(e()(),s._31(23,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),s._55(24,null,["",""])),(e()(),s._55(-1,2,["\n            "])),(e()(),s._26(16777216,null,4,1,null,r)),s._30(27,16384,null,0,q.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,2,["\n            "])),(e()(),s._26(16777216,null,4,1,null,i)),s._30(30,16384,null,0,q.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,11,0,t.context.$implicit.id,t.context.$implicit.avatar);e(t,21,0,t.context.$implicit.siteName,t.context.$implicit.id,"true");e(t,27,0,!n.showDelete&&t.context.$implicit.badge);e(t,30,0,n.showDelete)},function(e,t){e(t,10,0,s._34(1,"",s._56(t,10,0,s._44(t,13).transform("core.pictureof",e(t,12,0,t.context.$implicit.fullname))),""));e(t,17,0,t.context.$implicit.fullName);e(t,24,0,t.context.$implicit.siteUrl)})}function a(e){return s._57(0,[(e()(),s._31(0,0,null,null,29,"ion-header",[],null,null,null,null,null)),s._30(1,16384,null,0,G.a,[d.a,s.t,s.V,[2,V.a]],null,null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._31(3,0,null,null,25,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,K.b,K.a)),s._30(4,49152,null,0,W.a,[z.a,[2,V.a],[2,x.a],d.a,s.t,s.V],null,null),s._30(5,212992,null,0,$.a,[W.a,I.a,p.a,F.a],null,null),(e()(),s._55(-1,3,["\n        "])),(e()(),s._31(7,0,null,3,3,"ion-title",[],null,null,null,Y.b,Y.a)),s._30(8,49152,null,0,Q.a,[d.a,s.t,s.V,[2,X.a],[2,W.a]],null,null),(e()(),s._55(9,0,["",""])),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,3,["\n\n        "])),(e()(),s._31(12,0,null,2,15,"ion-buttons",[["end",""]],null,null,null,null,null)),s._30(13,16384,null,1,J.a,[d.a,s.t,s.V,[2,X.a],[2,W.a]],null,null),s._52(603979776,1,{_buttons:1}),(e()(),s._55(-1,null,["\n            "])),(e()(),s._31(16,0,null,null,7,"button",[["icon-only",""],["ion-button",""],["navPush","CoreAppSettingsPage"]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==s._44(e,18).onClick()&&o}return o},u.b,u.a)),s._30(17,1097728,[[1,4]],0,c.a,[[8,""],d.a,s.t,s.V],null,null),s._30(18,16384,null,0,Z.a,[[2,x.a]],{navPush:[0,"navPush"]},null),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,0,["\n                "])),(e()(),s._31(21,0,null,0,1,"core-icon",[["name","fa-cogs"]],null,null,null,ee.b,ee.a)),s._30(22,704512,null,0,te.a,[s.t,d.a],{name:[0,"name"]},null),(e()(),s._55(-1,0,["\n            "])),(e()(),s._55(-1,null,["\n            "])),(e()(),s._26(16777216,null,null,1,null,o)),s._30(26,16384,null,0,q.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._55(-1,3,["\n    "])),(e()(),s._55(-1,null,["\n"])),(e()(),s._55(-1,null,["\n"])),(e()(),s._31(31,0,null,null,24,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ne.b,ne.a)),s._30(32,4374528,null,0,M.a,[d.a,I.a,oe.a,s.t,s.V,z.a,re.a,s.M,[2,V.a],[2,x.a]],null,null),(e()(),s._55(-1,1,["\n    "])),(e()(),s._31(34,0,null,1,5,"ion-list",[],null,null,null,null,null)),s._30(35,16384,null,0,ie.a,[d.a,s.t,s.V,I.a,le.l,oe.a],null,null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._26(16777216,null,null,1,null,l)),s._30(38,802816,null,0,q.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._55(-1,1,["\n    "])),(e()(),s._31(41,0,null,0,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,ae.b,ae.a)),s._30(42,212992,null,0,se.a,[s.t,M.a],null,null),s._30(43,1228800,null,2,ue.a,[I.a],null,null),s._52(335544320,5,{_mainButton:0}),s._52(603979776,6,{_fabLists:1}),(e()(),s._55(-1,0,["\n        "])),(e()(),s._31(47,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.add()&&o}return o},ce.b,ce.a)),s._30(48,49152,[[5,4]],0,de.a,[d.a,s.t,s.V],null,null),s._47(131072,f.a,[p.a,s.j]),(e()(),s._55(-1,0,["\n            "])),(e()(),s._31(51,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(52,147456,null,0,h.a,[d.a,s.t,s.V],{name:[0,"name"]},null),(e()(),s._55(-1,0,["\n        "])),(e()(),s._55(-1,0,["\n    "])),(e()(),s._55(-1,1,["\n"])),(e()(),s._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0);e(t,18,0,"CoreAppSettingsPage");e(t,22,0,"fa-cogs");e(t,26,0,n.sites&&n.sites.length>0);e(t,38,0,n.sites),e(t,42,0);e(t,52,0,"add")},function(e,t){e(t,3,0,s._44(t,4)._hidden,s._44(t,4)._sbPadding);e(t,9,0,s._56(t,9,0,s._44(t,10).transform("core.settings.sites")));e(t,16,0,s._56(t,16,0,s._44(t,19).transform("core.settings.appsettings")));e(t,31,0,s._44(t,32).statusbarPadding,s._44(t,32)._hasRefresher);e(t,47,0,s._56(t,47,0,s._44(t,49).transform("core.add")));e(t,51,0,s._44(t,52)._hidden)})}n.d(t,"a",function(){return _e});var s=n(0),u=n(45),c=n(42),d=n(8),f=n(25),p=n(17),h=n(47),m=n(143),_=n(30),g=n(20),v=n(19),y=n(27),b=n(33),P=n(160),O=n(229),E=n(6),C=n(18),I=n(16),R=n(1),S=n(4),w=n(22),A=n(10),D=n(2),j=n(48),k=n(11),T=n(15),x=n(21),M=n(29),N=n(28),U=n(44),F=n(9),L=n(41),H=n(32),B=n(36),q=n(7),G=n(370),V=n(39),K=n(721),W=n(211),z=n(35),$=n(473),Y=n(722),Q=n(314),X=n(247),J=n(371),Z=n(230),ee=n(80),te=n(75),ne=n(181),oe=n(34),re=n(107),ie=n(86),le=n(43),ae=n(281),se=n(255),ue=n(218),ce=n(282),de=n(190),fe=n(400),pe=n(125),he=n(136),me=s._29({encapsulation:2,styles:[],data:{}}),_e=s._27("page-core-login-sites",fe.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"page-core-login-sites",[],null,null,null,a,me)),s._30(1,49152,null,0,fe.a,[S.a,L.a,R.a,pe.a,E.a,he.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return s._57(0,[(e()(),s._31(0,0,null,null,23,"ion-item",[["class","addon-calendar-event item item-block"]],null,null,null,u.b,u.a)),s._30(1,278528,null,0,c.i,[s.E,s.F,s.t,s.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),s._46(2,1),s._30(3,1097728,null,3,d.a,[f.a,p.a,s.t,s.V,[2,h.a]],null,null),s._52(335544320,2,{contentLabel:0}),s._52(603979776,3,{_buttons:1}),s._52(603979776,4,{_icons:1}),s._30(7,16384,null,0,m.a,[],null,null),(e()(),s._55(-1,2,["\n        "])),(e()(),s._31(9,0,null,0,1,"core-icon",[["item-start",""]],null,null,null,_.b,_.a)),s._30(10,704512,null,0,g.a,[s.t,p.a],{name:[0,"name"]},null),(e()(),s._55(-1,2,["\n        "])),(e()(),s._31(12,0,null,1,3,"ion-label",[],null,null,null,null,null)),s._30(13,16384,[[2,4]],0,v.a,[p.a,s.t,s.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),s._55(14,null,["",""])),s._47(131072,y.a,[b.a,s.j]),(e()(),s._55(-1,2,["\n        "])),(e()(),s._31(17,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(e,t,n){var o=!0,r=e.component;if("keyup"===t){o=!1!==s._44(e,18)._keyup(n)&&o}if("ngModelChange"===t){o=!1!==(r.types[e.context.$implicit]=n)&&o}if("ionChange"===t){o=!1!==r.onChange(n)&&o}return o},P.b,P.a)),s._30(18,1228800,null,0,O.a,[f.a,p.a,E.a,s.t,s.V,C.a,[2,d.a],I.l,R.a,s.M],null,{ionChange:"ionChange"}),s._50(1024,null,S.l,function(e){return[e]},[O.a]),s._30(20,671744,null,0,S.q,[[8,null],[8,null],[8,null],[2,S.l]],{model:[0,"model"]},{update:"ngModelChange"}),s._50(2048,null,S.m,null,[S.q]),s._30(22,16384,null,0,S.n,[S.m],null,null),(e()(),s._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,1,0,"addon-calendar-event",e(t,2,0,"addon-calendar-eventtype-"+t.context.$implicit));e(t,10,0,n.typeIcons[t.context.$implicit]);e(t,20,0,n.types[t.context.$implicit])},function(e,t){e(t,14,0,s._56(t,14,0,s._44(t,15).transform("addon.calendar."+t.context.$implicit+"events")));e(t,17,0,s._44(t,18)._disabled,s._44(t,18)._value,s._44(t,18)._activated,s._44(t,22).ngClassUntouched,s._44(t,22).ngClassTouched,s._44(t,22).ngClassPristine,s._44(t,22).ngClassDirty,s._44(t,22).ngClassValid,s._44(t,22).ngClassInvalid,s._44(t,22).ngClassPending)})}function r(e){return s._57(0,[(e()(),s._31(0,0,null,null,5,"ion-item-divider",[["class","item item-divider"]],null,null,null,u.b,u.a)),s._30(1,1097728,null,3,d.a,[f.a,p.a,s.t,s.V,[2,h.a]],null,null),s._52(335544320,5,{contentLabel:0}),s._52(603979776,6,{_buttons:1}),s._52(603979776,7,{_icons:1}),s._30(5,16384,null,0,w.a,[p.a,s.t,s.V],null,null)],null,null)}function i(e){return s._57(0,[(e()(),s._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),s._30(1,1097728,null,3,d.a,[f.a,p.a,s.t,s.V,[2,h.a]],null,null),s._52(335544320,9,{contentLabel:0}),s._52(603979776,10,{_buttons:1}),s._52(603979776,11,{_icons:1}),s._30(5,16384,null,0,m.a,[],null,null),(e()(),s._55(-1,2,["\n            "])),(e()(),s._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),s._30(8,16384,[[9,4]],0,v.a,[p.a,s.t,s.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),s._31(9,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),s._30(10,540672,null,0,A.a,[s.t,D.a,j.a,k.a,b.a,E.a,T.a,x.a,M.a,N.a,U.a,F.a,[2,L.a],[2,H.a],[2,B.a],q.a,G.a,V.a,K.a,W.a,s._11],{text:[0,"text"]},null),(e()(),s._55(-1,2,["\n            "])),(e()(),s._31(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==s._44(e,13)._click(n)&&o}if("ionSelect"===t){o=!1!==r.onChange(n)&&o}return o},z.b,z.a)),s._30(13,245760,null,0,$.a,[f.a,p.a,s.t,s.V,[2,d.a],[2,Y.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),s._55(-1,2,["\n        "]))],function(e,t){e(t,10,0,t.context.$implicit.fullname);e(t,13,0,s._34(1,"",t.context.$implicit.id,""))},function(e,t){e(t,12,0,s._44(t,13)._disabled)})}function l(e){return s._57(0,[(e()(),s._31(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.courseId=n)&&o}return o},null,null)),s._30(1,1064960,null,1,Y.a,[s.V,s.t,s.j],null,null),s._52(335544320,8,{_header:0}),s._50(1024,null,S.l,function(e){return[e]},[Y.a]),s._30(4,671744,null,0,S.q,[[8,null],[8,null],[8,null],[2,S.l]],{model:[0,"model"]},{update:"ngModelChange"}),s._50(2048,null,S.m,null,[S.q]),s._30(6,16384,null,0,S.n,[S.m],null,null),s._30(7,16384,null,0,Q.a,[p.a,s.t,s.V,E.a,I.l,R.a],null,null),(e()(),s._55(-1,null,["\n        "])),(e()(),s._26(16777216,null,null,1,null,i)),s._30(10,802816,null,0,c.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,n.courseId);e(t,10,0,n.courses)},function(e,t){e(t,0,0,s._44(t,6).ngClassUntouched,s._44(t,6).ngClassTouched,s._44(t,6).ngClassPristine,s._44(t,6).ngClassDirty,s._44(t,6).ngClassValid,s._44(t,6).ngClassInvalid,s._44(t,6).ngClassPending)})}function a(e){return s._57(0,[(e()(),s._31(0,0,null,null,14,"ion-list",[["radio-group",""],["role","radiogroup"]],null,null,null,null,null)),s._50(5120,null,S.l,function(e){return[e]},[Y.a]),s._30(2,16384,null,0,Q.a,[p.a,s.t,s.V,E.a,I.l,R.a],null,null),s._30(3,1064960,null,1,Y.a,[s.V,s.t,s.j],null,null),s._52(335544320,1,{_header:0}),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,o)),s._30(7,802816,null,0,c.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,r)),s._30(10,16384,null,0,c.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n    "])),(e()(),s._26(16777216,null,null,1,null,l)),s._30(13,16384,null,0,c.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(e()(),s._55(-1,null,["\n"])),(e()(),s._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,7,0,n.typeKeys);e(t,10,0,n.types.course||n.types.category||n.types.group);e(t,13,0,n.types.course||n.types.category||n.types.group)},null)}n.d(t,"a",function(){return ee});var s=n(0),u=n(30),c=n(7),d=n(20),f=n(19),p=n(8),h=n(27),m=n(33),_=n(80),g=n(75),v=n(67),y=n(25),b=n(17),P=n(724),O=n(315),E=n(16),C=n(187),I=n(43),R=n(34),S=n(23),w=n(100),A=n(48),D=n(1),j=n(4),k=n(11),T=n(2),x=n(22),M=n(6),N=n(18),U=n(10),F=n(15),L=n(21),H=n(29),B=n(28),q=n(44),G=n(9),V=n(41),K=n(32),W=n(36),z=n(176),$=n(145),Y=n(137),Q=n(86),X=n(744),J=n(69),Z=s._29({encapsulation:2,styles:[],data:{}}),ee=s._27("addon-calendar-filter-popover",X.a,function(e){return s._57(0,[(e()(),s._31(0,0,null,null,1,"addon-calendar-filter-popover",[],null,null,null,a,Z)),s._30(1,49152,null,0,X.a,[J.a,G.a],null,null)],null,null)},{},{},[])},function(e,t,n){"use strict";function o(e){return Rr._57(0,[Rr._52(402653184,1,{dynamicComponent:0}),(e()(),Rr._31(1,0,null,null,1,"core-dynamic-component",[],null,null,null,Gr.b,Gr.a)),Rr._30(2,901120,[[1,4]],0,Vr.a,[Kr.a,Rr.o,Rr.F,[2,Wr.a],Rr.j,Rr.t,zr.a],{component:[0,"component"],data:[1,"data"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.componentClass,n.data)},null)}function r(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["class","core-h5p-placeholder-play-button"],["clear",""],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.play(n)&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,null,0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{clear:[0,"clear"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._31(3,0,null,0,1,"core-icon",[["name","fa-play-circle"]],null,null,null,bi.b,bi.a)),Rr._30(4,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"]},null),(e()(),Rr._55(-1,0,["\n    "]))],function(e,t){e(t,1,0,"");e(t,4,0,"fa-play-circle")},null)}function i(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"ion-spinner",[["class","core-h5p-placeholder-spinner"]],[[2,"spinner-paused",null]],null,null,Oi.b,Oi.a)),Rr._30(1,114688,null,0,Ei.a,[yi.a,Rr.t,Rr.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Rr._44(t,1)._paused)})}function l(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"div",[["class","core-h5p-placeholder"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,r)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,i)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._31(8,0,null,null,4,"div",[["class","core-h5p-placeholder-download-container"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(10,0,null,null,1,"core-download-refresh",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.download()&&o}return o},Ii.b,Ii.a)),Rr._30(11,49152,null,0,Ri.a,[],{status:[0,"status"],enabled:[1,"enabled"],loading:[2,"loading"],canTrustDownload:[3,"canTrustDownload"]},{action:"action"}),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,!n.loading);e(t,6,0,n.loading);e(t,11,0,n.state,n.canDownload,n.calculating,!0)},null)}function a(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-iframe",[["iframeHeight","auto"]],null,[[null,"loaded"]],function(e,t,n){var o=!0;if("loaded"===t){o=!1!==e.component.iframeLoaded()&&o}return o},Si.b,Si.a)),Rr._30(1,638976,null,0,wi.a,[Kr.a,Ai.a,zr.a,Ir.c,Wr.a,Di.a,ji.a,[2,ki.a]],{src:[0,"src"],iframeHeight:[1,"iframeHeight"],allowFullscreen:[2,"allowFullscreen"]},{loaded:"loaded"})],function(e,t){e(t,1,0,t.component.playerSrc,"auto",!0)},null)}function s(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,l)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,a)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,!n.showPackage);e(t,4,0,n.showPackage)},null)}function u(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["\n        ","\n    "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],null,function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("core.yes")))})}function c(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["\n        ","\n    "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],null,function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("core.no")))})}function d(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._26(16777216,null,2,1,null,u)),Rr._30(11,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._26(16777216,null,2,1,null,c)),Rr._30(14,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,11,0,"0"!=n.field.value);e(t,14,0,"0"==n.field.value)},function(e,t){e(t,8,0,t.component.field.name)})}function f(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,28,"ion-item",[["class","item item-block"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},el.b,el.a)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,1,9,"ion-label",[],null,null,null,null,null)),Rr._30(11,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(13,0,null,null,2,"span",[],null,null,null,al.b,al.a)),Rr._30(14,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(15,0,["",""])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(17,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(18,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(21,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,22)._click(n)&&o}return o},dl.b,dl.a)),Rr._30(22,1228800,null,0,fl.a,[yi.a,nl.a,[2,tl.a],Rr.t,Rr.V],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[fl.a]),Rr._30(24,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(26,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,14,0,n.field.required);e(t,18,0,n.form.controls[n.field.modelName]);e(t,24,0,n.field.modelName)},function(e,t){var n=t.component;e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,15,0,n.field.name);e(t,21,0,Rr._44(t,22)._disabled,Rr._44(t,26).ngClassUntouched,Rr._44(t,26).ngClassTouched,Rr._44(t,26).ngClassPristine,Rr._44(t,26).ngClassDirty,Rr._44(t,26).ngClassValid,Rr._44(t,26).ngClassInvalid,Rr._44(t,26).ngClassPending)})}function p(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,d)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,f)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,!n.edit&&n.field&&n.field.name);e(t,6,0,n.edit&&n.field&&n.field.shortname)},null)}function h(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._55(11,null,["",""])),Rr._49(12,1),(e()(),Rr._55(-1,2,["\n"]))],null,function(e,t){var n=t.component;e(t,8,0,n.field.name);e(t,11,0,Rr._56(t,11,0,e(t,12,0,Rr._44(t.parent,0),1e3*n.field.value)))})}function m(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},el.b,el.a)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,al.b,al.a)),Rr._30(11,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),Rr._30(12,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(13,0,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(15,0,null,3,6,"ion-datetime",[],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,16)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,16)._keyup()&&o}return o},_l.b,_l.a)),Rr._30(16,1228800,null,0,gl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,vl.a]],{min:[0,"min"],max:[1,"max"],displayFormat:[2,"displayFormat"],placeholder:[3,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._50(1024,null,il.l,function(e){return[e]},[gl.a]),Rr._30(19,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(21,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(23,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,ul.b,ul.a)),Rr._30(24,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,12,0,n.field.required);e(t,16,0,n.field.min,n.field.max,n.field.format,Rr._56(t,16,3,Rr._44(t,17).transform("core.choosedots")));e(t,19,0,n.field.modelName);e(t,24,0,n.form.controls[n.field.modelName])},function(e,t){var n=t.component;e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,13,0,n.field.name);e(t,15,0,Rr._44(t,16)._disabled,Rr._44(t,21).ngClassUntouched,Rr._44(t,21).ngClassTouched,Rr._44(t,21).ngClassPristine,Rr._44(t,21).ngClassDirty,Rr._44(t,21).ngClassValid,Rr._44(t,21).ngClassInvalid,Rr._44(t,21).ngClassPending)})}function _(e){return Rr._57(0,[Rr._47(0,yl.a,[Kr.a,bl.a]),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,h)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,m)),Rr._30(7,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,!n.edit&&n.field&&n.field.name);e(t,7,0,n.edit&&n.field&&n.field.shortname)},null)}function g(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(12,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,12,0,n.field.value,n.contextLevel,n.contextInstanceId,n.courseId)},function(e,t){e(t,8,0,t.component.field.name)})}function v(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[7,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit)},function(e,t){e(t,2,0,t.context.$implicit)})}function y(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,35,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},el.b,el.a)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,al.b,al.a)),Rr._30(11,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),Rr._30(12,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(13,0,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(15,0,null,3,16,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,16)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,16)._keyup()&&o}return o},kl.b,kl.a)),Rr._30(16,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),Rr._52(603979776,7,{options:1}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(20,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(22,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(24,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),Rr._30(25,16384,[[7,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(26,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,v)),Rr._30(30,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(33,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,ul.b,ul.a)),Rr._30(34,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,12,0,n.field.required);e(t,16,0,Rr._56(t,16,0,Rr._44(t,18).transform("core.choosedots")),"action-sheet");e(t,20,0,n.field.modelName);e(t,25,0,"");e(t,30,0,n.field.options);e(t,34,0,n.form.controls[n.field.modelName])},function(e,t){var n=t.component;e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,13,0,n.field.name);e(t,15,0,Rr._44(t,16)._disabled,Rr._44(t,22).ngClassUntouched,Rr._44(t,22).ngClassTouched,Rr._44(t,22).ngClassPristine,Rr._44(t,22).ngClassDirty,Rr._44(t,22).ngClassValid,Rr._44(t,22).ngClassInvalid,Rr._44(t,22).ngClassPending);e(t,26,0,Rr._56(t,26,0,Rr._44(t,27).transform("core.choosedots")))})}function b(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,g)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,y)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,!n.edit&&n.field&&n.field.name);e(t,6,0,n.edit&&n.field&&n.field.shortname)},null)}function P(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(12,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,12,0,n.field.value,n.contextLevel,n.contextInstanceId,n.courseId)},function(e,t){e(t,8,0,t.component.field.name)})}function O(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},el.b,el.a)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,al.b,al.a)),Rr._30(11,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),Rr._30(12,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(13,0,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(15,0,null,3,6,"ion-input",[],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(16,540672,null,0,il.j,[],{maxlength:[0,"maxlength"]},null),Rr._50(1024,null,il.k,function(e){return[e]},[il.j]),Rr._30(18,671744,null,0,il.f,[[3,il.b],[2,il.k],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(20,16384,null,0,il.n,[il.m],null,null),Rr._30(21,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(23,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,ul.b,ul.a)),Rr._30(24,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,12,0,n.field.required);e(t,16,0,Rr._34(1,"",n.field.maxlength,""));e(t,18,0,n.field.modelName);e(t,21,0,n.field.inputType,n.field.name);e(t,24,0,n.form.controls[n.field.modelName])},function(e,t){var n=t.component;e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,13,0,n.field.name);e(t,15,0,Rr._44(t,16).maxlength?Rr._44(t,16).maxlength:null,Rr._44(t,20).ngClassUntouched,Rr._44(t,20).ngClassTouched,Rr._44(t,20).ngClassPristine,Rr._44(t,20).ngClassDirty,Rr._44(t,20).ngClassValid,Rr._44(t,20).ngClassInvalid,Rr._44(t,20).ngClassPending)})}function E(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,P)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,O)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,!n.edit&&n.field&&n.field.name);e(t,6,0,n.edit&&n.field&&n.field.shortname)},null)}function C(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(12,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,12,0,n.field.value,n.contextLevel,n.contextInstanceId,n.courseId)},function(e,t){e(t,8,0,t.component.field.name)})}function I(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},el.b,el.a)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,1,9,"ion-label",[["stacked",""]],null,null,null,null,null)),Rr._30(11,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(13,0,null,null,2,"span",[],null,null,null,al.b,al.a)),Rr._30(14,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(15,0,["",""])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(17,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(18,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(21,0,null,3,1,"core-rich-text-editor",[["item-content",""]],null,null,null,Ki.c,Ki.b)),Rr._30(22,1228800,null,0,Kl.a,[zr.a,Di.a,xi.a,Ui.a,[2,Sl.a],Rr.t,Fi.a,ji.a,Il.a,Wl.a],{placeholder:[0,"placeholder"],control:[1,"control"],autoSave:[2,"autoSave"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],elementId:[5,"elementId"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,14,0,n.field.required);e(t,18,0,n.control);e(t,22,0,n.field.name,n.control,!0,n.contextLevel,n.contextInstanceId,"profile_field_"+n.field.shortname)},function(e,t){var n=t.component;e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,15,0,n.field.name)})}function R(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,C)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,I)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,!n.edit&&n.field&&n.field.name);e(t,6,0,n.edit&&n.field&&n.field.shortname)},null)}function S(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,11,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["navPush","CoreCourseListModTypePage"],["text-wrap",""]],[[1,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,6).onClick()&&o}return o},el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),Rr._30(6,16384,null,0,Jl.a,[[2,Wr.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),Rr._48(7,{title:0,courseId:1,modName:2}),Rr._30(8,1064960,null,0,Zl.a,[Jl.a,[2,Ml.a]],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(10,0,null,0,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),Rr._55(11,2,["\n        ","\n    "]))],function(e,t){e(t,6,0,"CoreCourseListModTypePage",e(t,7,0,t.context.$implicit.name,t.component.instanceId,t.context.$implicit.modName))},function(e,t){e(t,0,0,Rr._44(t,8)._href);e(t,10,0,t.context.$implicit.icon);e(t,11,0,t.context.$implicit.name)})}function w(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(12,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,ta.b,ta.a)),Rr._30(13,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,S)),Rr._30(16,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,0,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,13,0,n.loaded);e(t,16,0,n.entries)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.block_activitymodules.pluginname")))})}function A(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.prefetchCourses()&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,[[3,4]],0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),Rr._55(-1,0,["\n            "])),(e()(),Rr._31(3,0,null,0,1,"core-icon",[],null,null,null,bi.b,bi.a)),Rr._30(4,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"]},null),(e()(),Rr._55(-1,0,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,"dark","");e(t,4,0,n.prefetchCoursesData[n.selectedFilter].icon)},null)}function D(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),Rr._30(1,16384,null,0,sa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(2,null,["",""]))],null,function(e,t){var n=t.component;e(t,2,0,n.prefetchCoursesData[n.selectedFilter].badge)})}function j(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Oi.b,Oi.a)),Rr._30(1,114688,null,0,Ei.a,[yi.a,Rr.t,Rr.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Rr._44(t,1)._paused)})}function k(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,A)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,D)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,j)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.prefetchCoursesData[n.selectedFilter]&&n.prefetchCoursesData[n.selectedFilter].icon&&"spinner"!=n.prefetchCoursesData[n.selectedFilter].icon);e(t,6,0,n.prefetchCoursesData[n.selectedFilter].badge);e(t,9,0,!n.prefetchCoursesData[n.selectedFilter].icon||"spinner"==n.prefetchCoursesData[n.selectedFilter].icon)},null)}function T(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-context-menu-item",[["iconAction","funnel"]],null,[[null,"action"],[null,"onClosed"]],function(e,t,n){var o=!0,r=e.component;if("action"===t){o=!1!==r.switchFilter()&&o}if("onClosed"===t){o=!1!==r.switchFilterClosed()&&o}return o},ua.b,ua.a)),Rr._30(1,770048,null,0,ca.a,[da.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action",onClosed:"onClosed"}),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("core.courses.filtermycourses")),"funnel",1e3)},null)}function x(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.switchSort("fullname")&&o}return o},ua.b,ua.a)),Rr._30(1,770048,null,0,ca.a,[da.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,Rr._34(1,"",Rr._56(t,1,0,Rr._44(t,2).transform("core.sortby"))+" "+Rr._56(t,1,0,Rr._44(t,3).transform("addon.block_myoverview.title")),""),"fullname"==n.sort?"radio-button-on":"radio-button-off",900)},null)}function M(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.switchSort("lastaccess")&&o}return o},ua.b,ua.a)),Rr._30(1,770048,null,0,ca.a,[da.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,Rr._34(1,"",Rr._56(t,1,0,Rr._44(t,2).transform("core.sortby"))+" "+Rr._56(t,1,0,Rr._44(t,3).transform("addon.block_myoverview.lastaccessed")),""),"lastaccess"==n.sort?"radio-button-on":"radio-button-off",800)},null)}function N(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","allincludinghidden"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"allincludinghidden")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.allincludinghidden")))})}function U(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","all"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"all")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.all")))})}function F(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","inprogress"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"disabled"==t.component.showFilters.inprogress,"inprogress")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.inprogress")))})}function L(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","future"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"disabled"==t.component.showFilters.future,"future")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.future")))})}function H(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","past"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"disabled"==t.component.showFilters.past,"past")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.past")))})}function B(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(2,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(3,16384,[[5,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(4,null,["",""])),(e()(),Rr._55(-1,null,["\n                "]))],function(e,t){e(t,3,0,Rr._34(1,"custom-",t.context.index,""))},function(e,t){e(t,4,0,t.context.$implicit.name)})}function q(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,B)),Rr._30(3,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n            "]))],function(e,t){e(t,3,0,t.component.customFilter)},null)}function G(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","favourite"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"disabled"==t.component.showFilters.favourite,"favourite")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.favourites")))})}function V(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"ion-option",[["value","hidden"]],null,null,null,null,null)),Rr._30(1,16384,[[5,4]],0,jl.a,[Rr.t],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),Rr._55(2,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"disabled"==t.component.showFilters.hidden,"hidden")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("addon.block_myoverview.hiddencourses")))})}function K(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,fa.b,fa.a)),Rr._30(1,49152,null,0,pa.a,[],{message:[0,"message"],image:[1,"image"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_myoverview.nocourses")),"assets/img/icons/courses.svg")},null)}function W(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,6,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(e,t,n){var o=!0,r=e.component;if("ngModelChange"===t){o=!1!==(r.courses.filter=n)&&o}if("ionInput"===t){o=!1!==r.filterChanged(n)&&o}if("ionCancel"===t){o=!1!==r.filterChanged()&&o}return o},ha.b,ha.a)),Rr._30(1,671744,null,0,il.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(3,16384,null,0,il.n,[il.m],null,null),Rr._30(4,1294336,[[1,4],["searchbar",4]],0,ma.a,[yi.a,Il.a,Rr.t,Rr.V,[2,il.m]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput",ionCancel:"ionCancel"}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){e(t,1,0,t.component.courses.filter);e(t,4,0,Rr._56(t,4,0,Rr._44(t,5).transform("core.courses.filtermycourses")))},function(e,t){e(t,0,1,[Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending,Rr._44(t,4)._animated,Rr._44(t,4)._value,Rr._44(t,4)._isActive,Rr._44(t,4)._showCancelButton,Rr._44(t,4)._shouldAlignLeft,Rr._44(t,4)._isFocus])})}function z(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"ion-col",[["align-self-stretch",""],["class","col"],["col-12",""],["col-lg-4",""],["col-md-6",""],["col-sm-6",""],["col-xl-4",""],["no-padding",""]],null,null,null,null,null)),Rr._30(1,16384,null,0,_a.a,[],null,null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(3,0,null,null,1,"core-courses-course-progress",[["class","core-courseoverview"],["showAll","true"]],null,null,null,ga.b,ga.a)),Rr._30(4,245760,null,0,va.a,[[2,Wr.a],ya.a,zr.a,ra.a,Fi.a,xi.a,ba.a,Pa.a,Oa.a],{course:[0,"course"],showAll:[1,"showAll"],showDownload:[2,"showDownload"]},null),(e()(),Rr._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,4,0,t.context.$implicit,"true",n.downloadCourseEnabled&&n.downloadEnabled)},null)}function $(e){return Rr._57(0,[Rr._52(671088640,1,{searchbar:0}),(e()(),Rr._31(1,0,null,null,27,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(2,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,2,{contentLabel:0}),Rr._52(603979776,3,{_buttons:1}),Rr._52(603979776,4,{_icons:1}),Rr._30(6,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(8,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(9,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._26(16777216,null,4,1,null,k)),Rr._30(14,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(16,0,null,4,11,"core-context-menu",[["item-end",""]],null,null,null,Ea.b,Ea.a)),Rr._30(17,245760,null,0,da.a,[Zi.a,Pa.a,Rr.t,zr.a,[2,Ca.a],ji.a],null,null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._26(16777216,null,0,1,null,T)),Rr._30(20,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._26(16777216,null,0,1,null,x)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._26(16777216,null,0,1,null,M)),Rr._30(26,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(30,0,null,null,62,"core-loading",[["class","core-loading-center"]],null,null,null,ta.b,ta.a)),Rr._30(31,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._31(33,0,null,0,36,"div",[["class","safe-padding-horizontal"],["padding",""]],[[8,"hidden",0]],null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(36,0,null,null,32,"ion-select",[["class","core-button-select"],["interface","popover"],["text-start",""]],[[8,"title",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,37)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,37)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.selectedFilter=n)&&o}if("ngModelChange"===t){o=!1!==r.selectedChanged()&&o}return o},kl.b,kl.a)),Rr._30(37,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{interface:[0,"interface"]},null),Rr._52(603979776,5,{options:1}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(40,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(42,16384,null,0,il.n,[il.m],null,null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,N)),Rr._30(46,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,U)),Rr._30(49,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,F)),Rr._30(52,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,L)),Rr._30(55,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,H)),Rr._30(58,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,q)),Rr._30(61,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,G)),Rr._30(64,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,V)),Rr._30(67,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,K)),Rr._30(72,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n\n    "])),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,W)),Rr._30(76,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._31(79,0,null,0,12,"div",[["class","safe-area-page"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(81,0,null,null,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),Rr._30(82,16384,null,0,Ia.a,[],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(84,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),Rr._30(85,16384,null,0,Ra.a,[],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,z)),Rr._30(88,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,0,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,14,0,n.downloadCoursesEnabled&&n.downloadEnabled&&n.filteredCourses.length>1&&!n.showFilter),e(t,17,0);e(t,20,0,n.loaded&&n.showFilterSwitchButton());e(t,23,0,n.loaded&&n.showSortFilter);e(t,26,0,n.loaded&&n.showSortFilter);e(t,31,0,n.loaded);e(t,37,0,"popover");e(t,40,0,n.selectedFilter);e(t,46,0,"hidden"!=n.showFilters.allincludinghidden);e(t,49,0,"hidden"!=n.showFilters.all);e(t,52,0,"hidden"!=n.showFilters.inprogress);e(t,55,0,"hidden"!=n.showFilters.future);e(t,58,0,"hidden"!=n.showFilters.past);e(t,61,0,"hidden"!=n.showFilters.custom);e(t,64,0,"hidden"!=n.showFilters.favourite);e(t,67,0,"hidden"!=n.showFilters.hidden);e(t,72,0,0==n.filteredCourses.length);e(t,76,0,n.showFilter);e(t,88,0,n.filteredCourses)},function(e,t){var n=t.component;e(t,9,0,Rr._56(t,9,0,Rr._44(t,10).transform("addon.block_myoverview.pluginname")));e(t,33,0,n.showFilter||!n.showSelectorFilter);e(t,36,0,Rr._56(t,36,0,Rr._44(t,43).transform("core.show")),Rr._44(t,37)._disabled,Rr._44(t,42).ngClassUntouched,Rr._44(t,42).ngClassTouched,Rr._44(t,42).ngClassPristine,Rr._44(t,42).ngClassDirty,Rr._44(t,42).ngClassValid,Rr._44(t,42).ngClassInvalid,Rr._44(t,42).ngClassPending)})}function Y(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,16777216,null,2,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),Rr._30(8,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,n.mainMenuBlock.summary,n.component,n.siteHomeId,"course",n.siteHomeId)},null)}function Q(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-course-module",[],null,null,null,Ta.b,Ta.a)),Rr._30(1,245760,null,0,xa.a,[[2,Wr.a],Ma.a,zr.a,ya.a,Fi.a,xi.a,ra.a],{module:[0,"module"],courseId:[1,"courseId"],section:[2,"section"],enabled:[3,"enabled"]},null)],function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,n.siteHomeId,n.mainMenuBlock,n.downloadEnabled)},null)}function X(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Y)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Q)),Rr._30(6,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.mainMenuBlock.summary);e(t,6,0,n.mainMenuBlock.modules)},null)}function J(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(12,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,ta.b,ta.a)),Rr._30(13,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,X)),Rr._30(16,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,13,0,n.loaded);e(t,16,0,n.mainMenuBlock)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.block_sitemainmenu.pluginname")))})}function Z(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,0,0,t.parent.context.$implicit.iconUrl)})}function ee(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(2,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),Rr._30(3,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),Rr._55(-1,null,["\n            "]))],function(e,t){e(t,3,0,t.parent.context.$implicit.course.fullnamedisplay,"course",t.parent.context.$implicit.course.id)},null)}function te(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-badge",[["item-end",""],["margin-start",""]],null,null,null,null,null)),Rr._30(1,16384,null,0,sa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(2,null,["",""]))],null,function(e,t){e(t,2,0,t.parent.parent.context.$implicit.action.itemcount)})}function ne(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["class","hidden-tablet"],["clear",""],["ion-button",""]],[[8,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action(n,e.parent.context.$implicit.action.url)&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,[[5,4]],0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{clear:[0,"clear"]},null),(e()(),Rr._55(2,0,["\n                ","\n                "])),(e()(),Rr._26(16777216,null,0,1,null,te)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"");e(t,4,0,t.parent.context.$implicit.action.showitemcount)},function(e,t){e(t,0,0,t.parent.context.$implicit.action.name,!t.parent.context.$implicit.action.actionable);e(t,2,0,t.parent.context.$implicit.action.name)})}function oe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-badge",[["item-end",""],["margin-start",""]],null,null,null,null,null)),Rr._30(1,16384,null,0,sa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(2,null,["",""]))],null,function(e,t){e(t,2,0,t.parent.parent.context.$implicit.action.itemcount)})}function re(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["class","hidden-phone"],["clear",""],["ion-button",""],["item-end",""]],[[8,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action(n,e.parent.context.$implicit.action.url)&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,[[5,4]],0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{clear:[0,"clear"]},null),(e()(),Rr._55(2,0,["\n                ","\n                "])),(e()(),Rr._26(16777216,null,0,1,null,oe)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"");e(t,4,0,t.parent.context.$implicit.action.showitemcount)},function(e,t){e(t,0,0,t.parent.context.$implicit.action.name,!t.parent.context.$implicit.action.actionable);e(t,2,0,t.parent.context.$implicit.action.name)})}function ie(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,30,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(2,0,null,null,27,"a",[["class","core-course-module-handler item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action(n,e.context.$implicit.url)&&o}return o},el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,0,1,null,Z)),Rr._30(10,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(12,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._31(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,2,1,null,ee)),Rr._30(17,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n\n            "])),(e()(),Rr._26(16777216,null,2,1,null,ne)),Rr._30(20,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n\n            "])),(e()(),Rr._31(22,0,null,4,3,"ion-badge",[["color","light"],["item-end",""]],null,null,null,null,null)),Rr._30(23,16384,null,0,sa.a,[yi.a,Rr.t,Rr.V],{color:[0,"color"]},null),(e()(),Rr._55(24,null,["",""])),Rr._49(25,2),(e()(),Rr._55(-1,2,["\n\n            "])),(e()(),Rr._26(16777216,null,4,1,null,re)),Rr._30(28,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,10,0,t.context.$implicit.iconUrl);e(t,14,0,t.context.$implicit.name,"module",t.context.$implicit.id,t.context.$implicit.course.id);e(t,17,0,n.showCourse);e(t,20,0,t.context.$implicit.action);e(t,23,0,"light");e(t,28,0,t.context.$implicit.action)},function(e,t){e(t,2,0,t.context.$implicit.name);e(t,24,0,Rr._56(t,24,0,e(t,25,0,Rr._44(t.parent.parent,0),1e3*t.context.$implicit.timesort,"strftimetime24")))})}function le(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,17,"ion-item-group",[],null,null,null,null,null)),Rr._30(1,16384,null,0,Ha.a,[],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],{color:[0,"color"]},null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],{color:[0,"color"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(11,null,["",""])),Rr._49(12,2),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,ie)),Rr._30(16,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,4,0,t.context.$implicit.color);e(t,8,0,t.context.$implicit.color);e(t,16,0,t.context.$implicit.events)},function(e,t){e(t,11,0,Rr._56(t,11,0,e(t,12,0,Rr._44(t.parent,0),1e3*t.context.$implicit.dayTimestamp,"strftimedayshort")))})}function ae(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.loadMoreEvents()&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,null,0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{color:[0,"color"],block:[1,"block"]},null),(e()(),Rr._55(2,0,["\n        ","\n    "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"light","")},function(e,t){e(t,2,0,Rr._56(t,2,0,Rr._44(t,3).transform("core.loadmore")))})}function se(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Oi.b,Oi.a)),Rr._30(1,114688,null,0,Ei.a,[yi.a,Rr.t,Rr.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Rr._44(t,1)._paused)})}function ue(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,8,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,ae)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,se)),Rr._30(7,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,!n.loadingMore);e(t,7,0,n.loadingMore)},null)}function ce(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/activities.svg"]],null,null,null,fa.b,fa.a)),Rr._30(1,49152,null,0,pa.a,[],{message:[0,"message"],image:[1,"image"],inline:[2,"inline"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_timeline.noevents")),"assets/img/icons/activities.svg",!n.showCourse)},null)}function de(e){return Rr._57(0,[Rr._47(0,yl.a,[Kr.a,bl.a]),(e()(),Rr._26(16777216,null,null,1,null,le)),Rr._30(2,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,ue)),Rr._30(5,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,ce)),Rr._30(8,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.filteredEvents);e(t,5,0,n.canLoadMore&&!n.empty);e(t,8,0,n.empty)},null)}function fe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.switchSort("sortbydates")&&o}return o},ua.b,ua.a)),Rr._30(1,770048,null,0,ca.a,[da.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_timeline.sortbydates")),"sortbydates"==n.sort?"radio-button-on":"radio-button-off",900)},null)}function pe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,t,n){var o=!0;if("action"===t){o=!1!==e.component.switchSort("sortbycourses")&&o}return o},ua.b,ua.a)),Rr._30(1,770048,null,0,ca.a,[da.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_timeline.sortbycourses")),"sortbycourses"==n.sort?"radio-button-on":"radio-button-off",800)},null)}function he(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,9,"ion-col",[["class","col"],["col-12",""],["col-md-6",""],["no-padding",""]],null,null,null,null,null)),Rr._30(1,16384,null,0,_a.a,[],null,null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(3,0,null,null,5,"core-courses-course-progress",[],null,null,null,ga.b,ga.a)),Rr._30(4,245760,null,0,va.a,[[2,Wr.a],ya.a,zr.a,ra.a,Fi.a,xi.a,ba.a,Pa.a,Oa.a],{course:[0,"course"]},null),(e()(),Rr._55(-1,0,["\n                        "])),(e()(),Rr._31(6,0,null,0,1,"addon-block-timeline-events",[],null,[[null,"loadMore"]],function(e,t,n){var o=!0;if("loadMore"===t){o=!1!==e.component.loadMoreCourse(e.context.$implicit)&&o}return o},de,qa)),Rr._30(7,573440,null,0,Ba.a,[[2,Wr.a],ji.a,Mi.a,zr.a,xi.a,ra.a,Rl.a,bl.a],{events:[0,"events"],from:[1,"from"],to:[2,"to"],canLoadMore:[3,"canLoadMore"]},{loadMore:"loadMore"}),(e()(),Rr._55(-1,0,["\n                    "])),(e()(),Rr._55(-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,4,0,t.context.$implicit);e(t,7,0,t.context.$implicit.events,n.dataFrom,n.dataTo,t.context.$implicit.canLoadMore)},null)}function me(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,fa.b,fa.a)),Rr._30(1,49152,null,0,pa.a,[],{message:[0,"message"],image:[1,"image"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_timeline.nocoursesinprogress")),"assets/img/icons/courses.svg")},null)}function _e(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,20,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(11,0,null,4,8,"core-context-menu",[["item-end",""]],null,null,null,Ea.b,Ea.a)),Rr._30(12,245760,null,0,da.a,[Zi.a,Pa.a,Rr.t,zr.a,[2,Ca.a],ji.a],null,null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._26(16777216,null,0,1,null,fe)),Rr._30(15,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._26(16777216,null,0,1,null,pe)),Rr._30(18,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(22,0,null,null,74,"core-loading",[["class","core-loading-center"]],null,null,null,ta.b,ta.a)),Rr._30(23,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._31(25,0,null,0,45,"div",[["class","safe-padding-horizontal"],["padding",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(27,0,null,null,42,"ion-select",[["class","core-button-select"],["interface","popover"],["text-start",""]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,28)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,28)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.filter=n)&&o}if("ngModelChange"===t){o=!1!==r.switchFilter()&&o}return o},kl.b,kl.a)),Rr._30(28,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{interface:[0,"interface"]},null),Rr._52(603979776,4,{options:1}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(31,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(33,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(35,0,null,null,3,"ion-option",[["value","all"]],null,null,null,null,null)),Rr._30(36,16384,[[4,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(37,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(40,0,null,null,3,"ion-option",[["value","overdue"]],null,null,null,null,null)),Rr._30(41,16384,[[4,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(42,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(45,0,null,null,3,"ion-option",[["disabled",""],["value","disabled"]],null,null,null,null,null)),Rr._30(46,16384,[[4,4]],0,jl.a,[Rr.t],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),Rr._55(47,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(50,0,null,null,3,"ion-option",[["value","next7days"]],null,null,null,null,null)),Rr._30(51,16384,[[4,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(52,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(55,0,null,null,3,"ion-option",[["value","next30days"]],null,null,null,null,null)),Rr._30(56,16384,[[4,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(57,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(60,0,null,null,3,"ion-option",[["value","next3months"]],null,null,null,null,null)),Rr._30(61,16384,[[4,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(62,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(65,0,null,null,3,"ion-option",[["value","next6months"]],null,null,null,null,null)),Rr._30(66,16384,[[4,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(67,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._31(72,0,null,0,5,"core-loading",[["class","core-loading-center"]],[[8,"hidden",0]],null,null,ta.b,ta.a)),Rr._30(73,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._31(75,0,null,0,1,"addon-block-timeline-events",[["showCourse","true"]],null,[[null,"loadMore"]],function(e,t,n){var o=!0;if("loadMore"===t){o=!1!==e.component.loadMoreTimeline()&&o}return o},de,qa)),Rr._30(76,573440,null,0,Ba.a,[[2,Wr.a],ji.a,Mi.a,zr.a,xi.a,ra.a,Rl.a,bl.a],{events:[0,"events"],showCourse:[1,"showCourse"],from:[2,"from"],to:[3,"to"],canLoadMore:[4,"canLoadMore"]},{loadMore:"loadMore"}),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._31(79,0,null,0,16,"core-loading",[["class","core-loading-center safe-area-page"]],[[8,"hidden",0]],null,null,ta.b,ta.a)),Rr._30(80,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._31(82,0,null,0,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),Rr._30(83,16384,null,0,Ia.a,[],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(85,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),Rr._30(86,16384,null,0,Ra.a,[],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,he)),Rr._30(89,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._26(16777216,null,0,1,null,me)),Rr._30(94,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,0,["\n"]))],function(e,t){var n=t.component;e(t,12,0);e(t,15,0,n.loaded);e(t,18,0,n.loaded);e(t,23,0,n.loaded);e(t,28,0,"popover");e(t,31,0,n.filter);e(t,36,0,"all");e(t,41,0,"overdue");e(t,46,0,"","disabled");e(t,51,0,"next7days");e(t,56,0,"next30days");e(t,61,0,"next3months");e(t,66,0,"next6months");e(t,73,0,n.timeline.loaded);e(t,76,0,n.timeline.events,"true",n.dataFrom,n.dataTo,n.timeline.canLoadMore);e(t,80,0,n.timelineCourses.loaded);e(t,89,0,n.timelineCourses.courses);e(t,94,0,0==n.timelineCourses.courses.length)},function(e,t){var n=t.component;e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.block_timeline.pluginname")));e(t,27,0,Rr._44(t,28)._disabled,Rr._44(t,33).ngClassUntouched,Rr._44(t,33).ngClassTouched,Rr._44(t,33).ngClassPristine,Rr._44(t,33).ngClassDirty,Rr._44(t,33).ngClassValid,Rr._44(t,33).ngClassInvalid,Rr._44(t,33).ngClassPending);e(t,37,0,Rr._56(t,37,0,Rr._44(t,38).transform("core.all")));e(t,42,0,Rr._56(t,42,0,Rr._44(t,43).transform("addon.block_timeline.overdue")));e(t,47,0,Rr._56(t,47,0,Rr._44(t,48).transform("addon.block_timeline.duedate")));e(t,52,0,Rr._56(t,52,0,Rr._44(t,53).transform("addon.block_timeline.next7days")));e(t,57,0,Rr._56(t,57,0,Rr._44(t,58).transform("addon.block_timeline.next30days")));e(t,62,0,Rr._56(t,62,0,Rr._44(t,63).transform("addon.block_timeline.next3months")));e(t,67,0,Rr._56(t,67,0,Rr._44(t,68).transform("addon.block_timeline.next6months")));e(t,72,0,"sortbydates"!=n.sort);e(t,79,0,"sortbycourses"!=n.sort)})}function ge(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.prefetchCourses()&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,[[2,4]],0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),Rr._55(-1,0,["\n            "])),(e()(),Rr._31(3,0,null,0,1,"core-icon",[],null,null,null,bi.b,bi.a)),Rr._30(4,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"]},null),(e()(),Rr._55(-1,0,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,"dark","");e(t,4,0,n.prefetchCoursesData.icon)},null)}function ve(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),Rr._30(1,16384,null,0,sa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(2,null,["",""]))],null,function(e,t){e(t,2,0,t.component.prefetchCoursesData.badge)})}function ye(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Oi.b,Oi.a)),Rr._30(1,114688,null,0,Ei.a,[yi.a,Rr.t,Rr.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Rr._44(t,1)._paused)})}function be(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,ge)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,ve)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,ye)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.prefetchCoursesData.icon&&"spinner"!=n.prefetchCoursesData.icon);e(t,6,0,n.prefetchCoursesData.badge);e(t,9,0,!n.prefetchCoursesData.icon||"spinner"==n.prefetchCoursesData.icon)},null)}function Pe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,fa.b,fa.a)),Rr._30(1,49152,null,0,pa.a,[],{message:[0,"message"],image:[1,"image"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_recentlyaccessedcourses.nocourses")),"assets/img/icons/courses.svg")},null)}function Oe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,1,"core-courses-course-progress",[["class","core-recentlyaccessedcourses"]],null,null,null,ga.b,ga.a)),Rr._30(3,245760,null,0,va.a,[[2,Wr.a],ya.a,zr.a,ra.a,Fi.a,xi.a,ba.a,Pa.a,Oa.a],{course:[0,"course"],showDownload:[1,"showDownload"]},null),(e()(),Rr._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,t.context.$implicit,n.downloadCourseEnabled&&n.downloadEnabled)},null)}function Ee(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._26(16777216,null,4,1,null,be)),Rr._30(12,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(15,0,null,null,12,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,ta.b,ta.a)),Rr._30(16,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,Pe)),Rr._30(19,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,0,["\n     "])),(e()(),Rr._31(22,0,null,0,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Oe)),Rr._30(25,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,0,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,12,0,n.downloadCoursesEnabled&&n.downloadEnabled&&n.courses&&n.courses.length>1);e(t,16,0,n.loaded);e(t,19,0,0==n.courses.length);e(t,25,0,n.courses)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.block_recentlyaccessedcourses.pluginname")))})}function Ce(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,0,0,t.parent.context.$implicit.iconUrl)})}function Ie(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,21,"ion-card",[],null,null,null,null,null)),Rr._30(3,16384,null,0,Xa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(5,0,null,null,17,"a",[["class","core-course-module-handler item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.action(n,e.context.$implicit)&&o}return o},el.b,el.a)),Rr._30(6,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(10,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n                    "])),(e()(),Rr._26(16777216,null,0,1,null,Ce)),Rr._30(13,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n                    "])),(e()(),Rr._31(15,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._31(16,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(17,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n                    "])),(e()(),Rr._31(19,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(20,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),Rr._30(21,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,null,["\n        "]))],function(e,t){e(t,13,0,t.context.$implicit.iconUrl);e(t,17,0,t.context.$implicit.name,"module",t.context.$implicit.cmid,t.context.$implicit.courseid);e(t,21,0,t.context.$implicit.coursename,"course",t.context.$implicit.courseid)},function(e,t){e(t,5,0,t.context.$implicit.name)})}function Re(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Ie)),Rr._30(3,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.items)},null)}function Se(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/activities.svg"]],null,null,null,fa.b,fa.a)),Rr._30(1,49152,null,0,pa.a,[],{message:[0,"message"],image:[1,"image"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_recentlyaccesseditems.noitems")),"assets/img/icons/activities.svg")},null)}function we(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(12,0,null,null,8,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,ta.b,ta.a)),Rr._30(13,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,Re)),Rr._30(16,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n\n    "])),(e()(),Rr._26(16777216,null,0,1,null,Se)),Rr._30(19,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,13,0,n.loaded);e(t,16,0,n.items&&n.items.length>0);e(t,19,0,n.items.length<=0)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.block_recentlyaccesseditems.pluginname")))})}function Ae(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.prefetchCourses()&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,[[2,4]],0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),Rr._55(-1,0,["\n            "])),(e()(),Rr._31(3,0,null,0,1,"core-icon",[],null,null,null,bi.b,bi.a)),Rr._30(4,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"]},null),(e()(),Rr._55(-1,0,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,"dark","");e(t,4,0,n.prefetchCoursesData.icon)},null)}function De(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),Rr._30(1,16384,null,0,sa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(2,null,["",""]))],null,function(e,t){e(t,2,0,t.component.prefetchCoursesData.badge)})}function je(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Oi.b,Oi.a)),Rr._30(1,114688,null,0,Ei.a,[yi.a,Rr.t,Rr.V],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Rr._44(t,1)._paused)})}function ke(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Ae)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,De)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,je)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,n.prefetchCoursesData.icon&&"spinner"!=n.prefetchCoursesData.icon);e(t,6,0,n.prefetchCoursesData.badge);e(t,9,0,!n.prefetchCoursesData.icon||"spinner"==n.prefetchCoursesData.icon)},null)}function Te(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,fa.b,fa.a)),Rr._30(1,49152,null,0,pa.a,[],{message:[0,"message"],image:[1,"image"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,Rr._56(t,1,0,Rr._44(t,2).transform("addon.block_starredcourses.nocourses")),"assets/img/icons/courses.svg")},null)}function xe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,1,"core-courses-course-progress",[["class","core-block_starredcourses"]],null,null,null,ga.b,ga.a)),Rr._30(3,245760,null,0,va.a,[[2,Wr.a],ya.a,zr.a,ra.a,Fi.a,xi.a,ba.a,Pa.a,Oa.a],{course:[0,"course"],showDownload:[1,"showDownload"]},null),(e()(),Rr._55(-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,3,0,t.context.$implicit,n.downloadCourseEnabled&&n.downloadEnabled)},null)}function Me(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item-divider",[["class","item item-divider"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._26(16777216,null,4,1,null,ke)),Rr._30(12,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(15,0,null,null,12,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,ta.b,ta.a)),Rr._30(16,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._26(16777216,null,0,1,null,Te)),Rr._30(19,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._31(22,0,null,0,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,xe)),Rr._30(25,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,0,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,12,0,n.downloadCoursesEnabled&&n.downloadEnabled&&n.courses&&n.courses.length>1);e(t,16,0,n.loaded);e(t,19,0,0==n.courses.length);e(t,25,0,n.courses)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.block_starredcourses.pluginname")))})}function Ne(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.showComments(n)&&o}return o},el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,2,{contentLabel:0}),Rr._52(603979776,3,{_buttons:1}),Rr._52(603979776,4,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,1,"core-comments",[["area","submission_comments"],["component","assignsubmission_comments"],["contextLevel","module"]],null,null,null,Wi.c,Wi.b)),Rr._30(11,770048,[[1,4]],0,is.a,[Wr.a,ls.a,xi.a,Fi.a,[2,ki.a]],{contextLevel:[0,"contextLevel"],instanceId:[1,"instanceId"],component:[2,"component"],itemId:[3,"itemId"],area:[4,"area"],title:[5,"title"],courseId:[6,"courseId"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,11,0,"module",n.assign.cmid,"assignsubmission_comments",n.submission.id,"submission_comments",n.plugin.name,n.assign.course)},function(e,t){e(t,8,0,t.component.plugin.name)})}function Ue(e){return Rr._57(0,[Rr._52(671088640,1,{commentsComponent:0}),(e()(),Rr._26(16777216,null,null,1,null,Ne)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,2,0,t.component.commentsEnabled)},null)}function Fe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(12,0,null,null,1,"core-files",[],null,null,null,cs.b,cs.a)),Rr._30(13,376832,null,0,ds.a,[fs.a,ji.a,Rr.F],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,13,0,n.files,n.component,n.assign.cmid,!0)},function(e,t){e(t,8,0,t.component.plugin.name)})}function Le(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(7,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(8,2,["",""])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(10,0,null,null,1,"core-attachments",[],null,null,null,ps.b,ps.a)),Rr._30(11,114688,null,0,hs.a,[Li.a,zr.a,Mi.a,ms.a,Zi.a,_s.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"],acceptedTypes:[6,"acceptedTypes"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.files,n.configs.maxsubmissionsizebytes,n.configs.maxfilesubmissions,n.component,n.assign.cmid,n.allowOffline,n.configs.filetypeslist)},function(e,t){e(t,8,0,t.component.plugin.name)})}function He(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,Fe)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,Le)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.files&&n.files.length&&!n.edit);e(t,6,0,n.edit)},null)}function Be(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""])),Rr._48(2,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],null,function(e,t){var n=t.component;e(t,1,0,Rr._56(t,1,0,Rr._44(t,3).transform("addon.mod_assign.numwords",e(t,2,0,n.words))))})}function qe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._26(16777216,null,2,1,null,Be)),Rr._30(11,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(13,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(15,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(16,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],fullTitle:[5,"fullTitle"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],courseId:[8,"courseId"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.words);e(t,16,0,n.text,n.component,n.assign.cmid,80,!0,n.plugin.name,"module",n.assign.cmid,n.assign.course)},function(e,t){e(t,8,0,t.component.plugin.name)})}function Ge(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,7,{contentLabel:0}),Rr._52(603979776,8,{_buttons:1}),Rr._52(603979776,9,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),Rr._55(12,null,["",""])),Rr._48(13,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "]))],null,function(e,t){var n=t.component;e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.mod_assign.wordlimit")));e(t,12,0,Rr._56(t,12,0,Rr._44(t,14).transform("core.numwords",e(t,13,0,n.words+" / "+n.configs.wordlimit))))})}function Ve(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(7,16384,null,0,ea.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(8,2,["",""])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Ge)),Rr._30(11,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(13,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(14,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,10,{contentLabel:0}),Rr._52(603979776,11,{_buttons:1}),Rr._52(603979776,12,{_icons:1}),Rr._30(18,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(20,0,null,3,2,"core-rich-text-editor",[["contextLevel","module"],["elementId","onlinetext_editor"],["item-content",""],["name","onlinetext_editor_text"]],null,[[null,"contentChanged"]],function(e,t,n){var o=!0;if("contentChanged"===t){o=!1!==e.component.onChange(n)&&o}return o},Ki.c,Ki.b)),Rr._30(21,1228800,null,0,Kl.a,[zr.a,Di.a,xi.a,Ui.a,[2,Sl.a],Rr.t,Fi.a,ji.a,Il.a,Wl.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"],autoSave:[5,"autoSave"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],elementId:[8,"elementId"],draftExtraParams:[9,"draftExtraParams"]},{contentChanged:"contentChanged"}),Rr._48(22,{userid:0,action:1}),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.wordLimitEnabled&&n.words>=0);e(t,21,0,n.plugin.name,n.control,"onlinetext_editor_text",n.component,n.assign.cmid,!0,"module",n.assign.cmid,"onlinetext_editor",e(t,22,0,n.currentUserId,"editsubmission"))},function(e,t){e(t,8,0,t.component.plugin.name)})}function Ke(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,qe)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,Ve)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,!n.edit&&n.text);e(t,6,0,n.edit&&n.loaded)},null)}function We(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.editComment()&&o}return o},gi.b,gi.a)),Rr._30(1,1097728,[[2,4]],0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),Rr._55(-1,0,["\n                "])),(e()(),Rr._31(3,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Rr._30(4,147456,null,0,Ss.a,[yi.a,Rr.t,Rr.V],{name:[0,"name"]},null),(e()(),Rr._55(-1,0,["\n            "]))],function(e,t){e(t,1,0,"dark","");e(t,4,0,"create")},function(e,t){e(t,3,0,Rr._44(t,4)._hidden)})}function ze(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,6,"ion-note",[["color","dark"]],null,null,null,null,null)),Rr._30(1,16384,null,0,ws.a,[yi.a,Rr.t,Rr.V],{color:[0,"color"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Rr._30(4,147456,null,0,Ss.a,[yi.a,Rr.t,Rr.V],{name:[0,"name"]},null),(e()(),Rr._55(5,null,["\n            ","\n        "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,1,0,"dark");e(t,4,0,"time")},function(e,t){e(t,3,0,Rr._44(t,4)._hidden);e(t,5,0,Rr._56(t,5,0,Rr._44(t,6).transform("core.notsent")))})}function $e(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(13,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],fullTitle:[5,"fullTitle"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],courseId:[8,"courseId"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(16,0,null,4,10,"div",[["item-end",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(18,0,null,null,4,"div",[["text-end",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,We)),Rr._30(21,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,ze)),Rr._30(25,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,13,0,n.text,n.component,n.assign.cmid,80,!0,n.plugin.name,"module",n.assign.cmid,n.assign.course);e(t,21,0,n.canEdit);e(t,25,0,!n.isSent)},function(e,t){e(t,8,0,t.component.plugin.name)})}function Ye(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,3,3,"core-rich-text-editor",[["contextLevel","module"],["elementId","assignfeedbackcomments_editor"],["item-content",""],["name","assignfeedbackcomments_editor"]],null,null,null,Ki.c,Ki.b)),Rr._30(8,1228800,null,0,Kl.a,[zr.a,Di.a,xi.a,Ui.a,[2,Sl.a],Rr.t,Fi.a,ji.a,Il.a,Wl.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"],autoSave:[5,"autoSave"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],elementId:[8,"elementId"],draftExtraParams:[9,"draftExtraParams"]},null),Rr._48(9,{userid:0,action:1}),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,8,0,n.plugin.name,n.control,"assignfeedbackcomments_editor",n.component,n.assign.cmid,!0,"module",n.assign.cmid,"assignfeedbackcomments_editor",e(t,9,0,n.userId,"grade"))},null)}function Qe(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,$e)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,Ye)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,(n.text||n.canEdit)&&!n.edit);e(t,6,0,n.edit&&n.loaded)},null)}function Xe(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-file",[],null,null,null,xs.b,xs.a)),Rr._30(1,245760,null,0,Ms.a,[xi.a,ji.a,zr.a,Ui.a,Li.a,qi.a,fs.a,Fi.a,Mi.a,Hi.a,Di.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,n.component,n.assign.cmid,!0)},null)}function Je(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Xe)),Rr._30(13,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){e(t,13,0,t.component.files)},function(e,t){e(t,8,0,t.component.plugin.name)})}function Ze(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,Je)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.files&&n.files.length)},null)}function et(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-file",[],null,null,null,xs.b,xs.a)),Rr._30(1,245760,null,0,Ms.a,[xi.a,ji.a,zr.a,Ui.a,Li.a,qi.a,fs.a,Fi.a,Mi.a,Hi.a,Di.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,n.component,n.assign.cmid,!0)},null)}function tt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,et)),Rr._30(13,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){e(t,13,0,t.component.files)},function(e,t){e(t,8,0,t.component.plugin.name)})}function nt(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(16777216,null,null,1,null,tt)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.files&&n.files.length)},null)}function ot(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function rt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[1,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.value)},function(e,t){e(t,2,0,t.context.$implicit.key)})}function it(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function lt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,2,{contentLabel:0}),Rr._52(603979776,3,{_buttons:1}),Rr._52(603979776,4,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[2,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,13)._click(n)&&o}if("ngModelChange"===t){o=!1!==(r.search["f_"+r.field.id+"_allreq"]=n)&&o}return o},dl.b,dl.a)),Rr._30(13,1228800,null,0,fl.a,[yi.a,nl.a,[2,tl.a],Rr.t,Rr.V],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[fl.a]),Rr._30(15,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(17,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,15,0,"f_"+n.field.id+"_allreq",n.search["f_"+n.field.id+"_allreq"])},function(e,t){e(t,9,0,Rr._56(t,9,0,Rr._44(t,10).transform("addon.mod_data.selectedrequired")));e(t,12,0,Rr._44(t,13)._disabled,Rr._44(t,17).ngClassUntouched,Rr._44(t,17).ngClassTouched,Rr._44(t,17).ngClassPristine,Rr._44(t,17).ngClassDirty,Rr._44(t,17).ngClassValid,Rr._44(t,17).ngClassInvalid,Rr._44(t,17).ngClassPending)})}function at(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,27,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,ot)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,12,"ion-select",[["interface","action-sheet"],["multiple","true"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,9)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,9)._keyup()&&o}return o},kl.b,kl.a)),Rr._30(9,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"],multiple:[3,"multiple"]},null),Rr._52(603979776,1,{options:1}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._48(12,{title:0}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(14,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(16,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,rt)),Rr._30(19,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,it)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,lt)),Rr._30(26,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,Rr._56(t,9,0,Rr._44(t,11).transform("addon.mod_data.menuchoose")),e(t,12,0,n.field.name),"action-sheet","true");e(t,14,0,"f_"+n.field.id);e(t,19,0,n.options);e(t,23,0,n.error&&"edit"==n.mode);e(t,26,0,"search"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,9)._disabled,Rr._44(t,16).ngClassUntouched,Rr._44(t,16).ngClassTouched,Rr._44(t,16).ngClassPristine,Rr._44(t,16).ngClassDirty,Rr._44(t,16).ngClassValid,Rr._44(t,16).ngClassInvalid,Rr._44(t,16).ngClassPending)})}function st(e){return Rr._57(0,[(e()(),Rr._31(0,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(1,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),Rr._26(0,null,null,0))],function(e,t){e(t,1,0,t.component.value.content,!1)},null)}function ut(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,at)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,st)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function ct(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function dt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function ft(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[1,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,13)._click(n)&&o}if("ngModelChange"===t){o=!1!==(r.search["f_"+r.field.id+"_z"]=n)&&o}return o},dl.b,dl.a)),Rr._30(13,1228800,null,0,fl.a,[yi.a,nl.a,[2,tl.a],Rr.t,Rr.V],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[fl.a]),Rr._30(15,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(17,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,15,0,"f_"+n.field.id+"_z",n.search["f_"+n.field.id+"_z"])},function(e,t){e(t,9,0,Rr._56(t,9,0,Rr._44(t,10).transform("addon.mod_data.usedate")));e(t,12,0,Rr._44(t,13)._disabled,Rr._44(t,17).ngClassUntouched,Rr._44(t,17).ngClassTouched,Rr._44(t,17).ngClassPristine,Rr._44(t,17).ngClassDirty,Rr._44(t,17).ngClassValid,Rr._44(t,17).ngClassInvalid,Rr._44(t,17).ngClassPending)})}function pt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,21,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,ct)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,6,"ion-datetime",[],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,9)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,9)._keyup()&&o}return o},_l.b,_l.a)),Rr._30(9,1228800,null,0,gl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,vl.a]],{disabled:[0,"disabled"],displayFormat:[1,"displayFormat"],placeholder:[2,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._50(1024,null,il.l,function(e){return[e]},[gl.a]),Rr._30(12,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(14,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,dt)),Rr._30(17,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,ft)),Rr._30(20,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,"search"==n.mode&&!n.search["f_"+n.field.id+"_z"],n.format,Rr._56(t,9,2,Rr._44(t,10).transform("core.date")));e(t,12,0,"f_"+n.field.id,"search"==n.mode&&!n.search["f_"+n.field.id+"_z"]);e(t,17,0,n.error&&"edit"==n.mode);e(t,20,0,"search"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,9)._disabled,Rr._44(t,14).ngClassUntouched,Rr._44(t,14).ngClassTouched,Rr._44(t,14).ngClassPristine,Rr._44(t,14).ngClassDirty,Rr._44(t,14).ngClassValid,Rr._44(t,14).ngClassInvalid,Rr._44(t,14).ngClassPending)})}function ht(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""])),Rr._49(2,2)],null,function(e,t){var n=t.component;e(t,1,0,Rr._56(t,1,0,e(t,2,0,Rr._44(t.parent,0),1e3*n.value.content,"strftimedate")))})}function mt(e){return Rr._57(0,[Rr._47(0,yl.a,[Kr.a,bl.a]),(e()(),Rr._26(16777216,null,null,1,null,pt)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,ht)),Rr._30(5,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"]))],function(e,t){var n=t.component;e(t,2,0,!n.isShowOrListMode());e(t,5,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function _t(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{errorText:[0,"errorText"]},null)],function(e,t){e(t,1,0,t.component.error)},null)}function gt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(3,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(5,0,null,null,1,"core-attachments",[["maxSubmissions","1"]],null,null,null,ps.b,ps.a)),Rr._30(6,114688,null,0,hs.a,[Li.a,zr.a,Mi.a,ms.a,Zi.a,_s.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,_t)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.field.required);e(t,6,0,n.files,n.maxSizeBytes,"1",n.component,n.componentId,!0);e(t,9,0,n.error)},null)}function vt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(5,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(6,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(8,16384,null,0,il.n,[il.m],null,null),Rr._30(9,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"f_"+n.field.id);e(t,9,0,"text",n.field.name)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,5,0,Rr._44(t,8).ngClassUntouched,Rr._44(t,8).ngClassTouched,Rr._44(t,8).ngClassPristine,Rr._44(t,8).ngClassDirty,Rr._44(t,8).ngClassValid,Rr._44(t,8).ngClassInvalid,Rr._44(t,8).ngClassPending)})}function yt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(4,0,null,null,1,"core-files",[],null,null,null,cs.b,cs.a)),Rr._30(5,376832,null,0,ds.a,[fs.a,ji.a,Rr.F],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.files,n.component,n.componentId,!0)},null)}function bt(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,gt)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,vt)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,yt)),Rr._30(7,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,"edit"==n.mode);e(t,4,0,"search"==n.mode);e(t,7,0,n.isShowOrListMode())},null)}function Pt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(1,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(3,16384,null,0,il.n,[il.m],null,null),Rr._30(4,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null)],function(e,t){var n=t.component;e(t,1,0,"f_"+n.field.id);e(t,4,0,"text",n.field.name)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending)})}function Ot(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function Et(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(2,0,null,null,6,"ion-input",[["maxlength","10"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(3,540672,null,0,il.j,[],{maxlength:[0,"maxlength"]},null),Rr._50(1024,null,il.k,function(e){return[e]},[il.j]),Rr._30(5,671744,null,0,il.f,[[3,il.b],[2,il.k],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(7,16384,null,0,il.n,[il.m],null,null),Rr._30(8,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(10,0,null,null,1,"span",[["class","placeholder-icon"],["item-right",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["N"])),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,"10");e(t,5,0,"f_"+n.field.id+"_0");e(t,8,0,"text")},function(e,t){e(t,2,0,Rr._44(t,3).maxlength?Rr._44(t,3).maxlength:null,Rr._44(t,7).ngClassUntouched,Rr._44(t,7).ngClassTouched,Rr._44(t,7).ngClassPristine,Rr._44(t,7).ngClassDirty,Rr._44(t,7).ngClassValid,Rr._44(t,7).ngClassInvalid,Rr._44(t,7).ngClassPending)})}function Ct(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(2,0,null,null,6,"ion-input",[["maxlength","10"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(3,540672,null,0,il.j,[],{maxlength:[0,"maxlength"]},null),Rr._50(1024,null,il.k,function(e){return[e]},[il.j]),Rr._30(5,671744,null,0,il.f,[[3,il.b],[2,il.k],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(7,16384,null,0,il.n,[il.m],null,null),Rr._30(8,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(10,0,null,null,1,"span",[["class","placeholder-icon"],["item-right",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["E"])),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,3,0,"10");e(t,5,0,"f_"+n.field.id+"_1");e(t,8,0,"text")},function(e,t){e(t,2,0,Rr._44(t,3).maxlength?Rr._44(t,3).maxlength:null,Rr._44(t,7).ngClassUntouched,Rr._44(t,7).ngClassTouched,Rr._44(t,7).ngClassPristine,Rr._44(t,7).ngClassDirty,Rr._44(t,7).ngClassValid,Rr._44(t,7).ngClassInvalid,Rr._44(t,7).ngClassPending)})}function It(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,9,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(2,0,null,null,6,"button",[["icon-left",""],["ion-button",""]],null,[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.getLocation(n)&&o}return o},gi.b,gi.a)),Rr._30(3,1097728,null,0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,0,["\n            "])),(e()(),Rr._31(5,0,null,0,1,"ion-icon",[["name","locate"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Rr._30(6,147456,null,0,Ss.a,[yi.a,Rr.t,Rr.V],{name:[0,"name"]},null),(e()(),Rr._55(7,0,["\n            ","\n        "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){e(t,6,0,"locate")},function(e,t){e(t,5,0,Rr._44(t,6)._hidden);e(t,7,0,Rr._56(t,7,0,Rr._44(t,8).transform("addon.mod_data.mylocation")))})}function Rt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function St(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,22,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Pt)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Ot)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Et)),Rr._30(12,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Ct)),Rr._30(15,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,It)),Rr._30(18,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Rt)),Rr._30(21,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"search"==n.mode);e(t,9,0,"edit"==n.mode);e(t,12,0,"edit"==n.mode);e(t,15,0,"edit"==n.mode);e(t,18,0,"edit"==n.mode&&n.showGeolocation);e(t,21,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending)})}function wt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),Rr._55(3,null,["",""])),(e()(),Rr._55(-1,null,["\n"]))],null,function(e,t){var n=t.component;e(t,2,0,n.getLatLongLink(n.north,n.east));e(t,3,0,n.formatLatLong(n.north,n.east))})}function At(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,St)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,wt)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value)},null)}function Dt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function jt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[1,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit)},function(e,t){e(t,2,0,t.context.$implicit)})}function kt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function Tt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,29,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Dt)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,17,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,9)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,9)._keyup()&&o}return o},kl.b,kl.a)),Rr._30(9,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"]},null),Rr._52(603979776,1,{options:1}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._48(12,{title:0}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(14,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(16,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(18,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),Rr._30(19,16384,[[1,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(20,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,jt)),Rr._30(24,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,kt)),Rr._30(28,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,Rr._56(t,9,0,Rr._44(t,11).transform("addon.mod_data.menuchoose")),e(t,12,0,n.field.name),"action-sheet");e(t,14,0,"f_"+n.field.id);e(t,19,0,"");e(t,24,0,n.options);e(t,28,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,9)._disabled,Rr._44(t,16).ngClassUntouched,Rr._44(t,16).ngClassTouched,Rr._44(t,16).ngClassPristine,Rr._44(t,16).ngClassDirty,Rr._44(t,16).ngClassValid,Rr._44(t,16).ngClassInvalid,Rr._44(t,16).ngClassPending);e(t,20,0,Rr._56(t,20,0,Rr._44(t,21).transform("addon.mod_data.menuchoose")))})}function xt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.value.content)})}function Mt(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Tt)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,xt)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function Nt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function Ut(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[1,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.value)},function(e,t){e(t,2,0,t.context.$implicit.key)})}function Ft(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function Lt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,2,{contentLabel:0}),Rr._52(603979776,3,{_buttons:1}),Rr._52(603979776,4,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[2,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,13)._click(n)&&o}if("ngModelChange"===t){o=!1!==(r.search["f_"+r.field.id+"_allreq"]=n)&&o}return o},dl.b,dl.a)),Rr._30(13,1228800,null,0,fl.a,[yi.a,nl.a,[2,tl.a],Rr.t,Rr.V],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[fl.a]),Rr._30(15,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(17,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,15,0,"f_"+n.field.id+"_allreq",n.search["f_"+n.field.id+"_allreq"])},function(e,t){e(t,9,0,Rr._56(t,9,0,Rr._44(t,10).transform("addon.mod_data.selectedrequired")));e(t,12,0,Rr._44(t,13)._disabled,Rr._44(t,17).ngClassUntouched,Rr._44(t,17).ngClassTouched,Rr._44(t,17).ngClassPristine,Rr._44(t,17).ngClassDirty,Rr._44(t,17).ngClassValid,Rr._44(t,17).ngClassInvalid,Rr._44(t,17).ngClassPending)})}function Ht(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,27,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Nt)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,12,"ion-select",[["interface","action-sheet"],["multiple","true"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,9)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,9)._keyup()&&o}return o},kl.b,kl.a)),Rr._30(9,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"],multiple:[3,"multiple"]},null),Rr._52(603979776,1,{options:1}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._48(12,{title:0}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(14,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(16,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Ut)),Rr._30(19,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Ft)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Lt)),Rr._30(26,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,Rr._56(t,9,0,Rr._44(t,11).transform("addon.mod_data.menuchoose")),e(t,12,0,n.field.name),"action-sheet","true");e(t,14,0,"f_"+n.field.id);e(t,19,0,n.options);e(t,23,0,n.error&&"edit"==n.mode);e(t,26,0,"search"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,9)._disabled,Rr._44(t,16).ngClassUntouched,Rr._44(t,16).ngClassTouched,Rr._44(t,16).ngClassPristine,Rr._44(t,16).ngClassDirty,Rr._44(t,16).ngClassValid,Rr._44(t,16).ngClassInvalid,Rr._44(t,16).ngClassPending)})}function Bt(e){return Rr._57(0,[(e()(),Rr._31(0,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(1,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),Rr._26(0,null,null,0))],function(e,t){e(t,1,0,t.component.value.content,!1)},null)}function qt(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Ht)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,Bt)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function Gt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function Vt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function Kt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Gt)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(9,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(11,16384,null,0,il.n,[il.m],null,null),Rr._30(12,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Vt)),Rr._30(15,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,"f_"+n.field.id);e(t,12,0,"number",n.field.name);e(t,15,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,11).ngClassUntouched,Rr._44(t,11).ngClassTouched,Rr._44(t,11).ngClassPristine,Rr._44(t,11).ngClassDirty,Rr._44(t,11).ngClassValid,Rr._44(t,11).ngClassInvalid,Rr._44(t,11).ngClassPending)})}function Wt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.value.content)})}function zt(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Kt)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,Wt)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function $t(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{errorText:[0,"errorText"]},null)],function(e,t){e(t,1,0,t.component.error)},null)}function Yt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(5,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(6,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,1,"core-attachments",[["acceptedTypes","image"],["maxSubmissions","1"]],null,null,null,ps.b,ps.a)),Rr._30(9,114688,null,0,hs.a,[Li.a,zr.a,Mi.a,ms.a,Zi.a,_s.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"],acceptedTypes:[6,"acceptedTypes"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,$t)),Rr._30(12,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._31(14,0,null,null,3,"ion-label",[["stacked",""]],null,null,null,null,null)),Rr._30(15,16384,null,0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),Rr._55(16,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(19,0,null,null,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(20,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(22,16384,null,0,il.n,[il.m],null,null),Rr._30(23,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,n.field.required);e(t,9,0,n.files,n.maxSizeBytes,"1",n.component,n.componentId,!0,"image");e(t,12,0,n.error);e(t,20,0,"f_"+n.field.id+"_alttext");e(t,23,0,"text",Rr._56(t,23,1,Rr._44(t,24).transform("addon.mod_data.alttext")))},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,16,0,Rr._56(t,16,0,Rr._44(t,17).transform("addon.mod_data.alttext")));e(t,19,0,Rr._44(t,22).ngClassUntouched,Rr._44(t,22).ngClassTouched,Rr._44(t,22).ngClassPristine,Rr._44(t,22).ngClassDirty,Rr._44(t,22).ngClassValid,Rr._44(t,22).ngClassInvalid,Rr._44(t,22).ngClassPending)})}function Qt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(5,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(6,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(8,16384,null,0,il.n,[il.m],null,null),Rr._30(9,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"f_"+n.field.id);e(t,9,0,"text",n.field.name)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,5,0,Rr._44(t,8).ngClassUntouched,Rr._44(t,8).ngClassTouched,Rr._44(t,8).ngClassPristine,Rr._44(t,8).ngClassDirty,Rr._44(t,8).ngClassValid,Rr._44(t,8).ngClassInvalid,Rr._44(t,8).ngClassPending)})}function Xt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"span",[],null,[[null,"click"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==r.gotoEntry.emit(r.entryId)&&o}return o},null,null)),(e()(),Rr._31(1,0,null,null,1,"img",[["class","core-media-adapt-width list_picture"],["core-external-content",""]],[[8,"alt",0]],null,null,null,null)),Rr._30(2,4734976,null,0,hu.a,[Rr.t,Kr.a,Ui.a,Il.a,xi.a,zr.a,Di.a,Li.a,ji.a],{src:[0,"src"]},null)],function(e,t){e(t,2,0,t.component.imageUrl)},function(e,t){e(t,1,0,t.component.title)})}function Jt(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"img",[["class","core-media-adapt-width list_picture"],["core-external-content",""]],[[8,"alt",0],[1,"width",0],[1,"height",0]],null,null,null,null)),Rr._30(1,4734976,null,0,hu.a,[Rr.t,Kr.a,Ui.a,Il.a,xi.a,zr.a,Di.a,Li.a,ji.a],{src:[0,"src"]},null)],function(e,t){e(t,1,0,t.component.imageUrl)},function(e,t){var n=t.component;e(t,0,0,n.title,n.width,n.height)})}function Zt(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Yt)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,Qt)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,Xt)),Rr._30(7,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,Jt)),Rr._30(10,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,"edit"==n.mode);e(t,4,0,"search"==n.mode);e(t,7,0,"list"==n.mode&&n.imageUrl);e(t,10,0,"show"==n.mode&&n.imageUrl)},null)}function en(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function tn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[1,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit)},function(e,t){e(t,2,0,t.context.$implicit)})}function nn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function on(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,29,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,en)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,17,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,9)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,9)._keyup()&&o}return o},kl.b,kl.a)),Rr._30(9,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"]},null),Rr._52(603979776,1,{options:1}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),Rr._48(12,{title:0}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(14,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[2,il.l]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(16,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(18,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),Rr._30(19,16384,[[1,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(20,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,tn)),Rr._30(24,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,nn)),Rr._30(28,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,Rr._56(t,9,0,Rr._44(t,11).transform("addon.mod_data.menuchoose")),e(t,12,0,n.field.name),"action-sheet");e(t,14,0,"f_"+n.field.id);e(t,19,0,"");e(t,24,0,n.options);e(t,28,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,9)._disabled,Rr._44(t,16).ngClassUntouched,Rr._44(t,16).ngClassTouched,Rr._44(t,16).ngClassPristine,Rr._44(t,16).ngClassDirty,Rr._44(t,16).ngClassValid,Rr._44(t,16).ngClassInvalid,Rr._44(t,16).ngClassPending);e(t,20,0,Rr._56(t,20,0,Rr._44(t,21).transform("addon.mod_data.menuchoose")))})}function rn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.value.content)})}function ln(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,on)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,rn)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function an(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function sn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function un(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,an)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(9,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(11,16384,null,0,il.n,[il.m],null,null),Rr._30(12,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,sn)),Rr._30(15,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,"f_"+n.field.id);e(t,12,0,"text",n.field.name);e(t,15,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,11).ngClassUntouched,Rr._44(t,11).ngClassTouched,Rr._44(t,11).ngClassPristine,Rr._44(t,11).ngClassDirty,Rr._44(t,11).ngClassValid,Rr._44(t,11).ngClassInvalid,Rr._44(t,11).ngClassPending)})}function cn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.value.content)})}function dn(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,un)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,cn)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function fn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(1,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(3,16384,null,0,il.n,[il.m],null,null),Rr._30(4,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null)],function(e,t){var n=t.component;e(t,1,0,"f_"+n.field.id);e(t,4,0,"text",n.field.name)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending)})}function pn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function hn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,"core-rich-text-editor",[["contextLevel","module"],["item-content",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ki.c,Ki.b)),Rr._30(1,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(3,16384,null,0,il.n,[il.m],null,null),Rr._30(4,1228800,null,0,Kl.a,[zr.a,Di.a,xi.a,Ui.a,[2,Sl.a],Rr.t,Fi.a,ji.a,Il.a,Wl.a],{placeholder:[0,"placeholder"],control:[1,"control"],component:[2,"component"],componentId:[3,"componentId"],autoSave:[4,"autoSave"],contextLevel:[5,"contextLevel"],contextInstanceId:[6,"contextInstanceId"],elementId:[7,"elementId"]},null)],function(e,t){var n=t.component;e(t,1,0,"f_"+n.field.id);e(t,4,0,n.field.name,n.form.controls["f_"+n.field.id],n.component,n.componentId,!0,"module",n.componentId,"field_"+n.field.id)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending)})}function mn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function _n(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,fn)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,pn)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,hn)),Rr._30(12,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,mn)),Rr._30(15,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"search"==n.mode);e(t,9,0,"edit"==n.mode);e(t,12,0,"edit"==n.mode);e(t,15,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending)})}function gn(e){return Rr._57(0,[(e()(),Rr._31(0,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(1,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._26(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n.format(n.value),n.component,n.componentId,"module",n.componentId,n.database.course)},null)}function vn(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,_n)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,gn)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value)},null)}function yn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,al.b,al.a)),Rr._30(1,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,t){e(t,1,0,t.component.field.required)},null)}function bn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,t){var n=t.component;e(t,1,0,n.form.controls["f_"+n.field.id],n.error)},null)}function Pn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,1).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,1).onReset()&&o}return o},null,null)),Rr._30(1,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(3,16384,null,0,il.o,[il.b],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,yn)),Rr._30(6,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(8,0,null,null,4,"ion-input",[["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(9,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(11,16384,null,0,il.n,[il.m],null,null),Rr._30(12,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,bn)),Rr._30(15,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form);e(t,6,0,"edit"==n.mode);e(t,9,0,"f_"+n.field.id);e(t,12,0,"url",n.field.name);e(t,15,0,n.error&&"edit"==n.mode)},function(e,t){e(t,0,0,Rr._44(t,3).ngClassUntouched,Rr._44(t,3).ngClassTouched,Rr._44(t,3).ngClassPristine,Rr._44(t,3).ngClassDirty,Rr._44(t,3).ngClassValid,Rr._44(t,3).ngClassInvalid,Rr._44(t,3).ngClassPending);e(t,8,0,Rr._44(t,11).ngClassUntouched,Rr._44(t,11).ngClassTouched,Rr._44(t,11).ngClassPristine,Rr._44(t,11).ngClassDirty,Rr._44(t,11).ngClassValid,Rr._44(t,11).ngClassInvalid,Rr._44(t,11).ngClassPending)})}function On(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"a",[["capture","true"],["core-link",""]],[[8,"href",4]],null,null,null,null)),Rr._30(1,81920,null,0,Su.a,[Rr.t,zr.a,ji.a,xi.a,Di.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Mi.a],{capture:[0,"capture"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,"true")},function(e,t){var n=t.component;e(t,0,0,n.value.content);e(t,2,0,n.value.content)})}function En(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Pn)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._26(16777216,null,null,1,null,On)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.isShowOrListMode());e(t,4,0,n.isShowOrListMode()&&n.value&&n.value.content)},null)}function Cn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),Rr._55(12,null,["",""])),Rr._48(13,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],null,function(e,t){var n=t.component;e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("core.settings.synchronization")));e(t,12,0,Rr._56(t,12,0,Rr._44(t,14).transform("addon.mod_quiz.confirmcontinueoffline",e(t,13,0,n.quiz.syncTimeReadable))))})}function In(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._55(12,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._31(16,0,null,null,20,"ion-item",[["class","item item-block"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;if("submit"===t){o=!1!==Rr._44(e,17).onSubmit(n)&&o}if("reset"===t){o=!1!==Rr._44(e,17).onReset()&&o}return o},el.b,el.a)),Rr._30(17,540672,null,0,il.h,[[8,null],[8,null]],{form:[0,"form"]},null),Rr._50(2048,null,il.b,null,[il.h]),Rr._30(19,16384,null,0,il.o,[il.b],null,null),Rr._30(20,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(24,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(26,0,null,3,9,"core-show-password",[["item-content",""]],null,null,null,zu.b,zu.a)),Rr._30(27,4308992,null,0,$u.a,[Rr.t,ji.a,zr.a,Il.a],{name:[0,"name"]},null),(e()(),Rr._55(-1,0,["\n        "])),(e()(),Rr._31(29,0,null,0,5,"ion-input",[["id","addon-mod_quiz-accessrule-password-input"],["name","quizpassword"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(30,671744,null,0,il.f,[[3,il.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),Rr._50(2048,null,il.m,null,[il.f]),Rr._30(32,16384,null,0,il.n,[il.m],null,null),Rr._30(33,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{type:[0,"type"],clearOnEdit:[1,"clearOnEdit"],placeholder:[2,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,0,["\n    "])),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,17,0,t.component.form);e(t,27,0,"quizpassword");e(t,30,0,"quizpassword");e(t,33,0,"password",!1,Rr._34(1,"",Rr._56(t,33,2,Rr._44(t,34).transform("addon.mod_quiz.quizpassword")),""))},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.mod_quiz.quizpassword")));e(t,12,0,Rr._56(t,12,0,Rr._44(t,13).transform("addon.mod_quiz.requirepasswordmessage")));e(t,16,0,Rr._44(t,19).ngClassUntouched,Rr._44(t,19).ngClassTouched,Rr._44(t,19).ngClassPristine,Rr._44(t,19).ngClassDirty,Rr._44(t,19).ngClassValid,Rr._44(t,19).ngClassInvalid,Rr._44(t,19).ngClassPending);e(t,29,0,Rr._44(t,32).ngClassUntouched,Rr._44(t,32).ngClassTouched,Rr._44(t,32).ngClassPristine,Rr._44(t,32).ngClassDirty,Rr._44(t,32).ngClassValid,Rr._44(t,32).ngClassInvalid,Rr._44(t,32).ngClassPending)})}function Rn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._31(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),Rr._55(12,null,["",""])),Rr._48(13,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n"])),(e()(),Rr._55(-1,null,["\n"]))],null,function(e,t){var n=t.component;e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("addon.mod_quiz.confirmstartheader")));e(t,12,0,Rr._56(t,12,0,Rr._44(t,14).transform("addon.mod_quiz.confirmstart",e(t,13,0,n.quiz.readableTimeLimit))))})}function Sn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[7,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.value)},function(e,t){e(t,2,0,t.context.$implicit.label)})}function wn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{errorText:[0,"errorText"]},null)],function(e,t){e(t,1,0,t.component.fieldErrors["grade_"+t.parent.parent.parent.context.index])},null)}function An(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,28,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,al.b,al.a)),Rr._30(8,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),Rr._30(9,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(10,0,["",""])),Rr._48(11,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(14,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,15)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,15)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.selectedValues[e.parent.parent.context.index].grade=n)&&o}return o},kl.b,kl.a)),Rr._30(15,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{interface:[0,"interface"]},null),Rr._52(603979776,7,{options:1}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(18,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(20,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,Sn)),Rr._30(23,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,3,1,null,wn)),Rr._30(27,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,9,0,!0);e(t,15,0,"action-sheet");e(t,18,0,n.selectedValues[t.parent.parent.context.index].grade);e(t,23,0,t.parent.parent.context.$implicit.grades);e(t,27,0,n.fieldErrors["grade_"+t.parent.parent.context.index])},function(e,t){e(t,10,0,Rr._56(t,10,0,Rr._44(t,12).transform("addon.mod_workshop_assessment_accumulative.dimensiongradefor",e(t,11,0,t.parent.parent.context.$implicit.dimtitle))));e(t,14,0,Rr._44(t,15)._disabled,Rr._44(t,20).ngClassUntouched,Rr._44(t,20).ngClassTouched,Rr._44(t,20).ngClassPristine,Rr._44(t,20).ngClassDirty,Rr._44(t,20).ngClassValid,Rr._44(t,20).ngClassInvalid,Rr._44(t,20).ngClassPending)})}function Dn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.label)})}function jn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,Dn)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "]))],function(e,t){e(t,3,0,t.context.$implicit.value===t.component.selectedValues[t.parent.parent.parent.context.index].grade)},null)}function kn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,8,{contentLabel:0}),Rr._52(603979776,9,{_buttons:1}),Rr._52(603979776,10,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._48(9,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,2,1,null,jn)),Rr._30(13,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){e(t,13,0,t.parent.parent.context.$implicit.grades)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,10).transform("addon.mod_workshop_assessment_accumulative.dimensiongradefor",e(t,9,0,t.parent.parent.context.$implicit.dimtitle))))})}function Tn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,11,{contentLabel:0}),Rr._52(603979776,12,{_buttons:1}),Rr._52(603979776,13,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,4,"ion-label",[["stacked",""]],null,null,null,null,null)),Rr._30(8,16384,[[11,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),Rr._48(10,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(13,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;if("input"===t){o=!1!==Rr._44(e,18).onInput()&&o}if("change"===t){o=!1!==Rr._44(e,18).onChange()&&o}if("ngModelChange"===t){o=!1!==(r.selectedValues[e.parent.parent.context.index].peercomment=n)&&o}return o},Ll.b,Ll.a)),Rr._30(14,671744,null,0,il.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(16,16384,null,0,il.n,[il.m],null,null),Rr._30(17,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],null,{input:"input"}),Rr._30(18,4210688,null,0,ic.a,[Rr.t],null,null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){e(t,14,0,t.component.selectedValues[t.parent.parent.context.index].peercomment)},function(e,t){e(t,9,0,Rr._56(t,9,0,Rr._44(t,11).transform("addon.mod_workshop_assessment_accumulative.dimensioncommentfor",e(t,10,0,t.parent.parent.context.$implicit.dimtitle))));e(t,13,0,Rr._44(t,16).ngClassUntouched,Rr._44(t,16).ngClassTouched,Rr._44(t,16).ngClassPristine,Rr._44(t,16).ngClassDirty,Rr._44(t,16).ngClassValid,Rr._44(t,16).ngClassInvalid,Rr._44(t,16).ngClassPending)})}function xn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,14,{contentLabel:0}),Rr._52(603979776,15,{_buttons:1}),Rr._52(603979776,16,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._48(9,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,14,0,n.selectedValues[t.parent.parent.context.index].peercomment,"module",n.moduleId,n.courseId)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,10).transform("addon.mod_workshop_assessment_accumulative.dimensioncommentfor",e(t,9,0,t.parent.parent.context.$implicit.dimtitle))))})}function Mn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,28,"ion-card",[],null,null,null,null,null)),Rr._30(1,16384,null,0,Xa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(11,null,["",""])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,An)),Rr._30(18,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,kn)),Rr._30(21,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Tn)),Rr._30(24,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,xn)),Rr._30(27,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,14,0,t.parent.context.$implicit.description,"module",n.moduleId,n.courseId);e(t,18,0,n.edit&&t.parent.context.$implicit.grades);e(t,21,0,!n.edit&&t.parent.context.$implicit.grades);e(t,24,0,n.edit);e(t,27,0,!n.edit)},function(e,t){e(t,11,0,t.parent.context.$implicit.dimtitle)})}function Nn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Mn)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,3,0,t.context.index<t.component.assessment.form.dimenssionscount)},null)}function Un(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Nn)),Rr._30(1,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.assessment.form.fields)},null)}function Fn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{errorText:[0,"errorText"]},null)],function(e,t){e(t,1,0,t.component.fieldErrors["peercomment_"+t.parent.parent.parent.context.index])},null)}function Ln(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,al.b,al.a)),Rr._30(8,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),Rr._30(9,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(10,0,["",""])),Rr._48(11,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(14,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;if("input"===t){o=!1!==Rr._44(e,19).onInput()&&o}if("change"===t){o=!1!==Rr._44(e,19).onChange()&&o}if("ngModelChange"===t){o=!1!==(r.selectedValues[e.parent.parent.context.index].peercomment=n)&&o}return o},Ll.b,Ll.a)),Rr._30(15,671744,null,0,il.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(17,16384,null,0,il.n,[il.m],null,null),Rr._30(18,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],null,{input:"input"}),Rr._30(19,4210688,null,0,ic.a,[Rr.t],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,3,1,null,Fn)),Rr._30(22,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,9,0,!0);e(t,15,0,n.selectedValues[t.parent.parent.context.index].peercomment);e(t,22,0,n.fieldErrors["peercomment_"+t.parent.parent.context.index])},function(e,t){e(t,10,0,Rr._56(t,10,0,Rr._44(t,12).transform("addon.mod_workshop_assessment_comments.dimensioncommentfor",e(t,11,0,t.parent.parent.context.$implicit.dimtitle))));e(t,14,0,Rr._44(t,17).ngClassUntouched,Rr._44(t,17).ngClassTouched,Rr._44(t,17).ngClassPristine,Rr._44(t,17).ngClassDirty,Rr._44(t,17).ngClassValid,Rr._44(t,17).ngClassInvalid,Rr._44(t,17).ngClassPending)})}function Hn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,7,{contentLabel:0}),Rr._52(603979776,8,{_buttons:1}),Rr._52(603979776,9,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._48(9,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,14,0,n.selectedValues[t.parent.parent.context.index].peercomment,"module",n.moduleId,n.courseId)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,10).transform("addon.mod_workshop_assessment_comments.dimensioncommentfor",e(t,9,0,t.parent.parent.context.$implicit.dimtitle))))})}function Bn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,22,"ion-card",[],null,null,null,null,null)),Rr._30(1,16384,null,0,Xa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(11,null,["",""])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Ln)),Rr._30(18,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Hn)),Rr._30(21,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,14,0,t.parent.context.$implicit.description,"module",n.moduleId,n.courseId);e(t,18,0,n.edit);e(t,21,0,!n.edit)},function(e,t){e(t,11,0,t.parent.context.$implicit.dimtitle)})}function qn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Bn)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,3,0,t.context.index<t.component.assessment.form.dimenssionscount)},null)}function Gn(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,qn)),Rr._30(1,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.assessment.form.fields)},null)}function Vn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{errorText:[0,"errorText"]},null)],function(e,t){e(t,1,0,t.component.fieldErrors["grade_"+t.parent.parent.context.index])},null)}function Kn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,14,{contentLabel:0}),Rr._52(603979776,15,{_buttons:1}),Rr._52(603979776,16,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,4,"ion-label",[["stacked",""]],null,null,null,null,null)),Rr._30(8,16384,[[14,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),Rr._48(10,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(13,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;if("input"===t){o=!1!==Rr._44(e,18).onInput()&&o}if("change"===t){o=!1!==Rr._44(e,18).onChange()&&o}if("ngModelChange"===t){o=!1!==(r.selectedValues[e.parent.parent.context.index].peercomment=n)&&o}return o},Ll.b,Ll.a)),Rr._30(14,671744,null,0,il.q,[[8,null],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(16,16384,null,0,il.n,[il.m],null,null),Rr._30(17,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],null,{input:"input"}),Rr._30(18,4210688,null,0,ic.a,[Rr.t],null,null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){e(t,14,0,"peercomment_"+t.parent.parent.context.index,t.component.selectedValues[t.parent.parent.context.index].peercomment)},function(e,t){e(t,9,0,Rr._56(t,9,0,Rr._44(t,11).transform("addon.mod_workshop_assessment_numerrors.dimensioncommentfor",e(t,10,0,t.parent.parent.context.$implicit.dimtitle))));e(t,13,0,Rr._44(t,16).ngClassUntouched,Rr._44(t,16).ngClassTouched,Rr._44(t,16).ngClassPristine,Rr._44(t,16).ngClassDirty,Rr._44(t,16).ngClassValid,Rr._44(t,16).ngClassInvalid,Rr._44(t,16).ngClassPending)})}function Wn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,17,{contentLabel:0}),Rr._52(603979776,18,{_buttons:1}),Rr._52(603979776,19,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._48(9,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,14,0,n.selectedValues[t.parent.parent.context.index].peercomment,"module",n.moduleId,n.courseId)},function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,10).transform("addon.mod_workshop_assessment_numerrors.dimensioncommentfor",e(t,9,0,t.parent.parent.context.$implicit.dimtitle))))})}function zn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,82,"ion-card",[],null,null,null,null,null)),Rr._30(1,16384,null,0,Xa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),Rr._55(11,null,["",""])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(14,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(17,0,null,null,58,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.selectedValues[e.parent.context.index].grade=n)&&o}return o},null,null)),Rr._30(18,1064960,null,1,fc.a,[Rr.V,Rr.t,Rr.j],null,null),Rr._52(335544320,4,{_header:0}),Rr._50(1024,null,il.l,function(e){return[e]},[fc.a]),Rr._30(21,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(23,16384,null,0,il.n,[il.m],null,null),Rr._30(24,16384,null,0,pc.a,[yi.a,Rr.t,Rr.V,Il.a,hc.l,Bl.a],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(26,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(27,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,5,{contentLabel:0}),Rr._52(603979776,6,{_buttons:1}),Rr._52(603979776,7,{_icons:1}),Rr._30(31,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(33,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,al.b,al.a)),Rr._30(34,16384,[[5,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),Rr._30(35,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(36,0,["",""])),Rr._48(37,{$a:0}),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._26(16777216,null,3,1,null,Vn)),Rr._30(41,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(44,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(45,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,8,{contentLabel:0}),Rr._52(603979776,9,{_buttons:1}),Rr._52(603979776,10,{_icons:1}),Rr._30(49,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(51,0,null,1,3,"ion-label",[],null,null,null,null,null)),Rr._30(52,16384,[[8,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._31(53,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(54,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(56,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,57)._click(n)&&o}return o},mc.b,mc.a)),Rr._30(57,245760,null,0,_c.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,fc.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(60,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(61,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,11,{contentLabel:0}),Rr._52(603979776,12,{_buttons:1}),Rr._52(603979776,13,{_icons:1}),Rr._30(65,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(67,0,null,1,3,"ion-label",[],null,null,null,null,null)),Rr._30(68,16384,[[11,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._31(69,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(70,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(72,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,73)._click(n)&&o}return o},mc.b,mc.a)),Rr._30(73,245760,null,0,_c.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,fc.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Kn)),Rr._30(78,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,Wn)),Rr._30(81,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,14,0,t.parent.context.$implicit.description,"module",n.moduleId,n.courseId);e(t,21,0,"grade_"+t.parent.context.index,n.selectedValues[t.parent.context.index].grade);e(t,35,0,n.edit);e(t,41,0,n.edit&&n.fieldErrors["grade_"+t.parent.context.index]);e(t,54,0,t.parent.context.$implicit.grade0,!1);e(t,57,0,-1,!n.edit);e(t,70,0,t.parent.context.$implicit.grade1,!1);e(t,73,0,1,!n.edit);e(t,78,0,n.edit);e(t,81,0,!n.edit)},function(e,t){e(t,11,0,t.parent.context.$implicit.dimtitle);e(t,17,0,Rr._44(t,23).ngClassUntouched,Rr._44(t,23).ngClassTouched,Rr._44(t,23).ngClassPristine,Rr._44(t,23).ngClassDirty,Rr._44(t,23).ngClassValid,Rr._44(t,23).ngClassInvalid,Rr._44(t,23).ngClassPending);e(t,36,0,Rr._56(t,36,0,Rr._44(t,38).transform("addon.mod_workshop.yourassessmentfor",e(t,37,0,t.parent.context.$implicit.dimtitle))));e(t,56,0,Rr._44(t,57)._disabled);e(t,72,0,Rr._44(t,73)._disabled)})}function $n(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,zn)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,3,0,t.context.index<t.component.assessment.form.dimenssionscount)},null)}function Yn(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,$n)),Rr._30(1,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.assessment.form.fields)},null)}function Qn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-input-errors",[],null,null,null,ul.b,ul.a)),Rr._30(1,638976,null,0,cl.a,[Zi.a],{errorText:[0,"errorText"]},null)],function(e,t){e(t,1,0,t.component.fieldErrors["chosenlevelid_"+t.parent.parent.context.index])},null)}function Xn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,5,{contentLabel:0}),Rr._52(603979776,6,{_buttons:1}),Rr._52(603979776,7,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(7,0,null,1,4,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[5,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._31(9,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(10,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n                "])),(e()(),Rr._31(13,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,14)._click(n)&&o}return o},mc.b,mc.a)),Rr._30(14,245760,null,0,_c.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,fc.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),Rr._55(-1,2,["\n            "]))],function(e,t){var n=t.component;e(t,11,0,t.context.$implicit.definition,"module",n.moduleId,n.courseId);e(t,14,0,t.context.$implicit.levelid,!n.edit)},function(e,t){e(t,13,0,Rr._44(t,14)._disabled)})}function Jn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,33,"ion-card",[],null,null,null,null,null)),Rr._30(1,16384,null,0,Xa.a,[yi.a,Rr.t,Rr.V],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(3,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(10,0,null,2,2,"h2",[],null,null,null,al.b,al.a)),Rr._30(11,4308992,null,0,sl.a,[Rr.t,Zi.a,Mi.a,ji.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),Rr._55(12,0,["",""])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Rr._30(15,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,2,1,null,Qn)),Rr._30(18,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(21,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.selectedValues[e.parent.context.index].chosenlevelid=n)&&o}return o},null,null)),Rr._30(22,1064960,null,1,fc.a,[Rr.V,Rr.t,Rr.j],null,null),Rr._52(335544320,4,{_header:0}),Rr._50(1024,null,il.l,function(e){return[e]},[fc.a]),Rr._30(25,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(27,16384,null,0,il.n,[il.m],null,null),Rr._30(28,16384,null,0,pc.a,[yi.a,Rr.t,Rr.V,Il.a,hc.l,Bl.a],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,Xn)),Rr._30(31,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,11,0,n.edit);e(t,15,0,t.parent.context.$implicit.description,"module",n.moduleId,n.courseId);e(t,18,0,n.edit&&n.fieldErrors["chosenlevelid_"+t.parent.context.index]);e(t,25,0,"chosenlevelid_"+t.parent.context.index,n.selectedValues[t.parent.context.index].chosenlevelid);e(t,31,0,t.parent.context.$implicit.fields)},function(e,t){e(t,12,0,t.parent.context.$implicit.dimtitle);e(t,21,0,Rr._44(t,27).ngClassUntouched,Rr._44(t,27).ngClassTouched,Rr._44(t,27).ngClassPristine,Rr._44(t,27).ngClassDirty,Rr._44(t,27).ngClassValid,Rr._44(t,27).ngClassInvalid,Rr._44(t,27).ngClassPending)})}function Zn(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Jn)),Rr._30(3,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,3,0,t.context.index<t.component.assessment.form.dimenssionscount)},null)}function eo(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Zn)),Rr._30(1,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.assessment.form.fields)},null)}function to(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,5,{contentLabel:0}),Rr._52(603979776,6,{_buttons:1}),Rr._52(603979776,7,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,2,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[5,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(11,0,null,4,1,"ion-radio",[],[[8,"id",0],[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,12)._click(n)&&o}return o},mc.b,mc.a)),Rr._30(12,245760,null,0,_c.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,fc.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){e(t,12,0,t.context.$implicit.value,t.context.$implicit.disabled)},function(e,t){e(t,9,0,t.context.$implicit.text);e(t,11,0,Rr._34(1,"",t.context.$implicit.id,""),Rr._44(t,12)._disabled)})}function no(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,33,"div",[],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,10,"ion-item",[["class","addon-qbehaviour-deferredcbm-certainty-title item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._55(10,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(14,0,null,null,10,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.question.behaviourCertaintySelected=n)&&o}return o},null,null)),Rr._30(15,1064960,null,1,fc.a,[Rr.V,Rr.t,Rr.j],null,null),Rr._52(335544320,4,{_header:0}),Rr._50(1024,null,il.l,function(e){return[e]},[fc.a]),Rr._30(18,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(20,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,to)),Rr._30(23,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(27,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;if("input"===t){o=!1!==Rr._44(e,28)._handleInput(n.target.value)&&o}if("blur"===t){o=!1!==Rr._44(e,28).onTouched()&&o}if("compositionstart"===t){o=!1!==Rr._44(e,28)._compositionStart()&&o}if("compositionend"===t){o=!1!==Rr._44(e,28)._compositionEnd(n.target.value)&&o}return o},null,null)),Rr._30(28,16384,null,0,il.c,[Rr.W,Rr.t,[2,il.a]],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[il.c]),Rr._30(30,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(32,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,18,0,n.question.behaviourCertaintyOptions[0].name,n.question.behaviourCertaintySelected);e(t,23,0,n.question.behaviourCertaintyOptions);e(t,30,0,n.question.behaviourCertaintySelected)},function(e,t){var n=t.component;e(t,10,0,Rr._56(t,10,0,Rr._44(t,11).transform("core.question.certainty")));e(t,14,0,Rr._44(t,20).ngClassUntouched,Rr._44(t,20).ngClassTouched,Rr._44(t,20).ngClassPristine,Rr._44(t,20).ngClassDirty,Rr._44(t,20).ngClassValid,Rr._44(t,20).ngClassInvalid,Rr._44(t,20).ngClassPending);e(t,27,0,n.question.behaviourCertaintyOptions[0].name,Rr._44(t,32).ngClassUntouched,Rr._44(t,32).ngClassTouched,Rr._44(t,32).ngClassPristine,Rr._44(t,32).ngClassDirty,Rr._44(t,32).ngClassValid,Rr._44(t,32).ngClassInvalid,Rr._44(t,32).ngClassPending)})}function oo(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,no)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.behaviourCertaintyOptions&&n.question.behaviourCertaintyOptions.length)},null)}function ro(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,Rr._34(1,"",n.question.behaviourSeenInput.name,""),Rr._34(1,"",n.question.behaviourSeenInput.value,""))})}function io(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,ro)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.question.behaviourSeenInput)},null)}function lo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ao(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,lo)),Rr._30(3,540672,null,0,Ci.r,[Rr._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,Rr._44(t.parent.parent,7))},null)}function so(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function uo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._26(16777216,null,null,1,null,so)),Rr._30(3,540672,null,0,Ci.r,[Rr._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),Rr._55(-1,null,["\n                "]))],function(e,t){e(t,3,0,Rr._44(t.parent.parent,4))},null)}function co(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function fo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._26(16777216,null,null,1,null,co)),Rr._30(3,540672,null,0,Ci.r,[Rr._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),Rr._55(-1,null,["\n                "]))],function(e,t){e(t,3,0,Rr._44(t.parent.parent,4))},null)}function po(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-icon",[["class","core-correct-icon"],["item-content",""],["item-end",""]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null),Rr._46(2,1)],function(e,t){var n=t.component;e(t,1,0,n.question.input.correctIcon,e(t,2,0,n.question.input.correctIconColor))},null)}function ho(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function mo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,ho)),Rr._30(3,540672,null,0,Ci.r,[Rr._11],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,Rr._44(t.parent.parent,7))},null)}function _o(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,65,"section",[["class","addon-qtype-calculated-container"],["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(10,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,ao)),Rr._30(16,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._31(18,0,null,null,42,"ion-item",[["class","grid item item-block"],["ion-grid",""],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(19,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{ngClass:[0,"ngClass"]},null),Rr._30(20,16384,null,0,Ia.a,[],null,null),Rr._30(21,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(25,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(27,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),Rr._30(28,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),Rr._55(29,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(32,0,null,3,27,"ion-grid",[["class","grid"],["item-content",""],["no-padding",""]],null,null,null,null,null)),Rr._30(33,16384,null,0,Ia.a,[],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(35,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),Rr._30(36,16384,null,0,Ra.a,[],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,uo)),Rr._30(40,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n                "])),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(43,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),Rr._30(44,16384,null,0,_a.a,[],null,null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(46,0,null,null,3,"ion-input",[["autocorrect","off"],["padding-left",""],["type","text"]],[[1,"name",0]],null,null,Ll.b,Ll.a)),Rr._30(47,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{value:[0,"value"],disabled:[1,"disabled"],type:[2,"type"],autocorrect:[3,"autocorrect"],placeholder:[4,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._55(-1,null,["\n\n                "])),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,fo)),Rr._30(54,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,po)),Rr._30(58,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,mo)),Rr._30(64,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,16,0,n.question.options&&n.question.options.length&&n.question.optionsFirst);e(t,19,0,Rr._34(1,"core-",n.question.input.correctIconColor,"-item"));e(t,40,0,n.question.select&&n.question.selectFirst);e(t,47,0,n.question.input.value,n.question.input.readOnly,"text","off",n.question.input.readOnly?"":Rr._56(t,47,4,Rr._44(t,48).transform("core.question.answer")));e(t,54,0,n.question.select&&!n.question.selectFirst);e(t,58,0,n.question.input.correctIcon);e(t,64,0,n.question.options&&n.question.options.length&&!n.question.optionsFirst)},function(e,t){var n=t.component;e(t,29,0,Rr._56(t,29,0,Rr._44(t,30).transform("addon.mod_quiz.answercolon")));e(t,46,0,n.question.input.name)})}function go(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"label",[["class","accesshide"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,Rr._34(1,"",n.question.select.id,""));e(t,1,0,n.question.select.accessibilityLabel)})}function vo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[7,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.value)},function(e,t){e(t,2,0,t.context.$implicit.label)})}function yo(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(1,0,null,null,25,"ion-col",[["class","col"]],null,null,null,null,null)),Rr._30(2,16384,null,0,_a.a,[],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,go)),Rr._30(5,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(7,0,null,null,10,"ion-select",[["interface","action-sheet"]],[[8,"id",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0,r=e.component;if("click"===t){o=!1!==Rr._44(e,8)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,8)._keyup()&&o}if("ngModelChange"===t){o=!1!==(r.question.select.selected=n)&&o}return o},kl.b,kl.a)),Rr._30(8,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{disabled:[0,"disabled"],interface:[1,"interface"]},null),Rr._52(603979776,7,{options:1}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(11,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(13,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,vo)),Rr._30(16,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,null,["\n\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(20,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;if("input"===t){o=!1!==Rr._44(e,21)._handleInput(n.target.value)&&o}if("blur"===t){o=!1!==Rr._44(e,21).onTouched()&&o}if("compositionstart"===t){o=!1!==Rr._44(e,21)._compositionStart()&&o}if("compositionend"===t){o=!1!==Rr._44(e,21)._compositionEnd(n.target.value)&&o}return o},null,null)),Rr._30(21,16384,null,0,il.c,[Rr.W,Rr.t,[2,il.a]],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[il.c]),Rr._30(23,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(25,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.question.select.accessibilityLabel);e(t,8,0,n.question.select.disabled,"action-sheet");e(t,11,0,n.question.select.name,n.question.select.disabled,n.question.select.selected);e(t,16,0,n.question.select.options);e(t,23,0,n.question.select.selected)},function(e,t){var n=t.component;e(t,7,0,Rr._34(1,"",n.question.select.id,""),Rr._44(t,8)._disabled,Rr._44(t,13).ngClassUntouched,Rr._44(t,13).ngClassTouched,Rr._44(t,13).ngClassPristine,Rr._44(t,13).ngClassDirty,Rr._44(t,13).ngClassValid,Rr._44(t,13).ngClassInvalid,Rr._44(t,13).ngClassPending);e(t,20,0,n.question.select.name,Rr._44(t,25).ngClassUntouched,Rr._44(t,25).ngClassTouched,Rr._44(t,25).ngClassPristine,Rr._44(t,25).ngClassDirty,Rr._44(t,25).ngClassValid,Rr._44(t,25).ngClassInvalid,Rr._44(t,25).ngClassPending)})}function bo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,9,{contentLabel:0}),Rr._52(603979776,10,{_buttons:1}),Rr._52(603979776,11,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,2,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[9,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(9,null,["",""])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(11,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,12)._click(n)&&o}return o},mc.b,mc.a)),Rr._30(12,245760,null,0,_c.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,fc.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,12,0,n.question.input.correctIconColor,t.context.$implicit.value,t.context.$implicit.disabled||n.question.input.readOnly)},function(e,t){e(t,9,0,t.context.$implicit.text);e(t,11,0,Rr._44(t,12)._disabled)})}function Po(e){return Rr._57(0,[(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(1,0,null,null,18,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.question.unit=n)&&o}return o},null,null)),Rr._30(2,1064960,null,1,fc.a,[Rr.V,Rr.t,Rr.j],null,null),Rr._52(335544320,8,{_header:0}),Rr._50(1024,null,il.l,function(e){return[e]},[fc.a]),Rr._30(5,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(7,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,bo)),Rr._30(10,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(13,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;if("input"===t){o=!1!==Rr._44(e,14)._handleInput(n.target.value)&&o}if("blur"===t){o=!1!==Rr._44(e,14).onTouched()&&o}if("compositionstart"===t){o=!1!==Rr._44(e,14)._compositionStart()&&o}if("compositionend"===t){o=!1!==Rr._44(e,14)._compositionEnd(n.target.value)&&o}return o},null,null)),Rr._30(14,16384,null,0,il.c,[Rr.W,Rr.t,[2,il.a]],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[il.c]),Rr._30(16,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(18,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.question.optionsName,n.question.unit);e(t,10,0,n.question.options);e(t,16,0,n.question.unit)},function(e,t){var n=t.component;e(t,1,0,Rr._44(t,7).ngClassUntouched,Rr._44(t,7).ngClassTouched,Rr._44(t,7).ngClassPristine,Rr._44(t,7).ngClassDirty,Rr._44(t,7).ngClassValid,Rr._44(t,7).ngClassInvalid,Rr._44(t,7).ngClassPending);e(t,13,0,n.question.optionsName,Rr._44(t,18).ngClassUntouched,Rr._44(t,18).ngClassTouched,Rr._44(t,18).ngClassPristine,Rr._44(t,18).ngClassDirty,Rr._44(t,18).ngClassValid,Rr._44(t,18).ngClassInvalid,Rr._44(t,18).ngClassPending)})}function Oo(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,_o)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(0,[["selectUnits",2]],null,0,null,yo)),(e()(),Rr._55(-1,null,["\n\n"])),(e()(),Rr._55(-1,null,["\n"])),(e()(),Rr._26(0,[["radioUnits",2]],null,0,null,Po)),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function Eo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Rr._30(3,147456,[[3,4]],0,Ss.a,[yi.a,Rr.t,Rr.V],{name:[0,"name"]},null),(e()(),Rr._55(4,null,["\n            ","\n        "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){e(t,2,0,Rr._44(t,3)._hidden);e(t,4,0,Rr._56(t,4,0,Rr._44(t,5).transform("core.question.howtodraganddrop")))})}function Co(e){return Rr._57(0,[(e()(),Rr._31(0,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.ddAreaRendered()&&o}return o},null,null)),Rr._30(1,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],adaptImg:[3,"adaptImg"],filter:[4,"filter"]},{afterRender:"afterRender"}),(e()(),Rr._26(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n.question.ddArea,n.component,n.componentId,!1,!1)},null)}function Io(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,"section",[["class","addon-qtype-ddimageortext-container"],["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(3,0,null,null,1,"core-loading",[],null,null,null,ta.b,ta.a)),Rr._30(4,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._31(6,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(7,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{ngClass:[0,"ngClass"]},null),Rr._48(8,{invisible:0}),Rr._30(9,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(13,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,Eo)),Rr._30(16,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(19,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.textRendered()&&o}return o},null,null)),Rr._30(20,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,Co)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.question.loaded);e(t,7,0,e(t,8,0,!n.question.loaded));e(t,16,0,!n.question.readOnly);e(t,20,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,23,0,n.question.ddArea)},null)}function Ro(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Io)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function So(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Rr._30(3,147456,[[4,4]],0,Ss.a,[yi.a,Rr.t,Rr.V],{name:[0,"name"]},null),(e()(),Rr._55(4,null,["\n            ","\n        "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){e(t,2,0,Rr._44(t,3)._hidden);e(t,4,0,Rr._56(t,4,0,Rr._44(t,5).transform("core.question.howtodraganddrop")))})}function wo(e){return Rr._57(0,[(e()(),Rr._31(0,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.ddAreaRendered()&&o}return o},null,null)),Rr._30(1,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],adaptImg:[3,"adaptImg"],filter:[4,"filter"]},{afterRender:"afterRender"}),(e()(),Rr._26(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n.question.ddArea,n.component,n.componentId,!1,!1)},null)}function Ao(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,"section",[["class","addon-qtype-ddmarker-container"],["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(3,0,null,null,1,"core-loading",[],null,null,null,ta.b,ta.a)),Rr._30(4,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._31(6,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(7,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{ngClass:[0,"ngClass"]},null),Rr._48(8,{invisible:0}),Rr._30(9,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,2,{contentLabel:0}),Rr._52(603979776,3,{_buttons:1}),Rr._52(603979776,4,{_icons:1}),Rr._30(13,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,So)),Rr._30(16,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(19,16777216,[[1,0],["questiontext",1]],null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.textRendered()&&o}return o},null,null)),Rr._30(20,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,wo)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.question.loaded);e(t,7,0,e(t,8,0,!n.question.loaded));e(t,16,0,!n.question.readOnly);e(t,20,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,23,0,n.question.ddArea)},null)}function Do(e){return Rr._57(0,[Rr._52(671088640,1,{questionTextEl:0}),(e()(),Rr._26(16777216,null,null,1,null,Ao)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.question.text||""===n.question.text)},null)}function jo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Rr._30(3,147456,[[4,4]],0,Ss.a,[yi.a,Rr.t,Rr.V],{name:[0,"name"]},null),(e()(),Rr._55(4,null,["\n            ","\n        "])),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){e(t,3,0,"information-circle")},function(e,t){e(t,2,0,Rr._44(t,3)._hidden);e(t,4,0,Rr._56(t,4,0,Rr._44(t,5).transform("core.question.howtodraganddrop")))})}function ko(e){return Rr._57(0,[(e()(),Rr._31(0,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.answersRendered()&&o}return o},null,null)),Rr._30(1,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],filter:[3,"filter"]},{afterRender:"afterRender"}),(e()(),Rr._26(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n.question.answers,n.component,n.componentId,!1)},null)}function To(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,27,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(3,0,null,null,1,"core-loading",[],null,null,null,ta.b,ta.a)),Rr._30(4,638976,null,0,na.a,[Zi.a,Rr.t,Fi.a,ji.a],{hideUntil:[0,"hideUntil"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._31(6,0,null,null,20,"ion-item",[["class","addon-qtype-ddwtos-container item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(7,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Rr._48(8,{invisible:0}),Rr._30(9,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,2,{contentLabel:0}),Rr._52(603979776,3,{_buttons:1}),Rr._52(603979776,4,{_icons:1}),Rr._30(13,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,jo)),Rr._30(16,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(19,16777216,[[1,0],["questiontext",1]],null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.textRendered()&&o}return o},null,null)),Rr._30(20,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,ko)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(25,0,null,2,0,"div",[["class","drags"]],null,null,null,null,null)),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.question.loaded);e(t,7,0,"addon-qtype-ddwtos-container",e(t,8,0,!n.question.loaded));e(t,16,0,!n.question.readOnly);e(t,20,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,23,0,n.question.answers)},null)}function xo(e){return Rr._57(0,[Rr._52(671088640,1,{questionTextEl:0}),(e()(),Rr._26(16777216,null,null,1,null,To)),Rr._30(2,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.question.text||""===n.question.text)},null)}function Mo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,n.question.seenInput.name,n.question.seenInput.value)})}function No(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,17,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Mo)),Rr._30(4,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(6,0,null,null,10,"ion-item",[["class","item item-text-wrap item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(7,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(11,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(13,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(14,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(15,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.question.seenInput);e(t,15,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},null)}function Uo(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,No)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function Fo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,0,"input",[["item-content",""],["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,n.question.formatInput.name,n.question.formatInput.value)})}function Lo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,7,"ion-textarea",[["aria-multiline","true"],["class","core-question-textarea"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),Rr._30(1,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Rr._48(2,{"core-monospaced":0}),Rr._30(3,671744,null,0,il.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(5,16384,null,0,il.n,[il.m],null,null),Rr._30(6,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{placeholder:[0,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,"core-question-textarea",e(t,2,0,n.question.isMonospaced));e(t,3,0,n.question.textarea.text);e(t,6,0,Rr._34(1,"",Rr._56(t,6,0,Rr._44(t,7).transform("core.question.answer")),""))},function(e,t){e(t,0,0,t.component.question.textarea.name,Rr._44(t,5).ngClassUntouched,Rr._44(t,5).ngClassTouched,Rr._44(t,5).ngClassPristine,Rr._44(t,5).ngClassDirty,Rr._44(t,5).ngClassValid,Rr._44(t,5).ngClassInvalid,Rr._44(t,5).ngClassPending)})}function Ho(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-rich-text-editor",[["item-content",""]],null,null,null,Ki.c,Ki.b)),Rr._30(1,1228800,null,0,Kl.a,[zr.a,Di.a,xi.a,Ui.a,[2,Sl.a],Rr.t,Fi.a,ji.a,Il.a,Wl.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"],autoSave:[5,"autoSave"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j])],function(e,t){var n=t.component;e(t,1,0,Rr._34(1,"",Rr._56(t,1,0,Rr._44(t,2).transform("core.question.answer")),""),n.formControl,n.question.textarea.name,n.component,n.componentId,!1)},null)}function Bo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,3,1,null,Fo)),Rr._30(9,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,3,1,null,Lo)),Rr._30(13,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,3,1,null,Ho)),Rr._30(17,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,9,0,n.question.formatInput);e(t,13,0,n.question.isPlainText);e(t,17,0,!n.question.isPlainText)},null)}function qo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(2,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,7,{contentLabel:0}),Rr._52(603979776,8,{_buttons:1}),Rr._52(603979776,9,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(9,0,null,2,2,"p",[["class","core-question-warning"]],null,null,null,null,null)),(e()(),Rr._55(10,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(14,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(15,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,10,{contentLabel:0}),Rr._52(603979776,11,{_buttons:1}),Rr._52(603979776,12,{_icons:1}),Rr._30(19,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(21,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(22,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(23,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,23,0,n.question.textarea.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},function(e,t){e(t,10,0,Rr._56(t,10,0,Rr._44(t,11).transform("core.question.errorinlinefilesnotsupported")))})}function Go(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,13,{contentLabel:0}),Rr._52(603979776,14,{_buttons:1}),Rr._52(603979776,15,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,2,2,"p",[["class","core-question-warning"]],null,null,null,null,null)),(e()(),Rr._55(8,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n    "]))],null,function(e,t){e(t,8,0,Rr._56(t,8,0,Rr._44(t,9).transform("core.question.errorattachmentsnotsupported")))})}function Vo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,16,{contentLabel:0}),Rr._52(603979776,17,{_buttons:1}),Rr._52(603979776,18,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),Rr._31(8,16777216,null,null,3,"core-format-text",[],null,null,null,null,null)),Rr._30(9,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{ngClass:[0,"ngClass"]},null),Rr._48(10,{"core-monospaced":0}),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,9,0,e(t,10,0,n.question.isMonospaced));e(t,11,0,n.question.answer,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},null)}function Ko(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-file",[],null,null,null,xs.b,xs.a)),Rr._30(1,245760,null,0,Ms.a,[xi.a,ji.a,zr.a,Ui.a,Li.a,qi.a,fs.a,Fi.a,Mi.a,Hi.a,Di.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,n.component,n.componentId)},null)}function Wo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,19,{contentLabel:0}),Rr._52(603979776,20,{_buttons:1}),Rr._52(603979776,21,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._26(16777216,null,null,1,null,Ko)),Rr._30(10,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){e(t,10,0,t.component.question.attachments)},null)}function zo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,33,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(12,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Bo)),Rr._30(17,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,qo)),Rr._30(21,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Go)),Rr._30(25,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Vo)),Rr._30(29,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Wo)),Rr._30(32,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,12,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,17,0,n.question.textarea&&!n.question.hasDraftFiles);e(t,21,0,n.question.textarea&&n.question.hasDraftFiles);e(t,25,0,n.question.allowsAttachments);e(t,29,0,!n.question.textarea&&(n.question.answer||!n.question.attachments.length&&!n.question.allowsAttachments));e(t,32,0,!n.question.textarea&&n.question.attachments&&n.question.attachments.length)},null)}function $o(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,zo)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function Yo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,13,"section",[["class","addon-qtype-gapselect-container"],["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(10,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.questionRendered()&&o}return o},null,null)),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},null)}function Qo(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Yo)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function Xo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"label",[["class","accesshide"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,0,0,Rr._34(1,"",t.parent.context.$implicit.id,""));e(t,1,0,t.parent.context.$implicit.accessibilityLabel)})}function Jo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),Rr._30(1,16384,[[7,4]],0,jl.a,[Rr.t],{value:[0,"value"]},null),(e()(),Rr._55(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.value)},function(e,t){e(t,2,0,t.context.$implicit.label)})}function Zo(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","success"],["name","fa-check"]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,t){e(t,1,0,"fa-check","success")},null)}function er(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","danger"],["name","fa-remove"]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,t){e(t,1,0,"fa-remove","danger")},null)}function tr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,55,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(7,0,null,3,47,"ion-grid",[["class","grid"],["item-content",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),Rr._30(8,16384,null,0,Ia.a,[],null,null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(10,0,null,null,43,"ion-row",[["class","row"],["no-margin",""]],null,null,null,null,null)),Rr._30(11,16384,null,0,Ra.a,[],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(13,0,null,null,6,"ion-col",[["class","col"]],null,null,null,null,null)),Rr._30(14,16384,null,0,_a.a,[],null,null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(16,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),Rr._31(17,16777216,null,null,1,"core-format-text",[],[[8,"id",0]],null,null,null,null)),Rr._30(18,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(21,0,null,null,31,"ion-col",[["class","col"]],null,null,null,null,null)),Rr._30(22,16384,null,0,_a.a,[],null,null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._26(16777216,null,null,1,null,Xo)),Rr._30(25,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(27,0,null,null,10,"ion-select",[["interface","action-sheet"]],[[8,"id",0],[1,"aria-labelledby",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,28)._click(n)&&o}if("keyup.space"===t){o=!1!==Rr._44(e,28)._keyup()&&o}if("ngModelChange"===t){o=!1!==(e.context.$implicit.selected=n)&&o}return o},kl.b,kl.a)),Rr._30(28,1228800,null,1,Tl.a,[xl.a,nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],Ml.a],{color:[0,"color"],disabled:[1,"disabled"],interface:[2,"interface"]},null),Rr._52(603979776,7,{options:1}),Rr._50(1024,null,il.l,function(e){return[e]},[Tl.a]),Rr._30(31,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(33,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n                        "])),(e()(),Rr._26(16777216,null,null,1,null,Jo)),Rr._30(36,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._55(-1,null,["\n\n                    "])),(e()(),Rr._26(16777216,null,null,1,null,Zo)),Rr._30(40,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._26(16777216,null,null,1,null,er)),Rr._30(43,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n                    "])),(e()(),Rr._55(-1,null,["\n                    "])),(e()(),Rr._31(46,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;if("input"===t){o=!1!==Rr._44(e,47)._handleInput(n.target.value)&&o}if("blur"===t){o=!1!==Rr._44(e,47).onTouched()&&o}if("compositionstart"===t){o=!1!==Rr._44(e,47)._compositionStart()&&o}if("compositionend"===t){o=!1!==Rr._44(e,47)._compositionEnd(n.target.value)&&o}return o},null,null)),Rr._30(47,16384,null,0,il.c,[Rr.W,Rr.t,[2,il.a]],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[il.c]),Rr._30(49,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(51,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n    "]))],function(e,t){var n=t.component;e(t,18,0,t.context.$implicit.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,25,0,t.context.$implicit.accessibilityLabel);e(t,28,0,(1===t.context.$implicit.isCorrect?"success":"")+(0===t.context.$implicit.isCorrect?"danger":""),t.context.$implicit.disabled,"action-sheet");e(t,31,0,t.context.$implicit.name,t.context.$implicit.disabled,t.context.$implicit.selected);e(t,36,0,t.context.$implicit.options);e(t,40,0,1===t.context.$implicit.isCorrect);e(t,43,0,0===t.context.$implicit.isCorrect);e(t,49,0,t.context.$implicit.selected)},function(e,t){e(t,17,0,Rr._34(1,"addon-qtype-match-question-",t.context.$implicit.id,""));e(t,27,0,Rr._34(1,"",t.context.$implicit.id,""),"addon-qtype-match-question-"+t.context.$implicit.id,Rr._44(t,28)._disabled,Rr._44(t,33).ngClassUntouched,Rr._44(t,33).ngClassTouched,Rr._44(t,33).ngClassPristine,Rr._44(t,33).ngClassDirty,Rr._44(t,33).ngClassValid,Rr._44(t,33).ngClassInvalid,Rr._44(t,33).ngClassPending);e(t,46,0,t.context.$implicit.name,Rr._44(t,51).ngClassUntouched,Rr._44(t,51).ngClassTouched,Rr._44(t,51).ngClassPristine,Rr._44(t,51).ngClassDirty,Rr._44(t,51).ngClassValid,Rr._44(t,51).ngClassInvalid,Rr._44(t,51).ngClassPending)})}function nr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"section",[["class","addon-qtype-match-container"],["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(9,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),Rr._30(10,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,tr)),Rr._30(14,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,10,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,14,0,n.question.rows)},null)}function or(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,nr)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,1,0,t.component.question.loaded)},null)}function rr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,12,"section",[["class","addon-qtype-multianswer-container"],["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(9,16777216,null,2,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,t,n){var o=!0;if("afterRender"===t){o=!1!==e.component.questionRendered()&&o}return o},null,null)),Rr._30(10,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,10,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},null)}function ir(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,rr)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function lr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Rr._55(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.question.prompt)})}function ar(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"div",[["class","specificfeedback"]],null,null,null,null,null)),(e()(),Rr._31(1,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(2,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,2,0,t.parent.context.$implicit.feedback,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},null)}function sr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","success"],["item-content",""],["name","fa-check"]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,t){e(t,1,0,"fa-check","success")},null)}function ur(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","danger"],["item-content",""],["name","fa-remove"]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,t){e(t,1,0,"fa-remove","danger")},null)}function cr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,37,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,8,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(10,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,ar)),Rr._30(14,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(17,0,null,4,5,"ion-checkbox",[["item-end",""]],[[1,"name",0],[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,18)._click(n)&&o}if("ngModelChange"===t){o=!1!==(e.context.$implicit.checked=n)&&o}return o},dl.b,dl.a)),Rr._30(18,1228800,null,0,fl.a,[yi.a,nl.a,[2,tl.a],Rr.t,Rr.V],{color:[0,"color"],disabled:[1,"disabled"]},null),Rr._50(1024,null,il.l,function(e){return[e]},[fl.a]),Rr._30(20,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(22,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,3,1,null,sr)),Rr._30(25,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,3,1,null,ur)),Rr._30(28,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n\n            "])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(31,0,null,3,5,"input",[["item-content",""],["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;if("input"===t){o=!1!==Rr._44(e,32)._handleInput(n.target.value)&&o}if("blur"===t){o=!1!==Rr._44(e,32).onTouched()&&o}if("compositionstart"===t){o=!1!==Rr._44(e,32)._compositionStart()&&o}if("compositionend"===t){o=!1!==Rr._44(e,32)._compositionEnd(n.target.value)&&o}return o},null,null)),Rr._30(32,16384,null,0,il.c,[Rr.W,Rr.t,[2,il.a]],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[il.c]),Rr._30(34,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(36,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,8,0,(1===t.context.$implicit.isCorrect?"success":"")+(0===t.context.$implicit.isCorrect?"danger":""));e(t,11,0,t.context.$implicit.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,14,0,t.context.$implicit.feedback);e(t,18,0,(1===t.context.$implicit.isCorrect?"success":"")+(0===t.context.$implicit.isCorrect?"danger":""),t.context.$implicit.disabled);e(t,20,0,t.context.$implicit.disabled,t.context.$implicit.checked);e(t,25,0,1===t.context.$implicit.isCorrect);e(t,28,0,0===t.context.$implicit.isCorrect);e(t,34,0,t.context.$implicit.checked)},function(e,t){e(t,17,0,t.context.$implicit.name,Rr._44(t,18)._disabled,Rr._44(t,22).ngClassUntouched,Rr._44(t,22).ngClassTouched,Rr._44(t,22).ngClassPristine,Rr._44(t,22).ngClassDirty,Rr._44(t,22).ngClassValid,Rr._44(t,22).ngClassInvalid,Rr._44(t,22).ngClassPending);e(t,31,0,t.context.$implicit.name,Rr._44(t,36).ngClassUntouched,Rr._44(t,36).ngClassTouched,Rr._44(t,36).ngClassPristine,Rr._44(t,36).ngClassDirty,Rr._44(t,36).ngClassValid,Rr._44(t,36).ngClassInvalid,Rr._44(t,36).ngClassPending)})}function dr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,cr)),Rr._30(3,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){e(t,3,0,t.component.question.options)},null)}function fr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"div",[["class","specificfeedback"]],null,null,null,null,null)),(e()(),Rr._31(1,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(2,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,t){var n=t.component;e(t,2,0,t.parent.context.$implicit.feedback,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId)},null)}function pr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","success"],["item-content",""],["name","fa-check"]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,t){e(t,1,0,"fa-check","success")},null)}function hr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","danger"],["item-content",""],["name","fa-remove"]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,t){e(t,1,0,"fa-remove","danger")},null)}function mr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,8,{contentLabel:0}),Rr._52(603979776,9,{_buttons:1}),Rr._52(603979776,10,{_icons:1}),Rr._30(5,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(7,0,null,1,8,"ion-label",[],null,null,null,null,null)),Rr._30(8,16384,[[8,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._31(10,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,null,["\n                "])),(e()(),Rr._26(16777216,null,null,1,null,fr)),Rr._30(14,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._31(17,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==Rr._44(e,18)._click(n)&&o}return o},mc.b,mc.a)),Rr._30(18,245760,null,0,_c.a,[nl.a,yi.a,Rr.t,Rr.V,[2,tl.a],[2,fc.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,3,1,null,pr)),Rr._30(21,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n            "])),(e()(),Rr._26(16777216,null,3,1,null,hr)),Rr._30(24,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n        "]))],function(e,t){var n=t.component;e(t,11,0,t.context.$implicit.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,14,0,t.context.$implicit.feedback);e(t,18,0,(1===t.context.$implicit.isCorrect?"success":"")+(0===t.context.$implicit.isCorrect?"danger":""),t.context.$implicit.value,t.context.$implicit.disabled);e(t,21,0,1===t.context.$implicit.isCorrect);e(t,24,0,0===t.context.$implicit.isCorrect)},function(e,t){e(t,17,0,Rr._44(t,18)._disabled)})}function _r(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,6,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n            "])),(e()(),Rr._31(2,0,null,null,3,"button",[["color","light"],["full",""],["ion-button",""],["text-wrap",""],["type","reset"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var o=!0;if("click"===t){o=!1!==e.component.clear()&&o}return o},gi.b,gi.a)),Rr._30(3,1097728,null,0,vi.a,[[8,""],yi.a,Rr.t,Rr.V],{color:[0,"color"],full:[1,"full"]},null),(e()(),Rr._55(4,0,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n        "]))],function(e,t){e(t,3,0,"light","")},function(e,t){e(t,2,0,!t.component.question.singleChoiceModel);e(t,4,0,Rr._56(t,4,0,Rr._44(t,5).transform("addon.mod_quiz.clearchoice")))})}function gr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,21,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var o=!0;if("ngModelChange"===t){o=!1!==(e.component.question.singleChoiceModel=n)&&o}return o},null,null)),Rr._30(1,1064960,null,1,fc.a,[Rr.V,Rr.t,Rr.j],null,null),Rr._52(335544320,7,{_header:0}),Rr._50(1024,null,il.l,function(e){return[e]},[fc.a]),Rr._30(4,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(6,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,mr)),Rr._30(9,802816,null,0,Ci.j,[Rr._11,Rr._6,Rr.E],{ngForOf:[0,"ngForOf"]},null),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._26(16777216,null,null,1,null,_r)),Rr._30(12,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n        "])),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._31(15,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;if("input"===t){o=!1!==Rr._44(e,16)._handleInput(n.target.value)&&o}if("blur"===t){o=!1!==Rr._44(e,16).onTouched()&&o}if("compositionstart"===t){o=!1!==Rr._44(e,16)._compositionStart()&&o}if("compositionend"===t){o=!1!==Rr._44(e,16)._compositionEnd(n.target.value)&&o}return o},null,null)),Rr._30(16,16384,null,0,il.c,[Rr.W,Rr.t,[2,il.a]],null,null),Rr._50(1024,null,il.l,function(e){return[e]},[il.c]),Rr._30(18,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},null),Rr._50(2048,null,il.m,null,[il.q]),Rr._30(20,16384,null,0,il.n,[il.m],null,null),(e()(),Rr._55(-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,4,0,n.question.optionsName,n.question.singleChoiceModel);e(t,9,0,n.question.options);e(t,12,0,!n.question.disabled);e(t,18,0,n.question.singleChoiceModel)},function(e,t){var n=t.component;e(t,0,0,Rr._44(t,6).ngClassUntouched,Rr._44(t,6).ngClassTouched,Rr._44(t,6).ngClassPristine,Rr._44(t,6).ngClassDirty,Rr._44(t,6).ngClassValid,Rr._44(t,6).ngClassInvalid,Rr._44(t,6).ngClassPending);e(t,15,0,n.question.optionsName,Rr._44(t,20).ngClassUntouched,Rr._44(t,20).ngClassTouched,Rr._44(t,20).ngClassPristine,Rr._44(t,20).ngClassDirty,Rr._44(t,20).ngClassValid,Rr._44(t,20).ngClassInvalid,Rr._44(t,20).ngClassPending)})}function vr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,24,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(4,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(8,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(10,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),Rr._30(11,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,2,1,null,lr)),Rr._30(14,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,dr)),Rr._30(19,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,gr)),Rr._30(23,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,14,0,n.question.prompt);e(t,19,0,n.question.multi);e(t,23,0,!n.question.multi)},null)}function yr(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,vr)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function br(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"core-icon",[["class","core-correct-icon"],["item-content",""],["item-end",""]],null,null,null,bi.b,bi.a)),Rr._30(1,704512,null,0,Pi.a,[Rr.t,yi.a],{name:[0,"name"],color:[1,"color"]},null),Rr._46(2,1)],function(e,t){var n=t.component;e(t,1,0,n.question.input.correctIcon,e(t,2,0,n.question.input.correctIconColor))},null)}function Pr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,20,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(1,278528,null,0,Ci.i,[Rr.E,Rr.F,Rr.t,Rr.W],{ngClass:[0,"ngClass"]},null),Rr._30(2,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,4,{contentLabel:0}),Rr._52(603979776,5,{_buttons:1}),Rr._52(603979776,6,{_icons:1}),Rr._30(6,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(8,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),Rr._30(9,16384,[[4,4]],0,ll.a,[yi.a,Rr.t,Rr.V,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),Rr._55(10,null,["",""])),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(13,0,null,3,3,"ion-input",[["autocorrect","off"],["padding-left",""],["type","text"]],[[1,"name",0]],null,null,Ll.b,Ll.a)),Rr._30(14,5423104,null,0,Hl.a,[yi.a,Il.a,nl.a,xl.a,Rr.t,Rr.V,[2,Sl.a],[2,tl.a],[2,il.m],Bl.a],{value:[0,"value"],disabled:[1,"disabled"],type:[2,"type"],autocorrect:[3,"autocorrect"],placeholder:[4,"placeholder"]},null),Rr._47(131072,Ji.a,[Zi.a,Rr.j]),(e()(),Rr._55(-1,null,["\n        "])),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._26(16777216,null,3,1,null,br)),Rr._30(19,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,2,["\n"]))],function(e,t){var n=t.component;e(t,1,0,Rr._34(1,"core-",n.question.input.correctIconColor,"-item"));e(t,14,0,n.question.input.value,n.question.input.readOnly,"text","off",n.question.input.readOnly?"":Rr._56(t,14,4,Rr._44(t,15).transform("core.question.answer")));e(t,19,0,n.question.input.correctIcon)},function(e,t){var n=t.component;e(t,10,0,Rr._56(t,10,0,Rr._44(t,11).transform("addon.mod_quiz.answercolon")));e(t,13,0,n.question.input.name)})}function Or(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,15,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._31(2,0,null,null,9,"ion-item",[["class","addon-qtype-shortanswer-text item item-block"],["text-wrap",""]],null,null,null,el.b,el.a)),Rr._30(3,1097728,null,3,tl.a,[nl.a,yi.a,Rr.t,Rr.V,[2,ol.a]],null,null),Rr._52(335544320,1,{contentLabel:0}),Rr._52(603979776,2,{_buttons:1}),Rr._52(603979776,3,{_icons:1}),Rr._30(7,16384,null,0,rl.a,[],null,null),(e()(),Rr._55(-1,2,["\n        "])),(e()(),Rr._31(9,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),Rr._30(10,540672,null,0,Cl.a,[Rr.t,xi.a,zr.a,Mi.a,Zi.a,Il.a,ji.a,Di.a,Kr.a,Ui.a,Li.a,Rl.a,[2,Wr.a],[2,Sl.a],[2,ki.a],Ai.a,Fi.a,wl.a,Al.a,Dl.a,Rr._11],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),Rr._55(-1,2,["\n    "])),(e()(),Rr._55(-1,null,["\n    "])),(e()(),Rr._26(16777216,null,null,1,null,Pr)),Rr._30(14,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,10,0,n.question.text,n.component,n.componentId,n.contextLevel,n.contextInstanceId,n.courseId);e(t,14,0,!n.question.input.isInline)},null)}function Er(e){return Rr._57(0,[(e()(),Rr._26(16777216,null,null,1,null,Or)),Rr._30(1,16384,null,0,Ci.k,[Rr._11,Rr._6],{ngIf:[0,"ngIf"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.question.text||""===n.question.text)},null)}function Cr(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,2,"ion-nav",[],null,null,null,fd.b,fd.a)),Rr._50(6144,null,pd.a,null,[hd.a]),Rr._30(2,4374528,null,0,hd.a,[[2,md.a],[2,Wr.a],xl.a,yi.a,Il.a,Rr.t,Rr.M,Rr.V,Rr.o,hc.l,_d.a,[2,Ml.a],Bl.a,Rr.u],{root:[0,"root"]},null),(e()(),Rr._55(-1,null,["\n"]))],function(e,t){e(t,2,0,t.component.rootPage)},null)}Object.defineProperty(t,"__esModule",{value:!0});var Ir=n(79),Rr=n(0),Sr=n(535),wr=n(307),Ar=n(1522),Dr=n(1523),jr=n(1524),kr=n(1525),Tr=n(1526),xr=n(1527),Mr=n(1528),Nr=n(1529),Ur=n(1530),Fr=n(1531),Lr=n(1532),Hr=n(1533),Br=n(1534),qr=n(1624),Gr=n(723),Vr=n(198),Kr=n(6),Wr=n(21),zr=n(4),$r=n(450),Yr=n(61),Qr=Rr._29({encapsulation:2,styles:[],data:{}}),Xr=Rr._27("core-course-format-single-activity",$r.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-course-format-single-activity",[],null,null,null,o,Qr)),Rr._30(1,573440,null,0,$r.a,[Yr.a,Rr.C],null,null)],null,null)},{course:"course",sections:"sections",downloadEnabled:"downloadEnabled",initialSectionId:"initialSectionId",initialSectionNumber:"initialSectionNumber",moduleId:"moduleId"},{completionChanged:"completionChanged"},[]),Jr=n(475),Zr=n(1569),ei=n(1579),ti=n(1568),ni=n(1578),oi=n(1606),ri=n(1607),ii=n(1608),li=n(1609),ai=n(1610),si=n(1611),ui=n(1612),ci=n(1613),di=n(1614),fi=n(1615),pi=n(1616),hi=n(1537),mi=n(1538),_i=n(1535),gi=n(45),vi=n(42),yi=n(8),bi=n(80),Pi=n(75),Oi=n(121),Ei=n(101),Ci=n(7),Ii=n(524),Ri=n(327),Si=n(322),wi=n(257),Ai=n(44),Di=n(22),ji=n(2),ki=n(28),Ti=n(604),xi=n(1),Mi=n(11),Ni=n(359),Ui=n(18),Fi=n(9),Li=n(10),Hi=n(56),Bi=n(57),qi=n(115),Gi=Rr._29({encapsulation:2,styles:[],data:{}}),Vi=Rr._27("core-h5p-player",Ti.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"core-h5p-player",[],null,null,null,s,Gi)),Rr._30(1,770048,null,0,Ti.a,[Kr.a,Rr.t,xi.a,Di.a,ji.a,Mi.a,Ni.a,Ui.a,Fi.a,Li.a,zr.a,Hi.a,Bi.a,qi.a],null,null)],function(e,t){e(t,1,0)},null)},{src:"src",component:"component",componentId:"componentId"},{},[]),Ki=n(272),Wi=n(480),zi=n(1540),$i=n(1585),Yi=n(1625),Qi=n(1586),Xi=n(1587),Ji=n(25),Zi=n(17),el=n(30),tl=n(20),nl=n(19),ol=n(27),rl=n(33),il=n(23),ll=n(67),al=n(93),sl=n(84),ul=n(103),cl=n(94),dl=n(251),fl=n(199),pl=n(679),hl=Rr._29({encapsulation:2,styles:[],data:{}}),ml=Rr._27("addon-user-profile-field-checkbox",pl.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-user-profile-field-checkbox",[],null,null,null,p,hl)),Rr._30(1,114688,null,0,pl.a,[il.d,ji.a],null,null)],function(e,t){e(t,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{},[]),_l=n(769),gl=n(323),vl=n(261),yl=n(228),bl=n(24),Pl=n(680),Ol=Rr._29({encapsulation:2,styles:[],data:{}}),El=Rr._27("addon-user-profile-field-datetime",Pl.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-user-profile-field-datetime",[],null,null,null,_,Ol)),Rr._30(1,114688,null,0,Pl.a,[il.d,bl.a,ji.a,Zi.a],null,null)],function(e,t){e(t,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{},[]),Cl=n(48),Il=n(16),Rl=n(15),Sl=n(29),wl=n(41),Al=n(32),Dl=n(36),jl=n(108),kl=n(123),Tl=n(109),xl=n(35),Ml=n(59),Nl=n(681),Ul=Rr._29({encapsulation:2,styles:[],data:{}}),Fl=Rr._27("addon-user-profile-field-menu",Nl.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-user-profile-field-menu",[],null,null,null,b,Ul)),Rr._30(1,114688,null,0,Nl.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[]),Ll=n(110),Hl=n(90),Bl=n(34),ql=n(682),Gl=Rr._29({encapsulation:2,styles:[],data:{}}),Vl=Rr._27("addon-user-profile-field-text",ql.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-user-profile-field-text",[],null,null,null,E,Gl)),Rr._30(1,114688,null,0,ql.a,[il.d,ji.a],null,null)],function(e,t){e(t,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[]),Kl=n(250),Wl=n(216),zl=n(683),$l=Rr._29({encapsulation:2,styles:[],data:{}}),Yl=Rr._27("addon-user-profile-field-textarea",zl.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-user-profile-field-textarea",[],null,null,null,R,$l)),Rr._30(1,114688,null,0,zl.a,[],null,null)],function(e,t){e(t,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[]),Ql=n(1536),Xl=n(1539),Jl=n(230),Zl=n(278),ea=n(100),ta=n(54),na=n(51),oa=n(684),ra=n(13),ia=Rr._29({encapsulation:2,styles:[],data:{}}),la=Rr._27("addon-block-activitymodules",oa.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-activitymodules",[],null,null,null,w,ia)),Rr._30(1,114688,null,0,oa.a,[Rr.C,ra.a,Zi.a,Yr.a,xi.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[]),aa=n(1554),sa=n(143),ua=n(92),ca=n(83),da=n(78),fa=n(124),pa=n(114),ha=n(1577),ma=n(383),_a=n(120),ga=n(394),va=n(293),ya=n(38),ba=n(52),Pa=n(70),Oa=n(46),Ea=n(91),Ca=n(76),Ia=n(164),Ra=n(119),Sa=n(685),wa=n(172),Aa=n(102),Da=n(188),ja=Rr._29({encapsulation:2,styles:[],data:{}}),ka=Rr._27("addon-block-myoverview",Sa.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-myoverview",[],null,null,null,$,ja)),Rr._30(1,770048,null,0,Sa.a,[Rr.C,ba.a,wa.a,Fi.a,ya.a,Aa.a,Da.a,xi.a,bl.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),Ta=n(1549),xa=n(482),Ma=n(50),Na=n(686),Ua=n(232),Fa=Rr._29({encapsulation:2,styles:[],data:{}}),La=Rr._27("addon-block-sitemainmenu",Na.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-sitemainmenu",[],null,null,null,J,Fa)),Rr._30(1,114688,null,0,Na.a,[Rr.C,xi.a,ra.a,ya.a,Ua.a,Ma.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),Ha=n(387),Ba=n(688),qa=Rr._29({encapsulation:2,styles:[],data:{}}),Ga=Rr._27("addon-block-timeline-events",Ba.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-timeline-events",[],null,null,null,de,qa)),Rr._30(1,573440,null,0,Ba.a,[[2,Wr.a],ji.a,Mi.a,zr.a,xi.a,ra.a,Rl.a,bl.a],null,null)],null,null)},{events:"events",showCourse:"showCourse",from:"from",to:"to",canLoadMore:"canLoadMore"},{loadMore:"loadMore"},[]),Va=n(687),Ka=n(312),Wa=Rr._29({encapsulation:2,styles:[],data:{}}),za=Rr._27("addon-block-timeline",Va.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-timeline",[],null,null,null,_e,Wa)),Rr._30(1,114688,null,0,Va.a,[Rr.C,ba.a,Ka.a,Aa.a,Da.a,xi.a,bl.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[]),$a=n(689),Ya=Rr._29({encapsulation:2,styles:[],data:{}}),Qa=Rr._27("addon-block-recentlyaccessedcourses",$a.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-recentlyaccessedcourses",[],null,null,null,Ee,Ya)),Rr._30(1,770048,null,0,$a.a,[Rr.C,ba.a,wa.a,Fi.a,ya.a,Aa.a,Da.a,xi.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),Xa=n(89),Ja=n(690),Za=n(467),es=Rr._29({encapsulation:2,styles:[],data:{}}),ts=Rr._27("addon-block-recentlyaccesseditems",Ja.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-recentlyaccesseditems",[],null,null,null,we,es)),Rr._30(1,114688,null,0,Ja.a,[Rr.C,[2,Wr.a],xi.a,Za.a,Rl.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[]),ns=n(691),os=Rr._29({encapsulation:2,styles:[],data:{}}),rs=Rr._27("addon-block-starredcourses",ns.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-block-starredcourses",[],null,null,null,Me,os)),Rr._30(1,770048,null,0,ns.a,[Rr.C,ba.a,wa.a,Fi.a,ya.a,Aa.a,Da.a,xi.a],null,null)],function(e,t){e(t,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),is=n(321),ls=n(153),as=n(633),ss=Rr._29({encapsulation:2,styles:[],data:{}}),us=Rr._27("addon-mod-assign-submission-comments",as.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-assign-submission-comments",[],null,null,null,Ue,ss)),Rr._30(1,49152,null,0,as.a,[ls.a],null,null)],null,null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),cs=n(530),ds=n(326),fs=n(66),ps=n(481),hs=n(316),ms=n(72),_s=n(149),gs=n(636),vs=n(177),ys=n(77),bs=n(133),Ps=n(183),Os=Rr._29({encapsulation:2,styles:[],data:{}}),Es=Rr._27("addon-mod-assign-submission-file",gs.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-assign-submission-file",[],null,null,null,He,Os)),Rr._30(1,114688,null,0,gs.a,[vs.a,ys.a,bs.a,Ps.a,ms.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),Cs=n(637),Is=Rr._29({encapsulation:2,styles:[],data:{}}),Rs=Rr._27("addon-mod-assign-submission-online-text",Cs.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-assign-submission-online-text",[],null,null,null,Ke,Is)),Rr._30(1,114688,null,0,Cs.a,[il.d,zr.a,Mi.a,ys.a,bs.a,Rr.t,xi.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),Ss=n(47),ws=n(248),As=n(639),Ds=n(162),js=n(152),ks=Rr._29({encapsulation:2,styles:[],data:{}}),Ts=Rr._27("addon-mod-assign-feedback-comments",As.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-assign-feedback-comments",[],null,null,null,Qe,ks)),Rr._30(1,114688,null,0,As.a,[Ds.a,Rr.t,zr.a,Mi.a,bs.a,ys.a,il.d,js.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),xs=n(249),Ms=n(215),Ns=n(641),Us=Rr._29({encapsulation:2,styles:[],data:{}}),Fs=Rr._27("addon-mod-assign-feedback-edit-pdf",Ns.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-assign-feedback-edit-pdf",[],null,null,null,Ze,Us)),Rr._30(1,114688,null,0,Ns.a,[Ds.a,ys.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),Ls=n(642),Hs=Rr._29({encapsulation:2,styles:[],data:{}}),Bs=Rr._27("addon-mod-assign-feedback-file",Ls.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-assign-feedback-file",[],null,null,null,nt,Hs)),Rr._30(1,114688,null,0,Ls.a,[Ds.a,ys.a],null,null)],function(e,t){e(t,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),qs=n(1588),Gs=n(1557),Vs=n(1589),Ks=n(1553),Ws=n(692),zs=Rr._29({encapsulation:2,styles:[],data:{}}),$s=Rr._27("addon-mod-data-field-checkbox",Ws.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-checkbox",[],null,null,null,ut,zs)),Rr._30(1,638976,null,0,Ws.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Ys=n(693),Qs=Rr._29({encapsulation:2,styles:[],data:{}}),Xs=Rr._27("addon-mod-data-field-date",Ys.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-date",[],null,null,null,mt,Qs)),Rr._30(1,638976,null,0,Ys.a,[il.d,bl.a,Zi.a],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Js=n(694),Zs=Rr._29({encapsulation:2,styles:[],data:{}}),eu=Rr._27("addon-mod-data-field-file",Js.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-file",[],null,null,null,bt,Zs)),Rr._30(1,638976,null,0,Js.a,[il.d,vs.a],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),tu=n(695),nu=n(360),ou=Rr._29({encapsulation:2,styles:[],data:{}}),ru=Rr._27("addon-mod-data-field-latlong",tu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-latlong",[],null,null,null,At,ou)),Rr._30(1,638976,null,0,tu.a,[il.d,Il.a,nu.a,zr.a,Ir.c,Li.a],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),iu=n(696),lu=Rr._29({encapsulation:2,styles:[],data:{}}),au=Rr._27("addon-mod-data-field-menu",iu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-menu",[],null,null,null,Mt,lu)),Rr._30(1,638976,null,0,iu.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),su=n(697),uu=Rr._29({encapsulation:2,styles:[],data:{}}),cu=Rr._27("addon-mod-data-field-multimenu",su.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-multimenu",[],null,null,null,qt,uu)),Rr._30(1,638976,null,0,su.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),du=n(699),fu=Rr._29({encapsulation:2,styles:[],data:{}}),pu=Rr._27("addon-mod-data-field-number",du.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-number",[],null,null,null,zt,fu)),Rr._30(1,638976,null,0,du.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),hu=n(229),mu=n(700),_u=Rr._29({encapsulation:2,styles:[],data:{}}),gu=Rr._27("addon-mod-data-field-picture",mu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-picture",[],null,null,null,Zt,_u)),Rr._30(1,638976,null,0,mu.a,[il.d,vs.a,zr.a],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),vu=n(701),yu=Rr._29({encapsulation:2,styles:[],data:{}}),bu=Rr._27("addon-mod-data-field-radiobutton",vu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-radiobutton",[],null,null,null,ln,yu)),Rr._30(1,638976,null,0,vu.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Pu=n(698),Ou=Rr._29({encapsulation:2,styles:[],data:{}}),Eu=Rr._27("addon-mod-data-field-text",Pu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-text",[],null,null,null,dn,Ou)),Rr._30(1,638976,null,0,Pu.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Cu=n(702),Iu=Rr._29({encapsulation:2,styles:[],data:{}}),Ru=Rr._27("addon-mod-data-field-textarea",Cu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-textarea",[],null,null,null,vn,Iu)),Rr._30(1,638976,null,0,Cu.a,[il.d,Mi.a],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Su=n(174),wu=n(703),Au=Rr._29({encapsulation:2,styles:[],data:{}}),Du=Rr._27("addon-mod-data-field-url",wu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-data-field-url",[],null,null,null,En,Au)),Rr._30(1,638976,null,0,wu.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),ju=n(1596),ku=n(1600),Tu=n(1548),xu=n(1593),Mu=n(1566),Nu=n(1575),Uu=n(1576),Fu=n(1594),Lu=n(1620),Hu=n(1597),Bu=n(1598),qu=n(1599),Gu=n(1621),Vu=n(659),Ku=Rr._29({encapsulation:2,styles:[],data:{}}),Wu=Rr._27("addon-mod-quiz-access-offline-attempts",Vu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-quiz-access-offline-attempts",[],null,null,null,Cn,Ku)),Rr._30(1,114688,null,0,Vu.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),zu=n(736),$u=n(378),Yu=n(660),Qu=Rr._29({encapsulation:2,styles:[],data:{}}),Xu=Rr._27("addon-mod-quiz-access-password",Yu.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-quiz-access-password",[],null,null,null,In,Qu)),Rr._30(1,114688,null,0,Yu.a,[il.d],null,null)],function(e,t){e(t,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),Ju=n(661),Zu=Rr._29({encapsulation:2,styles:[],data:{}}),ec=Rr._27("addon-mod-quiz-access-time-limit",Ju.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-quiz-access-time-limit",[],null,null,null,Rn,Zu)),Rr._30(1,49152,null,0,Ju.a,[],null,null)],null,null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),tc=n(1601),nc=n(1603),oc=n(1602),rc=n(1567),ic=n(381),lc=n(670),ac=Rr._29({encapsulation:2,styles:[],data:{}}),sc=Rr._27("addon-mod-workshop-assessment-strategy-accumulative",lc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-accumulative",[],null,null,null,Un,ac)),Rr._30(1,49152,null,0,lc.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),uc=n(671),cc=Rr._29({encapsulation:2,styles:[],data:{}}),dc=Rr._27("addon-mod-workshop-assessment-strategy-comments",uc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-comments",[],null,null,null,Gn,cc)),Rr._30(1,49152,null,0,uc.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),fc=n(137),pc=n(86),hc=n(43),mc=n(176),_c=n(145),gc=n(672),vc=Rr._29({encapsulation:2,styles:[],data:{}}),yc=Rr._27("addon-mod-workshop-assessment-strategy-numerrors",gc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-numerrors",[],null,null,null,Yn,vc)),Rr._30(1,49152,null,0,gc.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),bc=n(673),Pc=Rr._29({encapsulation:2,styles:[],data:{}}),Oc=Rr._27("addon-mod-workshop-assessment-strategy-rubric",bc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-rubric",[],null,null,null,eo,Pc)),Rr._30(1,49152,null,0,bc.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),Ec=n(1595),Cc=n(1604),Ic=n(1622),Rc=n(1605),Sc=n(468),wc=Rr._29({encapsulation:2,styles:[],data:{}}),Ac=Rr._27("addon-qbehaviour-deferredcbm",Sc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qbehaviour-deferredcbm",[],null,null,null,oo,wc)),Rr._30(1,49152,null,0,Sc.a,[],null,null)],null,null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Dc=n(706),jc=Rr._29({encapsulation:2,styles:[],data:{}}),kc=Rr._27("addon-qbehaviour-informationitem",Dc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qbehaviour-informationitem",[],null,null,null,io,jc)),Rr._30(1,49152,null,0,Dc.a,[],null,null)],null,null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Tc=n(470),xc=Rr._29({encapsulation:2,styles:[],data:{}}),Mc=Rr._27("addon-qtype-calculated",Tc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-calculated",[],null,null,null,Oo,xc)),Rr._30(1,114688,null,0,Tc.a,[Kr.a,Rr.C],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Nc=n(708),Uc=Rr._29({encapsulation:2,styles:[],data:{}}),Fc=Rr._27("addon-qtype-ddimageortext",Nc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-ddimageortext",[],null,null,null,Ro,Uc)),Rr._30(1,245760,null,0,Nc.a,[Kr.a,Rr.C,Rr.t],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Lc=n(709),Hc=Rr._29({encapsulation:2,styles:[],data:{}}),Bc=Rr._27("addon-qtype-ddmarker",Lc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-ddmarker",[],null,null,null,Do,Hc)),Rr._30(1,245760,null,0,Lc.a,[Kr.a,Rr.C,Rr.t,xi.a,Di.a,Ui.a],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),qc=n(710),Gc=Rr._29({encapsulation:2,styles:[],data:{}}),Vc=Rr._27("addon-qtype-ddwtos",qc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-ddwtos",[],null,null,null,xo,Gc)),Rr._30(1,245760,null,0,qc.a,[Kr.a,Rr.C,Rr.t],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Kc=n(711),Wc=Rr._29({encapsulation:2,styles:[],data:{}}),zc=Rr._27("addon-qtype-description",Kc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-description",[],null,null,null,Uo,Wc)),Rr._30(1,114688,null,0,Kc.a,[Kr.a,Rr.C],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),$c=n(712),Yc=Rr._29({encapsulation:2,styles:[],data:{}}),Qc=Rr._27("addon-qtype-essay",$c.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-essay",[],null,null,null,$o,Yc)),Rr._30(1,114688,null,0,$c.a,[Kr.a,Rr.C,il.d],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Xc=n(713),Jc=Rr._29({encapsulation:2,styles:[],data:{}}),Zc=Rr._27("addon-qtype-gapselect",Xc.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-gapselect",[],null,null,null,Qo,Jc)),Rr._30(1,114688,null,0,Xc.a,[Kr.a,Rr.C,Rr.t],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),ed=n(471),td=Rr._29({encapsulation:2,styles:[],data:{}}),nd=Rr._27("addon-qtype-match",ed.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-match",[],null,null,null,or,td)),Rr._30(1,114688,null,0,ed.a,[Kr.a,Rr.C],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),od=n(715),rd=Rr._29({encapsulation:2,styles:[],data:{}}),id=Rr._27("addon-qtype-multianswer",od.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-multianswer",[],null,null,null,ir,rd)),Rr._30(1,114688,null,0,od.a,[Kr.a,Rr.C,Rr.t],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),ld=n(364),ad=Rr._29({encapsulation:2,styles:[],data:{}}),sd=Rr._27("addon-qtype-multichoice",ld.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-multichoice",[],null,null,null,yr,ad)),Rr._30(1,114688,null,0,ld.a,[Kr.a,Rr.C],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),ud=n(716),cd=Rr._29({encapsulation:2,styles:[],data:{}}),dd=Rr._27("addon-qtype-shortanswer",ud.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"addon-qtype-shortanswer",[],null,null,null,Er,cd)),Rr._30(1,114688,null,0,ud.a,[Kr.a,Rr.C],null,null)],function(e,t){e(t,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),fd=n(1050),pd=n(220),hd=n(308),md=n(39),_d=n(205),gd=n(489),vd=n(348),yd=n(125),bd=n(150),Pd=n(466),Od=n(465),Ed=n(185),Cd=Rr._29({encapsulation:2,styles:[],data:{}}),Id=Rr._27("ng-component",gd.a,function(e){return Rr._57(0,[(e()(),Rr._31(0,0,null,null,1,"ng-component",[],null,null,null,Cr,Cd)),Rr._30(1,114688,null,0,gd.a,[Il.a,Kr.a,vd.a,wr.b,Fi.a,yd.a,Rr.M,Li.a,bd.a,xi.a,Pd.a,Od.a,ji.a,Di.a,Ed.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Rd=n(573),Sd=n(788),wd=n(787),Ad=n(413),Dd=n(262),jd=n(440),kd=n(617),Td=n(754),xd=n(739),Md=n(385),Nd=n(60),Ud=n(283),Fd=n(375),Ld=n(751),Hd=n(389),Bd=n(737),qd=n(740),Gd=n(169),Vd=n(401),Kd=n(386),Wd=n(234),zd=n(264),$d=n(572),Yd=n(187),Qd=n(107),Xd=n(575),Jd=n(154),Zd=n(62),ef=n(58),tf=n(574),nf=n(209),of=n(340),rf=n(547),lf=n(270),af=n(576),sf=n(720),uf=n(3),cf=n(31),df=n(106),ff=n(26),pf=n(555),hf=n(427),mf=n(554),_f=n(472),gf=n(366),vf=n(367),yf=n(369),bf=n(368),Pf=n(126),Of=n(426),Ef=n(1298),Cf=n(309),If=n(435),Rf=n(436),Sf=n(437),wf=n(546),Af=n(581),Df=n(541),jf=n(438),kf=n(566),Tf=n(439),xf=n(171),Mf=n(441),Nf=n(354),Uf=n(358),Ff=n(353),Lf=n(151),Hf=n(310),Bf=n(774),qf=n(88),Gf=n(1087),Vf=n(606),Kf=n(607),Wf=n(170),zf=n(391),$f=n(352),Yf=n(567),Qf=n(178),Xf=n(144),Jf=n(568),Zf=n(490),ep=n(132),tp=n(136),np=n(71),op=n(446),rp=n(233),ip=n(65),lp=n(135),ap=n(586),sp=n(599),up=n(587),cp=n(1070),dp=n(487),fp=n(1071),pp=n(1072),hp=n(1073),mp=n(1074),_p=n(598),gp=n(445),vp=n(442),yp=n(355),bp=n(539),Pp=n(1075),Op=n(1076),Ep=n(1077),Cp=n(1079),Ip=n(1078),Rp=n(600),Sp=n(488),wp=n(502),Ap=n(1090),Dp=n(611),jp=n(597),kp=n(1059),Tp=n(1063),xp=n(1062),Mp=n(1065),Np=n(1064),Up=n(1061),Fp=n(1060),Lp=n(81),Hp=n(397),Bp=n(1066),qp=n(1067),Gp=n(204),Vp=n(1068),Kp=n(227),Wp=n(1069),zp=n(596),$p=n(1091),Yp=n(612),Qp=n(595),Xp=n(372),Jp=n(483),Zp=n(104),eh=n(1092),th=n(1093),nh=n(1094),oh=n(1095),rh=n(615),ih=n(1096),lh=n(1097),ah=n(613),sh=n(738),uh=n(168),ch=n(1080),dh=n(1081),fh=n(184),ph=n(1082),hh=n(1083),mh=n(1084),_h=n(602),gh=n(727),vh=n(1301),yh=n(477),bh=n(741),Ph=n(593),Oh=n(155),Eh=n(191),Ch=n(325),Ih=n(609),Rh=n(73),Sh=n(128),wh=n(610),Ah=n(117),Dh=n(393),jh=n(129),kh=n(590),Th=n(166),xh=n(585),Mh=n(192),Nh=n(1303),Uh=n(1302),Fh=n(1304),Lh=n(608),Hh=n(388),Bh=n(521),qh=n(1306),Gh=n(1305),Vh=n(271),Kh=n(594),Wh=n(1307),zh=n(1098),$h=n(1099),Yh=n(616),Qh=n(163),Xh=n(1309),Jh=n(1310),Zh=n(1311),em=n(1308),tm=n(601),nm=n(1085),om=n(605),rm=n(1086),im=n(603),lm=n(1312),am=n(214),sm=n(1313),um=n(284),cm=n(1122),dm=n(1123),fm=n(1124),pm=n(1125),hm=n(624),mm=n(374),_m=n(274),gm=n(748),vm=n(206),ym=n(1315),bm=n(1316),Pm=n(1317),Om=n(1318),Em=n(1319),Cm=n(1314),Im=n(755),Rm=n(275),Sm=n(186),wm=n(1126),Am=n(276),Dm=n(478),jm=n(1127),km=n(1128),Tm=n(625),xm=n(749),Mm=n(165),Nm=n(1130),Um=n(1129),Fm=n(1131),Lm=n(1132),Hm=n(1133),Bm=n(1134),qm=n(1135),Gm=n(1136),Vm=n(626),Km=n(750),Wm=n(1321),zm=n(1322),$m=n(1320),Ym=n(1325),Qm=n(1324),Xm=n(1327),Jm=n(1326),Zm=n(1329),e_=n(1328),t_=n(1331),n_=n(1330),o_=n(1333),r_=n(1332),i_=n(1323),l_=n(1137),a_=n(627),s_=n(74),u_=n(1335),c_=n(1336),d_=n(1334),f_=n(1338),p_=n(1337),h_=n(1340),m_=n(1339),__=n(1344),g_=n(1343),v_=n(1342),y_=n(1341),b_=n(1346),P_=n(1345),O_=n(1348),E_=n(1347),C_=n(1350),I_=n(1349),R_=n(1352),S_=n(1351),w_=n(1354),A_=n(1353),D_=n(1356),j_=n(1355),k_=n(1365),T_=n(1364),x_=n(277),M_=n(1358),N_=n(1359),U_=n(1357),F_=n(1361),L_=n(1360),H_=n(1363),B_=n(1362),q_=n(1367),G_=n(1366),V_=n(1369),K_=n(1370),W_=n(1368),z_=n(1372),$_=n(1373),Y_=n(1371),Q_=n(1375),X_=n(1376),J_=n(1374),Z_=n(1378),eg=n(1379),tg=n(1377),ng=n(1381),og=n(1380),rg=n(1383),ig=n(1382),lg=n(1385),ag=n(1386),sg=n(1384),ug=n(1388),cg=n(1387),dg=n(1390),fg=n(1389),pg=n(1154),hg=n(1153),mg=n(635),_g=n(1155),gg=n(1157),vg=n(1156),yg=n(1152),bg=n(638),Pg=n(1159),Og=n(1161),Eg=n(1160),Cg=n(1163),Ig=n(1162),Rg=n(1158),Sg=n(1146),wg=n(317),Ag=n(1147),Dg=n(1148),jg=n(1149),kg=n(1150),Tg=n(1151),xg=n(632),Mg=n(752),Ng=n(221),Ug=n(1164),Fg=n(1165),Lg=n(398),Hg=n(1166),Bg=n(1167),qg=n(643),Gg=n(734),Vg=n(279),Kg=n(1170),Wg=n(1168),zg=n(1171),$g=n(1169),Yg=n(644),Qg=n(753),Xg=n(1172),Jg=n(295),Zg=n(294),ev=n(591),tv=n(1173),nv=n(296),ov=n(1175),rv=n(1174),iv=n(645),lv=n(476),av=n(592),sv=n(127),uv=n(1403),cv=n(1402),dv=n(1405),fv=n(1404),pv=n(1407),hv=n(1406),mv=n(1409),_v=n(1408),gv=n(1411),vv=n(1410),yv=n(1413),bv=n(1412),Pv=n(1415),Ov=n(1414),Ev=n(1417),Cv=n(1416),Iv=n(1419),Rv=n(1418),Sv=n(363),wv=n(1420),Av=n(1422),Dv=n(1421),jv=n(1424),kv=n(1423),Tv=n(1401),xv=n(292),Mv=n(97),Nv=n(1392),Uv=n(201),Fv=n(217),Lv=n(231),Hv=n(236),Bv=n(328),qv=n(399),Gv=n(1393),Vv=n(1399),Kv=n(1394),Wv=n(1395),zv=n(1396),$v=n(1397),Yv=n(1398),Qv=n(1400),Xv=n(1391),Jv=n(1426),Zv=n(1427),ey=n(704),ty=n(1428),ny=n(1425),oy=n(759),ry=n(286),iy=n(1210),ly=n(330),ay=n(287),sy=n(1211),uy=n(1212),cy=n(1213),dy=n(1214),fy=n(1215),py=n(1216),hy=n(655),my=n(763),_y=n(223),gy=n(299),vy=n(1250),yy=n(406),by=n(1251),Py=n(1253),Oy=n(1252),Ey=n(662),Cy=n(726),Iy=n(297),Ry=n(134),Sy=n(1176),wy=n(252),Ay=n(647),Dy=n(1177),jy=n(285),ky=n(1185),Ty=n(1178),xy=n(1179),My=n(1180),Ny=n(1181),Uy=n(1182),Fy=n(1183),Ly=n(1184),Hy=n(646),By=n(756),qy=n(1186),Gy=n(329),Vy=n(1187),Ky=n(1188),Wy=n(1190),zy=n(1189),$y=n(648),Yy=n(731),Qy=n(735),Xy=n(1191),Jy=n(280),Zy=n(254),eb=n(402),tb=n(1192),nb=n(1193),ob=n(1194),rb=n(1195),ib=n(1197),lb=n(1196),ab=n(1198),sb=n(649),ub=n(757),cb=n(1199),db=n(258),fb=n(203),pb=n(507),hb=n(362),mb=n(403),_b=n(1200),gb=n(1201),vb=n(1202),yb=n(1203),bb=n(1204),Pb=n(1205),Ob=n(652),Eb=n(760),Cb=n(298),Ib=n(1217),Rb=n(1218),Sb=n(1219),wb=n(1220),Ab=n(656),Db=n(761),jb=n(222),kb=n(1221),Tb=n(331),xb=n(405),Mb=n(1222),Nb=n(1224),Ub=n(1223),Fb=n(657),Lb=n(762),Hb=n(1233),Bb=n(1232),qb=n(1235),Gb=n(1234),Vb=n(1237),Kb=n(1236),Wb=n(263),zb=n(167),$b=n(253),Yb=n(138),Qb=n(332),Xb=n(259),Jb=n(1239),Zb=n(1238),eP=n(1241),tP=n(1240),nP=n(1243),oP=n(1242),rP=n(1245),iP=n(1244),lP=n(1247),aP=n(1246),sP=n(1249),uP=n(1248),cP=n(1225),dP=n(1226),fP=n(1227),pP=n(1228),hP=n(1229),mP=n(1230),_P=n(1231),gP=n(658),vP=n(764),yP=n(1254),bP=n(333),PP=n(288),OP=n(1255),EP=n(1256),CP=n(1257),IP=n(1258),RP=n(663),SP=n(766),wP=n(303),AP=n(335),DP=n(1263),jP=n(1264),kP=n(1265),TP=n(1266),xP=n(666),MP=n(765),NP=n(1259),UP=n(301),FP=n(300),LP=n(334),HP=n(665),BP=n(1260),qP=n(302),GP=n(1262),VP=n(1261),KP=n(664),WP=n(484),zP=n(1278),$P=n(1277),YP=n(1280),QP=n(1279),XP=n(1282),JP=n(1281),ZP=n(1284),eO=n(1283),tO=n(1276),nO=n(189),oO=n(175),rO=n(1285),iO=n(1286),lO=n(202),aO=n(291),sO=n(1288),uO=n(1289),cO=n(1287),dO=n(669),fO=n(758),pO=n(237),hO=n(1206),mO=n(404),_O=n(1207),gO=n(1209),vO=n(1208),yO=n(654),bO=n(767),PO=n(1267),OO=n(289),EO=n(235),CO=n(290),IO=n(1268),RO=n(1269),SO=n(1270),wO=n(1271),AO=n(1272),DO=n(1273),jO=n(1274),kO=n(1275),TO=n(667),xO=n(628),MO=n(495),NO=n(1430),UO=n(1429),FO=n(380),LO=n(161),HO=n(1138),BO=n(1142),qO=n(1141),GO=n(1139),VO=n(503),KO=n(1143),WO=n(1145),zO=n(630),$O=n(631),YO=n(1140),QO=n(1144),XO=n(629),JO=n(768),ZO=n(304),eE=n(260),tE=n(1290),nE=n(1292),oE=n(336),rE=n(1291),iE=n(674),lE=n(256),aE=n(1293),sE=n(1294),uE=n(520),cE=n(1295),dE=n(1296),fE=n(675),pE=n(1297),hE=n(676),mE=n(1433),_E=n(1432),gE=n(1435),vE=n(1434),yE=n(705),bE=n(1437),PE=n(1436),OE=n(1438),EE=n(1440),CE=n(1439),IE=n(1442),RE=n(1441),SE=n(1444),wE=n(1443),AE=n(1446),DE=n(1445),jE=n(1448),kE=n(1447),TE=n(1450),xE=n(1449),ME=n(1431),NE=n(469),UE=n(1452),FE=n(707),LE=n(1454),HE=n(1453),BE=n(1456),qE=n(1455),GE=n(1458),VE=n(1457),KE=n(1460),WE=n(1459),zE=n(1462),$E=n(1461),YE=n(1464),QE=n(1463),XE=n(1466),JE=n(1465),ZE=n(1468),eC=n(1467),tC=n(714),nC=n(1469),oC=n(1471),rC=n(1470),iC=n(1472),lC=n(1474),aC=n(1473),sC=n(1476),uC=n(1475),cC=n(1478),dC=n(1477),fC=n(1480),pC=n(1479),hC=n(1451),mC=n(1482),_C=n(1481),gC=n(1485),vC=n(1484),yC=n(1487),bC=n(1486),PC=n(1489),OC=n(1488),EC=n(1491),CC=n(1490),IC=n(1493),RC=n(1492),SC=n(1495),wC=n(1494),AC=n(1497),DC=n(1496),jC=n(1499),kC=n(1498),TC=n(1501),xC=n(1500),MC=n(1503),NC=n(1502),UC=n(1505),FC=n(1504),LC=n(1507),HC=n(1506),BC=n(1509),qC=n(1508),GC=n(1511),VC=n(1510),KC=n(1483),WC=n(1299),zC=n(1300),$C=n(400),YC=Rr._28(Sr.a,[wr.b],function(e){return Rr._40([Rr._41(512,Rr.o,Rr._21,[[8,[Ar.a,Dr.a,jr.a,kr.a,Tr.a,xr.a,Mr.a,Nr.a,Ur.a,Fr.a,Lr.a,Hr.a,Br.a,qr.a,Xr,Jr.a,Zr.a,ei.a,ti.a,ni.a,oi.a,ri.a,ii.a,li.a,ai.a,si.a,ui.a,ci.a,di.a,fi.a,pi.a,hi.a,mi.a,_i.a,Vi,Ki.a,Wi.a,zi.a,$i.a,Yi.a,Qi.a,Xi.a,ml,El,Fl,Vl,Yl,Ql.a,Xl.a,la,aa.a,ka,La,za,Ga,Qa,ts,rs,us,Es,Rs,Ts,Fs,Bs,qs.a,Gs.a,Vs.a,Ks.a,$s,Xs,eu,ru,au,cu,pu,gu,bu,Eu,Ru,Du,ju.a,ku.a,Tu.a,xu.a,Mu.a,Nu.a,Uu.a,Fu.a,Lu.a,Hu.a,Bu.a,qu.a,Gu.a,Wu,Xu,ec,tc.a,nc.a,oc.a,rc.a,sc,dc,yc,Oc,Ec.a,Cc.a,Ic.a,Rc.a,Ac,kc,Mc,Fc,Bc,Vc,zc,Qc,Zc,nd,id,sd,dd,Id]],[3,Rr.o],Rr.K]),Rr._41(5120,Rr.G,Rr._51,[[3,Rr.G]]),Rr._41(4608,Ci.m,Ci.l,[Rr.G,[2,Ci.w]]),Rr._41(5120,Rr.b,Rr._33,[]),Rr._41(5120,Rr.E,Rr._42,[]),Rr._41(5120,Rr.F,Rr._45,[]),Rr._41(6144,Rr.Z,null,[Ir.c]),Rr._41(4608,Ir.f,Rd.a,[]),Rr._41(5120,Ir.d,function(e,t,n,o,r){return[new Ir.k(e,t),new Ir.p(n),new Ir.n(o,r)]},[Ci.c,Rr.M,Ci.c,Ci.c,Ir.f]),Rr._41(4608,Ir.e,Ir.e,[Ir.d,Rr.M]),Rr._41(135680,Ir.m,Ir.m,[Ci.c]),Rr._41(4608,Ir.l,Ir.l,[Ir.e,Ir.m]),Rr._41(5120,Sd.a,wd.d,[]),Rr._41(5120,Sd.c,wd.e,[]),Rr._41(4608,Sd.b,wd.c,[Sd.a,Sd.c]),Rr._41(5120,Rr.X,wd.f,[Ir.l,Sd.b,Rr.M]),Rr._41(6144,Ir.q,null,[Ir.m]),Rr._41(4608,Rr._7,Rr._7,[Rr.M]),Rr._41(4608,Ir.h,Ir.h,[Ci.c]),Rr._41(4608,Ir.i,Ir.i,[Ci.c]),Rr._41(4608,Ad.b,wd.b,[Rr.X,Ir.b]),Rr._41(4608,Dd.h,Dd.n,[Ci.c,Rr.Q,Dd.l]),Rr._41(4608,Dd.o,Dd.o,[Dd.h,Dd.m]),Rr._41(5120,Dd.a,function(e){return[e,new jd.a]},[Dd.o]),Rr._41(4608,il.x,il.x,[]),Rr._41(4608,il.d,il.d,[]),Rr._41(5120,nu.a,kd.m,[Li.a]),Rr._41(4608,Td.a,Td.a,[]),Rr._41(4608,Da.a,Da.a,[ba.a,ji.a,wa.a,Zi.a,Pa.a,xi.a]),Rr._41(4608,xd.a,xd.a,[Kr.a,Zi.a]),Rr._41(4608,Md.a,Md.a,[ra.a,Nd.a]),Rr._41(4608,Ud.a,Ud.a,[xi.a]),Rr._41(4608,Fd.a,Fd.a,[xi.a,Oa.a,Zi.a]),Rr._41(4608,Ld.a,Ld.a,[xi.a,_s.a,Hd.a,zr.a]),Rr._41(4608,Za.a,Za.a,[xi.a,ra.a,zr.a]),Rr._41(4608,Bd.a,Bd.a,[Zi.a,Mi.a]),Rr._41(4608,qd.a,qd.a,[zr.a,il.d,Zi.a,Mi.a,bl.a,Gd.a]),Rr._41(4608,Vd.a,Vd.a,[ra.a]),Rr._41(4608,Kd.a,Kd.a,[xi.a,Zi.a,zr.a,ji.a,Wd.a,zd.a]),Rr._41(4608,$d.a,$d.a,[]),Rr._41(4608,nl.a,nl.a,[]),Rr._41(4608,Yd.a,Yd.a,[Il.a]),Rr._41(4608,Qd.a,Qd.a,[yi.a,Il.a,Rr.M,Bl.a]),Rr._41(4608,vl.a,vl.a,[xl.a,yi.a]),Rr._41(4608,Xd.a,Xd.a,[yi.a,Il.a,Bl.a,xl.a,hc.l]),Rr._41(4608,_d.a,_d.a,[Il.a,yi.a]),Rr._41(4608,Ai.a,Ai.a,[Kr.a,Bi.a,xi.a,Di.a,Mi.a,ji.a,zr.a,Il.a,Li.a,Zi.a,Ed.a,Rr.M,yi.a,Rl.a]),Rr._41(4608,Od.a,Od.a,[Kr.a,Li.a,ji.a,yd.a,Rl.a,Jd.a,zr.a,Di.a,xi.a,Mi.a,Zd.a,Zi.a,ef.a]),Rr._41(4608,Pd.a,Pd.a,[]),Rr._41(512,Ci.b,Ci.b,[]),Rr._41(1024,Rr.u,Ir.r,[]),Rr._41(256,yi.b,{pageTransition:"core-page-transition"},[]),Rr._41(1024,tf.a,tf.b,[]),Rr._41(1024,Il.a,Il.b,[Ir.b,tf.a,Rr.M]),Rr._41(1024,yi.a,yi.c,[yi.b,Il.a]),Rr._41(512,Bl.a,Bl.a,[Il.a]),Rr._41(512,nf.a,nf.a,[]),Rr._41(512,xl.a,xl.a,[yi.a,Il.a,[2,nf.a]]),Rr._41(512,hc.l,hc.l,[xl.a]),Rr._41(256,of.a,{links:[{loadChildren:"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory#AddonBadgesIssuedBadgePageModuleNgFactory",name:"AddonBadgesIssuedBadgePage",segment:"addon-badges-issued-badge",priority:"low",defaultHistory:[]},{loadChildren:"../addon/badges/pages/user-badges/user-badges.module.ngfactory#AddonBadgesUserBadgesPageModuleNgFactory",name:"AddonBadgesUserBadgesPage",segment:"addon-badges-user-badges",priority:"low",defaultHistory:[]},{loadChildren:"../addon/blog/pages/entries/entries.module.ngfactory#AddonBlogEntriesPageModuleNgFactory",name:"AddonBlogEntriesPage",segment:"addon-blog-entries",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/settings/settings.module.ngfactory#AddonCalendarSettingsPageModuleNgFactory",name:"AddonCalendarSettingsPage",segment:"addon-calendar-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencies/competencies.module.ngfactory#AddonCompetencyCompetenciesPageModuleNgFactory",name:"AddonCompetencyCompetenciesPage",segment:"addon-competency-competencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competency/competency.module.ngfactory#AddonCompetencyCompetencyPageModuleNgFactory",name:"AddonCompetencyCompetencyPage",segment:"addon-competency-competency",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory#AddonCompetencyCompetencySummaryPageModuleNgFactory",name:"AddonCompetencyCompetencySummaryPage",segment:"addon-competency-competency-summary",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory#AddonCompetencyCourseCompetenciesPageModuleNgFactory",name:"AddonCompetencyCourseCompetenciesPage",segment:"addon-competency-coursecompetencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/plan/plan.module.ngfactory#AddonCompetencyPlanPageModuleNgFactory",name:"AddonCompetencyPlanPage",segment:"addon-competency-plan",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/planlist/planlist.module.ngfactory#AddonCompetencyPlanListPageModuleNgFactory",name:"AddonCompetencyPlanListPage",segment:"addon-competency-planlist",priority:"low",defaultHistory:[]},{loadChildren:"../addon/coursecompletion/pages/report/report.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonCourseCompletionReportPage",segment:"addon-course-completion-report",priority:"low",defaultHistory:[]},{loadChildren:"../addon/files/pages/list/list.module.ngfactory#AddonFilesListPageModuleNgFactory",name:"AddonFilesListPage",segment:"addon-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory#AddonMessageOutputAirnotifierDevicesPageModuleNgFactory",name:"AddonMessageOutputAirnotifierDevicesPage",segment:"addon-message-output-airnotifier-devices",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/contacts/contacts.module.ngfactory#AddonMessagesContactsPageModuleNgFactory",name:"AddonMessagesContactsPage",segment:"addon-messages-contacts",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory#AddonMessagesConversationInfoPageModuleNgFactory",name:"AddonMessagesConversationInfoPage",segment:"addon-messages-conversation-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/index/index.module.ngfactory#AddonMessagesIndexPageModuleNgFactory",name:"AddonMessagesIndexPage",segment:"addon-messages-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory#AddonModAssignEditFeedbackModalPageModuleNgFactory",name:"AddonModAssignEditFeedbackModalPage",segment:"addon-mod-assign-edit-feedback-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/index/index.module.ngfactory#AddonModAssignIndexPageModuleNgFactory",name:"AddonModAssignIndexPage",segment:"addon-mod-assign-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory#AddonModAssignSubmissionReviewPageModuleNgFactory",name:"AddonModAssignSubmissionReviewPage",segment:"addon-mod-assign-submission-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/index/index.module.ngfactory#AddonModBookIndexPageModuleNgFactory",name:"AddonModBookIndexPage",segment:"addon-mod-book-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/toc/toc.module.ngfactory#AddonModBookTocPageModuleNgFactory",name:"AddonModBookTocPage",segment:"addon-mod-book-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/index/index.module.ngfactory#AddonModChatIndexPageModuleNgFactory",name:"AddonModChatIndexPage",segment:"addon-mod-chat-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/session-messages/session-messages.module.ngfactory#AddonModChatSessionMessagesPageModuleNgFactory",name:"AddonModChatSessionMessagesPage",segment:"addon-mod-chat-session-messages",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/sessions/sessions.module.ngfactory#AddonModChatSessionsPageModuleNgFactory",name:"AddonModChatSessionsPage",segment:"addon-mod-chat-sessions",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/users/users.module.ngfactory#AddonModChatUsersPageModuleNgFactory",name:"AddonModChatUsersPage",segment:"addon-mod-chat-users",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/choice/pages/index/index.module.ngfactory#AddonModChoiceIndexPageModuleNgFactory",name:"AddonModChoiceIndexPage",segment:"addon-mod-choice-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/index/index.module.ngfactory#AddonModDataIndexPageModuleNgFactory",name:"AddonModDataIndexPage",segment:"addon-mod-data-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory#AddonModFeedbackAttemptPageModuleNgFactory",name:"AddonModFeedbackAttemptPage",segment:"addon-mod-feedback-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/index/index.module.ngfactory#AddonModFeedbackIndexPageModuleNgFactory",name:"AddonModFeedbackIndexPage",segment:"addon-mod-feedback-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory#AddonModFeedbackNonRespondentsPageModuleNgFactory",name:"AddonModFeedbackNonRespondentsPage",segment:"addon-mod-feedback-nonrespondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory#AddonModFeedbackRespondentsPageModuleNgFactory",name:"AddonModFeedbackRespondentsPage",segment:"addon-mod-feedback-respondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/folder/pages/index/index.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonModFolderIndexPage",segment:"addon-mod-folder-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/edit-post/edit-post.module.ngfactory#AddonModForumEditPostPageModuleNgFactory",name:"AddonModForumEditPostPage",segment:"addon-mod-edit-post",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/index/index.module.ngfactory#AddonModForumIndexPageModuleNgFactory",name:"AddonModForumIndexPage",segment:"addon-mod-forum-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/sort-order-selector/sort-order-selector.module.ngfactory#AddonModForumSortOrderSelectorPagePageModuleNgFactory",name:"AddonModForumSortOrderSelectorPage",segment:"addon-mod-forum-sort-order-selector",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/entry/entry.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModGlossaryEntryPage",segment:"addon-mod-glossary-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/index/index.module.ngfactory#AddonModGlossaryIndexPageModuleNgFactory",name:"AddonModGlossaryIndexPage",segment:"addon-mod-glossary-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/index/index.module.ngfactory#AddonModImscpIndexPageModuleNgFactory",name:"AddonModImscpIndexPage",segment:"addon-mod-imscp-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/toc/toc.module.ngfactory#AddonModImscpTocPageModuleNgFactory",name:"AddonModImscpTocPage",segment:"addon-mod-imscp-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/index/index.module.ngfactory#AddonModLessonIndexPageModuleNgFactory",name:"AddonModLessonIndexPage",segment:"addon-mod-lesson-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory#AddonModLessonMenuModalPageModuleNgFactory",name:"AddonModLessonMenuModalPage",segment:"addon-mod-lesson-menu-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory#AddonModLessonPasswordModalPageModuleNgFactory",name:"AddonModLessonPasswordModalPage",segment:"addon-mod-lesson-password-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lti/pages/index/index.module.ngfactory#AddonModLtiIndexPageModuleNgFactory",name:"AddonModLtiIndexPage",segment:"addon-mod-lti-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/page/pages/index/index.module.ngfactory#AddonModPageIndexPageModuleNgFactory",name:"AddonModPageIndexPage",segment:"addon-mod-page-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory#AddonModQuizAttemptPageModuleNgFactory",name:"AddonModQuizAttemptPage",segment:"addon-mod-quiz-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/index/index.module.ngfactory#AddonModQuizIndexPageModuleNgFactory",name:"AddonModQuizIndexPage",segment:"addon-mod-quiz-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory#AddonModQuizNavigationModalPageModuleNgFactory",name:"AddonModQuizNavigationModalPage",segment:"addon-mod-quiz-navigation-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory#AddonModQuizPreflightModalModuleNgFactory",name:"AddonModQuizPreflightModalPage",segment:"addon-mod-quiz-preflight-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/resource/pages/index/index.module.ngfactory#AddonModResourceIndexPageModuleNgFactory",name:"AddonModResourceIndexPage",segment:"addon-mod-resource-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/index/index.module.ngfactory#AddonModScormIndexPageModuleNgFactory",name:"AddonModScormIndexPage",segment:"addon-mod-scorm-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/toc/toc.module.ngfactory#AddonModScormTocPageModuleNgFactory",name:"AddonModScormTocPage",segment:"addon-mod-scorm-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/survey/pages/index/index.module.ngfactory#AddonModSurveyIndexPageModuleNgFactory",name:"AddonModSurveyIndexPage",segment:"addon-mod-survey-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/url/pages/index/index.module.ngfactory#AddonModUrlIndexPageModuleNgFactory",name:"AddonModUrlIndexPage",segment:"addon-mod-url-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/index/index.module.ngfactory#AddonModWikiIndexPageModuleNgFactory",name:"AddonModWikiIndexPage",segment:"addon-mod-wiki-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/map/map.module.ngfactory#AddonModWikiMapPageModuleNgFactory",name:"AddonModWikiMapPage",segment:"addon-mod-wiki-map",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/index/index.module.ngfactory#AddonModWorkshopIndexPageModuleNgFactory",name:"AddonModWorkshopIndexPage",segment:"addon-mod-workshop-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/phase/phase.module.ngfactory#AddonModWorkshopPhaseInfoPageModuleNgFactory",name:"AddonModWorkshopPhaseInfoPage",segment:"addon-mod-workshop-phase-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/add/add.module.ngfactory#AddonNotesAddPageModuleNgFactory",name:"AddonNotesAddPage",segment:"addon-notes-add",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/list/list.module.ngfactory#AddonNotesListPageModuleNgFactory",name:"AddonNotesListPage",segment:"addon-notes-list-page",priority:"low",defaultHistory:[]},{loadChildren:"../addon/storagemanager/pages/course-storage/course-storage.module.ngfactory#AddonStorageManagerCourseStoragePageModuleNgFactory",name:"AddonStorageManagerCourseStoragePage",segment:"addon-storagemanager-course-storage",priority:"low",defaultHistory:[]},{loadChildren:"../components/split-view/placeholder/placeholder.module.ngfactory#CorePlaceholderPageModuleNgFactory",name:"CoreSplitViewPlaceholderPage",segment:"core-placeholder",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/add/add.module.ngfactory#CoreCommentsAddPageModuleNgFactory",name:"CoreCommentsAddPage",segment:"core-comments-add",priority:"low",defaultHistory:[]},{loadChildren:"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory#CoreContentLinksChooseSitePageModuleNgFactory",name:"CoreContentLinksChooseSitePage",segment:"core-content-links-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory#CoreCourseListModTypePageModuleNgFactory",name:"CoreCourseListModTypePage",segment:"core-course-list-mod-type",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section-selector/section-selector.module.ngfactory#CoreCourseSectionSelectorPageModuleNgFactory",name:"CoreCourseSectionSelectorPage",segment:"core-course-section-selector",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory#CoreCourseUnsupportedModulePageModuleNgFactory",name:"CoreCourseUnsupportedModulePage",segment:"core-course-unsupported-module",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/available-courses/available-courses.module.ngfactory#CoreCoursesAvailableCoursesPageModuleNgFactory",name:"CoreCoursesAvailableCoursesPage",segment:"core-courses-available-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/categories/categories.module.ngfactory#CoreCoursesCategoriesPageModuleNgFactory",name:"CoreCoursesCategoriesPage",segment:"core-courses-categories",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/my-courses/my-courses.module.ngfactory#CoreCoursesMyCoursesPageModuleNgFactory",name:"CoreCoursesMyCoursesPage",segment:"core-courses-my-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/search/search.module.ngfactory#CoreCoursesSearchPageModuleNgFactory",name:"CoreCoursesSearchPage",segment:"core-courses-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory#CoreCoursesSelfEnrolPasswordPageModuleNgFactory",name:"CoreCoursesSelfEnrolPasswordPage",segment:"core-courses-self-enrol-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/course/course.module.ngfactory#CoreGradesCoursePageModuleNgFactory",name:"CoreGradesCoursePage",segment:"core-grades-course",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/courses/courses.module.ngfactory#CoreGradesCoursesPageModuleNgFactory",name:"CoreGradesCoursesPage",segment:"core-grades-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/coursesplit/coursesplit.module.ngfactory#CoreGradesCourseSplitPageModuleNgFactory",name:"CoreGradesCourseSplitPage",segment:"core-grades-course-split",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/grade/grade.module.ngfactory#CoreGradesGradePageModuleNgFactory",name:"CoreGradesGradePage",segment:"core-grades-grade",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/change-password/change-password.module.ngfactory#CoreLoginChangePasswordPageModuleNgFactory",name:"CoreLoginChangePasswordPage",segment:"core-login-change-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory#CoreLoginForgottenPasswordPageModuleNgFactory",name:"CoreLoginForgottenPasswordPage",segment:"core-login-forgotten-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/init/init.module.ngfactory#CoreLoginInitPageModuleNgFactory",name:"CoreLoginInitPage",segment:"core-login-init",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/reconnect/reconnect.module.ngfactory#CoreLoginReconnectPageModuleNgFactory",name:"CoreLoginReconnectPage",segment:"core-login-reconnect",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-error/site-error.module.ngfactory#CoreLoginSiteErrorPageModuleNgFactory",name:"CoreLoginSiteErrorPage",segment:"core-login-site-error",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-help/site-help.module.ngfactory#CoreLoginSiteHelpPageModuleNgFactory",name:"CoreLoginSiteHelpPage",segment:"core-login-site-help",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-policy/site-policy.module.ngfactory#CoreLoginSitePolicyPageModuleNgFactory",name:"CoreLoginSitePolicyPage",segment:"core-login-site-policy",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site/site.module.ngfactory#CoreLoginSitePageModuleNgFactory",name:"CoreLoginSitePage",segment:"core-login-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/sites/sites.module.ngfactory#CoreLoginSitesPageModuleNgFactory",name:"CoreLoginSitesPage",segment:"core-login-sites",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/more/more.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuMorePage",segment:"core-mainmenu-more",priority:"low",defaultHistory:[]},{loadChildren:"../core/rating/pages/ratings/ratings.module.ngfactory#CoreRatingRatingsPageModuleNgFactory",name:"CoreRatingRatingsPage",segment:"core-rating-ratings",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/about/about.module.ngfactory#CoreSettingsAboutPageModuleNgFactory",name:"CoreSettingsAboutPage",segment:"core-settings-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/app/app.module.ngfactory#CoreAppSettingsPageModuleNgFactory",name:"CoreAppSettingsPage",segment:"core-settings-app",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/general/general.module.ngfactory#CoreSettingsGeneralPageModuleNgFactory",name:"CoreSettingsGeneralPage",segment:"core-settings-general",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/licenses/licenses.module.ngfactory#CoreSettingsLicensesPageModuleNgFactory",name:"CoreSettingsLicensesPage",segment:"core-settings-licenses",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/site/site.module.ngfactory#CoreSitePreferencesPageModuleNgFactory",name:"CoreSitePreferencesPage",segment:"core-site-preferences",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/space-usage/space-usage.module.ngfactory#CoreSettingsSpaceUsagePageModuleNgFactory",name:"CoreSettingsSpaceUsagePage",segment:"core-settings-space-usage",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/synchronization/synchronization.module.ngfactory#CoreSettingsSynchronizationPageModuleNgFactory",name:"CoreSettingsSynchronizationPage",segment:"core-settings-synchronization",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory#CoreSharedFilesChooseSitePageModuleNgFactory",name:"CoreSharedFilesChooseSitePage",segment:"core-shared-files-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/list/list.module.ngfactory#CoreSharedFilesListPageModuleNgFactory",name:"CoreSharedFilesListPage",segment:"core-shared-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../core/sitehome/pages/index/index.module.ngfactory#CoreSiteHomeIndexPageModuleNgFactory",name:"CoreSiteHomeIndexPage",segment:"core-sitehome-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/module-index/module-index.module.ngfactory#CoreSitePluginsModuleIndexPageModuleNgFactory",name:"CoreSitePluginsModuleIndexPage",segment:"core-site-plugins-module-index-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory#CoreSitePluginsPluginPageModuleNgFactory",name:"CoreSitePluginsPluginPage",segment:"core-site-plugins-plugin-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/index-area/index-area.module.ngfactory#CoreTagIndexAreaPageModuleNgFactory",name:"CoreTagIndexAreaPage",segment:"core-tag-index-area",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/index/index.module.ngfactory#CoreTagIndexPageModuleNgFactory",name:"CoreTagIndexPage",segment:"core-tag-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/search/search.module.ngfactory#CoreTagSerchPageModuleNgFactory",name:"CoreTagSearchPage",segment:"core-tag-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/about/about.module.ngfactory#CoreUserAboutPageModuleNgFactory",name:"CoreUserAboutPage",segment:"core-user-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/participants/participants.module.ngfactory#CoreUserParticipantsPageModuleNgFactory",name:"CoreUserParticipantsPage",segment:"core-user-participants",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/iframe/iframe.module.ngfactory#CoreViewerIframePageModuleNgFactory",name:"CoreViewerIframePage",segment:"core-viewer-iframe",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/image/image.module.ngfactory#CoreViewerImagePageModuleNgFactory",name:"CoreViewerImagePage",segment:"core-viewer-image",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/text/text.module.ngfactory#CoreViewerTextPageModuleNgFactory",name:"CoreViewerTextPage",segment:"core-viewer-text",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/index/index.module.ngfactory#AddonCalendarIndexPageModuleNgFactory",name:"AddonCalendarIndexPage",segment:"addon-calendar-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/search/search.module.ngfactory#AddonMessagesSearchPageModuleNgFactory",name:"AddonMessagesSearchPage",segment:"addon-messages-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/settings/settings.module.ngfactory#AddonMessagesSettingsPageModuleNgFactory",name:"AddonMessagesSettingsPage",segment:"addon-messages-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit/edit.module.ngfactory#AddonModAssignEditPageModuleNgFactory",name:"AddonModAssignEditPage",segment:"addon-mod-assign-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory#AddonModAssignSubmissionListPageModuleNgFactory",name:"AddonModAssignSubmissionListPage",segment:"addon-mod-assign-submission-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/chat/chat.module.ngfactory#AddonModChatChatPageModuleNgFactory",name:"AddonModChatChatPage",segment:"addon-mod-chat-chat",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/edit/edit.module.ngfactory#AddonModDataEditPageModuleNgFactory",name:"AddonModDataEditPage",segment:"addon-mod-data-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/entry/entry.module.ngfactory#AddonModDataEntryPageModuleNgFactory",name:"AddonModDataEntryPage",segment:"addon-mod-data-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/search/search.module.ngfactory#AddonModDataSearchPageModuleNgFactory",name:"AddonModDataSearchPage",segment:"addon-mod-data-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/form/form.module.ngfactory#AddonModFeedbackFormPageModuleNgFactory",name:"AddonModFeedbackFormPage",segment:"addon-mod-feedback-form",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/edit/edit.module.ngfactory#AddonModGlossaryNewDiscussionPageModuleNgFactory",name:"AddonModGlossaryEditPage",segment:"addon-mod-glossary-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory#AddonModLessonUserRetakePageModuleNgFactory",name:"AddonModLessonUserRetakePage",segment:"addon-mod-lesson-user-retake",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/review/review.module.ngfactory#AddonModQuizReviewPageModuleNgFactory",name:"AddonModQuizReviewPage",segment:"addon-mod-quiz-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory#AddonModWorkshopAssessmentPageModuleNgFactory",name:"AddonModWorkshopAssessmentPage",segment:"addon-mod-workshop-assessment",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory#AddonModWorkshopEditSubmissionPageModuleNgFactory",name:"AddonModWorkshopEditSubmissionPage",segment:"addon-mod-workshop-edit-submission",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/list/list.module.ngfactory#AddonNotificationsListPageModuleNgFactory",name:"AddonNotificationsListPage",segment:"addon-notifications-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/settings/settings.module.ngfactory#AddonNotificationsSettingsPageModuleNgFactory",name:"AddonNotificationsSettingsPage",segment:"addon-notifications-settings",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/dashboard/dashboard.module.ngfactory#CoreCoursesDashboardPageModuleNgFactory",name:"CoreCoursesDashboardPage",segment:"core-courses-dashboard",priority:"low",defaultHistory:[]},{loadChildren:"../core/emulator/pages/capture-media/capture-media.module.ngfactory#CoreEmulatorCaptureMediaPageModuleNgFactory",name:"CoreEmulatorCaptureMediaPage",segment:"core-emulator-capture-media",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/credentials/credentials.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginCredentialsPage",segment:"core-login-credentials",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/email-signup/email-signup.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginEmailSignupPage",segment:"core-login-email-signup",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/menu/menu.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuPage",segment:"core-mainmenu",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/deviceinfo/deviceinfo.module.ngfactory#CoreSettingsDeviceInfoPageModuleNgFactory",name:"CoreSettingsDeviceInfoPage",segment:"core-settings-deviceinfo",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/profile/profile.module.ngfactory#CoreUserProfilePageModuleNgFactory",name:"CoreUserProfilePage",segment:"core-user-profile",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/edit-event/edit-event.module.ngfactory#AddonCalendarEditEventPageModuleNgFactory",name:"AddonCalendarEditEventPage",segment:"addon-calendar-edit-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/event/event.module.ngfactory#AddonCalendarEventPageModuleNgFactory",name:"AddonCalendarEventPage",segment:"addon-calendar-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory#AddonModForumNewDiscussionPageModuleNgFactory",name:"AddonModForumNewDiscussionPage",segment:"addon-mod-forum-new-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/player/player.module.ngfactory#AddonModScormPlayerPageModuleNgFactory",name:"AddonModScormPlayerPage",segment:"addon-mod-scorm-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/edit/edit.module.ngfactory#AddonModWikiEditPageModuleNgFactory",name:"AddonModWikiEditPage",segment:"addon-mod-wiki-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/submission/submission.module.ngfactory#AddonModWorkshopSubmissionPageModuleNgFactory",name:"AddonModWorkshopSubmissionPage",segment:"addon-mod-workshop-submission",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/viewer/viewer.module.ngfactory#CoreCommentsViewerPageModuleNgFactory",name:"CoreCommentsViewerPage",segment:"core-comments-viewer",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section/section.module.ngfactory#CoreCourseSectionPageModuleNgFactory",name:"CoreCourseSectionPage",segment:"core-course-section",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/course-preview/course-preview.module.ngfactory#CoreCoursesCoursePreviewPageModuleNgFactory",name:"CoreCoursesCoursePreviewPage",segment:"core-courses-course-preview",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/day/day.module.ngfactory#AddonCalendarDayPageModuleNgFactory",name:"AddonCalendarDayPage",segment:"addon-calendar-day",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/list/list.module.ngfactory#AddonCalendarListPageModuleNgFactory",name:"AddonCalendarListPage",segment:"addon-calendar-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory#AddonMessagesGroupConversationsPageModuleNgFactory",name:"AddonMessagesGroupConversationsPage",segment:"addon-messages-group-conversations",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/discussion/discussion.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModForumDiscussionPage",segment:"addon-mod-forum-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/player/player.module.ngfactory#AddonModLessonPlayerPageModuleNgFactory",name:"AddonModLessonPlayerPage",segment:"addon-mod-lesson-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/player/player.module.ngfactory#AddonModQuizPlayerPageModuleNgFactory",name:"AddonModQuizPlayerPage",segment:"addon-mod-quiz-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/discussion/discussion.module.ngfactory#AddonMessagesDiscussionPageModuleNgFactory",name:"AddonMessagesDiscussionPage",segment:"addon-messages-discussion",priority:"low",defaultHistory:[]}]},[]),Rr._41(512,Rr.k,Rr.k,[]),Rr._41(512,rf.a,rf.a,[Rr.k]),Rr._41(1024,lf.b,lf.c,[rf.a,Rr.C]),Rr._41(1024,Rr.c,function(e,t,n,o,r,i,l,a,s,u,c,d,f){return[Ir.u(e),af.a(t),$d.b(n,o),Xd.b(r,i,l,a,s),lf.d(u,c,d,f)]},[[2,Rr.L],yi.a,Il.a,Bl.a,yi.a,Il.a,Bl.a,xl.a,hc.l,yi.a,of.a,lf.b,Rr.M]),Rr._41(512,Rr.d,Rr.d,[[2,Rr.c]]),Rr._41(131584,Rr.f,Rr.f,[Rr.M,Rr._22,Rr.C,Rr.u,Rr.o,Rr.d]),Rr._41(512,Rr.e,Rr.e,[Rr.f]),Rr._41(512,Ir.a,Ir.a,[[3,Ir.a]]),Rr._41(512,wd.a,wd.a,[]),Rr._41(512,Dd.e,Dd.e,[]),Rr._41(512,Dd.d,Dd.d,[]),Rr._41(512,il.v,il.v,[]),Rr._41(512,il.i,il.i,[]),Rr._41(512,il.s,il.s,[]),Rr._41(512,sf.a,sf.a,[]),Rr._41(512,uf.b,uf.b,[]),Rr._41(512,cf.a,cf.a,[]),Rr._41(512,df.a,df.a,[]),Rr._41(512,ff.a,ff.a,[]),Rr._41(512,pf.a,pf.a,[]),Rr._41(512,hf.a,hf.a,[pf.a,Il.a]),Rr._41(512,vd.a,vd.a,[]),Rr._41(1024,Ed.a,kd.f,[Il.a]),Rr._41(512,Kr.a,Kr.a,[]),Rr._41(512,Fi.a,Fi.a,[Kr.a]),Rr._41(512,mf.a,mf.a,[]),Rr._41(512,Li.a,Li.a,[hf.a,Il.a,vd.a,xl.a,Ed.a,Kr.a,Fi.a,Rr.M,nf.a,mf.a]),Rr._41(512,_f.a,_f.a,[]),Rr._41(512,Dd.k,Dd.k,[]),Rr._41(2048,Dd.i,null,[Dd.k]),Rr._41(512,Dd.g,Dd.g,[Dd.i]),Rr._41(2048,Dd.b,null,[Dd.g]),Rr._41(512,Dd.f,Dd.j,[Dd.b,Rr.C]),Rr._41(512,Dd.c,Dd.c,[Dd.f]),Rr._41(1024,gf.b,Sr.d,[Dd.c]),Rr._41(512,vf.a,vf.b,[]),Rr._41(512,yf.b,yf.a,[]),Rr._41(512,bf.b,bf.a,[]),Rr._41(256,Zi.b,void 0,[]),Rr._41(256,Zi.c,void 0,[]),Rr._41(512,Zi.a,Zi.a,[_f.a,gf.b,vf.a,yf.b,bf.b,Zi.b,Zi.c]),Rr._41(512,Pf.a,Pf.a,[Li.a]),Rr._41(1024,Of.a,kd.n,[Li.a]),Rr._41(512,bd.a,bd.a,[Zi.a,Pf.a,Il.a,Of.a,yi.a]),Rr._41(1024,of.b,of.d,[xl.a,of.a]),Rr._41(512,Ci.g,Ef.a,[]),Rr._41(512,Ci.f,Ci.f,[Ci.g]),Rr._41(1024,Ml.a,Ml.b,[xl.a,of.b,Ci.f,lf.b,Rr.o]),Rr._41(512,Ds.a,Ds.a,[xl.a,yi.a,Ml.a]),Rr._41(512,Ir.c,Ir.s,[Ci.c]),Rr._41(512,Mi.a,Mi.a,[Zi.a,bd.a,Ds.a,Ir.c,Il.a]),Rr._41(512,fs.a,fs.a,[Dd.c,Kr.a,Zi.a,Mi.a]),Rr._41(1024,Cf.a,kd.j,[Li.a,Mi.a,fs.a]),Rr._41(1024,If.a,kd.h,[Li.a,Cf.a,Mi.a]),Rr._41(512,Bi.a,Bi.a,[Kr.a,Il.a,Cf.a,Li.a,Mi.a,If.a,fs.a]),Rr._41(512,Di.a,Di.a,[bd.a,Mi.a]),Rr._41(1024,Rf.a,kd.o,[Li.a,Bi.a,Di.a]),Rr._41(1024,Sf.a,kd.i,[Li.a]),Rr._41(512,wf.a,wf.a,[xl.a,yi.a]),Rr._41(512,Af.a,Af.a,[xl.a,yi.a]),Rr._41(512,Df.a,Df.a,[xl.a,yi.a]),Rr._41(512,Pa.a,Pa.a,[xl.a,yi.a,Ml.a]),Rr._41(512,zr.a,zr.a,[Zi.a,wf.a,Af.a,Df.a,Mi.a,Li.a,Il.a,Pf.a,Di.a,Ds.a,Ir.c,Pa.a,Bi.a,Kr.a,Fi.a]),Rr._41(1024,jf.a,kd.k,[Li.a]),Rr._41(512,kf.a,kf.a,[]),Rr._41(1024,Tf.a,kd.l,[Li.a,Bi.a]),Rr._41(512,xf.a,xf.a,[Dd.c,Zi.a,Li.a,Mi.a,Bi.a,Tf.a,fs.a,Kr.a]),Rr._41(512,ji.a,ji.a,[Rf.a,Li.a,Sf.a,zr.a,Kr.a,Zi.a,Il.a,bd.a,Fi.a,jf.a,fs.a,kf.a,xf.a,Rr.M,Mi.a]),Rr._41(512,Jd.a,Jd.a,[Kr.a,Il.a,ji.a]),Rr._41(512,Mf.a,Mf.a,[Rr.C]),Rr._41(512,xi.a,xi.a,[Kr.a,Dd.c,Mf.a,Li.a,Zi.a,Di.a,Fi.a,Mi.a,ji.a,Rr.C,xf.a,zr.a]),Rr._41(1024,Nf.a,kd.p,[Li.a,ji.a,Mi.a]),Rr._41(512,Uf.a,Uf.a,[ji.a,fs.a,Ds.a]),Rr._41(512,bl.a,bl.a,[Zi.a]),Rr._41(1024,Ff.a,kd.g,[Li.a]),Rr._41(512,Lf.a,Lf.a,[Kr.a,Nf.a,Il.a,Li.a,ji.a,Pf.a,Mi.a,Zi.a,Df.a,Fi.a,Ff.a,Rr.M]),Rr._41(512,Hf.a,Hf.a,[Cf.a,Bi.a,ji.a,Kr.a,xi.a,Nf.a,Uf.a,bl.a,Li.a,Lf.a]),Rr._41(512,kd.a,kd.a,[Li.a,Jd.a,Hf.a,Il.a]),Rr._41(512,sf.b,sf.b,[]),Rr._41(512,Bf.a,Bf.a,[]),Rr._41(512,qf.a,qf.a,[Kr.a,Li.a,Pf.a,ji.a,Ed.a,Rr.M]),Rr._41(512,Gf.a,Gf.a,[xi.a]),Rr._41(512,Vf.b,Vf.b,[qf.a,Gf.a]),Rr._41(512,Kf.b,Kf.b,[]),Rr._41(512,Wf.a,Wf.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,Zd.a,Zd.a,[Kr.a,xi.a,Di.a,ji.a]),Rr._41(512,ba.a,ba.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,zf.a,zf.a,[xi.a]),Rr._41(512,$f.a,$f.a,[xi.a]),Rr._41(512,Yf.a,Yf.a,[ba.a,Rr.C]),Rr._41(512,Qf.a,Qf.a,[Kr.a,xi.a,Fi.a,Yf.a]),Rr._41(512,Hi.a,Hi.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,Ui.a,Ui.a,[Kr.a,Li.a,Bi.a,xi.a,xf.a,Mi.a,ji.a,fs.a,Di.a,bl.a,Fi.a,Jd.a,Ed.a,Hi.a,zr.a,Rr.M]),Rr._41(512,ef.a,ef.a,[Kr.a,xi.a,ji.a,bd.a,Li.a,Il.a,Ui.a,ba.a,Mi.a,Fi.a]),Rr._41(512,Xf.a,Xf.a,[Kr.a,xi.a,ji.a]),Rr._41(1024,Jf.a,kd.c,[Li.a]),Rr._41(512,Zf.a,Zf.a,[]),Rr._41(512,ep.a,ep.a,[]),Rr._41(512,Dl.a,Dl.a,[Kr.a,xi.a,Fi.a,ep.a]),Rr._41(512,wl.a,wl.a,[Kr.a,Fi.a,xi.a,Mi.a,Dl.a,Li.a]),Rr._41(512,tp.a,tp.a,[Kr.a,Li.a,Jd.a,Xf.a,xi.a,Jf.a,Lf.a,ji.a,Mi.a,Ff.a,Pf.a,Zf.a,Rr.M,Zi.a,Il.a,Mf.a,wl.a,Dl.a]),Rr._41(512,ra.a,ra.a,[Kr.a,xi.a,Fi.a,ji.a,bl.a,Zi.a,$f.a,Li.a,Qf.a,ef.a,zr.a,tp.a]),Rr._41(512,np.a,np.a,[xi.a,Zi.a,ba.a]),Rr._41(512,op.a,op.a,[xi.a]),Rr._41(512,Oa.a,Oa.a,[Kr.a,xi.a,ji.a,Ui.a,Li.a,op.a,tp.a]),Rr._41(512,rp.a,rp.a,[Bi.a,xi.a,Mi.a]),Rr._41(512,ip.a,ip.a,[xi.a,bl.a,Mi.a,ji.a,Li.a,tp.a]),Rr._41(512,lp.a,lp.a,[Li.a,xi.a,np.a,Ui.a,Oa.a,Zi.a,ji.a,rp.a,ip.a]),Rr._41(512,Ua.a,Ua.a,[Kr.a,xi.a,ra.a,lp.a]),Rr._41(512,Ka.a,Ka.a,[xi.a,zf.a]),Rr._41(512,ap.a,ap.a,[]),Rr._41(512,Nd.a,Nd.a,[Kr.a,xi.a,Fi.a,ap.a,ef.a]),Rr._41(512,sp.a,sp.a,[ba.a,zf.a,Ua.a,Ka.a,Nd.a,xi.a]),Rr._41(512,up.a,up.a,[xi.a,ra.a]),Rr._41(512,Yr.a,Yr.a,[Kr.a,xi.a,Fi.a,ra.a,up.a]),Rr._41(512,qi.a,qi.a,[Bi.a,Ui.a,xi.a,Li.a,Zi.a,ji.a,xf.a]),Rr._41(512,Ma.a,Ma.a,[Kr.a,xi.a,ji.a,ra.a,Ui.a,bl.a,Bi.a,Fi.a,qi.a]),Rr._41(512,yd.a,yd.a,[Kr.a,xi.a,zr.a,xf.a,Zi.a,Mi.a,Fi.a,Li.a,ji.a,Di.a,Pf.a,Il.a,Jd.a,ef.a,Ci.f,Df.a,ra.a]),Rr._41(512,Aa.a,Aa.a,[Kr.a,xi.a,ji.a,Fi.a,ba.a]),Rr._41(512,Al.a,Al.a,[Kr.a,Fi.a,Li.a,xi.a,Dl.a,ra.a,wl.a,ba.a]),Rr._41(512,ya.a,ya.a,[ra.a,zr.a,Yr.a,Ma.a,Ui.a,xi.a,Mi.a,bl.a,ji.a,Zi.a,yd.a,Aa.a,Ua.a,Fi.a,qi.a,Li.a,Bi.a,Rr.C,ba.a,$f.a,Kr.a,Al.a]),Rr._41(512,cp.a,cp.a,[xi.a,ba.a,zr.a,Zi.a,ra.a,Mi.a,ya.a,Kr.a]),Rr._41(512,dp.a,dp.a,[bd.a,xi.a,Wf.a,ji.a]),Rr._41(512,Rl.a,Rl.a,[Kr.a,xi.a,yd.a,Zd.a,Li.a,zr.a,Di.a,Zi.a,Jd.a,Fi.a,Mi.a,ef.a,Rr.M,ji.a,dp.a]),Rr._41(512,fp.a,fp.a,[ba.a,Rl.a]),Rr._41(512,pp.a,pp.a,[yd.a,sp.a]),Rr._41(512,hp.a,hp.a,[ji.a,zr.a,ya.a,yd.a]),Rr._41(512,mp.a,mp.a,[ji.a,zr.a,xi.a,ya.a,yd.a,Mi.a,ba.a]),Rr._41(512,_p.b,_p.b,[Wf.a,Zd.a,sp.a,cp.a,fp.a,pp.a,Xf.a,hp.a,mp.a]),Rr._41(512,gp.a,gp.a,[Kr.a,xi.a,Fi.a]),Rr._41(1024,vp.a,kd.e,[Li.a,Uf.a]),Rr._41(1024,yp.a,kd.d,[Li.a,Uf.a]),Rr._41(512,ms.a,ms.a,[Kr.a,Bi.a,Mi.a,ji.a,xi.a,bl.a,fs.a,Ui.a,Il.a,Zi.a,vp.a,yp.a]),Rr._41(512,bp.a,bp.a,[xl.a,yi.a]),Rr._41(512,_s.a,_s.a,[Kr.a,Li.a,Zi.a,ms.a,zr.a,Mi.a,Bi.a,ji.a,bp.a,gp.a,yp.a,Il.a]),Rr._41(512,Pp.a,Pp.a,[Li.a,ji.a,_s.a]),Rr._41(512,Op.a,Op.a,[Li.a,ji.a,Il.a,_s.a]),Rr._41(512,Ep.a,Ep.a,[Li.a,ji.a,_s.a]),Rr._41(512,Cp.a,Cp.a,[Li.a,ji.a,Il.a,_s.a]),Rr._41(512,Ip.a,Ip.a,[Li.a,Il.a,bl.a,_s.a,ms.a,zr.a]),Rr._41(512,Rp.b,Rp.b,[gp.a,Pp.a,Op.a,Ep.a,Cp.a,Ip.a]),Rr._41(512,Sp.a,Sp.a,[Kr.a,Bi.a,Li.a,Mi.a,fs.a,xi.a,Fi.a]),Rr._41(512,wp.a,wp.a,[Kr.a,Df.a,Zi.a,ji.a,xi.a,Ds.a,ms.a,Jd.a,Sp.a,zr.a,Bi.a,Li.a]),Rr._41(512,Ap.a,Ap.a,[wp.a,Il.a]),Rr._41(512,Dp.b,Dp.b,[Il.a,gp.a,Ap.a,wp.a,Fi.a]),Rr._41(512,jp.a,jp.a,[Yr.a]),Rr._41(512,kp.a,kp.a,[Qf.a,jp.a]),Rr._41(512,Tp.a,Tp.a,[]),Rr._41(512,xp.a,xp.a,[Qf.a,Tp.a]),Rr._41(512,Mp.a,Mp.a,[bl.a]),Rr._41(512,Np.a,Np.a,[Qf.a,Mp.a]),Rr._41(512,Up.a,Up.a,[Yr.a]),Rr._41(512,Fp.a,Fp.a,[Qf.a,Up.a]),Rr._41(512,Lp.a,Lp.a,[Fi.a,xi.a]),Rr._41(512,Hp.a,Hp.a,[xi.a,Kr.a,Li.a,$f.a,Fi.a,ra.a,Zi.a,ji.a,Mi.a,Lp.a,bl.a,ip.a]),Rr._41(512,Bp.a,Bp.a,[Hp.a]),Rr._41(512,qp.a,qp.a,[ra.a,xi.a]),Rr._41(512,Gp.a,Gp.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,Vp.a,Vp.a,[zr.a]),Rr._41(512,Kp.a,Kp.a,[zr.a]),Rr._41(512,Wp.a,Wp.a,[Kp.a]),Rr._41(512,zp.b,zp.b,[qf.a,Bp.a,qp.a,Il.a,Fi.a,Gp.a,Vp.a,Wp.a]),Rr._41(512,$p.a,$p.a,[xi.a,Ua.a,Rl.a]),Rr._41(512,Yp.b,Yp.b,[Zd.a,$p.a]),Rr._41(512,Qp.b,Qp.b,[]),Rr._41(512,Xp.a,Xp.a,[]),Rr._41(512,Jp.a,Jp.a,[]),Rr._41(512,Zp.a,Zp.a,[Kr.a,xi.a,ba.a,Fi.a,ji.a]),Rr._41(512,eh.a,eh.a,[xi.a,ji.a]),Rr._41(512,th.a,th.a,[Rl.a]),Rr._41(512,nh.a,nh.a,[Oa.a]),Rr._41(512,oh.a,oh.a,[Oa.a,ya.a,zr.a,Rl.a,ra.a]),Rr._41(512,rh.a,rh.a,[Kr.a,xi.a,Li.a,Zi.a,Lp.a,Mi.a,op.a,Oa.a,ji.a,bl.a]),Rr._41(512,ih.a,ih.a,[rh.a]),Rr._41(512,lh.a,lh.a,[zr.a]),Rr._41(512,ah.b,ah.b,[Zp.a,eh.a,Fi.a,xi.a,Oa.a,Zd.a,th.a,nh.a,oh.a,Aa.a,qf.a,ih.a,Gp.a,lh.a]),Rr._41(512,sh.a,sh.a,[]),Rr._41(512,uh.a,uh.a,[Kr.a,xi.a,ba.a,tp.a]),Rr._41(512,ch.a,ch.a,[uh.a]),Rr._41(512,dh.a,dh.a,[uh.a,ba.a]),Rr._41(512,fh.a,fh.a,[Kr.a,ba.a,uh.a,xi.a,Mi.a,ra.a,zr.a,Di.a,ji.a,Rl.a,ya.a]),Rr._41(512,ph.a,ph.a,[uh.a,fh.a]),Rr._41(512,hh.a,hh.a,[Rl.a,uh.a]),Rr._41(512,mh.a,mh.a,[Rl.a,xi.a,uh.a]),Rr._41(512,_h.b,_h.b,[Wf.a,ch.a,dh.a,Aa.a,Zd.a,ph.a,hh.a,mh.a,Zp.a,Fi.a,xi.a]),Rr._41(512,gh.a,gh.a,[Kr.a,Li.a,qf.a,zr.a,Fi.a,Ui.a,xi.a,ji.a,Zi.a,Pf.a,wl.a,ra.a]),Rr._41(512,vh.a,vh.a,[gh.a]),Rr._41(512,yh.a,yh.a,[]),Rr._41(512,bh.a,bh.a,[]),Rr._41(1024,Rr.h,function(){return[Sr.e]},[]),Rr._41(512,Ph.a,Ph.a,[Rr.h]),Rr._41(512,Oh.a,Oh.a,[Rr.C,Kr.a,Ph.a]),Rr._41(512,Eh.a,Eh.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,Ch.a,Ch.a,[Kr.a,xi.a,Fi.a,ji.a]),Rr._41(512,Ih.a,Ih.a,[]),Rr._41(512,Rh.a,Rh.a,[Kr.a,xi.a,Fi.a,Ih.a]),Rr._41(512,Sh.a,Sh.a,[Kr.a,xi.a,bl.a,ji.a]),Rr._41(512,wh.a,wh.a,[Sh.a]),Rr._41(512,Ah.a,Ah.a,[Kr.a,xi.a,Fi.a,Rh.a,wh.a]),Rr._41(512,Dh.a,Dh.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,jh.a,jh.a,[Kr.a,xi.a,Fi.a,ji.a]),Rr._41(512,kh.a,kh.a,[Zi.a]),Rr._41(512,Th.a,Th.a,[Kr.a,xi.a,Fi.a,kh.a]),Rr._41(512,xh.a,xh.a,[Zi.a]),Rr._41(512,js.a,js.a,[Kr.a,xi.a,Fi.a,xh.a]),Rr._41(512,Mh.a,Mh.a,[Kr.a,xi.a,Fi.a]),Rr._41(512,Nh.a,Nh.a,[Kr.a,xi.a,zr.a,Wf.a,Yr.a,Zp.a,bd.a,xf.a,ef.a,Ma.a,Oh.a,ji.a,Di.a,Aa.a,Fi.a,Qf.a,Eh.a,Mi.a,Ui.a,Ch.a,Rh.a,Ah.a,Sh.a,Dh.a,jh.a,Th.a,Zi.a,js.a,Li.a,Mh.a,ra.a,Nd.a,Al.a,Hi.a]),Rr._41(512,Uh.a,Uh.a,[Nh.a]),Rr._41(512,Fh.a,Fh.a,[]),Rr._41(512,Lh.b,Lh.b,[]),Rr._41(512,Hh.a,Hh.a,[xi.a,bl.a]),Rr._41(512,ls.a,ls.a,[xi.a,ji.a,Li.a,Hh.a]),Rr._41(512,Bh.a,Bh.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,Hh.a,ji.a,Fi.a,ls.a,bl.a]),Rr._41(512,qh.a,qh.a,[Bh.a]),Rr._41(512,Gh.a,Gh.a,[Fi.a,qf.a,qh.a]),Rr._41(512,Vh.a,Vh.a,[]),Rr._41(512,Kh.b,Kh.b,[]),Rr._41(512,Wh.a,Wh.a,[]),Rr._41(512,zh.a,zh.a,[tp.a]),Rr._41(512,$h.a,$h.a,[tp.a]),Rr._41(512,Yh.b,Yh.b,[Il.a,tp.a,Fi.a,Lf.a,Kr.a,qf.a,zh.a,$h.a]),Rr._41(512,Qh.a,Qh.a,[xi.a,Zi.a]),Rr._41(512,Xh.a,Xh.a,[Qh.a,ji.a]),Rr._41(512,Jh.a,Jh.a,[Qh.a,Rl.a]),Rr._41(512,Zh.a,Zh.a,[Qh.a,Rl.a]),Rr._41(512,em.a,em.a,[Wf.a,Xh.a,Zd.a,Jh.a,Zh.a]),Rr._41(512,tm.b,tm.b,[]),Rr._41(512,nm.a,nm.a,[]),Rr._41(512,om.a,om.a,[Zi.a,Mi.a]),Rr._41(512,Ni.a,Ni.a,[Kr.a,xi.a,Mi.a,Bi.a,fs.a,om.a,Ui.a,ji.a,Di.a,Zi.a]),Rr._41(512,rm.a,rm.a,[Di.a,fs.a,Mi.a,ji.a,Bi.a,Ni.a,Zi.a]),Rr._41(512,im.b,im.b,[Hi.a,rm.a]),Rr._41(512,lm.a,lm.a,[]),Rr._41(512,am.a,am.a,[]),Rr._41(512,Wl.a,Wl.a,[Kr.a,xi.a,Mi.a,ji.a]),Rr._41(512,sm.a,sm.a,[Wl.a]),Rr._41(512,um.a,um.a,[Kr.a,xi.a]),Rr._41(512,cm.a,cm.a,[um.a]),Rr._41(512,dm.a,dm.a,[um.a,Rl.a]),Rr._41(512,fm.a,fm.a,[um.a,Rl.a]),Rr._41(512,pm.a,pm.a,[ji.a,um.a,yd.a]),Rr._41(512,hm.b,hm.b,[Zp.a,cm.a,Zd.a,dm.a,fm.a,Xf.a,pm.a]),Rr._41(512,mm.a,mm.a,[]),Rr._41(512,_m.a,_m.a,[]),Rr._41(512,gm.a,gm.a,[]),Rr._41(512,vm.a,vm.a,[Kr.a,xi.a,ji.a,tp.a]),Rr._41(512,ym.a,ym.a,[vm.a]),Rr._41(512,bm.a,bm.a,[Rl.a,vm.a]),Rr._41(512,Pm.a,Pm.a,[ba.a,vm.a,ya.a,ra.a,xi.a,Ui.a]),Rr._41(512,Om.a,Om.a,[vm.a,Rl.a]),Rr._41(512,Em.a,Em.a,[Kp.a,vm.a]),Rr._41(512,Cm.a,Cm.a,[Wf.a,ym.a,bm.a,Zp.a,Pm.a,Aa.a,Om.a,Zd.a,Gp.a,Em.a]),Rr._41(512,Im.a,Im.a,[]),Rr._41(512,Rm.a,Rm.a,[xi.a,ji.a]),Rr._41(512,Sm.a,Sm.a,[Kr.a,xi.a,np.a,ba.a,Mi.a,bl.a,Di.a,Lf.a,Pf.a,ji.a,Rm.a,Li.a,Zi.a,Oa.a]),Rr._41(512,wm.a,wm.a,[Sm.a]),Rr._41(512,Am.a,Am.a,[Kr.a,ra.a,xi.a,Sm.a,Pf.a,ji.a]),Rr._41(512,Dm.a,Dm.a,[Zi.a,Li.a,ra.a,Fi.a,Kr.a,xi.a,Lp.a,Mi.a,bl.a,ji.a,Sm.a,Rm.a,Am.a]),Rr._41(512,jm.a,jm.a,[Dm.a]),Rr._41(512,km.a,km.a,[Rl.a,Sm.a]),Rr._41(512,Tm.b,Tm.b,[Wf.a,wm.a,Jd.a,Sm.a,yd.a,Lf.a,qf.a,jm.a,Zd.a,km.a]),Rr._41(512,xm.a,xm.a,[]),Rr._41(512,Mm.a,Mm.a,[Kr.a,xi.a,tp.a]),Rr._41(512,Nm.a,Nm.a,[Mm.a]),Rr._41(512,Um.a,Um.a,[Mm.a,Al.a]),Rr._41(512,Fm.a,Fm.a,[Rl.a,xi.a,Mm.a,Fi.a]),Rr._41(512,Lm.a,Lm.a,[Rl.a,Mm.a]),Rr._41(512,Hm.a,Hm.a,[Rl.a,Mm.a]),Rr._41(512,Bm.a,Bm.a,[Rl.a,Mm.a]),Rr._41(512,qm.a,qm.a,[Rl.a,Mm.a]),Rr._41(512,Gm.a,Gm.a,[ji.a,Di.a,Mm.a,yd.a]),Rr._41(512,Vm.b,Vm.b,[Wf.a,Nm.a,Aa.a,Um.a,Zp.a,Fm.a,Zd.a,Lm.a,Hm.a,Bm.a,qm.a,Xf.a,Gm.a]),Rr._41(512,Km.a,Km.a,[]),Rr._41(512,wa.a,wa.a,[Kr.a,xi.a,ba.a,ji.a]),Rr._41(512,Wm.a,Wm.a,[wa.a]),Rr._41(512,zm.a,zm.a,[Fi.a,wa.a]),Rr._41(512,$m.a,$m.a,[Aa.a,Wm.a,Zp.a,zm.a]),Rr._41(512,Ym.a,Ym.a,[]),Rr._41(512,Qm.a,Qm.a,[Eh.a,Ym.a]),Rr._41(512,Xm.a,Xm.a,[bl.a]),Rr._41(512,Jm.a,Jm.a,[Eh.a,Xm.a]),Rr._41(512,Zm.a,Zm.a,[]),Rr._41(512,e_.a,e_.a,[Eh.a,Zm.a]),Rr._41(512,t_.a,t_.a,[Mi.a]),Rr._41(512,n_.a,n_.a,[Eh.a,t_.a]),Rr._41(512,o_.a,o_.a,[Mi.a]),Rr._41(512,r_.a,r_.a,[Eh.a,o_.a]),Rr._41(512,i_.a,i_.a,[]),Rr._41(512,Hd.a,Hd.a,[xi.a,fs.a]),Rr._41(512,l_.a,l_.a,[Hd.a]),Rr._41(512,a_.b,a_.b,[Wf.a,l_.a]),Rr._41(512,s_.a,s_.a,[]),Rr._41(512,u_.a,u_.a,[]),Rr._41(512,c_.a,c_.a,[]),Rr._41(512,d_.a,d_.a,[Nd.a,c_.a]),Rr._41(512,f_.a,f_.a,[]),Rr._41(512,p_.a,p_.a,[Nd.a,f_.a]),Rr._41(512,h_.a,h_.a,[]),Rr._41(512,m_.a,m_.a,[Nd.a,h_.a]),Rr._41(512,__.a,__.a,[]),Rr._41(512,g_.a,g_.a,[Nd.a,__.a]),Rr._41(512,v_.a,v_.a,[]),Rr._41(512,y_.a,y_.a,[Nd.a,v_.a]),Rr._41(512,b_.a,b_.a,[Sm.a]),Rr._41(512,P_.a,P_.a,[Nd.a,b_.a]),Rr._41(512,O_.a,O_.a,[Sm.a]),Rr._41(512,E_.a,E_.a,[Nd.a,O_.a]),Rr._41(512,C_.a,C_.a,[]),Rr._41(512,I_.a,I_.a,[Nd.a,C_.a]),Rr._41(512,R_.a,R_.a,[]),Rr._41(512,S_.a,S_.a,[Nd.a,R_.a]),Rr._41(512,w_.a,w_.a,[]),Rr._41(512,A_.a,A_.a,[Nd.a,w_.a]),Rr._41(512,D_.a,D_.a,[]),Rr._41(512,j_.a,j_.a,[Nd.a,D_.a]),Rr._41(512,k_.a,k_.a,[]),Rr._41(512,T_.a,T_.a,[Nd.a,k_.a]),Rr._41(512,x_.a,x_.a,[]),Rr._41(512,M_.a,M_.a,[]),Rr._41(512,N_.a,N_.a,[ba.a,xi.a]),Rr._41(512,U_.a,U_.a,[Nd.a,N_.a]),Rr._41(512,F_.a,F_.a,[]),Rr._41(512,L_.a,L_.a,[Nd.a,F_.a]),Rr._41(512,H_.a,H_.a,[]),Rr._41(512,B_.a,B_.a,[Nd.a,H_.a]),Rr._41(512,q_.a,q_.a,[]),Rr._41(512,G_.a,G_.a,[Nd.a,q_.a]),Rr._41(512,V_.a,V_.a,[]),Rr._41(512,K_.a,K_.a,[]),Rr._41(512,W_.a,W_.a,[Nd.a,K_.a]),Rr._41(512,z_.a,z_.a,[]),Rr._41(512,$_.a,$_.a,[Ka.a,ba.a,xi.a]),Rr._41(512,Y_.a,Y_.a,[Nd.a,$_.a]),Rr._41(512,Q_.a,Q_.a,[]),Rr._41(512,X_.a,X_.a,[]),Rr._41(512,J_.a,J_.a,[Nd.a,X_.a]),Rr._41(512,Z_.a,Z_.a,[]),Rr._41(512,eg.a,eg.a,[]),Rr._41(512,tg.a,tg.a,[Nd.a,eg.a]),Rr._41(512,ng.a,ng.a,[]),Rr._41(512,og.a,og.a,[Nd.a,ng.a]),Rr._41(512,rg.a,rg.a,[]),Rr._41(512,ig.a,ig.a,[Nd.a,rg.a]),Rr._41(512,lg.a,lg.a,[]),Rr._41(512,ag.a,ag.a,[]),Rr._41(512,sg.a,sg.a,[Nd.a,ag.a]),Rr._41(512,ug.a,ug.a,[]),Rr._41(512,cg.a,cg.a,[Nd.a,ug.a]),Rr._41(512,dg.a,dg.a,[]),Rr._41(512,fg.a,fg.a,[Nd.a,dg.a]),Rr._41(512,pg.a,pg.a,[ls.a]),Rr._41(512,hg.a,hg.a,[Th.a,pg.a]),Rr._41(512,bs.a,bs.a,[Kr.a,xi.a,Mi.a,Bi.a,bl.a]),Rr._41(512,ys.a,ys.a,[Kr.a,xi.a,Mi.a,bl.a,Li.a,ji.a,Th.a,uh.a,Ui.a,bs.a,ls.a,ip.a]),Rr._41(512,Ps.a,Ps.a,[Kr.a,xi.a,Bi.a,ys.a,ji.a,bs.a,js.a,Th.a,ms.a,np.a]),Rr._41(512,vs.a,vs.a,[xi.a]),Rr._41(512,mg.a,mg.a,[ys.a,bs.a,Ps.a,vs.a,ms.a,qi.a,ji.a]),Rr._41(512,_g.a,_g.a,[Th.a,mg.a]),Rr._41(512,gg.a,gg.a,[Zi.a,xi.a,qi.a,Mi.a,ys.a,bs.a,Ps.a]),Rr._41(512,vg.a,vg.a,[Th.a,gg.a]),Rr._41(512,yg.a,yg.a,[]),Rr._41(512,bg.a,bg.a,[xi.a,Mi.a,ys.a,bs.a]),Rr._41(512,Pg.a,Pg.a,[js.a,bg.a]),Rr._41(512,Og.a,Og.a,[ys.a]),Rr._41(512,Eg.a,Eg.a,[js.a,Og.a]),Rr._41(512,Cg.a,Cg.a,[ys.a]),Rr._41(512,Ig.a,Ig.a,[js.a,Cg.a]),Rr._41(512,Rg.a,Rg.a,[]),Rr._41(512,Sg.a,Sg.a,[ra.a,ys.a]),Rr._41(512,wg.a,wg.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,bl.a,ra.a,Fi.a,ys.a,bs.a,ji.a,Th.a,js.a,fh.a,ip.a]),Rr._41(512,Ag.a,Ag.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,ys.a,Mi.a,js.a,Th.a,ya.a,np.a,fh.a,Oa.a,Ps.a,wg.a]),Rr._41(512,Dg.a,Dg.a,[wg.a]),Rr._41(512,jg.a,jg.a,[ya.a]),Rr._41(512,kg.a,kg.a,[Rl.a,Zi.a,ys.a]),Rr._41(512,Tg.a,Tg.a,[ji.a,ys.a,Di.a,ya.a]),Rr._41(512,xg.b,xg.b,[Yr.a,Sg.a,Ma.a,Ag.a,qf.a,Dg.a,Zd.a,jg.a,kg.a,Xf.a,Tg.a]),Rr._41(512,Mg.a,Mg.a,[]),Rr._41(512,Ng.a,Ng.a,[Kr.a,xi.a,Mi.a,Bi.a,Ui.a,xf.a,ji.a,ra.a,zr.a,ip.a]),Rr._41(512,Ug.a,Ug.a,[Ng.a,ra.a]),Rr._41(512,Fg.a,Fg.a,[ya.a,Ng.a]),Rr._41(512,Lg.a,Lg.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Ng.a]),Rr._41(512,Hg.a,Hg.a,[Rl.a,Zi.a,Ng.a]),Rr._41(512,Bg.a,Bg.a,[Kp.a,Ng.a,ra.a,Di.a]),Rr._41(512,qg.b,qg.b,[Yr.a,Ug.a,Zd.a,Fg.a,Ma.a,Lg.a,Hg.a,Gp.a,Bg.a]),Rr._41(512,Gg.a,Gg.a,[]),Rr._41(512,Vg.a,Vg.a,[xi.a,Oa.a,ip.a,ji.a,Zi.a]),Rr._41(512,Kg.a,Kg.a,[ra.a,Vg.a]),Rr._41(512,Wg.a,Wg.a,[ya.a]),Rr._41(512,zg.a,zg.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,np.a,Oa.a,Vg.a]),Rr._41(512,$g.a,$g.a,[Rl.a,Zi.a]),Rr._41(512,Yg.b,Yg.b,[Yr.a,Kg.a,Zd.a,Wg.a,Ma.a,zg.a,$g.a]),Rr._41(512,Qg.a,Qg.a,[]),Rr._41(512,Xg.a,Xg.a,[ra.a]),Rr._41(512,Jg.a,Jg.a,[xi.a]),Rr._41(512,Zg.a,Zg.a,[xi.a,Li.a,Ui.a,ji.a,Jg.a,ip.a]),Rr._41(512,ev.a,ev.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Zg.a,Oa.a,Rr.C]),Rr._41(512,tv.a,tv.a,[ya.a]),Rr._41(512,nv.a,nv.a,[xi.a,Kr.a,Li.a,Jg.a,Fi.a,Zg.a,Zi.a,ji.a,Mi.a,ra.a,Lp.a,bl.a,ip.a,ev.a,Ma.a]),Rr._41(512,ov.a,ov.a,[nv.a]),Rr._41(512,rv.a,rv.a,[Rl.a,Zi.a]),Rr._41(512,iv.b,iv.b,[Yr.a,Xg.a,Ma.a,ev.a,Zd.a,tv.a,qf.a,ov.a,rv.a]),Rr._41(512,lv.a,lv.a,[]),Rr._41(512,av.a,av.a,[]),Rr._41(512,sv.a,sv.a,[Kr.a,xi.a,Fi.a,ji.a,av.a]),Rr._41(512,uv.a,uv.a,[Zi.a]),Rr._41(512,cv.a,cv.a,[sv.a,uv.a]),Rr._41(512,dv.a,dv.a,[Zi.a,bl.a]),Rr._41(512,fv.a,fv.a,[sv.a,dv.a]),Rr._41(512,pv.a,pv.a,[Zi.a,vs.a,ms.a]),Rr._41(512,hv.a,hv.a,[sv.a,pv.a]),Rr._41(512,mv.a,mv.a,[Zi.a]),Rr._41(512,_v.a,_v.a,[sv.a,mv.a]),Rr._41(512,gv.a,gv.a,[Zi.a]),Rr._41(512,vv.a,vv.a,[sv.a,gv.a]),Rr._41(512,yv.a,yv.a,[Zi.a]),Rr._41(512,bv.a,bv.a,[sv.a,yv.a]),Rr._41(512,Pv.a,Pv.a,[Zi.a]),Rr._41(512,Ov.a,Ov.a,[sv.a,Pv.a]),Rr._41(512,Ev.a,Ev.a,[Zi.a,vs.a,ms.a]),Rr._41(512,Cv.a,Cv.a,[sv.a,Ev.a]),Rr._41(512,Iv.a,Iv.a,[Zi.a]),Rr._41(512,Rv.a,Rv.a,[sv.a,Iv.a]),Rr._41(512,Sv.a,Sv.a,[Zi.a]),Rr._41(512,wv.a,wv.a,[sv.a,Sv.a]),Rr._41(512,Av.a,Av.a,[Zi.a,Mi.a]),Rr._41(512,Dv.a,Dv.a,[sv.a,Av.a]),Rr._41(512,jv.a,jv.a,[Zi.a]),Rr._41(512,kv.a,kv.a,[sv.a,jv.a]),Rr._41(512,Tv.a,Tv.a,[]),Rr._41(512,xv.a,xv.a,[Kr.a,xi.a,Mi.a,Bi.a,ms.a,ji.a]),Rr._41(512,Mv.a,Mv.a,[Kr.a,xi.a,ji.a,Ui.a,xv.a,Li.a,sv.a,ip.a]),Rr._41(512,Nv.a,Nv.a,[ra.a,Mv.a]),Rr._41(512,Uv.a,Uv.a,[xi.a,ji.a]),Rr._41(512,Fv.a,Fv.a,[xi.a,Mv.a,Zi.a,sv.a,xv.a,ms.a,Mi.a,Fi.a,ji.a,zr.a,ra.a,Uv.a]),Rr._41(512,Lv.a,Lv.a,[Li.a,Fi.a,xi.a,Oa.a,ji.a,Uv.a]),Rr._41(512,Hv.a,Hv.a,[Zi.a,Li.a,Fi.a,Kr.a,xi.a,Lp.a,Mi.a,bl.a,ji.a,Lv.a,Uv.a]),Rr._41(512,Bv.a,Bv.a,[xi.a,Kr.a,Li.a,xv.a,Fi.a,Mv.a,Zi.a,ji.a,ra.a,Lp.a,Mi.a,bl.a,Fv.a,ip.a,Hv.a]),Rr._41(512,qv.a,qv.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Mv.a,bl.a,Fv.a,np.a,ls.a,Bv.a]),Rr._41(512,Gv.a,Gv.a,[ya.a,Mv.a]),Rr._41(512,Vv.a,Vv.a,[Bv.a]),Rr._41(512,Kv.a,Kv.a,[Mv.a,Fv.a]),Rr._41(512,Wv.a,Wv.a,[Mv.a,Fv.a]),Rr._41(512,zv.a,zv.a,[Rl.a,Mv.a,ra.a,zr.a]),Rr._41(512,$v.a,$v.a,[Rl.a,Mv.a,ra.a,zr.a]),Rr._41(512,Yv.a,Yv.a,[Rl.a,Zi.a,Mv.a]),Rr._41(512,Qv.a,Qv.a,[Kp.a,Mv.a]),Rr._41(512,Xv.a,Xv.a,[Yr.a,Nv.a,Ma.a,qv.a,Zd.a,Gv.a,qf.a,Vv.a,Kv.a,Wv.a,zv.a,$v.a,Yv.a,Gp.a,Qv.a]),Rr._41(512,Jv.a,Jv.a,[]),Rr._41(512,Zv.a,Zv.a,[ya.a]),Rr._41(512,ey.a,ey.a,[xi.a,Ui.a,ji.a]),Rr._41(512,ty.a,ty.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,ey.a]),Rr._41(512,ny.a,ny.a,[Yr.a,Jv.a,Zd.a,Zv.a,Ma.a,ty.a]),Rr._41(512,oy.a,oy.a,[]),Rr._41(512,ry.a,ry.a,[Kr.a,xi.a,bl.a,Mi.a,ji.a]),Rr._41(512,Gd.a,Gd.a,[Kr.a,xi.a,ji.a,Zi.a,Mi.a,zr.a,ry.a,ip.a,Fi.a]),Rr._41(512,iy.a,iy.a,[ra.a,Gd.a]),Rr._41(512,ly.a,ly.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Ds.a,np.a,Gd.a,Rr.C]),Rr._41(512,ay.a,ay.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,ra.a,Fi.a,Gd.a,ry.a,ly.a,bl.a,ji.a,Di.a,ip.a,Ma.a]),Rr._41(512,sy.a,sy.a,[ay.a]),Rr._41(512,uy.a,uy.a,[ya.a,Gd.a,zr.a,ra.a]),Rr._41(512,cy.a,cy.a,[ya.a,zr.a,xi.a,Gd.a,ra.a,Rl.a]),Rr._41(512,dy.a,dy.a,[zr.a,Gd.a,ya.a,Rl.a,ra.a]),Rr._41(512,fy.a,fy.a,[Rl.a,Zi.a,Gd.a]),Rr._41(512,py.a,py.a,[ji.a,fh.a,uh.a]),Rr._41(512,hy.b,hy.b,[Yr.a,iy.a,Ma.a,ly.a,qf.a,sy.a,Zd.a,uy.a,cy.a,dy.a,fy.a,Xf.a,py.a]),Rr._41(512,my.a,my.a,[]),Rr._41(512,_y.a,_y.a,[Kr.a,xi.a,ra.a,Ui.a,ji.a,ip.a]),Rr._41(512,gy.a,gy.a,[ra.a,zr.a,_y.a,ya.a,Mi.a,fs.a,Bi.a,Li.a,Ui.a,xi.a,qi.a]),Rr._41(512,vy.a,vy.a,[_y.a,ra.a,fs.a,gy.a,Ma.a,Mi.a,Zi.a,bl.a]),Rr._41(512,yy.a,yy.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,_y.a,gy.a]),Rr._41(512,by.a,by.a,[ya.a,_y.a]),Rr._41(512,Py.a,Py.a,[]),Rr._41(512,Oy.a,Oy.a,[Rl.a,Zi.a,_y.a]),Rr._41(512,Ey.b,Ey.b,[Yr.a,vy.a,Ma.a,yy.a,Zd.a,by.a,Hi.a,Py.a,Oy.a]),Rr._41(512,Cy.a,Cy.a,[]),Rr._41(512,Iy.a,Iy.a,[Kr.a,xi.a,Mi.a,bl.a]),Rr._41(512,Ry.a,Ry.a,[Kr.a,xi.a,ji.a,Ui.a,Iy.a,Li.a,ip.a]),Rr._41(512,Sy.a,Sy.a,[ra.a,Ry.a]),Rr._41(512,wy.a,wy.a,[Ry.a,Oa.a,Mi.a,Zi.a,bl.a,zr.a,ra.a,Rl.a,xi.a,ji.a]),Rr._41(512,Ay.a,Ay.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Ry.a,wy.a,bl.a,np.a,Rr.C]),Rr._41(512,Dy.a,Dy.a,[ya.a,Ry.a]),Rr._41(512,jy.a,jy.a,[xi.a,Kr.a,Li.a,Iy.a,Fi.a,Ry.a,Zi.a,ji.a,Mi.a,ra.a,Lp.a,bl.a,ip.a,Ma.a,Ay.a]),Rr._41(512,ky.a,ky.a,[jy.a]),Rr._41(512,Ty.a,Ty.a,[Rl.a,Ry.a,ra.a,zr.a]),Rr._41(512,xy.a,xy.a,[Ry.a,wy.a]),Rr._41(512,My.a,My.a,[Rl.a,Ry.a,ra.a,zr.a]),Rr._41(512,Ny.a,Ny.a,[Rl.a,Ry.a,ra.a,zr.a]),Rr._41(512,Uy.a,Uy.a,[Rl.a,Ry.a,ra.a,zr.a]),Rr._41(512,Fy.a,Fy.a,[Rl.a,Zi.a,Ry.a]),Rr._41(512,Ly.a,Ly.a,[ji.a,wy.a,Di.a,ya.a,Ry.a]),Rr._41(512,Hy.b,Hy.b,[Yr.a,Sy.a,Ma.a,Ay.a,Zd.a,Dy.a,qf.a,ky.a,Ty.a,xy.a,My.a,Ny.a,Uy.a,Fy.a,Xf.a,Ly.a]),Rr._41(512,By.a,By.a,[]),Rr._41(512,qy.a,qy.a,[ra.a]),Rr._41(512,Gy.a,Gy.a,[Kr.a,xi.a,ra.a,ji.a,ip.a]),Rr._41(512,Vy.a,Vy.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Gy.a]),Rr._41(512,Ky.a,Ky.a,[ya.a]),Rr._41(512,Wy.a,Wy.a,[]),Rr._41(512,zy.a,zy.a,[Rl.a,Zi.a]),Rr._41(512,$y.b,$y.b,[Yr.a,qy.a,Ma.a,Vy.a,Zd.a,Ky.a,Hi.a,Wy.a,zy.a]),Rr._41(512,Yy.a,Yy.a,[]),Rr._41(512,Qy.a,Qy.a,[]),Rr._41(512,Xy.a,Xy.a,[ra.a,lp.a,Zi.a,Fi.a,xi.a]),Rr._41(512,Jy.a,Jy.a,[Zi.a,Bi.a,xi.a,ms.a,bl.a,Oa.a,Li.a,ji.a,lp.a,rp.a]),Rr._41(512,Zy.a,Zy.a,[Zi.a,Li.a,ra.a,Fi.a,np.a,Kr.a,xi.a,Lp.a,Mi.a,bl.a,ms.a,ji.a,lp.a,Jy.a,rp.a,ip.a,Hv.a]),Rr._41(512,eb.a,eb.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Oa.a,np.a,lp.a,Zy.a]),Rr._41(512,tb.a,tb.a,[Zy.a]),Rr._41(512,nb.a,nb.a,[ya.a]),Rr._41(512,ob.a,ob.a,[zr.a,Rl.a]),Rr._41(512,rb.a,rb.a,[Rl.a,Zi.a]),Rr._41(512,ib.a,ib.a,[ji.a,lp.a,Di.a,Rl.a]),Rr._41(512,lb.a,lb.a,[Rl.a,ra.a,zr.a]),Rr._41(512,ab.a,ab.a,[Kp.a]),Rr._41(512,sb.b,sb.b,[Yr.a,Xy.a,Ma.a,eb.a,qf.a,tb.a,Zd.a,nb.a,ob.a,rb.a,Xf.a,ib.a,lb.a,Gp.a,ab.a]),Rr._41(512,ub.a,ub.a,[]),Rr._41(512,cb.a,cb.a,[ra.a]),Rr._41(512,db.a,db.a,[Bi.a,xi.a,Mi.a,ji.a]),Rr._41(512,fb.a,fb.a,[Li.a,xi.a,Ui.a,Zi.a,Mi.a,ji.a,db.a,ip.a]),Rr._41(512,pb.a,pb.a,[Bi.a,ms.a,db.a]),Rr._41(512,hb.a,hb.a,[Zi.a,Li.a,ra.a,Fi.a,Kr.a,xi.a,Lp.a,Mi.a,bl.a,ms.a,ji.a,fb.a,pb.a,db.a,ip.a,Hv.a]),Rr._41(512,mb.a,mb.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,fb.a,ls.a,hb.a]),Rr._41(512,_b.a,_b.a,[hb.a]),Rr._41(512,gb.a,gb.a,[ya.a,fb.a]),Rr._41(512,vb.a,vb.a,[zr.a,Rl.a,fb.a,ya.a]),Rr._41(512,yb.a,yb.a,[Rl.a,Zi.a]),Rr._41(512,bb.a,bb.a,[Rl.a,ra.a,zr.a,fb.a]),Rr._41(512,Pb.a,Pb.a,[Kp.a]),Rr._41(512,Ob.b,Ob.b,[Yr.a,cb.a,Ma.a,mb.a,qf.a,_b.a,Zd.a,gb.a,vb.a,yb.a,bb.a,Gp.a,Pb.a]),Rr._41(512,Eb.a,Eb.a,[]),Rr._41(512,Cb.a,Cb.a,[Bi.a,xi.a,Mi.a,Di.a,ji.a,Zi.a,Li.a,ip.a]),Rr._41(512,Ib.a,Ib.a,[Li.a,ra.a,zr.a,Ui.a,xi.a,Cb.a,Ir.c]),Rr._41(512,Rb.a,Rb.a,[ya.a]),Rr._41(512,Sb.a,Sb.a,[Rl.a,Zi.a]),Rr._41(512,wb.a,wb.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Cb.a]),Rr._41(512,Ab.b,Ab.b,[Yr.a,Ib.a,Zd.a,Rb.a,Sb.a,Ma.a,wb.a]),Rr._41(512,Db.a,Db.a,[]),Rr._41(512,jb.a,jb.a,[Kr.a,xi.a,ra.a,ji.a,Ui.a,ip.a]),Rr._41(512,kb.a,kb.a,[ra.a,jb.a]),Rr._41(512,Tb.a,Tb.a,[Kr.a,zr.a,Ui.a,Bi.a,Mi.a,xf.a,xi.a]),Rr._41(512,xb.a,xb.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,jb.a,Tb.a]),Rr._41(512,Mb.a,Mb.a,[ya.a,jb.a]),Rr._41(512,Nb.a,Nb.a,[]),Rr._41(512,Ub.a,Ub.a,[Rl.a,Zi.a,jb.a]),Rr._41(512,Fb.b,Fb.b,[Yr.a,kb.a,Ma.a,xb.a,Zd.a,Mb.a,Hi.a,Nb.a,Ub.a]),Rr._41(512,Lb.a,Lb.a,[]),Rr._41(512,Hb.a,Hb.a,[]),Rr._41(512,Bb.a,Bb.a,[jh.a,Hb.a]),Rr._41(512,qb.a,qb.a,[]),Rr._41(512,Gb.a,Gb.a,[jh.a,qb.a]),Rr._41(512,Vb.a,Vb.a,[]),Rr._41(512,Kb.a,Kb.a,[jh.a,Vb.a]),Rr._41(512,Wb.a,Wb.a,[Kr.a,xi.a,bl.a,Sh.a,Zi.a,ji.a,Ah.a]),Rr._41(512,zb.a,zb.a,[Kr.a,xi.a,ji.a,Zi.a,Mi.a,fh.a,Rh.a,Ui.a,bl.a,jh.a,Wb.a,zr.a,ip.a,tp.a]),Rr._41(512,$b.a,$b.a,[zr.a,Zi.a,ji.a,jh.a,zb.a,Ds.a,Wb.a,ya.a,xi.a,Rl.a]),Rr._41(512,Yb.a,Yb.a,[zr.a,Mi.a,Sh.a,xi.a,Zi.a,Di.a,ji.a,Ui.a,Rh.a]),Rr._41(512,Qb.a,Qb.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Rr.C,zb.a,Mi.a,$b.a,jh.a,Yb.a]),Rr._41(512,Xb.a,Xb.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,Fi.a,bl.a,zb.a,Wb.a,Qb.a,Sh.a,Rh.a,ip.a,Ma.a,ra.a]),Rr._41(512,Jb.a,Jb.a,[Xb.a]),Rr._41(512,Zb.a,Zb.a,[jh.a,Jb.a]),Rr._41(512,eP.a,eP.a,[]),Rr._41(512,tP.a,tP.a,[jh.a,eP.a]),Rr._41(512,nP.a,nP.a,[xi.a]),Rr._41(512,oP.a,oP.a,[jh.a,nP.a]),Rr._41(512,rP.a,rP.a,[]),Rr._41(512,iP.a,iP.a,[jh.a,rP.a]),Rr._41(512,lP.a,lP.a,[]),Rr._41(512,aP.a,aP.a,[jh.a,lP.a]),Rr._41(512,sP.a,sP.a,[]),Rr._41(512,uP.a,uP.a,[jh.a,sP.a]),Rr._41(512,cP.a,cP.a,[ra.a]),Rr._41(512,dP.a,dP.a,[Xb.a]),Rr._41(512,fP.a,fP.a,[ya.a,zb.a]),Rr._41(512,pP.a,pP.a,[ya.a,zr.a,xi.a,zb.a]),Rr._41(512,hP.a,hP.a,[zb.a,$b.a]),Rr._41(512,mP.a,mP.a,[Rl.a,Zi.a]),Rr._41(512,_P.a,_P.a,[ji.a,zb.a,Di.a,ya.a,$b.a]),Rr._41(512,gP.b,gP.b,[Yr.a,cP.a,Ma.a,Qb.a,qf.a,dP.a,Zd.a,fP.a,pP.a,hP.a,mP.a,Xf.a,_P.a]),Rr._41(512,vP.a,vP.a,[]),Rr._41(512,yP.a,yP.a,[ra.a]),Rr._41(512,zd.a,zd.a,[Kr.a,xi.a,bl.a,Lp.a,ji.a,Mi.a,Oa.a]),Rr._41(512,Wd.a,Wd.a,[Kr.a,Zi.a,xi.a,xf.a,Mi.a,ji.a,Ui.a,zd.a,bl.a,Lp.a,Fi.a,ip.a]),Rr._41(512,bP.a,bP.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,Bi.a,Mi.a,Wd.a,Rr.C]),Rr._41(512,PP.a,PP.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,Fi.a,bl.a,Wd.a,zd.a,bP.a,ji.a,Ma.a,ra.a,ip.a]),Rr._41(512,OP.a,OP.a,[PP.a]),Rr._41(512,EP.a,EP.a,[ya.a]),Rr._41(512,CP.a,CP.a,[ya.a,zr.a,xi.a]),Rr._41(512,IP.a,IP.a,[Rl.a,Zi.a]),Rr._41(512,RP.b,RP.b,[Yr.a,yP.a,Ma.a,bP.a,qf.a,OP.a,Zd.a,EP.a,CP.a,IP.a]),Rr._41(512,SP.a,SP.a,[]),Rr._41(512,wP.a,wP.a,[Kr.a,xi.a,ra.a,ji.a,fs.a,ip.a]),Rr._41(512,AP.a,AP.a,[xi.a,zr.a,Rl.a]),Rr._41(512,DP.a,DP.a,[ra.a,wP.a,AP.a,zr.a,Rl.a]),Rr._41(512,jP.a,jP.a,[ya.a]),Rr._41(512,kP.a,kP.a,[Rl.a,Zi.a]),Rr._41(512,TP.a,TP.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a]),Rr._41(512,xP.b,xP.b,[Yr.a,DP.a,Zd.a,jP.a,kP.a,Ma.a,TP.a]),Rr._41(512,MP.a,MP.a,[]),Rr._41(512,NP.a,NP.a,[ra.a]),Rr._41(512,UP.a,UP.a,[Kr.a,xi.a,Mi.a]),Rr._41(512,FP.a,FP.a,[Kr.a,xi.a,Li.a,Ui.a,ji.a,UP.a,ip.a]),Rr._41(512,LP.a,LP.a,[Zi.a]),Rr._41(512,HP.a,HP.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,FP.a,LP.a,Rr.C]),Rr._41(512,BP.a,BP.a,[ya.a]),Rr._41(512,qP.a,qP.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,ra.a,UP.a,Fi.a,FP.a,ji.a,bl.a,ip.a,Ma.a,HP.a]),Rr._41(512,GP.a,GP.a,[qP.a]),Rr._41(512,VP.a,VP.a,[Rl.a,Zi.a]),Rr._41(512,KP.b,KP.b,[Yr.a,NP.a,Ma.a,HP.a,Zd.a,BP.a,qf.a,GP.a,VP.a]),Rr._41(512,WP.a,WP.a,[]),Rr._41(512,zP.a,zP.a,[Zi.a,fh.a]),Rr._41(512,$P.a,$P.a,[Mh.a,zP.a]),Rr._41(512,YP.a,YP.a,[Zi.a]),Rr._41(512,QP.a,QP.a,[Mh.a,YP.a]),Rr._41(512,XP.a,XP.a,[Zi.a]),Rr._41(512,JP.a,JP.a,[Mh.a,XP.a]),Rr._41(512,ZP.a,ZP.a,[Zi.a]),Rr._41(512,eO.a,eO.a,[Mh.a,ZP.a]),Rr._41(512,tO.a,tO.a,[]),Rr._41(512,nO.a,nO.a,[Bi.a,xi.a,Mi.a,bl.a]),Rr._41(512,oO.a,oO.a,[Li.a,Ui.a,xi.a,ji.a,nO.a,ip.a]),Rr._41(512,rO.a,rO.a,[ra.a,oO.a]),Rr._41(512,iO.a,iO.a,[ya.a,oO.a]),Rr._41(512,lO.a,lO.a,[Zi.a,Bi.a,ms.a,xi.a,Mi.a,ji.a,oO.a,nO.a,Mh.a]),Rr._41(512,aO.a,aO.a,[Zi.a,Li.a,ra.a,Fi.a,Kr.a,xi.a,Lp.a,Mi.a,bl.a,ji.a,oO.a,lO.a,nO.a,ip.a]),Rr._41(512,sO.a,sO.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,np.a,Oa.a,oO.a,lO.a,aO.a]),Rr._41(512,uO.a,uO.a,[aO.a]),Rr._41(512,cO.a,cO.a,[Rl.a,Zi.a,oO.a]),Rr._41(512,dO.b,dO.b,[Yr.a,rO.a,Zd.a,iO.a,Ma.a,sO.a,qf.a,uO.a,cO.a]),Rr._41(512,fO.a,fO.a,[]),Rr._41(512,pO.a,pO.a,[Li.a,ra.a,Ui.a,xi.a,Mi.a,ji.a,ip.a]),Rr._41(512,hO.a,hO.a,[ra.a,pO.a]),Rr._41(512,mO.a,mO.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,pO.a]),Rr._41(512,_O.a,_O.a,[ya.a,pO.a]),Rr._41(512,gO.a,gO.a,[]),Rr._41(512,vO.a,vO.a,[Rl.a,Zi.a,pO.a]),Rr._41(512,yO.b,yO.b,[Yr.a,hO.a,Ma.a,mO.a,Zd.a,_O.a,Hi.a,gO.a,vO.a]),Rr._41(512,bO.a,bO.a,[]),Rr._41(512,PO.a,PO.a,[ra.a]),Rr._41(512,OO.a,OO.a,[Kr.a,xi.a]),Rr._41(512,EO.a,EO.a,[Kr.a,xi.a,Li.a,Ui.a,ji.a,Zi.a,OO.a,Fi.a,ip.a]),Rr._41(512,CO.a,CO.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,ra.a,Fi.a,EO.a,OO.a,ji.a,np.a,bl.a,ip.a]),Rr._41(512,IO.a,IO.a,[Zi.a,Li.a,ji.a,ra.a,Ui.a,xi.a,zr.a,Al.a,Hi.a,EO.a,Oa.a,Mi.a,ya.a,np.a,CO.a]),Rr._41(512,RO.a,RO.a,[CO.a]),Rr._41(512,SO.a,SO.a,[ya.a]),Rr._41(512,wO.a,wO.a,[zr.a,EO.a,ya.a,Rl.a]),Rr._41(512,AO.a,AO.a,[zr.a,EO.a,ya.a,Rl.a,ra.a]),Rr._41(512,DO.a,DO.a,[Rl.a,Mi.a]),Rr._41(512,jO.a,jO.a,[Rl.a,Zi.a]),Rr._41(512,kO.a,kO.a,[Kp.a]),Rr._41(512,TO.b,TO.b,[Yr.a,PO.a,Ma.a,IO.a,qf.a,RO.a,Zd.a,SO.a,wO.a,AO.a,DO.a,jO.a,Gp.a,kO.a]),Rr._41(512,xO.b,xO.b,[]),Rr._41(512,MO.a,MO.a,[Kr.a,xi.a]),Rr._41(512,NO.a,NO.a,[MO.a]),Rr._41(512,UO.a,UO.a,[Dh.a,NO.a]),Rr._41(512,FO.a,FO.a,[Kr.a,xi.a,Li.a,Mi.a]),Rr._41(512,LO.a,LO.a,[Kr.a,xi.a,Li.a,Oa.a,FO.a,ji.a,bl.a,Hf.a,Fi.a]),Rr._41(512,HO.a,HO.a,[LO.a,xi.a,Fi.a,Li.a,Lf.a,Al.a,tp.a,ji.a,Xf.a,Hf.a]),Rr._41(512,BO.a,BO.a,[Rl.a,LO.a]),Rr._41(512,qO.a,qO.a,[Rl.a,LO.a,xi.a]),Rr._41(512,GO.a,GO.a,[Rl.a,xi.a,LO.a]),Rr._41(512,VO.a,VO.a,[Kr.a,xi.a,Li.a,Zi.a,Lp.a,Mi.a,FO.a,Fi.a,LO.a,Oa.a,ji.a,bl.a]),Rr._41(512,KO.a,KO.a,[VO.a]),Rr._41(512,WO.a,WO.a,[LO.a]),Rr._41(131584,zO.a,zO.a,[xi.a,LO.a,Fi.a,zr.a,Zi.a]),Rr._41(131584,$O.a,$O.a,[xi.a,LO.a,Fi.a,zr.a,Zi.a]),Rr._41(512,YO.a,YO.a,[Rl.a,LO.a]),Rr._41(512,QO.a,QO.a,[ji.a,LO.a,yd.a]),Rr._41(512,XO.b,XO.b,[Wf.a,HO.a,Zd.a,BO.a,qO.a,GO.a,Zp.a,qf.a,KO.a,Ed.a,Rr.M,VO.a,Li.a,Lf.a,LO.a,xi.a,Rl.a,WO.a,Ch.a,Xf.a,ji.a,zO.a,$O.a,YO.a,QO.a]),Rr._41(512,JO.a,JO.a,[]),Rr._41(512,ZO.a,ZO.a,[Kr.a,xi.a,bl.a]),Rr._41(512,eE.a,eE.a,[Kr.a,xi.a,Li.a,ji.a,Zi.a,Oa.a,ZO.a,tp.a]),Rr._41(512,tE.a,tE.a,[eE.a]),Rr._41(512,nE.a,nE.a,[Rl.a,xi.a,eE.a,Fi.a]),Rr._41(512,oE.a,oE.a,[Kr.a,xi.a,Li.a,Lp.a,Mi.a,Zi.a,ZO.a,ji.a,Fi.a,eE.a,ba.a,bl.a]),Rr._41(512,rE.a,rE.a,[oE.a]),Rr._41(512,iE.b,iE.b,[Aa.a,tE.a,Zp.a,nE.a,qf.a,rE.a]),Rr._41(512,lE.a,lE.a,[Kr.a,Li.a,xi.a,bl.a,Oa.a,Hf.a,LO.a,Mi.a]),Rr._41(512,aE.a,aE.a,[Fi.a,xi.a,ji.a,lE.a,tp.a,Xf.a]),Rr._41(512,sE.a,sE.a,[Li.a,Lf.a,lE.a]),Rr._41(512,uE.a,uE.a,[lE.a,xi.a]),Rr._41(512,cE.a,cE.a,[Li.a,Fi.a,xi.a,Lf.a,lE.a,Mi.a,Hf.a,uE.a]),Rr._41(512,dE.a,dE.a,[ji.a,lE.a,Rl.a,Fi.a]),Rr._41(512,fE.b,fE.b,[Wf.a,aE.a,Ch.a,sE.a,qf.a,cE.a,Rr.M,Li.a,Lf.a,Jd.a,Xf.a,dE.a]),Rr._41(512,pE.a,pE.a,[Kr.a,xi.a,Bi.a,Ui.a,xf.a,ji.a,Li.a]),Rr._41(512,hE.b,hE.b,[Jd.a,pE.a,Fi.a,xi.a,Kr.a]),Rr._41(512,mE.a,mE.a,[Yb.a]),Rr._41(512,_E.a,_E.a,[Ah.a,mE.a]),Rr._41(512,gE.a,gE.a,[Yb.a]),Rr._41(512,vE.a,vE.a,[Ah.a,gE.a]),Rr._41(512,yE.a,yE.a,[Rh.a,Sh.a]),Rr._41(512,bE.a,bE.a,[Rh.a,Yb.a,yE.a]),Rr._41(512,PE.a,PE.a,[Ah.a,bE.a]),Rr._41(512,OE.a,OE.a,[Ah.a,yE.a]),Rr._41(512,EE.a,EE.a,[Yb.a]),Rr._41(512,CE.a,CE.a,[Ah.a,EE.a]),Rr._41(512,IE.a,IE.a,[Yb.a]),Rr._41(512,RE.a,RE.a,[Ah.a,IE.a]),Rr._41(512,SE.a,SE.a,[Yb.a,Sh.a]),Rr._41(512,wE.a,wE.a,[Ah.a,SE.a]),Rr._41(512,AE.a,AE.a,[Yb.a]),Rr._41(512,DE.a,DE.a,[Ah.a,AE.a]),Rr._41(512,jE.a,jE.a,[Yb.a]),Rr._41(512,kE.a,kE.a,[Ah.a,jE.a]),Rr._41(512,TE.a,TE.a,[Rh.a,Sh.a]),Rr._41(512,xE.a,xE.a,[Ah.a,TE.a]),Rr._41(512,ME.a,ME.a,[]),Rr._41(512,NE.a,NE.a,[ji.a,zr.a]),Rr._41(512,UE.a,UE.a,[Rh.a,NE.a]),Rr._41(512,FE.a,FE.a,[ji.a]),Rr._41(512,LE.a,LE.a,[FE.a]),Rr._41(512,HE.a,HE.a,[Rh.a,LE.a]),Rr._41(512,BE.a,BE.a,[NE.a]),Rr._41(512,qE.a,qE.a,[Rh.a,BE.a]),Rr._41(512,GE.a,GE.a,[Sh.a]),Rr._41(512,VE.a,VE.a,[Rh.a,GE.a]),Rr._41(512,KE.a,KE.a,[Sh.a,Yb.a]),Rr._41(512,WE.a,WE.a,[Rh.a,KE.a]),Rr._41(512,zE.a,zE.a,[Sh.a]),Rr._41(512,$E.a,$E.a,[Rh.a,zE.a]),Rr._41(512,YE.a,YE.a,[]),Rr._41(512,QE.a,QE.a,[Rh.a,YE.a]),Rr._41(512,XE.a,XE.a,[ji.a,Yb.a,Mi.a,zr.a]),Rr._41(512,JE.a,JE.a,[Rh.a,XE.a]),Rr._41(512,ZE.a,ZE.a,[Sh.a]),Rr._41(512,eC.a,eC.a,[Rh.a,ZE.a]),Rr._41(512,tC.a,tC.a,[Sh.a]),Rr._41(512,nC.a,nC.a,[Rh.a,tC.a]),Rr._41(512,oC.a,oC.a,[Sh.a,Yb.a]),Rr._41(512,rC.a,rC.a,[Rh.a,oC.a]),Rr._41(512,iC.a,iC.a,[Rh.a,FE.a]),Rr._41(512,lC.a,lC.a,[ji.a,zr.a]),Rr._41(512,aC.a,aC.a,[Rh.a,lC.a]),Rr._41(512,sC.a,sC.a,[tC.a]),Rr._41(512,uC.a,uC.a,[Rh.a,sC.a]),Rr._41(512,cC.a,cC.a,[ji.a]),Rr._41(512,dC.a,dC.a,[Rh.a,cC.a]),Rr._41(512,fC.a,fC.a,[ji.a]),Rr._41(512,pC.a,pC.a,[Rh.a,fC.a]),Rr._41(512,hC.a,hC.a,[]),Rr._41(512,mC.a,mC.a,[]),Rr._41(512,_C.a,_C.a,[Aa.a,mC.a]),Rr._41(512,gC.a,gC.a,[]),Rr._41(512,vC.a,vC.a,[Dl.a,gC.a]),Rr._41(512,yC.a,yC.a,[]),Rr._41(512,bC.a,bC.a,[Dl.a,yC.a]),Rr._41(512,PC.a,PC.a,[]),Rr._41(512,OC.a,OC.a,[Dl.a,PC.a]),Rr._41(512,EC.a,EC.a,[]),Rr._41(512,CC.a,CC.a,[Dl.a,EC.a]),Rr._41(512,IC.a,IC.a,[Rr.o]),Rr._41(512,RC.a,RC.a,[Dl.a,IC.a]),Rr._41(512,SC.a,SC.a,[]),Rr._41(512,wC.a,wC.a,[Dl.a,SC.a]),Rr._41(512,AC.a,AC.a,[]),Rr._41(512,DC.a,DC.a,[Dl.a,AC.a]),Rr._41(512,jC.a,jC.a,[]),Rr._41(512,kC.a,kC.a,[Dl.a,jC.a]),Rr._41(512,TC.a,TC.a,[Fi.a,bd.a,xi.a,Mi.a,ji.a]),Rr._41(512,xC.a,xC.a,[Dl.a,TC.a]),Rr._41(512,MC.a,MC.a,[Mi.a,Di.a]),Rr._41(512,NC.a,NC.a,[Dl.a,MC.a]),Rr._41(512,UC.a,UC.a,[bd.a,xi.a]),Rr._41(512,FC.a,FC.a,[Dl.a,UC.a]),Rr._41(512,LC.a,LC.a,[]),Rr._41(512,HC.a,HC.a,[Dl.a,LC.a]),Rr._41(512,BC.a,BC.a,[]),Rr._41(512,qC.a,qC.a,[Dl.a,BC.a]),Rr._41(512,GC.a,GC.a,[]),Rr._41(512,VC.a,VC.a,[Dl.a,GC.a]),Rr._41(512,KC.a,KC.a,[]),Rr._41(512,WC.a,WC.a,[Kr.a,Pf.a]),Rr._41(512,zC.a,zC.a,[xi.a]),Rr._41(512,Sr.a,Sr.a,[Il.a,Jd.a,WC.a,yi.a,xi.a,Bi.a,Fi.a,qf.a,zC.a]),Rr._41(256,Dd.l,"XSRF-TOKEN",[]),Rr._41(256,Dd.m,"X-XSRF-TOKEN",[]),Rr._41(256,lf.a,$C.a,[]),Rr._41(256,wr.a,gd.a,[]),Rr._41(256,Ci.a,"/",[])])}),QC=n(1957);n(1973);Object(QC.shim)(),Object(Rr._15)(),Object(Ir.j)().bootstrapModuleFactory(YC)},,,,,,,,,,,,,function(e,t,n){function o(e){return n(r(e))}function r(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./af":823,"./af.js":823,"./ar":824,"./ar-dz":825,"./ar-dz.js":825,"./ar-kw":826,"./ar-kw.js":826,"./ar-ly":827,"./ar-ly.js":827,"./ar-ma":828,"./ar-ma.js":828,"./ar-sa":829,"./ar-sa.js":829,"./ar-tn":830,"./ar-tn.js":830,"./ar.js":824,"./az":831,"./az.js":831,"./be":832,"./be.js":832,"./bg":833,"./bg.js":833,"./bm":834,"./bm.js":834,"./bn":835,"./bn.js":835,"./bo":836,"./bo.js":836,"./br":837,"./br.js":837,"./bs":838,"./bs.js":838,"./ca":839,"./ca.js":839,"./cs":840,"./cs.js":840,"./cv":841,"./cv.js":841,"./cy":842,"./cy.js":842,"./da":843,"./da.js":843,"./de":844,"./de-at":845,"./de-at.js":845,"./de-ch":846,"./de-ch.js":846,"./de.js":844,"./dv":847,"./dv.js":847,"./el":848,"./el.js":848,"./en-SG":849,"./en-SG.js":849,"./en-au":850,"./en-au.js":850,"./en-ca":851,"./en-ca.js":851,"./en-gb":852,"./en-gb.js":852,"./en-ie":853,"./en-ie.js":853,"./en-il":854,"./en-il.js":854,"./en-nz":855,"./en-nz.js":855,"./eo":856,"./eo.js":856,"./es":857,"./es-do":858,"./es-do.js":858,"./es-us":859,"./es-us.js":859,"./es.js":857,"./et":860,"./et.js":860,"./eu":861,"./eu.js":861,"./fa":862,"./fa.js":862,"./fi":863,"./fi.js":863,"./fo":864,"./fo.js":864,"./fr":865,"./fr-ca":866,"./fr-ca.js":866,"./fr-ch":867,"./fr-ch.js":867,"./fr.js":865,"./fy":868,"./fy.js":868,"./ga":869,"./ga.js":869,"./gd":870,"./gd.js":870,"./gl":871,"./gl.js":871,"./gom-latn":872,"./gom-latn.js":872,"./gu":873,"./gu.js":873,"./he":874,"./he.js":874,"./hi":875,"./hi.js":875,"./hr":876,"./hr.js":876,"./hu":877,"./hu.js":877,"./hy-am":878,"./hy-am.js":878,"./id":879,"./id.js":879,"./is":880,"./is.js":880,"./it":881,"./it-ch":882,"./it-ch.js":882,"./it.js":881,"./ja":883,"./ja.js":883,"./jv":884,"./jv.js":884,"./ka":885,"./ka.js":885,"./kk":886,"./kk.js":886,"./km":887,"./km.js":887,"./kn":888,"./kn.js":888,"./ko":889,"./ko.js":889,"./ku":890,"./ku.js":890,"./ky":891,"./ky.js":891,"./lb":892,"./lb.js":892,"./lo":893,"./lo.js":893,"./lt":894,"./lt.js":894,"./lv":895,"./lv.js":895,"./me":896,"./me.js":896,"./mi":897,"./mi.js":897,"./mk":898,"./mk.js":898,"./ml":899,"./ml.js":899,"./mn":900,"./mn.js":900,"./mr":901,"./mr.js":901,"./ms":902,"./ms-my":903,"./ms-my.js":903,"./ms.js":902,"./mt":904,"./mt.js":904,"./my":905,"./my.js":905,"./nb":906,"./nb.js":906,"./ne":907,"./ne.js":907,"./nl":908,"./nl-be":909,"./nl-be.js":909,"./nl.js":908,"./nn":910,"./nn.js":910,"./pa-in":911,"./pa-in.js":911,"./pl":912,"./pl.js":912,"./pt":913,"./pt-br":914,"./pt-br.js":914,"./pt.js":913,"./ro":915,"./ro.js":915,"./ru":916,"./ru.js":916,"./sd":917,"./sd.js":917,"./se":918,"./se.js":918,"./si":919,"./si.js":919,"./sk":920,"./sk.js":920,"./sl":921,"./sl.js":921,"./sq":922,"./sq.js":922,"./sr":923,"./sr-cyrl":924,"./sr-cyrl.js":924,"./sr.js":923,"./ss":925,"./ss.js":925,"./sv":926,"./sv.js":926,"./sw":927,"./sw.js":927,"./ta":928,"./ta.js":928,"./te":929,"./te.js":929,"./tet":930,"./tet.js":930,"./tg":931,"./tg.js":931,"./th":932,"./th.js":932,"./tl-ph":933,"./tl-ph.js":933,"./tlh":934,"./tlh.js":934,"./tr":935,"./tr.js":935,"./tzl":936,"./tzl.js":936,"./tzm":937,"./tzm-latn":938,"./tzm-latn.js":938,"./tzm.js":937,"./ug-cn":939,"./ug-cn.js":939,"./uk":940,"./uk.js":940,"./ur":941,"./ur.js":941,"./uz":942,"./uz-latn":943,"./uz-latn.js":943,"./uz.js":942,"./vi":944,"./vi.js":944,"./x-pseudo":945,"./x-pseudo.js":945,"./yo":946,"./yo.js":946,"./zh-cn":947,"./zh-cn.js":947,"./zh-hk":948,"./zh-hk.js":948,"./zh-tw":949,"./zh-tw.js":949};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=1639},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(){function e(e,t,o,r,i,l,a,s){void 0===i&&(i=""),void 0===l&&(l=""),this.textUtils=e,this.mimeUtils=t,this.isFile=o,this.isDirectory=r,this.name=i,this.fullPath=l,this.fileSystem=a,this.nativeURL=s,this.fs=n(451)}return e.prototype.copyTo=function(e,t,n,o){var r=this,a=this.fullPath,s=this.textUtils.concatenatePaths(e.fullPath,t=t||this.name),u=this.fs.createReadStream(a),c=this.fs.createWriteStream(s);new Promise(function(e,t){u.on("error",t),c.on("error",t),c.on("close",e),u.pipe(c)}).then(function(){n&&n(new(r.isDirectory?i:l)(r.textUtils,r.mimeUtils,t,s))}).catch(function(e){o&&o(e)})},e.prototype.getMetadata=function(e,t){this.fs.stat(this.fullPath,function(n,o){n?t&&t(n):e&&e({size:o.size,modificationTime:o.mtime})})},e.prototype.getParent=function(e,t){var n=this,o="/"==this.fullPath.slice(-1)?this.fullPath.slice(0,-1):this.fullPath,r=o.substr(0,o.lastIndexOf("/"));this.fs.stat(r,function(o,l){if(o||!l.isDirectory())t&&t(o);else{var a=r.substr(r.lastIndexOf("/")+1);e&&e(new i(n.textUtils,n.mimeUtils,a,r))}})},e.prototype.moveTo=function(e,t,n,o){var r=this,a=this.fullPath,s=this.textUtils.concatenatePaths(e.fullPath,t=t||this.name);this.fs.rename(a,s,function(e){if(e)o&&o(e);else{n&&n(new(r.isDirectory?i:l)(r.textUtils,r.mimeUtils,t,s))}})},e.prototype.remove=function(e,t){(this.isDirectory?this.fs.rmdir:this.fs.unlink)(this.fullPath,function(n){n<0?t&&t(n):e&&e()})},e.prototype.setMetadata=function(e,t,n){t&&t("Not supported")},e.prototype.toInternalURL=function(){return"file://"+this.fullPath},e.prototype.toURL=function(){return this.fullPath},e}(),i=function(e){function t(t,n,o,r,i,l){void 0===o&&(o=""),void 0===r&&(r="");var a=e.call(this,t,n,!1,!0,o,r,i,l)||this;return a.fullPath&&!/\/$/.test(a.fullPath)&&(a.fullPath+="/"),a.nativeURL&&!/\/$/.test(a.nativeURL)&&(a.nativeURL+="/"),a}return o(t,e),t.prototype.createReader=function(){return new a(this.textUtils,this.mimeUtils,this.fullPath)},t.prototype.deleteEmptyFolder=function(e,t,n){this.fs.rmdir(e,function(e){e?n&&n(e):t&&t()})},t.prototype.getDirectory=function(e,t,n,o){this.getDirOrFile(!0,e,t,n,o)},t.prototype.getDirOrFile=function(e,n,o,r,i){var a=this,s=function(){r&&r(new(e?t:l)(a.textUtils,a.mimeUtils,c,d))},u=function(t){e?a.fs.mkdir(d,t):a.fs.writeFile(d,"",t)},c=n.substr(n.lastIndexOf("/")+1),d=this.textUtils.concatenatePaths(this.fullPath,n);this.fs.stat(d,function(e){e?o.create?u(function(e){if(e)if("EEXIST"===e.code)s();else if("ENOENT"===e.code){var t=d.substring(0,d.lastIndexOf("/"));t?a.getDirectory(t,o,function(){u(function(e){e?i&&i(e):s()})},i):i&&i(e)}else i&&i(e);else s()}):i&&i(e):s()})},t.prototype.getFile=function(e,t,n,o){this.getDirOrFile(!1,e,t,n,o)},t.prototype.removeRecursively=function(e,t){var n=this;new Promise(function(e,t){n.removeRecursiveFn(n.fullPath,e,t)}).then(function(){e&&e()}).catch(function(e){t&&t(e)})},t.prototype.removeRecursiveFn=function(e,t,n){var o=this;this.fs.stat(e,function(r,i){r?n&&n(r):i.isFile()?o.fs.unlink(e,function(e){e?n&&n(e):t&&t()}):o.fs.readdir(e,function(r,i){if(r)n&&n(r);else if(i.length){var l=0;i.forEach(function(r){o.removeRecursiveFn(o.textUtils.concatenatePaths(e,r),function(){++l==i.length&&o.deleteEmptyFolder(e,t,n)},n)})}else o.deleteEmptyFolder(e,t,n)})})},t}(r),l=function(e){function t(t,n,o,r,i,l){void 0===o&&(o=""),void 0===r&&(r="");var a=e.call(this,t,n,!0,!1,o,r,i,l)||this;return a.fullPath&&/\/$/.test(a.fullPath)&&(a.fullPath=a.fullPath.substring(0,a.fullPath.length-1)),a.nativeURL&&/\/$/.test(a.nativeURL)&&(a.nativeURL=a.nativeURL.substring(0,a.nativeURL.length-1)),a}return o(t,e),t.prototype.createWriter=function(e,t){var n=this;this.file(function(t){e&&e(new s(n.textUtils,n.mimeUtils,t))},t)},t.prototype.file=function(e,t){var n=this;this.getMetadata(function(o){n.fs.readFile(n.fullPath,function(r,i){if(r)t&&t(r);else{i=Uint8Array.from(i).buffer;var l=new File([i],n.name||"",{lastModified:o.modificationTime||null,type:n.mimeUtils.getMimeType(n.mimeUtils.getFileExtension(n.name))||null});l.localURL=n.fullPath,l.start=0,l.end=l.size,e&&e(l)}})},t)},t}(r),a=function(){function e(e,t,o){void 0===o&&(o=null),this.textUtils=e,this.mimeUtils=t,this.localURL=o,this.fs=n(451)}return e.prototype.readEntries=function(e,t){var n=this;this.fs.readdir(this.localURL,function(o,r){if(o)t&&t(o);else try{for(var a=[],s=0;s<r.length;s++){var u=r[s],c=n.textUtils.concatenatePaths(n.localURL,u),d=n.fs.statSync(c);d.isDirectory()?a.push(new i(n.textUtils,n.mimeUtils,u,c)):d.isFile()&&a.push(new l(n.textUtils,n.mimeUtils,u,c))}e&&e(a)}catch(e){t&&t(e)}})},e}(),s=function(){function t(e,t,o){this.textUtils=e,this.mimeUtils=t,this.file=o,this.fs=n(451),this.fileName="",this.length=0,this.size=0,this.position=0,this.readyState=0,this.result=null,this.error=null,o&&(this.localURL=o.localURL||o,this.length=o.size||0)}return t.prototype.abort=function(){},t.prototype.seek=function(e){this.position=e},t.prototype.truncate=function(e){this.size=e},t.prototype.write=function(t){var n=this;if(t&&"[object Blob]"==t.toString()){var o=new FileReader;o.onload=function(){2==o.readyState&&n.writeFile(new e(o.result))},o.readAsArrayBuffer(t)}else t&&"[object ArrayBuffer]"==t.toString()?(t=new Uint8Array(t),this.writeFile(e.from(t))):this.writeFile(t)},t.prototype.writeFile=function(e){var t=this,n=this.fs.createWriteStream(this.localURL,{flags:"r+",start:this.position});n.on("error",function(e){t.onerror&&t.onerror(e)}),n.end(e,function(){t.position+=e.length,t.onwrite&&t.onwrite(),t.onwriteend&&t.onwriteend(),n.destroy()}),this.onwritestart&&this.onwritestart()},t}()}).call(t,n(357).Buffer)},,,function(e,t){e.exports=require("stream")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var o=n(0),r=n(13),i=n(38),l=n(4),a=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n,o){this.domUtils=t,this.courseHelper=n,this.courseProvider=o,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.element.addEventListener("click",function(t){if(e.module||e.moduleId){t.preventDefault(),t.stopPropagation();var n,o=e.domUtils.showModalLoading(),r="string"==typeof e.courseId?parseInt(e.courseId,10):e.courseId;e.module?n=Promise.resolve(e.module):(e.moduleId="string"==typeof e.moduleId?parseInt(e.moduleId,10):e.moduleId,n=e.courseProvider.getModule(e.moduleId,r)),n.then(function(t){return e.courseHelper.downloadModuleAndOpenFile(t,r,e.component,e.componentId||t.id,e.files)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)}).finally(function(){o.dismiss()})}})},a([Object(o.D)(),s("design:type",Object)],e.prototype,"module",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"moduleId",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"courseId",void 0),a([Object(o.D)(),s("design:type",String)],e.prototype,"component",void 0),a([Object(o.D)(),s("design:type",Object)],e.prototype,"componentId",void 0),a([Object(o.D)(),s("design:type",Array)],e.prototype,"files",void 0),e=a([Object(o.s)({selector:"[core-course-download-module-main-file]"}),s("design:paramtypes",[o.t,l.a,i.a,r.a])],e)}();n.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e=c([Object(o.I)({declarations:[u],imports:[],exports:[u]})],e)}()},function(e,t,n){"use strict";var o=n(0),r=n(5),i=n(3),l=n(4),a=n(2),s=n(58),u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,r,i){this.translate=t,this.domUtils=n,this.sitePluginsProvider=r,this.parentContent=i,this.onSuccess=new o.v,this.onError=new o.v,this.onDone=new o.v,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.parentContent&&this.parentContent.invalidateObservable&&(this.invalidateObserver=this.parentContent.invalidateObservable.subscribe(function(){e.invalidate()}))},e.prototype.callWS=function(){var e=this,t=this.getParamsForWS();return this.sitePluginsProvider.callWS(this.name,t,this.preSets).then(function(t){return e.onSuccess.emit(t),e.wsCallSuccess(t)}).catch(function(t){return e.onError.emit(t),Promise.reject(t)}).finally(function(){e.onDone.emit()})},e.prototype.getParamsForWS=function(){var e=this.params||{};return this.parentContent&&(e=this.sitePluginsProvider.loadOtherDataInArgs(e,this.parentContent.otherData,this.useOtherDataForWS)),this.form&&document.forms[this.form]&&(e=Object.assign(e,this.domUtils.getDataFromForm(document.forms[this.form]))),e},e.prototype.wsCallSuccess=function(e){},e.prototype.invalidate=function(){var e=this.getParamsForWS();return this.sitePluginsProvider.invalidateCallWS(this.name,e,this.preSets)},e.prototype.ngOnDestroy=function(){this.invalidateObserver&&this.invalidateObserver.unsubscribe()},u([Object(o.D)(),c("design:type",String)],e.prototype,"name",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"params",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"preSets",void 0),u([Object(o.D)(),c("design:type",Object)],e.prototype,"useOtherDataForWS",void 0),u([Object(o.D)(),c("design:type",String)],e.prototype,"form",void 0),u([Object(o.O)(),c("design:type",o.v)],e.prototype,"onSuccess",void 0),u([Object(o.O)(),c("design:type",o.v)],e.prototype,"onError",void 0),u([Object(o.O)(),c("design:type",o.v)],e.prototype,"onDone",void 0),e}(),f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e){function t(t,n,o,r,i,l){var a=e.call(this,t,n,o,r,i)||this;return a.translate=n,a.domUtils=o,a.sitePluginsProvider=r,a.parentContent=i,a.utils=l,a}return f(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.element.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),void 0!==t.confirmMessage?t.domUtils.showConfirm(t.confirmMessage||t.translate.instant("core.areyousure")).then(function(){t.callWS()}).catch(function(){}):t.callWS()})},t.prototype.callWS=function(){var t=this,n=this.domUtils.showModalLoading();return e.prototype.callWS.call(this).catch(function(e){(void 0===t.showError||t.utils.isTrueOrOne(t.showError))&&t.domUtils.showErrorModalDefault(e,"core.serverconnection",!0)}).finally(function(){n.dismiss()})},p([Object(o.D)(),h("design:type",String)],t.prototype,"confirmMessage",void 0),p([Object(o.D)(),h("design:type",Object)],t.prototype,"showError",void 0),t}(d),_=n(156),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},P=function(e){function t(t,n,o,r,i,l,a){var s=e.call(this,t,n,o,r,i,l)||this;return s.navCtrl=a,s}return g(t,e),t.prototype.wsCallSuccess=function(e){void 0!==this.successMessage&&this.domUtils.showToast(this.successMessage||this.translate.instant("core.success")),this.utils.isTrueOrOne(this.goBackOnSuccess)?this.navCtrl.pop():this.utils.isTrueOrOne(this.refreshOnSuccess)&&this.parentContent&&this.parentContent.refreshContent(!0)},v([Object(o.D)(),y("design:type",String)],t.prototype,"successMessage",void 0),v([Object(o.D)(),y("design:type",Object)],t.prototype,"goBackOnSuccess",void 0),v([Object(o.D)(),y("design:type",Object)],t.prototype,"refreshOnSuccess",void 0),t=v([Object(o.s)({selector:"[core-site-plugins-call-ws]"}),b(4,Object(o.N)()),y("design:paramtypes",[o.t,i.c,l.a,s.a,_.a,a.a,r.s])],t)}(m),O=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},R=function(e){function t(t,n,o,r,i,l,a){var s=e.call(this,t,n,o,r,i,l)||this;return s.navCtrl=a,s}return O(t,e),t.prototype.wsCallSuccess=function(e){var t=this.args||{};if(this.parentContent&&(t=this.sitePluginsProvider.loadOtherDataInArgs(this.args,this.parentContent.otherData,this.useOtherData)),t=Object.assign(t,e),this.utils.isTrueOrOne(this.samePage))this.parentContent&&this.parentContent.updateContent(t,this.component,this.method,this.jsData,this.newContentPreSets);else{var n=this.jsData;!0===n&&this.parentContent&&(n=this.parentContent.data),this.navCtrl.push("CoreSitePluginsPluginPage",{title:this.title||this.parentContent&&this.parentContent.pageTitle,component:this.component||this.parentContent&&this.parentContent.component,method:this.method||this.parentContent&&this.parentContent.method,args:t,initResult:this.parentContent&&this.parentContent.initResult,jsData:n,preSets:this.newContentPreSets})}},E([Object(o.D)(),C("design:type",String)],t.prototype,"component",void 0),E([Object(o.D)(),C("design:type",String)],t.prototype,"method",void 0),E([Object(o.D)(),C("design:type",Object)],t.prototype,"args",void 0),E([Object(o.D)(),C("design:type",String)],t.prototype,"title",void 0),E([Object(o.D)(),C("design:type",Object)],t.prototype,"samePage",void 0),E([Object(o.D)(),C("design:type",Array)],t.prototype,"useOtherData",void 0),E([Object(o.D)(),C("design:type",Object)],t.prototype,"jsData",void 0),E([Object(o.D)(),C("design:type",Object)],t.prototype,"newContentPreSets",void 0),t=E([Object(o.s)({selector:"[core-site-plugins-call-ws-new-content]"}),I(4,Object(o.N)()),I(6,Object(o.N)()),C("design:paramtypes",[o.t,i.c,l.a,s.a,_.a,a.a,r.s])],t)}(m),S=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},A=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},D=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},j=function(e){function t(t,n,o,r,i){return e.call(this,t,n,o,r,i)||this}return S(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.callWS().catch(function(){})},t=w([Object(o.s)({selector:"[core-site-plugins-call-ws-on-load]"}),D(4,Object(o.N)()),A("design:paramtypes",[o.t,i.c,l.a,s.a,_.a])],t)}(d),k=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},T=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}},M=function(){function e(e,t,n,o,r,i){this.utils=t,this.navCtrl=n,this.parentContent=o,this.domUtils=r,this.sitePluginsProvider=i,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.element.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=e.args||{};if(e.parentContent&&(n=e.sitePluginsProvider.loadOtherDataInArgs(e.args,e.parentContent.otherData,e.useOtherData)),e.form&&document.forms[e.form]&&(n=Object.assign(n,e.domUtils.getDataFromForm(document.forms[e.form]))),e.utils.isTrueOrOne(e.samePage))e.parentContent&&e.parentContent.updateContent(n,e.component,e.method,e.jsData,e.preSets);else{var o=e.jsData;!0===o&&(o=e.parentContent&&e.parentContent.data||{}),e.navCtrl.push("CoreSitePluginsPluginPage",{title:e.title||e.parentContent&&e.parentContent.pageTitle,component:e.component||e.parentContent&&e.parentContent.component,method:e.method||e.parentContent&&e.parentContent.method,args:n,initResult:e.parentContent&&e.parentContent.initResult,jsData:o,preSets:e.preSets})}})},k([Object(o.D)(),T("design:type",String)],e.prototype,"component",void 0),k([Object(o.D)(),T("design:type",String)],e.prototype,"method",void 0),k([Object(o.D)(),T("design:type",Object)],e.prototype,"args",void 0),k([Object(o.D)(),T("design:type",String)],e.prototype,"title",void 0),k([Object(o.D)(),T("design:type",Object)],e.prototype,"samePage",void 0),k([Object(o.D)(),T("design:type",Object)],e.prototype,"useOtherData",void 0),k([Object(o.D)(),T("design:type",String)],e.prototype,"form",void 0),k([Object(o.D)(),T("design:type",Object)],e.prototype,"jsData",void 0),k([Object(o.D)(),T("design:type",Object)],e.prototype,"preSets",void 0),e=k([Object(o.s)({selector:"[core-site-plugins-new-content]"}),x(2,Object(o.N)()),x(3,Object(o.N)()),T("design:paramtypes",[o.t,a.a,r.s,_.a,l.a,s.a])],e)}();n.d(t,"a",function(){return U});var N=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},U=function(){function e(){}return e=N([Object(o.I)({declarations:[P,R,j,M],imports:[],exports:[P,R,j,M]})],e)}()}],[1626]);